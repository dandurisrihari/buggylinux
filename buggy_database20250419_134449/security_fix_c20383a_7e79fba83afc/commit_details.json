{
  "hash": "c20383ad1656b0f6354dd50e4acd894f9d94090d",
  "hash_short": "c20383ad",
  "subject": "s390/qeth: improve completion of pending TX buffers",
  "body": "The current design attaches a pending TX buffer to a custom\nsingle-linked list, which is anchored at the buffer's slot on the\nTX ring. The buffer is then checked for final completion whenever\nthis slot is processed during a subsequent TX NAPI poll cycle.\n\nBut if there's insufficient traffic on the ring, we might never make\nenough progress to get back to this ring slot and discover the pending\nbuffer's final TX completion. In particular if this missing TX\ncompletion blocks the application from sending further traffic.\n\nSo convert the custom single-linked list code to a per-queue list_head,\nand scan this list on every TX NAPI cycle.\n\nFixes: 0da9581ddb0f (\"qeth: exploit asynchronous delivery of storage blocks\")\nSigned-off-by: Julian Wiedmann <jwi@linux.ibm.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "full_message": "s390/qeth: improve completion of pending TX buffers\n\nThe current design attaches a pending TX buffer to a custom\nsingle-linked list, which is anchored at the buffer's slot on the\nTX ring. The buffer is then checked for final completion whenever\nthis slot is processed during a subsequent TX NAPI poll cycle.\n\nBut if there's insufficient traffic on the ring, we might never make\nenough progress to get back to this ring slot and discover the pending\nbuffer's final TX completion. In particular if this missing TX\ncompletion blocks the application from sending further traffic.\n\nSo convert the custom single-linked list code to a per-queue list_head,\nand scan this list on every TX NAPI cycle.\n\nFixes: 0da9581ddb0f (\"qeth: exploit asynchronous delivery of storage blocks\")\nSigned-off-by: Julian Wiedmann <jwi@linux.ibm.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "author_name": "Julian Wiedmann",
  "author_email": "jwi@linux.ibm.com",
  "author_date": "Tue Mar 9 17:52:19 2021 +0100",
  "author_date_iso": "2021-03-09T17:52:19+01:00",
  "committer_name": "David S. Miller",
  "committer_email": "davem@davemloft.net",
  "committer_date": "Tue Mar 9 16:14:54 2021 -0800",
  "committer_date_iso": "2021-03-09T16:14:54-08:00",
  "files_changed": [
    "drivers/s390/net/qeth_core.h",
    "drivers/s390/net/qeth_core_main.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "drivers/s390/net/qeth_core.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "drivers/s390/net/qeth_core_main.c",
      "insertions": 28,
      "deletions": 41
    }
  ],
  "total_insertions": 30,
  "total_deletions": 42,
  "total_changes": 72,
  "parents": [
    "e7a36d27f6b9f389e41d8189a8a08919c6835732"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "exploit"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/s390/net/qeth_core.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/s390/net/qeth_core_main.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}