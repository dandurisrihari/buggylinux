{
  "hash": "0e33cf955f07e3991e45109cb3e29fbc9ca51d06",
  "hash_short": "0e33cf95",
  "subject": "Merge tag 'rfds-for-linus-2024-03-11' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip",
  "body": "Pull x86 RFDS mitigation from Dave Hansen:\n \"RFDS is a CPU vulnerability that may allow a malicious userspace to\n  infer stale register values from kernel space. Kernel registers can\n  have all kinds of secrets in them so the mitigation is basically to\n  wait until the kernel is about to return to userspace and has user\n  values in the registers. At that point there is little chance of\n  kernel secrets ending up in the registers and the microarchitectural\n  state can be cleared.\n\n  This leverages some recent robustness fixes for the existing MDS\n  vulnerability. Both MDS and RFDS use the VERW instruction for\n  mitigation\"\n\n* tag 'rfds-for-linus-2024-03-11' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip:\n  KVM/x86: Export RFDS_NO and RFDS_CLEAR to guests\n  x86/rfds: Mitigate Register File Data Sampling (RFDS)\n  Documentation/hw-vuln: Add documentation for RFDS\n  x86/mmio: Disable KVM mitigation when X86_FEATURE_CLEAR_CPU_BUF is set",
  "full_message": "Merge tag 'rfds-for-linus-2024-03-11' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip\n\nPull x86 RFDS mitigation from Dave Hansen:\n \"RFDS is a CPU vulnerability that may allow a malicious userspace to\n  infer stale register values from kernel space. Kernel registers can\n  have all kinds of secrets in them so the mitigation is basically to\n  wait until the kernel is about to return to userspace and has user\n  values in the registers. At that point there is little chance of\n  kernel secrets ending up in the registers and the microarchitectural\n  state can be cleared.\n\n  This leverages some recent robustness fixes for the existing MDS\n  vulnerability. Both MDS and RFDS use the VERW instruction for\n  mitigation\"\n\n* tag 'rfds-for-linus-2024-03-11' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip:\n  KVM/x86: Export RFDS_NO and RFDS_CLEAR to guests\n  x86/rfds: Mitigate Register File Data Sampling (RFDS)\n  Documentation/hw-vuln: Add documentation for RFDS\n  x86/mmio: Disable KVM mitigation when X86_FEATURE_CLEAR_CPU_BUF is set",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Tue Mar 12 09:31:39 2024 -0700",
  "author_date_iso": "2024-03-12T09:31:39-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Tue Mar 12 09:31:39 2024 -0700",
  "committer_date_iso": "2024-03-12T09:31:39-07:00",
  "files_changed": [
    "Documentation/admin-guide/kernel-parameters.txt",
    "arch/x86/Kconfig",
    "arch/x86/include/asm/cpufeatures.h",
    "arch/x86/include/asm/msr-index.h",
    "arch/x86/kernel/cpu/bugs.c",
    "arch/x86/kernel/cpu/common.c",
    "arch/x86/kvm/x86.c",
    "include/linux/cpu.h"
  ],
  "files_changed_count": 8,
  "stats": [
    {
      "file": "Documentation/ABI/testing/sysfs-devices-system-cpu",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "Documentation/admin-guide/hw-vuln/index.rst",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "Documentation/admin-guide/hw-vuln/reg-file-data-sampling.rst",
      "insertions": 104,
      "deletions": 0
    },
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "insertions": 21,
      "deletions": 0
    },
    {
      "file": "arch/x86/Kconfig",
      "insertions": 11,
      "deletions": 0
    },
    {
      "file": "arch/x86/include/asm/cpufeatures.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/include/asm/msr-index.h",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "arch/x86/kernel/cpu/bugs.c",
      "insertions": 87,
      "deletions": 5
    },
    {
      "file": "arch/x86/kernel/cpu/common.c",
      "insertions": 35,
      "deletions": 3
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "drivers/base/cpu.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "include/linux/cpu.h",
      "insertions": 2,
      "deletions": 0
    }
  ],
  "total_insertions": 278,
  "total_deletions": 9,
  "total_changes": 287,
  "parents": [
    "855684c7d938c2442f07eabc154e7532b4c1fbf9",
    "2a0180129d726a4b953232175857d442651b55a0"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "vulnerability"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/include/asm/cpufeatures.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/cpu.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/include/asm/msr-index.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/cpu/bugs.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/cpu/common.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}