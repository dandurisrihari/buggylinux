diff --cc kernel/memremap.c
index 6cf54615a9c4,97b31c774274..fb9b88787ebc
--- a/kernel/memremap.c
+++ b/kernel/memremap.c
@@@ -273,13 -274,10 +274,14 @@@ void *devm_memremap_pages(struct devic
  	resource_size_t key, align_start, align_size, align_end;
  	struct dev_pagemap *pgmap;
  	struct page_map *page_map;
 +	int error, nid, is_ram;
  	unsigned long pfn;
 -	int error, nid;
 +
 +	align_start = res->start & ~(SECTION_SIZE - 1);
 +	align_size = ALIGN(res->start + resource_size(res), SECTION_SIZE)
 +		- align_start;
- 	is_ram = region_intersects(align_start, align_size, "System RAM");
++	is_ram = region_intersects(align_start, align_size,
++		IORESOURCE_SYSTEM_RAM, IORES_DESC_NONE);
  
  	if (is_ram == REGION_MIXED) {
  		WARN_ONCE(1, "%s attempted on mixed region %pr\n",