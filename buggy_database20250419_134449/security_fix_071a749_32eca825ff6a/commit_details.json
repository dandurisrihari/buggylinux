{
  "hash": "071a74930e60d1fa51207d71f00a35b4f9d4d179",
  "hash_short": "071a7493",
  "subject": "x86/KASLR: Add virtual address choosing function",
  "body": "To support randomizing the kernel virtual address separately from the\nphysical address, this patch adds find_random_virt_addr() to choose\na slot anywhere between LOAD_PHYSICAL_ADDR and KERNEL_IMAGE_SIZE.\nSince this address is virtual, not physical, we can place the kernel\nanywhere in this region, as long as it is aligned and (in the case of\nkernel being larger than the slot size) placed with enough room to load\nthe entire kernel image.\n\nFor clarity and readability, find_random_addr() is renamed to\nfind_random_phys_addr() and has \"size\" renamed to \"image_size\" to match\nfind_random_virt_addr().\n\nSigned-off-by: Baoquan He <bhe@redhat.com>\n[ Rewrote changelog, refactored slot calculation for readability. ]\n[ Renamed find_random_phys_addr() and size argument. ]\nSigned-off-by: Kees Cook <keescook@chromium.org>\nCc: Andrew Morton <akpm@linux-foundation.org>\nCc: Andy Lutomirski <luto@amacapital.net>\nCc: Andy Lutomirski <luto@kernel.org>\nCc: Borislav Petkov <bp@alien8.de>\nCc: Borislav Petkov <bp@suse.de>\nCc: Brian Gerst <brgerst@gmail.com>\nCc: Dave Young <dyoung@redhat.com>\nCc: Denys Vlasenko <dvlasenk@redhat.com>\nCc: H. Peter Anvin <hpa@zytor.com>\nCc: Linus Torvalds <torvalds@linux-foundation.org>\nCc: Peter Zijlstra <peterz@infradead.org>\nCc: Thomas Gleixner <tglx@linutronix.de>\nCc: Vivek Goyal <vgoyal@redhat.com>\nCc: Yinghai Lu <yinghai@kernel.org>\nCc: kernel-hardening@lists.openwall.com\nCc: lasse.collin@tukaani.org\nLink: http://lkml.kernel.org/r/1462825332-10505-6-git-send-email-keescook@chromium.org\nSigned-off-by: Ingo Molnar <mingo@kernel.org>",
  "full_message": "x86/KASLR: Add virtual address choosing function\n\nTo support randomizing the kernel virtual address separately from the\nphysical address, this patch adds find_random_virt_addr() to choose\na slot anywhere between LOAD_PHYSICAL_ADDR and KERNEL_IMAGE_SIZE.\nSince this address is virtual, not physical, we can place the kernel\nanywhere in this region, as long as it is aligned and (in the case of\nkernel being larger than the slot size) placed with enough room to load\nthe entire kernel image.\n\nFor clarity and readability, find_random_addr() is renamed to\nfind_random_phys_addr() and has \"size\" renamed to \"image_size\" to match\nfind_random_virt_addr().\n\nSigned-off-by: Baoquan He <bhe@redhat.com>\n[ Rewrote changelog, refactored slot calculation for readability. ]\n[ Renamed find_random_phys_addr() and size argument. ]\nSigned-off-by: Kees Cook <keescook@chromium.org>\nCc: Andrew Morton <akpm@linux-foundation.org>\nCc: Andy Lutomirski <luto@amacapital.net>\nCc: Andy Lutomirski <luto@kernel.org>\nCc: Borislav Petkov <bp@alien8.de>\nCc: Borislav Petkov <bp@suse.de>\nCc: Brian Gerst <brgerst@gmail.com>\nCc: Dave Young <dyoung@redhat.com>\nCc: Denys Vlasenko <dvlasenk@redhat.com>\nCc: H. Peter Anvin <hpa@zytor.com>\nCc: Linus Torvalds <torvalds@linux-foundation.org>\nCc: Peter Zijlstra <peterz@infradead.org>\nCc: Thomas Gleixner <tglx@linutronix.de>\nCc: Vivek Goyal <vgoyal@redhat.com>\nCc: Yinghai Lu <yinghai@kernel.org>\nCc: kernel-hardening@lists.openwall.com\nCc: lasse.collin@tukaani.org\nLink: http://lkml.kernel.org/r/1462825332-10505-6-git-send-email-keescook@chromium.org\nSigned-off-by: Ingo Molnar <mingo@kernel.org>",
  "author_name": "Baoquan He",
  "author_email": "bhe@redhat.com",
  "author_date": "Mon May 9 13:22:08 2016 -0700",
  "author_date_iso": "2016-05-09T13:22:08-07:00",
  "committer_name": "Ingo Molnar",
  "committer_email": "mingo@kernel.org",
  "committer_date": "Tue May 10 10:12:06 2016 +0200",
  "committer_date_iso": "2016-05-10T10:12:06+02:00",
  "files_changed": [
    "arch/x86/boot/compressed/kaslr.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "arch/x86/boot/compressed/kaslr.c",
      "insertions": 28,
      "deletions": 4
    }
  ],
  "total_insertions": 28,
  "total_deletions": 4,
  "total_changes": 32,
  "parents": [
    "06486d6c97cebc2433a40a979f3849cd68184de9"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/boot/compressed/kaslr.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}