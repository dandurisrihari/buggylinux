{
  "hash": "66b7138f913635b40822890ba8913548f8b285b8",
  "hash_short": "66b7138f",
  "subject": "KVM: SVM: Emulate nRIP feature when reinjecting INT3",
  "body": "When in guest debugging mode, we have to reinject those #BP software\nexceptions that are caused by guest-injected INT3. As older AMD\nprocessors do not support the required nRIP VMCB field, try to emulate\nit by moving RIP past the instruction on exception injection. Fix it up\nagain in case the injection failed and we were able to catch this. This\ndoes not work for unintercepted faults, but it is better than doing\nnothing.\n\nSigned-off-by: Jan Kiszka <jan.kiszka@siemens.com>\nSigned-off-by: Avi Kivity <avi@redhat.com>",
  "full_message": "KVM: SVM: Emulate nRIP feature when reinjecting INT3\n\nWhen in guest debugging mode, we have to reinject those #BP software\nexceptions that are caused by guest-injected INT3. As older AMD\nprocessors do not support the required nRIP VMCB field, try to emulate\nit by moving RIP past the instruction on exception injection. Fix it up\nagain in case the injection failed and we were able to catch this. This\ndoes not work for unintercepted faults, but it is better than doing\nnothing.\n\nSigned-off-by: Jan Kiszka <jan.kiszka@siemens.com>\nSigned-off-by: Avi Kivity <avi@redhat.com>",
  "author_name": "Jan Kiszka",
  "author_email": "jan.kiszka@siemens.com",
  "author_date": "Tue Feb 23 17:47:56 2010 +0100",
  "author_date_iso": "2010-02-23T17:47:56+01:00",
  "committer_name": "Avi Kivity",
  "committer_email": "avi@redhat.com",
  "committer_date": "Sun Apr 25 13:00:43 2010 +0300",
  "committer_date_iso": "2010-04-25T13:00:43+03:00",
  "files_changed": [
    "arch/x86/kvm/svm.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "arch/x86/kvm/svm.c",
      "insertions": 35,
      "deletions": 3
    }
  ],
  "total_insertions": 35,
  "total_deletions": 3,
  "total_changes": 38,
  "parents": [
    "f92653eeb496fe8624ac4b0d628c916a06a3d25c"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v2.6.35",
    "v2.6.35-rc1",
    "v2.6.35-rc2",
    "v2.6.35-rc3",
    "v2.6.35-rc4",
    "v2.6.35-rc5",
    "v2.6.35-rc6",
    "v2.6.36",
    "v2.6.36-rc1",
    "v2.6.36-rc2"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/kvm/svm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}