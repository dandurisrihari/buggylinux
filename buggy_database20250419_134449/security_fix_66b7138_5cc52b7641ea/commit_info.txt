Commit Hash: 66b7138f913635b40822890ba8913548f8b285b8
Subject: KVM: SVM: Emulate nRIP feature when reinjecting INT3


Security Keywords:
- injection

Full commit message:
KVM: SVM: Emulate nRIP feature when reinjecting INT3

When in guest debugging mode, we have to reinject those #BP software
exceptions that are caused by guest-injected INT3. As older AMD
processors do not support the required nRIP VMCB field, try to emulate
it by moving RIP past the instruction on exception injection. Fix it up
again in case the injection failed and we were able to catch this. This
does not work for unintercepted faults, but it is better than doing
nothing.

Signed-off-by: Jan Kiszka <jan.kiszka@siemens.com>
Signed-off-by: Avi Kivity <avi@redhat.com>

Metadata:
Author: Jan Kiszka <jan.kiszka@siemens.com>
Author Date: Tue Feb 23 17:47:56 2010 +0100
Committer: Avi Kivity <avi@redhat.com>
Commit Date: Sun Apr 25 13:00:43 2010 +0300

Files Changed: 1
Lines Added: 35
Lines Removed: 3
Total Changes: 38
