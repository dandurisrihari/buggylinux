{
  "hash": "1e4fa020d574768445fca2d9bbfe473ec8bbd224",
  "hash_short": "1e4fa020",
  "subject": "Merge tag 'mtd/for-6.2' of git://git.kernel.org/pub/scm/linux/kernel/git/mtd/linux",
  "body": "Pull mtd updates from Miquel Raynal:\n \"MTD core changes:\n   - Fix refcount error in del_mtd_device()\n   - Fix possible resource leak in init_mtd()\n   - Set ROOT_DEV for partitions marked as rootfs in DT\n   - Describe marking rootfs partitions in the bindings\n   - Fix device name leak when register device fails in add_mtd_device()\n   - Try to find OF node for every MTD partition\n   - simplify (a bit) code find partition-matching dynamic OF node\n\n  MTD driver changes:\n   - pxa2xx-flash maps: fix memory leak in probe\n   - BCM parser: refer to ARCH_BCMBCA instead of ARCH_BCM4908\n   - lpddr2_nvm: Fix possible null-ptr-deref\n   - inftlcore: fix repeated words in comments\n   - lart: remove driver\n   - tplink:\n      - Add TP-Link SafeLoader partitions table parser and bindings\n      - Describe TP-Link SafeLoader parser\n      - Describe TP-Link SafeLoader dynamic subpartitions\n   - mtdoops:\n      - Panic caused mtdoops to call mtdoops_erase function immediately\n      - Add mtdoops_erase function and move mtdoops_inc_counter after it\n      - Change printk() to counterpart pr_ functions\n\n  MTD binding cleanup:\n   - Fixed-partitions: Fix 'sercomm,scpart-id' schema\n   - Standardize the style in the examples\n   - Drop object types when referencing other files\n   - Argue in favor of keeping additionalProperties set to true\n   - NVMEM-cells:\n      - Inherit from MTD partitions\n      - Drop range property from example\n   - Partitions:\n      - Change qcom,smem-part partition type\n      - Constrain the list of parsers\n   - Physmap: Reuse the generic definitions\n   - SPI-NOR: Drop common properties\n   - Sunxi-nand: Add an example to validate the bindings\n   - Onenand: Mention the expected node name\n   - Ingenic: Mark partitions in the controller node as deprecated\n   - NAND:\n      - Standardize the child node name\n      - Drop common properties already defined in generic files\n      - nand-chip.yaml should reference mtd.yaml\n   - Remove useless file about partitions\n   - Clarify all partition subnodes\n\n  SPI NOR core changes:\n   - Add support for flash reset using the dt reset-gpios property.\n   - Update hwcaps.mask to include 8D-8D-8D read and page program ops\n     when xSPI profile 1.0 table is defined.\n   - Bypass zero erase size in spi_nor_find_best_erase_type().\n   - Fix select_uniform_erase to skip 0 erase size\n   - Add generic flash driver. If a flash is not found in the flash_info\n     array, fall back to the generic flash driver which is described\n     solely by the flash's SFDP tables.\n   - Fix the number of bytes for the dummy cycles in\n     spi_nor_spimem_check_readop().\n   - Introduce SPI_NOR_QUAD_PP flag, as PP_1_1_4 is not SFDP\n     discoverable.\n\n  SPI NOR manufacturer drivers changes:\n   - Spansion:\n      - use PARSE_SFDP for s28hs512t,\n      - add support for s28hl512t, s28hl01gt, and s28hs01gt.\n   - Gigadevice: Replace default_init() with post_bfpt() for gd25q256.\n   - Micron - ST: Enable locking for mt25qu256a.\n   - Winbond: Add support for W25Q512NW-IQ.\n   - ISSI: Use PARSE_SFDP and SPI_NOR_QUAD_PP.\n\n  Raw NAND core changes:\n   - Drop obsolete dependencies on COMPILE_TEST\n   - MAINTAINERS: rectify entry for MESON NAND controller bindings\n   - Drop EXPORT_SYMBOL_GPL for nanddev_erase()\n\n  Raw NAND driver changes:\n   - marvell: Enable NFC/DEVBUS arbiter\n   - gpmi: Use pm_runtime_resume_and_get instead of pm_runtime_get_sync\n   - mpc5121: Replace NO_IRQ by 0\n   - lpc32xx_{slc,mlc}:\n      - Switch to using pm_ptr()\n      - Switch to using gpiod API\n   - lpc32xx_mlc: Switch to using pm_ptr()\n   - cadence: Support 64-bit slave dma interface\n   - rockchip: Describe rk3128-nfc in the bindings\n   - brcmnand: Update interrupts description in the bindings\n\n  SPI-NAND driver changes:\n   - winbond:\n      - Add Winbond W25N02KV flash support\n      - Fix flash identification\"\n\n* tag 'mtd/for-6.2' of git://git.kernel.org/pub/scm/linux/kernel/git/mtd/linux: (76 commits)\n  mtd: rawnand: Drop obsolete dependencies on COMPILE_TEST\n  mtd: maps: pxa2xx-flash: fix memory leak in probe\n  mtd: core: Fix refcount error in del_mtd_device()\n  mtd: spi-nor: add SFDP fixups for Quad Page Program\n  mtd: spi-nor: issi: is25wp256: Init flash based on SFDP\n  mtd: spi-nor: winbond: add support for W25Q512NW-IQ\n  mtd: spi-nor: micron-st: Enable locking for mt25qu256a\n  mtd: spi-nor: Fix the number of bytes for the dummy cycles\n  mtd: spi-nor: gigadevice: gd25q256: replace gd25q256_default_init with gd25q256_post_bfpt\n  mtd: spi-nor: Fix formatting in spi_nor_read_raw() kerneldoc comment\n  mtd: spi-nor: sysfs: print JEDEC ID for generic flash driver\n  mtd: spi-nor: add generic flash driver\n  mtd: spi-nor: fix select_uniform_erase to skip 0 erase size\n  mtd: spi-nor: move function declaration out of sfdp.h\n  mtd: spi-nor: remember full JEDEC flash ID\n  mtd: spi-nor: sysfs: hide manufacturer if it is not set\n  mtd: spi-nor: hide jedec_id sysfs attribute if not present\n  mtd: spi-nor: Check for zero erase size in spi_nor_find_best_erase_type()\n  mtd: rawnand: marvell: Enable NFC/DEVBUS arbiter\n  mtd: parsers: refer to ARCH_BCMBCA instead of ARCH_BCM4908\n  ...",
  "full_message": "Merge tag 'mtd/for-6.2' of git://git.kernel.org/pub/scm/linux/kernel/git/mtd/linux\n\nPull mtd updates from Miquel Raynal:\n \"MTD core changes:\n   - Fix refcount error in del_mtd_device()\n   - Fix possible resource leak in init_mtd()\n   - Set ROOT_DEV for partitions marked as rootfs in DT\n   - Describe marking rootfs partitions in the bindings\n   - Fix device name leak when register device fails in add_mtd_device()\n   - Try to find OF node for every MTD partition\n   - simplify (a bit) code find partition-matching dynamic OF node\n\n  MTD driver changes:\n   - pxa2xx-flash maps: fix memory leak in probe\n   - BCM parser: refer to ARCH_BCMBCA instead of ARCH_BCM4908\n   - lpddr2_nvm: Fix possible null-ptr-deref\n   - inftlcore: fix repeated words in comments\n   - lart: remove driver\n   - tplink:\n      - Add TP-Link SafeLoader partitions table parser and bindings\n      - Describe TP-Link SafeLoader parser\n      - Describe TP-Link SafeLoader dynamic subpartitions\n   - mtdoops:\n      - Panic caused mtdoops to call mtdoops_erase function immediately\n      - Add mtdoops_erase function and move mtdoops_inc_counter after it\n      - Change printk() to counterpart pr_ functions\n\n  MTD binding cleanup:\n   - Fixed-partitions: Fix 'sercomm,scpart-id' schema\n   - Standardize the style in the examples\n   - Drop object types when referencing other files\n   - Argue in favor of keeping additionalProperties set to true\n   - NVMEM-cells:\n      - Inherit from MTD partitions\n      - Drop range property from example\n   - Partitions:\n      - Change qcom,smem-part partition type\n      - Constrain the list of parsers\n   - Physmap: Reuse the generic definitions\n   - SPI-NOR: Drop common properties\n   - Sunxi-nand: Add an example to validate the bindings\n   - Onenand: Mention the expected node name\n   - Ingenic: Mark partitions in the controller node as deprecated\n   - NAND:\n      - Standardize the child node name\n      - Drop common properties already defined in generic files\n      - nand-chip.yaml should reference mtd.yaml\n   - Remove useless file about partitions\n   - Clarify all partition subnodes\n\n  SPI NOR core changes:\n   - Add support for flash reset using the dt reset-gpios property.\n   - Update hwcaps.mask to include 8D-8D-8D read and page program ops\n     when xSPI profile 1.0 table is defined.\n   - Bypass zero erase size in spi_nor_find_best_erase_type().\n   - Fix select_uniform_erase to skip 0 erase size\n   - Add generic flash driver. If a flash is not found in the flash_info\n     array, fall back to the generic flash driver which is described\n     solely by the flash's SFDP tables.\n   - Fix the number of bytes for the dummy cycles in\n     spi_nor_spimem_check_readop().\n   - Introduce SPI_NOR_QUAD_PP flag, as PP_1_1_4 is not SFDP\n     discoverable.\n\n  SPI NOR manufacturer drivers changes:\n   - Spansion:\n      - use PARSE_SFDP for s28hs512t,\n      - add support for s28hl512t, s28hl01gt, and s28hs01gt.\n   - Gigadevice: Replace default_init() with post_bfpt() for gd25q256.\n   - Micron - ST: Enable locking for mt25qu256a.\n   - Winbond: Add support for W25Q512NW-IQ.\n   - ISSI: Use PARSE_SFDP and SPI_NOR_QUAD_PP.\n\n  Raw NAND core changes:\n   - Drop obsolete dependencies on COMPILE_TEST\n   - MAINTAINERS: rectify entry for MESON NAND controller bindings\n   - Drop EXPORT_SYMBOL_GPL for nanddev_erase()\n\n  Raw NAND driver changes:\n   - marvell: Enable NFC/DEVBUS arbiter\n   - gpmi: Use pm_runtime_resume_and_get instead of pm_runtime_get_sync\n   - mpc5121: Replace NO_IRQ by 0\n   - lpc32xx_{slc,mlc}:\n      - Switch to using pm_ptr()\n      - Switch to using gpiod API\n   - lpc32xx_mlc: Switch to using pm_ptr()\n   - cadence: Support 64-bit slave dma interface\n   - rockchip: Describe rk3128-nfc in the bindings\n   - brcmnand: Update interrupts description in the bindings\n\n  SPI-NAND driver changes:\n   - winbond:\n      - Add Winbond W25N02KV flash support\n      - Fix flash identification\"\n\n* tag 'mtd/for-6.2' of git://git.kernel.org/pub/scm/linux/kernel/git/mtd/linux: (76 commits)\n  mtd: rawnand: Drop obsolete dependencies on COMPILE_TEST\n  mtd: maps: pxa2xx-flash: fix memory leak in probe\n  mtd: core: Fix refcount error in del_mtd_device()\n  mtd: spi-nor: add SFDP fixups for Quad Page Program\n  mtd: spi-nor: issi: is25wp256: Init flash based on SFDP\n  mtd: spi-nor: winbond: add support for W25Q512NW-IQ\n  mtd: spi-nor: micron-st: Enable locking for mt25qu256a\n  mtd: spi-nor: Fix the number of bytes for the dummy cycles\n  mtd: spi-nor: gigadevice: gd25q256: replace gd25q256_default_init with gd25q256_post_bfpt\n  mtd: spi-nor: Fix formatting in spi_nor_read_raw() kerneldoc comment\n  mtd: spi-nor: sysfs: print JEDEC ID for generic flash driver\n  mtd: spi-nor: add generic flash driver\n  mtd: spi-nor: fix select_uniform_erase to skip 0 erase size\n  mtd: spi-nor: move function declaration out of sfdp.h\n  mtd: spi-nor: remember full JEDEC flash ID\n  mtd: spi-nor: sysfs: hide manufacturer if it is not set\n  mtd: spi-nor: hide jedec_id sysfs attribute if not present\n  mtd: spi-nor: Check for zero erase size in spi_nor_find_best_erase_type()\n  mtd: rawnand: marvell: Enable NFC/DEVBUS arbiter\n  mtd: parsers: refer to ARCH_BCMBCA instead of ARCH_BCM4908\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Tue Dec 13 12:32:07 2022 -0800",
  "author_date_iso": "2022-12-13T12:32:07-08:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Tue Dec 13 12:32:07 2022 -0800",
  "committer_date_iso": "2022-12-13T12:32:07-08:00",
  "files_changed": [
    "MAINTAINERS"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "Documentation/ABI/testing/sysfs-bus-spi-devices-spi-nor",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/allwinner,sun4i-a10-nand.yaml",
      "insertions": 25,
      "deletions": 9
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/arasan,nand-controller.yaml",
      "insertions": 1,
      "deletions": 4
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/arm,pl353-nand-r2p1.yaml",
      "insertions": 16,
      "deletions": 16
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/atmel-nand.txt",
      "insertions": 2,
      "deletions": 4
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/brcm,brcmnand.yaml",
      "insertions": 52,
      "deletions": 44
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/denali,nand.yaml",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/ingenic,nand.yaml",
      "insertions": 73,
      "deletions": 73
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/intel,lgm-ebunand.yaml",
      "insertions": 21,
      "deletions": 29
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/jedec,spi-nor.yaml",
      "insertions": 7,
      "deletions": 13
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/lpc32xx-mlc.txt",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/lpc32xx-slc.txt",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/microchip,mchp48l640.yaml",
      "insertions": 8,
      "deletions": 8
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/mtd-physmap.yaml",
      "insertions": 3,
      "deletions": 4
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/mtd.yaml",
      "insertions": 22,
      "deletions": 2
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/mtk-nand.txt",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/nand-chip.yaml",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/nand-controller.yaml",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/partition.txt",
      "insertions": 0,
      "deletions": 33
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/partitions/arm,arm-firmware-suite.yaml",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/partitions/brcm,bcm4908-partitions.yaml",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/partitions/brcm,bcm947xx-cfe-partitions.yaml",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/partitions/fixed-partitions.yaml",
      "insertions": 12,
      "deletions": 18
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/partitions/linksys,ns-partitions.yaml",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/partitions/nvmem-cells.yaml",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/partitions/partition.yaml",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/partitions/partitions.yaml",
      "insertions": 41,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/partitions/qcom,smem-part.yaml",
      "insertions": 20,
      "deletions": 18
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/partitions/redboot-fis.yaml",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/partitions/tplink,safeloader-partitions.yaml",
      "insertions": 57,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/qcom,nandc.yaml",
      "insertions": 64,
      "deletions": 67
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/rockchip,nand-controller.yaml",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/st,stm32-fmc2-nand.yaml",
      "insertions": 24,
      "deletions": 23
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/ti,am654-hbmc.yaml",
      "insertions": 18,
      "deletions": 18
    },
    {
      "file": "Documentation/devicetree/bindings/mtd/ti,gpmc-onenand.yaml",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "MAINTAINERS",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/mtd/devices/Kconfig",
      "insertions": 0,
      "deletions": 8
    },
    {
      "file": "drivers/mtd/devices/Makefile",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "drivers/mtd/devices/lart.c",
      "insertions": 0,
      "deletions": 682
    },
    {
      "file": "drivers/mtd/inftlcore.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/mtd/lpddr/lpddr2_nvm.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/mtd/maps/pxa2xx-flash.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/mtd/mtdcore.c",
      "insertions": 32,
      "deletions": 23
    },
    {
      "file": "drivers/mtd/mtdoops.c",
      "insertions": 62,
      "deletions": 47
    },
    {
      "file": "drivers/mtd/nand/core.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "drivers/mtd/nand/raw/Kconfig",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "drivers/mtd/nand/raw/cadence-nand-controller.c",
      "insertions": 58,
      "deletions": 12
    },
    {
      "file": "drivers/mtd/nand/raw/gpmi-nand/gpmi-nand.c",
      "insertions": 4,
      "deletions": 8
    },
    {
      "file": "drivers/mtd/nand/raw/lpc32xx_mlc.c",
      "insertions": 21,
      "deletions": 25
    },
    {
      "file": "drivers/mtd/nand/raw/lpc32xx_slc.c",
      "insertions": 19,
      "deletions": 24
    },
    {
      "file": "drivers/mtd/nand/raw/marvell_nand.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "drivers/mtd/nand/raw/mpc5121_nfc.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/mtd/nand/spi/winbond.c",
      "insertions": 77,
      "deletions": 2
    },
    {
      "file": "drivers/mtd/parsers/Kconfig",
      "insertions": 17,
      "deletions": 2
    },
    {
      "file": "drivers/mtd/parsers/Makefile",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/mtd/parsers/tplink_safeloader.c",
      "insertions": 150,
      "deletions": 0
    },
    {
      "file": "drivers/mtd/spi-nor/core.c",
      "insertions": 80,
      "deletions": 5
    },
    {
      "file": "drivers/mtd/spi-nor/core.h",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "drivers/mtd/spi-nor/debugfs.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/mtd/spi-nor/gigadevice.c",
      "insertions": 17,
      "deletions": 7
    },
    {
      "file": "drivers/mtd/spi-nor/issi.c",
      "insertions": 3,
      "deletions": 2
    },
    {
      "file": "drivers/mtd/spi-nor/micron-st.c",
      "insertions": 9,
      "deletions": 3
    },
    {
      "file": "drivers/mtd/spi-nor/sfdp.c",
      "insertions": 35,
      "deletions": 2
    },
    {
      "file": "drivers/mtd/spi-nor/sfdp.h",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "drivers/mtd/spi-nor/spansion.c",
      "insertions": 39,
      "deletions": 22
    },
    {
      "file": "drivers/mtd/spi-nor/sysfs.c",
      "insertions": 19,
      "deletions": 1
    },
    {
      "file": "drivers/mtd/spi-nor/winbond.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "include/linux/mtd/nand.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "include/linux/mtd/spi-nor.h",
      "insertions": 3,
      "deletions": 0
    }
  ],
  "total_insertions": 1177,
  "total_deletions": 1280,
  "total_changes": 2457,
  "parents": [
    "a594533df0f6ca391da003f43d53b336a2d23ffa",
    "a34506e08db7ccce160a259e4b00b1e307486c59"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "Bypass"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "MAINTAINERS",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}