Commit Hash: 4cad9f87876a943d018ad73ec3919215fb756d2d
Subject: KVM: x86: Wake vCPU for PIC interrupt injection iff a valid IRQ was found


Security Keywords:
- injection

Full commit message:
KVM: x86: Wake vCPU for PIC interrupt injection iff a valid IRQ was found

When updating the emulated PIC IRQ status, set "wakeup_needed" if and only
if a new interrupt was found, i.e. if the incoming level is non-zero and
an IRQ is being raised.  The bug is relatively benign, as KVM will signal
a spurious wakeup, e.g. set KVM_REQ_EVENT and kick target vCPUs, but KVM
will never actually inject a spurious IRQ as kvm_cpu_has_extint() cares
only about the "output" field.

Fixes: 7049467b5383 ("KVM: remove isr_ack logic from PIC")
Signed-off-by: Liam Ni <zhiguangni01@gmail.com>
Link: https://lore.kernel.org/r/CACZJ9cX2R_=qgvLdaqbB_DUJhv08c674b67Ln_Qb9yyVwgE16w@mail.gmail.com
[sean: reconstruct patch, rewrite changelog]
Signed-off-by: Sean Christopherson <seanjc@google.com>

Metadata:
Author: Liam Ni <zhiguangni01@gmail.com>
Author Date: Tue Jul 30 21:59:41 2024 +0800
Committer: Sean Christopherson <seanjc@google.com>
Commit Date: Wed Feb 12 10:05:01 2025 -0800

Files Changed: 1
Lines Added: 1
Lines Removed: 1
Total Changes: 2
