Commit Hash: 35025735a79eaa894c43837b94fd33c9d6b122df
Subject: KVM: x86/xen: Support direct injection of event channel events


Security Keywords:
- injection

Full commit message:
KVM: x86/xen: Support direct injection of event channel events

This adds a KVM_XEN_HVM_EVTCHN_SEND ioctl which allows direct injection
of events given an explicit { vcpu, port, priority } in precisely the
same form that those fields are given in the IRQ routing table.

Userspace is currently able to inject 2-level events purely by setting
the bits in the shared_info and vcpu_info, but FIFO event channels are
harder to deal with; we will need the kernel to take sole ownership of
delivery when we support those.

A patch advertising this feature with a new bit in the KVM_CAP_XEN_HVM
ioctl will be added in a subsequent patch.

Signed-off-by: David Woodhouse <dwmw@amazon.co.uk>
Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
Message-Id: <20220303154127.202856-9-dwmw2@infradead.org>
Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>

Metadata:
Author: David Woodhouse <dwmw@amazon.co.uk>
Author Date: Thu Mar 3 15:41:18 2022 +0000
Committer: Paolo Bonzini <pbonzini@redhat.com>
Commit Date: Sat Apr 2 05:41:14 2022 -0400

Files Changed: 4
Lines Added: 45
Lines Removed: 0
Total Changes: 45
