Commit Hash: b5638d46c90a6998859a4fc9ea697b264da96092
Subject: selftests: mlxsw: Add a test for UC behavior under MC flood


Security Keywords:
- injection

Full commit message:
selftests: mlxsw: Add a test for UC behavior under MC flood

A so-called "MC-aware" mode has recently been enabled in mlxsw. In
MC-aware mode, BUM traffic is handled in a special way so that when a
switch is flooded with BUM, UC performance isn't unduly impacted.
Without enablement of this mode, a stream of BUM traffic can cause
sustained UC throughput drop in excess of 99 %.

Add a test for this behavior. Compare how much UC throughput degrades as
a stream of broadcast frames floods the switch. A minimal degradation is
tolerated to cover for glitches in traffic injection performance.

Signed-off-by: Petr Machata <petrm@mellanox.com>
Reviewed-by: Jiri Pirko <jiri@mellanox.com>
Signed-off-by: Ido Schimmel <idosch@mellanox.com>
Signed-off-by: David S. Miller <davem@davemloft.net>

Metadata:
Author: Petr Machata <petrm@mellanox.com>
Author Date: Thu Sep 20 09:21:36 2018 +0300
Committer: David S. Miller <davem@davemloft.net>
Commit Date: Thu Sep 20 07:46:02 2018 -0700

Files Changed: 1
Lines Added: 347
Lines Removed: 0
Total Changes: 347
