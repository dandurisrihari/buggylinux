Commit Hash: d5cdfacb35ed886271d1ccfffbded98d3447da17
Subject: cfg80211: Add local-state-change-only auth/deauth/disassoc


Security Keywords:
- auth

Full commit message:
cfg80211: Add local-state-change-only auth/deauth/disassoc

cfg80211 is quite strict on allowing authentication and association
commands only in certain states. In order to meet these requirements,
user space applications may need to clear authentication or
association state in some cases. Currently, this can be done with
deauth/disassoc command, but that ends up sending out Deauthentication
or Disassociation frame unnecessarily. Add a new nl80211 attribute to
allow this sending of the frame be skipped, but with all other
deauth/disassoc operations being completed.

Similar state change is also needed for IEEE 802.11r FT protocol in
the FT-over-DS case which does not use Authentication frame exchange
in a transition to another BSS. For this to work with cfg80211, an
authentication entry needs to be created for the target BSS without
sending out an Authentication frame. The nl80211 authentication
command can be used for this purpose, too, with the new attribute to
indicate that the command is only for changing local state. This
enables wpa_supplicant to complete FT-over-DS transition successfully.

Signed-off-by: Jouni Malinen <j@w1.fi>
Signed-off-by: John W. Linville <linville@tuxdriver.com>

Metadata:
Author: Jouni Malinen <j@w1.fi>
Author Date: Sun Apr 4 09:37:19 2010 +0300
Committer: John W. Linville <linville@tuxdriver.com>
Commit Date: Wed Apr 7 14:37:56 2010 -0400

Files Changed: 7
Lines Added: 97
Lines Removed: 33
Total Changes: 130
