Commit Hash: 18d731242d5c67c0783126c42d3f85870cec2df5
Subject: vfio/mdev: Add missing error handling to dev_set_name()


Security Keywords:
- injection

Full commit message:
vfio/mdev: Add missing error handling to dev_set_name()

This can fail, and seems to be a popular target for syzkaller error
injection. Check the error return and unwind with put_device().

Fixes: 7b96953bc640 ("vfio: Mediated device Core driver")
Reviewed-by: Christoph Hellwig <hch@lst.de>
Reviewed-by: Kevin Tian <kevin.tian@intel.com>
Reviewed-by: Max Gurtovoy <mgurtovoy@nvidia.com>
Reviewed-by: Cornelia Huck <cohuck@redhat.com>
Signed-off-by: Jason Gunthorpe <jgg@nvidia.com>
Message-Id: <9-v2-d36939638fc6+d54-vfio2_jgg@nvidia.com>
Signed-off-by: Alex Williamson <alex.williamson@redhat.com>

Metadata:
Author: Jason Gunthorpe <jgg@nvidia.com>
Author Date: Tue Apr 6 16:40:32 2021 -0300
Committer: Alex Williamson <alex.williamson@redhat.com>
Commit Date: Wed Apr 7 15:39:18 2021 -0600

Files Changed: 1
Lines Added: 3
Lines Removed: 1
Total Changes: 4
