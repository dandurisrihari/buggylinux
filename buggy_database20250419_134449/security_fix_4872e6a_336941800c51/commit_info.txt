Commit Hash: 4872e6aa217fbb475ffa0ad7bda0d9acff543f2c
Subject: drm/vmwgfx: check master authentication in surface_ref ioctls


Security Keywords:
- authentication

Full commit message:
drm/vmwgfx: check master authentication in surface_ref ioctls

With later commit we'll rework DRM authentication handling. Namely
DRM_AUTH will not be a requirement for DRM_RENDER_ALLOW ioctls.

Since vmwgfx does isolation for primary clients in different master
realms, the DRM_AUTH can be dropped.

The only place where authentication matters, is surface_reference ioctls
whenever a legacy (non-prime) handle is used. For those ioctls we call
vmw_surface_handle_reference(), where we explicitly check if the client
is both a) master and b) unauthenticated - bailing out as result.

Otherwise the usual isolation path kicks in and we're all good.

v2: Reword commit message, since the isolation work has landed.

Cc: VMware Graphics <linux-graphics-maintainer@vmware.com>
Cc: Thomas Hellstrom <thellstrom@vmware.com>
Signed-off-by: Emil Velikov <emil.velikov@collabora.com>
Reviewed-by: Thomas Hellstrom <thellstrom@vmware.com>
Signed-off-by: Thomas Hellstrom <thellstrom@vmware.com>

Metadata:
Author: Emil Velikov <emil.velikov@collabora.com>
Author Date: Fri Nov 1 13:03:10 2019 +0000
Committer: Thomas Hellstrom <thellstrom@vmware.com>
Commit Date: Wed Jan 15 11:46:58 2020 +0100

Files Changed: 1
Lines Added: 7
Lines Removed: 0
Total Changes: 7
