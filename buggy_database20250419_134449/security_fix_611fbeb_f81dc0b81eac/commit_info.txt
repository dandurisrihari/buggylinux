Commit Hash: 611fbeb44a777e5ab54ab3127ec85f72147911d8
Subject: selftests:core: test coverage for dup_fd() failure handling in unshare_fd()


Security Keywords:
- injection

Full commit message:
selftests:core: test coverage for dup_fd() failure handling in unshare_fd()

At some point there'd been a dumb braino during the dup_fd()
calling conventions change; caught by smatch and immediately fixed.
The trouble is, there had been no test coverage for the dup_fd() failure
handling - neither in kselftests nor in LTP.  Fortunately, it can be
triggered on stock kernel - ENOMEM would require fault injection, but
EMFILE can be had with sysctl alone (fs.nr_open).

Add a test for dup_fd() failure.
Fixed up commit log and short log - Shuah Khan

Signed-off-by: Al Viro <viro@zeniv.linux.org.uk>
Signed-off-by: Shuah Khan <skhan@linuxfoundation.org>

Metadata:
Author: Al Viro <viro@zeniv.linux.org.uk>
Author Date: Thu Aug 22 05:39:32 2024 +0100
Committer: Shuah Khan <skhan@linuxfoundation.org>
Commit Date: Thu Aug 22 00:45:55 2024 -0600

Files Changed: 2
Lines Added: 95
Lines Removed: 1
Total Changes: 96
