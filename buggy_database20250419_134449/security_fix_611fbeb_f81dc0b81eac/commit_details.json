{
  "hash": "611fbeb44a777e5ab54ab3127ec85f72147911d8",
  "hash_short": "611fbeb4",
  "subject": "selftests:core: test coverage for dup_fd() failure handling in unshare_fd()",
  "body": "At some point there'd been a dumb braino during the dup_fd()\ncalling conventions change; caught by smatch and immediately fixed.\nThe trouble is, there had been no test coverage for the dup_fd() failure\nhandling - neither in kselftests nor in LTP.  Fortunately, it can be\ntriggered on stock kernel - ENOMEM would require fault injection, but\nEMFILE can be had with sysctl alone (fs.nr_open).\n\nAdd a test for dup_fd() failure.\nFixed up commit log and short log - Shuah Khan\n\nSigned-off-by: Al Viro <viro@zeniv.linux.org.uk>\nSigned-off-by: Shuah Khan <skhan@linuxfoundation.org>",
  "full_message": "selftests:core: test coverage for dup_fd() failure handling in unshare_fd()\n\nAt some point there'd been a dumb braino during the dup_fd()\ncalling conventions change; caught by smatch and immediately fixed.\nThe trouble is, there had been no test coverage for the dup_fd() failure\nhandling - neither in kselftests nor in LTP.  Fortunately, it can be\ntriggered on stock kernel - ENOMEM would require fault injection, but\nEMFILE can be had with sysctl alone (fs.nr_open).\n\nAdd a test for dup_fd() failure.\nFixed up commit log and short log - Shuah Khan\n\nSigned-off-by: Al Viro <viro@zeniv.linux.org.uk>\nSigned-off-by: Shuah Khan <skhan@linuxfoundation.org>",
  "author_name": "Al Viro",
  "author_email": "viro@zeniv.linux.org.uk",
  "author_date": "Thu Aug 22 05:39:32 2024 +0100",
  "author_date_iso": "2024-08-22T05:39:32+01:00",
  "committer_name": "Shuah Khan",
  "committer_email": "skhan@linuxfoundation.org",
  "committer_date": "Thu Aug 22 00:45:55 2024 -0600",
  "committer_date_iso": "2024-08-22T00:45:55-06:00",
  "files_changed": [
    "tools/testing/selftests/core/Makefile",
    "tools/testing/selftests/core/unshare_test.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "tools/testing/selftests/core/Makefile",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "tools/testing/selftests/core/unshare_test.c",
      "insertions": 94,
      "deletions": 0
    }
  ],
  "total_insertions": 95,
  "total_deletions": 1,
  "total_changes": 96,
  "parents": [
    "c049acee3c71cfc26c739f82617a84e13e471a45"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "tools/testing/selftests/core/Makefile",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "tools/testing/selftests/core/unshare_test.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}