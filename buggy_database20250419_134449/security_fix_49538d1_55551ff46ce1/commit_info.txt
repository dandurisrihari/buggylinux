Commit Hash: 49538d12380fa8970f35db1f063189e49e69399c
Subject: KVM: s390: fix bug in sigp emergency signal injection


Security Keywords:
- injection

Full commit message:
KVM: s390: fix bug in sigp emergency signal injection

Currently we are always setting the wrong bit in the
bitmap for pending emergency signals. Instead of using
emerg.code from the passed in irq parameter, we use the
value in our per-vcpu local_int structure, which is always zero.
That means all emergency signals will have address 0 as parameter.
If two CPUs send a SIGP to the same target, one might be lost.

Let's fix this by using the value from the parameter and
also trace the correct value.

Reviewed-by: David Hildenbrand <dahi@linux.vnet.ibm.com>
Reviewed-by: Cornelia Huck <cornelia.huck@de.ibm.com>
Signed-off-by: Jens Freimann <jfrei@linux.vnet.ibm.com>
Signed-off-by: Christian Borntraeger <borntraeger@de.ibm.com>

Metadata:
Author: Jens Freimann <jfrei@linux.vnet.ibm.com>
Author Date: Thu Dec 18 15:48:14 2014 +0100
Committer: Christian Borntraeger <borntraeger@de.ibm.com>
Commit Date: Fri Jan 23 13:25:39 2015 +0100

Files Changed: 1
Lines Added: 2
Lines Removed: 3
Total Changes: 5
