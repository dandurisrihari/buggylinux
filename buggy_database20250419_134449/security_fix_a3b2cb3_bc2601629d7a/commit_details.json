{
  "hash": "a3b2cb30f252b21a6f962e0dd107c8b897ca65e4",
  "hash_short": "a3b2cb30",
  "subject": "powerpc: Do not call ppc_md.panic in fadump panic notifier",
  "body": "If fadump is not registered, and no other crash or debug handlers are\nregistered, the powerpc panic handler stops the guest before the\ngeneric panic code can push out debug information to the console.\n\nCurrently, system reset injection causes the guest to silently stop.\n\nStop calling ppc_md.panic in the panic notifier. crash_fadump already\ndoes rtas_os_term() to terminate the guest if fadump is registered.\n\nRemove ppc_md.panic. Move fadump panic notifier into fadump code.\n\nSigned-off-by: Nicholas Piggin <npiggin@gmail.com>\nReviewed-by: Mahesh Salgaonkar <mahesh@linux.vnet.ibm.com>\nSigned-off-by: Michael Ellerman <mpe@ellerman.id.au>",
  "full_message": "powerpc: Do not call ppc_md.panic in fadump panic notifier\n\nIf fadump is not registered, and no other crash or debug handlers are\nregistered, the powerpc panic handler stops the guest before the\ngeneric panic code can push out debug information to the console.\n\nCurrently, system reset injection causes the guest to silently stop.\n\nStop calling ppc_md.panic in the panic notifier. crash_fadump already\ndoes rtas_os_term() to terminate the guest if fadump is registered.\n\nRemove ppc_md.panic. Move fadump panic notifier into fadump code.\n\nSigned-off-by: Nicholas Piggin <npiggin@gmail.com>\nReviewed-by: Mahesh Salgaonkar <mahesh@linux.vnet.ibm.com>\nSigned-off-by: Michael Ellerman <mpe@ellerman.id.au>",
  "author_name": "Nicholas Piggin",
  "author_email": "npiggin@gmail.com",
  "author_date": "Wed Jul 5 13:56:25 2017 +1000",
  "author_date_iso": "2017-07-05T13:56:25+10:00",
  "committer_name": "Michael Ellerman",
  "committer_email": "mpe@ellerman.id.au",
  "committer_date": "Thu Aug 31 14:26:01 2017 +1000",
  "committer_date_iso": "2017-08-31T14:26:01+10:00",
  "files_changed": [
    "arch/powerpc/include/asm/machdep.h",
    "arch/powerpc/include/asm/setup.h",
    "arch/powerpc/kernel/fadump.c",
    "arch/powerpc/kernel/setup-common.c",
    "arch/powerpc/platforms/ps3/setup.c",
    "arch/powerpc/platforms/pseries/setup.c"
  ],
  "files_changed_count": 6,
  "stats": [
    {
      "file": "arch/powerpc/include/asm/machdep.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/include/asm/setup.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kernel/fadump.c",
      "insertions": 22,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kernel/setup-common.c",
      "insertions": 0,
      "deletions": 27
    },
    {
      "file": "arch/powerpc/platforms/ps3/setup.c",
      "insertions": 0,
      "deletions": 15
    },
    {
      "file": "arch/powerpc/platforms/pseries/setup.c",
      "insertions": 0,
      "deletions": 1
    }
  ],
  "total_insertions": 22,
  "total_deletions": 45,
  "total_changes": 67,
  "parents": [
    "70412c55d419e971785094e9f7880fdbcd690520"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.14",
    "v4.14-rc1",
    "v4.14-rc2",
    "v4.14-rc3",
    "v4.14-rc4",
    "v4.14-rc5",
    "v4.14-rc6",
    "v4.14-rc7",
    "v4.14-rc8",
    "v4.15"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/powerpc/include/asm/setup.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/powerpc/platforms/pseries/setup.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/powerpc/kernel/setup-common.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/powerpc/platforms/ps3/setup.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/powerpc/kernel/fadump.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/powerpc/include/asm/machdep.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}