Commit Hash: a3b2cb30f252b21a6f962e0dd107c8b897ca65e4
Subject: powerpc: Do not call ppc_md.panic in fadump panic notifier


Security Keywords:
- injection

Full commit message:
powerpc: Do not call ppc_md.panic in fadump panic notifier

If fadump is not registered, and no other crash or debug handlers are
registered, the powerpc panic handler stops the guest before the
generic panic code can push out debug information to the console.

Currently, system reset injection causes the guest to silently stop.

Stop calling ppc_md.panic in the panic notifier. crash_fadump already
does rtas_os_term() to terminate the guest if fadump is registered.

Remove ppc_md.panic. Move fadump panic notifier into fadump code.

Signed-off-by: Nicholas Piggin <npiggin@gmail.com>
Reviewed-by: Mahesh Salgaonkar <mahesh@linux.vnet.ibm.com>
Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>

Metadata:
Author: Nicholas Piggin <npiggin@gmail.com>
Author Date: Wed Jul 5 13:56:25 2017 +1000
Committer: Michael Ellerman <mpe@ellerman.id.au>
Commit Date: Thu Aug 31 14:26:01 2017 +1000

Files Changed: 6
Lines Added: 22
Lines Removed: 45
Total Changes: 67
