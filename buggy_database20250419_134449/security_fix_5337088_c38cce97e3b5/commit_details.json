{
  "hash": "533708867dd6388f643f12c87465b59e732d729d",
  "hash_short": "53370886",
  "subject": "IB/mad: Require CM send method for everything except ClassPortInfo",
  "body": "Receipt of CM MAD with other than the Send method for an attribute\nother than the ClassPortInfo attribute is invalid.\n\nCM attributes other than ClassPortInfo only use the send method.\n\nThe SRP initiator does not maintain a timeout policy for CM connect\nrequests relies on the CM layer to do that. The result was that\nthe SRP initiator hung as the connect request never completed.\n\nA new SRP target has been observed to respond to Send CM REQ\nwith GetResp of CM REQ with bad status. This is non conformant\nwith IBA spec but exposes a vulnerability in the current MAD/CM\ncode which will respond to the incoming GetResp of CM REQ as if\nit was a valid incoming Send of CM REQ rather than tossing\nthis on the floor. It also causes the MAD layer not to\nretransmit the original REQ even though it has not received a REP.\n\nReviewed-by: Sagi Grimberg <sagig@mellanox.com>\nSigned-off-by: Hal Rosenstock <hal@mellanox.com>\nReviewed-by: Ira Weiny <ira.weiny@intel.com>\nSigned-off-by: Doug Ledford <dledford@redhat.com>",
  "full_message": "IB/mad: Require CM send method for everything except ClassPortInfo\n\nReceipt of CM MAD with other than the Send method for an attribute\nother than the ClassPortInfo attribute is invalid.\n\nCM attributes other than ClassPortInfo only use the send method.\n\nThe SRP initiator does not maintain a timeout policy for CM connect\nrequests relies on the CM layer to do that. The result was that\nthe SRP initiator hung as the connect request never completed.\n\nA new SRP target has been observed to respond to Send CM REQ\nwith GetResp of CM REQ with bad status. This is non conformant\nwith IBA spec but exposes a vulnerability in the current MAD/CM\ncode which will respond to the incoming GetResp of CM REQ as if\nit was a valid incoming Send of CM REQ rather than tossing\nthis on the floor. It also causes the MAD layer not to\nretransmit the original REQ even though it has not received a REP.\n\nReviewed-by: Sagi Grimberg <sagig@mellanox.com>\nSigned-off-by: Hal Rosenstock <hal@mellanox.com>\nReviewed-by: Ira Weiny <ira.weiny@intel.com>\nSigned-off-by: Doug Ledford <dledford@redhat.com>",
  "author_name": "Hal Rosenstock",
  "author_email": "hal@dev.mellanox.co.il",
  "author_date": "Fri Nov 13 15:22:22 2015 -0500",
  "author_date_iso": "2015-11-13T15:22:22-05:00",
  "committer_name": "Doug Ledford",
  "committer_email": "dledford@redhat.com",
  "committer_date": "Tue Dec 8 12:19:11 2015 -0500",
  "committer_date_iso": "2015-12-08T12:19:11-05:00",
  "files_changed": [
    "drivers/infiniband/core/mad.c",
    "include/rdma/ib_mad.h"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "drivers/infiniband/core/mad.c",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "include/rdma/ib_mad.h",
      "insertions": 2,
      "deletions": 0
    }
  ],
  "total_insertions": 7,
  "total_deletions": 0,
  "total_changes": 7,
  "parents": [
    "d3632493c70b6a866a77264cd8cfdeb89958b906"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "vulnerability"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/infiniband/core/mad.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/rdma/ib_mad.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}