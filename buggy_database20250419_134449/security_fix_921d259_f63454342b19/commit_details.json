{
  "hash": "921d2597abfc05e303f08baa6ead8f9ab8a723e1",
  "hash_short": "921d2597",
  "subject": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm",
  "body": "Pull KVM updates from Paolo Bonzini:\n \"s390:\n   - implement diag318\n\n  x86:\n   - Report last CPU for debugging\n   - Emulate smaller MAXPHYADDR in the guest than in the host\n   - .noinstr and tracing fixes from Thomas\n   - nested SVM page table switching optimization and fixes\n\n  Generic:\n   - Unify shadow MMU cache data structures across architectures\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (127 commits)\n  KVM: SVM: Fix sev_pin_memory() error handling\n  KVM: LAPIC: Set the TDCR settable bits\n  KVM: x86: Specify max TDP level via kvm_configure_mmu()\n  KVM: x86/mmu: Rename max_page_level to max_huge_page_level\n  KVM: x86: Dynamically calculate TDP level from max level and MAXPHYADDR\n  KVM: VXM: Remove temporary WARN on expected vs. actual EPTP level mismatch\n  KVM: x86: Pull the PGD's level from the MMU instead of recalculating it\n  KVM: VMX: Make vmx_load_mmu_pgd() static\n  KVM: x86/mmu: Add separate helper for shadow NPT root page role calc\n  KVM: VMX: Drop a duplicate declaration of construct_eptp()\n  KVM: nSVM: Correctly set the shadow NPT root level in its MMU role\n  KVM: Using macros instead of magic values\n  MIPS: KVM: Fix build error caused by 'kvm_run' cleanup\n  KVM: nSVM: remove nonsensical EXITINFO1 adjustment on nested NPF\n  KVM: x86: Add a capability for GUEST_MAXPHYADDR < HOST_MAXPHYADDR support\n  KVM: VMX: optimize #PF injection when MAXPHYADDR does not match\n  KVM: VMX: Add guest physical address check in EPT violation and misconfig\n  KVM: VMX: introduce vmx_need_pf_intercept\n  KVM: x86: update exception bitmap on CPUID changes\n  KVM: x86: rename update_bp_intercept to update_exception_bitmap\n  ...",
  "full_message": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm\n\nPull KVM updates from Paolo Bonzini:\n \"s390:\n   - implement diag318\n\n  x86:\n   - Report last CPU for debugging\n   - Emulate smaller MAXPHYADDR in the guest than in the host\n   - .noinstr and tracing fixes from Thomas\n   - nested SVM page table switching optimization and fixes\n\n  Generic:\n   - Unify shadow MMU cache data structures across architectures\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (127 commits)\n  KVM: SVM: Fix sev_pin_memory() error handling\n  KVM: LAPIC: Set the TDCR settable bits\n  KVM: x86: Specify max TDP level via kvm_configure_mmu()\n  KVM: x86/mmu: Rename max_page_level to max_huge_page_level\n  KVM: x86: Dynamically calculate TDP level from max level and MAXPHYADDR\n  KVM: VXM: Remove temporary WARN on expected vs. actual EPTP level mismatch\n  KVM: x86: Pull the PGD's level from the MMU instead of recalculating it\n  KVM: VMX: Make vmx_load_mmu_pgd() static\n  KVM: x86/mmu: Add separate helper for shadow NPT root page role calc\n  KVM: VMX: Drop a duplicate declaration of construct_eptp()\n  KVM: nSVM: Correctly set the shadow NPT root level in its MMU role\n  KVM: Using macros instead of magic values\n  MIPS: KVM: Fix build error caused by 'kvm_run' cleanup\n  KVM: nSVM: remove nonsensical EXITINFO1 adjustment on nested NPF\n  KVM: x86: Add a capability for GUEST_MAXPHYADDR < HOST_MAXPHYADDR support\n  KVM: VMX: optimize #PF injection when MAXPHYADDR does not match\n  KVM: VMX: Add guest physical address check in EPT violation and misconfig\n  KVM: VMX: introduce vmx_need_pf_intercept\n  KVM: x86: update exception bitmap on CPUID changes\n  KVM: x86: rename update_bp_intercept to update_exception_bitmap\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Thu Aug 6 12:59:31 2020 -0700",
  "author_date_iso": "2020-08-06T12:59:31-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Thu Aug 6 12:59:31 2020 -0700",
  "committer_date_iso": "2020-08-06T12:59:31-07:00",
  "files_changed": [
    "Documentation/admin-guide/kernel-parameters.txt",
    "Documentation/virt/kvm/api.rst",
    "arch/arm64/include/asm/kvm_host.h",
    "arch/arm64/kvm/mmu.c",
    "arch/arm64/kvm/sys_regs.c",
    "arch/mips/Kconfig",
    "arch/mips/kvm/emulate.c",
    "arch/mips/kvm/vz.c",
    "arch/s390/kernel/setup.c",
    "arch/x86/Kconfig",
    "arch/x86/include/asm/idtentry.h",
    "arch/x86/kernel/kvm.c",
    "arch/x86/kvm/lapic.c",
    "arch/x86/kvm/mmu/mmu.c",
    "arch/x86/kvm/mmu/paging_tmpl.h",
    "arch/x86/kvm/svm/svm.c",
    "arch/x86/kvm/vmx/nested.c",
    "arch/x86/kvm/vmx/vmx.c",
    "arch/x86/kvm/x86.c",
    "include/linux/kvm_host.h"
  ],
  "files_changed_count": 20,
  "stats": [
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "insertions": 8,
      "deletions": 2
    },
    {
      "file": "Documentation/virt/kvm/api.rst",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/kvm_coproc.h",
      "insertions": 6,
      "deletions": 6
    },
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "insertions": 4,
      "deletions": 18
    },
    {
      "file": "arch/arm64/include/asm/kvm_mmu.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/include/asm/kvm_types.h",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/arm.c",
      "insertions": 5,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kvm/handle_exit.c",
      "insertions": 18,
      "deletions": 18
    },
    {
      "file": "arch/arm64/kvm/mmio.c",
      "insertions": 6,
      "deletions": 5
    },
    {
      "file": "arch/arm64/kvm/mmu.c",
      "insertions": 13,
      "deletions": 48
    },
    {
      "file": "arch/arm64/kvm/sys_regs.c",
      "insertions": 6,
      "deletions": 7
    },
    {
      "file": "arch/mips/Kconfig",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/mips/include/asm/kvm_host.h",
      "insertions": 3,
      "deletions": 36
    },
    {
      "file": "arch/mips/include/asm/kvm_types.h",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "arch/mips/kvm/00README.txt",
      "insertions": 0,
      "deletions": 31
    },
    {
      "file": "arch/mips/kvm/Kconfig",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "arch/mips/kvm/emulate.c",
      "insertions": 22,
      "deletions": 43
    },
    {
      "file": "arch/mips/kvm/mips.c",
      "insertions": 5,
      "deletions": 6
    },
    {
      "file": "arch/mips/kvm/mmu.c",
      "insertions": 5,
      "deletions": 39
    },
    {
      "file": "arch/mips/kvm/trap_emul.c",
      "insertions": 50,
      "deletions": 64
    },
    {
      "file": "arch/mips/kvm/vz.c",
      "insertions": 10,
      "deletions": 16
    },
    {
      "file": "arch/powerpc/include/asm/Kbuild",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/s390/include/asm/Kbuild",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/s390/include/asm/diag.h",
      "insertions": 2,
      "deletions": 4
    },
    {
      "file": "arch/s390/include/asm/kvm_host.h",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "arch/s390/include/uapi/asm/kvm.h",
      "insertions": 5,
      "deletions": 2
    },
    {
      "file": "arch/s390/kernel/setup.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "arch/s390/kvm/kvm-s390.c",
      "insertions": 34,
      "deletions": 20
    },
    {
      "file": "arch/s390/kvm/vsie.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/Kconfig",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/include/asm/hardirq.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/x86/include/asm/idtentry.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "arch/x86/include/asm/kvm_host.h",
      "insertions": 25,
      "deletions": 70
    },
    {
      "file": "arch/x86/include/asm/kvm_para.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "arch/x86/include/asm/kvm_types.h",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "arch/x86/include/asm/qspinlock.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/kernel/kvm.c",
      "insertions": 81,
      "deletions": 37
    },
    {
      "file": "arch/x86/kvm/cpuid.c",
      "insertions": 72,
      "deletions": 43
    },
    {
      "file": "arch/x86/kvm/cpuid.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/lapic.c",
      "insertions": 5,
      "deletions": 6
    },
    {
      "file": "arch/x86/kvm/mmu.h",
      "insertions": 16,
      "deletions": 18
    },
    {
      "file": "arch/x86/kvm/mmu/mmu.c",
      "insertions": 248,
      "deletions": 213
    },
    {
      "file": "arch/x86/kvm/{ => mmu}/mmu_audit.c",
      "insertions": 6,
      "deletions": 6
    },
    {
      "file": "arch/x86/kvm/mmu/mmu_internal.h",
      "insertions": 63,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/{ => mmu}/mmutrace.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/mmu/page_track.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/mmu/paging_tmpl.h",
      "insertions": 10,
      "deletions": 9
    },
    {
      "file": "arch/x86/kvm/pmu.c",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/pmu.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/svm/avic.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/svm/nested.c",
      "insertions": 102,
      "deletions": 40
    },
    {
      "file": "arch/x86/kvm/svm/sev.c",
      "insertions": 26,
      "deletions": 21
    },
    {
      "file": "arch/x86/kvm/svm/svm.c",
      "insertions": 162,
      "deletions": 100
    },
    {
      "file": "arch/x86/kvm/svm/svm.h",
      "insertions": 16,
      "deletions": 16
    },
    {
      "file": "arch/x86/kvm/svm/vmenter.S",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/vmx/nested.c",
      "insertions": 95,
      "deletions": 54
    },
    {
      "file": "arch/x86/kvm/vmx/ops.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/vmx/pmu_intel.c",
      "insertions": 0,
      "deletions": 17
    },
    {
      "file": "arch/x86/kvm/vmx/vmenter.S",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/vmx/vmx.c",
      "insertions": 127,
      "deletions": 82
    },
    {
      "file": "arch/x86/kvm/vmx/vmx.h",
      "insertions": 8,
      "deletions": 4
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "insertions": 148,
      "deletions": 83
    },
    {
      "file": "arch/x86/kvm/x86.h",
      "insertions": 33,
      "deletions": 1
    },
    {
      "file": "arch/x86/xen/spinlock.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "include/asm-generic/kvm_types.h",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "include/linux/kvm_host.h",
      "insertions": 10,
      "deletions": 2
    },
    {
      "file": "include/linux/kvm_types.h",
      "insertions": 19,
      "deletions": 0
    },
    {
      "file": "include/uapi/linux/kvm.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "kernel/locking/qspinlock.c",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "virt/kvm/async_pf.c",
      "insertions": 10,
      "deletions": 6
    },
    {
      "file": "virt/kvm/kvm_main.c",
      "insertions": 63,
      "deletions": 0
    }
  ],
  "total_insertions": 1633,
  "total_deletions": 1212,
  "total_changes": 2845,
  "parents": [
    "7b4ea9456dd3f73238408126ab00f1d906963d81",
    "f3633c2683545213de4a00a9b0c3fba741321fb2"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/mips/kvm/vz.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "Documentation/virt/kvm/api.rst",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/mips/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/sys_regs.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/mmu.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/mips/kvm/emulate.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/s390/kernel/setup.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/lapic.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/include/asm/idtentry.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/mmu/mmu.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/kvm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/svm/svm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/vmx/nested.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/mmu/paging_tmpl.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/kvm_host.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/vmx/vmx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}