{
  "hash": "e37fea58f771c2674709099a09ddafd058fef634",
  "hash_short": "e37fea58",
  "subject": "fs: cifs: replace CURRENT_TIME by other appropriate apis",
  "body": "CURRENT_TIME macro is not y2038 safe on 32 bit systems.\n\nThe patch replaces all the uses of CURRENT_TIME by current_time() for\nfilesystem times, and ktime_get_* functions for authentication\ntimestamps and timezone calculations.\n\nThis is also in preparation for the patch that transitions vfs\ntimestamps to use 64 bit time and hence make them y2038 safe.\n\nCURRENT_TIME macro will be deleted before merging the aforementioned\nchange.\n\nThe inode timestamps read from the server are assumed to have correct\ngranularity and range.\n\nThe patch also assumes that the difference between server and client\ntimes lie in the range INT_MIN..INT_MAX.  This is valid because this is\nthe difference between current times between server and client, and the\nlargest timezone difference is in the range of one day.\n\nAll cifs timestamps currently use timespec representation internally.\nAuthentication and timezone timestamps can also be transitioned into\nusing timespec64 when all other timestamps for cifs is transitioned to\nuse timespec64.\n\nLink: http://lkml.kernel.org/r/1491613030-11599-4-git-send-email-deepa.kernel@gmail.com\nSigned-off-by: Deepa Dinamani <deepa.kernel@gmail.com>\nReviewed-by: Arnd Bergmann <arnd@arndb.de>\nCc: Steve French <sfrench@samba.org>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\nSigned-off-by: Linus Torvalds <torvalds@linux-foundation.org>",
  "full_message": "fs: cifs: replace CURRENT_TIME by other appropriate apis\n\nCURRENT_TIME macro is not y2038 safe on 32 bit systems.\n\nThe patch replaces all the uses of CURRENT_TIME by current_time() for\nfilesystem times, and ktime_get_* functions for authentication\ntimestamps and timezone calculations.\n\nThis is also in preparation for the patch that transitions vfs\ntimestamps to use 64 bit time and hence make them y2038 safe.\n\nCURRENT_TIME macro will be deleted before merging the aforementioned\nchange.\n\nThe inode timestamps read from the server are assumed to have correct\ngranularity and range.\n\nThe patch also assumes that the difference between server and client\ntimes lie in the range INT_MIN..INT_MAX.  This is valid because this is\nthe difference between current times between server and client, and the\nlargest timezone difference is in the range of one day.\n\nAll cifs timestamps currently use timespec representation internally.\nAuthentication and timezone timestamps can also be transitioned into\nusing timespec64 when all other timestamps for cifs is transitioned to\nuse timespec64.\n\nLink: http://lkml.kernel.org/r/1491613030-11599-4-git-send-email-deepa.kernel@gmail.com\nSigned-off-by: Deepa Dinamani <deepa.kernel@gmail.com>\nReviewed-by: Arnd Bergmann <arnd@arndb.de>\nCc: Steve French <sfrench@samba.org>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\nSigned-off-by: Linus Torvalds <torvalds@linux-foundation.org>",
  "author_name": "Deepa Dinamani",
  "author_email": "deepa.kernel@gmail.com",
  "author_date": "Mon May 8 15:59:16 2017 -0700",
  "author_date_iso": "2017-05-08T15:59:16-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Mon May 8 17:15:15 2017 -0700",
  "committer_date_iso": "2017-05-08T17:15:15-07:00",
  "files_changed": [
    "fs/cifs/cifsencrypt.c",
    "fs/cifs/cifssmb.c",
    "fs/cifs/inode.c"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "fs/cifs/cifsencrypt.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "fs/cifs/cifssmb.c",
      "insertions": 5,
      "deletions": 5
    },
    {
      "file": "fs/cifs/inode.c",
      "insertions": 15,
      "deletions": 13
    }
  ],
  "total_insertions": 23,
  "total_deletions": 19,
  "total_changes": 42,
  "parents": [
    "51aad0aee5b70e26347e4d891d568518909f3452"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.12",
    "v4.12-rc1",
    "v4.12-rc2",
    "v4.12-rc3",
    "v4.12-rc4",
    "v4.12-rc5",
    "v4.12-rc6",
    "v4.12-rc7",
    "v4.13",
    "v4.13-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "fs/cifs/cifsencrypt.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/cifs/cifssmb.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/cifs/inode.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}