{
  "hash": "8c773d53fb7b64267b0f55c1d3517cb8c5e29b3c",
  "hash_short": "8c773d53",
  "subject": "vduse: Implement an MMU-based software IOTLB",
  "body": "This implements an MMU-based software IOTLB to support mapping\nkernel dma buffer into userspace dynamically. The basic idea\nbehind it is treating MMU (VA->PA) as IOMMU (IOVA->PA). The\nsoftware IOTLB will set up MMU mapping instead of IOMMU mapping\nfor the DMA transfer so that the userspace process is able to\nuse its virtual address to access the dma buffer in kernel.\n\nTo avoid security issue, a bounce-buffering mechanism is\nintroduced to prevent userspace accessing the original buffer\ndirectly which may contain other kernel data. During the mapping,\nunmapping, the software IOTLB will copy the data from the original\nbuffer to the bounce buffer and back, depending on the direction\nof the transfer. And the bounce-buffer addresses will be mapped\ninto the user address space instead of the original one.\n\nSigned-off-by: Xie Yongji <xieyongji@bytedance.com>\nAcked-by: Jason Wang <jasowang@redhat.com>\nLink: https://lore.kernel.org/r/20210831103634.33-12-xieyongji@bytedance.com\nSigned-off-by: Michael S. Tsirkin <mst@redhat.com>",
  "full_message": "vduse: Implement an MMU-based software IOTLB\n\nThis implements an MMU-based software IOTLB to support mapping\nkernel dma buffer into userspace dynamically. The basic idea\nbehind it is treating MMU (VA->PA) as IOMMU (IOVA->PA). The\nsoftware IOTLB will set up MMU mapping instead of IOMMU mapping\nfor the DMA transfer so that the userspace process is able to\nuse its virtual address to access the dma buffer in kernel.\n\nTo avoid security issue, a bounce-buffering mechanism is\nintroduced to prevent userspace accessing the original buffer\ndirectly which may contain other kernel data. During the mapping,\nunmapping, the software IOTLB will copy the data from the original\nbuffer to the bounce buffer and back, depending on the direction\nof the transfer. And the bounce-buffer addresses will be mapped\ninto the user address space instead of the original one.\n\nSigned-off-by: Xie Yongji <xieyongji@bytedance.com>\nAcked-by: Jason Wang <jasowang@redhat.com>\nLink: https://lore.kernel.org/r/20210831103634.33-12-xieyongji@bytedance.com\nSigned-off-by: Michael S. Tsirkin <mst@redhat.com>",
  "author_name": "Xie Yongji",
  "author_email": "xieyongji@bytedance.com",
  "author_date": "Tue Aug 31 18:36:32 2021 +0800",
  "author_date_iso": "2021-08-31T18:36:32+08:00",
  "committer_name": "Michael S. Tsirkin",
  "committer_email": "mst@redhat.com",
  "committer_date": "Mon Sep 6 07:20:58 2021 -0400",
  "committer_date_iso": "2021-09-06T07:20:58-04:00",
  "files_changed": [
    "drivers/vdpa/vdpa_user/iova_domain.c",
    "drivers/vdpa/vdpa_user/iova_domain.h"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "drivers/vdpa/vdpa_user/iova_domain.c",
      "insertions": 545,
      "deletions": 0
    },
    {
      "file": "drivers/vdpa/vdpa_user/iova_domain.h",
      "insertions": 73,
      "deletions": 0
    }
  ],
  "total_insertions": 618,
  "total_deletions": 0,
  "total_changes": 618,
  "parents": [
    "d8945ec411209272bcd4ae9e75ea1b078257e492"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "security issue"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/vdpa/vdpa_user/iova_domain.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/vdpa/vdpa_user/iova_domain.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}