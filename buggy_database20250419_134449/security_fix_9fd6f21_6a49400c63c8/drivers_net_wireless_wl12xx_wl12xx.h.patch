commit 9fd6f21ba295810e36299981411f62719364d9e9
Author: Eliad Peller <eliad@wizery.com>
Date:   Sun Mar 4 10:55:48 2012 +0200

    wl12xx: set authorized AP on sta_state notification
    
    wl12xx currently looks for AP authorization by registering
    a netdev notifier and waiting for the IF_OPER_UP notification,
    which is quite cumbersome.
    
    Use the newly introduced sta_state callback (waiting
    for assoc -> auth notification) instead, in order to
    simplify it.
    
    Signed-off-by: Eliad Peller <eliad@wizery.com>
    Signed-off-by: Luciano Coelho <coelho@ti.com>

diff --git a/drivers/net/wireless/wl12xx/wl12xx.h b/drivers/net/wireless/wl12xx/wl12xx.h
index 90352415e2aa..b26b1be9a98b 100644
--- a/drivers/net/wireless/wl12xx/wl12xx.h
+++ b/drivers/net/wireless/wl12xx/wl12xx.h
@@ -265,6 +265,7 @@ enum wl12xx_flags {
 enum wl12xx_vif_flags {
 	WLVIF_FLAG_INITIALIZED,
 	WLVIF_FLAG_STA_ASSOCIATED,
+	WLVIF_FLAG_STA_AUTHORIZED,
 	WLVIF_FLAG_IBSS_JOINED,
 	WLVIF_FLAG_AP_STARTED,
 	WLVIF_FLAG_IN_PS,
@@ -452,8 +453,6 @@ struct wl1271 {
 
 	bool enable_11a;
 
-	struct list_head list;
-
 	/* Most recently reported noise in dBm */
 	s8 noise;