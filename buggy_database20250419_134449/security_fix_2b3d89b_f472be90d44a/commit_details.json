{
  "hash": "2b3d89b402b085b08498e896c65267a145bed486",
  "hash_short": "2b3d89b4",
  "subject": "watchdog: hpwdt: Remove legacy NMI sourcing.",
  "body": "Gen8 and prior Proliant systems supported the \"CRU\" interface\nto firmware.  This interfaces allows linux to \"call back\" into firmware\nto source the cause of an NMI.  This feature isn't fully utilized\nas the actual source of the NMI isn't printed, the driver only\nindicates that the source couldn't be determined when the call\nfails.\n\nWith the advent of Gen9, iCRU replaces the CRU. The call back\nfeature is no longer available in firmware.  To be compatible and\nnot attempt to call back into firmware on system not supporting CRU,\nthe SMBIOS table is consulted to determine if it is safe to\nmake the call back or not.\n\nThis results in about half of the driver code being devoted\nto either making CRU calls or determing if it is safe to make\nCRU calls.  As noted, the driver isn't really using the results of\nthe CRU calls.\n\nFurthermore, as a consequence of the Spectre security issue, the\nBIOS/EFI calls are being wrapped into Spectre-disabling section.\nRemoving the call back in hpwdt_pretimeout assists in this effort.\n\nAs the CRU sourcing of the NMI isn't required for handling the\nNMI and there are security concerns with making the call back, remove\nthe legacy (pre Gen9) NMI sourcing and the DMI code to determine if\nthe system had the CRU interface.\n\nSigned-off-by: Jerry Hoemann <jerry.hoemann@hpe.com>\nAcked-by: Ingo Molnar <mingo@kernel.org>\nReviewed-by: Guenter Roeck <linux@roeck-us.net>\nSigned-off-by: Guenter Roeck <linux@roeck-us.net>\nSigned-off-by: Wim Van Sebroeck <wim@iguana.be>",
  "full_message": "watchdog: hpwdt: Remove legacy NMI sourcing.\n\nGen8 and prior Proliant systems supported the \"CRU\" interface\nto firmware.  This interfaces allows linux to \"call back\" into firmware\nto source the cause of an NMI.  This feature isn't fully utilized\nas the actual source of the NMI isn't printed, the driver only\nindicates that the source couldn't be determined when the call\nfails.\n\nWith the advent of Gen9, iCRU replaces the CRU. The call back\nfeature is no longer available in firmware.  To be compatible and\nnot attempt to call back into firmware on system not supporting CRU,\nthe SMBIOS table is consulted to determine if it is safe to\nmake the call back or not.\n\nThis results in about half of the driver code being devoted\nto either making CRU calls or determing if it is safe to make\nCRU calls.  As noted, the driver isn't really using the results of\nthe CRU calls.\n\nFurthermore, as a consequence of the Spectre security issue, the\nBIOS/EFI calls are being wrapped into Spectre-disabling section.\nRemoving the call back in hpwdt_pretimeout assists in this effort.\n\nAs the CRU sourcing of the NMI isn't required for handling the\nNMI and there are security concerns with making the call back, remove\nthe legacy (pre Gen9) NMI sourcing and the DMI code to determine if\nthe system had the CRU interface.\n\nSigned-off-by: Jerry Hoemann <jerry.hoemann@hpe.com>\nAcked-by: Ingo Molnar <mingo@kernel.org>\nReviewed-by: Guenter Roeck <linux@roeck-us.net>\nSigned-off-by: Guenter Roeck <linux@roeck-us.net>\nSigned-off-by: Wim Van Sebroeck <wim@iguana.be>",
  "author_name": "Jerry Hoemann",
  "author_email": "jerry.hoemann@hpe.com",
  "author_date": "Sun Feb 25 20:22:20 2018 -0700",
  "author_date_iso": "2018-02-25T20:22:20-07:00",
  "committer_name": "Wim Van Sebroeck",
  "committer_email": "wim@linux-watchdog.org",
  "committer_date": "Sat Mar 3 15:52:33 2018 +0100",
  "committer_date_iso": "2018-03-03T15:52:33+01:00",
  "files_changed": [
    "drivers/watchdog/hpwdt.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/watchdog/hpwdt.c",
      "insertions": 9,
      "deletions": 492
    }
  ],
  "total_insertions": 9,
  "total_deletions": 492,
  "total_changes": 501,
  "parents": [
    "93ac3deb7c220cbcec032a967220a1f109d58431"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.16",
    "v4.16-rc5",
    "v4.16-rc6",
    "v4.16-rc7",
    "v4.17",
    "v4.17-rc1",
    "v4.17-rc2",
    "v4.17-rc3",
    "v4.17-rc4",
    "v4.17-rc5"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "security issue"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/watchdog/hpwdt.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}