{
  "hash": "a9cf69d0e7f2051cca1c08ed9b34fe79da951ee9",
  "hash_short": "a9cf69d0",
  "subject": "Merge tag 'vfio-v6.0-rc1' of https://github.com/awilliam/linux-vfio",
  "body": "Pull VFIO updates from Alex Williamson:\n\n - Cleanup use of extern in function prototypes (Alex Williamson)\n\n - Simplify bus_type usage and convert to device IOMMU interfaces (Robin\n   Murphy)\n\n - Check missed return value and fix comment typos (Bo Liu)\n\n - Split migration ops from device ops and fix races in mlx5 migration\n   support (Yishai Hadas)\n\n - Fix missed return value check in noiommu support (Liam Ni)\n\n - Hardening to clear buffer pointer to avoid use-after-free (Schspa\n   Shi)\n\n - Remove requirement that only the same mm can unmap a previously\n   mapped range (Li Zhe)\n\n - Adjust semaphore release vs device open counter (Yi Liu)\n\n - Remove unused arg from SPAPR support code (Deming Wang)\n\n - Rework vfio-ccw driver to better fit new mdev framework (Eric Farman,\n   Michael Kawano)\n\n - Replace DMA unmap notifier with callbacks (Jason Gunthorpe)\n\n - Clarify SPAPR support comment relative to iommu_ops (Alexey\n   Kardashevskiy)\n\n - Revise page pinning API towards compatibility with future iommufd\n   support (Nicolin Chen)\n\n - Resolve issues in vfio-ccw, including use of DMA unmap callback (Eric\n   Farman)\n\n* tag 'vfio-v6.0-rc1' of https://github.com/awilliam/linux-vfio: (40 commits)\n  vfio/pci: fix the wrong word\n  vfio/ccw: Check return code from subchannel quiesce\n  vfio/ccw: Remove FSM Close from remove handlers\n  vfio/ccw: Add length to DMA_UNMAP checks\n  vfio: Replace phys_pfn with pages for vfio_pin_pages()\n  vfio/ccw: Add kmap_local_page() for memcpy\n  vfio: Rename user_iova of vfio_dma_rw()\n  vfio/ccw: Change pa_pfn list to pa_iova list\n  vfio/ap: Change saved_pfn to saved_iova\n  vfio: Pass in starting IOVA to vfio_pin/unpin_pages API\n  vfio/ccw: Only pass in contiguous pages\n  vfio/ap: Pass in physical address of ind to ap_aqic()\n  drm/i915/gvt: Replace roundup with DIV_ROUND_UP\n  vfio: Make vfio_unpin_pages() return void\n  vfio/spapr_tce: Fix the comment\n  vfio: Replace the iommu notifier with a device list\n  vfio: Replace the DMA unmapping notifier with a callback\n  vfio/ccw: Move FSM open/close to MDEV open/close\n  vfio/ccw: Refactor vfio_ccw_mdev_reset\n  vfio/ccw: Create a CLOSE FSM event\n  ...",
  "full_message": "Merge tag 'vfio-v6.0-rc1' of https://github.com/awilliam/linux-vfio\n\nPull VFIO updates from Alex Williamson:\n\n - Cleanup use of extern in function prototypes (Alex Williamson)\n\n - Simplify bus_type usage and convert to device IOMMU interfaces (Robin\n   Murphy)\n\n - Check missed return value and fix comment typos (Bo Liu)\n\n - Split migration ops from device ops and fix races in mlx5 migration\n   support (Yishai Hadas)\n\n - Fix missed return value check in noiommu support (Liam Ni)\n\n - Hardening to clear buffer pointer to avoid use-after-free (Schspa\n   Shi)\n\n - Remove requirement that only the same mm can unmap a previously\n   mapped range (Li Zhe)\n\n - Adjust semaphore release vs device open counter (Yi Liu)\n\n - Remove unused arg from SPAPR support code (Deming Wang)\n\n - Rework vfio-ccw driver to better fit new mdev framework (Eric Farman,\n   Michael Kawano)\n\n - Replace DMA unmap notifier with callbacks (Jason Gunthorpe)\n\n - Clarify SPAPR support comment relative to iommu_ops (Alexey\n   Kardashevskiy)\n\n - Revise page pinning API towards compatibility with future iommufd\n   support (Nicolin Chen)\n\n - Resolve issues in vfio-ccw, including use of DMA unmap callback (Eric\n   Farman)\n\n* tag 'vfio-v6.0-rc1' of https://github.com/awilliam/linux-vfio: (40 commits)\n  vfio/pci: fix the wrong word\n  vfio/ccw: Check return code from subchannel quiesce\n  vfio/ccw: Remove FSM Close from remove handlers\n  vfio/ccw: Add length to DMA_UNMAP checks\n  vfio: Replace phys_pfn with pages for vfio_pin_pages()\n  vfio/ccw: Add kmap_local_page() for memcpy\n  vfio: Rename user_iova of vfio_dma_rw()\n  vfio/ccw: Change pa_pfn list to pa_iova list\n  vfio/ap: Change saved_pfn to saved_iova\n  vfio: Pass in starting IOVA to vfio_pin/unpin_pages API\n  vfio/ccw: Only pass in contiguous pages\n  vfio/ap: Pass in physical address of ind to ap_aqic()\n  drm/i915/gvt: Replace roundup with DIV_ROUND_UP\n  vfio: Make vfio_unpin_pages() return void\n  vfio/spapr_tce: Fix the comment\n  vfio: Replace the iommu notifier with a device list\n  vfio: Replace the DMA unmapping notifier with a callback\n  vfio/ccw: Move FSM open/close to MDEV open/close\n  vfio/ccw: Refactor vfio_ccw_mdev_reset\n  vfio/ccw: Create a CLOSE FSM event\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Sat Aug 6 08:59:35 2022 -0700",
  "author_date_iso": "2022-08-06T08:59:35-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Sat Aug 6 08:59:35 2022 -0700",
  "committer_date_iso": "2022-08-06T08:59:35-07:00",
  "files_changed": [
    "Documentation/driver-api/vfio-mediated-device.rst",
    "drivers/vfio/pci/vfio_pci_core.c",
    "drivers/vfio/vfio.c",
    "include/linux/vfio_pci_core.h"
  ],
  "files_changed_count": 4,
  "stats": [
    {
      "file": "Documentation/driver-api/vfio-mediated-device.rst",
      "insertions": 8,
      "deletions": 8
    },
    {
      "file": "arch/s390/include/asm/ap.h",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "drivers/gpu/drm/i915/gvt/gvt.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/i915/gvt/kvmgt.c",
      "insertions": 32,
      "deletions": 88
    },
    {
      "file": "drivers/s390/cio/vfio_ccw_async.c",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "drivers/s390/cio/vfio_ccw_cp.c",
      "insertions": 124,
      "deletions": 81
    },
    {
      "file": "drivers/s390/cio/vfio_ccw_cp.h",
      "insertions": 6,
      "deletions": 6
    },
    {
      "file": "drivers/s390/cio/vfio_ccw_drv.c",
      "insertions": 16,
      "deletions": 42
    },
    {
      "file": "drivers/s390/cio/vfio_ccw_fsm.c",
      "insertions": 82,
      "deletions": 17
    },
    {
      "file": "drivers/s390/cio/vfio_ccw_ops.c",
      "insertions": 29,
      "deletions": 85
    },
    {
      "file": "drivers/s390/cio/vfio_ccw_private.h",
      "insertions": 4,
      "deletions": 9
    },
    {
      "file": "drivers/s390/crypto/ap_queue.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/s390/crypto/vfio_ap_ops.c",
      "insertions": 29,
      "deletions": 74
    },
    {
      "file": "drivers/s390/crypto/vfio_ap_private.h",
      "insertions": 2,
      "deletions": 5
    },
    {
      "file": "drivers/vfio/fsl-mc/vfio_fsl_mc_private.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/vfio/pci/hisilicon/hisi_acc_vfio_pci.c",
      "insertions": 8,
      "deletions": 3
    },
    {
      "file": "drivers/vfio/pci/mlx5/cmd.c",
      "insertions": 13,
      "deletions": 1
    },
    {
      "file": "drivers/vfio/pci/mlx5/cmd.h",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "drivers/vfio/pci/mlx5/main.c",
      "insertions": 7,
      "deletions": 4
    },
    {
      "file": "drivers/vfio/pci/vfio_pci_config.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/vfio/pci/vfio_pci_core.c",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "drivers/vfio/platform/vfio_platform_private.h",
      "insertions": 10,
      "deletions": 11
    },
    {
      "file": "drivers/vfio/vfio.c",
      "insertions": 63,
      "deletions": 129
    },
    {
      "file": "drivers/vfio/vfio.h",
      "insertions": 8,
      "deletions": 9
    },
    {
      "file": "drivers/vfio/vfio_iommu_spapr_tce.c",
      "insertions": 8,
      "deletions": 6
    },
    {
      "file": "drivers/vfio/vfio_iommu_type1.c",
      "insertions": 111,
      "deletions": 86
    },
    {
      "file": "include/linux/mdev.h",
      "insertions": 0,
      "deletions": 5
    },
    {
      "file": "include/linux/vfio.h",
      "insertions": 50,
      "deletions": 56
    },
    {
      "file": "include/linux/vfio_pci_core.h",
      "insertions": 32,
      "deletions": 33
    }
  ],
  "total_insertions": 659,
  "total_deletions": 768,
  "total_changes": 1427,
  "parents": [
    "6614a3c3164a5df2b54abb0b3559f51041cf705b",
    "099fd2c2020751737d9288f923d562e0e05977eb"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "Hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "Documentation/driver-api/vfio-mediated-device.rst",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/vfio/pci/vfio_pci_core.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/vfio/vfio.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/vfio_pci_core.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}