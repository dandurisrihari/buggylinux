Commit Hash: 94749156e6bc0b3c2bb65e2a95babdef44b7d591
Subject: remoteproc: qcom: pas: Carry PAS metadata context


Security Keywords:
- authentication

Full commit message:
remoteproc: qcom: pas: Carry PAS metadata context

Starting with Qualcomm SM8450 the metadata object shared with the secure
world during authentication and booting of a remoteproc needs to be
alive from init_image() until auth_and_reset().

Use the newly introduced "PAS metadata context" object to track this
context from load until the firmware has been booted.

In the even that load is performed but the process for some reason
doesn't reach auth_and_reset the unprepare callback is used to clean up
the allocated memory.

Signed-off-by: Bjorn Andersson <bjorn.andersson@linaro.org>
Reviewed-by: Dmitry Baryshkov <dmitry.baryshkov@linaro.org>
Link: https://lore.kernel.org/r/20220128025513.97188-10-bjorn.andersson@linaro.org

Metadata:
Author: Bjorn Andersson <bjorn.andersson@linaro.org>
Author Date: Thu Jan 27 18:55:09 2022 -0800
Committer: Bjorn Andersson <bjorn.andersson@linaro.org>
Commit Date: Thu Feb 3 21:54:48 2022 -0600

Files Changed: 1
Lines Added: 29
Lines Removed: 3
Total Changes: 32
