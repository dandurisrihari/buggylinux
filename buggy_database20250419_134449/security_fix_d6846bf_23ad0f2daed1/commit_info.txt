Commit Hash: d6846bfbeeac873d85f32bd2b988fa94c89dbcb8
Subject: nfsd: fix dentry leak upon mkdir failure.


Security Keywords:
- injection

Full commit message:
nfsd: fix dentry leak upon mkdir failure.

syzbot is reporting that nfsd_mkdir() forgot to remove dentry created by
d_alloc_name() when __nfsd_mkdir() failed (due to memory allocation fault
injection) [1].

[1] https://syzkaller.appspot.com/bug?id=ce41a1f769ea4637ebffedf004a803e8405b4674

Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>
Reported-by: syzbot <syzbot+2c95195d5d433f6ed6cb@syzkaller.appspotmail.com>
Fixes: e8a79fb14f6b76b5 ("nfsd: add nfsd/clients directory")
[bfields: clean up in nfsd_mkdir instead of __nfsd_mkdir]
Signed-off-by: J. Bruce Fields <bfields@redhat.com>

Metadata:
Author: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>
Author Date: Mon Aug 12 11:16:11 2019 +0900
Committer: J. Bruce Fields <bfields@redhat.com>
Commit Date: Thu Aug 15 14:53:00 2019 -0400

Files Changed: 1
Lines Added: 1
Lines Removed: 0
Total Changes: 1
