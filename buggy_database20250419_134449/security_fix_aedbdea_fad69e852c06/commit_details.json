{
  "hash": "aedbdeab00dcfcc6d751f9fb1b4896b01911d494",
  "hash_short": "aedbdeab",
  "subject": "x86/mce: Use untraced rd/wrmsr in the MCE offline/crash check",
  "body": "mce_check_crashing_cpu() is called right at the entry of the MCE\nhandler. It uses mce_rdmsr() and mce_wrmsr() which are wrappers around\nrdmsr() and wrmsr() to handle the MCE error injection mechanism, which is\npointless in this context, i.e. when the MCE hits an offline CPU or the\nsystem is already marked crashing.\n\nThe MSR access can also be traced, so use the untraceable variants. This\nis also safe vs. XEN paravirt as these MSRs are not affected by XEN PV\nmodifications.\n\nSigned-off-by: Thomas Gleixner <tglx@linutronix.de>\nReviewed-by: Alexandre Chartre <alexandre.chartre@oracle.com>\nAcked-by: Peter Zijlstra <peterz@infradead.org>\nAcked-by: Andy Lutomirski <luto@kernel.org>\nLink: https://lkml.kernel.org/r/20200505135314.426347351@linutronix.de",
  "full_message": "x86/mce: Use untraced rd/wrmsr in the MCE offline/crash check\n\nmce_check_crashing_cpu() is called right at the entry of the MCE\nhandler. It uses mce_rdmsr() and mce_wrmsr() which are wrappers around\nrdmsr() and wrmsr() to handle the MCE error injection mechanism, which is\npointless in this context, i.e. when the MCE hits an offline CPU or the\nsystem is already marked crashing.\n\nThe MSR access can also be traced, so use the untraceable variants. This\nis also safe vs. XEN paravirt as these MSRs are not affected by XEN PV\nmodifications.\n\nSigned-off-by: Thomas Gleixner <tglx@linutronix.de>\nReviewed-by: Alexandre Chartre <alexandre.chartre@oracle.com>\nAcked-by: Peter Zijlstra <peterz@infradead.org>\nAcked-by: Andy Lutomirski <luto@kernel.org>\nLink: https://lkml.kernel.org/r/20200505135314.426347351@linutronix.de",
  "author_name": "Thomas Gleixner",
  "author_email": "tglx@linutronix.de",
  "author_date": "Sat Apr 4 15:39:13 2020 +0200",
  "author_date_iso": "2020-04-04T15:39:13+02:00",
  "committer_name": "Thomas Gleixner",
  "committer_email": "tglx@linutronix.de",
  "committer_date": "Thu Jun 11 15:14:57 2020 +0200",
  "committer_date_iso": "2020-06-11T15:14:57+02:00",
  "files_changed": [
    "arch/x86/kernel/cpu/mce/core.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "arch/x86/kernel/cpu/mce/core.c",
      "insertions": 2,
      "deletions": 2
    }
  ],
  "total_insertions": 2,
  "total_deletions": 2,
  "total_changes": 4,
  "parents": [
    "8cd501c1facc159dff6db63775151c9200a3ea1e"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/kernel/cpu/mce/core.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}