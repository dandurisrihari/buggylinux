Commit Hash: 83bcacb1a548d4d8df532376c981277761622bce
Subject: KVM: Avoid double interrupt injection with vapic


Security Keywords:
- injection

Full commit message:
KVM: Avoid double interrupt injection with vapic

After an interrupt injection, the PPR changes, and we have to reflect that
into the vapic.  This causes a KVM_REQ_EVENT to be set, which causes the
whole interrupt injection routine to be run again (harmlessly).

Optimize by only setting KVM_REQ_EVENT if the ppr was lowered; otherwise
there is no chance that a new injection is needed.

Signed-off-by: Avi Kivity <avi@redhat.com>

Metadata:
Author: Avi Kivity <avi@redhat.com>
Author Date: Mon Oct 25 15:23:55 2010 +0200
Committer: Avi Kivity <avi@redhat.com>
Commit Date: Wed Jan 12 11:23:36 2011 +0200

Files Changed: 1
Lines Added: 2
Lines Removed: 1
Total Changes: 3
