{
  "hash": "3b99107f0e0298e6fe0787f75b8f3d8306dfb230",
  "hash_short": "3b99107f",
  "subject": "Merge tag 'for-5.3/block-20190708' of git://git.kernel.dk/linux-block",
  "body": "Pull block updates from Jens Axboe:\n \"This is the main block updates for 5.3. Nothing earth shattering or\n  major in here, just fixes, additions, and improvements all over the\n  map. This contains:\n\n   - Series of documentation fixes (Bart)\n\n   - Optimization of the blk-mq ctx get/put (Bart)\n\n   - null_blk removal race condition fix (Bob)\n\n   - req/bio_op() cleanups (Chaitanya)\n\n   - Series cleaning up the segment accounting, and request/bio mapping\n     (Christoph)\n\n   - Series cleaning up the page getting/putting for bios (Christoph)\n\n   - block cgroup cleanups and moving it to where it is used (Christoph)\n\n   - block cgroup fixes (Tejun)\n\n   - Series of fixes and improvements to bcache, most notably a write\n     deadlock fix (Coly)\n\n   - blk-iolatency STS_AGAIN and accounting fixes (Dennis)\n\n   - Series of improvements and fixes to BFQ (Douglas, Paolo)\n\n   - debugfs_create() return value check removal for drbd (Greg)\n\n   - Use struct_size(), where appropriate (Gustavo)\n\n   - Two lighnvm fixes (Heiner, Geert)\n\n   - MD fixes, including a read balance and corruption fix (Guoqing,\n     Marcos, Xiao, Yufen)\n\n   - block opal shadow mbr additions (Jonas, Revanth)\n\n   - sbitmap compare-and-exhange improvemnts (Pavel)\n\n   - Fix for potential bio->bi_size overflow (Ming)\n\n   - NVMe pull requests:\n       - improved PCIe suspent support (Keith Busch)\n       - error injection support for the admin queue (Akinobu Mita)\n       - Fibre Channel discovery improvements (James Smart)\n       - tracing improvements including nvmetc tracing support (Minwoo Im)\n       - misc fixes and cleanups (Anton Eidelman, Minwoo Im, Chaitanya\n         Kulkarni)\"\n\n   - Various little fixes and improvements to drivers and core\"\n\n* tag 'for-5.3/block-20190708' of git://git.kernel.dk/linux-block: (153 commits)\n  blk-iolatency: fix STS_AGAIN handling\n  block: nr_phys_segments needs to be zero for REQ_OP_WRITE_ZEROES\n  blk-mq: simplify blk_mq_make_request()\n  blk-mq: remove blk_mq_put_ctx()\n  sbitmap: Replace cmpxchg with xchg\n  block: fix .bi_size overflow\n  block: sed-opal: check size of shadow mbr\n  block: sed-opal: ioctl for writing to shadow mbr\n  block: sed-opal: add ioctl for done-mark of shadow mbr\n  block: never take page references for ITER_BVEC\n  direct-io: use bio_release_pages in dio_bio_complete\n  block_dev: use bio_release_pages in bio_unmap_user\n  block_dev: use bio_release_pages in blkdev_bio_end_io\n  iomap: use bio_release_pages in iomap_dio_bio_end_io\n  block: use bio_release_pages in bio_map_user_iov\n  block: use bio_release_pages in bio_unmap_user\n  block: optionally mark pages dirty in bio_release_pages\n  block: move the BIO_NO_PAGE_REF check into bio_release_pages\n  block: skd_main.c: Remove call to memset after dma_alloc_coherent\n  block: mtip32xx: Remove call to memset after dma_alloc_coherent\n  ...",
  "full_message": "Merge tag 'for-5.3/block-20190708' of git://git.kernel.dk/linux-block\n\nPull block updates from Jens Axboe:\n \"This is the main block updates for 5.3. Nothing earth shattering or\n  major in here, just fixes, additions, and improvements all over the\n  map. This contains:\n\n   - Series of documentation fixes (Bart)\n\n   - Optimization of the blk-mq ctx get/put (Bart)\n\n   - null_blk removal race condition fix (Bob)\n\n   - req/bio_op() cleanups (Chaitanya)\n\n   - Series cleaning up the segment accounting, and request/bio mapping\n     (Christoph)\n\n   - Series cleaning up the page getting/putting for bios (Christoph)\n\n   - block cgroup cleanups and moving it to where it is used (Christoph)\n\n   - block cgroup fixes (Tejun)\n\n   - Series of fixes and improvements to bcache, most notably a write\n     deadlock fix (Coly)\n\n   - blk-iolatency STS_AGAIN and accounting fixes (Dennis)\n\n   - Series of improvements and fixes to BFQ (Douglas, Paolo)\n\n   - debugfs_create() return value check removal for drbd (Greg)\n\n   - Use struct_size(), where appropriate (Gustavo)\n\n   - Two lighnvm fixes (Heiner, Geert)\n\n   - MD fixes, including a read balance and corruption fix (Guoqing,\n     Marcos, Xiao, Yufen)\n\n   - block opal shadow mbr additions (Jonas, Revanth)\n\n   - sbitmap compare-and-exhange improvemnts (Pavel)\n\n   - Fix for potential bio->bi_size overflow (Ming)\n\n   - NVMe pull requests:\n       - improved PCIe suspent support (Keith Busch)\n       - error injection support for the admin queue (Akinobu Mita)\n       - Fibre Channel discovery improvements (James Smart)\n       - tracing improvements including nvmetc tracing support (Minwoo Im)\n       - misc fixes and cleanups (Anton Eidelman, Minwoo Im, Chaitanya\n         Kulkarni)\"\n\n   - Various little fixes and improvements to drivers and core\"\n\n* tag 'for-5.3/block-20190708' of git://git.kernel.dk/linux-block: (153 commits)\n  blk-iolatency: fix STS_AGAIN handling\n  block: nr_phys_segments needs to be zero for REQ_OP_WRITE_ZEROES\n  blk-mq: simplify blk_mq_make_request()\n  blk-mq: remove blk_mq_put_ctx()\n  sbitmap: Replace cmpxchg with xchg\n  block: fix .bi_size overflow\n  block: sed-opal: check size of shadow mbr\n  block: sed-opal: ioctl for writing to shadow mbr\n  block: sed-opal: add ioctl for done-mark of shadow mbr\n  block: never take page references for ITER_BVEC\n  direct-io: use bio_release_pages in dio_bio_complete\n  block_dev: use bio_release_pages in bio_unmap_user\n  block_dev: use bio_release_pages in blkdev_bio_end_io\n  iomap: use bio_release_pages in iomap_dio_bio_end_io\n  block: use bio_release_pages in bio_map_user_iov\n  block: use bio_release_pages in bio_unmap_user\n  block: optionally mark pages dirty in bio_release_pages\n  block: move the BIO_NO_PAGE_REF check into bio_release_pages\n  block: skd_main.c: Remove call to memset after dma_alloc_coherent\n  block: mtip32xx: Remove call to memset after dma_alloc_coherent\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Tue Jul 9 10:45:06 2019 -0700",
  "author_date_iso": "2019-07-09T10:45:06-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Tue Jul 9 10:45:06 2019 -0700",
  "committer_date_iso": "2019-07-09T10:45:06-07:00",
  "files_changed": [
    "Documentation/block/bfq-iosched.txt",
    "Documentation/cgroup-v1/blkio-controller.rst",
    "block/bfq-iosched.c",
    "block/blk-mq-debugfs.c",
    "drivers/block/drbd/drbd_main.c",
    "fs/io_uring.c",
    "init/Kconfig",
    "kernel/cgroup/cgroup.c"
  ],
  "files_changed_count": 8,
  "stats": [
    {
      "file": "Documentation/block/bfq-iosched.txt",
      "insertions": 6,
      "deletions": 6
    },
    {
      "file": "Documentation/block/biodoc.txt",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "Documentation/block/queue-sysfs.txt",
      "insertions": 43,
      "deletions": 21
    },
    {
      "file": "Documentation/cgroup-v1/blkio-controller.rst",
      "insertions": 6,
      "deletions": 6
    },
    {
      "file": "Documentation/fault-injection/nvme-fault-injection.txt",
      "insertions": 56,
      "deletions": 0
    },
    {
      "file": "block/Kconfig.iosched",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "block/bfq-cgroup.c",
      "insertions": 153,
      "deletions": 59
    },
    {
      "file": "block/bfq-iosched.c",
      "insertions": 671,
      "deletions": 296
    },
    {
      "file": "block/bfq-iosched.h",
      "insertions": 38,
      "deletions": 10
    },
    {
      "file": "block/bio.c",
      "insertions": 20,
      "deletions": 76
    },
    {
      "file": "block/blk-cgroup.c",
      "insertions": 41,
      "deletions": 98
    },
    {
      "file": "block/blk-core.c",
      "insertions": 63,
      "deletions": 48
    },
    {
      "file": "block/blk-iolatency.c",
      "insertions": 17,
      "deletions": 34
    },
    {
      "file": "block/blk-map.c",
      "insertions": 8,
      "deletions": 2
    },
    {
      "file": "block/blk-merge.c",
      "insertions": 37,
      "deletions": 75
    },
    {
      "file": "block/blk-mq-debugfs.c",
      "insertions": 13,
      "deletions": 29
    },
    {
      "file": "block/blk-mq-sched.c",
      "insertions": 16,
      "deletions": 15
    },
    {
      "file": "block/blk-mq-sched.h",
      "insertions": 6,
      "deletions": 4
    },
    {
      "file": "block/blk-mq-tag.c",
      "insertions": 0,
      "deletions": 8
    },
    {
      "file": "block/blk-mq.c",
      "insertions": 17,
      "deletions": 27
    },
    {
      "file": "block/blk-mq.h",
      "insertions": 1,
      "deletions": 6
    },
    {
      "file": "block/blk.h",
      "insertions": 24,
      "deletions": 12
    },
    {
      "file": "block/genhd.c",
      "insertions": 2,
      "deletions": 3
    },
    {
      "file": "block/kyber-iosched.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "block/mq-deadline.c",
      "insertions": 3,
      "deletions": 2
    },
    {
      "file": "block/opal_proto.h",
      "insertions": 16,
      "deletions": 0
    },
    {
      "file": "block/sed-opal.c",
      "insertions": 186,
      "deletions": 11
    },
    {
      "file": "drivers/block/drbd/drbd_debugfs.c",
      "insertions": 2,
      "deletions": 62
    },
    {
      "file": "drivers/block/drbd/drbd_debugfs.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/block/drbd/drbd_main.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "drivers/block/floppy.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/block/loop.c",
      "insertions": 4,
      "deletions": 12
    },
    {
      "file": "drivers/block/mtip32xx/mtip32xx.c",
      "insertions": 0,
      "deletions": 5
    },
    {
      "file": "drivers/block/null_blk_main.c",
      "insertions": 7,
      "deletions": 7
    },
    {
      "file": "drivers/block/skd_main.c",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "drivers/lightnvm/core.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/lightnvm/pblk-core.c",
      "insertions": 10,
      "deletions": 8
    },
    {
      "file": "drivers/md/bcache/alloc.c",
      "insertions": 9,
      "deletions": 0
    },
    {
      "file": "drivers/md/bcache/bcache.h",
      "insertions": 2,
      "deletions": 4
    },
    {
      "file": "drivers/md/bcache/bset.c",
      "insertions": 19,
      "deletions": 42
    },
    {
      "file": "drivers/md/bcache/btree.c",
      "insertions": 47,
      "deletions": 6
    },
    {
      "file": "drivers/md/bcache/btree.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/md/bcache/io.c",
      "insertions": 12,
      "deletions": 0
    },
    {
      "file": "drivers/md/bcache/journal.c",
      "insertions": 100,
      "deletions": 41
    },
    {
      "file": "drivers/md/bcache/journal.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "drivers/md/bcache/super.c",
      "insertions": 183,
      "deletions": 44
    },
    {
      "file": "drivers/md/bcache/sysfs.c",
      "insertions": 46,
      "deletions": 21
    },
    {
      "file": "drivers/md/bcache/util.h",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "drivers/md/bcache/writeback.c",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "drivers/md/md-bitmap.c",
      "insertions": 20,
      "deletions": 0
    },
    {
      "file": "drivers/md/md.c",
      "insertions": 113,
      "deletions": 16
    },
    {
      "file": "drivers/md/md.h",
      "insertions": 23,
      "deletions": 0
    },
    {
      "file": "drivers/md/raid1-10.c",
      "insertions": 30,
      "deletions": 0
    },
    {
      "file": "drivers/md/raid1.c",
      "insertions": 76,
      "deletions": 43
    },
    {
      "file": "drivers/md/raid10.c",
      "insertions": 38,
      "deletions": 48
    },
    {
      "file": "drivers/md/raid5.c",
      "insertions": 9,
      "deletions": 3
    },
    {
      "file": "drivers/nvme/host/core.c",
      "insertions": 34,
      "deletions": 11
    },
    {
      "file": "drivers/nvme/host/fabrics.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/nvme/host/fault_inject.c",
      "insertions": 22,
      "deletions": 19
    },
    {
      "file": "drivers/nvme/host/fc.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/host/lightnvm.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/nvme/host/nvme.h",
      "insertions": 27,
      "deletions": 15
    },
    {
      "file": "drivers/nvme/host/pci.c",
      "insertions": 111,
      "deletions": 32
    },
    {
      "file": "drivers/nvme/host/trace.c",
      "insertions": 63,
      "deletions": 1
    },
    {
      "file": "drivers/nvme/host/trace.h",
      "insertions": 15,
      "deletions": 51
    },
    {
      "file": "drivers/nvme/target/Makefile",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/target/core.c",
      "insertions": 11,
      "deletions": 1
    },
    {
      "file": "drivers/nvme/target/discovery.c",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/target/fabrics-cmd.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/nvme/target/fc.c",
      "insertions": 12,
      "deletions": 1
    },
    {
      "file": "drivers/nvme/target/fcloop.c",
      "insertions": 37,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/target/nvmet.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/target/trace.c",
      "insertions": 201,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/target/trace.h",
      "insertions": 141,
      "deletions": 0
    },
    {
      "file": "drivers/scsi/lpfc/lpfc.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/scsi/lpfc/lpfc_attr.c",
      "insertions": 60,
      "deletions": 0
    },
    {
      "file": "drivers/scsi/lpfc/lpfc_crtn.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "drivers/scsi/lpfc/lpfc_els.c",
      "insertions": 127,
      "deletions": 0
    },
    {
      "file": "drivers/scsi/lpfc/lpfc_hbadisc.c",
      "insertions": 35,
      "deletions": 0
    },
    {
      "file": "drivers/scsi/lpfc/lpfc_hw.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/scsi/lpfc/lpfc_nvme.c",
      "insertions": 44,
      "deletions": 0
    },
    {
      "file": "drivers/scsi/lpfc/lpfc_nvmet.c",
      "insertions": 17,
      "deletions": 0
    },
    {
      "file": "drivers/scsi/lpfc/lpfc_sli.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "fs/block_dev.c",
      "insertions": 3,
      "deletions": 16
    },
    {
      "file": "fs/direct-io.c",
      "insertions": 3,
      "deletions": 12
    },
    {
      "file": "fs/fs-writeback.c",
      "insertions": 7,
      "deletions": 1
    },
    {
      "file": "fs/io_uring.c",
      "insertions": 0,
      "deletions": 3
    },
    {
      "file": "fs/iomap.c",
      "insertions": 2,
      "deletions": 8
    },
    {
      "file": "fs/xfs/xfs_aops.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "include/linux/bio.h",
      "insertions": 17,
      "deletions": 14
    },
    {
      "file": "include/linux/blk-cgroup.h",
      "insertions": 22,
      "deletions": 84
    },
    {
      "file": "include/linux/blk-mq.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "include/linux/blk_types.h",
      "insertions": 0,
      "deletions": 6
    },
    {
      "file": "include/linux/blkdev.h",
      "insertions": 4,
      "deletions": 15
    },
    {
      "file": "include/linux/elevator.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "include/linux/nvme-fc-driver.h",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "include/linux/nvme.h",
      "insertions": 65,
      "deletions": 1
    },
    {
      "file": "include/linux/sed-opal.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "include/linux/uio.h",
      "insertions": 1,
      "deletions": 9
    },
    {
      "file": "include/trace/events/f2fs.h",
      "insertions": 1,
      "deletions": 10
    },
    {
      "file": "include/uapi/linux/sed-opal.h",
      "insertions": 21,
      "deletions": 0
    },
    {
      "file": "init/Kconfig",
      "insertions": 0,
      "deletions": 8
    },
    {
      "file": "kernel/cgroup/cgroup.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "lib/sbitmap.c",
      "insertions": 3,
      "deletions": 7
    }
  ],
  "total_insertions": 3368,
  "total_deletions": 1554,
  "total_changes": 4922,
  "parents": [
    "0415052db4f92b7e272fc15802ad8b8be672deea",
    "c9b3007feca018d3f7061f5d5a14cb00766ffe9b"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.3",
    "v5.3-rc1",
    "v5.3-rc2",
    "v5.3-rc3",
    "v5.3-rc4",
    "v5.3-rc5",
    "v5.3-rc6",
    "v5.3-rc7",
    "v5.3-rc8",
    "v5.4"
  ],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "Documentation/block/bfq-iosched.txt",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "block/blk-mq-debugfs.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "kernel/cgroup/cgroup.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "Documentation/cgroup-v1/blkio-controller.rst",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/io_uring.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "init/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/block/drbd/drbd_main.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "block/bfq-iosched.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}