{
  "hash": "6fad84a4d624c300d03ebba457cc641765050c43",
  "hash_short": "6fad84a4",
  "subject": "nvme-pci: use sgls for all user requests if possible",
  "body": "If the device supports SGLs, use these for all user requests. This\nformat encodes the expected transfer length so it can catch short buffer\nerrors in a user command, whether it occurred accidently or maliciously.\n\nFor controllers that support SGL data mode, this is a viable mitigation\nto CVE-2023-6238. For controllers that don't support SGLs, log a warning\nin the passthrough path since not having the capability can corrupt\ndata if the interface is not used correctly.\n\nReviewed-by: Christoph Hellwig <hch@lst.de>\nSigned-off-by: Keith Busch <kbusch@kernel.org>",
  "full_message": "nvme-pci: use sgls for all user requests if possible\n\nIf the device supports SGLs, use these for all user requests. This\nformat encodes the expected transfer length so it can catch short buffer\nerrors in a user command, whether it occurred accidently or maliciously.\n\nFor controllers that support SGL data mode, this is a viable mitigation\nto CVE-2023-6238. For controllers that don't support SGLs, log a warning\nin the passthrough path since not having the capability can corrupt\ndata if the interface is not used correctly.\n\nReviewed-by: Christoph Hellwig <hch@lst.de>\nSigned-off-by: Keith Busch <kbusch@kernel.org>",
  "author_name": "Keith Busch",
  "author_email": "kbusch@kernel.org",
  "author_date": "Fri Nov 8 15:41:08 2024 -0800",
  "author_date_iso": "2024-11-08T15:41:08-08:00",
  "committer_name": "Keith Busch",
  "committer_email": "kbusch@kernel.org",
  "committer_date": "Mon Nov 18 09:27:47 2024 -0800",
  "committer_date_iso": "2024-11-18T09:27:47-08:00",
  "files_changed": [
    "drivers/nvme/host/ioctl.c",
    "drivers/nvme/host/pci.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "drivers/nvme/host/ioctl.c",
      "insertions": 10,
      "deletions": 2
    },
    {
      "file": "drivers/nvme/host/pci.c",
      "insertions": 3,
      "deletions": 2
    }
  ],
  "total_insertions": 13,
  "total_deletions": 4,
  "total_changes": 17,
  "parents": [
    "6399a0db8cd61eedbfb4b7809a4f4699157a9bf8"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [
      "CVE-2023-6238"
    ],
    "security_keywords": []
  },
  "fix_type": "cve",
  "file_results": [
    {
      "file": "drivers/nvme/host/ioctl.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/nvme/host/pci.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}