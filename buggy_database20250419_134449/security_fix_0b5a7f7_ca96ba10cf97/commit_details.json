{
  "hash": "0b5a7f71b4c557b15ec54a1b49023bc1b21044cc",
  "hash_short": "0b5a7f71",
  "subject": "crypto: crypto4xx - perform aead icv check in the driver",
  "body": "The ccm-aes-ppc4xx now fails one of testmgr's expected\nfailure test cases as such:\n\n|decryption failed on test 10 for ccm-aes-ppc4xx:\n|ret was 0, |expected -EBADMSG\n\nIt doesn't look like the hardware sets the authentication failure\nflag. The original vendor source from which this was ported does\nnot have any special code or notes about why this would happen or\nif there are any WAs.\n\nHence, this patch converts the aead_done callback handler to\nperform the icv check in the driver. And this fixes the false\nnegative and the ccm-aes-ppc4xx passes the selftests once again.\n\n|name         : ccm(aes)\n|driver       : ccm-aes-ppc4xx\n|module       : crypto4xx\n|priority     : 300\n|refcnt       : 1\n|selftest     : passed\n|internal     : no\n|type         : aead\n|async        : yes\n|blocksize    : 1\n|ivsize       : 16\n|maxauthsize  : 16\n|geniv        : <none>\n\nSigned-off-by: Christian Lamparter <chunkeey@gmail.com>\nSigned-off-by: Herbert Xu <herbert@gondor.apana.org.au>",
  "full_message": "crypto: crypto4xx - perform aead icv check in the driver\n\nThe ccm-aes-ppc4xx now fails one of testmgr's expected\nfailure test cases as such:\n\n|decryption failed on test 10 for ccm-aes-ppc4xx:\n|ret was 0, |expected -EBADMSG\n\nIt doesn't look like the hardware sets the authentication failure\nflag. The original vendor source from which this was ported does\nnot have any special code or notes about why this would happen or\nif there are any WAs.\n\nHence, this patch converts the aead_done callback handler to\nperform the icv check in the driver. And this fixes the false\nnegative and the ccm-aes-ppc4xx passes the selftests once again.\n\n|name         : ccm(aes)\n|driver       : ccm-aes-ppc4xx\n|module       : crypto4xx\n|priority     : 300\n|refcnt       : 1\n|selftest     : passed\n|internal     : no\n|type         : aead\n|async        : yes\n|blocksize    : 1\n|ivsize       : 16\n|maxauthsize  : 16\n|geniv        : <none>\n\nSigned-off-by: Christian Lamparter <chunkeey@gmail.com>\nSigned-off-by: Herbert Xu <herbert@gondor.apana.org.au>",
  "author_name": "Christian Lamparter",
  "author_email": "chunkeey@gmail.com",
  "author_date": "Sat Dec 23 19:45:46 2017 +0100",
  "author_date_iso": "2017-12-23T19:45:46+01:00",
  "committer_name": "Herbert Xu",
  "committer_email": "herbert@gondor.apana.org.au",
  "committer_date": "Fri Jan 5 18:43:05 2018 +1100",
  "committer_date_iso": "2018-01-05T18:43:05+11:00",
  "files_changed": [
    "drivers/crypto/amcc/crypto4xx_alg.c",
    "drivers/crypto/amcc/crypto4xx_core.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "drivers/crypto/amcc/crypto4xx_alg.c",
      "insertions": 1,
      "deletions": 5
    },
    {
      "file": "drivers/crypto/amcc/crypto4xx_core.c",
      "insertions": 27,
      "deletions": 27
    }
  ],
  "total_insertions": 28,
  "total_deletions": 32,
  "total_changes": 60,
  "parents": [
    "333b1928566f92ab3d9a108d570d93400c07db6d"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.16",
    "v4.16-rc1",
    "v4.16-rc2",
    "v4.16-rc3",
    "v4.16-rc4",
    "v4.16-rc5",
    "v4.16-rc6",
    "v4.16-rc7",
    "v4.17",
    "v4.17-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/crypto/amcc/crypto4xx_alg.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/amcc/crypto4xx_core.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}