{
  "hash": "93a575ab15332e2037d35744c50412b40e6511a4",
  "hash_short": "93a575ab",
  "subject": "drm/i915/huc: Parse the GSC-enabled HuC binary",
  "body": "The new binaries that support the 2-step authentication contain the\nlegacy-style binary, which we can use for loading the HuC via DMA. To\nfind out where this is located in the image, we need to parse the\nmanifest of the GSC-enabled HuC binary. The manifest consist of a\npartition header followed by entries, one of which contains the offset\nwe're looking for.\nNote that the DG2 GSC binary contains entries with the same names, but\nit doesn't contain a full legacy binary, so we need to skip assigning\nthe dma offset in that case (which we can do by checking the ccs).\nAlso, since we're now parsing the entries, we can extract the HuC\nversion that way instead of using hardcoded offsets.\n\nNote that the GSC binary uses the same structures in its binary header,\nso they've been added in their own header file.\n\nv2: fix structure names to match meu defines (s/CPT/CPD/), update commit\n    message, check ccs validity, drop old version location defines.\n\nv3: drop references to the MEU tool to reduce confusion, fix log (John)\n\nv4: fix log for real (John)\n\nSigned-off-by: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>\nCc: Alan Previn <alan.previn.teres.alexis@intel.com>\nCc: John Harrison <John.C.Harrison@Intel.com>\nReviewed-by: Alan Previn <alan.previn.teres.alexis@intel.com> #v2\nReviewed-by: John Harrison <John.C.Harrison@Intel.com>\nLink: https://patchwork.freedesktop.org/patch/msgid/20230531235415.1467475-3-daniele.ceraolospurio@intel.com",
  "full_message": "drm/i915/huc: Parse the GSC-enabled HuC binary\n\nThe new binaries that support the 2-step authentication contain the\nlegacy-style binary, which we can use for loading the HuC via DMA. To\nfind out where this is located in the image, we need to parse the\nmanifest of the GSC-enabled HuC binary. The manifest consist of a\npartition header followed by entries, one of which contains the offset\nwe're looking for.\nNote that the DG2 GSC binary contains entries with the same names, but\nit doesn't contain a full legacy binary, so we need to skip assigning\nthe dma offset in that case (which we can do by checking the ccs).\nAlso, since we're now parsing the entries, we can extract the HuC\nversion that way instead of using hardcoded offsets.\n\nNote that the GSC binary uses the same structures in its binary header,\nso they've been added in their own header file.\n\nv2: fix structure names to match meu defines (s/CPT/CPD/), update commit\n    message, check ccs validity, drop old version location defines.\n\nv3: drop references to the MEU tool to reduce confusion, fix log (John)\n\nv4: fix log for real (John)\n\nSigned-off-by: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>\nCc: Alan Previn <alan.previn.teres.alexis@intel.com>\nCc: John Harrison <John.C.Harrison@Intel.com>\nReviewed-by: Alan Previn <alan.previn.teres.alexis@intel.com> #v2\nReviewed-by: John Harrison <John.C.Harrison@Intel.com>\nLink: https://patchwork.freedesktop.org/patch/msgid/20230531235415.1467475-3-daniele.ceraolospurio@intel.com",
  "author_name": "Daniele Ceraolo Spurio",
  "author_email": "daniele.ceraolospurio@intel.com",
  "author_date": "Wed May 31 16:54:10 2023 -0700",
  "author_date_iso": "2023-05-31T16:54:10-07:00",
  "committer_name": "Daniele Ceraolo Spurio",
  "committer_email": "daniele.ceraolospurio@intel.com",
  "committer_date": "Mon Jun 5 09:52:44 2023 -0700",
  "committer_date_iso": "2023-06-05T09:52:44-07:00",
  "files_changed": [
    "drivers/gpu/drm/i915/gt/uc/intel_gsc_binary_headers.h",
    "drivers/gpu/drm/i915/gt/uc/intel_huc.c",
    "drivers/gpu/drm/i915/gt/uc/intel_huc_fw.c",
    "drivers/gpu/drm/i915/gt/uc/intel_huc_fw.h",
    "drivers/gpu/drm/i915/gt/uc/intel_huc_print.h",
    "drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c",
    "drivers/gpu/drm/i915/gt/uc/intel_uc_fw.h",
    "drivers/gpu/drm/i915/gt/uc/intel_uc_fw_abi.h"
  ],
  "files_changed_count": 8,
  "stats": [
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_gsc_binary_headers.h",
      "insertions": 74,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_huc.c",
      "insertions": 1,
      "deletions": 10
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_huc_fw.c",
      "insertions": 136,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_huc_fw.h",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_huc_print.h",
      "insertions": 21,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c",
      "insertions": 36,
      "deletions": 36
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_uc_fw.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_uc_fw_abi.h",
      "insertions": 0,
      "deletions": 6
    }
  ],
  "total_insertions": 274,
  "total_deletions": 53,
  "total_changes": 327,
  "parents": [
    "3532e75dfadcf52f8cb56dbfb6bce4503c69091f"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_gsc_binary_headers.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_uc_fw.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_huc_fw.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_huc_print.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_huc_fw.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_huc.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_uc_fw_abi.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}