{
  "hash": "438623a06bacd69c40c4af633bb09a3bbb9dfc78",
  "hash_short": "438623a0",
  "subject": "SUNRPC: Add svc_rqst::rq_auth_stat",
  "body": "I'd like to take commit 4532608d71c8 (\"SUNRPC: Clean up generic\ndispatcher code\") even further by using only private local SVC\ndispatchers for all kernel RPC services. This change would enable\nthe removal of the logic that switches between\nsvc_generic_dispatch() and a service's private dispatcher, and\nsimplify the invocation of the service's pc_release method\nso that humans can visually verify that it is always invoked\nproperly.\n\nAll that will come later.\n\nFirst, let's provide a better way to return authentication errors\nfrom SVC dispatcher functions. Instead of overloading the dispatch\nmethod's *statp argument, add a field to struct svc_rqst that can\nhold an error value.\n\nSigned-off-by: Chuck Lever <chuck.lever@oracle.com>\nSigned-off-by: Anna Schumaker <Anna.Schumaker@Netapp.com>",
  "full_message": "SUNRPC: Add svc_rqst::rq_auth_stat\n\nI'd like to take commit 4532608d71c8 (\"SUNRPC: Clean up generic\ndispatcher code\") even further by using only private local SVC\ndispatchers for all kernel RPC services. This change would enable\nthe removal of the logic that switches between\nsvc_generic_dispatch() and a service's private dispatcher, and\nsimplify the invocation of the service's pc_release method\nso that humans can visually verify that it is always invoked\nproperly.\n\nAll that will come later.\n\nFirst, let's provide a better way to return authentication errors\nfrom SVC dispatcher functions. Instead of overloading the dispatch\nmethod's *statp argument, add a field to struct svc_rqst that can\nhold an error value.\n\nSigned-off-by: Chuck Lever <chuck.lever@oracle.com>\nSigned-off-by: Anna Schumaker <Anna.Schumaker@Netapp.com>",
  "author_name": "Chuck Lever",
  "author_email": "chuck.lever@oracle.com",
  "author_date": "Thu Jul 15 15:52:06 2021 -0400",
  "author_date_iso": "2021-07-15T15:52:06-04:00",
  "committer_name": "Anna Schumaker",
  "committer_email": "Anna.Schumaker@Netapp.com",
  "committer_date": "Tue Aug 10 14:18:35 2021 -0400",
  "committer_date_iso": "2021-08-10T14:18:35-04:00",
  "files_changed": [
    "include/linux/sunrpc/svc.h",
    "include/linux/sunrpc/svcauth.h",
    "include/trace/events/sunrpc.h",
    "net/sunrpc/auth_gss/svcauth_gss.c",
    "net/sunrpc/svc.c",
    "net/sunrpc/svcauth.c",
    "net/sunrpc/svcauth_unix.c"
  ],
  "files_changed_count": 7,
  "stats": [
    {
      "file": "include/linux/sunrpc/svc.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "include/linux/sunrpc/svcauth.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "include/trace/events/sunrpc.h",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "net/sunrpc/auth_gss/svcauth_gss.c",
      "insertions": 21,
      "deletions": 22
    },
    {
      "file": "net/sunrpc/svc.c",
      "insertions": 9,
      "deletions": 8
    },
    {
      "file": "net/sunrpc/svcauth.c",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "net/sunrpc/svcauth_unix.c",
      "insertions": 6,
      "deletions": 6
    }
  ],
  "total_insertions": 46,
  "total_deletions": 45,
  "total_changes": 91,
  "parents": [
    "69f2cd6df3ee07ae88befafc038d4dd9154e2799"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "net/sunrpc/svc.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/sunrpc/auth_gss/svcauth_gss.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/trace/events/sunrpc.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/sunrpc/svcauth.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/sunrpc/svc.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/sunrpc/svcauth.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/sunrpc/svcauth_unix.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}