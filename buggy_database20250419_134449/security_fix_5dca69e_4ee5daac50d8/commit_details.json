{
  "hash": "5dca69e26fe97f17d4a6cbd6872103c868577b14",
  "hash_short": "5dca69e2",
  "subject": "software node: Handle software node injection to an existing device properly",
  "body": "The function software_node_notify() - the function that creates\nand removes the symlinks between the node and the device - was\ncalled unconditionally in device_add_software_node() and\ndevice_remove_software_node(), but it needs to be called in\nthose functions only in the special case where the node is\nadded to a device that has already been registered.\n\nThis fixes NULL pointer dereference that happens if\ndevice_remove_software_node() is used with device that was\nnever registered.\n\nFixes: b622b24519f5 (\"software node: Allow node addition to already existing device\")\nReported-and-tested-by: Dominik Brodowski <linux@dominikbrodowski.net>\nReviewed-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>\nSigned-off-by: Heikki Krogerus <heikki.krogerus@linux.intel.com>\nSigned-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>",
  "full_message": "software node: Handle software node injection to an existing device properly\n\nThe function software_node_notify() - the function that creates\nand removes the symlinks between the node and the device - was\ncalled unconditionally in device_add_software_node() and\ndevice_remove_software_node(), but it needs to be called in\nthose functions only in the special case where the node is\nadded to a device that has already been registered.\n\nThis fixes NULL pointer dereference that happens if\ndevice_remove_software_node() is used with device that was\nnever registered.\n\nFixes: b622b24519f5 (\"software node: Allow node addition to already existing device\")\nReported-and-tested-by: Dominik Brodowski <linux@dominikbrodowski.net>\nReviewed-by: Andy Shevchenko <andriy.shevchenko@linux.intel.com>\nSigned-off-by: Heikki Krogerus <heikki.krogerus@linux.intel.com>\nSigned-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>",
  "author_name": "Heikki Krogerus",
  "author_email": "heikki.krogerus@linux.intel.com",
  "author_date": "Wed Jun 23 16:14:21 2021 +0300",
  "author_date_iso": "2021-06-23T16:14:21+03:00",
  "committer_name": "Rafael J. Wysocki",
  "committer_email": "rafael.j.wysocki@intel.com",
  "committer_date": "Wed Jun 23 19:34:58 2021 +0200",
  "committer_date_iso": "2021-06-23T19:34:58+02:00",
  "files_changed": [
    "drivers/base/swnode.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/base/swnode.c",
      "insertions": 12,
      "deletions": 4
    }
  ],
  "total_insertions": 12,
  "total_deletions": 4,
  "total_changes": 16,
  "parents": [
    "13311e74253fe64329390df80bed3f07314ddd61"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/base/swnode.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}