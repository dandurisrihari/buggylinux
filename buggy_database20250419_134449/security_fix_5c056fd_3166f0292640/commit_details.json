{
  "hash": "5c056fdc5b474329037f2aa18401bd73033e0ce0",
  "hash_short": "5c056fdc",
  "subject": "libceph: verify authorize reply on connect",
  "body": "After sending an authorizer (ceph_x_authorize_a + ceph_x_authorize_b),\nthe client gets back a ceph_x_authorize_reply, which it is supposed to\nverify to ensure the authenticity and protect against replay attacks.\nThe code for doing this is there (ceph_x_verify_authorizer_reply(),\nceph_auth_verify_authorizer_reply() + plumbing), but it is never\ninvoked by the the messenger.\n\nAFAICT this goes back to 2009, when ceph authentication protocols\nsupport was added to the kernel client in 4e7a5dcd1bba (\"ceph:\nnegotiate authentication protocol; implement AUTH_NONE protocol\").\n\nThe second param of ceph_connection_operations::verify_authorizer_reply\nis unused all the way down.  Pass 0 to facilitate backporting, and kill\nit in the next commit.\n\nCc: stable@vger.kernel.org\nSigned-off-by: Ilya Dryomov <idryomov@gmail.com>\nReviewed-by: Sage Weil <sage@redhat.com>",
  "full_message": "libceph: verify authorize reply on connect\n\nAfter sending an authorizer (ceph_x_authorize_a + ceph_x_authorize_b),\nthe client gets back a ceph_x_authorize_reply, which it is supposed to\nverify to ensure the authenticity and protect against replay attacks.\nThe code for doing this is there (ceph_x_verify_authorizer_reply(),\nceph_auth_verify_authorizer_reply() + plumbing), but it is never\ninvoked by the the messenger.\n\nAFAICT this goes back to 2009, when ceph authentication protocols\nsupport was added to the kernel client in 4e7a5dcd1bba (\"ceph:\nnegotiate authentication protocol; implement AUTH_NONE protocol\").\n\nThe second param of ceph_connection_operations::verify_authorizer_reply\nis unused all the way down.  Pass 0 to facilitate backporting, and kill\nit in the next commit.\n\nCc: stable@vger.kernel.org\nSigned-off-by: Ilya Dryomov <idryomov@gmail.com>\nReviewed-by: Sage Weil <sage@redhat.com>",
  "author_name": "Ilya Dryomov",
  "author_email": "idryomov@gmail.com",
  "author_date": "Fri Dec 2 16:35:09 2016 +0100",
  "author_date_iso": "2016-12-02T16:35:09+01:00",
  "committer_name": "Ilya Dryomov",
  "committer_email": "idryomov@gmail.com",
  "committer_date": "Mon Dec 12 23:09:21 2016 +0100",
  "committer_date_iso": "2016-12-12T23:09:21+01:00",
  "files_changed": [
    "net/ceph/messenger.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "net/ceph/messenger.c",
      "insertions": 13,
      "deletions": 0
    }
  ],
  "total_insertions": 13,
  "total_deletions": 0,
  "total_changes": 13,
  "parents": [
    "5418d0a2c859abca2e59d7db36ba477ee4a3ebc6"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "net/ceph/messenger.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}