diff --cc fs/f2fs/data.c
index bb376c3bca62,105dd3d5cf5e..9a8bbc1fb1fa
--- a/fs/f2fs/data.c
+++ b/fs/f2fs/data.c
@@@ -1682,9 -1753,13 +1753,13 @@@ static ssize_t f2fs_direct_IO(struct ki
  
  	trace_f2fs_direct_IO_enter(inode, offset, count, iov_iter_rw(iter));
  
 -	err = blockdev_direct_IO(iocb, inode, iter, offset, get_data_block_dio);
 +	err = blockdev_direct_IO(iocb, inode, iter, get_data_block_dio);
- 	if (err < 0 && iov_iter_rw(iter) == WRITE)
- 		f2fs_write_failed(mapping, offset + count);
+ 	if (iov_iter_rw(iter) == WRITE) {
+ 		if (err > 0)
+ 			set_inode_flag(F2FS_I(inode), FI_UPDATE_WRITE);
+ 		else if (err < 0)
+ 			f2fs_write_failed(mapping, offset + count);
+ 	}
  
  	trace_f2fs_direct_IO_exit(inode, offset, count, iov_iter_rw(iter), err);