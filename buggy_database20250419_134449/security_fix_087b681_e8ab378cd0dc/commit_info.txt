Commit Hash: 087b681805f1de084f89f1041af67295aa981192
Subject: drm/i915/dg2: setup HuC loading via GSC


Security Keywords:
- authentication

Full commit message:
drm/i915/dg2: setup HuC loading via GSC

The GSC will perform both the load and the authentication, so we just
need to check the auth bit after the GSC has replied.
Since we require the PXP module to load the HuC, the earliest we can
trigger the load is during the pxp_bind operation.

Note that GSC-loaded HuC survives GT reset, so we need to just mark it
as ready when we re-init the GT HW.

V2: move setting of HuC fw error state to the failure path of the HuC
auth function, so it covers both the legacy and new auth flows
V4:
1. Fix typo in the commit message
2. style fix in intel_huc_wait_for_auth_complete()

Signed-off-by: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
Signed-off-by: Vitaly Lubart <vitaly.lubart@intel.com>
Signed-off-by: Tomas Winkler <tomas.winkler@intel.com>
Reviewed-by: Alan Previn <alan.previn.teres.alexis@intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20220928004145.745803-11-daniele.ceraolospurio@intel.com

Metadata:
Author: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
Author Date: Tue Sep 27 17:41:40 2022 -0700
Committer: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>
Commit Date: Mon Oct 3 11:29:16 2022 -0700

Files Changed: 5
Lines Added: 77
Lines Removed: 15
Total Changes: 92
