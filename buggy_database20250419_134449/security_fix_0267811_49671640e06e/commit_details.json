{
  "hash": "0267811625e13a7743eeb6072b57509bf909f484",
  "hash_short": "02678116",
  "subject": "scsi: scsi_debug: Add new error injection type: Reset LUN failed",
  "body": "Add error injection type 4 to make scsi_debug_device_reset() return FAILED.\nFail abort command format:\n\n  +--------+------+-------------------------------------------------------+\n  | Column | Type | Description                                           |\n  +--------+------+-------------------------------------------------------+\n  |   1    |  u8  | Error type, fixed to 0x4                              |\n  +--------+------+-------------------------------------------------------+\n  |   2    |  s32 | Error count                                           |\n  |        |      |  0: this rule will be ignored                         |\n  |        |      |  positive: the rule will always take effect           |\n  |        |      |  negative: the rule takes effect n times where -n is  |\n  |        |      |            the value given. Ignored after n times     |\n  +--------+------+-------------------------------------------------------+\n  |   3    |  x8  | SCSI command opcode, 0xff for all commands            |\n  +--------+------+-------------------------------------------------------+\n\nExamples:\n\n    error=/sys/kernel/debug/scsi_debug/0:0:0:1/error\n    echo \"4 -10 0x12\" > ${error}\n\nwill make the device return FAILED when trying to reset LUN with inquiry\ncommand 10 times.\n\n    error=/sys/kernel/debug/scsi_debug/0:0:0:1/error\n    echo \"4 -10 0xff\" > ${error}\n\nwill make the device return FAILED when trying to reset LUN 10 times.\n\nUsually we do not care about what command it is when trying to perform\nreset LUN, so 0xff could be applied.\n\nSigned-off-by: Wenchao Hao <haowenchao2@huawei.com>\nLink: https://lore.kernel.org/r/20231010092051.608007-9-haowenchao2@huawei.com\nTested-by: Douglas Gilbert <dgilbert@interlog.com>\nSigned-off-by: Martin K. Petersen <martin.petersen@oracle.com>",
  "full_message": "scsi: scsi_debug: Add new error injection type: Reset LUN failed\n\nAdd error injection type 4 to make scsi_debug_device_reset() return FAILED.\nFail abort command format:\n\n  +--------+------+-------------------------------------------------------+\n  | Column | Type | Description                                           |\n  +--------+------+-------------------------------------------------------+\n  |   1    |  u8  | Error type, fixed to 0x4                              |\n  +--------+------+-------------------------------------------------------+\n  |   2    |  s32 | Error count                                           |\n  |        |      |  0: this rule will be ignored                         |\n  |        |      |  positive: the rule will always take effect           |\n  |        |      |  negative: the rule takes effect n times where -n is  |\n  |        |      |            the value given. Ignored after n times     |\n  +--------+------+-------------------------------------------------------+\n  |   3    |  x8  | SCSI command opcode, 0xff for all commands            |\n  +--------+------+-------------------------------------------------------+\n\nExamples:\n\n    error=/sys/kernel/debug/scsi_debug/0:0:0:1/error\n    echo \"4 -10 0x12\" > ${error}\n\nwill make the device return FAILED when trying to reset LUN with inquiry\ncommand 10 times.\n\n    error=/sys/kernel/debug/scsi_debug/0:0:0:1/error\n    echo \"4 -10 0xff\" > ${error}\n\nwill make the device return FAILED when trying to reset LUN 10 times.\n\nUsually we do not care about what command it is when trying to perform\nreset LUN, so 0xff could be applied.\n\nSigned-off-by: Wenchao Hao <haowenchao2@huawei.com>\nLink: https://lore.kernel.org/r/20231010092051.608007-9-haowenchao2@huawei.com\nTested-by: Douglas Gilbert <dgilbert@interlog.com>\nSigned-off-by: Martin K. Petersen <martin.petersen@oracle.com>",
  "author_name": "Wenchao Hao",
  "author_email": "haowenchao2@huawei.com",
  "author_date": "Tue Oct 10 17:20:49 2023 +0800",
  "author_date_iso": "2023-10-10T17:20:49+08:00",
  "committer_name": "Martin K. Petersen",
  "committer_email": "martin.petersen@oracle.com",
  "committer_date": "Mon Oct 16 20:50:11 2023 -0400",
  "committer_date_iso": "2023-10-16T20:50:11-04:00",
  "files_changed": [
    "drivers/scsi/scsi_debug.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/scsi/scsi_debug.c",
      "insertions": 39,
      "deletions": 0
    }
  ],
  "total_insertions": 39,
  "total_deletions": 0,
  "total_changes": 39,
  "parents": [
    "5551ce928805ba790db0fa0a895e207d5d05717d"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/scsi/scsi_debug.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}