{
  "hash": "ddf74e79a54070f277ae520722d3bab7f7a6c67a",
  "hash_short": "ddf74e79",
  "subject": "drm/amdgpu/pm: Fix potential Spectre v1",
  "body": "idx can be indirectly controlled by user-space, hence leading to a\npotential exploitation of the Spectre variant 1 vulnerability.\n\nThis issue was detected with the help of Smatch:\n\ndrivers/gpu/drm/amd/amdgpu/amdgpu_pm.c:408 amdgpu_set_pp_force_state()\nwarn: potential spectre issue 'data.states'\n\nFix this by sanitizing idx before using it to index data.states\n\nNotice that given that speculation windows are large, the policy is\nto kill the speculation on the first load and not worry if it can be\ncompleted with a dependent load/store [1].\n\n[1] https://marc.info/?l=linux-kernel&m=152449131114778&w=2\n\nCc: stable@vger.kernel.org\nSigned-off-by: Gustavo A. R. Silva <gustavo@embeddedor.com>\nSigned-off-by: Alex Deucher <alexander.deucher@amd.com>",
  "full_message": "drm/amdgpu/pm: Fix potential Spectre v1\n\nidx can be indirectly controlled by user-space, hence leading to a\npotential exploitation of the Spectre variant 1 vulnerability.\n\nThis issue was detected with the help of Smatch:\n\ndrivers/gpu/drm/amd/amdgpu/amdgpu_pm.c:408 amdgpu_set_pp_force_state()\nwarn: potential spectre issue 'data.states'\n\nFix this by sanitizing idx before using it to index data.states\n\nNotice that given that speculation windows are large, the policy is\nto kill the speculation on the first load and not worry if it can be\ncompleted with a dependent load/store [1].\n\n[1] https://marc.info/?l=linux-kernel&m=152449131114778&w=2\n\nCc: stable@vger.kernel.org\nSigned-off-by: Gustavo A. R. Silva <gustavo@embeddedor.com>\nSigned-off-by: Alex Deucher <alexander.deucher@amd.com>",
  "author_name": "Gustavo A. R. Silva",
  "author_email": "gustavo@embeddedor.com",
  "author_date": "Mon Jul 23 11:32:32 2018 -0500",
  "author_date_iso": "2018-07-23T11:32:32-05:00",
  "committer_name": "Alex Deucher",
  "committer_email": "alexander.deucher@amd.com",
  "committer_date": "Tue Jul 31 16:58:23 2018 -0500",
  "committer_date_iso": "2018-07-31T16:58:23-05:00",
  "files_changed": [
    "drivers/gpu/drm/amd/amdgpu/amdgpu_pm.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/gpu/drm/amd/amdgpu/amdgpu_pm.c",
      "insertions": 2,
      "deletions": 1
    }
  ],
  "total_insertions": 2,
  "total_deletions": 1,
  "total_changes": 3,
  "parents": [
    "7ac7aebe85d3b3b57a58efefcdde2bd5d398550d"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.19",
    "v4.19-rc1",
    "v4.19-rc2",
    "v4.19-rc3",
    "v4.19-rc4",
    "v4.19-rc5",
    "v4.19-rc6",
    "v4.19-rc7",
    "v4.19-rc8",
    "v4.20"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "vulnerability",
      "sanitizing"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpu/drm/amd/amdgpu/amdgpu_pm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}