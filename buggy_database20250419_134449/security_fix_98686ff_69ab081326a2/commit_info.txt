Commit Hash: 98686ffc71f58191ab3f4069d9ae7eee60fb3889
Subject: btrfs: simplify code flow in btrfs_delayed_inode_reserve_metadata


Security Keywords:
- exploit

Full commit message:
btrfs: simplify code flow in btrfs_delayed_inode_reserve_metadata

btrfs_block_rsv_add can return only ENOSPC since it's called with
NO_FLUSH modifier. This so simplify the logic in
btrfs_delayed_inode_reserve_metadata to exploit this invariant.

Signed-off-by: Nikolay Borisov <nborisov@suse.com>
Reviewed-by: David Sterba <dsterba@suse.com>
[ add assert and comment ]
Signed-off-by: David Sterba <dsterba@suse.com>

Metadata:
Author: Nikolay Borisov <nborisov@suse.com>
Author Date: Mon Feb 22 18:40:47 2021 +0200
Committer: David Sterba <dsterba@suse.com>
Commit Date: Mon Apr 19 17:25:15 2021 +0200

Files Changed: 1
Lines Added: 5
Lines Removed: 20
Total Changes: 25
