Commit Hash: 668f612fa0d8d4120ec5dc0725d7e1ca3152a954
Subject: KVM: VMX: Move nmi injection failure processing to vm exit path


Security Keywords:
- injection

Full commit message:
KVM: VMX: Move nmi injection failure processing to vm exit path

Instead of processing nmi injection failure in the vm entry path, move
it to the vm exit path (vm_complete_interrupts()).  This separates nmi
injection from nmi post-processing, and moves the nmi state from the VT
state into vcpu state (new variable nmi_injected specifying an injection
in progress).

Signed-off-by: Avi Kivity <avi@qumranet.com>

Metadata:
Author: Avi Kivity <avi@qumranet.com>
Author Date: Wed Jul 2 09:28:55 2008 +0300
Committer: Avi Kivity <avi@qumranet.com>
Commit Date: Wed Oct 15 10:15:13 2008 +0200

Files Changed: 2
Lines Added: 33
Lines Removed: 17
Total Changes: 50
