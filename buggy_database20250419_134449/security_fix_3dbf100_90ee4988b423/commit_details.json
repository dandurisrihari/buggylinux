{
  "hash": "3dbf100b0b10e91d65bd83b91cee3ef61f1b96c4",
  "hash_short": "3dbf100b",
  "subject": "KVM: arm64: Abstract the size of the HYP vectors pre-amble",
  "body": "The EL2 vector hardening feature causes KVM to generate vectors for\neach type of CPU present in the system. The generated sequences already\ndo some of the early guest-exit work (i.e. saving registers). To avoid\nduplication the generated vectors branch to the original vector just\nafter the preamble. This size is hard coded.\n\nAdding new instructions to the HYP vector causes strange side effects,\nwhich are difficult to debug as the affected code is patched in at\nruntime.\n\nAdd KVM_VECTOR_PREAMBLE to tell kvm_patch_vector_branch() how big\nthe preamble is. The valid_vect macro can then validate this at\nbuild time.\n\nReviewed-by: Julien Thierry <julien.thierry@arm.com>\nSigned-off-by: James Morse <james.morse@arm.com>\nSigned-off-by: Marc Zyngier <marc.zyngier@arm.com>",
  "full_message": "KVM: arm64: Abstract the size of the HYP vectors pre-amble\n\nThe EL2 vector hardening feature causes KVM to generate vectors for\neach type of CPU present in the system. The generated sequences already\ndo some of the early guest-exit work (i.e. saving registers). To avoid\nduplication the generated vectors branch to the original vector just\nafter the preamble. This size is hard coded.\n\nAdding new instructions to the HYP vector causes strange side effects,\nwhich are difficult to debug as the affected code is patched in at\nruntime.\n\nAdd KVM_VECTOR_PREAMBLE to tell kvm_patch_vector_branch() how big\nthe preamble is. The valid_vect macro can then validate this at\nbuild time.\n\nReviewed-by: Julien Thierry <julien.thierry@arm.com>\nSigned-off-by: James Morse <james.morse@arm.com>\nSigned-off-by: Marc Zyngier <marc.zyngier@arm.com>",
  "author_name": "James Morse",
  "author_email": "james.morse@arm.com",
  "author_date": "Tue Jun 18 16:17:34 2019 +0100",
  "author_date_iso": "2019-06-18T16:17:34+01:00",
  "committer_name": "Marc Zyngier",
  "committer_email": "marc.zyngier@arm.com",
  "committer_date": "Fri Jul 5 13:03:29 2019 +0100",
  "committer_date_iso": "2019-07-05T13:03:29+01:00",
  "files_changed": [
    "arch/arm64/include/asm/kvm_asm.h",
    "arch/arm64/kvm/hyp/hyp-entry.S",
    "arch/arm64/kvm/va_layout.c"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "arch/arm64/include/asm/kvm_asm.h",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/hyp-entry.S",
      "insertions": 17,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/va_layout.c",
      "insertions": 3,
      "deletions": 4
    }
  ],
  "total_insertions": 26,
  "total_deletions": 5,
  "total_changes": 31,
  "parents": [
    "2b68a2a963a157f024c67c0697b16f5f792c8a35"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.3",
    "v5.3-rc1",
    "v5.3-rc2",
    "v5.3-rc3",
    "v5.3-rc4",
    "v5.3-rc5",
    "v5.3-rc6",
    "v5.3-rc7",
    "v5.3-rc8",
    "v5.4"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/arm64/include/asm/kvm_asm.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/hyp/hyp-entry.S",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/va_layout.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}