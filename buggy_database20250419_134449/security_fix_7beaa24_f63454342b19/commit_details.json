{
  "hash": "7beaa24ba49717419e24d1f6321e8b3c265a719c",
  "hash_short": "7beaa24b",
  "subject": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm",
  "body": "Pull KVM updates from Paolo Bonzini:\n \"Small release overall.\n\n  x86:\n   - miscellaneous fixes\n   - AVIC support (local APIC virtualization, AMD version)\n\n  s390:\n   - polling for interrupts after a VCPU goes to halted state is now\n     enabled for s390\n   - use hardware provided information about facility bits that do not\n     need any hypervisor activity, and other fixes for cpu models and\n     facilities\n   - improve perf output\n   - floating interrupt controller improvements.\n\n  MIPS:\n   - miscellaneous fixes\n\n  PPC:\n   - bugfixes only\n\n  ARM:\n   - 16K page size support\n   - generic firmware probing layer for timer and GIC\n\n  Christoffer Dall (KVM-ARM maintainer) says:\n    \"There are a few changes in this pull request touching things\n     outside KVM, but they should all carry the necessary acks and it\n     made the merge process much easier to do it this way.\"\n\n  though actually the irqchip maintainers' acks didn't make it into the\n  patches.  Marc Zyngier, who is both irqchip and KVM-ARM maintainer,\n  later acked at http://mid.gmane.org/573351D1.4060303@arm.com ('more\n  formally and for documentation purposes')\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (82 commits)\n  KVM: MTRR: remove MSR 0x2f8\n  KVM: x86: make hwapic_isr_update and hwapic_irr_update look the same\n  svm: Manage vcpu load/unload when enable AVIC\n  svm: Do not intercept CR8 when enable AVIC\n  svm: Do not expose x2APIC when enable AVIC\n  KVM: x86: Introducing kvm_x86_ops.apicv_post_state_restore\n  svm: Add VMEXIT handlers for AVIC\n  svm: Add interrupt injection via AVIC\n  KVM: x86: Detect and Initialize AVIC support\n  svm: Introduce new AVIC VMCB registers\n  KVM: split kvm_vcpu_wake_up from kvm_vcpu_kick\n  KVM: x86: Introducing kvm_x86_ops VCPU blocking/unblocking hooks\n  KVM: x86: Introducing kvm_x86_ops VM init/destroy hooks\n  KVM: x86: Rename kvm_apic_get_reg to kvm_lapic_get_reg\n  KVM: x86: Misc LAPIC changes to expose helper functions\n  KVM: shrink halt polling even more for invalid wakeups\n  KVM: s390: set halt polling to 80 microseconds\n  KVM: halt_polling: provide a way to qualify wakeups during poll\n  KVM: PPC: Book3S HV: Re-enable XICS fast path for irqfd-generated interrupts\n  kvm: Conditionally register IRQ bypass consumer\n  ...",
  "full_message": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm\n\nPull KVM updates from Paolo Bonzini:\n \"Small release overall.\n\n  x86:\n   - miscellaneous fixes\n   - AVIC support (local APIC virtualization, AMD version)\n\n  s390:\n   - polling for interrupts after a VCPU goes to halted state is now\n     enabled for s390\n   - use hardware provided information about facility bits that do not\n     need any hypervisor activity, and other fixes for cpu models and\n     facilities\n   - improve perf output\n   - floating interrupt controller improvements.\n\n  MIPS:\n   - miscellaneous fixes\n\n  PPC:\n   - bugfixes only\n\n  ARM:\n   - 16K page size support\n   - generic firmware probing layer for timer and GIC\n\n  Christoffer Dall (KVM-ARM maintainer) says:\n    \"There are a few changes in this pull request touching things\n     outside KVM, but they should all carry the necessary acks and it\n     made the merge process much easier to do it this way.\"\n\n  though actually the irqchip maintainers' acks didn't make it into the\n  patches.  Marc Zyngier, who is both irqchip and KVM-ARM maintainer,\n  later acked at http://mid.gmane.org/573351D1.4060303@arm.com ('more\n  formally and for documentation purposes')\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (82 commits)\n  KVM: MTRR: remove MSR 0x2f8\n  KVM: x86: make hwapic_isr_update and hwapic_irr_update look the same\n  svm: Manage vcpu load/unload when enable AVIC\n  svm: Do not intercept CR8 when enable AVIC\n  svm: Do not expose x2APIC when enable AVIC\n  KVM: x86: Introducing kvm_x86_ops.apicv_post_state_restore\n  svm: Add VMEXIT handlers for AVIC\n  svm: Add interrupt injection via AVIC\n  KVM: x86: Detect and Initialize AVIC support\n  svm: Introduce new AVIC VMCB registers\n  KVM: split kvm_vcpu_wake_up from kvm_vcpu_kick\n  KVM: x86: Introducing kvm_x86_ops VCPU blocking/unblocking hooks\n  KVM: x86: Introducing kvm_x86_ops VM init/destroy hooks\n  KVM: x86: Rename kvm_apic_get_reg to kvm_lapic_get_reg\n  KVM: x86: Misc LAPIC changes to expose helper functions\n  KVM: shrink halt polling even more for invalid wakeups\n  KVM: s390: set halt polling to 80 microseconds\n  KVM: halt_polling: provide a way to qualify wakeups during poll\n  KVM: PPC: Book3S HV: Re-enable XICS fast path for irqfd-generated interrupts\n  kvm: Conditionally register IRQ bypass consumer\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Thu May 19 11:27:09 2016 -0700",
  "author_date_iso": "2016-05-19T11:27:09-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Thu May 19 11:27:09 2016 -0700",
  "committer_date_iso": "2016-05-19T11:27:09-07:00",
  "files_changed": [
    "arch/arm/include/asm/kvm_host.h",
    "arch/arm/include/asm/kvm_mmu.h",
    "arch/arm/kvm/arm.c",
    "arch/arm/kvm/mmu.c",
    "arch/arm64/include/asm/kvm_arm.h",
    "arch/arm64/include/asm/kvm_host.h",
    "arch/arm64/include/asm/kvm_mmu.h",
    "arch/arm64/include/asm/pgtable-hwdef.h",
    "arch/arm64/include/asm/pgtable.h",
    "arch/mips/include/asm/kvm_host.h",
    "arch/mips/kvm/emulate.c",
    "arch/mips/kvm/tlb.c",
    "arch/mips/kvm/trap_emul.c",
    "arch/s390/include/asm/sclp.h",
    "arch/x86/kvm/mmu.c",
    "arch/x86/kvm/svm.c",
    "arch/x86/kvm/trace.h",
    "arch/x86/kvm/vmx.c",
    "arch/x86/kvm/x86.c",
    "drivers/irqchip/irq-gic-common.c",
    "drivers/irqchip/irq-gic-v3.c",
    "drivers/irqchip/irq-gic.c"
  ],
  "files_changed_count": 22,
  "stats": [
    {
      "file": "Documentation/virtual/kvm/api.txt",
      "insertions": 16,
      "deletions": 2
    },
    {
      "file": "Documentation/virtual/kvm/devices/s390_flic.txt",
      "insertions": 13,
      "deletions": 1
    },
    {
      "file": "arch/arm/include/asm/kvm_host.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/arm/include/asm/kvm_mmu.h",
      "insertions": 11,
      "deletions": 32
    },
    {
      "file": "arch/arm/include/asm/stage2_pgtable.h",
      "insertions": 61,
      "deletions": 0
    },
    {
      "file": "arch/arm/kvm/arm.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm/kvm/mmu.c",
      "insertions": 221,
      "deletions": 187
    },
    {
      "file": "arch/arm64/include/asm/kvm_arm.h",
      "insertions": 50,
      "deletions": 35
    },
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/kvm_mmu.h",
      "insertions": 27,
      "deletions": 84
    },
    {
      "file": "arch/arm64/include/asm/pgtable-hwdef.h",
      "insertions": 63,
      "deletions": 17
    },
    {
      "file": "arch/arm64/include/asm/pgtable.h",
      "insertions": 11,
      "deletions": 4
    },
    {
      "file": "arch/arm64/include/asm/stage2_pgtable-nopmd.h",
      "insertions": 42,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/stage2_pgtable-nopud.h",
      "insertions": 39,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/stage2_pgtable.h",
      "insertions": 142,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/Kconfig",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/hyp/s2-setup.c",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "arch/mips/include/asm/kvm_host.h",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "arch/mips/kvm/emulate.c",
      "insertions": 50,
      "deletions": 39
    },
    {
      "file": "arch/mips/kvm/mips.c",
      "insertions": 7,
      "deletions": 2
    },
    {
      "file": "arch/mips/kvm/tlb.c",
      "insertions": 18,
      "deletions": 8
    },
    {
      "file": "arch/mips/kvm/trap_emul.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/include/asm/kvm_host.h",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/book3s.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/book3s_pr.c",
      "insertions": 31,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kvm/book3s_xics.c",
      "insertions": 17,
      "deletions": 12
    },
    {
      "file": "arch/powerpc/kvm/book3s_xics.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/booke.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/powerpc.c",
      "insertions": 12,
      "deletions": 10
    },
    {
      "file": "arch/s390/include/asm/kvm_host.h",
      "insertions": 5,
      "deletions": 6
    },
    {
      "file": "arch/s390/include/asm/sclp.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/s390/include/asm/sigp.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/s390/include/uapi/asm/kvm.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/s390/include/uapi/asm/sie.h",
      "insertions": 6,
      "deletions": 1
    },
    {
      "file": "arch/s390/kvm/Kconfig",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/s390/kvm/interrupt.c",
      "insertions": 47,
      "deletions": 0
    },
    {
      "file": "arch/s390/kvm/kvm-s390.c",
      "insertions": 47,
      "deletions": 14
    },
    {
      "file": "arch/s390/kvm/priv.c",
      "insertions": 7,
      "deletions": 14
    },
    {
      "file": "arch/s390/kvm/sigp.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "arch/x86/include/asm/kvm_host.h",
      "insertions": 28,
      "deletions": 4
    },
    {
      "file": "arch/x86/include/asm/svm.h",
      "insertions": 10,
      "deletions": 2
    },
    {
      "file": "arch/x86/include/uapi/asm/kvm.h",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "arch/x86/include/uapi/asm/svm.h",
      "insertions": 8,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/ioapic.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/irq_comm.c",
      "insertions": 0,
      "deletions": 3
    },
    {
      "file": "arch/x86/kvm/lapic.c",
      "insertions": 87,
      "deletions": 106
    },
    {
      "file": "arch/x86/kvm/lapic.h",
      "insertions": 35,
      "deletions": 3
    },
    {
      "file": "arch/x86/kvm/mmu.c",
      "insertions": 12,
      "deletions": 16
    },
    {
      "file": "arch/x86/kvm/mtrr.c",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/svm.c",
      "insertions": 661,
      "deletions": 9
    },
    {
      "file": "arch/x86/kvm/trace.h",
      "insertions": 57,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/vmx.c",
      "insertions": 6,
      "deletions": 6
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "insertions": 36,
      "deletions": 28
    },
    {
      "file": "drivers/clocksource/arm_arch_timer.c",
      "insertions": 7,
      "deletions": 4
    },
    {
      "file": "drivers/irqchip/irq-gic-common.c",
      "insertions": 13,
      "deletions": 0
    },
    {
      "file": "drivers/irqchip/irq-gic-common.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/irqchip/irq-gic-v3.c",
      "insertions": 147,
      "deletions": 28
    },
    {
      "file": "drivers/irqchip/irq-gic.c",
      "insertions": 83,
      "deletions": 6
    },
    {
      "file": "drivers/s390/char/sclp_early.c",
      "insertions": 5,
      "deletions": 1
    },
    {
      "file": "include/clocksource/arm_arch_timer.h",
      "insertions": 6,
      "deletions": 6
    },
    {
      "file": "include/kvm/arm_vgic.h",
      "insertions": 4,
      "deletions": 3
    },
    {
      "file": "include/linux/irqbypass.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "include/linux/irqchip/arm-gic-common.h",
      "insertions": 34,
      "deletions": 0
    },
    {
      "file": "include/linux/kvm_host.h",
      "insertions": 36,
      "deletions": 3
    },
    {
      "file": "include/trace/events/kvm.h",
      "insertions": 7,
      "deletions": 4
    },
    {
      "file": "include/uapi/linux/kvm.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "virt/kvm/Kconfig",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "virt/kvm/arm/arch_timer.c",
      "insertions": 11,
      "deletions": 29
    },
    {
      "file": "virt/kvm/arm/vgic-v2.c",
      "insertions": 26,
      "deletions": 35
    },
    {
      "file": "virt/kvm/arm/vgic-v3.c",
      "insertions": 16,
      "deletions": 31
    },
    {
      "file": "virt/kvm/arm/vgic.c",
      "insertions": 27,
      "deletions": 23
    },
    {
      "file": "virt/kvm/eventfd.c",
      "insertions": 10,
      "deletions": 8
    },
    {
      "file": "virt/kvm/kvm_main.c",
      "insertions": 23,
      "deletions": 9
    },
    {
      "file": "virt/lib/irqbypass.c",
      "insertions": 11,
      "deletions": 1
    }
  ],
  "total_insertions": 2398,
  "total_deletions": 850,
  "total_changes": 3248,
  "parents": [
    "07b75260ebc2c789724c594d7eaf0194fa47b3be",
    "9842df62004f366b9fed2423e24df10542ee0dc5"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection",
      "bypass"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/arm/kvm/arm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm/include/asm/kvm_host.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm/include/asm/kvm_mmu.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/asm/kvm_mmu.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm/kvm/mmu.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/asm/kvm_arm.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/asm/pgtable-hwdef.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/mips/include/asm/kvm_host.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/asm/pgtable.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/mips/kvm/tlb.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/mips/kvm/emulate.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/s390/include/asm/sclp.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/svm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/mips/kvm/trap_emul.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/trace.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/irqchip/irq-gic-v3.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/mmu.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/vmx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/irqchip/irq-gic-common.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/irqchip/irq-gic.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}