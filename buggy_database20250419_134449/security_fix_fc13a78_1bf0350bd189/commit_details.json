{
  "hash": "fc13a78e1f68fa5ca41280a397a046a6eff6cc9b",
  "hash_short": "fc13a78e",
  "subject": "Merge tag 'hardening-v6.15-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/kees/linux",
  "body": "Pull hardening updates from Kees Cook:\n \"As usual, it's scattered changes all over. Patches touching things\n  outside of our traditional areas in the tree have been Acked by\n  maintainers or were trivial changes:\n\n   - loadpin: remove unsupported MODULE_COMPRESS_NONE (Arulpandiyan\n     Vadivel)\n\n   - samples/check-exec: Fix script name (Micka\u00ebl Sala\u00fcn)\n\n   - yama: remove needless locking in yama_task_prctl() (Oleg Nesterov)\n\n   - lib/string_choices: Sort by function name (R Sundar)\n\n   - hardening: Allow default HARDENED_USERCOPY to be set at compile\n     time (Mel Gorman)\n\n   - uaccess: Split out compile-time checks into ucopysize.h\n\n   - kbuild: clang: Support building UM with SUBARCH=i386\n\n   - x86: Enable i386 FORTIFY_SOURCE on Clang 16+\n\n   - ubsan/overflow: Rework integer overflow sanitizer option\n\n   - Add missing __nonstring annotations for callers of\n     memtostr*()/strtomem*()\n\n   - Add __must_be_noncstr() and have memtostr*()/strtomem*() check for\n     it\n\n   - Introduce __nonstring_array for silencing future GCC 15 warnings\"\n\n* tag 'hardening-v6.15-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/kees/linux: (26 commits)\n  compiler_types: Introduce __nonstring_array\n  hardening: Enable i386 FORTIFY_SOURCE on Clang 16+\n  x86/build: Remove -ffreestanding on i386 with GCC\n  ubsan/overflow: Enable ignorelist parsing and add type filter\n  ubsan/overflow: Enable pattern exclusions\n  ubsan/overflow: Rework integer overflow sanitizer option to turn on everything\n  samples/check-exec: Fix script name\n  yama: don't abuse rcu_read_lock/get_task_struct in yama_task_prctl()\n  kbuild: clang: Support building UM with SUBARCH=i386\n  loadpin: remove MODULE_COMPRESS_NONE as it is no longer supported\n  lib/string_choices: Rearrange functions in sorted order\n  string.h: Validate memtostr*()/strtomem*() arguments more carefully\n  compiler.h: Introduce __must_be_noncstr()\n  nilfs2: Mark on-disk strings as nonstring\n  uapi: stddef.h: Introduce __kernel_nonstring\n  x86/tdx: Mark message.bytes as nonstring\n  string: kunit: Mark nonstring test strings as __nonstring\n  scsi: qla2xxx: Mark device strings as nonstring\n  scsi: mpt3sas: Mark device strings as nonstring\n  scsi: mpi3mr: Mark device strings as nonstring\n  ...",
  "full_message": "Merge tag 'hardening-v6.15-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/kees/linux\n\nPull hardening updates from Kees Cook:\n \"As usual, it's scattered changes all over. Patches touching things\n  outside of our traditional areas in the tree have been Acked by\n  maintainers or were trivial changes:\n\n   - loadpin: remove unsupported MODULE_COMPRESS_NONE (Arulpandiyan\n     Vadivel)\n\n   - samples/check-exec: Fix script name (Micka\u00ebl Sala\u00fcn)\n\n   - yama: remove needless locking in yama_task_prctl() (Oleg Nesterov)\n\n   - lib/string_choices: Sort by function name (R Sundar)\n\n   - hardening: Allow default HARDENED_USERCOPY to be set at compile\n     time (Mel Gorman)\n\n   - uaccess: Split out compile-time checks into ucopysize.h\n\n   - kbuild: clang: Support building UM with SUBARCH=i386\n\n   - x86: Enable i386 FORTIFY_SOURCE on Clang 16+\n\n   - ubsan/overflow: Rework integer overflow sanitizer option\n\n   - Add missing __nonstring annotations for callers of\n     memtostr*()/strtomem*()\n\n   - Add __must_be_noncstr() and have memtostr*()/strtomem*() check for\n     it\n\n   - Introduce __nonstring_array for silencing future GCC 15 warnings\"\n\n* tag 'hardening-v6.15-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/kees/linux: (26 commits)\n  compiler_types: Introduce __nonstring_array\n  hardening: Enable i386 FORTIFY_SOURCE on Clang 16+\n  x86/build: Remove -ffreestanding on i386 with GCC\n  ubsan/overflow: Enable ignorelist parsing and add type filter\n  ubsan/overflow: Enable pattern exclusions\n  ubsan/overflow: Rework integer overflow sanitizer option to turn on everything\n  samples/check-exec: Fix script name\n  yama: don't abuse rcu_read_lock/get_task_struct in yama_task_prctl()\n  kbuild: clang: Support building UM with SUBARCH=i386\n  loadpin: remove MODULE_COMPRESS_NONE as it is no longer supported\n  lib/string_choices: Rearrange functions in sorted order\n  string.h: Validate memtostr*()/strtomem*() arguments more carefully\n  compiler.h: Introduce __must_be_noncstr()\n  nilfs2: Mark on-disk strings as nonstring\n  uapi: stddef.h: Introduce __kernel_nonstring\n  x86/tdx: Mark message.bytes as nonstring\n  string: kunit: Mark nonstring test strings as __nonstring\n  scsi: qla2xxx: Mark device strings as nonstring\n  scsi: mpt3sas: Mark device strings as nonstring\n  scsi: mpi3mr: Mark device strings as nonstring\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Mon Mar 24 15:18:08 2025 -0700",
  "author_date_iso": "2025-03-24T15:18:08-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Mon Mar 24 15:18:08 2025 -0700",
  "committer_date_iso": "2025-03-24T15:18:08-07:00",
  "files_changed": [
    "MAINTAINERS",
    "include/linux/compiler.h",
    "init/Kconfig",
    "lib/tests/string_kunit.c"
  ],
  "files_changed_count": 4,
  "stats": [
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "MAINTAINERS",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/Makefile",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "arch/x86/coco/tdx/tdx.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/message/fusion/mptsas.c",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "drivers/scsi/mpi3mr/mpi3mr_transport.c",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "drivers/scsi/mpt3sas/mpi/mpi2_cnfg.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/scsi/mpt3sas/mpt3sas_transport.c",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "drivers/scsi/qla2xxx/qla_mr.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "include/linux/compiler.h",
      "insertions": 17,
      "deletions": 1
    },
    {
      "file": "include/linux/compiler_types.h",
      "insertions": 19,
      "deletions": 4
    },
    {
      "file": "include/linux/string.h",
      "insertions": 12,
      "deletions": 4
    },
    {
      "file": "include/linux/string_choices.h",
      "insertions": 12,
      "deletions": 12
    },
    {
      "file": "include/linux/thread_info.h",
      "insertions": 0,
      "deletions": 48
    },
    {
      "file": "include/linux/uaccess.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "include/linux/ucopysize.h",
      "insertions": 63,
      "deletions": 0
    },
    {
      "file": "include/linux/uio.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "include/uapi/linux/nilfs2_ondisk.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "include/uapi/linux/stddef.h",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "init/Kconfig",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "kernel/configs/hardening.config",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "lib/Kconfig.ubsan",
      "insertions": 13,
      "deletions": 12
    },
    {
      "file": "lib/test_ubsan.c",
      "insertions": 14,
      "deletions": 4
    },
    {
      "file": "lib/tests/string_kunit.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "lib/ubsan.c",
      "insertions": 26,
      "deletions": 2
    },
    {
      "file": "lib/ubsan.h",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "mm/usercopy.c",
      "insertions": 10,
      "deletions": 8
    },
    {
      "file": "samples/check-exec/{run-script-ask.inc => run-script-ask.sh}",
      "insertions": 0,
      "deletions": 0
    },
    {
      "file": "scripts/Makefile.clang",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "scripts/Makefile.lib",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "scripts/Makefile.ubsan",
      "insertions": 8,
      "deletions": 2
    },
    {
      "file": "scripts/integer-wrap-ignore.scl",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "security/Kconfig",
      "insertions": 0,
      "deletions": 21
    },
    {
      "file": "security/Kconfig.hardening",
      "insertions": 33,
      "deletions": 0
    },
    {
      "file": "security/loadpin/Kconfig",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "security/yama/yama_lsm.c",
      "insertions": 2,
      "deletions": 7
    }
  ],
  "total_insertions": 285,
  "total_deletions": 153,
  "total_changes": 438,
  "parents": [
    "06961fbbbd7a832a5943413447d2813a714a3c82",
    "b688f369ae0d5d25865f5441fa62e54c7d5d0de6"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "MAINTAINERS",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/compiler.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "init/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "lib/tests/string_kunit.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}