{
  "hash": "6daa755f813e6aa0bcc97e352666e072b1baac25",
  "hash_short": "6daa755f",
  "subject": "Merge tag 's390-5.13-1' of git://git.kernel.org/pub/scm/linux/kernel/git/s390/linux",
  "body": "Pull s390 updates from Heiko Carstens:\n\n - fix buffer size for in-kernel disassembler for ebpf programs.\n\n - fix two memory leaks in zcrypt driver.\n\n - expose PCI device UID as index, including an indicator if the uid is\n   unique.\n\n - remove some oprofile leftovers.\n\n - improve stack unwinder tests.\n\n - don't use gcc atomic builtins anymore, just like all other\n   architectures. Even though I'm sure the current code is ok, I totally\n   dislike that s390 is the only architecture being special here;\n   especially considering that there was a lengthly discussion about\n   this topic and the outcome was not to use the builtins. Therefore\n   open-code atomic ops again with inline assembly and switch to gcc\n   builtins as soon as other architectures are doing.\n\n - couple of other changes to atomic and cmpxchg, and use\n   atomic-instrumented.h for KASAN.\n\n - separate zbus creation, registration, and scanning in our PCI code\n   which allows for cleaner and easier handling.\n\n - a rather large change to the vfio-ap code to fix circular locking\n   dependencies when updating crypto masks.\n\n - move QAOB handling from qdio layer down to drivers.\n\n - add CRW inject facility to common I/O layer. This adds debugs files\n   which allow to generate artificial events from user space for testing\n   purposes.\n\n - increase SCLP console line length from 80 to 320 characters to avoid\n   odd wrapped lines.\n\n - add protected virtualization guest and host indication files, which\n   indicate either that a guest is running in pv mode or if the\n   hypervisor is capable of starting pv guests.\n\n - various other small fixes and improvements all over the place.\n\n* tag 's390-5.13-1' of git://git.kernel.org/pub/scm/linux/kernel/git/s390/linux: (53 commits)\n  s390/disassembler: increase ebpf disasm buffer size\n  s390/archrandom: add parameter check for s390_arch_random_generate\n  s390/zcrypt: fix zcard and zqueue hot-unplug memleak\n  s390/pci: expose a PCI device's UID as its index\n  s390/atomic,cmpxchg: always inline __xchg/__cmpxchg\n  s390/smp: fix do_restart() prototype\n  s390: get rid of oprofile leftovers\n  s390/atomic,cmpxchg: make constraints work with old compilers\n  s390/test_unwind: print test suite start/end info\n  s390/cmpxchg: use unsigned long values instead of void pointers\n  s390/test_unwind: add WARN if tests failed\n  s390/test_unwind: unify error handling paths\n  s390: update defconfigs\n  s390/spinlock: use R constraint in inline assembly\n  s390/atomic,cmpxchg: switch to use atomic-instrumented.h\n  s390/cmpxchg: get rid of gcc atomic builtins\n  s390/atomic: get rid of gcc atomic builtins\n  s390/atomic: use proper constraints\n  s390/atomic: move remaining inline assemblies to atomic_ops.h\n  s390/bitops: make bitops only work on longs\n  ...",
  "full_message": "Merge tag 's390-5.13-1' of git://git.kernel.org/pub/scm/linux/kernel/git/s390/linux\n\nPull s390 updates from Heiko Carstens:\n\n - fix buffer size for in-kernel disassembler for ebpf programs.\n\n - fix two memory leaks in zcrypt driver.\n\n - expose PCI device UID as index, including an indicator if the uid is\n   unique.\n\n - remove some oprofile leftovers.\n\n - improve stack unwinder tests.\n\n - don't use gcc atomic builtins anymore, just like all other\n   architectures. Even though I'm sure the current code is ok, I totally\n   dislike that s390 is the only architecture being special here;\n   especially considering that there was a lengthly discussion about\n   this topic and the outcome was not to use the builtins. Therefore\n   open-code atomic ops again with inline assembly and switch to gcc\n   builtins as soon as other architectures are doing.\n\n - couple of other changes to atomic and cmpxchg, and use\n   atomic-instrumented.h for KASAN.\n\n - separate zbus creation, registration, and scanning in our PCI code\n   which allows for cleaner and easier handling.\n\n - a rather large change to the vfio-ap code to fix circular locking\n   dependencies when updating crypto masks.\n\n - move QAOB handling from qdio layer down to drivers.\n\n - add CRW inject facility to common I/O layer. This adds debugs files\n   which allow to generate artificial events from user space for testing\n   purposes.\n\n - increase SCLP console line length from 80 to 320 characters to avoid\n   odd wrapped lines.\n\n - add protected virtualization guest and host indication files, which\n   indicate either that a guest is running in pv mode or if the\n   hypervisor is capable of starting pv guests.\n\n - various other small fixes and improvements all over the place.\n\n* tag 's390-5.13-1' of git://git.kernel.org/pub/scm/linux/kernel/git/s390/linux: (53 commits)\n  s390/disassembler: increase ebpf disasm buffer size\n  s390/archrandom: add parameter check for s390_arch_random_generate\n  s390/zcrypt: fix zcard and zqueue hot-unplug memleak\n  s390/pci: expose a PCI device's UID as its index\n  s390/atomic,cmpxchg: always inline __xchg/__cmpxchg\n  s390/smp: fix do_restart() prototype\n  s390: get rid of oprofile leftovers\n  s390/atomic,cmpxchg: make constraints work with old compilers\n  s390/test_unwind: print test suite start/end info\n  s390/cmpxchg: use unsigned long values instead of void pointers\n  s390/test_unwind: add WARN if tests failed\n  s390/test_unwind: unify error handling paths\n  s390: update defconfigs\n  s390/spinlock: use R constraint in inline assembly\n  s390/atomic,cmpxchg: switch to use atomic-instrumented.h\n  s390/cmpxchg: get rid of gcc atomic builtins\n  s390/atomic: get rid of gcc atomic builtins\n  s390/atomic: use proper constraints\n  s390/atomic: move remaining inline assemblies to atomic_ops.h\n  s390/bitops: make bitops only work on longs\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Tue Apr 27 17:54:15 2021 -0700",
  "author_date_iso": "2021-04-27T17:54:15-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Tue Apr 27 17:54:15 2021 -0700",
  "committer_date_iso": "2021-04-27T17:54:15-07:00",
  "files_changed": [
    "drivers/s390/char/con3215.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "Documentation/ABI/testing/sysfs-bus-pci",
      "insertions": 7,
      "deletions": 4
    },
    {
      "file": "Documentation/s390/pci.rst",
      "insertions": 11,
      "deletions": 3
    },
    {
      "file": "arch/s390/Kconfig.debug",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "arch/s390/configs/debug_defconfig",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/s390/configs/defconfig",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/s390/crypto/arch_random.c",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "arch/s390/crypto/crc32be-vx.S",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/s390/include/asm/atomic.h",
      "insertions": 56,
      "deletions": 42
    },
    {
      "file": "arch/s390/include/asm/atomic_ops.h",
      "insertions": 67,
      "deletions": 9
    },
    {
      "file": "arch/s390/include/asm/bitops.h",
      "insertions": 47,
      "deletions": 46
    },
    {
      "file": "arch/s390/include/asm/ccwdev.h",
      "insertions": 0,
      "deletions": 3
    },
    {
      "file": "arch/s390/include/asm/cmpxchg.h",
      "insertions": 151,
      "deletions": 17
    },
    {
      "file": "arch/s390/include/asm/entry-common.h",
      "insertions": 0,
      "deletions": 4
    },
    {
      "file": "arch/s390/include/asm/pci.h",
      "insertions": 6,
      "deletions": 4
    },
    {
      "file": "arch/s390/include/asm/qdio.h",
      "insertions": 4,
      "deletions": 18
    },
    {
      "file": "arch/s390/include/asm/spinlock.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/s390/include/asm/spinlock_types.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/s390/kernel/Makefile",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/s390/kernel/dis.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/s390/kernel/entry.h",
      "insertions": 1,
      "deletions": 24
    },
    {
      "file": "arch/s390/kernel/ipl.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/s390/kernel/os_info.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/s390/kernel/perf_event.c",
      "insertions": 0,
      "deletions": 21
    },
    {
      "file": "arch/s390/kernel/pgm_check.S",
      "insertions": 0,
      "deletions": 147
    },
    {
      "file": "arch/s390/kernel/traps.c",
      "insertions": 68,
      "deletions": 8
    },
    {
      "file": "arch/s390/kernel/uv.c",
      "insertions": 45,
      "deletions": 2
    },
    {
      "file": "arch/s390/lib/test_unwind.c",
      "insertions": 14,
      "deletions": 5
    },
    {
      "file": "arch/s390/mm/fault.c",
      "insertions": 2,
      "deletions": 16
    },
    {
      "file": "arch/s390/mm/page-states.c",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "arch/s390/pci/pci.c",
      "insertions": 79,
      "deletions": 53
    },
    {
      "file": "arch/s390/pci/pci_bus.c",
      "insertions": 239,
      "deletions": 92
    },
    {
      "file": "arch/s390/pci/pci_bus.h",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "arch/s390/pci/pci_event.c",
      "insertions": 39,
      "deletions": 57
    },
    {
      "file": "arch/s390/pci/pci_sysfs.c",
      "insertions": 44,
      "deletions": 0
    },
    {
      "file": "drivers/pci/hotplug/s390_pci_hpc.c",
      "insertions": 6,
      "deletions": 53
    },
    {
      "file": "drivers/s390/char/con3215.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "drivers/s390/char/sclp.c",
      "insertions": 2,
      "deletions": 4
    },
    {
      "file": "drivers/s390/char/sclp_con.c",
      "insertions": 7,
      "deletions": 21
    },
    {
      "file": "drivers/s390/char/sclp_tty.c",
      "insertions": 5,
      "deletions": 13
    },
    {
      "file": "drivers/s390/char/sclp_vt220.c",
      "insertions": 3,
      "deletions": 6
    },
    {
      "file": "drivers/s390/cio/Makefile",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "drivers/s390/cio/chp.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "drivers/s390/cio/cio_debug.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/s390/cio/cio_debugfs.c",
      "insertions": 23,
      "deletions": 0
    },
    {
      "file": "drivers/s390/cio/cio_inject.c",
      "insertions": 171,
      "deletions": 0
    },
    {
      "file": "drivers/s390/cio/cio_inject.h",
      "insertions": 18,
      "deletions": 0
    },
    {
      "file": "drivers/s390/cio/css.c",
      "insertions": 2,
      "deletions": 4
    },
    {
      "file": "drivers/s390/cio/ioasm.c",
      "insertions": 22,
      "deletions": 1
    },
    {
      "file": "drivers/s390/cio/qdio.h",
      "insertions": 0,
      "deletions": 10
    },
    {
      "file": "drivers/s390/cio/qdio_main.c",
      "insertions": 8,
      "deletions": 55
    },
    {
      "file": "drivers/s390/cio/qdio_setup.c",
      "insertions": 1,
      "deletions": 48
    },
    {
      "file": "drivers/s390/crypto/vfio_ap_ops.c",
      "insertions": 213,
      "deletions": 95
    },
    {
      "file": "drivers/s390/crypto/vfio_ap_private.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/s390/crypto/zcrypt_card.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/s390/crypto/zcrypt_queue.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/s390/net/qeth_core.h",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "drivers/s390/net/qeth_core_main.c",
      "insertions": 48,
      "deletions": 54
    },
    {
      "file": "drivers/s390/scsi/zfcp_qdio.c",
      "insertions": 4,
      "deletions": 3
    }
  ],
  "total_insertions": 1458,
  "total_deletions": 964,
  "total_changes": 2422,
  "parents": [
    "c6536676c7fe3f572ba55842e59c3c71c01e7fb3",
    "6f3353c2d2b3eb4de52e9704cb962712033db181"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "inject"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/s390/char/con3215.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}