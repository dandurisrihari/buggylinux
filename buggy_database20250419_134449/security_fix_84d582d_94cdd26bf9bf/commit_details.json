{
  "hash": "84d582d236dc1f9085e741affc72e9ba061a67c2",
  "hash_short": "84d582d2",
  "subject": "xen: Revert commits da72ff5bfcb0 and 72a9b186292d",
  "body": "Recent discussion (http://marc.info/?l=xen-devel&m=149192184523741)\nestablished that commit 72a9b186292d (\"xen: Remove event channel\nnotification through Xen PCI platform device\") (and thus commit\nda72ff5bfcb0 (\"partially revert \"xen: Remove event channel\nnotification through Xen PCI platform device\"\")) are unnecessary and,\nin fact, prevent HVM guests from booting on Xen releases prior to 4.0\n\nTherefore we revert both of those commits.\n\nThe summary of that discussion is below:\n\n  Here is the brief summary of the current situation:\n\n  Before the offending commit (72a9b186292):\n\n  1) INTx does not work because of the reset_watches path.\n  2) The reset_watches path is only taken if you have Xen > 4.0\n  3) The Linux Kernel by default will use vector inject if the hypervisor\n     support. So even INTx does not work no body running the kernel with\n     Xen > 4.0 would notice. Unless he explicitly disabled this feature\n     either in the kernel or in Xen (and this can only be disabled by\n     modifying the code, not user-supported way to do it).\n\n  After the offending commit (+ partial revert):\n\n  1) INTx is no longer support for HVM (only for PV guests).\n  2) Any HVM guest The kernel will not boot on Xen < 4.0 which does\n     not have vector injection support. Since the only other mode\n     supported is INTx which.\n\n  So based on this summary, I think before commit (72a9b186292) we were\n  in much better position from a user point of view.\n\nSigned-off-by: Boris Ostrovsky <boris.ostrovsky@oracle.com>\nReviewed-by: Juergen Gross <jgross@suse.com>\nSigned-off-by: Juergen Gross <jgross@suse.com>",
  "full_message": "xen: Revert commits da72ff5bfcb0 and 72a9b186292d\n\nRecent discussion (http://marc.info/?l=xen-devel&m=149192184523741)\nestablished that commit 72a9b186292d (\"xen: Remove event channel\nnotification through Xen PCI platform device\") (and thus commit\nda72ff5bfcb0 (\"partially revert \"xen: Remove event channel\nnotification through Xen PCI platform device\"\")) are unnecessary and,\nin fact, prevent HVM guests from booting on Xen releases prior to 4.0\n\nTherefore we revert both of those commits.\n\nThe summary of that discussion is below:\n\n  Here is the brief summary of the current situation:\n\n  Before the offending commit (72a9b186292):\n\n  1) INTx does not work because of the reset_watches path.\n  2) The reset_watches path is only taken if you have Xen > 4.0\n  3) The Linux Kernel by default will use vector inject if the hypervisor\n     support. So even INTx does not work no body running the kernel with\n     Xen > 4.0 would notice. Unless he explicitly disabled this feature\n     either in the kernel or in Xen (and this can only be disabled by\n     modifying the code, not user-supported way to do it).\n\n  After the offending commit (+ partial revert):\n\n  1) INTx is no longer support for HVM (only for PV guests).\n  2) Any HVM guest The kernel will not boot on Xen < 4.0 which does\n     not have vector injection support. Since the only other mode\n     supported is INTx which.\n\n  So based on this summary, I think before commit (72a9b186292) we were\n  in much better position from a user point of view.\n\nSigned-off-by: Boris Ostrovsky <boris.ostrovsky@oracle.com>\nReviewed-by: Juergen Gross <jgross@suse.com>\nSigned-off-by: Juergen Gross <jgross@suse.com>",
  "author_name": "Boris Ostrovsky",
  "author_email": "boris.ostrovsky@oracle.com",
  "author_date": "Mon Apr 24 15:04:53 2017 -0400",
  "author_date_iso": "2017-04-24T15:04:53-04:00",
  "committer_name": "Juergen Gross",
  "committer_email": "jgross@suse.com",
  "committer_date": "Tue May 2 11:18:05 2017 +0200",
  "committer_date_iso": "2017-05-02T11:18:05+02:00",
  "files_changed": [
    "arch/x86/include/asm/xen/events.h",
    "arch/x86/pci/xen.c",
    "arch/x86/xen/enlighten_hvm.c",
    "arch/x86/xen/smp_hvm.c",
    "arch/x86/xen/time.c",
    "drivers/xen/events/events_base.c",
    "drivers/xen/platform-pci.c"
  ],
  "files_changed_count": 7,
  "stats": [
    {
      "file": "arch/x86/include/asm/xen/events.h",
      "insertions": 11,
      "deletions": 0
    },
    {
      "file": "arch/x86/pci/xen.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/x86/xen/enlighten_hvm.c",
      "insertions": 8,
      "deletions": 4
    },
    {
      "file": "arch/x86/xen/smp_hvm.c",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "arch/x86/xen/time.c",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "drivers/xen/events/events_base.c",
      "insertions": 17,
      "deletions": 8
    },
    {
      "file": "drivers/xen/platform-pci.c",
      "insertions": 4,
      "deletions": 10
    }
  ],
  "total_insertions": 54,
  "total_deletions": 23,
  "total_changes": 77,
  "parents": [
    "5f6a1614fab801834e32b420b60acdc27acfcdec"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.12",
    "v4.12-rc1",
    "v4.12-rc2",
    "v4.12-rc3",
    "v4.12-rc4",
    "v4.12-rc5",
    "v4.12-rc6",
    "v4.12-rc7",
    "v4.13",
    "v4.13-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "inject"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/pci/xen.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/xen/smp_hvm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/xen/enlighten_hvm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/xen/events/events_base.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/xen/time.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/xen/platform-pci.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/include/asm/xen/events.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}