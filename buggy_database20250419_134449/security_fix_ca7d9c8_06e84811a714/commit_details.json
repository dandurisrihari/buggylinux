{
  "hash": "ca7d9c829d419c06e450afa5f785d58198c37caa",
  "hash_short": "ca7d9c82",
  "subject": "arm/arm64: KVM: Initialize the vgic on-demand when injecting IRQs",
  "body": "Userspace assumes that it can wire up IRQ injections after having\ncreated all VCPUs and after having created the VGIC, but potentially\nbefore starting the first VCPU.  This can currently lead to lost IRQs\nbecause the state of that IRQ injection is not stored anywhere and we\ndon't return an error to userspace.\n\nWe haven't seen this problem manifest itself yet, presumably because\nguests reset the devices on boot, but this could cause issues with\nmigration and other non-standard startup configurations.\n\nReviewed-by: Marc Zyngier <marc.zyngier@arm.com>\nSigned-off-by: Christoffer Dall <christoffer.dall@linaro.org>",
  "full_message": "arm/arm64: KVM: Initialize the vgic on-demand when injecting IRQs\n\nUserspace assumes that it can wire up IRQ injections after having\ncreated all VCPUs and after having created the VGIC, but potentially\nbefore starting the first VCPU.  This can currently lead to lost IRQs\nbecause the state of that IRQ injection is not stored anywhere and we\ndon't return an error to userspace.\n\nWe haven't seen this problem manifest itself yet, presumably because\nguests reset the devices on boot, but this could cause issues with\nmigration and other non-standard startup configurations.\n\nReviewed-by: Marc Zyngier <marc.zyngier@arm.com>\nSigned-off-by: Christoffer Dall <christoffer.dall@linaro.org>",
  "author_name": "Christoffer Dall",
  "author_email": "christoffer.dall@linaro.org",
  "author_date": "Tue Dec 9 14:35:33 2014 +0100",
  "author_date_iso": "2014-12-09T14:35:33+01:00",
  "committer_name": "Christoffer Dall",
  "committer_email": "christoffer.dall@linaro.org",
  "committer_date": "Mon Dec 15 11:36:21 2014 +0100",
  "committer_date_iso": "2014-12-15T11:36:21+01:00",
  "files_changed": [
    "virt/kvm/arm/vgic.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "virt/kvm/arm/vgic.c",
      "insertions": 16,
      "deletions": 6
    }
  ],
  "total_insertions": 16,
  "total_deletions": 6,
  "total_changes": 22,
  "parents": [
    "716139df2517fbc3f2306dbe8eba0fa88dca0189"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v3.19",
    "v3.19-rc1",
    "v3.19-rc2",
    "v3.19-rc3",
    "v3.19-rc4",
    "v3.19-rc5",
    "v3.19-rc6",
    "v3.19-rc7",
    "v4.0",
    "v4.0-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "virt/kvm/arm/vgic.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}