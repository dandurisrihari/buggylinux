Commit Hash: ca7d9c829d419c06e450afa5f785d58198c37caa
Subject: arm/arm64: KVM: Initialize the vgic on-demand when injecting IRQs


Security Keywords:
- injection

Full commit message:
arm/arm64: KVM: Initialize the vgic on-demand when injecting IRQs

Userspace assumes that it can wire up IRQ injections after having
created all VCPUs and after having created the VGIC, but potentially
before starting the first VCPU.  This can currently lead to lost IRQs
because the state of that IRQ injection is not stored anywhere and we
don't return an error to userspace.

We haven't seen this problem manifest itself yet, presumably because
guests reset the devices on boot, but this could cause issues with
migration and other non-standard startup configurations.

Reviewed-by: Marc Zyngier <marc.zyngier@arm.com>
Signed-off-by: Christoffer Dall <christoffer.dall@linaro.org>

Metadata:
Author: Christoffer Dall <christoffer.dall@linaro.org>
Author Date: Tue Dec 9 14:35:33 2014 +0100
Committer: Christoffer Dall <christoffer.dall@linaro.org>
Commit Date: Mon Dec 15 11:36:21 2014 +0100

Files Changed: 1
Lines Added: 16
Lines Removed: 6
Total Changes: 22
