{
  "hash": "0242737dc4eb9f6e9a5ea594b3f93efa0b12f28d",
  "hash_short": "0242737d",
  "subject": "perf/smmuv3: Enable HiSilicon Erratum 162001900 quirk for HIP08/09",
  "body": "Some HiSilicon SMMU PMCG suffers the erratum 162001900 that the PMU\ndisable control sometimes fail to disable the counters. This will lead\nto error or inaccurate data since before we enable the counters the\ncounter's still counting for the event used in last perf session.\n\nThis patch tries to fix this by hardening the global disable process.\nBefore disable the PMU, writing an invalid event type (0xffff) to\nfocibly stop the counters. Correspondingly restore each events on\npmu::pmu_enable().\n\nSigned-off-by: Yicong Yang <yangyicong@hisilicon.com>\nLink: https://lore.kernel.org/r/20230814124012.58013-1-yangyicong@huawei.com\nSigned-off-by: Will Deacon <will@kernel.org>",
  "full_message": "perf/smmuv3: Enable HiSilicon Erratum 162001900 quirk for HIP08/09\n\nSome HiSilicon SMMU PMCG suffers the erratum 162001900 that the PMU\ndisable control sometimes fail to disable the counters. This will lead\nto error or inaccurate data since before we enable the counters the\ncounter's still counting for the event used in last perf session.\n\nThis patch tries to fix this by hardening the global disable process.\nBefore disable the PMU, writing an invalid event type (0xffff) to\nfocibly stop the counters. Correspondingly restore each events on\npmu::pmu_enable().\n\nSigned-off-by: Yicong Yang <yangyicong@hisilicon.com>\nLink: https://lore.kernel.org/r/20230814124012.58013-1-yangyicong@huawei.com\nSigned-off-by: Will Deacon <will@kernel.org>",
  "author_name": "Yicong Yang",
  "author_email": "yangyicong@hisilicon.com",
  "author_date": "Mon Aug 14 20:40:12 2023 +0800",
  "author_date_iso": "2023-08-14T20:40:12+08:00",
  "committer_name": "Will Deacon",
  "committer_email": "will@kernel.org",
  "committer_date": "Tue Aug 15 12:50:53 2023 +0100",
  "committer_date_iso": "2023-08-15T12:50:53+01:00",
  "files_changed": [
    "Documentation/arch/arm64/silicon-errata.rst",
    "drivers/acpi/arm64/iort.c",
    "drivers/perf/arm_smmuv3_pmu.c",
    "include/linux/acpi_iort.h"
  ],
  "files_changed_count": 4,
  "stats": [
    {
      "file": "Documentation/arch/arm64/silicon-errata.rst",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/acpi/arm64/iort.c",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "drivers/perf/arm_smmuv3_pmu.c",
      "insertions": 45,
      "deletions": 1
    },
    {
      "file": "include/linux/acpi_iort.h",
      "insertions": 1,
      "deletions": 0
    }
  ],
  "total_insertions": 53,
  "total_deletions": 2,
  "total_changes": 55,
  "parents": [
    "90d68677226ac7cf344648919df2016686b3e2ab"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "Documentation/arch/arm64/silicon-errata.rst",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/acpi/arm64/iort.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/perf/arm_smmuv3_pmu.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/acpi_iort.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}