{
  "hash": "a3d71f256c8a8b5d51ea0dfd09cd85ce3a09d9e1",
  "hash_short": "a3d71f25",
  "subject": "media: cec-pin-error-inj: avoid a false-positive Spectre detection",
  "body": "The current logic makes Smatch to false-detect a Spectre variant 1\nvulnerability. The problem is that it initializes an u32 indirectly\nfrom user space input.\n\nAfter trying to write a fixup, after a while I realized that, in\npractice, this shouldn't be a problem, as an u32 is initialized\nfrom u8, but it took some time to discover it.\n\nSo, do some code cleanup to make it clearer for both humans\nand machines about the valid range for \"op\".\n\nFix this warning:\n\tdrivers/media/cec/cec-pin-error-inj.c:170 cec_pin_error_inj_parse_line() warn: potential spectre issue 'pin->error_inj_args'\n\nSigned-off-by: Mauro Carvalho Chehab <mchehab+samsung@kernel.org>\nSigned-off-by: Hans Verkuil <hans.verkuil@cisco.com>\nSigned-off-by: Mauro Carvalho Chehab <mchehab+samsung@kernel.org>",
  "full_message": "media: cec-pin-error-inj: avoid a false-positive Spectre detection\n\nThe current logic makes Smatch to false-detect a Spectre variant 1\nvulnerability. The problem is that it initializes an u32 indirectly\nfrom user space input.\n\nAfter trying to write a fixup, after a while I realized that, in\npractice, this shouldn't be a problem, as an u32 is initialized\nfrom u8, but it took some time to discover it.\n\nSo, do some code cleanup to make it clearer for both humans\nand machines about the valid range for \"op\".\n\nFix this warning:\n\tdrivers/media/cec/cec-pin-error-inj.c:170 cec_pin_error_inj_parse_line() warn: potential spectre issue 'pin->error_inj_args'\n\nSigned-off-by: Mauro Carvalho Chehab <mchehab+samsung@kernel.org>\nSigned-off-by: Hans Verkuil <hans.verkuil@cisco.com>\nSigned-off-by: Mauro Carvalho Chehab <mchehab+samsung@kernel.org>",
  "author_name": "Mauro Carvalho Chehab",
  "author_email": "mchehab+samsung@kernel.org",
  "author_date": "Tue May 15 15:23:16 2018 -0400",
  "author_date_iso": "2018-05-15T15:23:16-04:00",
  "committer_name": "Mauro Carvalho Chehab",
  "committer_email": "mchehab+samsung@kernel.org",
  "committer_date": "Mon May 28 16:11:17 2018 -0400",
  "committer_date_iso": "2018-05-28T16:11:17-04:00",
  "files_changed": [
    "drivers/media/cec/cec-pin-error-inj.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/media/cec/cec-pin-error-inj.c",
      "insertions": 12,
      "deletions": 11
    }
  ],
  "total_insertions": 12,
  "total_deletions": 11,
  "total_changes": 23,
  "parents": [
    "6992effe5344ceba1c53fd1a062df57e820b27cd"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.18",
    "v4.18-rc1",
    "v4.18-rc2",
    "v4.18-rc3",
    "v4.18-rc4",
    "v4.18-rc5",
    "v4.18-rc6",
    "v4.18-rc7",
    "v4.18-rc8",
    "v4.19"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "vulnerability"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/media/cec/cec-pin-error-inj.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}