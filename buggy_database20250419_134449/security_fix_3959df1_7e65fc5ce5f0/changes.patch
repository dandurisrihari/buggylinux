diff --cc arch/x86/kernel/cpu/mcheck/mce.c
index 3d6b5269fb2e,e4e6646cac46..0f8f21c8284a
--- a/arch/x86/kernel/cpu/mcheck/mce.c
+++ b/arch/x86/kernel/cpu/mcheck/mce.c
@@@ -52,11 -52,11 +52,11 @@@
  
  static DEFINE_MUTEX(mce_chrdev_read_mutex);
  
- #define rcu_dereference_check_mce(p) \
+ #define mce_log_get_idx_check(p) \
  ({ \
 -	rcu_lockdep_assert(rcu_read_lock_sched_held() || \
 -			   lockdep_is_held(&mce_chrdev_read_mutex), \
 -			   "suspicious mce_log_get_idx_check() usage"); \
 +	RCU_LOCKDEP_WARN(!rcu_read_lock_sched_held() && \
 +			 !lockdep_is_held(&mce_chrdev_read_mutex), \
- 			 "suspicious rcu_dereference_check_mce() usage"); \
++			 "suspicious mce_log_get_idx_check() usage"); \
  	smp_load_acquire(&(p)); \
  })