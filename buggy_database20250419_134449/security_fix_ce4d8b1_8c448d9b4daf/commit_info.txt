Commit Hash: ce4d8b16e64d062f1c6271a0068dbbbba2dee620
Subject: ubifs: Fix memory leak in read_znode() error path


Security Keywords:
- authentication

Full commit message:
ubifs: Fix memory leak in read_znode() error path

In read_znode(), the indexing node 'idx' is allocated by kmalloc().
However, it is not deallocated in the following execution if
ubifs_node_check_hash() fails, leading to a memory leak bug. To fix this
issue, free 'idx' before returning the error.

Fixes: 16a26b20d2af ("ubifs: authentication: Add hashes to index nodes")
Signed-off-by: Wenwen Wang <wenwen@cs.uga.edu>
Signed-off-by: Richard Weinberger <richard@nod.at>

Metadata:
Author: Wenwen Wang <wenwen@cs.uga.edu>
Author Date: Mon Aug 19 22:03:46 2019 -0500
Committer: Richard Weinberger <richard@nod.at>
Commit Date: Sun Sep 15 22:11:18 2019 +0200

Files Changed: 1
Lines Added: 1
Lines Removed: 0
Total Changes: 1
