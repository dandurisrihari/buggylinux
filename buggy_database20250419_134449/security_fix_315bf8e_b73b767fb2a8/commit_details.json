{
  "hash": "315bf8ef914f31d51d084af950703aa1e09a728c",
  "hash_short": "315bf8ef",
  "subject": "btrfs: reset fs_root to NULL on error in open_ctree",
  "body": "While running my error injection script I hit a panic when we tried to\nclean up the fs_root when freeing the fs_root.  This is because\nfs_info->fs_root == PTR_ERR(-EIO), which isn't great.  Fix this by\nsetting fs_info->fs_root = NULL; if we fail to read the root.\n\nCC: stable@vger.kernel.org # 4.4+\nReviewed-by: Nikolay Borisov <nborisov@suse.com>\nReviewed-by: Johannes Thumshirn <johannes.thumshirn@wdc.com>\nReviewed-by: Qu Wenruo <wqu@suse.com>\nSigned-off-by: Josef Bacik <josef@toxicpanda.com>\nReviewed-by: David Sterba <dsterba@suse.com>\nSigned-off-by: David Sterba <dsterba@suse.com>",
  "full_message": "btrfs: reset fs_root to NULL on error in open_ctree\n\nWhile running my error injection script I hit a panic when we tried to\nclean up the fs_root when freeing the fs_root.  This is because\nfs_info->fs_root == PTR_ERR(-EIO), which isn't great.  Fix this by\nsetting fs_info->fs_root = NULL; if we fail to read the root.\n\nCC: stable@vger.kernel.org # 4.4+\nReviewed-by: Nikolay Borisov <nborisov@suse.com>\nReviewed-by: Johannes Thumshirn <johannes.thumshirn@wdc.com>\nReviewed-by: Qu Wenruo <wqu@suse.com>\nSigned-off-by: Josef Bacik <josef@toxicpanda.com>\nReviewed-by: David Sterba <dsterba@suse.com>\nSigned-off-by: David Sterba <dsterba@suse.com>",
  "author_name": "Josef Bacik",
  "author_email": "josef@toxicpanda.com",
  "author_date": "Thu Feb 13 10:47:28 2020 -0500",
  "author_date_iso": "2020-02-13T10:47:28-05:00",
  "committer_name": "David Sterba",
  "committer_email": "dsterba@suse.com",
  "committer_date": "Wed Feb 19 00:36:35 2020 +0100",
  "committer_date_iso": "2020-02-19T00:36:35+01:00",
  "files_changed": [
    "fs/btrfs/disk-io.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "fs/btrfs/disk-io.c",
      "insertions": 1,
      "deletions": 0
    }
  ],
  "total_insertions": 1,
  "total_deletions": 0,
  "total_changes": 1,
  "parents": [
    "81f7eb00ff5bb8326e82503a32809421d14abb8a"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.6",
    "v5.6-rc3",
    "v5.6-rc4",
    "v5.6-rc5",
    "v5.6-rc6",
    "v5.6-rc7",
    "v5.7-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "fs/btrfs/disk-io.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}