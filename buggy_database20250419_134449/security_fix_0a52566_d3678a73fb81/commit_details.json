{
  "hash": "0a52566279b4ee65ecd2503d7b7342851f84755c",
  "hash_short": "0a525662",
  "subject": "nvmet: fix a memory leak in nvmet_auth_set_key",
  "body": "When changing dhchap secrets we need to release the old\nsecrets as well.\n\nkmemleak complaint:\n--\nunreferenced object 0xffff8c7f44ed8180 (size 64):\n  comm \"check\", pid 7304, jiffies 4295686133 (age 72034.246s)\n  hex dump (first 32 bytes):\n    44 48 48 43 2d 31 3a 30 30 3a 4c 64 4c 4f 64 71  DHHC-1:00:LdLOdq\n    79 56 69 67 77 48 55 32 6d 5a 59 4c 7a 35 59 38  yVigwHU2mZYLz5Y8\n  backtrace:\n    [<00000000b6fc5071>] kstrdup+0x2e/0x60\n    [<00000000f0f4633f>] 0xffffffffc0e07ee6\n    [<0000000053006c05>] 0xffffffffc0dff783\n    [<00000000419ae922>] configfs_write_iter+0xb1/0x120\n    [<000000008183c424>] vfs_write+0x2be/0x3c0\n    [<000000009005a2a5>] ksys_write+0x5f/0xe0\n    [<00000000cd495c89>] do_syscall_64+0x38/0x90\n    [<00000000f2a84ac5>] entry_SYSCALL_64_after_hwframe+0x63/0xcd\n\nFixes: db1312dd9548 (\"nvmet: implement basic In-Band Authentication\")\nSigned-off-by: Sagi Grimberg <sagi@grimberg.me>\nSigned-off-by: Christoph Hellwig <hch@lst.de>",
  "full_message": "nvmet: fix a memory leak in nvmet_auth_set_key\n\nWhen changing dhchap secrets we need to release the old\nsecrets as well.\n\nkmemleak complaint:\n--\nunreferenced object 0xffff8c7f44ed8180 (size 64):\n  comm \"check\", pid 7304, jiffies 4295686133 (age 72034.246s)\n  hex dump (first 32 bytes):\n    44 48 48 43 2d 31 3a 30 30 3a 4c 64 4c 4f 64 71  DHHC-1:00:LdLOdq\n    79 56 69 67 77 48 55 32 6d 5a 59 4c 7a 35 59 38  yVigwHU2mZYLz5Y8\n  backtrace:\n    [<00000000b6fc5071>] kstrdup+0x2e/0x60\n    [<00000000f0f4633f>] 0xffffffffc0e07ee6\n    [<0000000053006c05>] 0xffffffffc0dff783\n    [<00000000419ae922>] configfs_write_iter+0xb1/0x120\n    [<000000008183c424>] vfs_write+0x2be/0x3c0\n    [<000000009005a2a5>] ksys_write+0x5f/0xe0\n    [<00000000cd495c89>] do_syscall_64+0x38/0x90\n    [<00000000f2a84ac5>] entry_SYSCALL_64_after_hwframe+0x63/0xcd\n\nFixes: db1312dd9548 (\"nvmet: implement basic In-Band Authentication\")\nSigned-off-by: Sagi Grimberg <sagi@grimberg.me>\nSigned-off-by: Christoph Hellwig <hch@lst.de>",
  "author_name": "Sagi Grimberg",
  "author_email": "sagi@grimberg.me",
  "author_date": "Mon Nov 14 08:45:02 2022 +0200",
  "author_date_iso": "2022-11-14T08:45:02+02:00",
  "committer_name": "Christoph Hellwig",
  "committer_email": "hch@lst.de",
  "committer_date": "Wed Nov 16 07:20:56 2022 +0100",
  "committer_date_iso": "2022-11-16T07:20:56+01:00",
  "files_changed": [
    "drivers/nvme/target/auth.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/nvme/target/auth.c",
      "insertions": 2,
      "deletions": 0
    }
  ],
  "total_insertions": 2,
  "total_deletions": 0,
  "total_changes": 2,
  "parents": [
    "8d6e38f636ac063e8062a21e7616f7d9bf0df5d8"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "Authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/nvme/target/auth.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}