{
  "hash": "bc3d674462e5df5f2b33adbfcaad9edff8b827f4",
  "hash_short": "bc3d6744",
  "subject": "drm/i915: Allow userspace to request no-error-capture upon GPU hangs",
  "body": "igt likes to inject GPU hangs into its command streams. However, as we\nexpect these hangs, we don't actually want them recorded in the dmesg\noutput or stored in the i915_error_state (usually). To accommodate this\nallow userspace to set a flag on the context that any hang emanating\nfrom that context will not be recorded. We still do the error capture\n(otherwise how do we find the guilty context and know its intent?) as\npart of the reason for random GPU hang injection is to exercise the race\nconditions between the error capture and normal execution.\n\nv2: Split out the request->ringbuf error capture changes.\nv3: Move the flag defines next to the intel_context->flags definition\n\nSigned-off-by: Chris Wilson <chris@chris-wilson.co.uk>\nAcked-by: Daniel Vetter <daniel.vetter@ffwll.ch>\nReviewed-by: Dave Gordon <david.s.gordon@intel.com>\nLink: http://patchwork.freedesktop.org/patch/msgid/1467616119-4093-9-git-send-email-chris@chris-wilson.co.uk",
  "full_message": "drm/i915: Allow userspace to request no-error-capture upon GPU hangs\n\nigt likes to inject GPU hangs into its command streams. However, as we\nexpect these hangs, we don't actually want them recorded in the dmesg\noutput or stored in the i915_error_state (usually). To accommodate this\nallow userspace to set a flag on the context that any hang emanating\nfrom that context will not be recorded. We still do the error capture\n(otherwise how do we find the guilty context and know its intent?) as\npart of the reason for random GPU hang injection is to exercise the race\nconditions between the error capture and normal execution.\n\nv2: Split out the request->ringbuf error capture changes.\nv3: Move the flag defines next to the intel_context->flags definition\n\nSigned-off-by: Chris Wilson <chris@chris-wilson.co.uk>\nAcked-by: Daniel Vetter <daniel.vetter@ffwll.ch>\nReviewed-by: Dave Gordon <david.s.gordon@intel.com>\nLink: http://patchwork.freedesktop.org/patch/msgid/1467616119-4093-9-git-send-email-chris@chris-wilson.co.uk",
  "author_name": "Chris Wilson",
  "author_email": "chris@chris-wilson.co.uk",
  "author_date": "Mon Jul 4 08:08:39 2016 +0100",
  "author_date_iso": "2016-07-04T08:08:39+01:00",
  "committer_name": "Chris Wilson",
  "committer_email": "chris@chris-wilson.co.uk",
  "committer_date": "Mon Jul 4 08:18:24 2016 +0100",
  "committer_date_iso": "2016-07-04T08:18:24+01:00",
  "files_changed": [
    "drivers/gpu/drm/i915/i915_drv.h",
    "drivers/gpu/drm/i915/i915_gem_context.c",
    "drivers/gpu/drm/i915/i915_gpu_error.c",
    "include/uapi/drm/i915_drm.h"
  ],
  "files_changed_count": 4,
  "stats": [
    {
      "file": "drivers/gpu/drm/i915/i915_drv.h",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/i915/i915_gem_context.c",
      "insertions": 13,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/i915/i915_gpu_error.c",
      "insertions": 12,
      "deletions": 8
    },
    {
      "file": "include/uapi/drm/i915_drm.h",
      "insertions": 1,
      "deletions": 0
    }
  ],
  "total_insertions": 29,
  "total_deletions": 9,
  "total_changes": 38,
  "parents": [
    "ba6e0418064de8c4dee914a5eb8574affe19e6f5"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "inject"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpu/drm/i915/i915_drv.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/i915_gem_context.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/i915_gpu_error.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/uapi/drm/i915_drm.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}