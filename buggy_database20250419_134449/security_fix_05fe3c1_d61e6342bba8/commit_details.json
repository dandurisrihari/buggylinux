{
  "hash": "05fe3c103f7e6b8b4fca8a7001dfc9ed4628085b",
  "hash_short": "05fe3c10",
  "subject": "mm/usercopy: return 1 from hardened_usercopy __setup() handler",
  "body": "__setup() handlers should return 1 if the command line option is handled\nand 0 if not (or maybe never return 0; it just pollutes init's\nenvironment).  This prevents:\n\n  Unknown kernel command line parameters \\\n  \"BOOT_IMAGE=/boot/bzImage-517rc5 hardened_usercopy=off\", will be \\\n  passed to user space.\n\n  Run /sbin/init as init process\n   with arguments:\n     /sbin/init\n   with environment:\n     HOME=/\n     TERM=linux\n     BOOT_IMAGE=/boot/bzImage-517rc5\n     hardened_usercopy=off\nor\n     hardened_usercopy=on\nbut when \"hardened_usercopy=foo\" is used, there is no Unknown kernel\ncommand line parameter.\n\nReturn 1 to indicate that the boot option has been handled.\nPrint a warning if strtobool() returns an error on the option string,\nbut do not mark this as in unknown command line option and do not cause\ninit's environment to be polluted with this string.\n\nLink: https://lkml.kernel.org/r/20220222034249.14795-1-rdunlap@infradead.org\nLink: lore.kernel.org/r/64644a2f-4a20-bab3-1e15-3b2cdd0defe3@omprussia.ru\nFixes: b5cb15d9372ab (\"usercopy: Allow boot cmdline disabling of hardening\")\nSigned-off-by: Randy Dunlap <rdunlap@infradead.org>\nReported-by: Igor Zhbanov <i.zhbanov@omprussia.ru>\nAcked-by: Chris von Recklinghausen <crecklin@redhat.com>\nCc: Kees Cook <keescook@chromium.org>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\nSigned-off-by: Linus Torvalds <torvalds@linux-foundation.org>",
  "full_message": "mm/usercopy: return 1 from hardened_usercopy __setup() handler\n\n__setup() handlers should return 1 if the command line option is handled\nand 0 if not (or maybe never return 0; it just pollutes init's\nenvironment).  This prevents:\n\n  Unknown kernel command line parameters \\\n  \"BOOT_IMAGE=/boot/bzImage-517rc5 hardened_usercopy=off\", will be \\\n  passed to user space.\n\n  Run /sbin/init as init process\n   with arguments:\n     /sbin/init\n   with environment:\n     HOME=/\n     TERM=linux\n     BOOT_IMAGE=/boot/bzImage-517rc5\n     hardened_usercopy=off\nor\n     hardened_usercopy=on\nbut when \"hardened_usercopy=foo\" is used, there is no Unknown kernel\ncommand line parameter.\n\nReturn 1 to indicate that the boot option has been handled.\nPrint a warning if strtobool() returns an error on the option string,\nbut do not mark this as in unknown command line option and do not cause\ninit's environment to be polluted with this string.\n\nLink: https://lkml.kernel.org/r/20220222034249.14795-1-rdunlap@infradead.org\nLink: lore.kernel.org/r/64644a2f-4a20-bab3-1e15-3b2cdd0defe3@omprussia.ru\nFixes: b5cb15d9372ab (\"usercopy: Allow boot cmdline disabling of hardening\")\nSigned-off-by: Randy Dunlap <rdunlap@infradead.org>\nReported-by: Igor Zhbanov <i.zhbanov@omprussia.ru>\nAcked-by: Chris von Recklinghausen <crecklin@redhat.com>\nCc: Kees Cook <keescook@chromium.org>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\nSigned-off-by: Linus Torvalds <torvalds@linux-foundation.org>",
  "author_name": "Randy Dunlap",
  "author_email": "rdunlap@infradead.org",
  "author_date": "Tue Mar 22 14:47:52 2022 -0700",
  "author_date_iso": "2022-03-22T14:47:52-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Tue Mar 22 15:57:11 2022 -0700",
  "committer_date_iso": "2022-03-22T15:57:11-07:00",
  "files_changed": [
    "mm/usercopy.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "mm/usercopy.c",
      "insertions": 4,
      "deletions": 1
    }
  ],
  "total_insertions": 4,
  "total_deletions": 1,
  "total_changes": 5,
  "parents": [
    "ad7489d5262d2aa775b5e5a1782793925fa90065"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "mm/usercopy.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}