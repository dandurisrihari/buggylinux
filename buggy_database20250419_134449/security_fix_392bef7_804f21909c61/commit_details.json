{
  "hash": "392bef709659abea614abfe53cf228e7a59876a4",
  "hash_short": "392bef70",
  "subject": "x86/build: Move _etext to actual end of .text",
  "body": "When building x86 with Clang LTO and CFI, CFI jump regions are\nautomatically added to the end of the .text section late in linking. As a\nresult, the _etext position was being labelled before the appended jump\nregions, causing confusion about where the boundaries of the executable\nregion actually are in the running kernel, and broke at least the fault\ninjection code. This moves the _etext mark to outside (and immediately\nafter) the .text area, as it already the case on other architectures\n(e.g. arm64, arm).\n\nReported-and-tested-by: Sami Tolvanen <samitolvanen@google.com>\nSigned-off-by: Kees Cook <keescook@chromium.org>\nCc: Borislav Petkov <bp@suse.de>\nCc: Linus Torvalds <torvalds@linux-foundation.org>\nCc: Peter Zijlstra <peterz@infradead.org>\nCc: Thomas Gleixner <tglx@linutronix.de>\nLink: http://lkml.kernel.org/r/20190423183827.GA4012@beast\nSigned-off-by: Ingo Molnar <mingo@kernel.org>",
  "full_message": "x86/build: Move _etext to actual end of .text\n\nWhen building x86 with Clang LTO and CFI, CFI jump regions are\nautomatically added to the end of the .text section late in linking. As a\nresult, the _etext position was being labelled before the appended jump\nregions, causing confusion about where the boundaries of the executable\nregion actually are in the running kernel, and broke at least the fault\ninjection code. This moves the _etext mark to outside (and immediately\nafter) the .text area, as it already the case on other architectures\n(e.g. arm64, arm).\n\nReported-and-tested-by: Sami Tolvanen <samitolvanen@google.com>\nSigned-off-by: Kees Cook <keescook@chromium.org>\nCc: Borislav Petkov <bp@suse.de>\nCc: Linus Torvalds <torvalds@linux-foundation.org>\nCc: Peter Zijlstra <peterz@infradead.org>\nCc: Thomas Gleixner <tglx@linutronix.de>\nLink: http://lkml.kernel.org/r/20190423183827.GA4012@beast\nSigned-off-by: Ingo Molnar <mingo@kernel.org>",
  "author_name": "Kees Cook",
  "author_email": "keescook@chromium.org",
  "author_date": "Tue Apr 23 11:38:27 2019 -0700",
  "author_date_iso": "2019-04-23T11:38:27-07:00",
  "committer_name": "Ingo Molnar",
  "committer_email": "mingo@kernel.org",
  "committer_date": "Wed Apr 24 12:27:47 2019 +0200",
  "committer_date_iso": "2019-04-24T12:27:47+02:00",
  "files_changed": [
    "arch/x86/kernel/vmlinux.lds.S"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "arch/x86/kernel/vmlinux.lds.S",
      "insertions": 3,
      "deletions": 3
    }
  ],
  "total_insertions": 3,
  "total_deletions": 3,
  "total_changes": 6,
  "parents": [
    "a65c88e16f32aa9ef2e8caa68ea5c29bd5eb0ff0"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.2",
    "v5.2-rc1",
    "v5.2-rc2",
    "v5.2-rc3",
    "v5.2-rc4",
    "v5.2-rc5",
    "v5.2-rc6",
    "v5.2-rc7",
    "v5.3",
    "v5.3-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/kernel/vmlinux.lds.S",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}