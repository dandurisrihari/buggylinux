{
  "hash": "c4e927da893b2d9ebe71ac206ed021df363771e4",
  "hash_short": "c4e927da",
  "subject": "thermal: intel_powerclamp: Remove accounting for IRQ wakes",
  "body": "There is a static variable \"idle_wakeup_counter\", which accounts for\nnumber of wake ups because of IRQs and take actions to compensate idle\ninjection. This is now read and reset to 0, but never incremented.\nSo all the usage of this counter for idle injection has no use.\n\nAlso another static variable \"reduce_irq\", which depends on\n\"idle_wakeup_counter\", so remove usage of \"reduce_irq\" also.\n\nCommit feb6cd6a0f9f (\"thermal/intel_powerclamp: stop sched tick in\nforced idle\") replaced the local use of \"mwait_idle_with_hints\" with\nplay_idle(). This removed possibility of updating \"idle_wakeup_counter\"\nwithout change in play_idle(). This change was made in Linux 4.10.\n\nSigned-off-by: Srinivas Pandruvada <srinivas.pandruvada@linux.intel.com>\n[ rjw: Changelog edits ]\nSigned-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>",
  "full_message": "thermal: intel_powerclamp: Remove accounting for IRQ wakes\n\nThere is a static variable \"idle_wakeup_counter\", which accounts for\nnumber of wake ups because of IRQs and take actions to compensate idle\ninjection. This is now read and reset to 0, but never incremented.\nSo all the usage of this counter for idle injection has no use.\n\nAlso another static variable \"reduce_irq\", which depends on\n\"idle_wakeup_counter\", so remove usage of \"reduce_irq\" also.\n\nCommit feb6cd6a0f9f (\"thermal/intel_powerclamp: stop sched tick in\nforced idle\") replaced the local use of \"mwait_idle_with_hints\" with\nplay_idle(). This removed possibility of updating \"idle_wakeup_counter\"\nwithout change in play_idle(). This change was made in Linux 4.10.\n\nSigned-off-by: Srinivas Pandruvada <srinivas.pandruvada@linux.intel.com>\n[ rjw: Changelog edits ]\nSigned-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>",
  "author_name": "Srinivas Pandruvada",
  "author_email": "srinivas.pandruvada@linux.intel.com",
  "author_date": "Tue Sep 20 04:08:02 2022 -0700",
  "author_date_iso": "2022-09-20T04:08:02-07:00",
  "committer_name": "Rafael J. Wysocki",
  "committer_email": "rafael.j.wysocki@intel.com",
  "committer_date": "Wed Sep 21 20:31:05 2022 +0200",
  "committer_date_iso": "2022-09-21T20:31:05+02:00",
  "files_changed": [
    "drivers/thermal/intel/intel_powerclamp.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/thermal/intel/intel_powerclamp.c",
      "insertions": 3,
      "deletions": 18
    }
  ],
  "total_insertions": 3,
  "total_deletions": 18,
  "total_changes": 21,
  "parents": [
    "68b99e94a4a2db6ba9b31fe0485e057b9354a640"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/thermal/intel/intel_powerclamp.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}