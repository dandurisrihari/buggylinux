Commit Hash: 5c57533eb8c1efeeab4e2e417fa983d65707b925
Subject: KVM: arm64: vgic-v4: Fall back to software irqbypass if LPI not found


Security Keywords:
- injection
- bypass

Full commit message:
KVM: arm64: vgic-v4: Fall back to software irqbypass if LPI not found

Continuing with the theme of broken VMMs and guests, irqbypass
registration can fail if the virtual ITS lacks a translation for the
MSI. Either the guest hasn't mapped it or userspace may have forgotten
to restore the ITS.

Exit silently and allow irqbypass configuration to succeed. As a reward
for ingenuity, LPIs are demoted to software injection.

Tested-by: Sudheer Dantuluri <dantuluris@google.com>
Fixes: 196b136498b3 ("KVM: arm/arm64: GICv4: Wire mapping/unmapping of VLPIs in VFIO irq bypass")
Acked-by: Marc Zyngier <maz@kernel.org>
Link: https://lore.kernel.org/r/20250226183124.82094-4-oliver.upton@linux.dev
Signed-off-by: Oliver Upton <oliver.upton@linux.dev>

Metadata:
Author: Oliver Upton <oliver.upton@linux.dev>
Author Date: Wed Feb 26 10:31:23 2025 -0800
Committer: Oliver Upton <oliver.upton@linux.dev>
Commit Date: Wed Feb 26 13:22:49 2025 -0800

Files Changed: 1
Lines Added: 10
Lines Removed: 5
Total Changes: 15
