{
  "hash": "fb0f3d281b7f81a11e210783940f3798c4744179",
  "hash_short": "fb0f3d28",
  "subject": "RISC-V: Allow marking IPIs as suitable for remote FENCEs",
  "body": "To do remote FENCEs (i.e. remote TLB flushes) using IPI calls on the\nRISC-V kernel, we need hardware mechanism to directly inject IPI from\nthe supervisor mode (i.e. RISC-V kernel) instead of using SBI calls.\n\nThe upcoming AIA IMSIC devices allow direct IPI injection from the\nsupervisor mode (i.e. RISC-V kernel). To support this, we extend the\nriscv_ipi_set_virq_range() function so that IPI provider (i.e. irqchip\ndrivers can mark IPIs as suitable for remote FENCEs.\n\nSigned-off-by: Anup Patel <apatel@ventanamicro.com>\nReviewed-by: Atish Patra <atishp@rivosinc.com>\nAcked-by: Palmer Dabbelt <palmer@rivosinc.com>\nSigned-off-by: Marc Zyngier <maz@kernel.org>\nLink: https://lore.kernel.org/r/20230328035223.1480939-5-apatel@ventanamicro.com",
  "full_message": "RISC-V: Allow marking IPIs as suitable for remote FENCEs\n\nTo do remote FENCEs (i.e. remote TLB flushes) using IPI calls on the\nRISC-V kernel, we need hardware mechanism to directly inject IPI from\nthe supervisor mode (i.e. RISC-V kernel) instead of using SBI calls.\n\nThe upcoming AIA IMSIC devices allow direct IPI injection from the\nsupervisor mode (i.e. RISC-V kernel). To support this, we extend the\nriscv_ipi_set_virq_range() function so that IPI provider (i.e. irqchip\ndrivers can mark IPIs as suitable for remote FENCEs.\n\nSigned-off-by: Anup Patel <apatel@ventanamicro.com>\nReviewed-by: Atish Patra <atishp@rivosinc.com>\nAcked-by: Palmer Dabbelt <palmer@rivosinc.com>\nSigned-off-by: Marc Zyngier <maz@kernel.org>\nLink: https://lore.kernel.org/r/20230328035223.1480939-5-apatel@ventanamicro.com",
  "author_name": "Anup Patel",
  "author_email": "apatel@ventanamicro.com",
  "author_date": "Tue Mar 28 09:22:20 2023 +0530",
  "author_date_iso": "2023-03-28T09:22:20+05:30",
  "committer_name": "Marc Zyngier",
  "committer_email": "maz@kernel.org",
  "committer_date": "Sat Apr 8 11:26:24 2023 +0100",
  "committer_date_iso": "2023-04-08T11:26:24+01:00",
  "files_changed": [
    "arch/riscv/include/asm/smp.h",
    "arch/riscv/kernel/sbi-ipi.c",
    "arch/riscv/kernel/smp.c",
    "drivers/clocksource/timer-clint.c"
  ],
  "files_changed_count": 4,
  "stats": [
    {
      "file": "arch/riscv/include/asm/smp.h",
      "insertions": 16,
      "deletions": 2
    },
    {
      "file": "arch/riscv/kernel/sbi-ipi.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/riscv/kernel/smp.c",
      "insertions": 10,
      "deletions": 1
    },
    {
      "file": "drivers/clocksource/timer-clint.c",
      "insertions": 1,
      "deletions": 1
    }
  ],
  "total_insertions": 28,
  "total_deletions": 5,
  "total_changes": 33,
  "parents": [
    "832f15f42646812b096bc67c0eac439291a0db1f"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "inject"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/riscv/include/asm/smp.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/riscv/kernel/sbi-ipi.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/riscv/kernel/smp.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/clocksource/timer-clint.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}