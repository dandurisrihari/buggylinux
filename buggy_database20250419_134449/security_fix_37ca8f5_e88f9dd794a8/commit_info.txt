Commit Hash: 37ca8f5c6041516aac603a5abb89b05675493802
Subject: nfs: authenticated deep mounting


Security Keywords:
- authentication

Full commit message:
nfs: authenticated deep mounting

Allow mount to do authenticated mounts below the root of the exported tree.
The wording in RFC 2623, sec 2.3.2. allows fsinfo with UNIX authentication
on the root of the export. Mounts are not always done on the root
of the exported tree. Especially autoumounts often mount below the root of
the exported tree.
Some server implementations (justly) require full authentication for the
so-called deep mounts. The old code used AUTH_SYS only. This caused deep
mounts to fail on systems requiring stronger authentication..
The client should try both authentication types and use the first one that
succeeds.
This method was already partially implemented. This patch completes
the implementation for NFS2 and NFS3.
This patch was developed to allow Debian systems to automount home directories
on Solaris servers with krb5 authentication.

Tested on kernel 2.6.24-etchnhalf.1

Signed-off-by: E.G. Keizer <keie@few.vu.nl>
Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

Metadata:
Author: EG Keizer <keie@few.vu.nl>
Author Date: Tue Aug 19 16:34:36 2008 -0400
Committer: Trond Myklebust <Trond.Myklebust@netapp.com>
Commit Date: Tue Oct 7 18:16:22 2008 -0400

Files Changed: 2
Lines Added: 26
Lines Removed: 4
Total Changes: 30
