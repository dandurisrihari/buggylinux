Commit Hash: a58ce43f2fb17b728395ff530f019ca53c80145f
Subject: mac80211: avoid spurious deauth frames/messages


Security Keywords:
- authentication

Full commit message:
mac80211: avoid spurious deauth frames/messages

With WEXT, it happens frequently that the SME
requests an authentication but then deauthenticates
right away because some new parameters came along.
Every time this happens we print a deauth message
and send a deauth frame, but both of that is rather
confusing. Avoid it by aborting the authentication
process silently, and telling cfg80211 about that.

The patch looks larger than it really is:
__cfg80211_auth_remove() is split out from
cfg80211_send_auth_timeout(), there's no new code
except __cfg80211_auth_canceled() (a one-liner) and
the mac80211 bits (7 new lines of code).

Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
Signed-off-by: John W. Linville <linville@tuxdriver.com>

Metadata:
Author: Johannes Berg <johannes@sipsolutions.net>
Author Date: Thu Nov 19 12:45:42 2009 +0100
Committer: John W. Linville <linville@tuxdriver.com>
Commit Date: Thu Nov 19 11:09:02 2009 -0500

Files Changed: 3
Lines Added: 54
Lines Removed: 11
Total Changes: 65
