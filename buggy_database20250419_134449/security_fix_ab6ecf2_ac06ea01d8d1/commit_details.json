{
  "hash": "ab6ecf247a9321e3180e021a6a60164dee53ab2e",
  "hash_short": "ab6ecf24",
  "subject": "mm: /proc/pid/pagemap: hide swap entries from unprivileged users",
  "body": "In commit ab676b7d6fbf (\"pagemap: do not leak physical addresses to\nnon-privileged userspace\"), the /proc/PID/pagemap is restricted to be\nreadable only by CAP_SYS_ADMIN to address some security issue.\n\nIn commit 1c90308e7a77 (\"pagemap: hide physical addresses from\nnon-privileged users\"), the restriction is relieved to make\n/proc/PID/pagemap readable, but hide the physical addresses for\nnon-privileged users.\n\nBut the swap entries are readable for non-privileged users too.  This\nhas some security issues.  For example, for page under migrating, the\nswap entry has physical address information.  So, in this patch, the\nswap entries are hided for non-privileged users too.\n\nLink: http://lkml.kernel.org/r/20180508012745.7238-1-ying.huang@intel.com\nFixes: 1c90308e7a77 (\"pagemap: hide physical addresses from non-privileged users\")\nSigned-off-by: \"Huang, Ying\" <ying.huang@intel.com>\nSuggested-by: Kirill A. Shutemov <kirill.shutemov@linux.intel.com>\nReviewed-by: Naoya Horiguchi <n-horiguchi@ah.jp.nec.com>\nReviewed-by: Konstantin Khlebnikov <khlebnikov@yandex-team.ru>\nAcked-by: Michal Hocko <mhocko@suse.com>\nCc: Konstantin Khlebnikov <khlebnikov@yandex-team.ru>\nCc: Andrei Vagin <avagin@openvz.org>\nCc: Jerome Glisse <jglisse@redhat.com>\nCc: Daniel Colascione <dancol@google.com>\nCc: Zi Yan <zi.yan@cs.rutgers.edu>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\nSigned-off-by: Linus Torvalds <torvalds@linux-foundation.org>",
  "full_message": "mm: /proc/pid/pagemap: hide swap entries from unprivileged users\n\nIn commit ab676b7d6fbf (\"pagemap: do not leak physical addresses to\nnon-privileged userspace\"), the /proc/PID/pagemap is restricted to be\nreadable only by CAP_SYS_ADMIN to address some security issue.\n\nIn commit 1c90308e7a77 (\"pagemap: hide physical addresses from\nnon-privileged users\"), the restriction is relieved to make\n/proc/PID/pagemap readable, but hide the physical addresses for\nnon-privileged users.\n\nBut the swap entries are readable for non-privileged users too.  This\nhas some security issues.  For example, for page under migrating, the\nswap entry has physical address information.  So, in this patch, the\nswap entries are hided for non-privileged users too.\n\nLink: http://lkml.kernel.org/r/20180508012745.7238-1-ying.huang@intel.com\nFixes: 1c90308e7a77 (\"pagemap: hide physical addresses from non-privileged users\")\nSigned-off-by: \"Huang, Ying\" <ying.huang@intel.com>\nSuggested-by: Kirill A. Shutemov <kirill.shutemov@linux.intel.com>\nReviewed-by: Naoya Horiguchi <n-horiguchi@ah.jp.nec.com>\nReviewed-by: Konstantin Khlebnikov <khlebnikov@yandex-team.ru>\nAcked-by: Michal Hocko <mhocko@suse.com>\nCc: Konstantin Khlebnikov <khlebnikov@yandex-team.ru>\nCc: Andrei Vagin <avagin@openvz.org>\nCc: Jerome Glisse <jglisse@redhat.com>\nCc: Daniel Colascione <dancol@google.com>\nCc: Zi Yan <zi.yan@cs.rutgers.edu>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\nSigned-off-by: Linus Torvalds <torvalds@linux-foundation.org>",
  "author_name": "Huang Ying",
  "author_email": "ying.huang@intel.com",
  "author_date": "Thu Jun 7 17:07:39 2018 -0700",
  "author_date_iso": "2018-06-07T17:07:39-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Thu Jun 7 17:34:36 2018 -0700",
  "committer_date_iso": "2018-06-07T17:34:36-07:00",
  "files_changed": [
    "fs/proc/task_mmu.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "fs/proc/task_mmu.c",
      "insertions": 16,
      "deletions": 10
    }
  ],
  "total_insertions": 16,
  "total_deletions": 10,
  "total_changes": 26,
  "parents": [
    "25cf23d7a95716fc6eb165208b5eb2e3b2e86f82"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.18",
    "v4.18-rc1",
    "v4.18-rc2",
    "v4.18-rc3",
    "v4.18-rc4",
    "v4.18-rc5",
    "v4.18-rc6",
    "v4.18-rc7",
    "v4.18-rc8",
    "v4.19"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "security issue"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "fs/proc/task_mmu.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}