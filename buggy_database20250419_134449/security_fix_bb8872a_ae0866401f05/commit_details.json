{
  "hash": "bb8872a1e6bc911869a729240781076ed950764b",
  "hash_short": "bb8872a1",
  "subject": "tipc: fix using smp_processor_id() in preemptible",
  "body": "The 'this_cpu_ptr()' is used to obtain the AEAD key' TFM on the current\nCPU for encryption, however the execution can be preemptible since it's\nactually user-space context, so the 'using smp_processor_id() in\npreemptible' has been observed.\n\nWe fix the issue by using the 'get/put_cpu_ptr()' API which consists of\na 'preempt_disable()' instead.\n\nFixes: fc1b6d6de220 (\"tipc: introduce TIPC encryption & authentication\")\nAcked-by: Jon Maloy <jmaloy@redhat.com>\nSigned-off-by: Tuong Lien <tuong.t.lien@dektech.com.au>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "full_message": "tipc: fix using smp_processor_id() in preemptible\n\nThe 'this_cpu_ptr()' is used to obtain the AEAD key' TFM on the current\nCPU for encryption, however the execution can be preemptible since it's\nactually user-space context, so the 'using smp_processor_id() in\npreemptible' has been observed.\n\nWe fix the issue by using the 'get/put_cpu_ptr()' API which consists of\na 'preempt_disable()' instead.\n\nFixes: fc1b6d6de220 (\"tipc: introduce TIPC encryption & authentication\")\nAcked-by: Jon Maloy <jmaloy@redhat.com>\nSigned-off-by: Tuong Lien <tuong.t.lien@dektech.com.au>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "author_name": "Tuong Lien",
  "author_email": "tuong.t.lien@dektech.com.au",
  "author_date": "Sun Aug 30 02:37:55 2020 +0700",
  "author_date_iso": "2020-08-30T02:37:55+07:00",
  "committer_name": "David S. Miller",
  "committer_email": "davem@davemloft.net",
  "committer_date": "Sun Aug 30 19:12:17 2020 -0700",
  "committer_date_iso": "2020-08-30T19:12:17-07:00",
  "files_changed": [
    "net/tipc/crypto.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "net/tipc/crypto.c",
      "insertions": 9,
      "deletions": 3
    }
  ],
  "total_insertions": 9,
  "total_deletions": 3,
  "total_changes": 12,
  "parents": [
    "c8146fe292a726d71e302719df90b53e2f84f7a5"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "net/tipc/crypto.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}