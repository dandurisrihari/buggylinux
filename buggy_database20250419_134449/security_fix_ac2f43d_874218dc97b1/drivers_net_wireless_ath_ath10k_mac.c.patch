commit ac2f43d3d34e52b0d388b4c573ff6bbac90235b9
Author: Justin Stitt <justinstitt@google.com>
Date:   Wed Oct 25 20:47:56 2023 +0300

    wifi: ath10k: replace deprecated strncpy with memcpy
    
    strncpy() is deprecated [1] and we should prefer less ambiguous
    interfaces.
    
    In this case, arvif->u.ap.ssid has its length maintained by
    arvif->u.ap.ssid_len which indicates it may not need to be
    NUL-terminated. Make this explicit with __nonstring and use a plain old
    memcpy.
    
    This is also consistent with future copies into arvif->u.ap.ssid:
    
            if (changed & BSS_CHANGED_SSID &&
                vif->type == NL80211_IFTYPE_AP) {
                    arvif->u.ap.ssid_len = vif->cfg.ssid_len;
                    if (vif->cfg.ssid_len)
                            memcpy(arvif->u.ap.ssid, vif->cfg.ssid,
                                   vif->cfg.ssid_len);
                    arvif->u.ap.hidden_ssid = info->hidden_ssid;
            }
    
    Link: https://www.kernel.org/doc/html/latest/process/deprecated.html#strncpy-on-nul-terminated-strings [1]
    Link: https://github.com/KSPP/linux/issues/90
    Cc: linux-hardening@vger.kernel.org
    Signed-off-by: Justin Stitt <justinstitt@google.com>
    Acked-by: Jeff Johnson <quic_jjohnson@quicinc.com>
    Signed-off-by: Kalle Valo <quic_kvalo@quicinc.com>
    Link: https://lore.kernel.org/r/20231024-strncpy-drivers-net-wireless-ath-ath10k-mac-c-v2-1-4c1f4cd4b4df@google.com

diff --git a/drivers/net/wireless/ath/ath10k/mac.c b/drivers/net/wireless/ath/ath10k/mac.c
index 2cf693f3fea9..e18427f72492 100644
--- a/drivers/net/wireless/ath/ath10k/mac.c
+++ b/drivers/net/wireless/ath/ath10k/mac.c
@@ -6121,9 +6121,8 @@ static void ath10k_bss_info_changed(struct ieee80211_hw *hw,
 
 		if (ieee80211_vif_is_mesh(vif)) {
 			/* mesh doesn't use SSID but firmware needs it */
-			strncpy(arvif->u.ap.ssid, "mesh",
-				sizeof(arvif->u.ap.ssid));
 			arvif->u.ap.ssid_len = 4;
+			memcpy(arvif->u.ap.ssid, "mesh", arvif->u.ap.ssid_len);
 		}
 	}