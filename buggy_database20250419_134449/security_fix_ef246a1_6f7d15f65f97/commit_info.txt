Commit Hash: ef246a1480cc484cd2aeda75737cb0848616ddf3
Subject: wifi: mac80211: support antenna control in injection


Security Keywords:
- injection

Full commit message:
wifi: mac80211: support antenna control in injection

Support antenna control for injection by parsing the antenna
radiotap field (which may be presented multiple times) and
telling the driver about the resulting antenna bitmap. Of
course there's no guarantee the driver will actually honour
this, just like any other injection control.

If misconfigured, i.e. the injected HT/VHT MCS needs more
chains than antennas are configured, the bitmap is reset to
zero, indicating no selection.

For now this is only set up for two anntenas so we keep more
free bits, but that can be trivially extended if any driver
implements support for it that can deal with hardware with
more antennas.

Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Gregory Greenman <gregory.greenman@intel.com>
Link: https://lore.kernel.org/r/20230920211508.f71001aa4da9.I00ccb762a806ea62bc3d728fa3a0d29f4f285eeb@changeid
Signed-off-by: Johannes Berg <johannes.berg@intel.com>

Metadata:
Author: Johannes Berg <johannes.berg@intel.com>
Author Date: Wed Sep 20 21:25:26 2023 +0300
Committer: Johannes Berg <johannes.berg@intel.com>
Commit Date: Mon Sep 25 09:12:34 2023 +0200

Files Changed: 3
Lines Added: 21
Lines Removed: 1
Total Changes: 22
