{
  "hash": "d59d51f088014f25c2562de59b9abff4f42a7468",
  "hash_short": "d59d51f0",
  "subject": "KVM: VMX: remove I/O port 0x80 bypass on Intel hosts",
  "body": "This fixes CVE-2017-1000407.\n\nKVM allows guests to directly access I/O port 0x80 on Intel hosts.  If\nthe guest floods this port with writes it generates exceptions and\ninstability in the host kernel, leading to a crash.  With this change\nguest writes to port 0x80 on Intel will behave the same as they\ncurrently behave on AMD systems.\n\nPrevent the flooding by removing the code that sets port 0x80 as a\npassthrough port.  This is essentially the same as upstream patch\n99f85a28a78e96d28907fe036e1671a218fee597, except that patch was\nfor AMD chipsets and this patch is for Intel.\n\nSigned-off-by: Andrew Honig <ahonig@google.com>\nSigned-off-by: Jim Mattson <jmattson@google.com>\nFixes: fdef3ad1b386 (\"KVM: VMX: Enable io bitmaps to avoid IO port 0x80 VMEXITs\")\nCc: <stable@vger.kernel.org>\nSigned-off-by: Radim Kr\u010dm\u00e1\u0159 <rkrcmar@redhat.com>",
  "full_message": "KVM: VMX: remove I/O port 0x80 bypass on Intel hosts\n\nThis fixes CVE-2017-1000407.\n\nKVM allows guests to directly access I/O port 0x80 on Intel hosts.  If\nthe guest floods this port with writes it generates exceptions and\ninstability in the host kernel, leading to a crash.  With this change\nguest writes to port 0x80 on Intel will behave the same as they\ncurrently behave on AMD systems.\n\nPrevent the flooding by removing the code that sets port 0x80 as a\npassthrough port.  This is essentially the same as upstream patch\n99f85a28a78e96d28907fe036e1671a218fee597, except that patch was\nfor AMD chipsets and this patch is for Intel.\n\nSigned-off-by: Andrew Honig <ahonig@google.com>\nSigned-off-by: Jim Mattson <jmattson@google.com>\nFixes: fdef3ad1b386 (\"KVM: VMX: Enable io bitmaps to avoid IO port 0x80 VMEXITs\")\nCc: <stable@vger.kernel.org>\nSigned-off-by: Radim Kr\u010dm\u00e1\u0159 <rkrcmar@redhat.com>",
  "author_name": "Andrew Honig",
  "author_email": "ahonig@google.com",
  "author_date": "Fri Dec 1 10:21:09 2017 -0800",
  "author_date_iso": "2017-12-01T10:21:09-08:00",
  "committer_name": "Radim Kr\u010dm\u00e1\u0159",
  "committer_email": "rkrcmar@redhat.com",
  "committer_date": "Tue Dec 5 22:32:51 2017 +0100",
  "committer_date_iso": "2017-12-05T22:32:51+01:00",
  "files_changed": [
    "arch/x86/kvm/vmx.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "arch/x86/kvm/vmx.c",
      "insertions": 0,
      "deletions": 5
    }
  ],
  "total_insertions": 0,
  "total_deletions": 5,
  "total_changes": 5,
  "parents": [
    "6ab0b9feb82a7ac09956e6761fec73cd47789df5"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.15",
    "v4.15-rc3",
    "v4.15-rc4",
    "v4.15-rc5",
    "v4.15-rc6",
    "v4.15-rc7",
    "v4.15-rc8",
    "v4.15-rc9",
    "v4.16",
    "v4.16-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [
      "CVE-2017-1000407"
    ],
    "security_keywords": [
      "bypass"
    ]
  },
  "fix_type": "cve",
  "file_results": [
    {
      "file": "arch/x86/kvm/vmx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}