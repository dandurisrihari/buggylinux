Commit Hash: 51aa01d13d4a64422cf8095205fc4a02322aca2c
Subject: KVM: VMX: Split up vmx_complete_interrupts()


Security Keywords:
- injection

Full commit message:
KVM: VMX: Split up vmx_complete_interrupts()

vmx_complete_interrupts() does too much, split it up:
 - vmx_vcpu_run() gets the "cache important vmcs fields" part
 - a new vmx_complete_atomic_exit() gets the parts that must be done atomically
 - a new vmx_recover_nmi_blocking() does what its name says
 - vmx_complete_interrupts() retains the event injection recovery code

This helps in reducing the work done in atomic context.

Signed-off-by: Avi Kivity <avi@redhat.com>

Metadata:
Author: Avi Kivity <avi@redhat.com>
Author Date: Tue Jul 20 14:31:20 2010 +0300
Committer: Avi Kivity <avi@redhat.com>
Commit Date: Sun Oct 24 10:52:51 2010 +0200

Files Changed: 1
Lines Added: 27
Lines Removed: 12
Total Changes: 39
