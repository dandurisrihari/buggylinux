diff --cc arch/arm64/Kconfig.platforms
index c5f6a57f16b8,d4faca775d9c..70498a033cf5
--- a/arch/arm64/Kconfig.platforms
+++ b/arch/arm64/Kconfig.platforms
@@@ -151,11 -145,7 +151,11 @@@ config ARCH_MVEB
  config ARCH_MXC
  	bool "ARMv8 based NXP i.MX SoC family"
  	select ARM64_ERRATUM_843419
- 	select ARM64_ERRATUM_845719
+ 	select ARM64_ERRATUM_845719 if COMPAT
 +	select IMX_GPCV2
 +	select IMX_GPCV2_PM_DOMAINS
 +	select PM
 +	select PM_GENERIC_DOMAINS
  	help
  	  This enables support for the ARMv8 based SoCs in the
  	  NXP i.MX family.
diff --cc arch/arm64/include/asm/daifflags.h
index fa90779fc752,1dd3d7a38d34..db452aa9e651
--- a/arch/arm64/include/asm/daifflags.h
+++ b/arch/arm64/include/asm/daifflags.h
@@@ -18,9 -18,10 +18,11 @@@
  
  #include <linux/irqflags.h>
  
+ #include <asm/cpufeature.h>
+ 
  #define DAIF_PROCCTX		0
  #define DAIF_PROCCTX_NOIRQ	PSR_I_BIT
 +#define DAIF_ERRCTX		(PSR_I_BIT | PSR_A_BIT)
  
  /* mask/save/unmask/restore all exceptions, including interrupts. */
  static inline void local_daif_mask(void)
diff --cc arch/arm64/kvm/hyp/switch.c
index 421ebf6f7086,6a4c2d6c3287..3563fe655cd5
--- a/arch/arm64/kvm/hyp/switch.c
+++ b/arch/arm64/kvm/hyp/switch.c
@@@ -22,8 -22,8 +22,9 @@@
  
  #include <kvm/arm_psci.h>
  
+ #include <asm/arch_gicv3.h>
  #include <asm/cpufeature.h>
 +#include <asm/kprobes.h>
  #include <asm/kvm_asm.h>
  #include <asm/kvm_emulate.h>
  #include <asm/kvm_host.h>