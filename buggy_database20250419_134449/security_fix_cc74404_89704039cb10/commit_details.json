{
  "hash": "cc744042d90809ccb7cac7f9fb773f5c9cb9f835",
  "hash_short": "cc744042",
  "subject": "Merge tag 'kvmarm-6.5' of git://git.kernel.org/pub/scm/linux/kernel/git/kvmarm/kvmarm into HEAD",
  "body": "KVM/arm64 updates for 6.5\n\n - Eager page splitting optimization for dirty logging, optionally\n   allowing for a VM to avoid the cost of block splitting in the stage-2\n   fault path.\n\n - Arm FF-A proxy for pKVM, allowing a pKVM host to safely interact with\n   services that live in the Secure world. pKVM intervenes on FF-A calls\n   to guarantee the host doesn't misuse memory donated to the hyp or a\n   pKVM guest.\n\n - Support for running the split hypervisor with VHE enabled, known as\n   'hVHE' mode. This is extremely useful for testing the split\n   hypervisor on VHE-only systems, and paves the way for new use cases\n   that depend on having two TTBRs available at EL2.\n\n - Generalized framework for configurable ID registers from userspace.\n   KVM/arm64 currently prevents arbitrary CPU feature set configuration\n   from userspace, but the intent is to relax this limitation and allow\n   userspace to select a feature set consistent with the CPU.\n\n - Enable the use of Branch Target Identification (FEAT_BTI) in the\n   hypervisor.\n\n - Use a separate set of pointer authentication keys for the hypervisor\n   when running in protected mode, as the host is untrusted at runtime.\n\n - Ensure timer IRQs are consistently released in the init failure\n   paths.\n\n - Avoid trapping CTR_EL0 on systems with Enhanced Virtualization Traps\n   (FEAT_EVT), as it is a register commonly read from userspace.\n\n - Erratum workaround for the upcoming AmpereOne part, which has broken\n   hardware A/D state management.\n\nAs a consequence of the hVHE series reworking the arm64 software\nfeatures framework, the for-next/module-alloc branch from the arm64 tree\ncomes along for the ride.",
  "full_message": "Merge tag 'kvmarm-6.5' of git://git.kernel.org/pub/scm/linux/kernel/git/kvmarm/kvmarm into HEAD\n\nKVM/arm64 updates for 6.5\n\n - Eager page splitting optimization for dirty logging, optionally\n   allowing for a VM to avoid the cost of block splitting in the stage-2\n   fault path.\n\n - Arm FF-A proxy for pKVM, allowing a pKVM host to safely interact with\n   services that live in the Secure world. pKVM intervenes on FF-A calls\n   to guarantee the host doesn't misuse memory donated to the hyp or a\n   pKVM guest.\n\n - Support for running the split hypervisor with VHE enabled, known as\n   'hVHE' mode. This is extremely useful for testing the split\n   hypervisor on VHE-only systems, and paves the way for new use cases\n   that depend on having two TTBRs available at EL2.\n\n - Generalized framework for configurable ID registers from userspace.\n   KVM/arm64 currently prevents arbitrary CPU feature set configuration\n   from userspace, but the intent is to relax this limitation and allow\n   userspace to select a feature set consistent with the CPU.\n\n - Enable the use of Branch Target Identification (FEAT_BTI) in the\n   hypervisor.\n\n - Use a separate set of pointer authentication keys for the hypervisor\n   when running in protected mode, as the host is untrusted at runtime.\n\n - Ensure timer IRQs are consistently released in the init failure\n   paths.\n\n - Avoid trapping CTR_EL0 on systems with Enhanced Virtualization Traps\n   (FEAT_EVT), as it is a register commonly read from userspace.\n\n - Erratum workaround for the upcoming AmpereOne part, which has broken\n   hardware A/D state management.\n\nAs a consequence of the hVHE series reworking the arm64 software\nfeatures framework, the for-next/module-alloc branch from the arm64 tree\ncomes along for the ride.",
  "author_name": "Paolo Bonzini",
  "author_email": "pbonzini@redhat.com",
  "author_date": "Sat Jul 1 07:04:29 2023 -0400",
  "author_date_iso": "2023-07-01T07:04:29-04:00",
  "committer_name": "Paolo Bonzini",
  "committer_email": "pbonzini@redhat.com",
  "committer_date": "Sat Jul 1 07:04:29 2023 -0400",
  "committer_date_iso": "2023-07-01T07:04:29-04:00",
  "files_changed": [
    "arch/arm64/Kconfig",
    "arch/arm64/include/asm/kvm_host.h",
    "arch/arm64/include/asm/kvm_pgtable.h",
    "arch/arm64/include/asm/sysreg.h",
    "arch/arm64/kvm/hyp/include/hyp/switch.h",
    "arch/arm64/kvm/hyp/nvhe/mem_protect.c",
    "arch/arm64/kvm/hyp/nvhe/switch.c",
    "arch/arm64/kvm/hyp/pgtable.c",
    "arch/arm64/kvm/hyp/vhe/switch.c",
    "arch/arm64/kvm/sys_regs.c",
    "include/linux/arm_ffa.h",
    "include/uapi/linux/kvm.h",
    "virt/kvm/kvm_main.c"
  ],
  "files_changed_count": 13,
  "stats": [
    {
      "file": "Documentation/arm64/memory.rst",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "Documentation/arm64/silicon-errata.rst",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "Documentation/virt/kvm/api.rst",
      "insertions": 27,
      "deletions": 0
    },
    {
      "file": "arch/arm64/Kconfig",
      "insertions": 22,
      "deletions": 25
    },
    {
      "file": "arch/arm64/include/asm/cpufeature.h",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/el2_setup.h",
      "insertions": 24,
      "deletions": 3
    },
    {
      "file": "arch/arm64/include/asm/kvm_arm.h",
      "insertions": 3,
      "deletions": 4
    },
    {
      "file": "arch/arm64/include/asm/kvm_asm.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/kvm_emulate.h",
      "insertions": 39,
      "deletions": 7
    },
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "insertions": 41,
      "deletions": 20
    },
    {
      "file": "arch/arm64/include/asm/kvm_hyp.h",
      "insertions": 28,
      "deletions": 9
    },
    {
      "file": "arch/arm64/include/asm/kvm_mmu.h",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "arch/arm64/include/asm/kvm_pgtable.h",
      "insertions": 75,
      "deletions": 4
    },
    {
      "file": "arch/arm64/include/asm/kvm_pkvm.h",
      "insertions": 21,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/memory.h",
      "insertions": 9,
      "deletions": 7
    },
    {
      "file": "arch/arm64/include/asm/module.h",
      "insertions": 0,
      "deletions": 8
    },
    {
      "file": "arch/arm64/include/asm/module.lds.h",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "arch/arm64/include/asm/sysreg.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/virt.h",
      "insertions": 11,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kernel/Makefile",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "arch/arm64/kernel/cpu_errata.c",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kernel/cpufeature.c",
      "insertions": 33,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kernel/ftrace.c",
      "insertions": 3,
      "deletions": 5
    },
    {
      "file": "arch/arm64/kernel/head.S",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kernel/hyp-stub.S",
      "insertions": 9,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kernel/idreg-override.c",
      "insertions": 16,
      "deletions": 9
    },
    {
      "file": "arch/arm64/kernel/kaslr.c",
      "insertions": 16,
      "deletions": 71
    },
    {
      "file": "arch/arm64/kernel/module.c",
      "insertions": 119,
      "deletions": 40
    },
    {
      "file": "arch/arm64/kernel/setup.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/arch_timer.c",
      "insertions": 9,
      "deletions": 5
    },
    {
      "file": "arch/arm64/kvm/arm.c",
      "insertions": 150,
      "deletions": 51
    },
    {
      "file": "arch/arm64/kvm/fpsimd.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/arm64/kvm/hyp/include/hyp/switch.h",
      "insertions": 82,
      "deletions": 19
    },
    {
      "file": "arch/arm64/kvm/hyp/include/nvhe/ffa.h",
      "insertions": 17,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/include/nvhe/mem_protect.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/Makefile",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/ffa.c",
      "insertions": 762,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/host.S",
      "insertions": 35,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/hyp-init.S",
      "insertions": 29,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/hyp-main.c",
      "insertions": 18,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/mem_protect.c",
      "insertions": 71,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/pkvm.c",
      "insertions": 21,
      "deletions": 6
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/setup.c",
      "insertions": 11,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/switch.c",
      "insertions": 16,
      "deletions": 12
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/timer-sr.c",
      "insertions": 12,
      "deletions": 4
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/tlb.c",
      "insertions": 52,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/pgtable.c",
      "insertions": 207,
      "deletions": 21
    },
    {
      "file": "arch/arm64/kvm/hyp/vhe/switch.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/hyp/vhe/tlb.c",
      "insertions": 32,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/mmu.c",
      "insertions": 173,
      "deletions": 34
    },
    {
      "file": "arch/arm64/kvm/pkvm.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/reset.c",
      "insertions": 0,
      "deletions": 58
    },
    {
      "file": "arch/arm64/kvm/sys_regs.c",
      "insertions": 353,
      "deletions": 152
    },
    {
      "file": "arch/arm64/kvm/sys_regs.h",
      "insertions": 17,
      "deletions": 5
    },
    {
      "file": "arch/arm64/mm/kasan_init.c",
      "insertions": 4,
      "deletions": 13
    },
    {
      "file": "arch/arm64/tools/cpucaps",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "include/kvm/arm_pmu.h",
      "insertions": 6,
      "deletions": 2
    },
    {
      "file": "include/linux/arm_ffa.h",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "include/linux/kvm_host.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "include/uapi/linux/kvm.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "virt/kvm/kvm_main.c",
      "insertions": 2,
      "deletions": 1
    }
  ],
  "total_insertions": 2631,
  "total_deletions": 619,
  "total_changes": 3250,
  "parents": [
    "b5396271eab4ec28f0d27ff48e1b151b7b824295",
    "192df2aa0113ddddee2a93e453ff46610807b425"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/arm64/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/hyp/include/hyp/switch.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/asm/kvm_pgtable.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/switch.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/hyp/pgtable.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/asm/sysreg.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/hyp/vhe/switch.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/mem_protect.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/sys_regs.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/arm_ffa.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/uapi/linux/kvm.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/kvm_main.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}