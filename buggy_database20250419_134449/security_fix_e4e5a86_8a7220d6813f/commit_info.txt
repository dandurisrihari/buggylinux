Commit Hash: e4e5a865e9a9e8e47ac1959b629e9f3ae3b062f2
Subject: KVM: arm/arm64: Fix emulated ptimer irq injection


Security Keywords:
- injection

Full commit message:
KVM: arm/arm64: Fix emulated ptimer irq injection

The emulated ptimer needs to track the level changes, otherwise the
the interrupt will never get deasserted, resulting in the guest getting
stuck in an interrupt storm if it enables ptimer interrupts. This was
found with kvm-unit-tests; the ptimer tests hung as soon as interrupts
were enabled. Typical Linux guests don't have a problem as they prefer
using the virtual timer.

Fixes: bee038a674875 ("KVM: arm/arm64: Rework the timer code to use a timer_map")
Signed-off-by: Andrew Jones <drjones@redhat.com>
[Simplified the patch to res we only care about emulated timers here]
Signed-off-by: Marc Zyngier <marc.zyngier@arm.com>

Metadata:
Author: Andrew Jones <drjones@redhat.com>
Author Date: Mon May 27 13:46:19 2019 +0200
Committer: Marc Zyngier <marc.zyngier@arm.com>
Commit Date: Wed Jun 19 15:47:52 2019 +0100

Files Changed: 1
Lines Added: 3
Lines Removed: 2
Total Changes: 5
