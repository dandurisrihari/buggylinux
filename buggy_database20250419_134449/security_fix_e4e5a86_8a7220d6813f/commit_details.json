{
  "hash": "e4e5a865e9a9e8e47ac1959b629e9f3ae3b062f2",
  "hash_short": "e4e5a865",
  "subject": "KVM: arm/arm64: Fix emulated ptimer irq injection",
  "body": "The emulated ptimer needs to track the level changes, otherwise the\nthe interrupt will never get deasserted, resulting in the guest getting\nstuck in an interrupt storm if it enables ptimer interrupts. This was\nfound with kvm-unit-tests; the ptimer tests hung as soon as interrupts\nwere enabled. Typical Linux guests don't have a problem as they prefer\nusing the virtual timer.\n\nFixes: bee038a674875 (\"KVM: arm/arm64: Rework the timer code to use a timer_map\")\nSigned-off-by: Andrew Jones <drjones@redhat.com>\n[Simplified the patch to res we only care about emulated timers here]\nSigned-off-by: Marc Zyngier <marc.zyngier@arm.com>",
  "full_message": "KVM: arm/arm64: Fix emulated ptimer irq injection\n\nThe emulated ptimer needs to track the level changes, otherwise the\nthe interrupt will never get deasserted, resulting in the guest getting\nstuck in an interrupt storm if it enables ptimer interrupts. This was\nfound with kvm-unit-tests; the ptimer tests hung as soon as interrupts\nwere enabled. Typical Linux guests don't have a problem as they prefer\nusing the virtual timer.\n\nFixes: bee038a674875 (\"KVM: arm/arm64: Rework the timer code to use a timer_map\")\nSigned-off-by: Andrew Jones <drjones@redhat.com>\n[Simplified the patch to res we only care about emulated timers here]\nSigned-off-by: Marc Zyngier <marc.zyngier@arm.com>",
  "author_name": "Andrew Jones",
  "author_email": "drjones@redhat.com",
  "author_date": "Mon May 27 13:46:19 2019 +0200",
  "author_date_iso": "2019-05-27T13:46:19+02:00",
  "committer_name": "Marc Zyngier",
  "committer_email": "marc.zyngier@arm.com",
  "committer_date": "Wed Jun 19 15:47:52 2019 +0100",
  "committer_date_iso": "2019-06-19T15:47:52+01:00",
  "files_changed": [
    "virt/kvm/arm/arch_timer.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "virt/kvm/arm/arch_timer.c",
      "insertions": 3,
      "deletions": 2
    }
  ],
  "total_insertions": 3,
  "total_deletions": 2,
  "total_changes": 5,
  "parents": [
    "4729ec8c1e1145234aeeebad5d96d77f4ccbb00a"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.2",
    "v5.2-rc6",
    "v5.2-rc7",
    "v5.3",
    "v5.3-rc1",
    "v5.3-rc2",
    "v5.3-rc3",
    "v5.3-rc4",
    "v5.3-rc5",
    "v5.3-rc6"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "virt/kvm/arm/arch_timer.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}