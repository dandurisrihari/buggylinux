commit 724c299c6a0e412b5679d7ebb9b3f4e00bd2aa78
Author: Marco Elver <elver@google.com>
Date:   Mon Aug 29 14:47:06 2022 +0200

    perf/hw_breakpoint: Add KUnit test for constraints accounting
    
    Add KUnit test for hw_breakpoint constraints accounting, with various
    interesting mixes of breakpoint targets (some care was taken to catch
    interesting corner cases via bug-injection).
    
    The test cannot be built as a module because it requires access to
    hw_breakpoint_slots(), which is not inlinable or exported on all
    architectures.
    
    Signed-off-by: Marco Elver <elver@google.com>
    Signed-off-by: Peter Zijlstra (Intel) <peterz@infradead.org>
    Reviewed-by: Dmitry Vyukov <dvyukov@google.com>
    Acked-by: Ian Rogers <irogers@google.com>
    Link: https://lore.kernel.org/r/20220829124719.675715-2-elver@google.com

diff --git a/kernel/events/Makefile b/kernel/events/Makefile
index 8591c180b52b..91a62f566743 100644
--- a/kernel/events/Makefile
+++ b/kernel/events/Makefile
@@ -2,4 +2,5 @@
 obj-y := core.o ring_buffer.o callchain.o
 
 obj-$(CONFIG_HAVE_HW_BREAKPOINT) += hw_breakpoint.o
+obj-$(CONFIG_HW_BREAKPOINT_KUNIT_TEST) += hw_breakpoint_test.o
 obj-$(CONFIG_UPROBES) += uprobes.o