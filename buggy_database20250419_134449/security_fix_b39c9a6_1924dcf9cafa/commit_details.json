{
  "hash": "b39c9a661b9bc77e064cade26cf913a1d4255d55",
  "hash_short": "b39c9a66",
  "subject": "SCSI: Increase REPORT_LUNS timeout",
  "body": "This patch fixes an issue seen with an IBM 2145 (SVC) where, following an error\ninjection test which results in paths going offline, when they came\nback online, the path would timeout the REPORT_LUNS issued during the\nscan. This timeout situation continued until retries were expired, resulting in\nfalling back to a sequential LUN scan. Then, since the target responds\nwith PQ=1, PDT=0 for all possible LUNs, due to the way the sequential\nLUN scan code works, we end up adding 512 LUNs for each target, when there\nis really only a small handful of LUNs that are actually present.\n\nThis patch increases the timeout used on the REPORT_LUNS to 30 seconds.\nThis patch solves the issue of 512 non existent LUNs showing up after\nthis event.\n\nSigned-off-by: Brian King <brking@linux.vnet.ibm.com>\nReviewed-by: Hannes Reinecke <hare@suse.de>\nSigned-off-by: Martin K. Petersen <martin.petersen@oracle.com>",
  "full_message": "SCSI: Increase REPORT_LUNS timeout\n\nThis patch fixes an issue seen with an IBM 2145 (SVC) where, following an error\ninjection test which results in paths going offline, when they came\nback online, the path would timeout the REPORT_LUNS issued during the\nscan. This timeout situation continued until retries were expired, resulting in\nfalling back to a sequential LUN scan. Then, since the target responds\nwith PQ=1, PDT=0 for all possible LUNs, due to the way the sequential\nLUN scan code works, we end up adding 512 LUNs for each target, when there\nis really only a small handful of LUNs that are actually present.\n\nThis patch increases the timeout used on the REPORT_LUNS to 30 seconds.\nThis patch solves the issue of 512 non existent LUNs showing up after\nthis event.\n\nSigned-off-by: Brian King <brking@linux.vnet.ibm.com>\nReviewed-by: Hannes Reinecke <hare@suse.de>\nSigned-off-by: Martin K. Petersen <martin.petersen@oracle.com>",
  "author_name": "Brian King",
  "author_email": "brking@linux.vnet.ibm.com",
  "author_date": "Fri Sep 4 14:47:06 2015 -0500",
  "author_date_iso": "2015-09-04T14:47:06-05:00",
  "committer_name": "Martin K. Petersen",
  "committer_email": "martin.petersen@oracle.com",
  "committer_date": "Mon Nov 2 23:30:05 2015 -0500",
  "committer_date_iso": "2015-11-02T23:30:05-05:00",
  "files_changed": [
    "drivers/scsi/scsi_scan.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/scsi/scsi_scan.c",
      "insertions": 2,
      "deletions": 1
    }
  ],
  "total_insertions": 2,
  "total_deletions": 1,
  "total_changes": 3,
  "parents": [
    "c8051156d1d3dd99d02e0bf5b127fc8d32f30f69"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/scsi/scsi_scan.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}