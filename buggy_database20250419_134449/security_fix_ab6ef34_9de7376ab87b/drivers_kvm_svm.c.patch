commit ab6ef34b906546d85d92dbc3e0fb4e01cce05f62
Author: Avi Kivity <avi@qumranet.com>
Date:   Tue Oct 16 16:23:22 2007 +0200

    KVM: Move apic timer interrupt backlog processing to common code
    
    Beside the obvious goodness of making code more common, this prevents
    a livelock with the next patch which moves interrupt injection out of the
    critical section.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

diff --git a/drivers/kvm/svm.c b/drivers/kvm/svm.c
index 7b21576b62bc..ef068d2dddd7 100644
--- a/drivers/kvm/svm.c
+++ b/drivers/kvm/svm.c
@@ -1355,7 +1355,6 @@ static void svm_intr_assist(struct kvm_vcpu *vcpu)
 	struct vmcb *vmcb = svm->vmcb;
 	int intr_vector = -1;
 
-	kvm_inject_pending_timer_irqs(vcpu);
 	if ((vmcb->control.exit_int_info & SVM_EVTINJ_VALID) &&
 	    ((vmcb->control.exit_int_info & SVM_EVTINJ_TYPE_MASK) == 0)) {
 		intr_vector = vmcb->control.exit_int_info &