commit ab6ef34b906546d85d92dbc3e0fb4e01cce05f62
Author: Avi Kivity <avi@qumranet.com>
Date:   Tue Oct 16 16:23:22 2007 +0200

    KVM: Move apic timer interrupt backlog processing to common code
    
    Beside the obvious goodness of making code more common, this prevents
    a livelock with the next patch which moves interrupt injection out of the
    critical section.
    
    Signed-off-by: Avi Kivity <avi@qumranet.com>

diff --git a/drivers/kvm/vmx.c b/drivers/kvm/vmx.c
index 6955580bb69e..9f77ddbeb025 100644
--- a/drivers/kvm/vmx.c
+++ b/drivers/kvm/vmx.c
@@ -2191,7 +2191,6 @@ static void vmx_intr_assist(struct kvm_vcpu *vcpu)
 	int has_ext_irq, interrupt_window_open;
 	int vector;
 
-	kvm_inject_pending_timer_irqs(vcpu);
 	update_tpr_threshold(vcpu);
 
 	has_ext_irq = kvm_cpu_has_interrupt(vcpu);