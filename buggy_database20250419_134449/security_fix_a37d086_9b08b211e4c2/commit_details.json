{
  "hash": "a37d0862d17411edb67677a580a6f505ec2225f6",
  "hash_short": "a37d0862",
  "subject": "Revert \"f2fs: avoid out-of-range memory access\"",
  "body": "As Pavel Machek reported:\n\n\"We normally use -EUCLEAN to signal filesystem corruption. Plus, it is\ngood idea to report it to the syslog and mark filesystem as \"needing\nfsck\" if filesystem can do that.\"\n\nStill we need improve the original patch with:\n- use unlikely keyword\n- add message print\n- return EUCLEAN\n\nHowever, after rethink this patch, I don't think we should add such\ncondition check here as below reasons:\n- We have already checked the field in f2fs_sanity_check_ckpt(),\n- If there is fs corrupt or security vulnerability, there is nothing\nto guarantee the field is integrated after the check, unless we do\nthe check before each of its use, however no filesystem does that.\n- We only have similar check for bitmap, which was added due to there\nis bitmap corruption happened on f2fs' runtime in product.\n- There are so many key fields in SB/CP/NAT did have such check\nafter f2fs_sanity_check_{sb,cp,..}.\n\nSo I propose to revert this unneeded check.\n\nThis reverts commit 56f3ce675103e3fb9e631cfb4131fc768bc23e9a.\n\nSigned-off-by: Chao Yu <yuchao0@huawei.com>\nSigned-off-by: Jaegeuk Kim <jaegeuk@kernel.org>",
  "full_message": "Revert \"f2fs: avoid out-of-range memory access\"\n\nAs Pavel Machek reported:\n\n\"We normally use -EUCLEAN to signal filesystem corruption. Plus, it is\ngood idea to report it to the syslog and mark filesystem as \"needing\nfsck\" if filesystem can do that.\"\n\nStill we need improve the original patch with:\n- use unlikely keyword\n- add message print\n- return EUCLEAN\n\nHowever, after rethink this patch, I don't think we should add such\ncondition check here as below reasons:\n- We have already checked the field in f2fs_sanity_check_ckpt(),\n- If there is fs corrupt or security vulnerability, there is nothing\nto guarantee the field is integrated after the check, unless we do\nthe check before each of its use, however no filesystem does that.\n- We only have similar check for bitmap, which was added due to there\nis bitmap corruption happened on f2fs' runtime in product.\n- There are so many key fields in SB/CP/NAT did have such check\nafter f2fs_sanity_check_{sb,cp,..}.\n\nSo I propose to revert this unneeded check.\n\nThis reverts commit 56f3ce675103e3fb9e631cfb4131fc768bc23e9a.\n\nSigned-off-by: Chao Yu <yuchao0@huawei.com>\nSigned-off-by: Jaegeuk Kim <jaegeuk@kernel.org>",
  "author_name": "Chao Yu",
  "author_email": "yuchao0@huawei.com",
  "author_date": "Fri Aug 2 18:15:48 2019 +0800",
  "author_date_iso": "2019-08-02T18:15:48+08:00",
  "committer_name": "Jaegeuk Kim",
  "committer_email": "jaegeuk@kernel.org",
  "committer_date": "Fri Aug 23 07:57:14 2019 -0700",
  "committer_date_iso": "2019-08-23T07:57:14-07:00",
  "files_changed": [
    "fs/f2fs/segment.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "fs/f2fs/segment.c",
      "insertions": 0,
      "deletions": 5
    }
  ],
  "total_insertions": 0,
  "total_deletions": 5,
  "total_changes": 5,
  "parents": [
    "290c30d4454ccf85de372af499e32e86f5d94188"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.4",
    "v5.4-rc1",
    "v5.4-rc2",
    "v5.4-rc3",
    "v5.4-rc4",
    "v5.4-rc5",
    "v5.4-rc6",
    "v5.4-rc7",
    "v5.4-rc8",
    "v5.5"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "security vulnerability",
      "vulnerability"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "fs/f2fs/segment.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}