Commit Hash: 6d9c153a0b84392406bc77600aa7d3ea365de041
Subject: net: dsa: loop: Do not unregister invalid fixed PHY


Security Keywords:
- injection

Full commit message:
net: dsa: loop: Do not unregister invalid fixed PHY

During error injection it was possible to crash in dsa_loop_exit() because of
an attempt to unregister an invalid PHY. We actually want to the driver probing
in dsa_loop_init() even though fixed_phy_register() may return an error to
exercise how DSA deals with such cases, but we should not be crashing during
driver removal.

Fixes: 98cd1552ea27 ("net: dsa: Mock-up driver")
Signed-off-by: Florian Fainelli <f.fainelli@gmail.com>
Reviewed-by: Andrew Lunn <andrew@lunn.ch>
Signed-off-by: David S. Miller <davem@davemloft.net>

Metadata:
Author: Florian Fainelli <f.fainelli@gmail.com>
Author Date: Sat Sep 2 08:56:45 2017 -0700
Committer: David S. Miller <davem@davemloft.net>
Commit Date: Sun Sep 3 20:18:25 2017 -0700

Files Changed: 1
Lines Added: 1
Lines Removed: 1
Total Changes: 2
