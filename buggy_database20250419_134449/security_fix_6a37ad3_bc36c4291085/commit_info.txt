Commit Hash: 6a37ad3da5d64a632d03a8dc272c65e706cc7160
Subject: net/smc: wait for tx completions before link freeing


Security Keywords:
- exploit

Full commit message:
net/smc: wait for tx completions before link freeing

Make sure all pending work requests are completed before freeing
a link.
Dismiss tx pending slots already when terminating a link group to
exploit termination shortcut in tx completion queue handler.

And kill the completion queue tasklets after destroy of the
completion queues, otherwise there is a time window for another
tasklet schedule of an already killed tasklet.

Signed-off-by: Ursula Braun <ubraun@linux.ibm.com>
Signed-off-by: Karsten Graul <kgraul@linux.ibm.com>
Signed-off-by: David S. Miller <davem@davemloft.net>

Metadata:
Author: Ursula Braun <ubraun@linux.ibm.com>
Author Date: Thu Nov 14 13:02:46 2019 +0100
Committer: David S. Miller <davem@davemloft.net>
Commit Date: Fri Nov 15 12:28:28 2019 -0800

Files Changed: 3
Lines Added: 28
Lines Removed: 3
Total Changes: 31
