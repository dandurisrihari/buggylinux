{
  "hash": "98d2722a85c4ad5f2baf2272cbb0fab67f797b69",
  "hash_short": "98d2722a",
  "subject": "drm/i915/huc: differentiate the 2 steps of the MTL HuC auth flow",
  "body": "Before we add the second step of the MTL HuC auth (via GSC), we need to\nhave the ability to differentiate between them. To do so, the huc\nauthentication check is duplicated for GuC and GSC auth, with\nGSC-enabled binaries being considered fully authenticated only after\nthe GSC auth step.\n\nTo report the difference between the 2 auth steps, a new case is added\nto the HuC getparam. This way, the clear media driver can start\nsubmitting before full auth, as partial auth is enough for those\nworkloads.\n\nv2: fix authentication status check for DG2\n\nv3: add a better comment at the top of the HuC file to explain the\n    different approaches to load and auth (John)\n\nv4: update call to intel_huc_is_authenticated in the pxp code to check\nfor GSC authentication\n\nv5: drop references to meu and esclamation mark in huc_auth print (John)\n\nSigned-off-by: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>\nCc: Alan Previn <alan.previn.teres.alexis@intel.com>\nCc: John Harrison <John.C.Harrison@Intel.com>\nReviewed-by: Alan Previn <alan.previn.teres.alexis@intel.com> #v2\nReviewed-by: John Harrison <John.C.Harrison@Intel.com>\nLink: https://patchwork.freedesktop.org/patch/msgid/20230531235415.1467475-5-daniele.ceraolospurio@intel.com",
  "full_message": "drm/i915/huc: differentiate the 2 steps of the MTL HuC auth flow\n\nBefore we add the second step of the MTL HuC auth (via GSC), we need to\nhave the ability to differentiate between them. To do so, the huc\nauthentication check is duplicated for GuC and GSC auth, with\nGSC-enabled binaries being considered fully authenticated only after\nthe GSC auth step.\n\nTo report the difference between the 2 auth steps, a new case is added\nto the HuC getparam. This way, the clear media driver can start\nsubmitting before full auth, as partial auth is enough for those\nworkloads.\n\nv2: fix authentication status check for DG2\n\nv3: add a better comment at the top of the HuC file to explain the\n    different approaches to load and auth (John)\n\nv4: update call to intel_huc_is_authenticated in the pxp code to check\nfor GSC authentication\n\nv5: drop references to meu and esclamation mark in huc_auth print (John)\n\nSigned-off-by: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>\nCc: Alan Previn <alan.previn.teres.alexis@intel.com>\nCc: John Harrison <John.C.Harrison@Intel.com>\nReviewed-by: Alan Previn <alan.previn.teres.alexis@intel.com> #v2\nReviewed-by: John Harrison <John.C.Harrison@Intel.com>\nLink: https://patchwork.freedesktop.org/patch/msgid/20230531235415.1467475-5-daniele.ceraolospurio@intel.com",
  "author_name": "Daniele Ceraolo Spurio",
  "author_email": "daniele.ceraolospurio@intel.com",
  "author_date": "Wed May 31 16:54:12 2023 -0700",
  "author_date_iso": "2023-05-31T16:54:12-07:00",
  "committer_name": "Daniele Ceraolo Spurio",
  "committer_email": "daniele.ceraolospurio@intel.com",
  "committer_date": "Mon Jun 5 09:53:51 2023 -0700",
  "committer_date_iso": "2023-06-05T09:53:51-07:00",
  "files_changed": [
    "drivers/gpu/drm/i915/gt/uc/intel_huc.c",
    "drivers/gpu/drm/i915/gt/uc/intel_huc.h",
    "drivers/gpu/drm/i915/gt/uc/intel_huc_fw.c",
    "drivers/gpu/drm/i915/i915_reg.h",
    "drivers/gpu/drm/i915/pxp/intel_pxp_gsccs.c",
    "include/uapi/drm/i915_drm.h"
  ],
  "files_changed_count": 6,
  "stats": [
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_huc.c",
      "insertions": 84,
      "deletions": 27
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_huc.h",
      "insertions": 12,
      "deletions": 4
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_huc_fw.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/i915/i915_reg.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/i915/pxp/intel_pxp_gsccs.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "include/uapi/drm/i915_drm.h",
      "insertions": 2,
      "deletions": 1
    }
  ],
  "total_insertions": 104,
  "total_deletions": 35,
  "total_changes": 139,
  "parents": [
    "6a9b6c4580af184f1f8744ade1fe1979e3da05ac"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "auth"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_huc.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/pxp/intel_pxp_gsccs.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/uapi/drm/i915_drm.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/i915_reg.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_huc_fw.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_huc.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}