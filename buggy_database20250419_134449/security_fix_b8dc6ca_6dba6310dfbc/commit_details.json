{
  "hash": "b8dc6ca028d9a39196a3a066b9ef2d4a5eca475d",
  "hash_short": "b8dc6ca0",
  "subject": "drm/amd/display: Force enable 3DLUT DMA check for dcn401 in DML",
  "body": "[WHY]\nCurrently TR0 (trip 0) is not properly budgeting for urgent latency in\nDML2.1. This results in overly aggressive prefetch schedules that are\nvulnerable to request return jitter, resulting in severe underflow at\nthe start of the frame.\n\n[HOW]\nForcing 3DLUT DMA check to enable causes urgent latency to be budgeted\nproperly into the prefetch schedule, avoiding the vulnerability.\n\nReviewed-by: Alvin Lee <alvin.lee2@amd.com>\nSigned-off-by: Dillon Varone <dillon.varone@amd.com>\nSigned-off-by: Wayne Lin <wayne.lin@amd.com>\nTested-by: Daniel Wheeler <daniel.wheeler@amd.com>\nSigned-off-by: Alex Deucher <alexander.deucher@amd.com>",
  "full_message": "drm/amd/display: Force enable 3DLUT DMA check for dcn401 in DML\n\n[WHY]\nCurrently TR0 (trip 0) is not properly budgeting for urgent latency in\nDML2.1. This results in overly aggressive prefetch schedules that are\nvulnerable to request return jitter, resulting in severe underflow at\nthe start of the frame.\n\n[HOW]\nForcing 3DLUT DMA check to enable causes urgent latency to be budgeted\nproperly into the prefetch schedule, avoiding the vulnerability.\n\nReviewed-by: Alvin Lee <alvin.lee2@amd.com>\nSigned-off-by: Dillon Varone <dillon.varone@amd.com>\nSigned-off-by: Wayne Lin <wayne.lin@amd.com>\nTested-by: Daniel Wheeler <daniel.wheeler@amd.com>\nSigned-off-by: Alex Deucher <alexander.deucher@amd.com>",
  "author_name": "Dillon Varone",
  "author_email": "dillon.varone@amd.com",
  "author_date": "Tue Jul 23 15:54:23 2024 -0400",
  "author_date_iso": "2024-07-23T15:54:23-04:00",
  "committer_name": "Alex Deucher",
  "committer_email": "alexander.deucher@amd.com",
  "committer_date": "Tue Aug 6 11:11:02 2024 -0400",
  "committer_date_iso": "2024-08-06T11:11:02-04:00",
  "files_changed": [
    "drivers/gpu/drm/amd/display/dc/dml2/dml21/dml21_translation_helper.c",
    "drivers/gpu/drm/amd/display/dc/dml2/dml2_wrapper.h",
    "drivers/gpu/drm/amd/display/dc/resource/dcn401/dcn401_resource.c"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "drivers/gpu/drm/amd/display/dc/dml2/dml21/dml21_translation_helper.c",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dml2/dml2_wrapper.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/resource/dcn401/dcn401_resource.c",
      "insertions": 1,
      "deletions": 0
    }
  ],
  "total_insertions": 6,
  "total_deletions": 2,
  "total_changes": 8,
  "parents": [
    "51d334d6a49629ea03a2dde562d46846eb7d07a0"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "vulnerability"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpu/drm/amd/display/dc/dml2/dml21/dml21_translation_helper.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dml2/dml2_wrapper.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/resource/dcn401/dcn401_resource.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}