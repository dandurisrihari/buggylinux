{
  "hash": "6072b2c49d23eb69b6dca06ad095d3a9633b2b80",
  "hash_short": "6072b2c4",
  "subject": "kbuild: warn if a different compiler is used for external module builds",
  "body": "It is always safe to use the same compiler for the kernel and external\nmodules, but in reality, some distributions such as Fedora release a\ndifferent version of GCC from the one used for building the kernel.\n\nThere was a long discussion about mixing different compilers [1].\n\nI do not repeat it here, but at least, showing a heads up in that\ncase is better than nothing.\n\nLinus suggested [2]:\n  And a warning might be more palatable even if different compiler\n  version work fine together. Just a heads up on \"it looks like you\n  might be mixing compiler versions\" is a valid note, and isn't\n  necessarily wrong. Even when they work well together, maybe you want\n  to have people at least _aware_ of it.\n\nThis commit shows a warning unless the compiler is exactly the same.\n\n  warning: the compiler differs from the one used to build the kernel\n    The kernel was built by: gcc (GCC) 11.1.1 20210531 (Red Hat 11.1.1-3)\n    You are using:           gcc (GCC) 11.2.1 20210728 (Red Hat 11.2.1-1)\n\nCheck the difference, and if it is OK with you, please proceed at your\nrisk.\n\nTo avoid the locale issue as in commit bcbcf50f5218 (\"kbuild: fix\nld-version.sh to not be affected by locale\"), pass LC_ALL=C to\n\"$(CC) --version\".\n\n[1] https://lore.kernel.org/linux-hardening/efe6b039a544da8215d5e54aa7c4b6d1986fc2b0.1611607264.git.jpoimboe@redhat.com/\n[2] https://lore.kernel.org/lkml/CAHk-=wgjwhDy-y4mQh34L+2aF=n6BjzHdqAW2=8wri5x7O04pA@mail.gmail.com/\n\nAcked-by: Josh Poimboeuf <jpoimboe@redhat.com>\nSigned-off-by: Masahiro Yamada <masahiroy@kernel.org>",
  "full_message": "kbuild: warn if a different compiler is used for external module builds\n\nIt is always safe to use the same compiler for the kernel and external\nmodules, but in reality, some distributions such as Fedora release a\ndifferent version of GCC from the one used for building the kernel.\n\nThere was a long discussion about mixing different compilers [1].\n\nI do not repeat it here, but at least, showing a heads up in that\ncase is better than nothing.\n\nLinus suggested [2]:\n  And a warning might be more palatable even if different compiler\n  version work fine together. Just a heads up on \"it looks like you\n  might be mixing compiler versions\" is a valid note, and isn't\n  necessarily wrong. Even when they work well together, maybe you want\n  to have people at least _aware_ of it.\n\nThis commit shows a warning unless the compiler is exactly the same.\n\n  warning: the compiler differs from the one used to build the kernel\n    The kernel was built by: gcc (GCC) 11.1.1 20210531 (Red Hat 11.1.1-3)\n    You are using:           gcc (GCC) 11.2.1 20210728 (Red Hat 11.2.1-1)\n\nCheck the difference, and if it is OK with you, please proceed at your\nrisk.\n\nTo avoid the locale issue as in commit bcbcf50f5218 (\"kbuild: fix\nld-version.sh to not be affected by locale\"), pass LC_ALL=C to\n\"$(CC) --version\".\n\n[1] https://lore.kernel.org/linux-hardening/efe6b039a544da8215d5e54aa7c4b6d1986fc2b0.1611607264.git.jpoimboe@redhat.com/\n[2] https://lore.kernel.org/lkml/CAHk-=wgjwhDy-y4mQh34L+2aF=n6BjzHdqAW2=8wri5x7O04pA@mail.gmail.com/\n\nAcked-by: Josh Poimboeuf <jpoimboe@redhat.com>\nSigned-off-by: Masahiro Yamada <masahiroy@kernel.org>",
  "author_name": "Masahiro Yamada",
  "author_email": "masahiroy@kernel.org",
  "author_date": "Sun Aug 1 11:53:46 2021 +0900",
  "author_date_iso": "2021-08-01T11:53:46+09:00",
  "committer_name": "Masahiro Yamada",
  "committer_email": "masahiroy@kernel.org",
  "committer_date": "Tue Aug 10 09:13:25 2021 +0900",
  "committer_date_iso": "2021-08-10T09:13:25+09:00",
  "files_changed": [
    "Makefile"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "Makefile",
      "insertions": 12,
      "deletions": 2
    }
  ],
  "total_insertions": 12,
  "total_deletions": 2,
  "total_changes": 14,
  "parents": [
    "0058d07ec6aac8b1379f817b31839caa4ac8e448"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "Makefile",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}