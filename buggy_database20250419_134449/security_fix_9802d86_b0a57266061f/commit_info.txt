Commit Hash: 9802d86585db91655c7d1929a4f6bbe0952ea88e
Subject: bpf: add a bpf_override_function helper


Security Keywords:
- injection

Full commit message:
bpf: add a bpf_override_function helper

Error injection is sloppy and very ad-hoc.  BPF could fill this niche
perfectly with it's kprobe functionality.  We could make sure errors are
only triggered in specific call chains that we care about with very
specific situations.  Accomplish this with the bpf_override_funciton
helper.  This will modify the probe'd callers return value to the
specified value and set the PC to an override function that simply
returns, bypassing the originally probed function.  This gives us a nice
clean way to implement systematic error injection for all of our code
paths.

Acked-by: Alexei Starovoitov <ast@kernel.org>
Acked-by: Ingo Molnar <mingo@kernel.org>
Signed-off-by: Josef Bacik <jbacik@fb.com>
Signed-off-by: Alexei Starovoitov <ast@kernel.org>

Metadata:
Author: Josef Bacik <jbacik@fb.com>
Author Date: Mon Dec 11 11:36:48 2017 -0500
Committer: Alexei Starovoitov <ast@kernel.org>
Commit Date: Tue Dec 12 09:02:34 2017 -0800

Files Changed: 15
Lines Added: 154
Lines Removed: 9
Total Changes: 163
