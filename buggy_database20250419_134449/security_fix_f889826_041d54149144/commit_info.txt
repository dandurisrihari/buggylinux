Commit Hash: f88982679f54f75daa5b8eff3da72508f1e7422f
Subject: binder: check for binder_thread allocation failure in binder_poll()


Security Keywords:
- injection

Full commit message:
binder: check for binder_thread allocation failure in binder_poll()

If the kzalloc() in binder_get_thread() fails, binder_poll()
dereferences the resulting NULL pointer.

Fix it by returning POLLERR if the memory allocation failed.

This bug was found by syzkaller using fault injection.

Reported-by: syzbot <syzkaller@googlegroups.com>
Fixes: 457b9a6f09f0 ("Staging: android: add binder driver")
Cc: stable@vger.kernel.org
Signed-off-by: Eric Biggers <ebiggers@google.com>
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

Metadata:
Author: Eric Biggers <ebiggers@google.com>
Author Date: Tue Jan 30 23:11:24 2018 -0800
Committer: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Commit Date: Fri Feb 16 11:15:44 2018 +0100

Files Changed: 1
Lines Added: 2
Lines Removed: 0
Total Changes: 2
