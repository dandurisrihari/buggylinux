{
  "hash": "7f4d01f36a3ac16f539f0fd3839de5d58fa4940f",
  "hash_short": "7f4d01f3",
  "subject": "xfs: add log item pinning error injection tag",
  "body": "Add an error injection tag to force log items in the AIL to the\npinned state. This option can be used by test infrastructure to\ninduce head behind tail conditions. Specifically, this is intended\nto be used by xfstests to reproduce log recovery problems after\nfailed/corrupted log writes overwrite the last good tail LSN in the\nlog.\n\nWhen enabled, AIL push attempts see log items in the AIL in the\npinned state. This stalls metadata writeback and thus prevents the\ncurrent tail of the log from moving forward. When disabled,\nsubsequent AIL pushes observe the log items in their appropriate\nstate and filesystem operation continues as normal.\n\nSigned-off-by: Brian Foster <bfoster@redhat.com>\nReviewed-by: Darrick J. Wong <darrick.wong@oracle.com>\nSigned-off-by: Darrick J. Wong <darrick.wong@oracle.com>",
  "full_message": "xfs: add log item pinning error injection tag\n\nAdd an error injection tag to force log items in the AIL to the\npinned state. This option can be used by test infrastructure to\ninduce head behind tail conditions. Specifically, this is intended\nto be used by xfstests to reproduce log recovery problems after\nfailed/corrupted log writes overwrite the last good tail LSN in the\nlog.\n\nWhen enabled, AIL push attempts see log items in the AIL in the\npinned state. This stalls metadata writeback and thus prevents the\ncurrent tail of the log from moving forward. When disabled,\nsubsequent AIL pushes observe the log items in their appropriate\nstate and filesystem operation continues as normal.\n\nSigned-off-by: Brian Foster <bfoster@redhat.com>\nReviewed-by: Darrick J. Wong <darrick.wong@oracle.com>\nSigned-off-by: Darrick J. Wong <darrick.wong@oracle.com>",
  "author_name": "Brian Foster",
  "author_email": "bfoster@redhat.com",
  "author_date": "Tue Aug 8 18:21:52 2017 -0700",
  "author_date_iso": "2017-08-08T18:21:52-07:00",
  "committer_name": "Darrick J. Wong",
  "committer_email": "darrick.wong@oracle.com",
  "committer_date": "Tue Aug 22 09:22:24 2017 -0700",
  "committer_date_iso": "2017-08-22T09:22:24-07:00",
  "files_changed": [
    "fs/xfs/xfs_error.c",
    "fs/xfs/xfs_error.h",
    "fs/xfs/xfs_trans_ail.c"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "fs/xfs/xfs_error.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "fs/xfs/xfs_error.h",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_trans_ail.c",
      "insertions": 16,
      "deletions": 1
    }
  ],
  "total_insertions": 22,
  "total_deletions": 2,
  "total_changes": 24,
  "parents": [
    "4a4f66eac4681378996a1837ad1ffec3a2e2981f"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.14",
    "v4.14-rc1",
    "v4.14-rc2",
    "v4.14-rc3",
    "v4.14-rc4",
    "v4.14-rc5",
    "v4.14-rc6",
    "v4.14-rc7",
    "v4.14-rc8",
    "v4.15"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "fs/xfs/xfs_error.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/xfs/xfs_error.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/xfs/xfs_trans_ail.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}