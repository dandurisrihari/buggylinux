Commit Hash: e8b7db38449ac5b950a3f00519171c4be3e226ff
Subject: Drivers: hv: vmbus: Add vmbus_requestor data structure for VMBus hardening


Security Keywords:
- hardening

Full commit message:
Drivers: hv: vmbus: Add vmbus_requestor data structure for VMBus hardening

Currently, VMbus drivers use pointers into guest memory as request IDs
for interactions with Hyper-V. To be more robust in the face of errors
or malicious behavior from a compromised Hyper-V, avoid exposing
guest memory addresses to Hyper-V. Also avoid Hyper-V giving back a
bad request ID that is then treated as the address of a guest data
structure with no validation. Instead, encapsulate these memory
addresses and provide small integers as request IDs.

Signed-off-by: Andres Beltran <lkmlabelt@gmail.com>
Co-developed-by: Andrea Parri (Microsoft) <parri.andrea@gmail.com>
Signed-off-by: Andrea Parri (Microsoft) <parri.andrea@gmail.com>
Reviewed-by: Michael Kelley <mikelley@microsoft.com>
Reviewed-by: Wei Liu <wei.liu@kernel.org>
Link: https://lore.kernel.org/r/20201109100402.8946-2-parri.andrea@gmail.com
Signed-off-by: Wei Liu <wei.liu@kernel.org>

Metadata:
Author: Andres Beltran <lkmlabelt@gmail.com>
Author Date: Mon Nov 9 11:04:00 2020 +0100
Committer: Wei Liu <wei.liu@kernel.org>
Commit Date: Tue Nov 17 10:51:06 2020 +0000

Files Changed: 4
Lines Added: 219
Lines Removed: 9
Total Changes: 228
