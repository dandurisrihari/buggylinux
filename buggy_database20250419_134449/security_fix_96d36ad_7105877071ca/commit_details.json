{
  "hash": "96d36ad95b03c89857d405b3317efb0188ac59cb",
  "hash_short": "96d36ad9",
  "subject": "KVM: selftests: Add stress test for LPI injection",
  "body": "Now that all the infrastructure is in place, add a test to stress KVM's\nLPI injection. Keep a 1:1 mapping of device IDs to signalling threads,\nallowing the user to scale up/down the sender side of an LPI. Make use\nof the new VM stats for the translation cache to estimate the\ntranslation hit rate.\n\nSince the primary focus of the test is on performance, you'll notice\nthat the guest code is not pedantic about the LPIs it receives. Counting\nthe number of LPIs would require synchronization between the device and\nvCPU threads to avoid coalescing and would get in the way of performance\nnumbers.\n\nSigned-off-by: Oliver Upton <oliver.upton@linux.dev>\nLink: https://lore.kernel.org/r/20240422200158.2606761-20-oliver.upton@linux.dev\nSigned-off-by: Marc Zyngier <maz@kernel.org>",
  "full_message": "KVM: selftests: Add stress test for LPI injection\n\nNow that all the infrastructure is in place, add a test to stress KVM's\nLPI injection. Keep a 1:1 mapping of device IDs to signalling threads,\nallowing the user to scale up/down the sender side of an LPI. Make use\nof the new VM stats for the translation cache to estimate the\ntranslation hit rate.\n\nSince the primary focus of the test is on performance, you'll notice\nthat the guest code is not pedantic about the LPIs it receives. Counting\nthe number of LPIs would require synchronization between the device and\nvCPU threads to avoid coalescing and would get in the way of performance\nnumbers.\n\nSigned-off-by: Oliver Upton <oliver.upton@linux.dev>\nLink: https://lore.kernel.org/r/20240422200158.2606761-20-oliver.upton@linux.dev\nSigned-off-by: Marc Zyngier <maz@kernel.org>",
  "author_name": "Oliver Upton",
  "author_email": "oliver.upton@linux.dev",
  "author_date": "Mon Apr 22 20:01:58 2024 +0000",
  "author_date_iso": "2024-04-22T20:01:58+00:00",
  "committer_name": "Marc Zyngier",
  "committer_email": "maz@kernel.org",
  "committer_date": "Thu Apr 25 13:19:56 2024 +0100",
  "committer_date_iso": "2024-04-25T13:19:56+01:00",
  "files_changed": [
    "tools/testing/selftests/kvm/Makefile",
    "tools/testing/selftests/kvm/aarch64/vgic_lpi_stress.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "tools/testing/selftests/kvm/Makefile",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/aarch64/vgic_lpi_stress.c",
      "insertions": 410,
      "deletions": 0
    }
  ],
  "total_insertions": 411,
  "total_deletions": 0,
  "total_changes": 411,
  "parents": [
    "c3c369b508d9a447436b7abb2fded9aec18953ff"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "tools/testing/selftests/kvm/Makefile",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "tools/testing/selftests/kvm/aarch64/vgic_lpi_stress.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}