Commit Hash: 96d36ad95b03c89857d405b3317efb0188ac59cb
Subject: KVM: selftests: Add stress test for LPI injection


Security Keywords:
- injection

Full commit message:
KVM: selftests: Add stress test for LPI injection

Now that all the infrastructure is in place, add a test to stress KVM's
LPI injection. Keep a 1:1 mapping of device IDs to signalling threads,
allowing the user to scale up/down the sender side of an LPI. Make use
of the new VM stats for the translation cache to estimate the
translation hit rate.

Since the primary focus of the test is on performance, you'll notice
that the guest code is not pedantic about the LPIs it receives. Counting
the number of LPIs would require synchronization between the device and
vCPU threads to avoid coalescing and would get in the way of performance
numbers.

Signed-off-by: Oliver Upton <oliver.upton@linux.dev>
Link: https://lore.kernel.org/r/20240422200158.2606761-20-oliver.upton@linux.dev
Signed-off-by: Marc Zyngier <maz@kernel.org>

Metadata:
Author: Oliver Upton <oliver.upton@linux.dev>
Author Date: Mon Apr 22 20:01:58 2024 +0000
Committer: Marc Zyngier <maz@kernel.org>
Commit Date: Thu Apr 25 13:19:56 2024 +0100

Files Changed: 2
Lines Added: 411
Lines Removed: 0
Total Changes: 411
