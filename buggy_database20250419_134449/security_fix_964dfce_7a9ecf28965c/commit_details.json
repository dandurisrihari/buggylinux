{
  "hash": "964dfce9c2b323a9a9d0bd6764e0f530b40104e4",
  "hash_short": "964dfce9",
  "subject": "mtd: rawnand: diskonchip: Allocate rs control per instance",
  "body": "The reed solomon library is moving the on stack decoder buffers into the rs\ncontrol structure. That would break the DoC driver because multiple\ninstances share the same control structure and can operate in parallel. At\nleast in theory....\n\nInstantiate a rs control instance per DoC device to avoid that. The per\ninstance buffer is fine as the operation on a single DoC instance is\nserialized by the MTD/NAND core.\n\nSigned-off-by: Thomas Gleixner <tglx@linutronix.de>\nAcked-by: Boris Brezillon <boris.brezillon@bootlin.com>\nCc: Tony Luck <tony.luck@intel.com>\nCc: Kees Cook <keescook@chromium.org>\nCc: Segher Boessenkool <segher@kernel.crashing.org>\nCc: Kernel Hardening <kernel-hardening@lists.openwall.com>\nCc: Richard Weinberger <richard@nod.at>\nCc: Mike Snitzer <snitzer@redhat.com>\nCc: Anton Vorontsov <anton@enomsg.org>\nCc: Colin Cross <ccross@android.com>\nCc: Andrew Morton <akpm@linuxfoundation.org>\nCc: David Woodhouse <dwmw2@infradead.org>\nCc: Alasdair Kergon <agk@redhat.com>\nSigned-off-by: Kees Cook <keescook@chromium.org>",
  "full_message": "mtd: rawnand: diskonchip: Allocate rs control per instance\n\nThe reed solomon library is moving the on stack decoder buffers into the rs\ncontrol structure. That would break the DoC driver because multiple\ninstances share the same control structure and can operate in parallel. At\nleast in theory....\n\nInstantiate a rs control instance per DoC device to avoid that. The per\ninstance buffer is fine as the operation on a single DoC instance is\nserialized by the MTD/NAND core.\n\nSigned-off-by: Thomas Gleixner <tglx@linutronix.de>\nAcked-by: Boris Brezillon <boris.brezillon@bootlin.com>\nCc: Tony Luck <tony.luck@intel.com>\nCc: Kees Cook <keescook@chromium.org>\nCc: Segher Boessenkool <segher@kernel.crashing.org>\nCc: Kernel Hardening <kernel-hardening@lists.openwall.com>\nCc: Richard Weinberger <richard@nod.at>\nCc: Mike Snitzer <snitzer@redhat.com>\nCc: Anton Vorontsov <anton@enomsg.org>\nCc: Colin Cross <ccross@android.com>\nCc: Andrew Morton <akpm@linuxfoundation.org>\nCc: David Woodhouse <dwmw2@infradead.org>\nCc: Alasdair Kergon <agk@redhat.com>\nSigned-off-by: Kees Cook <keescook@chromium.org>",
  "author_name": "Thomas Gleixner",
  "author_email": "tglx@linutronix.de",
  "author_date": "Sun Apr 22 18:23:54 2018 +0200",
  "author_date_iso": "2018-04-22T18:23:54+02:00",
  "committer_name": "Kees Cook",
  "committer_email": "keescook@chromium.org",
  "committer_date": "Tue Apr 24 19:50:09 2018 -0700",
  "committer_date_iso": "2018-04-24T19:50:09-07:00",
  "files_changed": [
    "drivers/mtd/nand/raw/diskonchip.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/mtd/nand/raw/diskonchip.c",
      "insertions": 27,
      "deletions": 33
    }
  ],
  "total_insertions": 27,
  "total_deletions": 33,
  "total_changes": 60,
  "parents": [
    "2163398192f6a53e84765cfe3e5a2088437c3d2d"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.18",
    "v4.18-rc1",
    "v4.18-rc2",
    "v4.18-rc3",
    "v4.18-rc4",
    "v4.18-rc5",
    "v4.18-rc6",
    "v4.18-rc7",
    "v4.18-rc8",
    "v4.19"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "Hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/mtd/nand/raw/diskonchip.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}