Commit Hash: d3646589703731026ae7bcba5731fa7a7d0e5291
Subject: sancov: Split plugin build from plugin CFLAGS


Security Keywords:
- hardening

Full commit message:
sancov: Split plugin build from plugin CFLAGS

When the sancov_plugin is enabled, it gets added to gcc-plugin-y which
is used to populate both GCC_PLUGIN (for building the plugin) and
GCC_PLUGINS_CFLAGS (for enabling and options). Instead of adding sancov
to both and then removing it from GCC_PLUGINS_CFLAGS, create a separate
list, gcc-plugin-external-y, which is only added to GCC_PLUGIN.

This will also be used by the coming randstruct build changes.

Cc: Masahiro Yamada <masahiroy@kernel.org>
Cc: linux-kbuild@vger.kernel.org
Cc: linux-hardening@vger.kernel.org
Signed-off-by: Kees Cook <keescook@chromium.org>
Link: https://lore.kernel.org/r/20220503205503.3054173-3-keescook@chromium.org

Metadata:
Author: Kees Cook <keescook@chromium.org>
Author Date: Tue May 3 13:54:59 2022 -0700
Committer: Kees Cook <keescook@chromium.org>
Commit Date: Sun May 8 01:33:06 2022 -0700

Files Changed: 1
Lines Added: 8
Lines Removed: 6
Total Changes: 14
