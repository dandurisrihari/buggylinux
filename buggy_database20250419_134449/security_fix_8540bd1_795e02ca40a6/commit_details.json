{
  "hash": "8540bd1b990bad7f7e95b5bf1adf30bfaf2e38c9",
  "hash_short": "8540bd1b",
  "subject": "Merge branch kvm-arm64/pkvm-6.10 into kvmarm-master/next",
  "body": "* kvm-arm64/pkvm-6.10: (25 commits)\n  : .\n  : At last, a bunch of pKVM patches, courtesy of Fuad Tabba.\n  : From the cover letter:\n  :\n  : \"This series is a bit of a bombay-mix of patches we've been\n  : carrying. There's no one overarching theme, but they do improve\n  : the code by fixing existing bugs in pKVM, refactoring code to\n  : make it more readable and easier to re-use for pKVM, or adding\n  : functionality to the existing pKVM code upstream.\"\n  : .\n  KVM: arm64: Force injection of a data abort on NISV MMIO exit\n  KVM: arm64: Restrict supported capabilities for protected VMs\n  KVM: arm64: Refactor setting the return value in kvm_vm_ioctl_enable_cap()\n  KVM: arm64: Document the KVM/arm64-specific calls in hypercalls.rst\n  KVM: arm64: Rename firmware pseudo-register documentation file\n  KVM: arm64: Reformat/beautify PTP hypercall documentation\n  KVM: arm64: Clarify rationale for ZCR_EL1 value restored on guest exit\n  KVM: arm64: Introduce and use predicates that check for protected VMs\n  KVM: arm64: Add is_pkvm_initialized() helper\n  KVM: arm64: Simplify vgic-v3 hypercalls\n  KVM: arm64: Move setting the page as dirty out of the critical section\n  KVM: arm64: Change kvm_handle_mmio_return() return polarity\n  KVM: arm64: Fix comment for __pkvm_vcpu_init_traps()\n  KVM: arm64: Prevent kmemleak from accessing .hyp.data\n  KVM: arm64: Do not map the host fpsimd state to hyp in pKVM\n  KVM: arm64: Rename __tlb_switch_to_{guest,host}() in VHE\n  KVM: arm64: Support TLB invalidation in guest context\n  KVM: arm64: Avoid BBM when changing only s/w bits in Stage-2 PTE\n  KVM: arm64: Check for PTE validity when checking for executable/cacheable\n  KVM: arm64: Avoid BUG-ing from the host abort path\n  ...\n\nSigned-off-by: Marc Zyngier <maz@kernel.org>",
  "full_message": "Merge branch kvm-arm64/pkvm-6.10 into kvmarm-master/next\n\n* kvm-arm64/pkvm-6.10: (25 commits)\n  : .\n  : At last, a bunch of pKVM patches, courtesy of Fuad Tabba.\n  : From the cover letter:\n  :\n  : \"This series is a bit of a bombay-mix of patches we've been\n  : carrying. There's no one overarching theme, but they do improve\n  : the code by fixing existing bugs in pKVM, refactoring code to\n  : make it more readable and easier to re-use for pKVM, or adding\n  : functionality to the existing pKVM code upstream.\"\n  : .\n  KVM: arm64: Force injection of a data abort on NISV MMIO exit\n  KVM: arm64: Restrict supported capabilities for protected VMs\n  KVM: arm64: Refactor setting the return value in kvm_vm_ioctl_enable_cap()\n  KVM: arm64: Document the KVM/arm64-specific calls in hypercalls.rst\n  KVM: arm64: Rename firmware pseudo-register documentation file\n  KVM: arm64: Reformat/beautify PTP hypercall documentation\n  KVM: arm64: Clarify rationale for ZCR_EL1 value restored on guest exit\n  KVM: arm64: Introduce and use predicates that check for protected VMs\n  KVM: arm64: Add is_pkvm_initialized() helper\n  KVM: arm64: Simplify vgic-v3 hypercalls\n  KVM: arm64: Move setting the page as dirty out of the critical section\n  KVM: arm64: Change kvm_handle_mmio_return() return polarity\n  KVM: arm64: Fix comment for __pkvm_vcpu_init_traps()\n  KVM: arm64: Prevent kmemleak from accessing .hyp.data\n  KVM: arm64: Do not map the host fpsimd state to hyp in pKVM\n  KVM: arm64: Rename __tlb_switch_to_{guest,host}() in VHE\n  KVM: arm64: Support TLB invalidation in guest context\n  KVM: arm64: Avoid BBM when changing only s/w bits in Stage-2 PTE\n  KVM: arm64: Check for PTE validity when checking for executable/cacheable\n  KVM: arm64: Avoid BUG-ing from the host abort path\n  ...\n\nSigned-off-by: Marc Zyngier <maz@kernel.org>",
  "author_name": "Marc Zyngier",
  "author_email": "maz@kernel.org",
  "author_date": "Fri May 3 11:39:52 2024 +0100",
  "author_date_iso": "2024-05-03T11:39:52+01:00",
  "committer_name": "Marc Zyngier",
  "committer_email": "maz@kernel.org",
  "committer_date": "Fri May 3 11:39:52 2024 +0100",
  "committer_date_iso": "2024-05-03T11:39:52+01:00",
  "files_changed": [
    "arch/arm64/include/asm/kvm_emulate.h",
    "arch/arm64/include/asm/kvm_host.h",
    "arch/arm64/kvm/arm.c",
    "arch/arm64/kvm/hyp/include/hyp/switch.h",
    "arch/arm64/kvm/hyp/nvhe/switch.c",
    "arch/arm64/kvm/hyp/nvhe/tlb.c",
    "arch/arm64/kvm/hyp/pgtable.c",
    "arch/arm64/kvm/hyp/vhe/switch.c",
    "arch/arm64/kvm/hyp/vhe/tlb.c",
    "arch/arm64/kvm/mmu.c",
    "arch/arm64/kvm/vgic/vgic.c",
    "arch/arm64/kvm/vgic/vgic.h",
    "include/kvm/arm_vgic.h"
  ],
  "files_changed_count": 13,
  "stats": [
    {
      "file": "Documentation/virt/kvm/api.rst",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "Documentation/virt/kvm/arm/fw-pseudo-registers.rst",
      "insertions": 138,
      "deletions": 0
    },
    {
      "file": "Documentation/virt/kvm/arm/hypercalls.rst",
      "insertions": 44,
      "deletions": 136
    },
    {
      "file": "Documentation/virt/kvm/arm/index.rst",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "Documentation/virt/kvm/arm/ptp_kvm.rst",
      "insertions": 24,
      "deletions": 14
    },
    {
      "file": "arch/arm64/include/asm/kvm_asm.h",
      "insertions": 2,
      "deletions": 6
    },
    {
      "file": "arch/arm64/include/asm/kvm_emulate.h",
      "insertions": 2,
      "deletions": 4
    },
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "insertions": 16,
      "deletions": 7
    },
    {
      "file": "arch/arm64/include/asm/kvm_hyp.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/arm64/include/asm/virt.h",
      "insertions": 8,
      "deletions": 4
    },
    {
      "file": "arch/arm64/kvm/arm.c",
      "insertions": 44,
      "deletions": 19
    },
    {
      "file": "arch/arm64/kvm/fpsimd.c",
      "insertions": 29,
      "deletions": 31
    },
    {
      "file": "arch/arm64/kvm/hyp/include/hyp/switch.h",
      "insertions": 1,
      "deletions": 7
    },
    {
      "file": "arch/arm64/kvm/hyp/include/nvhe/pkvm.h",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/hyp-main.c",
      "insertions": 6,
      "deletions": 18
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/mem_protect.c",
      "insertions": 7,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/pkvm.c",
      "insertions": 13,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/setup.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/switch.c",
      "insertions": 4,
      "deletions": 6
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/tlb.c",
      "insertions": 91,
      "deletions": 24
    },
    {
      "file": "arch/arm64/kvm/hyp/pgtable.c",
      "insertions": 18,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kvm/hyp/vgic-v3-sr.c",
      "insertions": 23,
      "deletions": 4
    },
    {
      "file": "arch/arm64/kvm/hyp/vhe/switch.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/arm64/kvm/hyp/vhe/tlb.c",
      "insertions": 13,
      "deletions": 13
    },
    {
      "file": "arch/arm64/kvm/mmio.c",
      "insertions": 10,
      "deletions": 2
    },
    {
      "file": "arch/arm64/kvm/mmu.c",
      "insertions": 5,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kvm/pkvm.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/reset.c",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-v2.c",
      "insertions": 1,
      "deletions": 8
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-v3.c",
      "insertions": 2,
      "deletions": 21
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic.c",
      "insertions": 0,
      "deletions": 11
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic.h",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "include/kvm/arm_vgic.h",
      "insertions": 0,
      "deletions": 1
    }
  ],
  "total_insertions": 521,
  "total_deletions": 352,
  "total_changes": 873,
  "parents": [
    "3d5689e01a424673d302e9295a1307d22494c6b1",
    "3b467b16582c077f57fab244cf0801ecea7914b6"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/arm64/include/asm/kvm_emulate.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/switch.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/arm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/hyp/include/hyp/switch.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/tlb.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/hyp/pgtable.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/hyp/vhe/switch.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/mmu.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/hyp/vhe/tlb.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/kvm/arm_vgic.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}