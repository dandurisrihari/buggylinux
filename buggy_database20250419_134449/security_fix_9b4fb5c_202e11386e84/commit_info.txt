Commit Hash: 9b4fb5cec031f81ef436bf2cfd9fc265e25f6e45
Subject: fault_inject: Don't rely on "return value" from WRITE_ONCE()


Security Keywords:
- injection

Full commit message:
fault_inject: Don't rely on "return value" from WRITE_ONCE()

It's a bit weird that WRITE_ONCE() evaluates to the value it stores and
it's different to smp_store_release(), which can't be used this way.

In preparation for preventing this in WRITE_ONCE(), change the fault
injection code to use a local variable instead.

Cc: Akinobu Mita <akinobu.mita@gmail.com>
Signed-off-by: Will Deacon <will@kernel.org>

Metadata:
Author: Will Deacon <will@kernel.org>
Author Date: Thu Dec 19 17:40:21 2019 +0000
Committer: Will Deacon <will@kernel.org>
Commit Date: Wed Apr 15 21:36:41 2020 +0100

Files Changed: 1
Lines Added: 3
Lines Removed: 1
Total Changes: 4
