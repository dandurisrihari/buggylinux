{
  "hash": "6931fb44858c3b9da9f35fdc8d9cbeef0b4b50a3",
  "hash_short": "6931fb44",
  "subject": "ubi: Use the fault injection framework to enhance the fault injection capability",
  "body": "To make debug parameters configurable at run time, use the\nfault injection framework to reconstruct the debugfs interface,\nand retain the legacy fault injection interface.\n\nNow, the file emulate_failures and fault_attr files control whether\nto enable fault emmulation.\n\nThe file emulate_failures receives a mask that controls type and\nprocess of fault injection. Generally, for ease of use, you can\ndirectly enter a mask with all 1s.\n\necho 0xffff > /sys/kernel/debug/ubi/ubi0/emulate_failures\n\nAnd you need to configure other fault-injection capabilities for\ntesting purpose:\n\necho 100 > /sys/kernel/debug/ubi/fault_inject/emulate_power_cut/probability\necho 15 > /sys/kernel/debug/ubi/fault_inject/emulate_power_cut/space\necho 2 > /sys/kernel/debug/ubi/fault_inject/emulate_power_cut/verbose\necho -1 > /sys/kernel/debug/ubi/fault_inject/emulate_power_cut/times\n\nThe CONFIG_MTD_UBI_FAULT_INJECTION to enable the Fault Injection is\nadded to kconfig.\n\nSigned-off-by: ZhaoLong Wang <wangzhaolong1@huawei.com>\nReviewed-by: Zhihao Cheng <chengzhihao1@huawei.com>\nSigned-off-by: Richard Weinberger <richard@nod.at>",
  "full_message": "ubi: Use the fault injection framework to enhance the fault injection capability\n\nTo make debug parameters configurable at run time, use the\nfault injection framework to reconstruct the debugfs interface,\nand retain the legacy fault injection interface.\n\nNow, the file emulate_failures and fault_attr files control whether\nto enable fault emmulation.\n\nThe file emulate_failures receives a mask that controls type and\nprocess of fault injection. Generally, for ease of use, you can\ndirectly enter a mask with all 1s.\n\necho 0xffff > /sys/kernel/debug/ubi/ubi0/emulate_failures\n\nAnd you need to configure other fault-injection capabilities for\ntesting purpose:\n\necho 100 > /sys/kernel/debug/ubi/fault_inject/emulate_power_cut/probability\necho 15 > /sys/kernel/debug/ubi/fault_inject/emulate_power_cut/space\necho 2 > /sys/kernel/debug/ubi/fault_inject/emulate_power_cut/verbose\necho -1 > /sys/kernel/debug/ubi/fault_inject/emulate_power_cut/times\n\nThe CONFIG_MTD_UBI_FAULT_INJECTION to enable the Fault Injection is\nadded to kconfig.\n\nSigned-off-by: ZhaoLong Wang <wangzhaolong1@huawei.com>\nReviewed-by: Zhihao Cheng <chengzhihao1@huawei.com>\nSigned-off-by: Richard Weinberger <richard@nod.at>",
  "author_name": "ZhaoLong Wang",
  "author_email": "wangzhaolong1@huawei.com",
  "author_date": "Tue Dec 26 09:01:09 2023 +0800",
  "author_date_iso": "2023-12-26T09:01:09+08:00",
  "committer_name": "Richard Weinberger",
  "committer_email": "richard@nod.at",
  "committer_date": "Sat Jan 6 23:38:55 2024 +0100",
  "committer_date_iso": "2024-01-06T23:38:55+01:00",
  "files_changed": [
    "drivers/mtd/ubi/Kconfig",
    "drivers/mtd/ubi/debug.c",
    "drivers/mtd/ubi/debug.h",
    "drivers/mtd/ubi/io.c",
    "drivers/mtd/ubi/ubi.h"
  ],
  "files_changed_count": 5,
  "stats": [
    {
      "file": "drivers/mtd/ubi/Kconfig",
      "insertions": 9,
      "deletions": 0
    },
    {
      "file": "drivers/mtd/ubi/debug.c",
      "insertions": 63,
      "deletions": 6
    },
    {
      "file": "drivers/mtd/ubi/debug.h",
      "insertions": 119,
      "deletions": 23
    },
    {
      "file": "drivers/mtd/ubi/io.c",
      "insertions": 8,
      "deletions": 2
    },
    {
      "file": "drivers/mtd/ubi/ubi.h",
      "insertions": 4,
      "deletions": 11
    }
  ],
  "total_insertions": 203,
  "total_deletions": 42,
  "total_changes": 245,
  "parents": [
    "1e022216dcd248326a5bb95609d12a6815bca4e2"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/mtd/ubi/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/mtd/ubi/debug.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/mtd/ubi/debug.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/mtd/ubi/io.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/mtd/ubi/ubi.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}