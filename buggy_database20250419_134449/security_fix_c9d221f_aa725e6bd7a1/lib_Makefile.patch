commit c9d221f86e43d9fb16260fe18a8cd6767f36c8a5
Author: Akinobu Mita <akinobu.mita@gmail.com>
Date:   Wed May 26 14:43:36 2010 -0700

    fault-injection: add CPU notifier error injection module
    
    I used this module to test the series of modification to the cpu notifiers
    code.
    
    Example1: inject CPU offline error (-1 == -EPERM)
    
            # modprobe cpu-notifier-error-inject cpu_down_prepare_error=-1
            # echo 0 > /sys/devices/system/cpu/cpu1/online
            bash: echo: write error: Operation not permitted
    
    Example2: inject CPU online error (-2 == -ENOENT)
    
            # modprobe cpu-notifier-error-inject cpu_up_prepare_error=-2
            # echo 1 > /sys/devices/system/cpu/cpu1/online
            bash: echo: write error: No such file or directory
    
    [akpm@linux-foundation.org: fix Kconfig help text]
    Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
    Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

diff --git a/lib/Makefile b/lib/Makefile
index 9e6d3c29d73a..c8567a59d316 100644
--- a/lib/Makefile
+++ b/lib/Makefile
@@ -85,6 +85,7 @@ obj-$(CONFIG_AUDIT_GENERIC) += audit.o
 obj-$(CONFIG_SWIOTLB) += swiotlb.o
 obj-$(CONFIG_IOMMU_HELPER) += iommu-helper.o
 obj-$(CONFIG_FAULT_INJECTION) += fault-inject.o
+obj-$(CONFIG_CPU_NOTIFIER_ERROR_INJECT) += cpu-notifier-error-inject.o
 
 lib-$(CONFIG_GENERIC_BUG) += bug.o