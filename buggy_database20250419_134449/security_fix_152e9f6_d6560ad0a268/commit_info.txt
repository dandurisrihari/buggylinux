Commit Hash: 152e9f65d66f0a3891efc3869440becc0e7ff53f
Subject: KVM: s390: fix wrong lookup of VCPUs by array index


Security Keywords:
- injection

Full commit message:
KVM: s390: fix wrong lookup of VCPUs by array index

For now, VCPUs were always created sequentially with incrementing
VCPU ids. Therefore, the index in the VCPUs array matched the id.

As sequential creation might change with cpu hotplug, let's use
the correct lookup function to find a VCPU by id, not array index.

Let's also use kvm_lookup_vcpu() for validation of the sending VCPU
on external call injection.

Reviewed-by: Christian Borntraeger <borntraeger@de.ibm.com>
Signed-off-by: David Hildenbrand <dahi@linux.vnet.ibm.com>
Signed-off-by: Christian Borntraeger <borntraeger@de.ibm.com>
Cc: stable@vger.kernel.org # db27a7a KVM: Provide function for VCPU lookup by id

Metadata:
Author: David Hildenbrand <dahi@linux.vnet.ibm.com>
Author Date: Thu Nov 5 09:06:06 2015 +0100
Committer: Christian Borntraeger <borntraeger@de.ibm.com>
Commit Date: Thu Nov 19 14:47:43 2015 +0100

Files Changed: 2
Lines Added: 3
Lines Removed: 8
Total Changes: 11
