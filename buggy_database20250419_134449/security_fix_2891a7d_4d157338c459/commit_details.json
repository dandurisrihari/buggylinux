{
  "hash": "2891a7dfb6c4a273996f0047660a75e88e3b8690",
  "hash_short": "2891a7df",
  "subject": "KVM: arm64: vgic-its: Implement MSI injection in ITS emulation",
  "body": "When userland wants to inject an MSI into the guest, it uses the\nKVM_SIGNAL_MSI ioctl, which carries the doorbell address along with\nthe payload and the device ID.\nWith the help of the KVM IO bus framework we learn the corresponding\nITS from the doorbell address. We then use our wrapper functions to\niterate the linked lists and find the proper Interrupt Translation Table\nEntry (ITTE) and thus the corresponding struct vgic_irq to finally set\nthe pending bit.\nWe also provide the handler for the ITS \"INT\" command, which allows a\nguest to trigger an MSI via the ITS command queue. Since this one knows\nabout the right ITS already, we directly call the MMIO handler function\nwithout using the kvm_io_bus framework.\n\nSigned-off-by: Andre Przywara <andre.przywara@arm.com>\nReviewed-by: Marc Zyngier <marc.zyngier@arm.com>\nTested-by: Eric Auger <eric.auger@redhat.com>\nSigned-off-by: Marc Zyngier <marc.zyngier@arm.com>",
  "full_message": "KVM: arm64: vgic-its: Implement MSI injection in ITS emulation\n\nWhen userland wants to inject an MSI into the guest, it uses the\nKVM_SIGNAL_MSI ioctl, which carries the doorbell address along with\nthe payload and the device ID.\nWith the help of the KVM IO bus framework we learn the corresponding\nITS from the doorbell address. We then use our wrapper functions to\niterate the linked lists and find the proper Interrupt Translation Table\nEntry (ITTE) and thus the corresponding struct vgic_irq to finally set\nthe pending bit.\nWe also provide the handler for the ITS \"INT\" command, which allows a\nguest to trigger an MSI via the ITS command queue. Since this one knows\nabout the right ITS already, we directly call the MMIO handler function\nwithout using the kvm_io_bus framework.\n\nSigned-off-by: Andre Przywara <andre.przywara@arm.com>\nReviewed-by: Marc Zyngier <marc.zyngier@arm.com>\nTested-by: Eric Auger <eric.auger@redhat.com>\nSigned-off-by: Marc Zyngier <marc.zyngier@arm.com>",
  "author_name": "Andre Przywara",
  "author_email": "andre.przywara@arm.com",
  "author_date": "Fri Jul 15 12:43:37 2016 +0100",
  "author_date_iso": "2016-07-15T12:43:37+01:00",
  "committer_name": "Marc Zyngier",
  "committer_email": "marc.zyngier@arm.com",
  "committer_date": "Mon Jul 18 18:14:38 2016 +0100",
  "committer_date_iso": "2016-07-18T18:14:38+01:00",
  "files_changed": [
    "virt/kvm/arm/vgic/vgic-its.c",
    "virt/kvm/arm/vgic/vgic.h"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "virt/kvm/arm/vgic/vgic-its.c",
      "insertions": 77,
      "deletions": 0
    },
    {
      "file": "virt/kvm/arm/vgic/vgic.h",
      "insertions": 6,
      "deletions": 0
    }
  ],
  "total_insertions": 83,
  "total_deletions": 0,
  "total_changes": 83,
  "parents": [
    "df9f58fbea9bc656b5a7770c885c97b26255b234"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "virt/kvm/arm/vgic/vgic-its.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/arm/vgic/vgic.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}