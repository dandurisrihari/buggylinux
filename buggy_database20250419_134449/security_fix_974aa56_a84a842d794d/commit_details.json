{
  "hash": "974aa5630b318938273d7efe7a2cf031c7b927db",
  "hash_short": "974aa563",
  "subject": "Merge tag 'kvm-4.15-1' of git://git.kernel.org/pub/scm/virt/kvm/kvm",
  "body": "Pull KVM updates from Radim Kr\u010dm\u00e1\u0159:\n \"First batch of KVM changes for 4.15\n\n  Common:\n   - Python 3 support in kvm_stat\n   - Accounting of slabs to kmemcg\n\n  ARM:\n   - Optimized arch timer handling for KVM/ARM\n   - Improvements to the VGIC ITS code and introduction of an ITS reset\n     ioctl\n   - Unification of the 32-bit fault injection logic\n   - More exact external abort matching logic\n\n  PPC:\n   - Support for running hashed page table (HPT) MMU mode on a host that\n     is using the radix MMU mode; single threaded mode on POWER 9 is\n     added as a pre-requisite\n   - Resolution of merge conflicts with the last second 4.14 HPT fixes\n   - Fixes and cleanups\n\n  s390:\n   - Some initial preparation patches for exitless interrupts and crypto\n   - New capability for AIS migration\n   - Fixes\n\n  x86:\n   - Improved emulation of LAPIC timer mode changes, MCi_STATUS MSRs,\n     and after-reset state\n   - Refined dependencies for VMX features\n   - Fixes for nested SMI injection\n   - A lot of cleanups\"\n\n* tag 'kvm-4.15-1' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (89 commits)\n  KVM: s390: provide a capability for AIS state migration\n  KVM: s390: clear_io_irq() requests are not expected for adapter interrupts\n  KVM: s390: abstract conversion between isc and enum irq_types\n  KVM: s390: vsie: use common code functions for pinning\n  KVM: s390: SIE considerations for AP Queue virtualization\n  KVM: s390: document memory ordering for kvm_s390_vcpu_wakeup\n  KVM: PPC: Book3S HV: Cosmetic post-merge cleanups\n  KVM: arm/arm64: fix the incompatible matching for external abort\n  KVM: arm/arm64: Unify 32bit fault injection\n  KVM: arm/arm64: vgic-its: Implement KVM_DEV_ARM_ITS_CTRL_RESET\n  KVM: arm/arm64: Document KVM_DEV_ARM_ITS_CTRL_RESET\n  KVM: arm/arm64: vgic-its: Free caches when GITS_BASER Valid bit is cleared\n  KVM: arm/arm64: vgic-its: New helper functions to free the caches\n  KVM: arm/arm64: vgic-its: Remove kvm_its_unmap_device\n  arm/arm64: KVM: Load the timer state when enabling the timer\n  KVM: arm/arm64: Rework kvm_timer_should_fire\n  KVM: arm/arm64: Get rid of kvm_timer_flush_hwstate\n  KVM: arm/arm64: Avoid phys timer emulation in vcpu entry/exit\n  KVM: arm/arm64: Move phys_timer_emulate function\n  KVM: arm/arm64: Use kvm_arm_timer_set/get_reg for guest register traps\n  ...",
  "full_message": "Merge tag 'kvm-4.15-1' of git://git.kernel.org/pub/scm/virt/kvm/kvm\n\nPull KVM updates from Radim Kr\u010dm\u00e1\u0159:\n \"First batch of KVM changes for 4.15\n\n  Common:\n   - Python 3 support in kvm_stat\n   - Accounting of slabs to kmemcg\n\n  ARM:\n   - Optimized arch timer handling for KVM/ARM\n   - Improvements to the VGIC ITS code and introduction of an ITS reset\n     ioctl\n   - Unification of the 32-bit fault injection logic\n   - More exact external abort matching logic\n\n  PPC:\n   - Support for running hashed page table (HPT) MMU mode on a host that\n     is using the radix MMU mode; single threaded mode on POWER 9 is\n     added as a pre-requisite\n   - Resolution of merge conflicts with the last second 4.14 HPT fixes\n   - Fixes and cleanups\n\n  s390:\n   - Some initial preparation patches for exitless interrupts and crypto\n   - New capability for AIS migration\n   - Fixes\n\n  x86:\n   - Improved emulation of LAPIC timer mode changes, MCi_STATUS MSRs,\n     and after-reset state\n   - Refined dependencies for VMX features\n   - Fixes for nested SMI injection\n   - A lot of cleanups\"\n\n* tag 'kvm-4.15-1' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (89 commits)\n  KVM: s390: provide a capability for AIS state migration\n  KVM: s390: clear_io_irq() requests are not expected for adapter interrupts\n  KVM: s390: abstract conversion between isc and enum irq_types\n  KVM: s390: vsie: use common code functions for pinning\n  KVM: s390: SIE considerations for AP Queue virtualization\n  KVM: s390: document memory ordering for kvm_s390_vcpu_wakeup\n  KVM: PPC: Book3S HV: Cosmetic post-merge cleanups\n  KVM: arm/arm64: fix the incompatible matching for external abort\n  KVM: arm/arm64: Unify 32bit fault injection\n  KVM: arm/arm64: vgic-its: Implement KVM_DEV_ARM_ITS_CTRL_RESET\n  KVM: arm/arm64: Document KVM_DEV_ARM_ITS_CTRL_RESET\n  KVM: arm/arm64: vgic-its: Free caches when GITS_BASER Valid bit is cleared\n  KVM: arm/arm64: vgic-its: New helper functions to free the caches\n  KVM: arm/arm64: vgic-its: Remove kvm_its_unmap_device\n  arm/arm64: KVM: Load the timer state when enabling the timer\n  KVM: arm/arm64: Rework kvm_timer_should_fire\n  KVM: arm/arm64: Get rid of kvm_timer_flush_hwstate\n  KVM: arm/arm64: Avoid phys timer emulation in vcpu entry/exit\n  KVM: arm/arm64: Move phys_timer_emulate function\n  KVM: arm/arm64: Use kvm_arm_timer_set/get_reg for guest register traps\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Thu Nov 16 13:00:24 2017 -0800",
  "author_date_iso": "2017-11-16T13:00:24-08:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Thu Nov 16 13:00:24 2017 -0800",
  "committer_date_iso": "2017-11-16T13:00:24-08:00",
  "files_changed": [
    "arch/arm/include/uapi/asm/kvm.h",
    "arch/arm64/include/asm/arch_timer.h",
    "arch/arm64/include/uapi/asm/kvm.h",
    "arch/arm64/kvm/hyp/switch.c",
    "arch/arm64/kvm/sys_regs.c",
    "arch/powerpc/kernel/asm-offsets.c",
    "arch/powerpc/kvm/book3s_hv.c",
    "arch/s390/kvm/interrupt.c",
    "arch/s390/kvm/kvm-s390.c",
    "arch/x86/include/asm/kvm_emulate.h",
    "arch/x86/include/asm/kvm_host.h",
    "arch/x86/kvm/lapic.c",
    "arch/x86/kvm/mmu.c",
    "arch/x86/kvm/mmu.h",
    "arch/x86/kvm/vmx.c",
    "drivers/clocksource/arm_arch_timer.c",
    "drivers/irqchip/irq-gic-v3.c",
    "drivers/irqchip/irq-gic.c",
    "include/uapi/linux/kvm.h",
    "virt/kvm/arm/arm.c",
    "virt/kvm/arm/vgic/vgic-its.c",
    "virt/kvm/kvm_main.c"
  ],
  "files_changed_count": 22,
  "stats": [
    {
      "file": "Documentation/virtual/kvm/api.txt",
      "insertions": 13,
      "deletions": 0
    },
    {
      "file": "Documentation/virtual/kvm/devices/arm-vgic-its.txt",
      "insertions": 20,
      "deletions": 0
    },
    {
      "file": "Documentation/virtual/kvm/devices/s390_flic.txt",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "arch/arm/include/asm/kvm_asm.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/arm/include/asm/kvm_emulate.h",
      "insertions": 34,
      "deletions": 4
    },
    {
      "file": "arch/arm/include/asm/kvm_hyp.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/arm/include/uapi/asm/kvm.h",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "arch/arm/kvm/emulate.c",
      "insertions": 0,
      "deletions": 137
    },
    {
      "file": "arch/arm/kvm/hyp/switch.c",
      "insertions": 4,
      "deletions": 3
    },
    {
      "file": "arch/arm64/include/asm/arch_timer.h",
      "insertions": 3,
      "deletions": 5
    },
    {
      "file": "arch/arm64/include/asm/kvm_asm.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/kvm_emulate.h",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "arch/arm64/include/asm/kvm_hyp.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/arm64/include/asm/timex.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/include/uapi/asm/kvm.h",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/switch.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kvm/inject_fault.c",
      "insertions": 3,
      "deletions": 85
    },
    {
      "file": "arch/arm64/kvm/sys_regs.c",
      "insertions": 14,
      "deletions": 27
    },
    {
      "file": "arch/powerpc/include/asm/kvm_book3s.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/include/asm/kvm_book3s_64.h",
      "insertions": 119,
      "deletions": 21
    },
    {
      "file": "arch/powerpc/include/asm/kvm_book3s_asm.h",
      "insertions": 12,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/include/asm/kvm_host.h",
      "insertions": 2,
      "deletions": 4
    },
    {
      "file": "arch/powerpc/include/asm/kvm_ppc.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kernel/asm-offsets.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/book3s_64_mmu_hv.c",
      "insertions": 60,
      "deletions": 68
    },
    {
      "file": "arch/powerpc/kvm/book3s_64_mmu_radix.c",
      "insertions": 10,
      "deletions": 41
    },
    {
      "file": "arch/powerpc/kvm/book3s_64_slb.S",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv.c",
      "insertions": 223,
      "deletions": 124
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv_builtin.c",
      "insertions": 116,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv_rm_mmu.c",
      "insertions": 40,
      "deletions": 25
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv_rmhandlers.S",
      "insertions": 192,
      "deletions": 5
    },
    {
      "file": "arch/powerpc/kvm/book3s_pr.c",
      "insertions": 13,
      "deletions": 3
    },
    {
      "file": "arch/powerpc/kvm/book3s_pr_papr.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/e500_mmu_host.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kvm/powerpc.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "arch/s390/include/asm/kvm_host.h",
      "insertions": 21,
      "deletions": 4
    },
    {
      "file": "arch/s390/kvm/interrupt.c",
      "insertions": 22,
      "deletions": 4
    },
    {
      "file": "arch/s390/kvm/kvm-s390.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/s390/kvm/vsie.c",
      "insertions": 18,
      "deletions": 32
    },
    {
      "file": "arch/x86/include/asm/kvm_emulate.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/x86/include/asm/kvm_host.h",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "arch/x86/include/asm/vmx.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/emulate.c",
      "insertions": 9,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/lapic.c",
      "insertions": 70,
      "deletions": 21
    },
    {
      "file": "arch/x86/kvm/mmu.c",
      "insertions": 54,
      "deletions": 61
    },
    {
      "file": "arch/x86/kvm/mmu.h",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/paging_tmpl.h",
      "insertions": 9,
      "deletions": 9
    },
    {
      "file": "arch/x86/kvm/svm.c",
      "insertions": 171,
      "deletions": 70
    },
    {
      "file": "arch/x86/kvm/vmx.c",
      "insertions": 131,
      "deletions": 77
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "insertions": 67,
      "deletions": 27
    },
    {
      "file": "drivers/clocksource/arm_arch_timer.c",
      "insertions": 31,
      "deletions": 4
    },
    {
      "file": "drivers/irqchip/irq-gic-v3.c",
      "insertions": 6,
      "deletions": 2
    },
    {
      "file": "drivers/irqchip/irq-gic.c",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "include/kvm/arm_arch_timer.h",
      "insertions": 19,
      "deletions": 7
    },
    {
      "file": "include/linux/kvm_host.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "include/uapi/linux/kvm.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/kvm/kvm_stat/kvm_stat",
      "insertions": 17,
      "deletions": 13
    },
    {
      "file": "virt/kvm/arm/aarch32.c",
      "insertions": 92,
      "deletions": 5
    },
    {
      "file": "virt/kvm/arm/arch_timer.c",
      "insertions": 313,
      "deletions": 139
    },
    {
      "file": "virt/kvm/arm/arm.c",
      "insertions": 27,
      "deletions": 18
    },
    {
      "file": "virt/kvm/arm/hyp/timer-sr.c",
      "insertions": 32,
      "deletions": 42
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-its.c",
      "insertions": 106,
      "deletions": 93
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-mmio-v2.c",
      "insertions": 13,
      "deletions": 9
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-mmio-v3.c",
      "insertions": 10,
      "deletions": 7
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-mmio.c",
      "insertions": 26,
      "deletions": 18
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-v2.c",
      "insertions": 3,
      "deletions": 2
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-v3.c",
      "insertions": 7,
      "deletions": 5
    },
    {
      "file": "virt/kvm/arm/vgic/vgic.c",
      "insertions": 39,
      "deletions": 23
    },
    {
      "file": "virt/kvm/arm/vgic/vgic.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "virt/kvm/kvm_main.c",
      "insertions": 3,
      "deletions": 3
    }
  ],
  "total_insertions": 2264,
  "total_deletions": 1270,
  "total_changes": 3534,
  "parents": [
    "441692aafc1731087bbaf657a8b6059d95c2a6df",
    "a6014f1ab7088dc02b58991cfb6b32a34afdbf12"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.15",
    "v4.15-rc1",
    "v4.15-rc2",
    "v4.15-rc3",
    "v4.15-rc4",
    "v4.15-rc5",
    "v4.15-rc6",
    "v4.15-rc7",
    "v4.15-rc8",
    "v4.15-rc9"
  ],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/arm/include/uapi/asm/kvm.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/asm/arch_timer.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/uapi/asm/kvm.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/sys_regs.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/hyp/switch.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/s390/kvm/interrupt.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/powerpc/kernel/asm-offsets.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/s390/kvm/kvm-s390.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/include/asm/kvm_emulate.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/include/asm/kvm_host.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/lapic.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/irqchip/irq-gic.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/mmu.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/mmu.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/irqchip/irq-gic-v3.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/clocksource/arm_arch_timer.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/vmx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/uapi/linux/kvm.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/arm/arm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-its.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/kvm_main.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}