Files changed: 2
Insertions: 4852
Deletions: 619
Total changes: 5471

File-specific changes:
arch/arm64/include/asm/insn.h: +9 -0
arch/arm64/lib/insn.c: +53 -14
arch/arm64/net/bpf_jit.h: +17 -0
arch/arm64/net/bpf_jit_comp.c: +236 -19
include/uapi/linux/btf.h: +2 -2
kernel/bpf/bpf_iter.c: +14 -16
kernel/bpf/stackmap.c: +0 -2
kernel/bpf/verifier.c: +45 -16
kernel/trace/bpf_trace.c: +2 -4
lib/test_bpf.c: +311 -4
net/netfilter/nf_conntrack_bpf.c: +15 -7
samples/bpf/Makefile: +7 -3
samples/bpf/syscall_tp_user.c: +3 -0
samples/bpf/xdp_router_ipv4.bpf.c: +180 -0
samples/bpf/xdp_router_ipv4_kern.c: +0 -186
samples/bpf/xdp_router_ipv4_user.c: +201 -254
tools/bpf/bpftool/feature.c: +1 -1
tools/bpf/bpftool/link.c: +3 -0
tools/bpf/bpftool/prog.c: +1 -0
tools/include/uapi/linux/btf.h: +2 -2
tools/lib/bpf/Build: +2 -1
tools/lib/bpf/Makefile: +1 -1
tools/lib/bpf/btf.c: +2 -4
tools/lib/bpf/libbpf.c: +471 -17
tools/lib/bpf/libbpf.h: +40 -1
tools/lib/bpf/libbpf.map: +1 -0
tools/lib/bpf/libbpf_internal.h: +30 -0
tools/lib/bpf/usdt.bpf.h: +259 -0
tools/lib/bpf/usdt.c: +1335 -0
tools/testing/selftests/bpf/Makefile: +17 -8
tools/testing/selftests/bpf/prog_tests/attach_probe.c: +70 -15
tools/testing/selftests/bpf/prog_tests/for_each.c: +12 -0
tools/testing/selftests/bpf/prog_tests/ksyms_btf.c: +12 -5
tools/testing/selftests/bpf/prog_tests/netcnt.c: +1 -1
tools/testing/selftests/bpf/prog_tests/test_global_funcs.c: +1 -0
tools/testing/selftests/bpf/prog_tests/uprobe_autoattach.c: +49 -0
tools/testing/selftests/bpf/prog_tests/usdt.c: +421 -0
tools/testing/selftests/bpf/progs/for_each_map_elem_write_key.c: +27 -0
tools/testing/selftests/bpf/progs/linked_funcs1.c: +8 -0
tools/testing/selftests/bpf/progs/linked_funcs2.c: +8 -0
tools/testing/selftests/bpf/progs/perf_event_stackmap.c: +2 -2
tools/testing/selftests/bpf/progs/profiler.inc.h: +3 -2
tools/testing/selftests/bpf/progs/test_attach_probe.c: +39 -2
tools/testing/selftests/bpf/progs/test_bpf_cookie.c: +2 -2
tools/testing/selftests/bpf/progs/test_global_func17.c: +16 -0
tools/testing/selftests/bpf/progs/test_ksyms_btf_write_check.c: +17 -1
tools/testing/selftests/bpf/progs/test_l4lb_noinline.c: +1 -1
tools/testing/selftests/bpf/progs/test_sk_assign.c: +1 -3
tools/testing/selftests/bpf/progs/test_task_pt_regs.c: +1 -1
tools/testing/selftests/bpf/progs/test_uprobe_autoattach.c: +73 -0
tools/testing/selftests/bpf/progs/test_urandom_usdt.c: +70 -0
tools/testing/selftests/bpf/progs/test_usdt.c: +96 -0
tools/testing/selftests/bpf/progs/test_usdt_multispec.c: +32 -0
tools/testing/selftests/bpf/progs/test_xdp_noinline.c: +6 -6
tools/testing/selftests/bpf/progs/trigger_bench.c: +1 -1
tools/testing/selftests/bpf/sdt-config.h: +6 -0
tools/testing/selftests/bpf/sdt.h: +513 -0
tools/testing/selftests/bpf/test_bpftool_synctypes.py: +1 -1
tools/testing/selftests/bpf/test_cgroup_storage.c: +2 -1
tools/testing/selftests/bpf/test_offload.py: +1 -1
tools/testing/selftests/bpf/test_progs.c: +4 -2
tools/testing/selftests/bpf/test_progs.h: +2 -0
tools/testing/selftests/bpf/testing_helpers.c: +1 -1
tools/testing/selftests/bpf/trace_helpers.c: +5 -4
tools/testing/selftests/bpf/urandom_read.c: +58 -5
tools/testing/selftests/bpf/urandom_read_aux.c: +9 -0
tools/testing/selftests/bpf/urandom_read_lib1.c: +13 -0
tools/testing/selftests/bpf/urandom_read_lib2.c: +8 -0
