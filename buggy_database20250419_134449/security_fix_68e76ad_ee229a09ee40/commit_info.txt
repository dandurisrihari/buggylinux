Commit Hash: 68e76ad0baf8f5d5060377c2423ee6eed5c63057
Subject: nfsd: pass client principal name in rsc downcall


Security Keywords:
- authentication

Full commit message:
nfsd: pass client principal name in rsc downcall

Two principals are involved in krb5 authentication: the target, who we
authenticate *to* (normally the name of the server, like
nfs/server.citi.umich.edu@CITI.UMICH.EDU), and the source, we we
authenticate *as* (normally a user, like bfields@UMICH.EDU)

In the case of NFSv4 callbacks, the target of the callback should be the
source of the client's setclientid call, and the source should be the
nfs server's own principal.

Therefore we allow svcgssd to pass down the name of the principal that
just authenticated, so that on setclientid we can store that principal
name with the new client, to be used later on callbacks.

Signed-off-by: Olga Kornievskaia <aglo@citi.umich.edu>
Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

Metadata:
Author: Olga Kornievskaia <aglo@citi.umich.edu>
Author Date: Tue Dec 23 16:17:15 2008 -0500
Committer: Trond Myklebust <Trond.Myklebust@netapp.com>
Commit Date: Tue Dec 23 16:17:15 2008 -0500

Files Changed: 4
Lines Added: 36
Lines Removed: 0
Total Changes: 36
