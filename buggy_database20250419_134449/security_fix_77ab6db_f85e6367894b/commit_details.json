{
  "hash": "77ab6db0a1c403387b403e9351ab3f5ae1df83e6",
  "hash_short": "77ab6db0",
  "subject": "KVM: VMX: Reinject real mode exception",
  "body": "As we execute real mode guests in VM86 mode, exception have to be\nreinjected appropriately when the guest triggered them. For this purpose\nthe patch adopts the real-mode injection pattern used in vmx_inject_irq\nto vmx_queue_exception, additionally taking care that the IP is set\ncorrectly for #BP exceptions. Furthermore it extends\nhandle_rmode_exception to reinject all those exceptions that can be\nraised in real mode.\n\nThis fixes the execution of himem.exe from FreeDOS and also makes its\ndebug.com work properly.\n\nNote that guest debugging in real mode is broken now. This has to be\nfixed by the scheduled debugging infrastructure rework (will be done\nonce base patches for QEMU have been accepted).\n\nSigned-off-by: Jan Kiszka <jan.kiszka@web.de>\nSigned-off-by: Avi Kivity <avi@qumranet.com>",
  "full_message": "KVM: VMX: Reinject real mode exception\n\nAs we execute real mode guests in VM86 mode, exception have to be\nreinjected appropriately when the guest triggered them. For this purpose\nthe patch adopts the real-mode injection pattern used in vmx_inject_irq\nto vmx_queue_exception, additionally taking care that the IP is set\ncorrectly for #BP exceptions. Furthermore it extends\nhandle_rmode_exception to reinject all those exceptions that can be\nraised in real mode.\n\nThis fixes the execution of himem.exe from FreeDOS and also makes its\ndebug.com work properly.\n\nNote that guest debugging in real mode is broken now. This has to be\nfixed by the scheduled debugging infrastructure rework (will be done\nonce base patches for QEMU have been accepted).\n\nSigned-off-by: Jan Kiszka <jan.kiszka@web.de>\nSigned-off-by: Avi Kivity <avi@qumranet.com>",
  "author_name": "Jan Kiszka",
  "author_email": "jan.kiszka@web.de",
  "author_date": "Mon Jul 14 12:28:51 2008 +0200",
  "author_date_iso": "2008-07-14T12:28:51+02:00",
  "committer_name": "Avi Kivity",
  "committer_email": "avi@qumranet.com",
  "committer_date": "Wed Oct 15 10:15:14 2008 +0200",
  "committer_date_iso": "2008-10-15T10:15:14+02:00",
  "files_changed": [
    "arch/x86/kvm/vmx.c",
    "include/asm-x86/kvm_host.h"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "arch/x86/kvm/vmx.c",
      "insertions": 39,
      "deletions": 2
    },
    {
      "file": "include/asm-x86/kvm_host.h",
      "insertions": 4,
      "deletions": 0
    }
  ],
  "total_insertions": 43,
  "total_deletions": 2,
  "total_changes": 45,
  "parents": [
    "19bd8afdc4e6fbb47e4841f8d771f8cb29916d9f"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v2.6.28",
    "v2.6.28-rc1",
    "v2.6.28-rc2",
    "v2.6.28-rc3",
    "v2.6.28-rc4",
    "v2.6.28-rc5",
    "v2.6.28-rc6",
    "v2.6.28-rc7",
    "v2.6.28-rc8",
    "v2.6.28-rc9"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/kvm/vmx.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/asm-x86/kvm_host.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}