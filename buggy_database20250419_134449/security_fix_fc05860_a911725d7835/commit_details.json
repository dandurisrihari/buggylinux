{
  "hash": "fc0586062816559defb14c947319ef8c4c326fb3",
  "hash_short": "fc058606",
  "subject": "Merge tag 'for-5.13/drivers-2021-04-27' of git://git.kernel.dk/linux-block",
  "body": "Pull block driver updates from Jens Axboe:\n\n - MD changes via Song:\n        - raid5 POWER fix\n        - raid1 failure fix\n        - UAF fix for md cluster\n        - mddev_find_or_alloc() clean up\n        - Fix NULL pointer deref with external bitmap\n        - Performance improvement for raid10 discard requests\n        - Fix missing information of /proc/mdstat\n\n - rsxx const qualifier removal (Arnd)\n\n - Expose allocated brd pages (Calvin)\n\n - rnbd via Gioh Kim:\n        - Change maintainer\n        - Change domain address of maintainers' email\n        - Add polling IO mode and document update\n        - Fix memory leak and some bug detected by static code analysis\n          tools\n        - Code refactoring\n\n - Series of floppy cleanups/fixes (Denis)\n\n - s390 dasd fixes (Julian)\n\n - kerneldoc fixes (Lee)\n\n - null_blk double free (Lv)\n\n - null_blk virtual boundary addition (Max)\n\n - Remove xsysace driver (Michal)\n\n - umem driver removal (Davidlohr)\n\n - ataflop fixes (Dan)\n\n - Revalidate disk removal (Christoph)\n\n - Bounce buffer cleanups (Christoph)\n\n - Mark lightnvm as deprecated (Christoph)\n\n - mtip32xx init cleanups (Shixin)\n\n - Various fixes (Tian, Gustavo, Coly, Yang, Zhang, Zhiqiang)\n\n* tag 'for-5.13/drivers-2021-04-27' of git://git.kernel.dk/linux-block: (143 commits)\n  async_xor: increase src_offs when dropping destination page\n  drivers/block/null_blk/main: Fix a double free in null_init.\n  md/raid1: properly indicate failure when ending a failed write request\n  md-cluster: fix use-after-free issue when removing rdev\n  nvme: introduce generic per-namespace chardev\n  nvme: cleanup nvme_configure_apst\n  nvme: do not try to reconfigure APST when the controller is not live\n  nvme: add 'kato' sysfs attribute\n  nvme: sanitize KATO setting\n  nvmet: avoid queuing keep-alive timer if it is disabled\n  brd: expose number of allocated pages in debugfs\n  ataflop: fix off by one in ataflop_probe()\n  ataflop: potential out of bounds in do_format()\n  drbd: Fix fall-through warnings for Clang\n  block/rnbd: Use strscpy instead of strlcpy\n  block/rnbd-clt-sysfs: Remove copy buffer overlap in rnbd_clt_get_path_name\n  block/rnbd-clt: Remove max_segment_size\n  block/rnbd-clt: Generate kobject_uevent when the rnbd device state changes\n  block/rnbd-srv: Remove unused arguments of rnbd_srv_rdma_ev\n  Documentation/ABI/rnbd-clt: Add description for nr_poll_queues\n  ...",
  "full_message": "Merge tag 'for-5.13/drivers-2021-04-27' of git://git.kernel.dk/linux-block\n\nPull block driver updates from Jens Axboe:\n\n - MD changes via Song:\n        - raid5 POWER fix\n        - raid1 failure fix\n        - UAF fix for md cluster\n        - mddev_find_or_alloc() clean up\n        - Fix NULL pointer deref with external bitmap\n        - Performance improvement for raid10 discard requests\n        - Fix missing information of /proc/mdstat\n\n - rsxx const qualifier removal (Arnd)\n\n - Expose allocated brd pages (Calvin)\n\n - rnbd via Gioh Kim:\n        - Change maintainer\n        - Change domain address of maintainers' email\n        - Add polling IO mode and document update\n        - Fix memory leak and some bug detected by static code analysis\n          tools\n        - Code refactoring\n\n - Series of floppy cleanups/fixes (Denis)\n\n - s390 dasd fixes (Julian)\n\n - kerneldoc fixes (Lee)\n\n - null_blk double free (Lv)\n\n - null_blk virtual boundary addition (Max)\n\n - Remove xsysace driver (Michal)\n\n - umem driver removal (Davidlohr)\n\n - ataflop fixes (Dan)\n\n - Revalidate disk removal (Christoph)\n\n - Bounce buffer cleanups (Christoph)\n\n - Mark lightnvm as deprecated (Christoph)\n\n - mtip32xx init cleanups (Shixin)\n\n - Various fixes (Tian, Gustavo, Coly, Yang, Zhang, Zhiqiang)\n\n* tag 'for-5.13/drivers-2021-04-27' of git://git.kernel.dk/linux-block: (143 commits)\n  async_xor: increase src_offs when dropping destination page\n  drivers/block/null_blk/main: Fix a double free in null_init.\n  md/raid1: properly indicate failure when ending a failed write request\n  md-cluster: fix use-after-free issue when removing rdev\n  nvme: introduce generic per-namespace chardev\n  nvme: cleanup nvme_configure_apst\n  nvme: do not try to reconfigure APST when the controller is not live\n  nvme: add 'kato' sysfs attribute\n  nvme: sanitize KATO setting\n  nvmet: avoid queuing keep-alive timer if it is disabled\n  brd: expose number of allocated pages in debugfs\n  ataflop: fix off by one in ataflop_probe()\n  ataflop: potential out of bounds in do_format()\n  drbd: Fix fall-through warnings for Clang\n  block/rnbd: Use strscpy instead of strlcpy\n  block/rnbd-clt-sysfs: Remove copy buffer overlap in rnbd_clt_get_path_name\n  block/rnbd-clt: Remove max_segment_size\n  block/rnbd-clt: Generate kobject_uevent when the rnbd device state changes\n  block/rnbd-srv: Remove unused arguments of rnbd_srv_rdma_ev\n  Documentation/ABI/rnbd-clt: Add description for nr_poll_queues\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Wed Apr 28 14:39:37 2021 -0700",
  "author_date_iso": "2021-04-28T14:39:37-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Wed Apr 28 14:39:37 2021 -0700",
  "committer_date_iso": "2021-04-28T14:39:37-07:00",
  "files_changed": [
    "Documentation/filesystems/locking.rst",
    "MAINTAINERS",
    "drivers/block/floppy.c",
    "drivers/block/null_blk/main.c",
    "drivers/block/null_blk/null_blk.h",
    "drivers/block/xen-blkfront.c",
    "drivers/infiniband/ulp/rtrs/rtrs-clt.c",
    "drivers/nvme/host/core.c",
    "drivers/nvme/host/fc.c",
    "drivers/nvme/host/lightnvm.c",
    "drivers/nvme/host/rdma.c",
    "drivers/nvme/host/tcp.c",
    "drivers/nvme/target/core.c",
    "drivers/nvme/target/loop.c",
    "drivers/nvme/target/tcp.c",
    "drivers/s390/block/dasd.c",
    "fs/block_dev.c",
    "include/linux/blkdev.h"
  ],
  "files_changed_count": 18,
  "stats": [
    {
      "file": "Documentation/ABI/testing/sysfs-block-rnbd",
      "insertions": 18,
      "deletions": 0
    },
    {
      "file": "Documentation/ABI/testing/sysfs-class-rnbd-client",
      "insertions": 13,
      "deletions": 0
    },
    {
      "file": "Documentation/filesystems/locking.rst",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "MAINTAINERS",
      "insertions": 2,
      "deletions": 3
    },
    {
      "file": "arch/microblaze/boot/dts/system.dts",
      "insertions": 0,
      "deletions": 8
    },
    {
      "file": "arch/mips/configs/malta_defconfig",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/mips/configs/malta_kvm_defconfig",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/mips/configs/maltaup_xpa_defconfig",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/boot/dts/icon.dts",
      "insertions": 0,
      "deletions": 7
    },
    {
      "file": "arch/powerpc/configs/44x/icon_defconfig",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/x86/include/asm/floppy.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "crypto/async_tx/async_xor.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/block/Kconfig",
      "insertions": 1,
      "deletions": 24
    },
    {
      "file": "drivers/block/Makefile",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "drivers/block/ataflop.c",
      "insertions": 9,
      "deletions": 7
    },
    {
      "file": "drivers/block/brd.c",
      "insertions": 18,
      "deletions": 1
    },
    {
      "file": "drivers/block/drbd/drbd_interval.c",
      "insertions": 5,
      "deletions": 3
    },
    {
      "file": "drivers/block/drbd/drbd_main.c",
      "insertions": 16,
      "deletions": 19
    },
    {
      "file": "drivers/block/drbd/drbd_nl.c",
      "insertions": 10,
      "deletions": 7
    },
    {
      "file": "drivers/block/drbd/drbd_receiver.c",
      "insertions": 13,
      "deletions": 14
    },
    {
      "file": "drivers/block/drbd/drbd_req.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/block/drbd/drbd_state.c",
      "insertions": 4,
      "deletions": 3
    },
    {
      "file": "drivers/block/floppy.c",
      "insertions": 33,
      "deletions": 126
    },
    {
      "file": "drivers/block/mtip32xx/mtip32xx.c",
      "insertions": 4,
      "deletions": 9
    },
    {
      "file": "drivers/block/null_blk/main.c",
      "insertions": 11,
      "deletions": 1
    },
    {
      "file": "drivers/block/null_blk/null_blk.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/block/null_blk/zoned.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/block/paride/pd.c",
      "insertions": 0,
      "deletions": 11
    },
    {
      "file": "drivers/block/rnbd/rnbd-clt-sysfs.c",
      "insertions": 57,
      "deletions": 27
    },
    {
      "file": "drivers/block/rnbd/rnbd-clt.c",
      "insertions": 118,
      "deletions": 53
    },
    {
      "file": "drivers/block/rnbd/rnbd-clt.h",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "drivers/block/rnbd/rnbd-srv-sysfs.c",
      "insertions": 1,
      "deletions": 4
    },
    {
      "file": "drivers/block/rnbd/rnbd-srv.c",
      "insertions": 29,
      "deletions": 40
    },
    {
      "file": "drivers/block/rnbd/rnbd-srv.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "drivers/block/rsxx/core.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/block/swim.c",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "drivers/block/swim3.c",
      "insertions": 25,
      "deletions": 9
    },
    {
      "file": "drivers/block/umem.c",
      "insertions": 0,
      "deletions": 1130
    },
    {
      "file": "drivers/block/umem.h",
      "insertions": 0,
      "deletions": 132
    },
    {
      "file": "drivers/block/xen-blkfront.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "drivers/block/xsysace.c",
      "insertions": 0,
      "deletions": 1273
    },
    {
      "file": "drivers/cdrom/gdrom.c",
      "insertions": 2,
      "deletions": 3
    },
    {
      "file": "drivers/infiniband/ulp/rtrs/rtrs-clt.c",
      "insertions": 53,
      "deletions": 22
    },
    {
      "file": "drivers/infiniband/ulp/rtrs/rtrs-clt.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "drivers/infiniband/ulp/rtrs/rtrs-pri.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/infiniband/ulp/rtrs/rtrs-srv.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/infiniband/ulp/rtrs/rtrs.h",
      "insertions": 6,
      "deletions": 7
    },
    {
      "file": "drivers/lightnvm/Kconfig",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "drivers/lightnvm/core.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "drivers/md/bcache/alloc.c",
      "insertions": 2,
      "deletions": 3
    },
    {
      "file": "drivers/md/bcache/bcache.h",
      "insertions": 2,
      "deletions": 9
    },
    {
      "file": "drivers/md/bcache/btree.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/md/bcache/debug.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/md/bcache/extents.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/md/bcache/features.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/md/bcache/io.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/md/bcache/journal.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "drivers/md/bcache/super.c",
      "insertions": 12,
      "deletions": 13
    },
    {
      "file": "drivers/md/bcache/util.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/md/bcache/writeback.c",
      "insertions": 5,
      "deletions": 6
    },
    {
      "file": "drivers/md/md-bitmap.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/md/md.c",
      "insertions": 122,
      "deletions": 84
    },
    {
      "file": "drivers/md/md.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/md/raid0.c",
      "insertions": 2,
      "deletions": 12
    },
    {
      "file": "drivers/md/raid1.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/md/raid10.c",
      "insertions": 377,
      "deletions": 57
    },
    {
      "file": "drivers/md/raid10.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/host/Makefile",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/nvme/host/core.c",
      "insertions": 419,
      "deletions": 657
    },
    {
      "file": "drivers/nvme/host/fabrics.c",
      "insertions": 1,
      "deletions": 3
    },
    {
      "file": "drivers/nvme/host/fc.c",
      "insertions": 9,
      "deletions": 5
    },
    {
      "file": "drivers/nvme/host/ioctl.c",
      "insertions": 481,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/host/lightnvm.c",
      "insertions": 5,
      "deletions": 5
    },
    {
      "file": "drivers/nvme/host/multipath.c",
      "insertions": 93,
      "deletions": 21
    },
    {
      "file": "drivers/nvme/host/nvme.h",
      "insertions": 44,
      "deletions": 20
    },
    {
      "file": "drivers/nvme/host/pci.c",
      "insertions": 12,
      "deletions": 18
    },
    {
      "file": "drivers/nvme/host/rdma.c",
      "insertions": 4,
      "deletions": 3
    },
    {
      "file": "drivers/nvme/host/tcp.c",
      "insertions": 12,
      "deletions": 4
    },
    {
      "file": "drivers/nvme/host/zns.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/nvme/target/admin-cmd.c",
      "insertions": 10,
      "deletions": 4
    },
    {
      "file": "drivers/nvme/target/configfs.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/target/core.c",
      "insertions": 17,
      "deletions": 16
    },
    {
      "file": "drivers/nvme/target/discovery.c",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "drivers/nvme/target/fabrics-cmd.c",
      "insertions": 7,
      "deletions": 10
    },
    {
      "file": "drivers/nvme/target/fc.c",
      "insertions": 47,
      "deletions": 31
    },
    {
      "file": "drivers/nvme/target/loop.c",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "drivers/nvme/target/nvmet.h",
      "insertions": 5,
      "deletions": 3
    },
    {
      "file": "drivers/nvme/target/tcp.c",
      "insertions": 67,
      "deletions": 12
    },
    {
      "file": "drivers/s390/block/dasd.c",
      "insertions": 2,
      "deletions": 15
    },
    {
      "file": "drivers/s390/block/dasd_devmap.c",
      "insertions": 2,
      "deletions": 13
    },
    {
      "file": "drivers/s390/block/dasd_eckd.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/s390/block/dasd_fba.c",
      "insertions": 2,
      "deletions": 8
    },
    {
      "file": "drivers/s390/block/dasd_int.h",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "fs/block_dev.c",
      "insertions": 0,
      "deletions": 9
    },
    {
      "file": "include/linux/blkdev.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "include/linux/lightnvm.h",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "include/linux/nvme.h",
      "insertions": 10,
      "deletions": 0
    },
    {
      "file": "include/uapi/linux/fd.h",
      "insertions": 23,
      "deletions": 23
    },
    {
      "file": "include/uapi/linux/lightnvm.h",
      "insertions": 0,
      "deletions": 1
    }
  ],
  "total_insertions": 2303,
  "total_deletions": 4055,
  "total_changes": 6358,
  "parents": [
    "6c0029211382011af508273c4fc98a732f841d95",
    "8324fbae75ce65fc2eb960a8434799dca48248ac"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "sanitize"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "Documentation/filesystems/locking.rst",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/block/null_blk/null_blk.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/infiniband/ulp/rtrs/rtrs-clt.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/block/null_blk/main.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/block/xen-blkfront.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/block/floppy.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/nvme/host/core.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/nvme/host/fc.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/nvme/host/rdma.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/nvme/host/lightnvm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "MAINTAINERS",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/nvme/host/tcp.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/nvme/target/core.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/nvme/target/tcp.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/nvme/target/loop.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/blkdev.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/s390/block/dasd.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/block_dev.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}