Commit Hash: 3842d135ff246b6543f1df77f5600e12094a6845
Subject: KVM: Check for pending events before attempting injection


Security Keywords:
- injection

Full commit message:
KVM: Check for pending events before attempting injection

Instead of blindly attempting to inject an event before each guest entry,
check for a possible event first in vcpu->requests.  Sites that can trigger
event injection are modified to set KVM_REQ_EVENT:

- interrupt, nmi window opening
- ppr updates
- i8259 output changes
- local apic irr changes
- rflags updates
- gif flag set
- event set on exit

This improves non-injecting entry performance, and sets the stage for
non-atomic injection.

Signed-off-by: Avi Kivity <avi@redhat.com>

Metadata:
Author: Avi Kivity <avi@redhat.com>
Author Date: Tue Jul 27 12:30:24 2010 +0300
Committer: Avi Kivity <avi@redhat.com>
Commit Date: Sun Oct 24 10:52:50 2010 +0200

Files Changed: 6
Lines Added: 58
Lines Removed: 12
Total Changes: 70
