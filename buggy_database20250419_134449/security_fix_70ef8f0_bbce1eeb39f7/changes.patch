diff --cc fs/f2fs/inline.c
index fa729ff6b2f9,0ccdefe9fdba..e4c527c4e7d0
--- a/fs/f2fs/inline.c
+++ b/fs/f2fs/inline.c
@@@ -533,8 -533,8 +533,8 @@@ int f2fs_add_inline_entry(struct inode 
  
  	f2fs_wait_on_page_writeback(ipage, NODE, true);
  
 -	name_hash = f2fs_dentry_hash(new_name);
 +	name_hash = f2fs_dentry_hash(new_name, NULL);
- 	make_dentry_ptr(NULL, &d, (void *)dentry_blk, 2);
+ 	make_dentry_ptr_inline(NULL, &d, dentry_blk);
  	f2fs_update_dentry(ino, mode, &d, new_name, name_hash, bit_pos);
  
  	set_page_dirty(ipage);