{
  "hash": "d4e7ac68f771addc19352121706d8584eb0166cd",
  "hash_short": "d4e7ac68",
  "subject": "ipmi: kcs_bmc: Strip private client data from struct kcs_bmc",
  "body": "Move all client-private data out of `struct kcs_bmc` into the KCS client\nimplementation.\n\nWith this change the KCS BMC core code now only concerns itself with\nabstract `struct kcs_bmc` and `struct kcs_bmc_client` types, achieving\nexpected separation of concerns. Further, the change clears the path for\nimplementation of alternative userspace interfaces.\n\nThe chardev data-structures are rearranged in the same manner applied to\nthe KCS device driver data-structures in an earlier patch - `struct\nkcs_bmc_client` is embedded in the client's private data and we exploit\ncontainer_of() to translate as required.\n\nFinally, now that it is free of client data, `struct kcs_bmc` is renamed\nto `struct kcs_bmc_device` to contrast `struct kcs_bmc_client`.\n\nSigned-off-by: Andrew Jeffery <andrew@aj.id.au>\nReviewed-by: Zev Weiss <zweiss@equinix.com>\nMessage-Id: <20210608104757.582199-8-andrew@aj.id.au>\nSigned-off-by: Corey Minyard <cminyard@mvista.com>",
  "full_message": "ipmi: kcs_bmc: Strip private client data from struct kcs_bmc\n\nMove all client-private data out of `struct kcs_bmc` into the KCS client\nimplementation.\n\nWith this change the KCS BMC core code now only concerns itself with\nabstract `struct kcs_bmc` and `struct kcs_bmc_client` types, achieving\nexpected separation of concerns. Further, the change clears the path for\nimplementation of alternative userspace interfaces.\n\nThe chardev data-structures are rearranged in the same manner applied to\nthe KCS device driver data-structures in an earlier patch - `struct\nkcs_bmc_client` is embedded in the client's private data and we exploit\ncontainer_of() to translate as required.\n\nFinally, now that it is free of client data, `struct kcs_bmc` is renamed\nto `struct kcs_bmc_device` to contrast `struct kcs_bmc_client`.\n\nSigned-off-by: Andrew Jeffery <andrew@aj.id.au>\nReviewed-by: Zev Weiss <zweiss@equinix.com>\nMessage-Id: <20210608104757.582199-8-andrew@aj.id.au>\nSigned-off-by: Corey Minyard <cminyard@mvista.com>",
  "author_name": "Andrew Jeffery",
  "author_email": "andrew@aj.id.au",
  "author_date": "Tue Jun 8 20:17:48 2021 +0930",
  "author_date_iso": "2021-06-08T20:17:48+09:30",
  "committer_name": "Corey Minyard",
  "committer_email": "cminyard@mvista.com",
  "committer_date": "Mon Jun 21 19:50:22 2021 -0500",
  "committer_date_iso": "2021-06-21T19:50:22-05:00",
  "files_changed": [
    "drivers/char/ipmi/kcs_bmc.c",
    "drivers/char/ipmi/kcs_bmc.h",
    "drivers/char/ipmi/kcs_bmc_aspeed.c",
    "drivers/char/ipmi/kcs_bmc_cdev_ipmi.c",
    "drivers/char/ipmi/kcs_bmc_client.h",
    "drivers/char/ipmi/kcs_bmc_device.h",
    "drivers/char/ipmi/kcs_bmc_npcm7xx.c"
  ],
  "files_changed_count": 7,
  "stats": [
    {
      "file": "drivers/char/ipmi/kcs_bmc.c",
      "insertions": 59,
      "deletions": 11
    },
    {
      "file": "drivers/char/ipmi/kcs_bmc.h",
      "insertions": 9,
      "deletions": 74
    },
    {
      "file": "drivers/char/ipmi/kcs_bmc_aspeed.c",
      "insertions": 11,
      "deletions": 11
    },
    {
      "file": "drivers/char/ipmi/kcs_bmc_cdev_ipmi.c",
      "insertions": 257,
      "deletions": 171
    },
    {
      "file": "drivers/char/ipmi/kcs_bmc_client.h",
      "insertions": 13,
      "deletions": 11
    },
    {
      "file": "drivers/char/ipmi/kcs_bmc_device.h",
      "insertions": 8,
      "deletions": 6
    },
    {
      "file": "drivers/char/ipmi/kcs_bmc_npcm7xx.c",
      "insertions": 10,
      "deletions": 10
    }
  ],
  "total_insertions": 367,
  "total_deletions": 294,
  "total_changes": 661,
  "parents": [
    "faae6e391eda73a5b9870c78349064282a625bfa"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "exploit"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/char/ipmi/kcs_bmc.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/char/ipmi/kcs_bmc.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/char/ipmi/kcs_bmc_aspeed.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/char/ipmi/kcs_bmc_device.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/char/ipmi/kcs_bmc_npcm7xx.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/char/ipmi/kcs_bmc_cdev_ipmi.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/char/ipmi/kcs_bmc_client.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}