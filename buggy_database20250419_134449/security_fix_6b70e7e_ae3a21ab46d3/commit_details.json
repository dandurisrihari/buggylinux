{
  "hash": "6b70e7eb70cd6c5ad445ec02f74b84131a4c721a",
  "hash_short": "6b70e7eb",
  "subject": "wlcore: add new reg-domain configuration command",
  "body": "In 18xx the calibration process of the PHY Cortex domain\nrequires to perform an active calibration of the channel\nbefore it can be used for transmission. To fulfill world\nwide regulatory restrictions, fw should be always\nsynchronized/updated with current CRDA configuration.\nAdd a new \"CMD_DFS_CHANNEL_CONFIG\" command to update the\nfw with current reg-domain, this command passes a bit map\nof channels that are allowed to be used for transmission.\n\nThe driver shall update the fw during initialization and\nafter each change in the current reg-domain\nconfiguration. The driver will save the channel number of\nincoming beacons during the scan process, as they might\nbe a result of the passive scan on\n\"IEEE80211_CHAN_PASSIVE_SCAN\" channel and will update the\nfw accordingly once the scan is finished, the purpose of\nthis is to be ready in case of the authentication request\non one of these disabled (uncalibrated) channels.\n\nThe new command requires to wait for the fw completion\nevent \"DFS_CHANNELS_CONFIG_COMPLETE_EVENT\".\n\nNo scan commands (including the sched scan) can be\nexecuted concurrently with the \"CMD_DFS_CHANNEL_CONFIG\",\nwl->mutex ensures that.\n\n[Arik - move reset of reg_ch_conf_last to safe place inside\nop_stop_locked]\n[Eliad - adjust to new event waiting api]\n\nSigned-off-by: Victor Goldenshtein <victorg@ti.com>\nSigned-off-by: Arik Nemtsov <arik@wizery.com>\nSigned-off-by: Eliad Peller <eliad@wizery.com>\nSigned-off-by: Luciano Coelho <coelho@ti.com>",
  "full_message": "wlcore: add new reg-domain configuration command\n\nIn 18xx the calibration process of the PHY Cortex domain\nrequires to perform an active calibration of the channel\nbefore it can be used for transmission. To fulfill world\nwide regulatory restrictions, fw should be always\nsynchronized/updated with current CRDA configuration.\nAdd a new \"CMD_DFS_CHANNEL_CONFIG\" command to update the\nfw with current reg-domain, this command passes a bit map\nof channels that are allowed to be used for transmission.\n\nThe driver shall update the fw during initialization and\nafter each change in the current reg-domain\nconfiguration. The driver will save the channel number of\nincoming beacons during the scan process, as they might\nbe a result of the passive scan on\n\"IEEE80211_CHAN_PASSIVE_SCAN\" channel and will update the\nfw accordingly once the scan is finished, the purpose of\nthis is to be ready in case of the authentication request\non one of these disabled (uncalibrated) channels.\n\nThe new command requires to wait for the fw completion\nevent \"DFS_CHANNELS_CONFIG_COMPLETE_EVENT\".\n\nNo scan commands (including the sched scan) can be\nexecuted concurrently with the \"CMD_DFS_CHANNEL_CONFIG\",\nwl->mutex ensures that.\n\n[Arik - move reset of reg_ch_conf_last to safe place inside\nop_stop_locked]\n[Eliad - adjust to new event waiting api]\n\nSigned-off-by: Victor Goldenshtein <victorg@ti.com>\nSigned-off-by: Arik Nemtsov <arik@wizery.com>\nSigned-off-by: Eliad Peller <eliad@wizery.com>\nSigned-off-by: Luciano Coelho <coelho@ti.com>",
  "author_name": "Victor Goldenshtein",
  "author_email": "victorg@ti.com",
  "author_date": "Sun Nov 25 18:26:59 2012 +0200",
  "author_date_iso": "2012-11-25T18:26:59+02:00",
  "committer_name": "Luciano Coelho",
  "committer_email": "coelho@ti.com",
  "committer_date": "Wed Nov 28 11:41:43 2012 +0200",
  "committer_date_iso": "2012-11-28T11:41:43+02:00",
  "files_changed": [
    "drivers/net/wireless/ti/wl18xx/event.c",
    "drivers/net/wireless/ti/wl18xx/main.c",
    "drivers/net/wireless/ti/wlcore/cmd.c",
    "drivers/net/wireless/ti/wlcore/cmd.h",
    "drivers/net/wireless/ti/wlcore/event.h",
    "drivers/net/wireless/ti/wlcore/init.c",
    "drivers/net/wireless/ti/wlcore/main.c",
    "drivers/net/wireless/ti/wlcore/rx.c",
    "drivers/net/wireless/ti/wlcore/scan.c",
    "drivers/net/wireless/ti/wlcore/wlcore.h"
  ],
  "files_changed_count": 10,
  "stats": [
    {
      "file": "drivers/net/wireless/ti/wl18xx/event.c",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "drivers/net/wireless/ti/wl18xx/main.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "drivers/net/wireless/ti/wlcore/cmd.c",
      "insertions": 125,
      "deletions": 0
    },
    {
      "file": "drivers/net/wireless/ti/wlcore/cmd.h",
      "insertions": 10,
      "deletions": 0
    },
    {
      "file": "drivers/net/wireless/ti/wlcore/event.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/net/wireless/ti/wlcore/init.c",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "drivers/net/wireless/ti/wlcore/main.c",
      "insertions": 34,
      "deletions": 0
    },
    {
      "file": "drivers/net/wireless/ti/wlcore/rx.c",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "drivers/net/wireless/ti/wlcore/scan.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/net/wireless/ti/wlcore/wlcore.h",
      "insertions": 10,
      "deletions": 0
    }
  ],
  "total_insertions": 197,
  "total_deletions": 1,
  "total_changes": 198,
  "parents": [
    "978cd3a0b82969c1f85942e208f8a00412964ef6"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v3.10",
    "v3.10-rc1",
    "v3.10-rc2",
    "v3.10-rc3",
    "v3.10-rc4",
    "v3.10-rc5",
    "v3.10-rc6",
    "v3.10-rc7",
    "v3.11",
    "v3.11-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/net/wireless/ti/wlcore/init.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/wireless/ti/wl18xx/main.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/wireless/ti/wl18xx/event.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/wireless/ti/wlcore/rx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/wireless/ti/wlcore/event.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/wireless/ti/wlcore/cmd.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/wireless/ti/wlcore/cmd.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/wireless/ti/wlcore/wlcore.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/wireless/ti/wlcore/scan.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/wireless/ti/wlcore/main.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}