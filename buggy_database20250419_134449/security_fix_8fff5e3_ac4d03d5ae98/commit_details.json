{
  "hash": "8fff5e374a2f6047d1bb52288af7da119bc75765",
  "hash_short": "8fff5e37",
  "subject": "Merge tag 'kvm-s390-next-20150122' of git://git.kernel.org/pub/scm/linux/kernel/git/kvms390/linux into kvm-next",
  "body": "KVM: s390: fixes and features for kvm/next (3.20)\n\n1. Generic\n- sparse warning (make function static)\n- optimize locking\n- bugfixes for interrupt injection\n- fix MVPG addressing modes\n\n2. hrtimer/wakeup fun\nA recent change can cause KVM hangs if adjtime is used in the host.\nThe hrtimer might wake up too early or too late. Too early is fatal\nas vcpu_block will see that the wakeup condition is not met and\nsleep again. This CPU might never wake up again.\nThis series addresses this problem. adjclock slowing down the host\nclock will result in too late wakeups. This will require more work.\nIn addition to that we also change the hrtimer from REALTIME to\nMONOTONIC to avoid similar problems with timedatectl set-time.\n\n3. sigp rework\nWe will move all \"slow\" sigps to QEMU (protected with a capability that\ncan be enabled) to avoid several races between concurrent SIGP orders.\n\n4. Optimize the shadow page table\nProvide an interface to announce the maximum guest size. The kernel\nwill use that to make the pagetable 2,3,4 (or theoretically) 5 levels.\n\n5. Provide an interface to set the guest TOD\nWe now use two vm attributes instead of two oneregs, as oneregs are\nvcpu ioctl and we don't want to call them from other threads.\n\n6. Protected key functions\nThe real HMC allows to enable/disable protected key CPACF functions.\nLets provide an implementation + an interface for QEMU to activate\nthis the protected key instructions.",
  "full_message": "Merge tag 'kvm-s390-next-20150122' of git://git.kernel.org/pub/scm/linux/kernel/git/kvms390/linux into kvm-next\n\nKVM: s390: fixes and features for kvm/next (3.20)\n\n1. Generic\n- sparse warning (make function static)\n- optimize locking\n- bugfixes for interrupt injection\n- fix MVPG addressing modes\n\n2. hrtimer/wakeup fun\nA recent change can cause KVM hangs if adjtime is used in the host.\nThe hrtimer might wake up too early or too late. Too early is fatal\nas vcpu_block will see that the wakeup condition is not met and\nsleep again. This CPU might never wake up again.\nThis series addresses this problem. adjclock slowing down the host\nclock will result in too late wakeups. This will require more work.\nIn addition to that we also change the hrtimer from REALTIME to\nMONOTONIC to avoid similar problems with timedatectl set-time.\n\n3. sigp rework\nWe will move all \"slow\" sigps to QEMU (protected with a capability that\ncan be enabled) to avoid several races between concurrent SIGP orders.\n\n4. Optimize the shadow page table\nProvide an interface to announce the maximum guest size. The kernel\nwill use that to make the pagetable 2,3,4 (or theoretically) 5 levels.\n\n5. Provide an interface to set the guest TOD\nWe now use two vm attributes instead of two oneregs, as oneregs are\nvcpu ioctl and we don't want to call them from other threads.\n\n6. Protected key functions\nThe real HMC allows to enable/disable protected key CPACF functions.\nLets provide an implementation + an interface for QEMU to activate\nthis the protected key instructions.",
  "author_name": "Paolo Bonzini",
  "author_email": "pbonzini@redhat.com",
  "author_date": "Fri Jan 23 14:33:36 2015 +0100",
  "author_date_iso": "2015-01-23T14:33:36+01:00",
  "committer_name": "Paolo Bonzini",
  "committer_email": "pbonzini@redhat.com",
  "committer_date": "Fri Jan 23 14:33:36 2015 +0100",
  "committer_date_iso": "2015-01-23T14:33:36+01:00",
  "files_changed": [
    "Documentation/virtual/kvm/api.txt",
    "arch/arm/kvm/arm.c",
    "arch/x86/kvm/x86.c",
    "include/linux/kvm_host.h",
    "include/uapi/linux/kvm.h"
  ],
  "files_changed_count": 5,
  "stats": [
    {
      "file": "Documentation/virtual/kvm/api.txt",
      "insertions": 21,
      "deletions": 1
    },
    {
      "file": "Documentation/virtual/kvm/devices/vm.txt",
      "insertions": 14,
      "deletions": 0
    },
    {
      "file": "arch/arm/kvm/arm.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "arch/mips/kvm/mips.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "arch/powerpc/kvm/powerpc.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "arch/s390/include/asm/kvm_host.h",
      "insertions": 17,
      "deletions": 11
    },
    {
      "file": "arch/s390/include/asm/sclp.h",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "arch/s390/include/uapi/asm/kvm.h",
      "insertions": 16,
      "deletions": 0
    },
    {
      "file": "arch/s390/kvm/intercept.c",
      "insertions": 27,
      "deletions": 14
    },
    {
      "file": "arch/s390/kvm/interrupt.c",
      "insertions": 132,
      "deletions": 57
    },
    {
      "file": "arch/s390/kvm/kvm-s390.c",
      "insertions": 299,
      "deletions": 25
    },
    {
      "file": "arch/s390/kvm/kvm-s390.h",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "arch/s390/kvm/sigp.c",
      "insertions": 93,
      "deletions": 67
    },
    {
      "file": "arch/s390/kvm/trace-s390.h",
      "insertions": 8,
      "deletions": 6
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "insertions": 3,
      "deletions": 7
    },
    {
      "file": "drivers/s390/char/sclp_early.c",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "include/linux/kvm_host.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "include/uapi/linux/kvm.h",
      "insertions": 7,
      "deletions": 0
    }
  ],
  "total_insertions": 656,
  "total_deletions": 198,
  "total_changes": 854,
  "parents": [
    "1c6007d59a20762052cc92c0a2889ff11030d23a",
    "0eb135ff9f19b8336e96fa12c599a8f412e7f0c0"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.0",
    "v4.0-rc1",
    "v4.0-rc2",
    "v4.0-rc3",
    "v4.0-rc4",
    "v4.0-rc5",
    "v4.0-rc6",
    "v4.0-rc7",
    "v4.1",
    "v4.1-rc1"
  ],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "Documentation/virtual/kvm/api.txt",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm/kvm/arm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/kvm_host.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/uapi/linux/kvm.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}