Commit Hash: f1d40433352e5d4babd59c0dd50b5f9414073ddb
Subject: ALSA: rawmidi: Move lock to snd_rawmidi_substream


Security Keywords:
- hardening

Full commit message:
ALSA: rawmidi: Move lock to snd_rawmidi_substream

Having a lock in snd_rawmidi_runtime can be a problem especially when
a substream is accessed from the outside, as the runtime creation
might be racy with the external calls.  As a first step for hardening,
move the spinlock from snd_rawmidi_runtime to snd_rawmidi_substream.

This patch just replaces the lock calls, no real functional change is
put yet.

Link: https://lore.kernel.org/r/20220617144051.18985-3-tiwai@suse.de
Signed-off-by: Takashi Iwai <tiwai@suse.de>

Metadata:
Author: Takashi Iwai <tiwai@suse.de>
Author Date: Fri Jun 17 16:40:48 2022 +0200
Committer: Takashi Iwai <tiwai@suse.de>
Commit Date: Mon Jun 20 09:36:02 2022 +0200

Files Changed: 2
Lines Added: 65
Lines Removed: 68
Total Changes: 133
