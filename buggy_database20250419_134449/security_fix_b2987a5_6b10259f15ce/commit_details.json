{
  "hash": "b2987a5e05ec7a1af7ca42e5d5349d7a22753031",
  "hash_short": "b2987a5e",
  "subject": "eCryptfs: Unlock keys needed by ecryptfsd",
  "body": "Fixes a regression caused by b5695d04634fa4ccca7dcbc05bb4a66522f02e0b\n\nKernel keyring keys containing eCryptfs authentication tokens should not\nbe write locked when calling out to ecryptfsd to wrap and unwrap file\nencryption keys. The eCryptfs kernel code can not hold the key's write\nlock because ecryptfsd needs to request the key after receiving such a\nrequest from the kernel.\n\nWithout this fix, all file opens and creates will timeout and fail when\nusing the eCryptfs PKI infrastructure. This is not an issue when using\npassphrase-based mount keys, which is the most widely deployed eCryptfs\nconfiguration.\n\nSigned-off-by: Tyler Hicks <tyhicks@linux.vnet.ibm.com>\nAcked-by: Roberto Sassu <roberto.sassu@polito.it>\nTested-by: Roberto Sassu <roberto.sassu@polito.it>\nTested-by: Alexis Hafner1 <haf@zurich.ibm.com>\nCc: <stable@kernel.org> [2.6.39+]",
  "full_message": "eCryptfs: Unlock keys needed by ecryptfsd\n\nFixes a regression caused by b5695d04634fa4ccca7dcbc05bb4a66522f02e0b\n\nKernel keyring keys containing eCryptfs authentication tokens should not\nbe write locked when calling out to ecryptfsd to wrap and unwrap file\nencryption keys. The eCryptfs kernel code can not hold the key's write\nlock because ecryptfsd needs to request the key after receiving such a\nrequest from the kernel.\n\nWithout this fix, all file opens and creates will timeout and fail when\nusing the eCryptfs PKI infrastructure. This is not an issue when using\npassphrase-based mount keys, which is the most widely deployed eCryptfs\nconfiguration.\n\nSigned-off-by: Tyler Hicks <tyhicks@linux.vnet.ibm.com>\nAcked-by: Roberto Sassu <roberto.sassu@polito.it>\nTested-by: Roberto Sassu <roberto.sassu@polito.it>\nTested-by: Alexis Hafner1 <haf@zurich.ibm.com>\nCc: <stable@kernel.org> [2.6.39+]",
  "author_name": "Tyler Hicks",
  "author_email": "tyhicks@linux.vnet.ibm.com",
  "author_date": "Tue Jul 26 19:47:08 2011 -0500",
  "author_date_iso": "2011-07-26T19:47:08-05:00",
  "committer_name": "Tyler Hicks",
  "committer_email": "tyhicks@linux.vnet.ibm.com",
  "committer_date": "Thu Jul 28 23:30:09 2011 -0500",
  "committer_date_iso": "2011-07-28T23:30:09-05:00",
  "files_changed": [
    "fs/ecryptfs/keystore.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "fs/ecryptfs/keystore.c",
      "insertions": 25,
      "deletions": 22
    }
  ],
  "total_insertions": 25,
  "total_deletions": 22,
  "total_changes": 47,
  "parents": [
    "55f9c40ff632d03c527d6a6ceddcda0a224587a6"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v3.1",
    "v3.1-rc1",
    "v3.1-rc10",
    "v3.1-rc2",
    "v3.1-rc3",
    "v3.1-rc4",
    "v3.1-rc5",
    "v3.1-rc6",
    "v3.1-rc7",
    "v3.1-rc8"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "fs/ecryptfs/keystore.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}