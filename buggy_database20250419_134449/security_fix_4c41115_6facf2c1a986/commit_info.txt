Commit Hash: 4c411157a42f122051ae3469bee0b5cabe89e139
Subject: lkdtm: Print real addresses


Security Keywords:
- exploit

Full commit message:
lkdtm: Print real addresses

Today, when doing a lkdtm test before the readiness of the
random generator, (ptrval) is printed instead of the address
at which it perform the fault:

[ 1597.337030] lkdtm: Performing direct entry EXEC_USERSPACE
[ 1597.337142] lkdtm: attempting ok execution at (ptrval)
[ 1597.337398] lkdtm: attempting bad execution at (ptrval)
[ 1597.337460] kernel tried to execute user page (77858000) -exploit attempt? (uid: 0)
[ 1597.344769] Unable to handle kernel paging request for instruction fetch
[ 1597.351392] Faulting instruction address: 0x77858000
[ 1597.356312] Oops: Kernel access of bad area, sig: 11 [#1]

If the lkdtm test is done later on, it prints an hashed address.

In both cases this is pointless. The purpose of the test is to
ensure the kernel generates an Oops at the expected address,
so real addresses needs to be printed. This patch fixes that.

Signed-off-by: Christophe Leroy <christophe.leroy@c-s.fr>
Signed-off-by: Kees Cook <keescook@chromium.org>

Metadata:
Author: Christophe Leroy <christophe.leroy@c-s.fr>
Author Date: Wed Nov 7 20:14:10 2018 +0000
Committer: Kees Cook <keescook@chromium.org>
Commit Date: Wed Jan 9 11:58:51 2019 -0800

Files Changed: 1
Lines Added: 9
Lines Removed: 9
Total Changes: 18
