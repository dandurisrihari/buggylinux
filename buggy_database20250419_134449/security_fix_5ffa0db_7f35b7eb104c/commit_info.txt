Commit Hash: 5ffa0dbfdc9fc05acae02d5b0dc766ec778569ac
Subject: platform/chrome: cros_ec: jump to RW before probing


Security Keywords:
- authentication

Full commit message:
platform/chrome: cros_ec: jump to RW before probing

There are EC devices, like FPMCU, that use RWSIG as a method of
authenticating RW section. After the authentication succeeds, EC device
waits some time before jumping to RW. EC can be probed before the jump,
which means there is a time window after jump to RW in which EC won't
respond, because it is not initialized. It can cause a communication
errors after probing.

To avoid such problems, send the RWSIG continue command first, which
skips waiting for the jump to RW. Send the command more times, to make
sure EC is ready in RW before the start of the actual probing process. If
a EC device doesn't support the RWSIG, it will respond with invalid
command error code and probing will continue as usual.

Signed-off-by: Dawid Niedzwiecki <dawidn@google.com>
Link: https://lore.kernel.org/r/20241206091514.2538350-2-dawidn@google.com
Signed-off-by: Tzung-Bi Shih <tzungbi@kernel.org>

Metadata:
Author: Dawid Niedzwiecki <dawidn@google.com>
Author Date: Fri Dec 6 09:15:13 2024 +0000
Committer: Tzung-Bi Shih <tzungbi@kernel.org>
Commit Date: Mon Dec 30 01:31:05 2024 +0000

Files Changed: 9
Lines Added: 74
Lines Removed: 6
Total Changes: 80
