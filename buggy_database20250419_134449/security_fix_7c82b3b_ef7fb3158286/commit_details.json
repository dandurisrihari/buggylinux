{
  "hash": "7c82b3b308f9ca24852e3b0ee963b9eae128b78a",
  "hash_short": "7c82b3b3",
  "subject": "mm: Make failslab writable again",
  "body": "In (060807f841ac mm, slub: make remaining slub_debug related attributes\nread-only) failslab was made read-only.\nI think it became a collateral victim to the two other options for which\nthe reasons are perfectly valid.\nHere is why:\n - sanity_checks and trace are slab internal debug options,\n   failslab is used for fault injection.\n - for fault injections, which by presumption are random, it\n   does not matter if it is not set atomically. And you need to\n   set atleast one more option to trigger fault injection.\n - in a testing scenario you may need to change it at runtime\n   example: module loading - you test all allocations limited\n   by the space option. Then you move to test only your module's\n   own slabs.\n - when set by command line flags it effectively disables all\n   cache merges.\n\nCc: Vlastimil Babka <vbabka@suse.cz>\nCc: Andrew Morton <akpm@linux-foundation.org>\nCc: Kees Cook <keescook@chromium.org>\nCc: Roman Gushchin <guro@fb.com>\nCc: Christoph Lameter <cl@linux.com>\nCc: Jann Horn <jannh@google.com>\nCc: Vijayanand Jitta <vjitta@codeaurora.org>\nCc: David Rientjes <rientjes@google.com>\nCc: Joonsoo Kim <iamjoonsoo.kim@lge.com>\nCc: Pekka Enberg <penberg@kernel.org>\nLink: http://lkml.kernel.org/r/20200610163135.17364-5-vbabka@suse.cz\n\nSigned-off-by: Alexander Atanasov <alexander.atanasov@virtuozzo.com>\nSigned-off-by: Vlastimil Babka <vbabka@suse.cz>",
  "full_message": "mm: Make failslab writable again\n\nIn (060807f841ac mm, slub: make remaining slub_debug related attributes\nread-only) failslab was made read-only.\nI think it became a collateral victim to the two other options for which\nthe reasons are perfectly valid.\nHere is why:\n - sanity_checks and trace are slab internal debug options,\n   failslab is used for fault injection.\n - for fault injections, which by presumption are random, it\n   does not matter if it is not set atomically. And you need to\n   set atleast one more option to trigger fault injection.\n - in a testing scenario you may need to change it at runtime\n   example: module loading - you test all allocations limited\n   by the space option. Then you move to test only your module's\n   own slabs.\n - when set by command line flags it effectively disables all\n   cache merges.\n\nCc: Vlastimil Babka <vbabka@suse.cz>\nCc: Andrew Morton <akpm@linux-foundation.org>\nCc: Kees Cook <keescook@chromium.org>\nCc: Roman Gushchin <guro@fb.com>\nCc: Christoph Lameter <cl@linux.com>\nCc: Jann Horn <jannh@google.com>\nCc: Vijayanand Jitta <vjitta@codeaurora.org>\nCc: David Rientjes <rientjes@google.com>\nCc: Joonsoo Kim <iamjoonsoo.kim@lge.com>\nCc: Pekka Enberg <penberg@kernel.org>\nLink: http://lkml.kernel.org/r/20200610163135.17364-5-vbabka@suse.cz\n\nSigned-off-by: Alexander Atanasov <alexander.atanasov@virtuozzo.com>\nSigned-off-by: Vlastimil Babka <vbabka@suse.cz>",
  "author_name": "Alexander Atanasov",
  "author_email": "alexander.atanasov@virtuozzo.com",
  "author_date": "Tue Sep 20 15:11:11 2022 +0300",
  "author_date_iso": "2022-09-20T15:11:11+03:00",
  "committer_name": "Vlastimil Babka",
  "committer_email": "vbabka@suse.cz",
  "committer_date": "Mon Oct 24 12:19:06 2022 +0200",
  "committer_date_iso": "2022-10-24T12:19:06+02:00",
  "files_changed": [
    "Documentation/mm/slub.rst",
    "mm/slub.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "Documentation/mm/slub.rst",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "mm/slub.c",
      "insertions": 15,
      "deletions": 1
    }
  ],
  "total_insertions": 17,
  "total_deletions": 1,
  "total_changes": 18,
  "parents": [
    "1a5ad30b89b4e9fa64f75b941a324396738b7616"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "Documentation/mm/slub.rst",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "mm/slub.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}