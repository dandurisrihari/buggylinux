{
  "hash": "8dacc7da69a491c515851e68de6036f21b5663ce",
  "hash_short": "8dacc7da",
  "subject": "libceph: replace connection state bits with states",
  "body": "Use a simple set of 6 enumerated values for the socket states (CON_STATE_*)\nand use those instead of the state bits.  All of the con->state checks are\nnow under the protection of the con mutex, so this is safe.  It also\nsimplifies many of the state checks because we can check for anything other\nthan the expected state instead of various bits for races we can think of.\n\nThis appears to hold up well to stress testing both with and without socket\nfailure injection on the server side.\n\nSigned-off-by: Sage Weil <sage@inktank.com>",
  "full_message": "libceph: replace connection state bits with states\n\nUse a simple set of 6 enumerated values for the socket states (CON_STATE_*)\nand use those instead of the state bits.  All of the con->state checks are\nnow under the protection of the con mutex, so this is safe.  It also\nsimplifies many of the state checks because we can check for anything other\nthan the expected state instead of various bits for races we can think of.\n\nThis appears to hold up well to stress testing both with and without socket\nfailure injection on the server side.\n\nSigned-off-by: Sage Weil <sage@inktank.com>",
  "author_name": "Sage Weil",
  "author_email": "sage@inktank.com",
  "author_date": "Fri Jul 20 17:24:40 2012 -0700",
  "author_date_iso": "2012-07-20T17:24:40-07:00",
  "committer_name": "Sage Weil",
  "committer_email": "sage@inktank.com",
  "committer_date": "Mon Jul 30 18:16:00 2012 -0700",
  "committer_date_iso": "2012-07-30T18:16:00-07:00",
  "files_changed": [
    "include/linux/ceph/messenger.h",
    "net/ceph/messenger.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "include/linux/ceph/messenger.h",
      "insertions": 0,
      "deletions": 12
    },
    {
      "file": "net/ceph/messenger.c",
      "insertions": 68,
      "deletions": 62
    }
  ],
  "total_insertions": 68,
  "total_deletions": 74,
  "total_changes": 142,
  "parents": [
    "d7353dd5aaf22ed611fbcd0d4a4a12fb30659290"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v3.10",
    "v3.10-rc1",
    "v3.10-rc2",
    "v3.10-rc3",
    "v3.10-rc4",
    "v3.10-rc5",
    "v3.10-rc6",
    "v3.10-rc7",
    "v3.11",
    "v3.11-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "include/linux/ceph/messenger.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/ceph/messenger.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}