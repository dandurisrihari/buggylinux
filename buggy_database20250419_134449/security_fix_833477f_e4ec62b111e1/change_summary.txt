Files changed: 8
Insertions: 14502
Deletions: 3435
Total changes: 17937

File-specific changes:
Documentation/devicetree/bindings/dsp/fsl,dsp.yaml: +1 -0
Documentation/devicetree/bindings/soc/qcom/qcom,apr.yaml: +103 -9
Documentation/devicetree/bindings/sound/adi,max98396.yaml: +34 -0
Documentation/devicetree/bindings/sound/allwinner,sun50i-h6-dmic.yaml: +79 -0
Documentation/devicetree/bindings/sound/amlogic,gx-sound-card.yaml: +2 -0
Documentation/devicetree/bindings/sound/apple,mca.yaml: +131 -0
Documentation/devicetree/bindings/sound/audio-graph-port.yaml: +17 -8
Documentation/devicetree/bindings/sound/audio-graph.yaml: +5 -4
Documentation/devicetree/bindings/sound/cirrus,cs42l42.yaml: +1 -0
Documentation/devicetree/bindings/sound/dai-params.yaml: +40 -0
Documentation/devicetree/bindings/sound/everest,es8326.yaml: +116 -0
Documentation/devicetree/bindings/sound/fsl,sai.yaml: +216 -0
Documentation/devicetree/bindings/sound/fsl-sai.txt: +0 -95
Documentation/devicetree/bindings/sound/google,sc7180-trogdor.yaml: +4 -0
Documentation/devicetree/bindings/sound/imx-audio-card.yaml: +2 -0
Documentation/devicetree/bindings/sound/mt8186-mt6366-da7219-max98357.yaml: +10 -0
Documentation/devicetree/bindings/sound/mt8186-mt6366-rt1019-rt5682s.yaml: +10 -0
Documentation/devicetree/bindings/sound/mt8192-mt6359-rt1015-rt5682.yaml: +4 -0
Documentation/devicetree/bindings/sound/nau8825.txt: +3 -0
Documentation/devicetree/bindings/sound/qcom,lpass-rx-macro.yaml: +2 -0
Documentation/devicetree/bindings/sound/qcom,lpass-tx-macro.yaml: +2 -0
Documentation/devicetree/bindings/sound/qcom,lpass-va-macro.yaml: +2 -0
Documentation/devicetree/bindings/sound/qcom,lpass-wsa-macro.yaml: +2 -0
Documentation/devicetree/bindings/sound/qcom,q6adm-routing.yaml: +52 -0
Documentation/devicetree/bindings/sound/qcom,q6adm.txt: +0 -39
Documentation/devicetree/bindings/sound/qcom,q6afe.txt: +0 -20
Documentation/devicetree/bindings/sound/qcom,q6apm-dai.yaml: +7 -14
Documentation/devicetree/bindings/sound/qcom,q6asm-dais.yaml: +112 -0
Documentation/devicetree/bindings/sound/qcom,q6asm.txt: +0 -70
Documentation/devicetree/bindings/sound/qcom,q6core.txt: +0 -21
Documentation/devicetree/bindings/sound/qcom,q6dsp-lpass-clocks.yaml: +17 -19
Documentation/devicetree/bindings/sound/qcom,q6dsp-lpass-ports.yaml: +31 -33
Documentation/devicetree/bindings/sound/qcom,sm8250.yaml: +9 -1
Documentation/devicetree/bindings/sound/renesas,rsnd.yaml: +12 -2
Documentation/devicetree/bindings/sound/samsung,aries-wm8994.yaml: +2 -0
Documentation/devicetree/bindings/sound/samsung,midas-audio.yaml: +2 -0
Documentation/devicetree/bindings/sound/samsung,snow.yaml: +2 -0
Documentation/devicetree/bindings/sound/st,stm32-sai.yaml: +5 -0
Documentation/devicetree/bindings/sound/ti,src4xxx.yaml: +48 -0
Documentation/devicetree/bindings/sound/ti,ts3a227e.yaml: +94 -0
Documentation/devicetree/bindings/sound/ts3a227e.txt: +0 -30
Documentation/devicetree/bindings/spi/mediatek,spi-mtk-nor.yaml: +3 -2
Documentation/sound/kernel-api/writing-an-alsa-driver.rst: +8 -13
MAINTAINERS: +19 -0
drivers/soundwire/bus.c: +32 -0
drivers/soundwire/cadence_master.c: +8 -0
drivers/soundwire/cadence_master.h: +2 -0
drivers/soundwire/intel.c: +1 -0
drivers/usb/gadget/function/u_uac1_legacy.c: +2 -2
include/dt-bindings/sound/qcom,q6dsp-lpass-ports.h: +18 -0
include/linux/platform_data/ssm2518.h: +0 -21
include/linux/soundwire/sdw.h: +5 -0
include/linux/string_helpers.h: +2 -0
include/sound/acp62_chip_offset_byte.h: +444 -0
include/sound/cs42l42.h: +1 -0
include/sound/hda_codec.h: +0 -3
include/sound/hda_register.h: +11 -9
include/sound/hdaudio.h: +9 -1
include/sound/hdaudio_ext.h: +1 -13
include/sound/intel-nhlt.h: +7 -0
include/sound/memalloc.h: +0 -3
include/sound/pcm.h: +18 -2
include/sound/simple_card_utils.h: +1 -0
include/sound/soc-acpi-intel-match.h: +2 -1
include/sound/soc.h: +16 -20
include/sound/sof.h: +2 -0
include/sound/sof/control.h: +3 -3
include/sound/sof/dai.h: +2 -0
include/sound/sof/ipc4/header.h: +5 -0
include/trace/events/sof.h: +121 -0
include/trace/events/sof_intel.h: +148 -0
include/uapi/sound/asequencer.h: +0 -16
include/uapi/sound/asoc.h: +0 -4
include/uapi/sound/asound.h: +0 -16
include/uapi/sound/asound_fm.h: +0 -15
include/uapi/sound/compress_offload.h: +0 -17
include/uapi/sound/compress_params.h: +2 -36
include/uapi/sound/emu10k1.h: +0 -16
include/uapi/sound/hdsp.h: +0 -14
include/uapi/sound/hdspm.h: +0 -15
include/uapi/sound/sb16_csp.h: +0 -15
include/uapi/sound/sfnt_info.h: +0 -15
include/uapi/sound/snd_sst_tokens.h: +0 -10
include/uapi/sound/tlv.h: +0 -11
include/uapi/sound/usb_stream.h: +0 -14
lib/string_helpers.c: +44 -0
sound/core/memalloc.c: +48 -65
sound/core/memalloc_local.h: +0 -4
sound/core/oss/pcm_oss.c: +21 -21
sound/core/pcm.c: +5 -4
sound/core/pcm_compat.c: +2 -2
sound/core/pcm_dmaengine.c: +5 -3
sound/core/pcm_lib.c: +8 -8
sound/core/pcm_native.c: +65 -63
sound/drivers/aloop.c: +2 -2
sound/drivers/dummy.c: +28 -14
sound/drivers/vx/vx_pcm.c: +1 -2
sound/firewire/bebob/bebob_pcm.c: +2 -2
sound/firewire/dice/dice-harman.c: +0 -2
sound/firewire/dice/dice-pcm.c: +2 -2
sound/firewire/dice/dice-presonus.c: +0 -2
sound/firewire/digi00x/digi00x-pcm.c: +2 -2
sound/firewire/fireface/ff-pcm.c: +2 -2
sound/firewire/fireface/ff-protocol-former.c: +0 -2
sound/firewire/fireface/ff-protocol-latter.c: +1 -3
sound/firewire/fireworks/fireworks_pcm.c: +2 -2
sound/firewire/motu/motu-pcm.c: +2 -2
sound/firewire/motu/motu-protocol-v1.c: +0 -3
sound/firewire/oxfw/oxfw-pcm.c: +4 -4
sound/firewire/tascam/tascam-pcm.c: +2 -2
sound/hda/ext/hdac_ext_bus.c: +0 -53
sound/hda/ext/hdac_ext_controller.c: +8 -8
sound/hda/ext/hdac_ext_stream.c: +15 -19
sound/hda/hdac_stream.c: +71 -29
sound/hda/hdmi_chmap.c: +1 -1
sound/hda/intel-dsp-config.c: +5 -0
sound/hda/intel-nhlt.c: +79 -0
sound/isa/es18xx.c: +1 -4
sound/isa/sb/emu8000_pcm.c: +1 -1
sound/oss/dmasound/dmasound.h: +0 -3
sound/pci/asihpi/asihpi.c: +1 -1
sound/pci/asihpi/hpifunc.c: +0 -1
sound/pci/asihpi/hpimsgx.c: +0 -5
sound/pci/hda/cs35l41_hda.c: +15 -42
sound/pci/hda/hda_beep.c: +13 -2
sound/pci/hda/hda_beep.h: +1 -0
sound/pci/hda/hda_codec.c: +21 -28
sound/pci/hda/hda_controller.c: +1 -3
sound/pci/hda/hda_eld.c: +5 -1
sound/pci/hda/hda_intel.c: +9 -15
sound/pci/hda/hda_local.h: +2 -1
sound/pci/hda/hda_sysfs.c: +0 -2
sound/pci/hda/patch_ca0132.c: +1 -4
sound/pci/hda/patch_hdmi.c: +53 -152
sound/pci/hda/patch_realtek.c: +37 -7
sound/pci/hda/patch_sigmatel.c: +2 -23
sound/pcmcia/pdaudiocf/pdaudiocf_pcm.c: +1 -2
sound/ppc/tumbler.c: +2 -4
sound/soc/Kconfig: +1 -0
sound/soc/Makefile: +1 -0
sound/soc/amd/Kconfig: +22 -1
sound/soc/amd/Makefile: +1 -0
sound/soc/amd/acp/acp-i2s.c: +79 -1
sound/soc/amd/acp/acp-mach-common.c: +2 -2
sound/soc/amd/acp/acp-pci.c: +9 -10
sound/soc/amd/acp/acp-platform.c: +21 -23
sound/soc/amd/acp/amd.h: +18 -4
sound/soc/amd/ps/Makefile: +9 -0
sound/soc/amd/ps/acp62.h: +98 -0
sound/soc/amd/ps/pci-ps.c: +351 -0
sound/soc/amd/ps/ps-mach.c: +79 -0
sound/soc/amd/ps/ps-pdm-dma.c: +452 -0
sound/soc/amd/vangogh/acp5x-mach.c: +1 -1
sound/soc/amd/yc/acp6x-mach.c: +14 -0
sound/soc/apple/Kconfig: +8 -0
sound/soc/apple/Makefile: +3 -0
sound/soc/apple/mca.c: +1174 -0
sound/soc/atmel/atmel_ssc_dai.c: +1 -4
sound/soc/atmel/sam9g20_wm8731.c: +1 -1
sound/soc/bcm/bcm2835-i2s.c: +3 -8
sound/soc/codecs/Kconfig: +38 -6
sound/soc/codecs/Makefile: +11 -1
sound/soc/codecs/ak4458.c: +11 -46
sound/soc/codecs/cs42l42-i2c.c: +104 -0
sound/soc/codecs/cs42l42.c: +151 -133
sound/soc/codecs/cs42l42.h: +28 -9
sound/soc/codecs/cs42l83-i2c.c: +240 -0
sound/soc/codecs/cs43130.c: +5 -6
sound/soc/codecs/da7219.c: +3 -2
sound/soc/codecs/es8316.c: +24 -0
sound/soc/codecs/es8326.c: +905 -0
sound/soc/codecs/es8326.h: +182 -0
sound/soc/codecs/hda.c: +0 -3
sound/soc/codecs/hdac_hda.c: +10 -19
sound/soc/codecs/hdac_hda.h: +1 -1
sound/soc/codecs/hdmi-codec.c: +1 -13
sound/soc/codecs/lpass-rx-macro.c: +7 -11
sound/soc/codecs/lpass-tx-macro.c: +22 -14
sound/soc/codecs/lpass-va-macro.c: +76 -6
sound/soc/codecs/lpass-wsa-macro.c: +6 -13
sound/soc/codecs/max98088.c: +4 -3
sound/soc/codecs/max98373-sdw.c: +2 -0
sound/soc/codecs/max98390.c: +41 -39
sound/soc/codecs/max98396.c: +102 -0
sound/soc/codecs/max98396.h: +14 -0
sound/soc/codecs/mt6359-accdet.c: +3 -3
sound/soc/codecs/mt6660.c: +6 -2
sound/soc/codecs/nau8825.c: +103 -0
sound/soc/codecs/nau8825.h: +17 -0
sound/soc/codecs/rt1308-sdw.c: +2 -0
sound/soc/codecs/rt1316-sdw.c: +2 -0
sound/soc/codecs/rt5682-sdw.c: +2 -0
sound/soc/codecs/rt5682s.c: +158 -107
sound/soc/codecs/rt5682s.h: +2 -0
sound/soc/codecs/rt700-sdw.c: +2 -0
sound/soc/codecs/rt711-sdca-sdw.c: +2 -0
sound/soc/codecs/rt715-sdca-sdw.c: +2 -0
sound/soc/codecs/rt715-sdw.c: +2 -0
sound/soc/codecs/sigmadsp.c: +1 -3
sound/soc/codecs/src4xxx-i2c.c: +47 -0
sound/soc/codecs/src4xxx.c: +518 -0
sound/soc/codecs/src4xxx.h: +113 -0
sound/soc/codecs/ssm2518.c: +12 -22
sound/soc/codecs/sti-sas.c: +2 -8
sound/soc/codecs/tas2562.c: +31 -63
sound/soc/codecs/tas2764.c: +129 -52
sound/soc/codecs/tas2764.h: +23 -0
sound/soc/codecs/tfa989x.c: +2 -2
sound/soc/codecs/tlv320adcx140.c: +59 -0
sound/soc/codecs/tlv320adcx140.h: +2 -1
sound/soc/codecs/tlv320aic26.c: +1 -1
sound/soc/codecs/ts3a227e.c: +55 -6
sound/soc/codecs/uda134x.c: +1 -1
sound/soc/codecs/wcd-mbhc-v2.c: +7 -5
sound/soc/codecs/wcd9335.c: +10 -6
sound/soc/codecs/wcd934x.c: +1 -1
sound/soc/codecs/wcd938x.c: +0 -1
sound/soc/codecs/wm5102.c: +3 -3
sound/soc/codecs/wm5110.c: +3 -3
sound/soc/codecs/wm8997.c: +3 -3
sound/soc/codecs/wm_adsp.c: +3 -1
sound/soc/codecs/wsa883x.c: +1 -27
sound/soc/fsl/eukrea-tlv320.c: +5 -3
sound/soc/fsl/fsl_asrc.c: +28 -1
sound/soc/fsl/fsl_asrc_dma.c: +1 -2
sound/soc/fsl/fsl_audmix.c: +4 -12
sound/soc/fsl/fsl_sai.c: +43 -12
sound/soc/fsl/fsl_sai.h: +3 -0
sound/soc/fsl/fsl_spdif.c: +20 -1
sound/soc/fsl/fsl_utils.c: +1 -1
sound/soc/fsl/imx-pcm.h: +0 -9
sound/soc/fsl/imx-rpmsg.c: +29 -0
sound/soc/generic/simple-card-utils.c: +49 -13
sound/soc/intel/Kconfig: +1 -1
sound/soc/intel/atom/sst-mfld-platform-pcm.c: +3 -4
sound/soc/intel/atom/sst/sst.c: +4 -4
sound/soc/intel/avs/boards/hdaudio.c: +1 -0
sound/soc/intel/avs/core.c: +2 -2
sound/soc/intel/boards/Makefile: +4 -4
sound/soc/intel/boards/hda_dsp_common.c: +1 -1
sound/soc/intel/boards/skl_hda_dsp_generic.c: +1 -1
sound/soc/intel/boards/sof_cirrus_common.c: +49 -43
sound/soc/intel/boards/sof_cs42l42.c: +7 -7
sound/soc/intel/boards/sof_da7219_max98373.c: +1 -1
sound/soc/intel/boards/sof_es8336.c: +4 -3
sound/soc/intel/boards/sof_nau8825.c: +8 -7
sound/soc/intel/boards/sof_realtek_common.c: +45 -41
sound/soc/intel/boards/sof_realtek_common.h: +1 -1
sound/soc/intel/boards/sof_rt5682.c: +9 -12
sound/soc/intel/boards/sof_ssp_amp.c: +8 -7
sound/soc/intel/catpt/device.c: +30 -3
sound/soc/intel/catpt/sysfs.c: +3 -3
sound/soc/intel/common/Makefile: +1 -1
sound/soc/intel/common/soc-acpi-intel-hsw-bdw-match.c: +0 -15
sound/soc/intel/common/soc-acpi-intel-rpl-match.c: +131 -0
sound/soc/intel/skylake/skl-nhlt.c: +1 -1
sound/soc/intel/skylake/skl-pcm.c: +2 -2
sound/soc/intel/skylake/skl-topology.h: +2 -2
sound/soc/intel/skylake/skl.c: +41 -17
sound/soc/mediatek/mt8183/mt8183-afe-common.h: +3 -0
sound/soc/mediatek/mt8183/mt8183-da7219-max98357.c: +33 -0
sound/soc/mediatek/mt8183/mt8183-dai-i2s.c: +20 -25
sound/soc/mediatek/mt8183/mt8183-mt6358-ts3a227-max98357.c: +33 -0
sound/soc/mediatek/mt8186/mt8186-afe-common.h: +3 -0
sound/soc/mediatek/mt8186/mt8186-afe-gpio.c: +4 -4
sound/soc/mediatek/mt8186/mt8186-afe-pcm.c: +3 -0
sound/soc/mediatek/mt8186/mt8186-dai-i2s.c: +33 -25
sound/soc/mediatek/mt8186/mt8186-mt6366-da7219-max98357.c: +197 -16
sound/soc/mediatek/mt8186/mt8186-mt6366-rt1019-rt5682s.c: +197 -16
sound/soc/mediatek/mt8192/mt8192-afe-common.h: +3 -0
sound/soc/mediatek/mt8192/mt8192-dai-i2s.c: +20 -29
sound/soc/mediatek/mt8192/mt8192-mt6359-rt1015-rt5682.c: +29 -3
sound/soc/mediatek/mt8195/mt8195-afe-clk.c: +2 -2
sound/soc/mediatek/mt8195/mt8195-mt6359.c: +22 -8
sound/soc/qcom/Kconfig: +11 -0
sound/soc/qcom/Makefile: +2 -0
sound/soc/qcom/common.c: +172 -1
sound/soc/qcom/common.h: +35 -0
sound/soc/qcom/qdsp6/q6prm-clocks.c: +9 -0
sound/soc/qcom/qdsp6/q6prm.h: +19 -0
sound/soc/qcom/sc8280xp.c: +157 -0
sound/soc/qcom/sm8250.c: +7 -145
sound/soc/rockchip/rockchip_i2s.c: +16 -25
sound/soc/samsung/aries_wm8994.c: +6 -2
sound/soc/samsung/odroid.c: +1 -1
sound/soc/sh/rcar/ctu.c: +5 -1
sound/soc/sh/rcar/dvc.c: +5 -1
sound/soc/sh/rcar/mix.c: +5 -1
sound/soc/sh/rcar/src.c: +4 -1
sound/soc/sh/rcar/ssi.c: +3 -1
sound/soc/sh/rz-ssi.c: +1 -1
sound/soc/soc-ac97.c: +4 -4
sound/soc/soc-component.c: +2 -4
sound/soc/soc-compress.c: +2 -2
sound/soc/soc-core.c: +26 -21
sound/soc/soc-dai.c: +1 -1
sound/soc/soc-dapm.c: +48 -38
sound/soc/soc-generic-dmaengine-pcm.c: +3 -3
sound/soc/soc-pcm.c: +59 -78
sound/soc/soc-topology.c: +1 -0
sound/soc/soc-utils-test.c: +46 -0
sound/soc/soc-utils.c: +12 -11
sound/soc/sof/Makefile: +2 -1
sound/soc/sof/amd/Kconfig: +10 -0
sound/soc/sof/amd/Makefile: +3 -1
sound/soc/sof/amd/acp-common.c: +111 -0
sound/soc/sof/amd/acp-dsp-offset.h: +20 -13
sound/soc/sof/amd/acp-ipc.c: +36 -13
sound/soc/sof/amd/acp-loader.c: +14 -6
sound/soc/sof/amd/acp-pcm.c: +2 -1
sound/soc/sof/amd/acp-stream.c: +5 -2
sound/soc/sof/amd/acp.c: +36 -16
sound/soc/sof/amd/acp.h: +28 -10
sound/soc/sof/amd/pci-rmb.c: +186 -0
sound/soc/sof/amd/pci-rn.c: +11 -0
sound/soc/sof/amd/rembrandt.c: +134 -0
sound/soc/sof/amd/renoir.c: +12 -89
sound/soc/sof/compress.c: +69 -29
sound/soc/sof/core.c: +3 -0
sound/soc/sof/imx/Kconfig: +9 -0
sound/soc/sof/imx/Makefile: +2 -0
sound/soc/sof/imx/imx8ulp.c: +515 -0
sound/soc/sof/intel/Kconfig: +25 -0
sound/soc/sof/intel/Makefile: +4 -0
sound/soc/sof/intel/apl.c: +10 -1
sound/soc/sof/intel/cnl.c: +36 -7
sound/soc/sof/intel/hda-codec.c: +40 -15
sound/soc/sof/intel/hda-dsp.c: +23 -13
sound/soc/sof/intel/hda-ipc.c: +12 -7
sound/soc/sof/intel/hda-ipc.h: +1 -0
sound/soc/sof/intel/hda-loader-skl.c: +580 -0
sound/soc/sof/intel/hda-loader.c: +4 -6
sound/soc/sof/intel/hda-pcm.c: +2 -2
sound/soc/sof/intel/hda-stream.c: +3 -6
sound/soc/sof/intel/hda.c: +87 -8
sound/soc/sof/intel/hda.h: +18 -6
sound/soc/sof/intel/icl.c: +34 -5
sound/soc/sof/intel/mtl.c: +48 -169
sound/soc/sof/intel/pci-skl.c: +91 -0
sound/soc/sof/intel/pci-tgl.c: +65 -5
sound/soc/sof/intel/shim.h: +2 -0
sound/soc/sof/intel/skl.c: +118 -0
sound/soc/sof/intel/tgl.c: +20 -5
sound/soc/sof/ipc3-pcm.c: +9 -0
sound/soc/sof/ipc3-topology.c: +40 -0
sound/soc/sof/ipc3.c: +6 -6
sound/soc/sof/ipc4-loader.c: +17 -3
sound/soc/sof/ipc4-mtrace.c: +643 -0
sound/soc/sof/ipc4-priv.h: +17 -1
sound/soc/sof/ipc4-topology.c: +10 -4
sound/soc/sof/ipc4.c: +22 -1
sound/soc/sof/mediatek/mt8186/mt8186.c: +93 -5
sound/soc/sof/mediatek/mt8195/mt8195.c: +63 -5
sound/soc/sof/nocodec.c: +2 -2
sound/soc/sof/pcm.c: +9 -4
sound/soc/sof/sof-audio.c: +42 -5
sound/soc/sof/sof-client-probes.c: +15 -89
sound/soc/sof/sof-of-dev.h: +7 -0
sound/soc/sof/sof-pci-dev.c: +1 -1
sound/soc/sof/sof-priv.h: +11 -0
sound/soc/sof/sof-utils.c: +0 -2
sound/soc/sof/topology.c: +3 -11
sound/soc/stm/stm32_adfsdm.c: +5 -3
sound/soc/stm/stm32_i2s.c: +2 -2
sound/soc/stm/stm32_spdifrx.c: +2 -2
sound/soc/sunxi/Kconfig: +7 -0
sound/soc/sunxi/Makefile: +1 -0
sound/soc/sunxi/sun4i-codec.c: +4 -1
sound/soc/sunxi/sun50i-dmic.c: +406 -0
sound/soc/ti/omap-mcbsp-st.c: +3 -3
sound/soc/ti/omap-mcbsp.c: +5 -5
sound/usb/card.c: +25 -7
sound/usb/endpoint.c: +56 -37
sound/usb/endpoint.h: +4 -2
sound/usb/line6/driver.h: +0 -2
sound/usb/pcm.c: +22 -33
sound/usb/quirks-table.h: +76 -0
sound/usb/quirks.c: +302 -42
sound/usb/quirks.h: +0 -2
sound/usb/stream.c: +0 -6
sound/usb/usbaudio.h: +1 -0
sound/usb/usx2y/usbusx2yaudio.c: +1 -2
sound/usb/usx2y/usx2yhwdeppcm.c: +1 -2
