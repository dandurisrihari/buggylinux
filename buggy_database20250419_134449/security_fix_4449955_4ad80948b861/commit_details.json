{
  "hash": "44499559496c1dac43583f4387d38de1b612a69b",
  "hash_short": "44499559",
  "subject": "drm/i915/hdcp: Fix when the first read and write are retried",
  "body": "Make sure that the first read/write in hdcp2_authentication_key_exchange\nare only retried when we have either DP/DPMST encoder connected,\nsince we do this to give docks and dp encoders some extra time to\nget their HDCP DPCD registers ready only for DP/DPMST encoders as\nthis issue is only observed here no need to burden other encoders\nwith extra retries as this causes the HDMI connector to have some\nother timing issue and fails HDCP authentication.\n\n--v2\n-Add intent of patch [Chaitanya]\n-Add reasoning for loop [Jani]\n-Make sure we forfiet the 50ms wait for non DP/DPMST encoders.\n\n--v3\n-Remove the is_dp_encoder check [Jani/Chaitanya]\n-Make the commit message more clearer [Jani]\n\nFixes: 9d5a05f86d2f (\"drm/i915/hdcp: Retry first read and writes to downstream\")\nSigned-off-by: Suraj Kandpal <suraj.kandpal@intel.com>\nReviewed-by: Chaitanya Kumar Borah <chaitanya.kumar.borah@intel.com>\nLink: https://patchwork.freedesktop.org/patch/msgid/20241104035951.517837-1-suraj.kandpal@intel.com",
  "full_message": "drm/i915/hdcp: Fix when the first read and write are retried\n\nMake sure that the first read/write in hdcp2_authentication_key_exchange\nare only retried when we have either DP/DPMST encoder connected,\nsince we do this to give docks and dp encoders some extra time to\nget their HDCP DPCD registers ready only for DP/DPMST encoders as\nthis issue is only observed here no need to burden other encoders\nwith extra retries as this causes the HDMI connector to have some\nother timing issue and fails HDCP authentication.\n\n--v2\n-Add intent of patch [Chaitanya]\n-Add reasoning for loop [Jani]\n-Make sure we forfiet the 50ms wait for non DP/DPMST encoders.\n\n--v3\n-Remove the is_dp_encoder check [Jani/Chaitanya]\n-Make the commit message more clearer [Jani]\n\nFixes: 9d5a05f86d2f (\"drm/i915/hdcp: Retry first read and writes to downstream\")\nSigned-off-by: Suraj Kandpal <suraj.kandpal@intel.com>\nReviewed-by: Chaitanya Kumar Borah <chaitanya.kumar.borah@intel.com>\nLink: https://patchwork.freedesktop.org/patch/msgid/20241104035951.517837-1-suraj.kandpal@intel.com",
  "author_name": "Suraj Kandpal",
  "author_email": "suraj.kandpal@intel.com",
  "author_date": "Mon Nov 4 09:29:51 2024 +0530",
  "author_date_iso": "2024-11-04T09:29:51+05:30",
  "committer_name": "Suraj Kandpal",
  "committer_email": "suraj.kandpal@intel.com",
  "committer_date": "Tue Nov 12 10:29:16 2024 +0530",
  "committer_date_iso": "2024-11-12T10:29:16+05:30",
  "files_changed": [
    "drivers/gpu/drm/i915/display/intel_hdcp.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/gpu/drm/i915/display/intel_hdcp.c",
      "insertions": 20,
      "deletions": 12
    }
  ],
  "total_insertions": 20,
  "total_deletions": 12,
  "total_changes": 32,
  "parents": [
    "ecf2afc59c1ea3cdd3777effa7a422f60b9039c8"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpu/drm/i915/display/intel_hdcp.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}