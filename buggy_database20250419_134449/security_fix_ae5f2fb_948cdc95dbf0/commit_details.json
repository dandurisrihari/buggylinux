{
  "hash": "ae5f2fb1d51fa128a460bcfbe3c56d7ab8bf6a43",
  "hash_short": "ae5f2fb1",
  "subject": "openvswitch: Zero flows on allocation.",
  "body": "When support for megaflows was introduced, OVS needed to start\ninstalling flows with a mask applied to them. Since masking is an\nexpensive operation, OVS also had an optimization that would only\ntake the parts of the flow keys that were covered by a non-zero\nmask. The values stored in the remaining pieces should not matter\nbecause they are masked out.\n\nWhile this works fine for the purposes of matching (which must always\nlook at the mask), serialization to netlink can be problematic. Since\nthe flow and the mask are serialized separately, the uninitialized\nportions of the flow can be encoded with whatever values happen to be\npresent.\n\nIn terms of functionality, this has little effect since these fields\nwill be masked out by definition. However, it leaks kernel memory to\nuserspace, which is a potential security vulnerability. It is also\npossible that other code paths could look at the masked key and get\nuninitialized data, although this does not currently appear to be an\nissue in practice.\n\nThis removes the mask optimization for flows that are being installed.\nThis was always intended to be the case as the mask optimizations were\nreally targetting per-packet flow operations.\n\nFixes: 03f0d916 (\"openvswitch: Mega flow implementation\")\nSigned-off-by: Jesse Gross <jesse@nicira.com>\nAcked-by: Pravin B Shelar <pshelar@nicira.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "full_message": "openvswitch: Zero flows on allocation.\n\nWhen support for megaflows was introduced, OVS needed to start\ninstalling flows with a mask applied to them. Since masking is an\nexpensive operation, OVS also had an optimization that would only\ntake the parts of the flow keys that were covered by a non-zero\nmask. The values stored in the remaining pieces should not matter\nbecause they are masked out.\n\nWhile this works fine for the purposes of matching (which must always\nlook at the mask), serialization to netlink can be problematic. Since\nthe flow and the mask are serialized separately, the uninitialized\nportions of the flow can be encoded with whatever values happen to be\npresent.\n\nIn terms of functionality, this has little effect since these fields\nwill be masked out by definition. However, it leaks kernel memory to\nuserspace, which is a potential security vulnerability. It is also\npossible that other code paths could look at the masked key and get\nuninitialized data, although this does not currently appear to be an\nissue in practice.\n\nThis removes the mask optimization for flows that are being installed.\nThis was always intended to be the case as the mask optimizations were\nreally targetting per-packet flow operations.\n\nFixes: 03f0d916 (\"openvswitch: Mega flow implementation\")\nSigned-off-by: Jesse Gross <jesse@nicira.com>\nAcked-by: Pravin B Shelar <pshelar@nicira.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "author_name": "Jesse Gross",
  "author_email": "jesse@nicira.com",
  "author_date": "Mon Sep 21 20:21:20 2015 -0700",
  "author_date_iso": "2015-09-21T20:21:20-07:00",
  "committer_name": "David S. Miller",
  "committer_email": "davem@davemloft.net",
  "committer_date": "Tue Sep 22 17:33:41 2015 -0700",
  "committer_date_iso": "2015-09-22T17:33:41-07:00",
  "files_changed": [
    "net/openvswitch/datapath.c",
    "net/openvswitch/flow_table.c",
    "net/openvswitch/flow_table.h"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "net/openvswitch/datapath.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "net/openvswitch/flow_table.c",
      "insertions": 12,
      "deletions": 11
    },
    {
      "file": "net/openvswitch/flow_table.h",
      "insertions": 1,
      "deletions": 1
    }
  ],
  "total_insertions": 15,
  "total_deletions": 14,
  "total_changes": 29,
  "parents": [
    "53adc9e83028d9e35b6408231ebaf62a94a16e4d"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "security vulnerability",
      "vulnerability"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "net/openvswitch/datapath.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/openvswitch/flow_table.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/openvswitch/flow_table.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}