Commit Hash: 886e3b7fe6054230c89ae078a09565ed183ecc73
Subject: nfsd4: fix null dereference creating nfsv4 callback client


Security Keywords:
- authentication

Full commit message:
nfsd4: fix null dereference creating nfsv4 callback client

On setting up the callback to the client, we attempt to use the same
authentication flavor the client did.  We find an rpc cred to use by
calling rpcauth_lookup_credcache(), which assumes that the given
authentication flavor has a credentials cache.  However, this is not
required to be true--in particular, auth_null does not use one.
Instead, we should call the auth's lookup_cred() method.

Without this, a client attempting to mount using nfsv4 and auth_null
triggers a null dereference.

Cc: stable@kernel.org
Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>

Metadata:
Author: J. Bruce Fields <bfields@citi.umich.edu>
Author Date: Tue Sep 15 12:22:42 2009 -0400
Committer: J. Bruce Fields <bfields@citi.umich.edu>
Commit Date: Tue Sep 15 20:49:33 2009 -0400

Files Changed: 1
Lines Added: 2
Lines Removed: 2
Total Changes: 4
