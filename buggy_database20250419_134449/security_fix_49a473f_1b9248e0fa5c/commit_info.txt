Commit Hash: 49a473f5b5f54f33e0bd8618158d33f83153c921
Subject: Merge branch 'ibmvnic-Failover-hardening'


Security Keywords:
- hardening

Full commit message:
Merge branch 'ibmvnic-Failover-hardening'

Thomas Falcon says:

====================
ibmvnic: Failover hardening

Introduce additional transport event hardening to handle
events during device reset. In the driver's current state,
if a transport event is received during device reset, it can
cause the device to become unresponsive as invalid operations
are processed as the backing device context changes. After
a transport event, the device expects a request to begin the
initialization process. If the driver is still processing
a previously queued device reset in this state, it is likely
to fail as firmware will reject any commands other than the
one to initialize the client driver's Command-Response Queue.

Instead of failing and becoming dormant, the driver will make
one more attempt to recover and continue operation. This is
achieved by setting a state flag, which if true will direct
the driver to clean up all allocated resources and perform
a hard reset in an attempt to bring the driver back to an
operational state.
====================

Signed-off-by: David S. Miller <davem@davemloft.net>

Metadata:
Author: David S. Miller <davem@davemloft.net>
Author Date: Thu May 24 22:19:26 2018 -0400
Committer: David S. Miller <davem@davemloft.net>
Commit Date: Thu May 24 22:19:26 2018 -0400

Files Changed: 0
Lines Added: 202
Lines Removed: 23
Total Changes: 225
