commit 23e7a7944f3779155e2f6bbc831b544eb925f387
Author: Jason Wang <jasowang@redhat.com>
Date:   Fri Aug 27 17:15:06 2010 +0800

    KVM: pit: Do not check pending pit timer in vcpu thread
    
    Pit interrupt injection was done by workqueue, so no need to check
    pending pit timer in vcpu thread which could lead unnecessary
    unblocking of vcpu.
    
    Signed-off-by: Jason Wang <jasowang@redhat.com>
    Signed-off-by: Avi Kivity <avi@redhat.com>

diff --git a/arch/x86/kvm/irq.c b/arch/x86/kvm/irq.c
index 2095a049835e..f994da40ad94 100644
--- a/arch/x86/kvm/irq.c
+++ b/arch/x86/kvm/irq.c
@@ -33,12 +33,7 @@
  */
 int kvm_cpu_has_pending_timer(struct kvm_vcpu *vcpu)
 {
-	int ret;
-
-	ret = pit_has_pending_timer(vcpu);
-	ret |= apic_has_pending_timer(vcpu);
-
-	return ret;
+	return apic_has_pending_timer(vcpu);
 }
 EXPORT_SYMBOL(kvm_cpu_has_pending_timer);