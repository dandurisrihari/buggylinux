Commit Hash: 1251d2025c3e1bcf1f17ec0f3c0dfae5e5bbb146
Subject: io_uring/sqpoll: early exit thread if task_context wasn't allocated


Security Keywords:
- injection

Full commit message:
io_uring/sqpoll: early exit thread if task_context wasn't allocated

Ideally we'd want to simply kill the task rather than wake it, but for
now let's just add a startup check that causes the thread to exit.
This can only happen if io_uring_alloc_task_context() fails, which
generally requires fault injection.

Reported-by: Ubisectech Sirius <bugreport@ubisectech.com>
Fixes: af5d68f8892f ("io_uring/sqpoll: manage task_work privately")
Signed-off-by: Jens Axboe <axboe@kernel.dk>

Metadata:
Author: Jens Axboe <axboe@kernel.dk>
Author Date: Mon Mar 18 20:22:42 2024 -0600
Committer: Jens Axboe <axboe@kernel.dk>
Commit Date: Mon Mar 18 20:22:42 2024 -0600

Files Changed: 1
Lines Added: 5
Lines Removed: 1
Total Changes: 6
