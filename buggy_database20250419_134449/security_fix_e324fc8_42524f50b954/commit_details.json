{
  "hash": "e324fc82ea453fcbd3898ec7afb792f750c68979",
  "hash_short": "e324fc82",
  "subject": "vfio: Fix bug in vfio_device_get_from_name()",
  "body": "The vfio_device_get_from_name() function might return a\nnon-NULL pointer, when called with a device name that is not\nfound in the list. This causes undefined behavior, in my\ncase calling an invalid function pointer later on:\n\n kernel tried to execute NX-protected page - exploit attempt? (uid: 0)\n BUG: unable to handle kernel paging request at ffff8800cb3ddc08\n\n[...]\n\n Call Trace:\n  [<ffffffffa03bd733>] ? vfio_group_fops_unl_ioctl+0x253/0x410 [vfio]\n  [<ffffffff811efc4d>] do_vfs_ioctl+0x2cd/0x4c0\n  [<ffffffff811f9657>] ? __fget+0x77/0xb0\n  [<ffffffff811efeb9>] SyS_ioctl+0x79/0x90\n  [<ffffffff81001bb0>] ? syscall_return_slowpath+0x50/0x130\n  [<ffffffff8167f776>] entry_SYSCALL_64_fastpath+0x16/0x75\n\nFix the issue by returning NULL when there is no device with\nthe requested name in the list.\n\nCc: stable@vger.kernel.org # v4.2+\nFixes: 4bc94d5dc95d (\"vfio: Fix lockdep issue\")\nSigned-off-by: Joerg Roedel <jroedel@suse.de>\nSigned-off-by: Alex Williamson <alex.williamson@redhat.com>",
  "full_message": "vfio: Fix bug in vfio_device_get_from_name()\n\nThe vfio_device_get_from_name() function might return a\nnon-NULL pointer, when called with a device name that is not\nfound in the list. This causes undefined behavior, in my\ncase calling an invalid function pointer later on:\n\n kernel tried to execute NX-protected page - exploit attempt? (uid: 0)\n BUG: unable to handle kernel paging request at ffff8800cb3ddc08\n\n[...]\n\n Call Trace:\n  [<ffffffffa03bd733>] ? vfio_group_fops_unl_ioctl+0x253/0x410 [vfio]\n  [<ffffffff811efc4d>] do_vfs_ioctl+0x2cd/0x4c0\n  [<ffffffff811f9657>] ? __fget+0x77/0xb0\n  [<ffffffff811efeb9>] SyS_ioctl+0x79/0x90\n  [<ffffffff81001bb0>] ? syscall_return_slowpath+0x50/0x130\n  [<ffffffff8167f776>] entry_SYSCALL_64_fastpath+0x16/0x75\n\nFix the issue by returning NULL when there is no device with\nthe requested name in the list.\n\nCc: stable@vger.kernel.org # v4.2+\nFixes: 4bc94d5dc95d (\"vfio: Fix lockdep issue\")\nSigned-off-by: Joerg Roedel <jroedel@suse.de>\nSigned-off-by: Alex Williamson <alex.williamson@redhat.com>",
  "author_name": "Joerg Roedel",
  "author_email": "jroedel@suse.de",
  "author_date": "Wed Nov 4 13:53:26 2015 +0100",
  "author_date_iso": "2015-11-04T13:53:26+01:00",
  "committer_name": "Alex Williamson",
  "committer_email": "alex.williamson@redhat.com",
  "committer_date": "Wed Nov 4 09:27:39 2015 -0700",
  "committer_date_iso": "2015-11-04T09:27:39-07:00",
  "files_changed": [
    "drivers/vfio/vfio.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/vfio/vfio.c",
      "insertions": 4,
      "deletions": 3
    }
  ],
  "total_insertions": 4,
  "total_deletions": 3,
  "total_changes": 7,
  "parents": [
    "0990822c98661bd625033f0d523b5c33566657ef"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "exploit"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/vfio/vfio.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}