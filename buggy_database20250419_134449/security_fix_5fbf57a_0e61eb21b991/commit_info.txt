Commit Hash: 5fbf57a937f418fe204f9dbb7735e91984f4ee6a
Subject: net: netlink: remove the cb_mutex "injection" from netlink core


Security Keywords:
- injection

Full commit message:
net: netlink: remove the cb_mutex "injection" from netlink core

Back in 2007, in commit af65bdfce98d ("[NETLINK]: Switch cb_lock spinlock
to mutex and allow to override it") netlink core was extended to allow
subsystems to replace the dump mutex lock with its own lock.

The mechanism was used by rtnetlink to take rtnl_lock but it isn't
sufficiently flexible for other users. Over the 17 years since
it was added no other user appeared. Since rtnetlink needs conditional
locking now, and doesn't use it either, axe this feature complete.

Signed-off-by: Jakub Kicinski <kuba@kernel.org>
Reviewed-by: Kuniyuki Iwashima <kuniyu@amazon.com>
Signed-off-by: David S. Miller <davem@davemloft.net>

Metadata:
Author: Jakub Kicinski <kuba@kernel.org>
Author Date: Thu Jun 6 12:29:06 2024 -0700
Committer: David S. Miller <davem@davemloft.net>
Commit Date: Mon Jun 10 13:15:40 2024 +0100

Files Changed: 2
Lines Added: 3
Lines Removed: 16
Total Changes: 19
