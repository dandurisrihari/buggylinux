Commit Hash: bdd70eb68913c960acb895b00a8c62eb64715b1f
Subject: mptcp: drop the push_pending field


Security Keywords:
- injection

Full commit message:
mptcp: drop the push_pending field

Such field is there to avoid acquiring the data lock in a few spots,
but it adds complexity to the already non trivial locking schema.

All the relevant call sites (mptcp-level re-injection, set socket
options), are slow-path, drop such field in favor of 'cb_flags', adding
the relevant locking.

This patch could be seen as an improvement, instead of a fix. But it
simplifies the next patch. The 'Fixes' tag has been added to help having
this series backported to stable.

Fixes: e9d09baca676 ("mptcp: avoid atomic bit manipulation when possible")
Cc: stable@vger.kernel.org
Signed-off-by: Paolo Abeni <pabeni@redhat.com>
Reviewed-by: Mat Martineau <martineau@kernel.org>
Signed-off-by: Matthieu Baerts (NGI0) <matttbe@kernel.org>
Signed-off-by: David S. Miller <davem@davemloft.net>

Metadata:
Author: Paolo Abeni <pabeni@redhat.com>
Author Date: Thu Feb 8 19:03:49 2024 +0100
Committer: David S. Miller <davem@davemloft.net>
Commit Date: Mon Feb 12 10:08:12 2024 +0000

Files Changed: 2
Lines Added: 6
Lines Removed: 7
Total Changes: 13
