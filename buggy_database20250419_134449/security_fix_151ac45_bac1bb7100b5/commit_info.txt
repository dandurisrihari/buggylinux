Commit Hash: 151ac45348afc5b56baa584c7cd4876addf461ff
Subject: net: sparx5: Fix invalid timestamps


Security Keywords:
- injection

Full commit message:
net: sparx5: Fix invalid timestamps

Bit 270-271 are occasionally unexpectedly set by the hardware. This issue
was observed with 10G SFPs causing huge time errors (> 30ms) in PTP. Only
30 bits are needed for the nanosecond part of the timestamp, clear 2 most
significant bits before extracting timestamp from the internal frame
header.

Fixes: 70dfe25cd866 ("net: sparx5: Update extraction/injection for timestamping")
Signed-off-by: Aakash Menon <aakash.menon@protempis.com>
Reviewed-by: Horatiu Vultur <horatiu.vultur@microchip.com>
Signed-off-by: David S. Miller <davem@davemloft.net>

Metadata:
Author: Aakash Menon <aakash.r.menon@gmail.com>
Author Date: Mon Sep 16 22:18:29 2024 -0700
Committer: David S. Miller <davem@davemloft.net>
Commit Date: Sun Sep 22 19:53:19 2024 +0100

Files Changed: 1
Lines Added: 5
Lines Removed: 1
Total Changes: 6
