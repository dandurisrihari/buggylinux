Commit Hash: d9207cf7760f5f5599e9ff7eb0fedf56821a1d59
Subject: EDAC/{skx_common,i10nm}: Fix some missing error reports on Emerald Rapids


Security Keywords:
- injection

Full commit message:
EDAC/{skx_common,i10nm}: Fix some missing error reports on Emerald Rapids

When doing error injection to some memory DIMMs on certain Intel Emerald
Rapids servers, the i10nm_edac missed error reports for some memory DIMMs.

Certain BIOS configurations may hide some memory controllers, and the
i10nm_edac doesn't enumerate these hidden memory controllers. However, the
ADXL decodes memory errors using memory controller physical indices even
if there are hidden memory controllers. Therefore, the memory controller
physical indices reported by the ADXL may mismatch the logical indices
enumerated by the i10nm_edac, resulting in missed error reports for some
memory DIMMs.

Fix this issue by creating a mapping table from memory controller physical
indices (used by the ADXL) to logical indices (used by the i10nm_edac) and
using it to convert the physical indices to the logical indices during the
error handling process.

Fixes: c545f5e41225 ("EDAC/i10nm: Skip the absent memory controllers")
Reported-by: Kevin Chang <kevin1.chang@intel.com>
Tested-by: Kevin Chang <kevin1.chang@intel.com>
Reported-by: Thomas Chen <Thomas.Chen@intel.com>
Tested-by: Thomas Chen <Thomas.Chen@intel.com>
Signed-off-by: Qiuxu Zhuo <qiuxu.zhuo@intel.com>
Signed-off-by: Tony Luck <tony.luck@intel.com>
Link: https://lore.kernel.org/r/20250214002728.6287-1-qiuxu.zhuo@intel.com

Metadata:
Author: Qiuxu Zhuo <qiuxu.zhuo@intel.com>
Author Date: Fri Feb 14 08:27:28 2025 +0800
Committer: Tony Luck <tony.luck@intel.com>
Commit Date: Thu Feb 20 17:02:33 2025 -0800

Files Changed: 3
Lines Added: 46
Lines Removed: 0
Total Changes: 46
