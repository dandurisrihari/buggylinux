Commit Hash: 933e312e73f8fc39652bd4d216a5393cc3a014b9
Subject: [PATCH] fault-injection capability for alloc_pages()


Security Keywords:
- injection

Full commit message:
[PATCH] fault-injection capability for alloc_pages()

This patch provides fault-injection capability for alloc_pages()

Boot option:

fail_page_alloc=<interval>,<probability>,<space>,<times>

	<interval> -- specifies the interval of failures.

	<probability> -- specifies how often it should fail in percent.

	<space> -- specifies the size of free space where memory can be
		   allocated safely in pages.

	<times> -- specifies how many times failures may happen at most.

Debugfs:

/debug/fail_page_alloc/interval
/debug/fail_page_alloc/probability
/debug/fail_page_alloc/specifies
/debug/fail_page_alloc/times
/debug/fail_page_alloc/ignore-gfp-highmem
/debug/fail_page_alloc/ignore-gfp-wait

Example:

	fail_page_alloc=10,100,0,-1

The page allocation (alloc_pages(), ...) fails once per 10 times.

Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com>
Signed-off-by: Andrew Morton <akpm@osdl.org>
Signed-off-by: Linus Torvalds <torvalds@osdl.org>

Metadata:
Author: Akinobu Mita <akinobu.mita@gmail.com>
Author Date: Fri Dec 8 02:39:45 2006 -0800
Committer: Linus Torvalds <torvalds@woody.osdl.org>
Commit Date: Fri Dec 8 08:29:02 2006 -0800

Files Changed: 2
Lines Added: 94
Lines Removed: 0
Total Changes: 94
