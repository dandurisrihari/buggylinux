Commit Hash: c24aa64d169b7224f1a5bc6a4b1365da37ce861b
Subject: fault-injection: add tool to run command with failslab or fail_page_alloc


Security Keywords:
- injection

Full commit message:
fault-injection: add tool to run command with failslab or fail_page_alloc

This adds tools/testing/fault-injection/failcmd.sh to run a command while
injecting slab/page allocation failures via fault injection.

Example:

Run a command "make -C tools/testing/selftests/ run_tests" with
injecting slab allocation failure.

	# ./tools/testing/fault-injection/failcmd.sh \
		-- make -C tools/testing/selftests/ run_tests

Same as above except to specify 100 times failures at most instead of
one time at most by default.

	# ./tools/testing/fault-injection/failcmd.sh --times=100 \
		-- make -C tools/testing/selftests/ run_tests

Same as above except to inject page allocation failure instead of slab
allocation failure.

	# env FAILCMD_TYPE=fail_page_alloc \
		./tools/testing/fault-injection/failcmd.sh --times=100 \
		-- make -C tools/testing/selftests/ run_tests

Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com>
Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

Metadata:
Author: Akinobu Mita <akinobu.mita@gmail.com>
Author Date: Mon Jul 30 14:43:20 2012 -0700
Committer: Linus Torvalds <torvalds@linux-foundation.org>
Commit Date: Mon Jul 30 17:25:22 2012 -0700

Files Changed: 2
Lines Added: 246
Lines Removed: 0
Total Changes: 246
