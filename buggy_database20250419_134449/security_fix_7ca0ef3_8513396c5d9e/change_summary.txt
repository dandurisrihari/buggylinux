Files changed: 4
Insertions: 17740
Deletions: 8749
Total changes: 26489

File-specific changes:
Documentation/admin-guide/kernel-parameters.txt: +15 -0
Documentation/arm64/silicon-errata.txt: +1 -0
Documentation/cgroup-v2.txt: +6 -5
Documentation/dev-tools/kcov.rst: +1 -1
Documentation/devicetree/bindings/arm/marvell/cp110-system-controller0.txt: +3 -3
Documentation/devicetree/bindings/display/exynos/exynos_dsim.txt: +0 -1
Documentation/devicetree/bindings/display/exynos/samsung-fimd.txt: +0 -1
Documentation/devicetree/bindings/mmc/rockchip-dw-mshc.txt: +1 -1
Documentation/devicetree/bindings/phy/brcm,nsp-usb3-phy.txt: +0 -39
Documentation/devicetree/bindings/powerpc/4xx/emac.txt: +60 -2
Documentation/devicetree/bindings/regulator/ti-abb-regulator.txt: +1 -1
Documentation/devicetree/bindings/rng/omap_rng.txt: +2 -1
Documentation/devicetree/bindings/usb/usb251xb.txt: +18 -35
Documentation/extcon/intel-int3496.txt: +5 -0
Documentation/gcc-plugins.txt: +2 -2
Documentation/networking/ip-sysctl.txt: +2 -1
Documentation/trace/kprobetrace.txt: +1 -1
Documentation/trace/uprobetracer.txt: +1 -1
Documentation/virtual/kvm/api.txt: +67 -0
Documentation/vm/userfaultfd.txt: +0 -4
MAINTAINERS: +8 -17
Makefile: +1 -1
arch/arc/boot/dts/skeleton.dtsi: +1 -0
arch/arc/boot/dts/skeleton_hs.dtsi: +1 -0
arch/arc/boot/dts/skeleton_hs_idu.dtsi: +20 -1
arch/arc/boot/dts/vdk_axs10x_mb.dtsi: +13 -7
arch/arc/include/asm/hugepage.h: +1 -0
arch/arc/include/asm/kprobes.h: +1 -3
arch/arc/include/asm/pgtable.h: +1 -0
arch/arc/kernel/entry-arcv2.S: +9 -3
arch/arc/kernel/setup.c: +12 -4
arch/arc/mm/cache.c: +3 -0
arch/arm/boot/dts/am335x-pcm-953.dtsi: +2 -2
arch/arm/boot/dts/am57xx-idk-common.dtsi: +7 -7
arch/arm/boot/dts/bcm5301x.dtsi: +2 -2
arch/arm/boot/dts/bcm953012k.dts: +2 -3
arch/arm/boot/dts/bcm958522er.dts: +1 -0
arch/arm/boot/dts/bcm958525er.dts: +1 -0
arch/arm/boot/dts/bcm958525xmc.dts: +1 -0
arch/arm/boot/dts/bcm958622hr.dts: +1 -0
arch/arm/boot/dts/bcm958623hr.dts: +1 -0
arch/arm/boot/dts/bcm958625hr.dts: +1 -0
arch/arm/boot/dts/bcm988312hr.dts: +1 -0
arch/arm/boot/dts/imx6sx-udoo-neo.dtsi: +0 -5
arch/arm/boot/dts/sama5d2.dtsi: +1 -1
arch/arm/boot/dts/ste-dbx5x0.dtsi: +19 -0
arch/arm/boot/dts/ste-href.dtsi: +0 -9
arch/arm/boot/dts/ste-snowball.dts: +0 -9
arch/arm/boot/dts/sun7i-a20-lamobo-r1.dts: +1 -1
arch/arm/boot/dts/sun8i-a23-a33.dtsi: +1 -1
arch/arm/boot/dts/sun8i-a33.dtsi: +2 -2
arch/arm/boot/dts/sun8i-reference-design-tablet.dtsi: +0 -7
arch/arm/configs/omap2plus_defconfig: +1 -0
arch/arm/include/asm/kvm_arm.h: +1 -0
arch/arm/include/asm/kvm_host.h: +0 -1
arch/arm/include/asm/pgtable.h: +1 -0
arch/arm/kvm/arm.c: +3 -0
arch/arm/kvm/handle_exit.c: +12 -7
arch/arm/mach-at91/pm.c: +17 -1
arch/arm/mach-omap2/Makefile: +0 -3
arch/arm/mach-omap2/gpmc-nand.c: +0 -154
arch/arm/mach-omap2/gpmc-onenand.c: +6 -4
arch/arm/mach-omap2/omap-headsmp.S: +2 -1
arch/arm/mach-omap2/omap_hwmod_3xxx_data.c: +37 -8
arch/arm/tools/syscall.tbl: +1 -0
arch/arm/xen/mm.c: +2 -0
arch/arm64/Kconfig: +14 -0
arch/arm64/boot/dts/broadcom/ns2.dtsi: +11 -0
arch/arm64/include/asm/cpufeature.h: +1 -1
arch/arm64/include/asm/current.h: +0 -2
arch/arm64/include/asm/kvm_host.h: +1 -2
arch/arm64/include/asm/pgtable-types.h: +4 -0
arch/arm64/include/asm/unistd.h: +1 -1
arch/arm64/include/asm/unistd32.h: +8 -0
arch/arm64/kernel/cpuidle.c: +1 -1
arch/arm64/kernel/kaslr.c: +7 -3
arch/arm64/kernel/probes/kprobes.c: +0 -6
arch/arm64/kernel/smp.c: +1 -1
arch/arm64/kernel/vdso/.gitignore: +0 -1
arch/arm64/kvm/handle_exit.c: +12 -7
arch/arm64/kvm/hyp/tlb.c: +55 -9
arch/arm64/mm/kasan_init.c: +1 -1
arch/avr32/include/asm/pgtable-2level.h: +1 -0
arch/avr32/oprofile/backtrace.c: +1 -1
arch/c6x/kernel/ptrace.c: +0 -41
arch/cris/arch-v32/drivers/cryptocop.c: +1 -1
arch/cris/include/asm/pgtable.h: +1 -0
arch/frv/include/asm/pgtable.h: +1 -0
arch/h8300/include/asm/pgtable.h: +1 -0
arch/h8300/kernel/ptrace.c: +5 -3
arch/h8300/kernel/ptrace_h.c: +1 -1
arch/hexagon/include/asm/pgtable.h: +1 -0
arch/ia64/include/asm/pgtable.h: +2 -0
arch/m68k/configs/amiga_defconfig: +13 -1
arch/m68k/configs/apollo_defconfig: +13 -1
arch/m68k/configs/atari_defconfig: +13 -1
arch/m68k/configs/bvme6000_defconfig: +13 -1
arch/m68k/configs/hp300_defconfig: +13 -1
arch/m68k/configs/mac_defconfig: +13 -1
arch/m68k/configs/multi_defconfig: +13 -1
arch/m68k/configs/mvme147_defconfig: +13 -1
arch/m68k/configs/mvme16x_defconfig: +13 -1
arch/m68k/configs/q40_defconfig: +13 -1
arch/m68k/configs/sun3_defconfig: +13 -1
arch/m68k/configs/sun3x_defconfig: +13 -1
arch/m68k/include/asm/bitops.h: +1 -1
arch/m68k/include/asm/unistd.h: +1 -1
arch/m68k/include/uapi/asm/unistd.h: +1 -0
arch/m68k/kernel/syscalltable.S: +1 -0
arch/metag/include/asm/pgtable.h: +1 -0
arch/metag/kernel/ptrace.c: +15 -4
arch/microblaze/include/asm/page.h: +2 -1
arch/mips/cavium-octeon/cpu.c: +2 -0
arch/mips/cavium-octeon/crypto/octeon-crypto.c: +1 -0
arch/mips/cavium-octeon/smp.c: +1 -0
arch/mips/include/asm/fpu.h: +1 -0
arch/mips/include/asm/pgtable-32.h: +1 -0
arch/mips/include/asm/pgtable-64.h: +1 -0
arch/mips/kernel/ptrace.c: +2 -1
arch/mips/kernel/smp-bmips.c: +1 -0
arch/mips/kernel/smp-mt.c: +1 -0
arch/mips/loongson64/loongson-3/cop2-ex.c: +1 -0
arch/mips/netlogic/common/smp.c: +1 -0
arch/mips/netlogic/xlp/cop2-ex.c: +3 -0
arch/mips/sgi-ip22/ip28-berr.c: +1 -0
arch/mips/sgi-ip27/ip27-berr.c: +2 -0
arch/mips/sgi-ip27/ip27-smp.c: +3 -0
arch/mips/sgi-ip32/ip32-berr.c: +1 -0
arch/mips/sgi-ip32/ip32-reset.c: +1 -0
arch/mn10300/include/asm/page.h: +1 -0
arch/nios2/include/asm/pgtable.h: +1 -0
arch/openrisc/include/asm/cmpxchg.h: +6 -2
arch/openrisc/include/asm/pgtable.h: +1 -0
arch/openrisc/include/asm/uaccess.h: +1 -1
arch/openrisc/kernel/or32_ksyms.c: +4 -0
arch/openrisc/kernel/process.c: +1 -0
arch/parisc/include/asm/cacheflush.h: +2 -21
arch/parisc/include/asm/uaccess.h: +36 -26
arch/parisc/include/uapi/asm/unistd.h: +2 -1
arch/parisc/kernel/cache.c: +22 -0
arch/parisc/kernel/module.c: +8 -0
arch/parisc/kernel/parisc_ksyms.c: +0 -10
arch/parisc/kernel/perf.c: +49 -45
arch/parisc/kernel/process.c: +4 -0
arch/parisc/kernel/syscall_table.S: +1 -0
arch/parisc/lib/Makefile: +1 -1
arch/parisc/lib/fixup.S: +0 -98
arch/parisc/lib/lusercopy.S: +318 -0
arch/parisc/lib/memcpy.c: +3 -458
arch/parisc/mm/fault.c: +17 -0
arch/powerpc/Kconfig: +72 -66
arch/powerpc/Makefile: +10 -1
arch/powerpc/boot/zImage.lds.S: +1 -0
arch/powerpc/crypto/crc32c-vpmsum_glue.c: +1 -1
arch/powerpc/include/asm/bitops.h: +4 -0
arch/powerpc/include/asm/book3s/32/pgtable.h: +1 -0
arch/powerpc/include/asm/book3s/64/pgtable.h: +58 -30
arch/powerpc/include/asm/checksum.h: +1 -1
arch/powerpc/include/asm/cpuidle.h: +2 -2
arch/powerpc/include/asm/elf.h: +2 -2
arch/powerpc/include/asm/mce.h: +107 -1
arch/powerpc/include/asm/nohash/32/pgtable.h: +1 -0
arch/powerpc/include/asm/nohash/64/pgtable-4k.h: +3 -0
arch/powerpc/include/asm/nohash/64/pgtable-64k.h: +1 -0
arch/powerpc/include/asm/nohash/pgtable.h: +1 -1
arch/powerpc/include/asm/ppc-opcode.h: +7 -0
arch/powerpc/include/asm/prom.h: +12 -6
arch/powerpc/include/asm/systbl.h: +1 -0
arch/powerpc/include/asm/unistd.h: +1 -1
arch/powerpc/include/uapi/asm/unistd.h: +1 -0
arch/powerpc/kernel/cputable.c: +3 -0
arch/powerpc/kernel/idle_book3s.S: +23 -7
arch/powerpc/kernel/mce.c: +86 -2
arch/powerpc/kernel/mce_power.c: +237 -0
arch/powerpc/kernel/prom_init.c: +113 -7
arch/powerpc/kernel/setup_64.c: +4 -1
arch/powerpc/kvm/book3s_64_mmu_hv.c: +1 -1
arch/powerpc/kvm/book3s_hv_rm_mmu.c: +1 -1
arch/powerpc/lib/Makefile: +1 -0
arch/powerpc/lib/sstep.c: +0 -20
arch/powerpc/lib/test_emulate_step.c: +434 -0
arch/powerpc/mm/init_64.c: +31 -8
arch/powerpc/mm/pgtable-radix.c: +4 -0
arch/powerpc/perf/core-book3s.c: +2 -0
arch/powerpc/perf/isa207-common.c: +36 -7
arch/powerpc/perf/isa207-common.h: +1 -0
arch/powerpc/platforms/powernv/opal-wrappers.S: +2 -2
arch/powerpc/platforms/powernv/opal.c: +6 -15
arch/powerpc/platforms/powernv/pci-ioda.c: +15 -5
arch/powerpc/platforms/pseries/lpar.c: +3 -1
arch/powerpc/purgatory/trampoline.S: +6 -6
arch/powerpc/sysdev/axonram.c: +4 -1
arch/powerpc/sysdev/xics/icp-opal.c: +10 -0
arch/powerpc/sysdev/xics/xics-common.c: +14 -3
arch/s390/configs/default_defconfig: +1 -1
arch/s390/configs/gcov_defconfig: +1 -1
arch/s390/configs/performance_defconfig: +1 -1
arch/s390/crypto/paes_s390.c: +4 -1
arch/s390/defconfig: +1 -1
arch/s390/include/asm/cputime.h: +8 -12
arch/s390/include/asm/pgtable.h: +1 -0
arch/s390/include/asm/sections.h: +0 -1
arch/s390/include/asm/timex.h: +4 -8
arch/s390/include/uapi/asm/unistd.h: +3 -1
arch/s390/kernel/compat_wrapper.c: +1 -0
arch/s390/kernel/entry.S: +5 -5
arch/s390/kernel/ipl.c: +2 -0
arch/s390/kernel/process.c: +3 -0
arch/s390/kernel/syscalls.S: +2 -0
arch/s390/kernel/vmlinux.lds.S: +0 -2
arch/s390/kernel/vtime.c: +1 -1
arch/s390/mm/pgtable.c: +18 -1
arch/score/include/asm/pgtable.h: +1 -0
arch/score/kernel/traps.c: +1 -0
arch/score/mm/extable.c: +2 -0
arch/sh/boards/mach-cayman/setup.c: +0 -2
arch/sh/include/asm/pgtable-2level.h: +1 -0
arch/sh/include/asm/pgtable-3level.h: +1 -0
arch/sparc/include/asm/pgtable_64.h: +1 -0
arch/sparc/kernel/ptrace_64.c: +1 -1
arch/tile/include/asm/pgtable_32.h: +1 -0
arch/tile/include/asm/pgtable_64.h: +1 -0
arch/um/include/asm/pgtable-2level.h: +1 -0
arch/um/include/asm/pgtable-3level.h: +1 -0
arch/unicore32/include/asm/pgtable.h: +1 -0
arch/x86/Makefile: +31 -4
arch/x86/Makefile_32.cpu: +0 -18
arch/x86/boot/compressed/error.c: +1 -0
arch/x86/configs/x86_64_defconfig: +1 -0
arch/x86/events/amd/core.c: +1 -1
arch/x86/events/core.c: +20 -5
arch/x86/events/intel/cstate.c: +1 -1
arch/x86/events/intel/rapl.c: +1 -1
arch/x86/events/intel/uncore.h: +3 -3
arch/x86/hyperv/hv_init.c: +1 -1
arch/x86/include/asm/cpufeatures.h: +2 -1
arch/x86/include/asm/kvm_page_track.h: +1 -0
arch/x86/include/asm/pgtable-3level.h: +0 -3
arch/x86/include/asm/pgtable.h: +1 -1
arch/x86/include/asm/pgtable_types.h: +4 -0
arch/x86/include/asm/pkeys.h: +9 -6
arch/x86/include/asm/purgatory.h: +20 -0
arch/x86/include/asm/timer.h: +2 -0
arch/x86/include/asm/tlbflush.h: +1 -1
arch/x86/include/asm/uv/uv_hub.h: +5 -3
arch/x86/include/uapi/asm/bootparam.h: +1 -1
arch/x86/kernel/acpi/boot.c: +7 -2
arch/x86/kernel/apic/apic.c: +14 -35
arch/x86/kernel/apic/x2apic_uv_x.c: +2 -1
arch/x86/kernel/cpu/amd.c: +0 -4
arch/x86/kernel/cpu/centaur.c: +0 -2
arch/x86/kernel/cpu/common.c: +0 -3
arch/x86/kernel/cpu/cyrix.c: +0 -1
arch/x86/kernel/cpu/intel.c: +0 -4
arch/x86/kernel/cpu/intel_rdt_rdtgroup.c: +1 -2
arch/x86/kernel/cpu/mcheck/mce_amd.c: +1 -1
arch/x86/kernel/cpu/transmeta.c: +0 -2
arch/x86/kernel/cpu/vmware.c: +0 -1
arch/x86/kernel/ftrace.c: +7 -1
arch/x86/kernel/head64.c: +1 -0
arch/x86/kernel/hpet.c: +1 -1
arch/x86/kernel/kdebugfs.c: +1 -1
arch/x86/kernel/kprobes/common.h: +1 -1
arch/x86/kernel/kprobes/core.c: +3 -3
arch/x86/kernel/kprobes/opt.c: +1 -1
arch/x86/kernel/machine_kexec_64.c: +6 -3
arch/x86/kernel/nmi.c: +2 -4
arch/x86/kernel/reboot.c: +16 -0
arch/x86/kernel/tsc.c: +25 -12
arch/x86/kernel/unwind_frame.c: +30 -6
arch/x86/kvm/i8259.c: +3 -0
arch/x86/kvm/ioapic.c: +3 -0
arch/x86/kvm/page_track.c: +8 -0
arch/x86/kvm/svm.c: +3 -0
arch/x86/kvm/vmx.c: +40 -34
arch/x86/kvm/x86.c: +4 -3
arch/x86/lib/memcpy_64.S: +1 -1
arch/x86/mm/gup.c: +21 -16
arch/x86/mm/kasan_init_64.c: +1 -0
arch/x86/mm/kaslr.c: +2 -2
arch/x86/mm/mpx.c: +1 -1
arch/x86/pci/common.c: +9 -0
arch/x86/pci/xen.c: +7 -16
arch/x86/platform/intel-mid/device_libs/Makefile: +1 -0
arch/x86/platform/intel-mid/device_libs/platform_mrfld_power_btn.c: +82 -0
arch/x86/platform/intel-mid/device_libs/platform_mrfld_wdt.c: +1 -1
arch/x86/platform/intel-mid/mfld.c: +4 -11
arch/x86/platform/uv/tlb_uv.c: +0 -1
arch/x86/purgatory/Makefile: +1 -0
arch/x86/purgatory/purgatory.c: +18 -18
arch/x86/purgatory/setup-x86_64.S: +1 -0
arch/x86/purgatory/sha256.h: +0 -1
arch/xtensa/include/asm/pgtable.h: +1 -0
block/bio.c: +9 -3
block/blk-core.c: +31 -10
block/blk-mq-sysfs.c: +25 -15
block/blk-mq-tag.c: +3 -0
block/blk-mq.c: +20 -35
block/blk-mq.h: +2 -0
block/blk-stat.c: +2 -2
block/genhd.c: +10 -27
block/sed-opal.c: +2 -8
crypto/af_alg.c: +5 -4
crypto/algif_hash.c: +5 -4
crypto/lrw.c: +5 -2
crypto/xts.c: +5 -2
drivers/acpi/Makefile: +0 -1
drivers/acpi/acpi_platform.c: +5 -3
drivers/acpi/acpi_processor.c: +42 -15
drivers/acpi/apei/ghes.c: +1 -0
drivers/acpi/bus.c: +0 -1
drivers/acpi/internal.h: +2 -0
drivers/acpi/ioapic.c: +22 -6
drivers/acpi/pci_root.c: +2 -2
drivers/acpi/processor_core.c: +22 -111
drivers/acpi/spcr.c: +1 -1
drivers/ata/ahci_qoriq.c: +4 -2
drivers/ata/libata-sff.c: +0 -1
drivers/ata/libata-transport.c: +3 -6
drivers/auxdisplay/img-ascii-lcd.c: +1 -0
drivers/base/core.c: +0 -5
drivers/block/nbd.c: +103 -33
drivers/block/paride/pcd.c: +1 -1
drivers/block/paride/pd.c: +1 -1
drivers/block/paride/pf.c: +1 -1
drivers/block/paride/pg.c: +1 -1
drivers/block/paride/pt.c: +1 -1
drivers/block/rbd.c: +12 -4
drivers/block/zram/zram_drv.c: +2 -0
drivers/bluetooth/Kconfig: +2 -1
drivers/char/hw_random/amd-rng.c: +34 -8
drivers/char/hw_random/geode-rng.c: +35 -15
drivers/char/hw_random/omap-rng.c: +14 -2
drivers/char/nwbutton.c: +1 -1
drivers/char/ppdev.c: +9 -2
drivers/char/random.c: +50 -79
drivers/clk/clk.c: +2 -1
drivers/clk/rockchip/clk-rk3036.c: +8 -1
drivers/clk/sunxi-ng/Kconfig: +1 -0
drivers/clk/sunxi-ng/ccu-sun50i-a64.c: +1 -1
drivers/clk/sunxi-ng/ccu-sun6i-a31.c: +1 -1
drivers/clk/sunxi-ng/ccu_mp.c: +8 -0
drivers/clk/sunxi-ng/ccu_nkmp.c: +1 -1
drivers/clocksource/clkevt-probe.c: +1 -1
drivers/clocksource/tcb_clksrc.c: +1 -15
drivers/cpufreq/cpufreq.c: +30 -20
drivers/cpufreq/intel_pstate.c: +80 -154
drivers/cpuidle/cpuidle-powernv.c: +18 -0
drivers/cpuidle/sysfs.c: +12 -0
drivers/crypto/ccp/ccp-dev-v5.c: +1 -0
drivers/crypto/ccp/ccp-dev.c: +4 -1
drivers/crypto/ccp/ccp-dev.h: +5 -0
drivers/crypto/ccp/ccp-dmaengine.c: +42 -0
drivers/crypto/s5p-sss.c: +85 -47
drivers/crypto/ux500/cryp/cryp.c: +1 -1
drivers/dax/dax.c: +30 -3
drivers/dma/bcm2835-dma.c: +4 -1
drivers/dma/dmaengine.c: +2 -0
drivers/edac/Kconfig: +10 -0
drivers/edac/Makefile: +1 -0
drivers/edac/i5000_edac.c: +1 -1
drivers/edac/i5400_edac.c: +3 -2
drivers/edac/pnd2_edac.c: +1546 -0
drivers/edac/pnd2_edac.h: +301 -0
drivers/edac/xgene_edac.c: +1 -1
drivers/extcon/Kconfig: +1 -1
drivers/extcon/extcon-intel-int3496.c: +28 -11
drivers/firmware/efi/arm-runtime.c: +1 -0
drivers/firmware/efi/efi.c: +0 -1
drivers/firmware/efi/esrt.c: +1 -1
drivers/firmware/efi/libstub/secureboot.c: +2 -2
drivers/gpio/gpio-altera-a10sr.c: +1 -1
drivers/gpio/gpio-altera.c: +11 -15
drivers/gpio/gpio-mcp23s08.c: +60 -5
drivers/gpio/gpio-mockup.c: +3 -4
drivers/gpio/gpio-xgene.c: +3 -10
drivers/gpu/drm/amd/acp/Makefile: +0 -2
drivers/gpu/drm/amd/amdgpu/amdgpu_cs.c: +2 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_device.c: +8 -5
drivers/gpu/drm/amd/amdgpu/amdgpu_drv.c: +3 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_gem.c: +21 -0
drivers/gpu/drm/amd/amdgpu/sdma_v3_0.c: +1 -1
drivers/gpu/drm/amd/amdgpu/si_dpm.c: +10 -0
drivers/gpu/drm/amd/amdgpu/vi.c: +1 -1
drivers/gpu/drm/amd/powerplay/hwmgr/smu7_clockpowergating.c: +1 -1
drivers/gpu/drm/arm/malidp_crtc.c: +1 -2
drivers/gpu/drm/arm/malidp_hw.c: +1 -1
drivers/gpu/drm/arm/malidp_planes.c: +16 -2
drivers/gpu/drm/arm/malidp_regs.h: +1 -0
drivers/gpu/drm/drm_edid.c: +3 -0
drivers/gpu/drm/drm_fb_helper.c: +3 -3
drivers/gpu/drm/etnaviv/etnaviv_gpu.c: +2 -2
drivers/gpu/drm/exynos/exynos5433_drm_decon.c: +82 -5
drivers/gpu/drm/exynos/exynos7_drm_decon.c: +1 -0
drivers/gpu/drm/exynos/exynos_drm_crtc.c: +16 -13
drivers/gpu/drm/exynos/exynos_drm_crtc.h: +2 -0
drivers/gpu/drm/exynos/exynos_drm_dsi.c: +7 -17
drivers/gpu/drm/exynos/exynos_drm_fimc.c: +1 -1
drivers/gpu/drm/exynos/exynos_drm_fimd.c: +5 -17
drivers/gpu/drm/exynos/exynos_drm_gem.c: +1 -1
drivers/gpu/drm/exynos/exynos_drm_gsc.c: +1 -1
drivers/gpu/drm/exynos/exynos_drm_ipp.c: +11 -11
drivers/gpu/drm/exynos/exynos_drm_rotator.c: +1 -1
drivers/gpu/drm/exynos/exynos_drm_vidi.c: +1 -0
drivers/gpu/drm/exynos/exynos_mixer.c: +1 -0
drivers/gpu/drm/i915/gvt/aperture_gm.c: +4 -4
drivers/gpu/drm/i915/gvt/cfg_space.c: +54 -3
drivers/gpu/drm/i915/gvt/cmd_parser.c: +77 -42
drivers/gpu/drm/i915/gvt/debug.h: +8 -0
drivers/gpu/drm/i915/gvt/display.c: +94 -45
drivers/gpu/drm/i915/gvt/display.h: +19 -1
drivers/gpu/drm/i915/gvt/edid.c: +8 -8
drivers/gpu/drm/i915/gvt/execlist.c: +13 -16
drivers/gpu/drm/i915/gvt/firmware.c: +1 -1
drivers/gpu/drm/i915/gvt/gtt.c: +68 -54
drivers/gpu/drm/i915/gvt/gvt.h: +11 -3
drivers/gpu/drm/i915/gvt/handlers.c: +341 -143
drivers/gpu/drm/i915/gvt/kvmgt.c: +31 -20
drivers/gpu/drm/i915/gvt/mmio.c: +84 -20
drivers/gpu/drm/i915/gvt/mmio.h: +3 -0
drivers/gpu/drm/i915/gvt/opregion.c: +7 -8
drivers/gpu/drm/i915/gvt/render.c: +18 -2
drivers/gpu/drm/i915/gvt/sched_policy.c: +2 -2
drivers/gpu/drm/i915/gvt/scheduler.c: +90 -51
drivers/gpu/drm/i915/gvt/vgpu.c: +45 -27
drivers/gpu/drm/i915/i915_drv.c: +3 -4
drivers/gpu/drm/i915/i915_drv.h: +3 -3
drivers/gpu/drm/i915/i915_gem.c: +115 -6
drivers/gpu/drm/i915/i915_gem_context.c: +0 -1
drivers/gpu/drm/i915/i915_gem_context.h: +0 -3
drivers/gpu/drm/i915/i915_gem_evict.c: +4 -4
drivers/gpu/drm/i915/i915_gem_execbuffer.c: +2 -50
drivers/gpu/drm/i915/i915_gem_object.h: +3 -0
drivers/gpu/drm/i915/i915_gem_shrinker.c: +1 -1
drivers/gpu/drm/i915/i915_irq.c: +38 -45
drivers/gpu/drm/i915/i915_vma.c: +37 -20
drivers/gpu/drm/i915/intel_csr.c: +0 -1
drivers/gpu/drm/i915/intel_display.c: +32 -35
drivers/gpu/drm/i915/intel_engine_cs.c: +2 -0
drivers/gpu/drm/i915/intel_fbdev.c: +4 -6
drivers/gpu/drm/i915/intel_gvt.c: +5 -0
drivers/gpu/drm/i915/intel_hdmi.c: +21 -3
drivers/gpu/drm/i915/intel_hotplug.c: +8 -6
drivers/gpu/drm/i915/intel_lrc.c: +2 -1
drivers/gpu/drm/i915/intel_pm.c: +16 -7
drivers/gpu/drm/i915/intel_ringbuffer.c: +2 -0
drivers/gpu/drm/i915/intel_ringbuffer.h: +3 -0
drivers/gpu/drm/i915/intel_sprite.c: +0 -3
drivers/gpu/drm/i915/intel_uncore.c: +6 -7
drivers/gpu/drm/mxsfb/mxsfb_crtc.c: +43 -6
drivers/gpu/drm/mxsfb/mxsfb_drv.c: +4 -0
drivers/gpu/drm/mxsfb/mxsfb_out.c: +4 -0
drivers/gpu/drm/mxsfb/mxsfb_regs.h: +1 -0
drivers/gpu/drm/omapdrm/omap_gem_dmabuf.c: +0 -3
drivers/gpu/drm/radeon/radeon_ttm.c: +2 -2
drivers/gpu/drm/radeon/si_dpm.c: +10 -0
drivers/gpu/drm/rcar-du/rcar_du_vsp.c: +6 -2
drivers/gpu/drm/tilcdc/tilcdc_crtc.c: +24 -13
drivers/gpu/drm/vc4/vc4_crtc.c: +12 -1
drivers/hid/Kconfig: +3 -2
drivers/hid/hid-chicony.c: +1 -0
drivers/hid/hid-core.c: +3 -0
drivers/hid/hid-corsair.c: +47 -0
drivers/hid/hid-ids.h: +5 -0
drivers/hid/hid-sony.c: +2 -0
drivers/hid/hid-xinmo.c: +1 -0
drivers/hid/usbhid/hid-quirks.c: +3 -0
drivers/hid/wacom_sys.c: +13 -9
drivers/hid/wacom_wac.c: +6 -4
drivers/hv/channel.c: +13 -14
drivers/hv/channel_mgmt.c: +5 -22
drivers/hv/hv_fcopy.c: +0 -4
drivers/hv/hv_kvp.c: +0 -4
drivers/hv/hv_snapshot.c: +0 -4
drivers/hv/hv_util.c: +2 -0
drivers/hv/hv_utils_transport.c: +8 -4
drivers/hv/hv_utils_transport.h: +1 -0
drivers/hv/vmbus_drv.c: +5 -1
drivers/hwmon/asus_atk0110.c: +3 -0
drivers/hwmon/it87.c: +19 -5
drivers/hwmon/max31790.c: +1 -1
drivers/hwtracing/intel_th/core.c: +3 -1
drivers/hwtracing/intel_th/pci.c: +10 -0
drivers/i2c/busses/i2c-brcmstb.c: +21 -6
drivers/i2c/busses/i2c-designware-core.h: +1 -0
drivers/i2c/busses/i2c-designware-platdrv.c: +24 -4
drivers/i2c/busses/i2c-exynos5.c: +2 -1
drivers/i2c/busses/i2c-meson.c: +1 -1
drivers/i2c/busses/i2c-mt65xx.c: +0 -9
drivers/i2c/busses/i2c-riic.c: +5 -1
drivers/i2c/i2c-mux.c: +2 -0
drivers/i2c/muxes/i2c-mux-pca954x.c: +6 -28
drivers/iio/adc/ti_am335x_adc.c: +12 -1
drivers/iio/common/hid-sensors/hid-sensor-trigger.c: +3 -3
drivers/iio/imu/st_lsm6dsx/st_lsm6dsx_buffer.c: +2 -2
drivers/iio/magnetometer/ak8974.c: +2 -2
drivers/infiniband/core/cq.c: +8 -2
drivers/infiniband/core/device.c: +21 -8
drivers/infiniband/hw/i40iw/i40iw_utils.c: +8 -0
drivers/infiniband/hw/ocrdma/ocrdma_verbs.c: +1 -1
drivers/infiniband/hw/qib/qib_iba7322.c: +1 -1
drivers/infiniband/hw/vmw_pvrdma/pvrdma.h: +3 -0
drivers/infiniband/hw/vmw_pvrdma/pvrdma_dev_api.h: +1 -1
drivers/infiniband/hw/vmw_pvrdma/pvrdma_main.c: +13 -4
drivers/infiniband/hw/vmw_pvrdma/pvrdma_qp.c: +18 -24
drivers/infiniband/sw/rdmavt/mmap.c: +2 -2
drivers/infiniband/sw/rxe/Kconfig: +1 -1
drivers/infiniband/sw/rxe/rxe_mmap.c: +2 -2
drivers/infiniband/sw/rxe/rxe_req.c: +1 -1
drivers/infiniband/sw/rxe/rxe_resp.c: +4 -5
drivers/infiniband/ulp/iser/iscsi_iser.h: +2 -0
drivers/infiniband/ulp/iser/iser_verbs.c: +5 -3
drivers/input/joystick/iforce/iforce-usb.c: +3 -0
drivers/input/misc/cm109.c: +4 -0
drivers/input/misc/ims-pcu.c: +4 -0
drivers/input/misc/yealink.c: +4 -0
drivers/input/mouse/alps.c: +52 -20
drivers/input/mouse/alps.h: +11 -0
drivers/input/mouse/elan_i2c_core.c: +11 -9
drivers/input/rmi4/rmi_f30.c: +4 -0
drivers/input/serio/i8042-x86ia64io.h: +14 -0
drivers/input/tablet/hanwang.c: +3 -0
drivers/input/tablet/kbtab.c: +3 -0
drivers/input/touchscreen/sur40.c: +3 -0
drivers/iommu/amd_iommu.c: +1 -1
drivers/iommu/arm-smmu-v3.c: +1 -1
drivers/iommu/arm-smmu.c: +1 -1
drivers/iommu/exynos-iommu.c: +7 -1
drivers/iommu/intel-iommu.c: +2 -2
drivers/iommu/io-pgtable-arm-v7s.c: +5 -1
drivers/iommu/io-pgtable-arm.c: +5 -1
drivers/iommu/iommu.c: +3 -2
drivers/irqchip/Kconfig: +1 -0
drivers/irqchip/irq-crossbar.c: +5 -4
drivers/irqchip/irq-gic-v3-its.c: +16 -0
drivers/irqchip/irq-mips-gic.c: +4 -0
drivers/isdn/gigaset/bas-gigaset.c: +3 -0
drivers/isdn/hisax/st5481_b.c: +1 -1
drivers/macintosh/macio_asic.c: +1 -0
drivers/md/bcache/util.h: +0 -1
drivers/md/dm.c: +16 -13
drivers/md/md-cluster.c: +1 -1
drivers/md/md.c: +11 -16
drivers/md/md.h: +0 -6
drivers/md/raid1.c: +24 -5
drivers/md/raid10.c: +36 -8
drivers/md/raid5.c: +2 -3
drivers/media/dvb-frontends/drx39xyj/drx_driver.h: +3 -5
drivers/media/platform/vsp1/vsp1_drm.c: +16 -17
drivers/media/rc/lirc_dev.c: +2 -2
drivers/media/rc/nuvoton-cir.c: +3 -2
drivers/media/rc/rc-main.c: +15 -11
drivers/media/rc/serial_ir.c: +62 -61
drivers/media/usb/dvb-usb/dw2102.c: +145 -99
drivers/memory/omap-gpmc.c: +1 -3
drivers/misc/cxl/pci.c: +6 -7
drivers/misc/mei/bus-fixup.c: +2 -12
drivers/misc/mei/init.c: +6 -2
drivers/misc/sgi-gru/grufault.c: +7 -2
drivers/misc/vmw_vmci/vmci_guest.c: +2 -2
drivers/mmc/core/block.c: +3 -4
drivers/mmc/core/mmc.c: +1 -1
drivers/mmc/host/mtk-sd.c: +2 -2
drivers/mmc/host/sdhci-of-arasan.c: +5 -9
drivers/mmc/host/sdhci-of-at91.c: +29 -1
drivers/mmc/host/sdhci-pci-core.c: +4 -0
drivers/mmc/host/sdhci.c: +9 -1
drivers/mmc/host/ushc.c: +3 -0
drivers/mtd/spi-nor/spi-nor.c: +1 -1
drivers/net/ethernet/amd/xgbe/xgbe-common.h: +16 -14
drivers/net/ethernet/amd/xgbe/xgbe-dev.c: +11 -9
drivers/net/ethernet/amd/xgbe/xgbe-drv.c: +65 -47
drivers/net/ethernet/aquantia/atlantic/aq_main.c: +1 -0
drivers/net/ethernet/aquantia/atlantic/aq_pci_func.c: +1 -1
drivers/net/ethernet/aquantia/atlantic/hw_atl/hw_atl_a0_internal.h: +1 -0
drivers/net/ethernet/aquantia/atlantic/hw_atl/hw_atl_b0_internal.h: +1 -0
drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c: +30 -6
drivers/net/ethernet/broadcom/bnx2x/bnx2x_sriov.c: +16 -8
drivers/net/ethernet/broadcom/bnx2x/bnx2x_sriov.h: +1 -0
drivers/net/ethernet/broadcom/bnx2x/bnx2x_vfpf.c: +28 -12
drivers/net/ethernet/broadcom/bnxt/bnxt.c: +18 -7
drivers/net/ethernet/broadcom/bnxt/bnxt.h: +1 -0
drivers/net/ethernet/broadcom/bnxt/bnxt_dcb.c: +1 -1
drivers/net/ethernet/broadcom/genet/bcmgenet.c: +151 -61
drivers/net/ethernet/broadcom/genet/bcmgenet.h: +11 -5
drivers/net/ethernet/broadcom/genet/bcmmii.c: +0 -15
drivers/net/ethernet/brocade/bna/bnad_debugfs.c: +1 -1
drivers/net/ethernet/cavium/liquidio/lio_main.c: +55 -55
drivers/net/ethernet/cavium/liquidio/lio_vf_main.c: +55 -49
drivers/net/ethernet/cavium/liquidio/octeon_config.h: +3 -3
drivers/net/ethernet/cavium/liquidio/octeon_droq.c: +2 -15
drivers/net/ethernet/cavium/liquidio/octeon_droq.h: +2 -2
drivers/net/ethernet/cavium/liquidio/octeon_main.h: +0 -42
drivers/net/ethernet/cavium/liquidio/octeon_network.h: +27 -16
drivers/net/ethernet/cavium/thunder/nic.h: +1 -0
drivers/net/ethernet/cavium/thunder/nicvf_main.c: +11 -1
drivers/net/ethernet/cavium/thunder/nicvf_queues.c: +145 -39
drivers/net/ethernet/cavium/thunder/nicvf_queues.h: +3 -1
drivers/net/ethernet/cavium/thunder/thunder_bgx.c: +45 -19
drivers/net/ethernet/cavium/thunder/thunder_bgx.h: +0 -1
drivers/net/ethernet/ibm/emac/core.c: +17 -8
drivers/net/ethernet/ibm/ibmvnic.c: +36 -9
drivers/net/ethernet/ibm/ibmvnic.h: +1 -0
drivers/net/ethernet/mellanox/mlx4/cmd.c: +11 -0
drivers/net/ethernet/mellanox/mlx4/main.c: +11 -0
drivers/net/ethernet/mellanox/mlx5/core/Kconfig: +1 -0
drivers/net/ethernet/mellanox/mlx5/core/cmd.c: +4 -0
drivers/net/ethernet/mellanox/mlx5/core/en.h: +0 -4
drivers/net/ethernet/mellanox/mlx5/core/en_dcbnl.c: +5 -5
drivers/net/ethernet/mellanox/mlx5/core/en_main.c: +4 -4
drivers/net/ethernet/mellanox/mlx5/core/en_rep.c: +0 -2
drivers/net/ethernet/mellanox/mlx5/core/en_rx.c: +4 -0
drivers/net/ethernet/mellanox/mlx5/core/en_selftest.c: +1 -4
drivers/net/ethernet/mellanox/mlx5/core/en_tc.c: +67 -38
drivers/net/ethernet/mellanox/mlx5/core/en_tx.c: +3 -2
drivers/net/ethernet/mellanox/mlx5/core/eswitch.h: +6 -0
drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c: +22 -0
drivers/net/ethernet/mellanox/mlx5/core/fs_core.c: +1 -1
drivers/net/ethernet/mellanox/mlx5/core/main.c: +4 -3
drivers/net/ethernet/mellanox/mlxsw/reg.h: +2 -2
drivers/net/ethernet/mellanox/mlxsw/spectrum_flower.c: +2 -2
drivers/net/ethernet/qlogic/qed/qed_cxt.c: +2 -1
drivers/net/ethernet/qlogic/qed/qed_dev.c: +2 -3
drivers/net/ethernet/qlogic/qed/qed_iscsi.c: +31 -0
drivers/net/ethernet/qlogic/qed/qed_ll2.c: +8 -5
drivers/net/ethernet/qlogic/qed/qed_ooo.c: +2 -0
drivers/net/ethernet/qlogic/qlge/qlge.h: +2 -2
drivers/net/ethernet/sfc/efx.c: +1 -1
drivers/net/ethernet/smsc/smc91x.c: +25 -22
drivers/net/ethernet/ti/Kconfig: +8 -2
drivers/net/ethernet/ti/Makefile: +1 -1
drivers/net/fjes/fjes_main.c: +72 -6
drivers/net/hyperv/hyperv_net.h: +2 -1
drivers/net/hyperv/netvsc.c: +7 -8
drivers/net/hyperv/netvsc_drv.c: +3 -8
drivers/net/phy/marvell.c: +0 -15
drivers/net/phy/phy_device.c: +1 -1
drivers/net/phy/spi_ks8995.c: +2 -1
drivers/net/team/team.c: +1 -0
drivers/net/tun.c: +17 -4
drivers/net/usb/qmi_wwan.c: +6 -0
drivers/net/usb/r8152.c: +17 -7
drivers/net/vrf.c: +5 -2
drivers/net/vxlan.c: +40 -33
drivers/net/wan/fsl_ucc_hdlc.c: +2 -2
drivers/net/wimax/i2400m/usb.c: +3 -0
drivers/net/wireless/ath/ath10k/hw.c: +1 -1
drivers/net/wireless/intel/iwlwifi/mvm/mac80211.c: +3 -2
drivers/net/wireless/intel/iwlwifi/mvm/sta.c: +6 -5
drivers/net/wireless/intel/iwlwifi/mvm/sta.h: +1 -1
drivers/net/wireless/intel/iwlwifi/mvm/tx.c: +18 -23
drivers/net/wireless/marvell/mwifiex/main.c: +7 -4
drivers/net/wireless/marvell/mwifiex/pcie.c: +19 -19
drivers/net/xen-netback/interface.c: +17 -9
drivers/net/xen-netback/netback.c: +1 -1
drivers/net/xen-netback/xenbus.c: +10 -10
drivers/nvme/host/rdma.c: +14 -14
drivers/nvme/target/core.c: +10 -1
drivers/nvme/target/loop.c: +51 -39
drivers/nvme/target/nvmet.h: +1 -0
drivers/nvme/target/rdma.c: +3 -5
drivers/parport/share.c: +4 -2
drivers/pci/dwc/pci-exynos.c: +4 -4
drivers/pci/host/pci-thunder-pem.c: +55 -3
drivers/pci/host/pcie-iproc-bcma.c: +12 -12
drivers/pci/host/pcie-iproc-platform.c: +10 -9
drivers/pci/host/pcie-iproc.h: +1 -0
drivers/pci/pcie/aspm.c: +2 -3
drivers/pci/quirks.c: +1 -0
drivers/phy/Kconfig: +1 -8
drivers/phy/Makefile: +0 -1
drivers/phy/phy-bcm-nsp-usb3.c: +0 -177
drivers/phy/phy-exynos-pcie.c: +2 -2
drivers/pinctrl/meson/pinctrl-meson-gxbb.c: +2 -2
drivers/pinctrl/pinctrl-st.c: +24 -6
drivers/pinctrl/qcom/pinctrl-ipq4019.c: +30 -0
drivers/pinctrl/qcom/pinctrl-msm.c: +15 -4
drivers/pinctrl/samsung/pinctrl-samsung.c: +10 -3
drivers/pinctrl/ti/Kconfig: +1 -1
drivers/pinctrl/uniphier/pinctrl-uniphier-ld11.c: +6 -6
drivers/platform/x86/asus-nb-wmi.c: +2 -47
drivers/platform/x86/asus-wmi.c: +17 -5
drivers/platform/x86/asus-wmi.h: +0 -1
drivers/platform/x86/fujitsu-laptop.c: +222 -229
drivers/ptp/ptp_kvm.c: +1 -4
drivers/rapidio/devices/tsi721.c: +2 -2
drivers/rapidio/devices/tsi721.h: +2 -2
drivers/remoteproc/Kconfig: +3 -3
drivers/scsi/Kconfig: +2 -3
drivers/scsi/aacraid/commsup.c: +6 -8
drivers/scsi/aacraid/src.c: +1 -1
drivers/scsi/aic7xxx/aic79xx_core.c: +1 -1
drivers/scsi/device_handler/scsi_dh_alua.c: +24 -14
drivers/scsi/hpsa.c: +33 -21
drivers/scsi/hpsa.h: +1 -0
drivers/scsi/hpsa_cmd.h: +2 -0
drivers/scsi/libiscsi.c: +25 -1
drivers/scsi/libsas/sas_ata.c: +1 -1
drivers/scsi/lpfc/lpfc.h: +3 -1
drivers/scsi/lpfc/lpfc_attr.c: +10 -3
drivers/scsi/lpfc/lpfc_crtn.h: +3 -1
drivers/scsi/lpfc/lpfc_ct.c: +1 -1
drivers/scsi/lpfc/lpfc_debugfs.c: +0 -22
drivers/scsi/lpfc/lpfc_debugfs.h: +14 -8
drivers/scsi/lpfc/lpfc_els.c: +16 -9
drivers/scsi/lpfc/lpfc_hbadisc.c: +13 -11
drivers/scsi/lpfc/lpfc_hw4.h: +2 -2
drivers/scsi/lpfc/lpfc_init.c: +92 -43
drivers/scsi/lpfc/lpfc_mem.c: +1 -1
drivers/scsi/lpfc/lpfc_nvme.c: +82 -25
drivers/scsi/lpfc/lpfc_nvme.h: +1 -0
drivers/scsi/lpfc/lpfc_nvmet.c: +37 -10
drivers/scsi/lpfc/lpfc_scsi.c: +2 -2
drivers/scsi/lpfc/lpfc_sli.c: +59 -9
drivers/scsi/lpfc/lpfc_sli4.h: +6 -0
drivers/scsi/lpfc/lpfc_version.h: +1 -1
drivers/scsi/megaraid/megaraid_sas.h: +2 -2
drivers/scsi/megaraid/megaraid_sas_base.c: +12 -5
drivers/scsi/megaraid/megaraid_sas_fusion.c: +2 -2
drivers/scsi/mpt3sas/mpt3sas_base.h: +0 -3
drivers/scsi/mpt3sas/mpt3sas_scsih.c: +2 -17
drivers/scsi/qedf/qedf_dbg.h: +8 -5
drivers/scsi/qedf/qedf_fip.c: +1 -1
drivers/scsi/qedf/qedf_io.c: +2 -2
drivers/scsi/qedf/qedf_main.c: +2 -2
drivers/scsi/qedi/qedi_debugfs.c: +8 -8
drivers/scsi/qedi/qedi_fw.c: +2 -2
drivers/scsi/qedi/qedi_gbl.h: +7 -1
drivers/scsi/qedi/qedi_iscsi.c: +4 -4
drivers/scsi/qedi/qedi_main.c: +2 -1
drivers/scsi/qla2xxx/Kconfig: +1 -0
drivers/scsi/qla2xxx/qla_attr.c: +1 -3
drivers/scsi/qla2xxx/qla_dbg.c: +4 -8
drivers/scsi/qla2xxx/qla_dbg.h: +1 -0
drivers/scsi/qla2xxx/qla_def.h: +50 -6
drivers/scsi/qla2xxx/qla_dfs.c: +103 -4
drivers/scsi/qla2xxx/qla_gbl.h: +14 -4
drivers/scsi/qla2xxx/qla_init.c: +31 -54
drivers/scsi/qla2xxx/qla_iocb.c: +6 -7
drivers/scsi/qla2xxx/qla_isr.c: +33 -8
drivers/scsi/qla2xxx/qla_mbx.c: +268 -36
drivers/scsi/qla2xxx/qla_mid.c: +8 -6
drivers/scsi/qla2xxx/qla_os.c: +24 -2
drivers/scsi/qla2xxx/qla_target.c: +470 -278
drivers/scsi/qla2xxx/qla_target.h: +33 -6
drivers/scsi/qla2xxx/qla_version.h: +3 -3
drivers/scsi/qla2xxx/tcm_qla2xxx.c: +33 -16
drivers/scsi/scsi_lib.c: +10 -4
drivers/scsi/scsi_priv.h: +0 -3
drivers/scsi/sd.c: +25 -33
drivers/scsi/sg.c: +2 -0
drivers/scsi/storvsc_drv.c: +17 -10
drivers/scsi/ufs/ufs.h: +8 -14
drivers/scsi/ufs/ufshcd-pltfrm.c: +2 -2
drivers/scsi/ufs/ufshcd.c: +174 -61
drivers/scsi/ufs/ufshcd.h: +15 -0
drivers/scsi/vmw_pvscsi.c: +1 -1
drivers/staging/lustre/lnet/lnet/lib-socket.c: +2 -2
drivers/staging/octeon/ethernet-rx.c: +0 -1
drivers/staging/vc04_services/Kconfig: +1 -0
drivers/target/target_core_alua.c: +38 -44
drivers/target/target_core_configfs.c: +4 -0
drivers/target/target_core_pscsi.c: +14 -36
drivers/target/target_core_sbc.c: +8 -2
drivers/target/target_core_tpg.c: +2 -1
drivers/target/target_core_transport.c: +1 -2
drivers/target/target_core_user.c: +123 -29
drivers/thermal/cpu_cooling.c: +24 -15
drivers/thermal/devfreq_cooling.c: +10 -4
drivers/tty/n_hdlc.c: +69 -63
drivers/tty/serial/8250/8250_dw.c: +7 -2
drivers/tty/serial/8250/Kconfig: +6 -2
drivers/tty/serial/amba-pl011.c: +22 -3
drivers/tty/serial/atmel_serial.c: +8 -0
drivers/tty/serial/mxs-auart.c: +1 -1
drivers/tty/serial/samsung.c: +4 -2
drivers/tty/serial/st-asc.c: +6 -5
drivers/tty/tty_ldisc.c: +21 -71
drivers/tty/vt/keyboard.c: +0 -1
drivers/usb/class/usbtmc.c: +15 -3
drivers/usb/core/config.c: +10 -0
drivers/usb/core/hcd.c: +5 -2
drivers/usb/core/hub.c: +1 -1
drivers/usb/core/quirks.c: +8 -0
drivers/usb/dwc3/dwc3-omap.c: +2 -1
drivers/usb/dwc3/gadget.c: +84 -13
drivers/usb/dwc3/gadget.h: +7 -7
drivers/usb/gadget/configfs.c: +1 -0
drivers/usb/gadget/function/f_acm.c: +3 -1
drivers/usb/gadget/function/f_fs.c: +14 -3
drivers/usb/gadget/function/f_hid.c: +4 -4
drivers/usb/gadget/function/f_uvc.c: +9 -8
drivers/usb/gadget/legacy/inode.c: +4 -3
drivers/usb/gadget/udc/atmel_usba_udc.c: +2 -2
drivers/usb/gadget/udc/dummy_hcd.c: +2 -0
drivers/usb/gadget/udc/net2280.c: +13 -12
drivers/usb/gadget/udc/pch_udc.c: +0 -1
drivers/usb/gadget/udc/pxa27x_udc.c: +3 -2
drivers/usb/host/ohci-at91.c: +2 -2
drivers/usb/host/xhci-dbg.c: +1 -1
drivers/usb/host/xhci-mtk.c: +3 -4
drivers/usb/host/xhci-plat.c: +3 -0
drivers/usb/host/xhci-ring.c: +3 -0
drivers/usb/host/xhci-tegra.c: +0 -1
drivers/usb/host/xhci.c: +27 -20
drivers/usb/misc/idmouse.c: +3 -0
drivers/usb/misc/iowarrior.c: +15 -6
drivers/usb/misc/lvstest.c: +4 -0
drivers/usb/misc/usb251xb.c: +24 -35
drivers/usb/misc/uss720.c: +5 -0
drivers/usb/musb/musb_core.c: +1 -1
drivers/usb/musb/musb_cppi41.c: +21 -2
drivers/usb/musb/musb_dsps.c: +4 -1
drivers/usb/phy/phy-isp1301.c: +7 -0
drivers/usb/serial/digi_acceleport.c: +1 -1
drivers/usb/serial/io_ti.c: +7 -1
drivers/usb/serial/omninet.c: +0 -13
drivers/usb/serial/option.c: +16 -1
drivers/usb/serial/qcserial.c: +2 -0
drivers/usb/serial/safe_serial.c: +5 -0
drivers/usb/storage/unusual_devs.h: +14 -0
drivers/usb/wusbcore/wa-hc.c: +3 -0
drivers/uwb/hwa-rc.c: +3 -0
drivers/uwb/i1480/dfu/usb.c: +3 -0
drivers/vfio/vfio.c: +5 -3
drivers/vfio/vfio_iommu_type1.c: +3 -4
drivers/vhost/vsock.c: +41 -0
drivers/virtio/virtio_balloon.c: +13 -6
drivers/virtio/virtio_pci_common.c: +5 -4
drivers/xen/gntdev.c: +6 -5
drivers/xen/swiotlb-xen.c: +47 -0
drivers/xen/xen-acpi-processor.c: +27 -9
drivers/xen/xenbus/xenbus_dev_frontend.c: +0 -1
fs/afs/callback.c: +4 -3
fs/afs/cmservice.c: +5 -6
fs/afs/file.c: +16 -4
fs/afs/fsclient.c: +50 -27
fs/afs/inode.c: +22 -20
fs/afs/internal.h: +13 -10
fs/afs/misc.c: +2 -0
fs/afs/mntpt.c: +0 -53
fs/afs/rxrpc.c: +84 -65
fs/afs/security.c: +7 -2
fs/afs/server.c: +3 -3
fs/afs/vlocation.c: +9 -7
fs/afs/write.c: +54 -22
fs/btrfs/ctree.h: +1 -1
fs/btrfs/disk-io.c: +1 -1
fs/btrfs/extent_io.c: +30 -19
fs/btrfs/inode.c: +17 -3
fs/btrfs/qgroup.c: +5 -5
fs/btrfs/send.c: +6 -1
fs/crypto/crypto.c: +1 -9
fs/crypto/fname.c: +1 -1
fs/crypto/fscrypt_private.h: +0 -4
fs/crypto/keyinfo.c: +9 -43
fs/crypto/policy.c: +0 -7
fs/dlm/lowcomms.c: +1 -1
fs/ext4/inline.c: +2 -3
fs/ext4/inode.c: +1 -1
fs/ext4/move_extent.c: +1 -1
fs/ext4/super.c: +4 -6
fs/ext4/xattr.c: +31 -34
fs/f2fs/debug.c: +1 -0
fs/f2fs/dir.c: +1 -1
fs/f2fs/f2fs.h: +2 -0
fs/f2fs/node.c: +77 -86
fs/f2fs/segment.c: +6 -0
fs/fat/inode.c: +12 -1
fs/fs-writeback.c: +21 -14
fs/gfs2/incore.h: +1 -1
fs/hugetlbfs/inode.c: +12 -13
fs/iomap.c: +10 -7
fs/jbd2/journal.c: +11 -11
fs/jbd2/revoke.c: +1 -0
fs/kernfs/file.c: +2 -1
fs/nfs/callback.c: +2 -2
fs/nfs/client.c: +24 -1
fs/nfs/dir.c: +2 -7
fs/nfs/filelayout/filelayout.c: +96 -55
fs/nfs/filelayout/filelayout.h: +10 -9
fs/nfs/filelayout/filelayoutdev.c: +7 -1
fs/nfs/flexfilelayout/flexfilelayout.h: +13 -1
fs/nfs/flexfilelayout/flexfilelayoutdev.c: +7 -2
fs/nfs/internal.h: +2 -0
fs/nfs/nfs4client.c: +2 -2
fs/nfs/nfs4proc.c: +7 -13
fs/nfs/nfs4xdr.c: +1 -1
fs/nfs/pnfs.h: +1 -1
fs/nfs/pnfs_nfs.c: +25 -6
fs/nfs/write.c: +4 -2
fs/nfsd/nfsctl.c: +33 -10
fs/nfsd/nfsproc.c: +1 -0
fs/nfsd/nfssvc.c: +13 -15
fs/ocfs2/cluster/tcp.c: +1 -1
fs/overlayfs/util.c: +0 -1
fs/timerfd.c: +4 -4
fs/userfaultfd.c: +26 -49
fs/xfs/kmem.c: +0 -18
fs/xfs/kmem.h: +0 -2
fs/xfs/libxfs/xfs_bmap.c: +21 -13
fs/xfs/libxfs/xfs_bmap_btree.c: +3 -3
fs/xfs/libxfs/xfs_dir2_priv.h: +2 -0
fs/xfs/libxfs/xfs_dir2_sf.c: +87 -0
fs/xfs/libxfs/xfs_inode_fork.c: +23 -3
fs/xfs/libxfs/xfs_inode_fork.h: +1 -1
fs/xfs/xfs_aops.c: +27 -32
fs/xfs/xfs_dir2_readdir.c: +0 -11
fs/xfs/xfs_icache.c: +1 -1
fs/xfs/xfs_inode.c: +10 -4
fs/xfs/xfs_iomap.c: +18 -7
fs/xfs/xfs_itable.c: +2 -4
fs/xfs/xfs_mount.c: +1 -2
fs/xfs/xfs_reflink.c: +16 -7
fs/xfs/xfs_reflink.h: +2 -2
fs/xfs/xfs_super.c: +1 -1
include/asm-generic/4level-fixup.h: +2 -1
include/asm-generic/5level-fixup.h: +41 -0
include/asm-generic/pgtable-nop4d-hack.h: +62 -0
include/asm-generic/pgtable-nop4d.h: +56 -0
include/asm-generic/pgtable-nopud.h: +27 -21
include/asm-generic/pgtable.h: +45 -3
include/asm-generic/sections.h: +3 -3
include/asm-generic/tlb.h: +11 -3
include/asm-generic/vmlinux.lds.h: +4 -2
include/crypto/if_alg.h: +1 -1
include/dt-bindings/sound/cs42l42.h: +1 -1
include/linux/acpi.h: +1 -4
include/linux/blkdev.h: +0 -1
include/linux/ccp.h: +1 -1
include/linux/ceph/libceph.h: +2 -0
include/linux/ceph/osd_client.h: +1 -0
include/linux/clockchips.h: +1 -1
include/linux/dccp.h: +1 -0
include/linux/device.h: +0 -1
include/linux/errqueue.h: +2 -0
include/linux/filter.h: +12 -4
include/linux/fs.h: +1 -1
include/linux/fscrypt_common.h: +0 -1
include/linux/genhd.h: +0 -8
include/linux/gpio/consumer.h: +0 -16
include/linux/hugetlb.h: +4 -1
include/linux/hwmon.h: +1 -0
include/linux/hyperv.h: +7 -3
include/linux/iio/sw_device.h: +1 -1
include/linux/iommu.h: +13 -5
include/linux/irqchip/arm-gic-v3.h: +2 -0
include/linux/irqdomain.h: +4 -0
include/linux/jump_label.h: +9 -2
include/linux/kasan.h: +5 -0
include/linux/kvm_host.h: +2 -2
include/linux/list_nulls.h: +5 -0
include/linux/memcontrol.h: +6 -0
include/linux/mlx4/device.h: +1 -0
include/linux/mm.h: +30 -6
include/linux/net.h: +1 -1
include/linux/omap-gpmc.h: +3 -13
include/linux/phy.h: +4 -0
include/linux/purgatory.h: +23 -0
include/linux/random.h: +15 -3
include/linux/rculist_nulls.h: +14 -0
include/linux/regulator/machine.h: +1 -1
include/linux/reset.h: +2 -7
include/linux/sched/clock.h: +7 -6
include/linux/usb/quirks.h: +6 -0
include/linux/user_namespace.h: +1 -1
include/linux/userfaultfd_k.h: +3 -10
include/linux/virtio_vsock.h: +3 -0
include/linux/vm_event_item.h: +3 -0
include/linux/wait.h: +10 -21
include/media/vsp1.h: +11 -2
include/net/af_vsock.h: +3 -0
include/net/inet_common.h: +2 -1
include/net/inet_connection_sock.h: +1 -1
include/net/irda/timer.h: +1 -1
include/net/netfilter/nf_conntrack.h: +1 -1
include/net/netfilter/nf_tables.h: +29 -1
include/net/netfilter/nf_tables_ipv6.h: +4 -2
include/net/sctp/structs.h: +5 -3
include/net/sock.h: +6 -3
include/rdma/ib_verbs.h: +17 -13
include/scsi/libiscsi.h: +1 -0
include/scsi/scsi_device.h: +4 -0
include/target/target_core_backend.h: +6 -1
include/target/target_core_base.h: +1 -1
include/trace/events/syscalls.h: +1 -0
include/uapi/asm-generic/unistd.h: +3 -1
include/uapi/drm/omap_drm.h: +19 -19
include/uapi/linux/btrfs.h: +0 -27
include/uapi/linux/packet_diag.h: +1 -1
include/uapi/linux/userfaultfd.h: +1 -4
include/uapi/rdma/mlx5-abi.h: +2 -1
include/video/exynos5433_decon.h: +12 -0
include/xen/swiotlb-xen.h: +11 -0
init/main.c: +2 -1
kernel/audit.c: +394 -245
kernel/audit.h: +2 -7
kernel/auditsc.c: +3 -3
kernel/bpf/hashtab.c: +146 -107
kernel/bpf/lpm_trie.c: +6 -0
kernel/cgroup/cgroup-v1.c: +1 -1
kernel/cgroup/cgroup.c: +1 -1
kernel/cgroup/pids.c: +1 -1
kernel/cpu.c: +14 -14
kernel/events/core.c: +49 -17
kernel/exit.c: +0 -1
kernel/futex.c: +13 -9
kernel/kexec_file.c: +4 -4
kernel/kexec_internal.h: +1 -5
kernel/locking/lockdep.c: +9 -2
kernel/locking/rwsem-spinlock.c: +11 -5
kernel/locking/test-ww_mutex.c: +3 -3
kernel/memremap.c: +0 -4
kernel/padata.c: +3 -2
kernel/sched/clock.c: +27 -19
kernel/sched/core.c: +8 -3
kernel/sched/cpufreq_schedutil.c: +16 -23
kernel/sched/deadline.c: +57 -6
kernel/sched/fair.c: +1 -1
kernel/sched/features.h: +5 -0
kernel/sched/loadavg.c: +12 -8
kernel/sched/wait.c: +39 -0
kernel/time/jiffies.c: +1 -1
kernel/trace/Kconfig: +3 -3
kernel/trace/Makefile: +2 -2
kernel/trace/ftrace.c: +18 -5
kernel/trace/trace.c: +5 -5
kernel/trace/trace_probe.h: +2 -2
kernel/trace/trace_stack.c: +1 -1
kernel/ucount.c: +11 -7
kernel/workqueue.c: +1 -0
lib/ioremap.c: +36 -3
lib/radix-tree.c: +2 -2
lib/refcount.c: +7 -7
lib/syscall.c: +1 -0
lib/test_kasan.c: +10 -0
mm/backing-dev.c: +28 -15
mm/gup.c: +40 -6
mm/huge_memory.c: +7 -2
mm/hugetlb.c: +25 -14
mm/kasan/kasan.h: +0 -5
mm/kasan/kasan_init.c: +39 -5
mm/kasan/quarantine.c: +44 -7
mm/kasan/report.c: +36 -0
mm/kmemleak.c: +1 -1
mm/madvise.c: +41 -3
mm/memblock.c: +4 -1
mm/memcontrol.c: +13 -5
mm/memory.c: +196 -34
mm/memory_hotplug.c: +5 -1
mm/migrate.c: +5 -2
mm/mlock.c: +5 -5
mm/mprotect.c: +23 -3
mm/mremap.c: +11 -2
mm/page_alloc.c: +2 -1
mm/page_vma_mapped.c: +5 -1
mm/pagewalk.c: +29 -3
mm/percpu-vm.c: +3 -4
mm/percpu.c: +4 -1
mm/pgtable-generic.c: +6 -0
mm/rmap.c: +15 -9
mm/sparse-vmemmap.c: +19 -3
mm/swap_slots.c: +0 -2
mm/swapfile.c: +23 -3
mm/userfaultfd.c: +13 -10
mm/vmalloc.c: +62 -22
mm/vmstat.c: +4 -3
mm/workingset.c: +1 -1
mm/z3fold.c: +1 -0
net/atm/svc.c: +3 -2
net/ax25/af_ax25.c: +2 -1
net/batman-adv/bat_iv_ogm.c: +11 -0
net/batman-adv/bat_v.c: +11 -3
net/batman-adv/fragmentation.c: +13 -7
net/batman-adv/gateway_common.c: +5 -0
net/batman-adv/soft-interface.c: +0 -1
net/batman-adv/types.h: +2 -0
net/bluetooth/l2cap_sock.c: +1 -1
net/bluetooth/rfcomm/sock.c: +2 -1
net/bluetooth/sco.c: +1 -1
net/bridge/br_fdb.c: +1 -1
net/bridge/br_input.c: +1 -0
net/bridge/br_netfilter_hooks.c: +7 -26
net/bridge/br_private.h: +0 -9
net/ceph/ceph_common.c: +15 -0
net/ceph/messenger.c: +6 -0
net/ceph/osd_client.c: +35 -1
net/ceph/osdmap.c: +1 -3
net/core/dev.c: +1 -0
net/core/net-sysfs.c: +3 -3
net/core/netclassid_cgroup.c: +16 -16
net/core/skbuff.c: +36 -19
net/core/sock.c: +68 -54
net/dccp/ccids/ccid2.c: +1 -0
net/dccp/ipv4.c: +2 -1
net/dccp/ipv6.c: +5 -3
net/dccp/minisocks.c: +16 -8
net/decnet/af_decnet.c: +3 -2
net/ipv4/af_inet.c: +6 -3
net/ipv4/fib_frontend.c: +2 -1
net/ipv4/inet_connection_sock.c: +1 -1
net/ipv4/ip_fragment.c: +17 -8
net/ipv4/ip_output.c: +1 -1
net/ipv4/netfilter/nf_conntrack_l3proto_ipv4.c: +4 -0
net/ipv4/netfilter/nf_nat_l3proto_ipv4.c: +0 -5
net/ipv4/netfilter/nft_masq_ipv4.c: +4 -4
net/ipv4/netfilter/nft_redir_ipv4.c: +4 -4
net/ipv4/tcp.c: +2 -1
net/ipv4/tcp_input.c: +1 -1
net/ipv4/tcp_ipv4.c: +7 -3
net/ipv4/tcp_minisocks.c: +1 -0
net/ipv4/tcp_timer.c: +4 -2
net/ipv6/af_inet6.c: +5 -5
net/ipv6/ip6_fib.c: +2 -0
net/ipv6/ip6_offload.c: +3 -1
net/ipv6/ip6_output.c: +7 -2
net/ipv6/ip6_vti.c: +6 -2
net/ipv6/netfilter/nft_masq_ipv6.c: +4 -4
net/ipv6/netfilter/nft_redir_ipv6.c: +4 -4
net/ipv6/route.c: +8 -5
net/ipv6/tcp_ipv6.c: +5 -3
net/ipv6/udp.c: +1 -1
net/irda/af_irda.c: +3 -2
net/iucv/af_iucv.c: +1 -1
net/llc/af_llc.c: +3 -1
net/mpls/af_mpls.c: +11 -2
net/netfilter/nf_conntrack_core.c: +5 -1
net/netfilter/nf_nat_proto_sctp.c: +12 -1
net/netfilter/nf_tables_api.c: +0 -4
net/netfilter/nft_ct.c: +12 -9
net/netfilter/nft_meta.c: +21 -19
net/netfilter/nft_nat.c: +4 -4
net/netfilter/nft_set_bitmap.c: +79 -86
net/netlink/af_netlink.c: +41 -0
net/netlink/genetlink.c: +3 -1
net/netrom/af_netrom.c: +2 -1
net/nfc/llcp_sock.c: +1 -1
net/openvswitch/flow_netlink.c: +3 -1
net/phonet/pep.c: +4 -2
net/phonet/socket.c: +2 -2
net/rds/connection.c: +1 -0
net/rds/ib_cm.c: +36 -11
net/rds/rds.h: +3 -3
net/rds/tcp.c: +21 -17
net/rds/tcp.h: +1 -1
net/rds/tcp_listen.c: +8 -3
net/rose/af_rose.c: +2 -1
net/rxrpc/conn_event.c: +4 -0
net/rxrpc/input.c: +19 -8
net/rxrpc/recvmsg.c: +2 -2
net/rxrpc/sendmsg.c: +31 -18
net/sched/act_connmark.c: +3 -0
net/sched/act_skbmod.c: +0 -1
net/sched/sch_dsmark.c: +8 -2
net/sctp/associola.c: +2 -4
net/sctp/ipv6.c: +3 -2
net/sctp/output.c: +3 -4
net/sctp/outqueue.c: +5 -6
net/sctp/protocol.c: +3 -2
net/sctp/socket.c: +2 -2
net/smc/af_smc.c: +1 -1
net/socket.c: +15 -3
net/sunrpc/svcsock.c: +1 -0
net/sunrpc/xprtrdma/svc_rdma_transport.c: +1 -0
net/sunrpc/xprtrdma/verbs.c: +2 -1
net/tipc/socket.c: +5 -3
net/tipc/subscr.c: +6 -1
net/unix/af_unix.c: +3 -2
net/unix/garbage.c: +9 -8
net/vmw_vsock/af_vsock.c: +16 -1
net/vmw_vsock/virtio_transport.c: +42 -0
net/vmw_vsock/virtio_transport_common.c: +7 -0
net/wireless/nl80211.c: +56 -71
net/x25/af_x25.c: +2 -1
net/xfrm/xfrm_policy.c: +9 -10
net/xfrm/xfrm_user.c: +8 -1
scripts/Kbuild.include: +4 -0
scripts/gcc-plugins/sancov_plugin.c: +1 -1
scripts/module-common.lds: +2 -0
scripts/spelling.txt: +3 -0
sound/core/seq/seq_clientmgr.c: +1 -0
sound/core/seq/seq_fifo.c: +7 -0
sound/core/seq/seq_memory.c: +13 -4
sound/core/seq/seq_memory.h: +1 -0
sound/pci/ctxfi/cthw20k1.c: +1 -1
sound/pci/hda/patch_conexant.c: +11 -0
sound/pci/hda/patch_realtek.c: +26 -2
sound/soc/amd/acp-pcm-dma.c: +1 -1
sound/soc/atmel/atmel-classd.c: +1 -1
sound/soc/codecs/hdac_hdmi.c: +8 -8
sound/soc/codecs/rt5665.c: +7 -3
sound/soc/codecs/rt5665.h: +1 -1
sound/soc/codecs/wm_adsp.c: +7 -2
sound/soc/generic/simple-card-utils.c: +1 -0
sound/soc/intel/skylake/skl-topology.c: +1 -1
sound/soc/mediatek/Kconfig: +1 -1
sound/soc/sh/rcar/cmd.c: +20 -16
sound/soc/sh/rcar/dma.c: +16 -2
sound/soc/sh/rcar/ssiu.c: +5 -1
sound/soc/soc-core.c: +6 -2
sound/soc/sti/uniperif_reader.c: +3 -0
sound/soc/sunxi/sun8i-codec.c: +30 -37
sound/x86/Kconfig: +2 -1
tools/include/uapi/linux/bpf_perf_event.h: +18 -0
tools/lguest/lguest.c: +1 -1
tools/lib/bpf/Makefile: +1 -1
tools/lib/traceevent/Makefile: +1 -1
tools/lib/traceevent/event-parse.h: +1 -1
tools/objtool/builtin-check.c: +12 -3
tools/objtool/elf.c: +12 -0
tools/objtool/elf.h: +1 -0
tools/perf/util/intel-pt-decoder/intel-pt-insn-decoder.c: +1 -1
tools/perf/util/symbol.c: +1 -1
tools/testing/ktest/ktest.pl: +13 -8
tools/testing/radix-tree/Makefile: +9 -6
tools/testing/radix-tree/benchmark.c: +166 -7
tools/testing/radix-tree/idr-test.c: +75 -3
tools/testing/radix-tree/main.c: +1 -0
tools/testing/radix-tree/tag_check.c: +29 -0
tools/testing/radix-tree/test.h: +1 -0
tools/testing/selftests/bpf/Makefile: +11 -8
tools/testing/selftests/bpf/test_maps.c: +26 -3
tools/testing/selftests/bpf/test_verifier.c: +4 -0
tools/testing/selftests/powerpc/harness.c: +4 -2
tools/testing/selftests/powerpc/include/vsx_asm.h: +24 -24
tools/testing/selftests/vm/Makefile: +4 -0
tools/testing/selftests/x86/fsgsbase.c: +1 -1
tools/testing/selftests/x86/ldt_gdt.c: +11 -5
tools/testing/selftests/x86/ptrace_syscall.c: +2 -1
tools/testing/selftests/x86/single_step_syscall.c: +4 -1
virt/kvm/arm/vgic/vgic-its.c: +65 -44
virt/kvm/arm/vgic/vgic-mmio.c: +24 -8
virt/kvm/arm/vgic/vgic-v3.c: +4 -1
virt/kvm/eventfd.c: +2 -1
virt/kvm/kvm_main.c: +31 -13
