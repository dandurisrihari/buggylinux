Commit Hash: 29165e4c8b265a415f1fd1dca947b5d4c72abc47
Subject: mac80211: fix deauth race


Security Keywords:
- authentication

Full commit message:
mac80211: fix deauth race

When userspace requests a deauth while the
authentication work is pending in the auth
(not probe) state, we do not properly abort
the work and then things get confused.

Fix that and also improve the checks here
to include the correct virtual interface,
just in case two virtual interfaces would
ever try to connect to the same BSS.

Also fix a bug -- need to use list_del_rcu
instead of just list_del to free a work
item.

Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
Signed-off-by: John W. Linville <linville@tuxdriver.com>

Metadata:
Author: Johannes Berg <johannes@sipsolutions.net>
Author Date: Sat Feb 6 15:20:13 2010 +0100
Committer: John W. Linville <linville@tuxdriver.com>
Commit Date: Mon Feb 8 16:50:59 2010 -0500

Files Changed: 1
Lines Added: 9
Lines Removed: 3
Total Changes: 12
