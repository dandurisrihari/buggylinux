{
  "hash": "74e7e1efdad45580cc3839f2a155174cf158f9b5",
  "hash_short": "74e7e1ef",
  "subject": "xen/netback: don't call kfree_skb() with interrupts disabled",
  "body": "It is not allowed to call kfree_skb() from hardware interrupt\ncontext or with interrupts being disabled. So remove kfree_skb()\nfrom the spin_lock_irqsave() section and use the already existing\n\"drop\" label in xenvif_start_xmit() for dropping the SKB. At the\nsame time replace the dev_kfree_skb() call there with a call of\ndev_kfree_skb_any(), as xenvif_start_xmit() can be called with\ndisabled interrupts.\n\nThis is XSA-424 / CVE-2022-42328 / CVE-2022-42329.\n\nFixes: be81992f9086 (\"xen/netback: don't queue unlimited number of packages\")\nReported-by: Yang Yingliang <yangyingliang@huawei.com>\nSigned-off-by: Juergen Gross <jgross@suse.com>\nReviewed-by: Jan Beulich <jbeulich@suse.com>\nSigned-off-by: Juergen Gross <jgross@suse.com>",
  "full_message": "xen/netback: don't call kfree_skb() with interrupts disabled\n\nIt is not allowed to call kfree_skb() from hardware interrupt\ncontext or with interrupts being disabled. So remove kfree_skb()\nfrom the spin_lock_irqsave() section and use the already existing\n\"drop\" label in xenvif_start_xmit() for dropping the SKB. At the\nsame time replace the dev_kfree_skb() call there with a call of\ndev_kfree_skb_any(), as xenvif_start_xmit() can be called with\ndisabled interrupts.\n\nThis is XSA-424 / CVE-2022-42328 / CVE-2022-42329.\n\nFixes: be81992f9086 (\"xen/netback: don't queue unlimited number of packages\")\nReported-by: Yang Yingliang <yangyingliang@huawei.com>\nSigned-off-by: Juergen Gross <jgross@suse.com>\nReviewed-by: Jan Beulich <jbeulich@suse.com>\nSigned-off-by: Juergen Gross <jgross@suse.com>",
  "author_name": "Juergen Gross",
  "author_email": "jgross@suse.com",
  "author_date": "Tue Dec 6 08:54:24 2022 +0100",
  "author_date_iso": "2022-12-06T08:54:24+01:00",
  "committer_name": "Juergen Gross",
  "committer_email": "jgross@suse.com",
  "committer_date": "Tue Dec 6 16:00:33 2022 +0100",
  "committer_date_iso": "2022-12-06T16:00:33+01:00",
  "files_changed": [
    "drivers/net/xen-netback/common.h",
    "drivers/net/xen-netback/interface.c",
    "drivers/net/xen-netback/rx.c"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "drivers/net/xen-netback/common.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/net/xen-netback/interface.c",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "drivers/net/xen-netback/rx.c",
      "insertions": 5,
      "deletions": 3
    }
  ],
  "total_insertions": 10,
  "total_deletions": 6,
  "total_changes": 16,
  "parents": [
    "ad7f402ae4f466647c3a669b8a6f3e5d4271c84a"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [
      "CVE-2022-42328",
      "CVE-2022-42329"
    ],
    "security_keywords": []
  },
  "fix_type": "cve",
  "file_results": [
    {
      "file": "drivers/net/xen-netback/common.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/xen-netback/interface.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/xen-netback/rx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}