commit 12fb28ea6b1cf24bde27c406eb38ee3c108d73f9
Author: Ben Cheatham <Benjamin.Cheatham@amd.com>
Date:   Mon Mar 11 09:25:06 2024 -0500

    EINJ: Add CXL error type support
    
    Move CXL protocol error types from einj.c (now einj-core.c) to einj-cxl.c.
    einj-cxl.c implements the necessary handling for CXL protocol error
    injection and exposes an API for the CXL core to use said functionality,
    while also allowing the EINJ module to be built without CXL support.
    Because CXL error types targeting CXL 1.0/1.1 ports require special
    handling, only allow them to be injected through the new cxl debugfs
    interface (next commit) and return an error when attempting to inject
    through the legacy interface.
    
    Reviewed-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>
    Signed-off-by: Ben Cheatham <Benjamin.Cheatham@amd.com>
    Link: https://lore.kernel.org/r/20240311142508.31717-3-Benjamin.Cheatham@amd.com
    Signed-off-by: Dan Williams <dan.j.williams@intel.com>

diff --git a/drivers/acpi/apei/Kconfig b/drivers/acpi/apei/Kconfig
index 6b18f8bc7be3..3cfe7e7475f2 100644
--- a/drivers/acpi/apei/Kconfig
+++ b/drivers/acpi/apei/Kconfig
@@ -60,6 +60,19 @@ config ACPI_APEI_EINJ
 	  mainly used for debugging and testing the other parts of
 	  APEI and some other RAS features.
 
+config ACPI_APEI_EINJ_CXL
+	bool "CXL Error INJection Support"
+	default ACPI_APEI_EINJ
+	depends on ACPI_APEI_EINJ
+	depends on CXL_BUS && CXL_BUS <= ACPI_APEI_EINJ
+	help
+	  Support for CXL protocol Error INJection through debugfs/cxl.
+	  Availability and which errors are supported is dependent on
+	  the host platform. Look to ACPI v6.5 section 18.6.4 and kernel
+	  EINJ documentation for more information.
+
+	  If unsure say 'n'
+
 config ACPI_APEI_ERST_DEBUG
 	tristate "APEI Error Record Serialization Table (ERST) Debug Support"
 	depends on ACPI_APEI