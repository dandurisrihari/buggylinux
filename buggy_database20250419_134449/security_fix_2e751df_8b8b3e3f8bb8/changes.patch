diff --cc arch/powerpc/mm/init-common.c
index 2be5dc242832,f2108c40e697..eb8c6c8c4851
--- a/arch/powerpc/mm/init-common.c
+++ b/arch/powerpc/mm/init-common.c
@@@ -79,11 -78,15 +79,15 @@@ void pgtable_cache_add(unsigned shift, 
  	align = max_t(unsigned long, align, minalign);
  	name = kasprintf(GFP_KERNEL, "pgtable-2^%d", shift);
  	new = kmem_cache_create(name, table_size, align, 0, ctor);
+ 	if (!new)
+ 		panic("Could not allocate pgtable cache for order %d", shift);
+ 
  	kfree(name);
  	pgtable_cache[shift - 1] = new;
+ 
  	pr_debug("Allocated pgtable cache for order %d\n", shift);
  }
 -
 +EXPORT_SYMBOL_GPL(pgtable_cache_add);	/* used by kvm_hv module */
  
  void pgtable_cache_init(void)
  {