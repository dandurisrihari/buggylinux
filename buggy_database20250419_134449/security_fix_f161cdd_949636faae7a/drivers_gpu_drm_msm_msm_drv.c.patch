commit f161cdd91b2a68ed846ecaac43b2f01af0ea61c8
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Aug 13 15:12:36 2024 +0300

    drm/msm: clean up fault injection usage
    
    With the proper stubs in place in linux/fault-inject.h, we can remove a
    bunch of conditional compilation for CONFIG_FAULT_INJECTION=n.
    
    Link: https://lkml.kernel.org/r/20240813121237.2382534-2-jani.nikula@intel.com
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>
    Reviewed-by: Thomas Hellstr√∂m <thomas.hellstrom@linux.intel.com>
    Reviewed-by: Himal Prasad Ghimiray <himal.prasad.ghimiray@intel.com>
    Reviewed-by: Abhinav Kumar <quic_abhinavk@quicinc.com>
    Cc: Akinobu Mita <akinobu.mita@gmail.com>
    Cc: Rob Clark <robdclark@gmail.com>
    Cc: Dmitry Baryshkov <dmitry.baryshkov@linaro.org>
    Cc: Lucas De Marchi <lucas.demarchi@intel.com>
    Cc: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

diff --git a/drivers/gpu/drm/msm/msm_drv.c b/drivers/gpu/drm/msm/msm_drv.c
index e018bc79e188..8c13b08708d2 100644
--- a/drivers/gpu/drm/msm/msm_drv.c
+++ b/drivers/gpu/drm/msm/msm_drv.c
@@ -59,10 +59,8 @@ static bool modeset = true;
 MODULE_PARM_DESC(modeset, "Use kernel modesetting [KMS] (1=on (default), 0=disable)");
 module_param(modeset, bool, 0600);
 
-#ifdef CONFIG_FAULT_INJECTION
 DECLARE_FAULT_ATTR(fail_gem_alloc);
 DECLARE_FAULT_ATTR(fail_gem_iova);
-#endif
 
 static int msm_drm_uninit(struct device *dev)
 {