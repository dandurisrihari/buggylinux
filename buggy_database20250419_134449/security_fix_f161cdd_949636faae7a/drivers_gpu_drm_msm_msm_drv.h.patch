commit f161cdd91b2a68ed846ecaac43b2f01af0ea61c8
Author: Jani Nikula <jani.nikula@intel.com>
Date:   Tue Aug 13 15:12:36 2024 +0300

    drm/msm: clean up fault injection usage
    
    With the proper stubs in place in linux/fault-inject.h, we can remove a
    bunch of conditional compilation for CONFIG_FAULT_INJECTION=n.
    
    Link: https://lkml.kernel.org/r/20240813121237.2382534-2-jani.nikula@intel.com
    Signed-off-by: Jani Nikula <jani.nikula@intel.com>
    Reviewed-by: Thomas Hellstr√∂m <thomas.hellstrom@linux.intel.com>
    Reviewed-by: Himal Prasad Ghimiray <himal.prasad.ghimiray@intel.com>
    Reviewed-by: Abhinav Kumar <quic_abhinavk@quicinc.com>
    Cc: Akinobu Mita <akinobu.mita@gmail.com>
    Cc: Rob Clark <robdclark@gmail.com>
    Cc: Dmitry Baryshkov <dmitry.baryshkov@linaro.org>
    Cc: Lucas De Marchi <lucas.demarchi@intel.com>
    Cc: Rodrigo Vivi <rodrigo.vivi@intel.com>
    Signed-off-by: Andrew Morton <akpm@linux-foundation.org>

diff --git a/drivers/gpu/drm/msm/msm_drv.h b/drivers/gpu/drm/msm/msm_drv.h
index be016d7b4ef1..9b953860131b 100644
--- a/drivers/gpu/drm/msm/msm_drv.h
+++ b/drivers/gpu/drm/msm/msm_drv.h
@@ -33,12 +33,8 @@
 #include <drm/msm_drm.h>
 #include <drm/drm_gem.h>
 
-#ifdef CONFIG_FAULT_INJECTION
 extern struct fault_attr fail_gem_alloc;
 extern struct fault_attr fail_gem_iova;
-#else
-#  define should_fail(attr, size) 0
-#endif
 
 struct msm_kms;
 struct msm_gpu;