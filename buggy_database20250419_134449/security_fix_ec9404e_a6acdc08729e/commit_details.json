{
  "hash": "ec9404e40e8f36421a2b66ecb76dc2209fe7f3ef",
  "hash_short": "ec9404e4",
  "subject": "x86/bhi: Add BHI mitigation knob",
  "body": "Branch history clearing software sequences and hardware control\nBHI_DIS_S were defined to mitigate Branch History Injection (BHI).\n\nAdd cmdline spectre_bhi={on|off|auto} to control BHI mitigation:\n\n auto - Deploy the hardware mitigation BHI_DIS_S, if available.\n on   - Deploy the hardware mitigation BHI_DIS_S, if available,\n        otherwise deploy the software sequence at syscall entry and\n\tVMexit.\n off  - Turn off BHI mitigation.\n\nThe default is auto mode which does not deploy the software sequence\nmitigation.  This is because of the hardening done in the syscall\ndispatch path, which is the likely target of BHI.\n\nSigned-off-by: Pawan Gupta <pawan.kumar.gupta@linux.intel.com>\nSigned-off-by: Daniel Sneddon <daniel.sneddon@linux.intel.com>\nSigned-off-by: Thomas Gleixner <tglx@linutronix.de>\nReviewed-by: Alexandre Chartre <alexandre.chartre@oracle.com>\nReviewed-by: Josh Poimboeuf <jpoimboe@kernel.org>",
  "full_message": "x86/bhi: Add BHI mitigation knob\n\nBranch history clearing software sequences and hardware control\nBHI_DIS_S were defined to mitigate Branch History Injection (BHI).\n\nAdd cmdline spectre_bhi={on|off|auto} to control BHI mitigation:\n\n auto - Deploy the hardware mitigation BHI_DIS_S, if available.\n on   - Deploy the hardware mitigation BHI_DIS_S, if available,\n        otherwise deploy the software sequence at syscall entry and\n\tVMexit.\n off  - Turn off BHI mitigation.\n\nThe default is auto mode which does not deploy the software sequence\nmitigation.  This is because of the hardening done in the syscall\ndispatch path, which is the likely target of BHI.\n\nSigned-off-by: Pawan Gupta <pawan.kumar.gupta@linux.intel.com>\nSigned-off-by: Daniel Sneddon <daniel.sneddon@linux.intel.com>\nSigned-off-by: Thomas Gleixner <tglx@linutronix.de>\nReviewed-by: Alexandre Chartre <alexandre.chartre@oracle.com>\nReviewed-by: Josh Poimboeuf <jpoimboe@kernel.org>",
  "author_name": "Pawan Gupta",
  "author_email": "pawan.kumar.gupta@linux.intel.com",
  "author_date": "Mon Mar 11 08:57:05 2024 -0700",
  "author_date_iso": "2024-03-11T08:57:05-07:00",
  "committer_name": "Thomas Gleixner",
  "committer_email": "tglx@linutronix.de",
  "committer_date": "Mon Apr 8 19:27:05 2024 +0200",
  "committer_date_iso": "2024-04-08T19:27:05+02:00",
  "files_changed": [
    "Documentation/admin-guide/hw-vuln/spectre.rst",
    "Documentation/admin-guide/kernel-parameters.txt",
    "arch/x86/Kconfig",
    "arch/x86/include/asm/cpufeatures.h",
    "arch/x86/kernel/cpu/bugs.c"
  ],
  "files_changed_count": 5,
  "stats": [
    {
      "file": "Documentation/admin-guide/hw-vuln/spectre.rst",
      "insertions": 39,
      "deletions": 6
    },
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "insertions": 11,
      "deletions": 0
    },
    {
      "file": "arch/x86/Kconfig",
      "insertions": 25,
      "deletions": 0
    },
    {
      "file": "arch/x86/include/asm/cpufeatures.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/kernel/cpu/bugs.c",
      "insertions": 89,
      "deletions": 1
    }
  ],
  "total_insertions": 165,
  "total_deletions": 7,
  "total_changes": 172,
  "parents": [
    "be482ff9500999f56093738f9219bbabc729d163"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening",
      "Injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "Documentation/admin-guide/hw-vuln/spectre.rst",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/include/asm/cpufeatures.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/cpu/bugs.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}