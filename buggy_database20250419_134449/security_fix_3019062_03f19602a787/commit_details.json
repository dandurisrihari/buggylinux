{
  "hash": "3019062905533ccd71b535f6e5c3ed7e9bb195e0",
  "hash_short": "30190629",
  "subject": "drm/i915: Ignore TMDS clock limit for DP++ when EDID override is set",
  "body": "4K modes testing by using dummy EDID data has never been working\nproperly on boxes with DP++ (dual-mode) adaptors. The reason for\nthis is that those modes got pruned during hdmi mode validation.\nintel_hdmi_mode_valid returns CLOCK_HIGH because the pixel clock\nreported by the 4k mode is higher than dual port TMDS clock limit.\n\nHowever 4k injection does work properly on machines that don't have\nDP++ adapters because the mode is never validated against the DP++\nTMDS clock limit.\n\nv2: Don't detect the DP++ limits when we're testing using overridden\n    EDIDs. Make sure to check for the override condition after\n    respecting the value of drm_dp_dual_mode_detect (Jani Nikula).\n\nBugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=101649\nCc: Ville Syrj\u00e4l\u00e4 <ville.syrjala@linux.intel.com>\nCc: Jani Nikula <jani.nikula@intel.com>\nCc: Daniel Vetter <daniel.vetter@ffwll.ch>\nSigned-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>\nSigned-off-by: Jani Nikula <jani.nikula@intel.com>\nLink: https://patchwork.freedesktop.org/patch/msgid/20171215102055.11729-1-abdiel.janulgue@linux.intel.com",
  "full_message": "drm/i915: Ignore TMDS clock limit for DP++ when EDID override is set\n\n4K modes testing by using dummy EDID data has never been working\nproperly on boxes with DP++ (dual-mode) adaptors. The reason for\nthis is that those modes got pruned during hdmi mode validation.\nintel_hdmi_mode_valid returns CLOCK_HIGH because the pixel clock\nreported by the 4k mode is higher than dual port TMDS clock limit.\n\nHowever 4k injection does work properly on machines that don't have\nDP++ adapters because the mode is never validated against the DP++\nTMDS clock limit.\n\nv2: Don't detect the DP++ limits when we're testing using overridden\n    EDIDs. Make sure to check for the override condition after\n    respecting the value of drm_dp_dual_mode_detect (Jani Nikula).\n\nBugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=101649\nCc: Ville Syrj\u00e4l\u00e4 <ville.syrjala@linux.intel.com>\nCc: Jani Nikula <jani.nikula@intel.com>\nCc: Daniel Vetter <daniel.vetter@ffwll.ch>\nSigned-off-by: Abdiel Janulgue <abdiel.janulgue@linux.intel.com>\nSigned-off-by: Jani Nikula <jani.nikula@intel.com>\nLink: https://patchwork.freedesktop.org/patch/msgid/20171215102055.11729-1-abdiel.janulgue@linux.intel.com",
  "author_name": "Abdiel Janulgue",
  "author_email": "abdiel.janulgue@linux.intel.com",
  "author_date": "Fri Dec 15 12:20:55 2017 +0200",
  "author_date_iso": "2017-12-15T12:20:55+02:00",
  "committer_name": "Jani Nikula",
  "committer_email": "jani.nikula@intel.com",
  "committer_date": "Fri Jan 19 12:31:33 2018 +0200",
  "committer_date_iso": "2018-01-19T12:31:33+02:00",
  "files_changed": [
    "drivers/gpu/drm/i915/intel_hdmi.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/gpu/drm/i915/intel_hdmi.c",
      "insertions": 4,
      "deletions": 1
    }
  ],
  "total_insertions": 4,
  "total_deletions": 1,
  "total_changes": 5,
  "parents": [
    "a4dd90b1cb6f9f761753f72b4208feee4bf4d946"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.17",
    "v4.17-rc1",
    "v4.17-rc2",
    "v4.17-rc3",
    "v4.17-rc4",
    "v4.17-rc5",
    "v4.17-rc6",
    "v4.17-rc7",
    "v4.18",
    "v4.18-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpu/drm/i915/intel_hdmi.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}