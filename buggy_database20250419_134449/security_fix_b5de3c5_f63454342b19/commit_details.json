{
  "hash": "b5de3c5026f52b6b409904a1c37f590a6c0e44c5",
  "hash_short": "b5de3c50",
  "subject": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm",
  "body": "Pull KVM fixes from Paolo Bonzini:\n \"5.1 keeps its reputation as a big bugfix release for KVM x86.\n\n   - Fix for a memory leak introduced during the merge window\n\n   - Fixes for nested VMX with ept=0\n\n   - Fixes for AMD (APIC virtualization, NMI injection)\n\n   - Fixes for Hyper-V under KVM and KVM under Hyper-V\n\n   - Fixes for 32-bit SMM and tests for SMM virtualization\n\n   - More array_index_nospec peppering\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (21 commits)\n  KVM: x86: avoid misreporting level-triggered irqs as edge-triggered in tracing\n  KVM: fix spectrev1 gadgets\n  KVM: x86: fix warning Using plain integer as NULL pointer\n  selftests: kvm: add a selftest for SMM\n  selftests: kvm: fix for compilers that do not support -no-pie\n  selftests: kvm/evmcs_test: complete I/O before migrating guest state\n  KVM: x86: Always use 32-bit SMRAM save state for 32-bit kernels\n  KVM: x86: Don't clear EFER during SMM transitions for 32-bit vCPU\n  KVM: x86: clear SMM flags before loading state while leaving SMM\n  KVM: x86: Open code kvm_set_hflags\n  KVM: x86: Load SMRAM in a single shot when leaving SMM\n  KVM: nVMX: Expose RDPMC-exiting only when guest supports PMU\n  KVM: x86: Raise #GP when guest vCPU do not support PMU\n  x86/kvm: move kvm_load/put_guest_xcr0 into atomic context\n  KVM: x86: svm: make sure NMI is injected after nmi_singlestep\n  svm/avic: Fix invalidate logical APIC id entry\n  Revert \"svm: Fix AVIC incomplete IPI emulation\"\n  kvm: mmu: Fix overflow on kvm mmu page limit calculation\n  KVM: nVMX: always use early vmcs check when EPT is disabled\n  KVM: nVMX: allow tests to use bad virtual-APIC page address\n  ...",
  "full_message": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm\n\nPull KVM fixes from Paolo Bonzini:\n \"5.1 keeps its reputation as a big bugfix release for KVM x86.\n\n   - Fix for a memory leak introduced during the merge window\n\n   - Fixes for nested VMX with ept=0\n\n   - Fixes for AMD (APIC virtualization, NMI injection)\n\n   - Fixes for Hyper-V under KVM and KVM under Hyper-V\n\n   - Fixes for 32-bit SMM and tests for SMM virtualization\n\n   - More array_index_nospec peppering\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (21 commits)\n  KVM: x86: avoid misreporting level-triggered irqs as edge-triggered in tracing\n  KVM: fix spectrev1 gadgets\n  KVM: x86: fix warning Using plain integer as NULL pointer\n  selftests: kvm: add a selftest for SMM\n  selftests: kvm: fix for compilers that do not support -no-pie\n  selftests: kvm/evmcs_test: complete I/O before migrating guest state\n  KVM: x86: Always use 32-bit SMRAM save state for 32-bit kernels\n  KVM: x86: Don't clear EFER during SMM transitions for 32-bit vCPU\n  KVM: x86: clear SMM flags before loading state while leaving SMM\n  KVM: x86: Open code kvm_set_hflags\n  KVM: x86: Load SMRAM in a single shot when leaving SMM\n  KVM: nVMX: Expose RDPMC-exiting only when guest supports PMU\n  KVM: x86: Raise #GP when guest vCPU do not support PMU\n  x86/kvm: move kvm_load/put_guest_xcr0 into atomic context\n  KVM: x86: svm: make sure NMI is injected after nmi_singlestep\n  svm/avic: Fix invalidate logical APIC id entry\n  Revert \"svm: Fix AVIC incomplete IPI emulation\"\n  kvm: mmu: Fix overflow on kvm mmu page limit calculation\n  KVM: nVMX: always use early vmcs check when EPT is disabled\n  KVM: nVMX: allow tests to use bad virtual-APIC page address\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Tue Apr 16 08:52:00 2019 -0700",
  "author_date_iso": "2019-04-16T08:52:00-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Tue Apr 16 08:52:00 2019 -0700",
  "committer_date_iso": "2019-04-16T08:52:00-07:00",
  "files_changed": [],
  "files_changed_count": 0,
  "stats": [
    {
      "file": "arch/x86/include/asm/kvm_emulate.h",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "arch/x86/include/asm/kvm_host.h",
      "insertions": 10,
      "deletions": 7
    },
    {
      "file": "arch/x86/include/uapi/asm/vmx.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/emulate.c",
      "insertions": 102,
      "deletions": 89
    },
    {
      "file": "arch/x86/kvm/lapic.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/mmu.c",
      "insertions": 7,
      "deletions": 8
    },
    {
      "file": "arch/x86/kvm/mmu.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/pmu.c",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/svm.c",
      "insertions": 33,
      "deletions": 24
    },
    {
      "file": "arch/x86/kvm/trace.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/vmx/nested.c",
      "insertions": 36,
      "deletions": 11
    },
    {
      "file": "arch/x86/kvm/vmx/vmx.c",
      "insertions": 31,
      "deletions": 4
    },
    {
      "file": "arch/x86/kvm/vmx/vmx.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "insertions": 31,
      "deletions": 33
    },
    {
      "file": "arch/x86/kvm/x86.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "include/linux/kvm_host.h",
      "insertions": 6,
      "deletions": 4
    },
    {
      "file": "tools/testing/selftests/kvm/Makefile",
      "insertions": 8,
      "deletions": 1
    },
    {
      "file": "tools/testing/selftests/kvm/include/x86_64/processor.h",
      "insertions": 27,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/lib/kvm_util.c",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/lib/x86_64/processor.c",
      "insertions": 14,
      "deletions": 6
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/evmcs_test.c",
      "insertions": 3,
      "deletions": 2
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/smm_test.c",
      "insertions": 157,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/state_test.c",
      "insertions": 1,
      "deletions": 14
    },
    {
      "file": "virt/kvm/irqchip.c",
      "insertions": 3,
      "deletions": 2
    },
    {
      "file": "virt/kvm/kvm_main.c",
      "insertions": 4,
      "deletions": 2
    }
  ],
  "total_insertions": 496,
  "total_deletions": 212,
  "total_changes": 708,
  "parents": [
    "618d919cae2fcaadc752f27ddac8b939da8b441a",
    "7a223e06b1a411cef6c4cd7a9b9a33c8d225b10e"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.1",
    "v5.1-rc6",
    "v5.1-rc7",
    "v5.2",
    "v5.2-rc1",
    "v5.2-rc2",
    "v5.2-rc3",
    "v5.2-rc4",
    "v5.2-rc5",
    "v5.2-rc6"
  ],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": []
}