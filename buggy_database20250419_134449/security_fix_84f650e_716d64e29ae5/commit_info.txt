Commit Hash: 84f650e6323cfdb44aaa94adbab7480435427cf6
Subject: wifi: iwlwifi: mvm: remove per-STA MFP setting


Security Keywords:
- authentication

Full commit message:
wifi: iwlwifi: mvm: remove per-STA MFP setting

When we first add the STA before sending an authentication
frame this is false. However, in some cases such as FT or
certainly in MLO link switch scenarios, it will be true.

If it happens to be true, it causes a firmware assert (in
LMAC, 0x2528), because the same bit is used by the firmware
for tracking this setting as well as for tracking if the
management key has been installed, and then we get this
assert from the firmware when installing the MFP key as it
thinks it has already been installed.

Remove the setting for now, until the firmware disentangles
the two. We should be able to set it, in fact we should be
setting it speculatively before authentication/association,
to avoid processing management frames that should have been
protected/encrypted before the key is set.

Signed-off-by: Johannes Berg <johannes.berg@intel.com>
Signed-off-by: Gregory Greenman <gregory.greenman@intel.com>
Link: https://lore.kernel.org/r/20230417113648.adbeb0e0bfed.I400d0ee3721dc4f294313be992d277ba4d9c88d9@changeid
Signed-off-by: Johannes Berg <johannes.berg@intel.com>

Metadata:
Author: Johannes Berg <johannes.berg@intel.com>
Author Date: Mon Apr 17 11:41:24 2023 +0300
Committer: Johannes Berg <johannes.berg@intel.com>
Commit Date: Tue Apr 18 14:47:54 2023 +0200

Files Changed: 1
Lines Added: 0
Lines Removed: 1
Total Changes: 1
