commit 33fd8195529d74c0fe23cddd1c76fe7e03bbd324
Author: Johannes Berg <johannes@sipsolutions.net>
Date:   Mon Dec 1 18:50:27 2008 +0100

    iwlwifi: disable AP mode
    
    iwlwifi does not support AP mode in any way. For one, it doesn't even
    buffer multicast/broadcast frames properly. We didn't allow zd1211rw AP
    mode to be enabled without this, so iwlwifi shouldn't be allowed to
    advertise AP mode either.
    
    It also doesn't work at all, it doesn't even answer to probe requests,
    I'm guessing the packet injection code was disabled again.
    
    Signed-off-by: Johannes Berg <johannes@sipsolutions.net>
    Acked-by: Reinette Chatre <reinette.chatre@intel.com>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

diff --git a/drivers/net/wireless/iwlwifi/iwl-core.c b/drivers/net/wireless/iwlwifi/iwl-core.c
index 6aa332bebc5f..0980f217a941 100644
--- a/drivers/net/wireless/iwlwifi/iwl-core.c
+++ b/drivers/net/wireless/iwlwifi/iwl-core.c
@@ -808,7 +808,6 @@ int iwl_setup_mac(struct iwl_priv *priv)
 		    IEEE80211_HW_NOISE_DBM |
 		    IEEE80211_HW_AMPDU_AGGREGATION;
 	hw->wiphy->interface_modes =
-		BIT(NL80211_IFTYPE_AP) |
 		BIT(NL80211_IFTYPE_STATION) |
 		BIT(NL80211_IFTYPE_ADHOC);