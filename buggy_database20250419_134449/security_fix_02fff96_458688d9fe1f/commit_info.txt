Commit Hash: 02fff96a79775b7adc34eb599fc6b0476ccda520
Subject: net: add support for netdev notifier error injection


Security Keywords:
- injection

Full commit message:
net: add support for netdev notifier error injection

This module allows to insert errors in some of netdevice's notifier
events. All network drivers use these notifiers to signal various events
and to check if they are allowed, e.g. PRECHANGEMTU and CHANGEMTU
afterwards. Until recently I had to run failure tests by injecting
a custom module, but now this infrastructure makes it trivial to test
these failure paths. Some of the recent bugs I fixed were found using
this module.
Here's an example:
 $ cd /sys/kernel/debug/notifier-error-inject/netdev
 $ echo -22 > actions/NETDEV_CHANGEMTU/error
 $ ip link set eth0 mtu 1024
 RTNETLINK answers: Invalid argument

CC: Akinobu Mita <akinobu.mita@gmail.com>
CC: "David S. Miller" <davem@davemloft.net>
CC: netdev <netdev@vger.kernel.org>
Signed-off-by: Nikolay Aleksandrov <nikolay@cumulusnetworks.com>
Signed-off-by: David S. Miller <davem@davemloft.net>

Metadata:
Author: Nikolay Aleksandrov <nikolay@cumulusnetworks.com>
Author Date: Sat Nov 28 13:45:28 2015 +0100
Committer: David S. Miller <davem@davemloft.net>
Commit Date: Tue Dec 1 15:31:57 2015 -0500

Files Changed: 4
Lines Added: 102
Lines Removed: 0
Total Changes: 102
