diff --cc arch/x86/purgatory/Makefile
index 42abd6af1198,005324d6c76b..c2a29be35c01
--- a/arch/x86/purgatory/Makefile
+++ b/arch/x86/purgatory/Makefile
@@@ -12,13 -12,8 +12,13 @@@ $(obj)/string.o: $(srctree)/arch/x86/bo
  $(obj)/sha256.o: $(srctree)/lib/crypto/sha256.c FORCE
  	$(call if_changed_rule,cc_o_c)
  
- CFLAGS_sha256.o := -D__DISABLE_EXPORTS
+ CFLAGS_sha256.o := -D__DISABLE_EXPORTS -D__NO_FORTIFY
  
 +# When profile-guided optimization is enabled, llvm emits two different
 +# overlapping text sections, which is not supported by kexec. Remove profile
 +# optimization flags.
 +KBUILD_CFLAGS := $(filter-out -fprofile-sample-use=% -fprofile-use=%,$(KBUILD_CFLAGS))
 +
  # When linking purgatory.ro with -r unresolved symbols are not checked,
  # also link a purgatory.chk binary without -r to check for unresolved symbols.
  PURGATORY_LDFLAGS := -e purgatory_start -z nodefaultlib