Commit Hash: e64f2918c6e7a2c2cbf310d1b571d1a886b91475
Subject: KVM: arm64: vgic-its: Use the per-ITS translation cache for injection


Security Keywords:
- injection

Full commit message:
KVM: arm64: vgic-its: Use the per-ITS translation cache for injection

Everything is in place to switch to per-ITS translation caches. Start
using the per-ITS cache to avoid the lock serialization related to the
global translation cache. Explicitly check for out-of-range device and
event IDs as the cache index is packed based on the range the ITS
actually supports.

Take the RCU read lock to protect against the returned descriptor being
freed while trying to take a reference on it, as it is no longer
necessary to acquire the lpi_list_lock.

Signed-off-by: Oliver Upton <oliver.upton@linux.dev>
Link: https://lore.kernel.org/r/20240422200158.2606761-11-oliver.upton@linux.dev
Signed-off-by: Marc Zyngier <maz@kernel.org>

Metadata:
Author: Oliver Upton <oliver.upton@linux.dev>
Author Date: Mon Apr 22 20:01:49 2024 +0000
Committer: Marc Zyngier <maz@kernel.org>
Commit Date: Thu Apr 25 13:19:55 2024 +0100

Files Changed: 1
Lines Added: 17
Lines Removed: 46
Total Changes: 63
