Commit Hash: 30abb3a67f4b2aa160feeb3c0b771f730cbcca67
Subject: block: Add should_fail_bio() for bpf error injection


Security Keywords:
- injection

Full commit message:
block: Add should_fail_bio() for bpf error injection

The classic error injection mechanism, should_fail_request() does not
support use cases where more information is required (from the entire
struct bio, for example).

To that end, this patch introduces should_fail_bio(), which calls
should_fail_request() under the hood but provides a convenient
place for kprobes to hook into if they require the entire struct bio.
This patch also replaces some existing calls to should_fail_request()
with should_fail_bio() with no degradation in performance.

Signed-off-by: Howard McLauchlan <hmclauchlan@fb.com>
Signed-off-by: Jens Axboe <axboe@kernel.dk>

Metadata:
Author: Howard McLauchlan <hmclauchlan@fb.com>
Author Date: Tue Feb 6 14:05:39 2018 -0800
Committer: Jens Axboe <axboe@kernel.dk>
Commit Date: Tue Feb 6 15:09:51 2018 -0700

Files Changed: 1
Lines Added: 10
Lines Removed: 1
Total Changes: 11
