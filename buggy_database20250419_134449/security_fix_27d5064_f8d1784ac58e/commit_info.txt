Commit Hash: 27d50646d0815f02677ff870a5691f36be67c08f
Subject: fbdev: au1200fb: replace deprecated strncpy with strscpy


Security Keywords:
- hardening

Full commit message:
fbdev: au1200fb: replace deprecated strncpy with strscpy

strncpy() is deprecated for use on NUL-terminated destination strings
[1] and as such we should prefer more robust and less ambiguous string
interfaces.

Let's use the new 2-argument strscpy() which guarantees NUL-termination
on the destination buffer while also simplifying the syntax. Note that
strscpy() will not NUL-pad the destination buffer like strncpy() does.

However, the NUL-padding behavior of strncpy() is not required since
fbdev is already NUL-allocated from au1200fb_drv_probe() ->
frameuffer_alloc(), rendering any additional NUL-padding redundant.
|	p = kzalloc(fb_info_size + size, GFP_KERNEL);

Link: https://www.kernel.org/doc/html/latest/process/deprecated.html#strncpy-on-nul-terminated-strings [1]
Link: https://manpages.debian.org/testing/linux-manual-4.8/strscpy.9.en.html [2]
Link: https://github.com/KSPP/linux/issues/90
Cc: linux-hardening@vger.kernel.org
Signed-off-by: Justin Stitt <justinstitt@google.com>
Reviewed-by: Kees Cook <keescook@chromium.org>
Signed-off-by: Helge Deller <deller@gmx.de>

Metadata:
Author: Justin Stitt <justinstitt@google.com>
Author Date: Mon Mar 18 23:46:33 2024 +0000
Committer: Helge Deller <deller@gmx.de>
Commit Date: Thu Apr 25 11:56:48 2024 +0200

Files Changed: 1
Lines Added: 1
Lines Removed: 1
Total Changes: 2
