Files changed: 0
Insertions: 11449
Deletions: 7386
Total changes: 18835

File-specific changes:
Documentation/gpu/i915.rst: +0 -3
drivers/gpu/drm/i915/Makefile: +9 -3
drivers/gpu/drm/i915/display/dvo_ch7017.c: +1 -1
drivers/gpu/drm/i915/display/dvo_ch7xxx.c: +1 -1
drivers/gpu/drm/i915/display/dvo_ivch.c: +1 -1
drivers/gpu/drm/i915/display/dvo_ns2501.c: +1 -1
drivers/gpu/drm/i915/display/dvo_sil164.c: +1 -1
drivers/gpu/drm/i915/display/dvo_tfp410.c: +1 -1
drivers/gpu/drm/i915/display/icl_dsi.c: +42 -23
drivers/gpu/drm/i915/display/intel_atomic.c: +1 -1
drivers/gpu/drm/i915/display/intel_atomic_plane.c: +2 -1
drivers/gpu/drm/i915/display/intel_audio.c: +1 -1
drivers/gpu/drm/i915/display/intel_bios.c: +1 -22
drivers/gpu/drm/i915/display/intel_bw.c: +15 -1
drivers/gpu/drm/i915/display/intel_bw.h: +0 -15
drivers/gpu/drm/i915/display/intel_cdclk.c: +7 -15
drivers/gpu/drm/i915/display/intel_color.c: +1 -1
drivers/gpu/drm/i915/display/intel_combo_phy.c: +1 -1
drivers/gpu/drm/i915/display/intel_connector.c: +2 -2
drivers/gpu/drm/i915/display/intel_crt.c: +7 -10
drivers/gpu/drm/i915/display/intel_ddi.c: +21 -8
drivers/gpu/drm/i915/display/intel_display.c: +53 -81
drivers/gpu/drm/i915/display/intel_display.h: +189 -0
drivers/gpu/drm/i915/display/intel_display_power.c: +92 -55
drivers/gpu/drm/i915/display/intel_display_power.h: +26 -12
drivers/gpu/drm/i915/{intel_drv.h => display/intel_display_types.h}: +20 -138
drivers/gpu/drm/i915/display/intel_dp.c: +49 -53
drivers/gpu/drm/i915/display/intel_dp_aux_backlight.c: +1 -1
drivers/gpu/drm/i915/display/intel_dp_link_training.c: +1 -1
drivers/gpu/drm/i915/display/intel_dp_mst.c: +19 -8
drivers/gpu/drm/i915/display/intel_dp_mst.h: +2 -7
drivers/gpu/drm/i915/display/intel_dpio_phy.c: +3 -5
drivers/gpu/drm/i915/display/intel_dpll_mgr.c: +12 -34
drivers/gpu/drm/i915/display/intel_dsi.h: +2 -1
drivers/gpu/drm/i915/display/intel_dsi_dcs_backlight.c: +1 -1
drivers/gpu/drm/i915/display/intel_dsi_vbt.c: +1 -1
drivers/gpu/drm/i915/display/intel_dvo.c: +1 -1
drivers/gpu/drm/i915/display/intel_fbc.c: +3 -4
drivers/gpu/drm/i915/display/intel_fbdev.c: +22 -29
drivers/gpu/drm/i915/display/intel_fifo_underrun.c: +2 -1
drivers/gpu/drm/i915/display/intel_frontbuffer.c: +183 -74
drivers/gpu/drm/i915/display/intel_frontbuffer.h: +48 -22
drivers/gpu/drm/i915/display/intel_gmbus.c: +3 -26
drivers/gpu/drm/i915/display/intel_gmbus.h: +22 -0
drivers/gpu/drm/i915/display/intel_hdcp.c: +18 -21
drivers/gpu/drm/i915/display/intel_hdmi.c: +21 -22
drivers/gpu/drm/i915/display/intel_hotplug.c: +7 -1
drivers/gpu/drm/i915/display/intel_lspcon.c: +1 -1
drivers/gpu/drm/i915/display/intel_lvds.c: +3 -5
drivers/gpu/drm/i915/display/intel_opregion.c: +1 -1
drivers/gpu/drm/i915/display/intel_overlay.c: +69 -74
drivers/gpu/drm/i915/display/intel_panel.c: +1 -1
drivers/gpu/drm/i915/display/intel_pipe_crc.c: +1 -1
drivers/gpu/drm/i915/display/intel_psr.c: +4 -4
drivers/gpu/drm/i915/display/intel_quirks.c: +1 -1
drivers/gpu/drm/i915/display/intel_sdvo.c: +1 -1
drivers/gpu/drm/i915/display/intel_sprite.c: +8 -1
drivers/gpu/drm/i915/display/intel_sprite.h: +1 -7
drivers/gpu/drm/i915/display/intel_tc.c: +7 -0
drivers/gpu/drm/i915/display/intel_tc.h: +2 -7
drivers/gpu/drm/i915/display/intel_tv.c: +1 -1
drivers/gpu/drm/i915/display/intel_vbt_defs.h: +0 -3
drivers/gpu/drm/i915/display/intel_vdsc.c: +1 -1
drivers/gpu/drm/i915/display/vlv_dsi.c: +28 -56
drivers/gpu/drm/i915/display/vlv_dsi_pll.c: +7 -13
drivers/gpu/drm/i915/gem/i915_gem_clflush.c: +45 -82
drivers/gpu/drm/i915/gem/i915_gem_client_blt.c: +26 -13
drivers/gpu/drm/i915/gem/i915_gem_context.c: +67 -103
drivers/gpu/drm/i915/gem/i915_gem_context.h: +0 -2
drivers/gpu/drm/i915/gem/i915_gem_context_types.h: +0 -5
drivers/gpu/drm/i915/gem/i915_gem_domain.c: +30 -19
drivers/gpu/drm/i915/gem/i915_gem_execbuffer.c: +192 -129
drivers/gpu/drm/i915/gem/i915_gem_fence.c: +1 -2
drivers/gpu/drm/i915/gem/i915_gem_mman.c: +12 -12
drivers/gpu/drm/i915/gem/i915_gem_object.c: +11 -67
drivers/gpu/drm/i915/gem/i915_gem_object.h: +5 -1
drivers/gpu/drm/i915/gem/i915_gem_object_blt.c: +334 -36
drivers/gpu/drm/i915/gem/i915_gem_object_blt.h: +19 -6
drivers/gpu/drm/i915/gem/i915_gem_object_types.h: +2 -7
drivers/gpu/drm/i915/gem/i915_gem_pages.c: +1 -12
drivers/gpu/drm/i915/gem/i915_gem_phys.c: +7 -0
drivers/gpu/drm/i915/gem/i915_gem_pm.c: +4 -14
drivers/gpu/drm/i915/gem/i915_gem_shmem.c: +1 -0
drivers/gpu/drm/i915/gem/i915_gem_shrinker.c: +60 -14
drivers/gpu/drm/i915/gem/i915_gem_shrinker.h: +31 -0
drivers/gpu/drm/i915/gem/i915_gem_stolen.c: +7 -2
drivers/gpu/drm/i915/gem/i915_gem_stolen.h: +35 -0
drivers/gpu/drm/i915/gem/i915_gem_userptr.c: +1 -2
drivers/gpu/drm/i915/gem/i915_gemfs.c: +9 -22
drivers/gpu/drm/i915/gem/selftests/huge_pages.c: +8 -112
drivers/gpu/drm/i915/gem/selftests/i915_gem_client_blt.c: +11 -5
drivers/gpu/drm/i915/gem/selftests/i915_gem_coherency.c: +3 -1
drivers/gpu/drm/i915/gem/selftests/i915_gem_context.c: +40 -153
drivers/gpu/drm/i915/gem/selftests/i915_gem_mman.c: +6 -3
drivers/gpu/drm/i915/gem/selftests/i915_gem_object_blt.c: +123 -5
drivers/gpu/drm/i915/gem/selftests/igt_gem_utils.c: +140 -1
drivers/gpu/drm/i915/gem/selftests/igt_gem_utils.h: +16 -0
drivers/gpu/drm/i915/gt/intel_breadcrumbs.c: +8 -28
drivers/gpu/drm/i915/gt/intel_context.c: +63 -24
drivers/gpu/drm/i915/gt/intel_context.h: +24 -17
drivers/gpu/drm/i915/gt/intel_context_types.h: +8 -4
drivers/gpu/drm/i915/gt/intel_engine.h: +1 -16
drivers/gpu/drm/i915/gt/intel_engine_cs.c: +72 -171
drivers/gpu/drm/i915/gt/intel_engine_pm.c: +47 -21
drivers/gpu/drm/i915/gt/intel_engine_pm.h: +10 -8
drivers/gpu/drm/i915/gt/intel_engine_pool.c: +177 -0
drivers/gpu/drm/i915/gt/intel_engine_pool.h: +34 -0
drivers/gpu/drm/i915/gt/intel_engine_pool_types.h: +29 -0
drivers/gpu/drm/i915/gt/intel_engine_types.h: +48 -11
drivers/gpu/drm/i915/gt/intel_engine_user.c: +303 -0
drivers/gpu/drm/i915/gt/intel_engine_user.h: +25 -0
drivers/gpu/drm/i915/gt/intel_gpu_commands.h: +7 -4
drivers/gpu/drm/i915/gt/intel_gt.c: +27 -9
drivers/gpu/drm/i915/gt/intel_gt.h: +1 -1
drivers/gpu/drm/i915/gt/intel_gt_irq.c: +455 -0
drivers/gpu/drm/i915/gt/intel_gt_irq.h: +44 -0
drivers/gpu/drm/i915/gt/intel_gt_pm.c: +24 -16
drivers/gpu/drm/i915/gt/intel_gt_pm.h: +28 -3
drivers/gpu/drm/i915/gt/intel_gt_pm_irq.c: +109 -0
drivers/gpu/drm/i915/gt/intel_gt_pm_irq.h: +22 -0
drivers/gpu/drm/i915/gt/intel_gt_types.h: +10 -4
drivers/gpu/drm/i915/gt/intel_lrc.c: +364 -122
drivers/gpu/drm/i915/gt/intel_lrc_reg.h: +1 -0
drivers/gpu/drm/i915/gt/intel_mocs.c: +104 -62
drivers/gpu/drm/i915/gt/intel_mocs.h: +1 -2
drivers/gpu/drm/i915/gt/intel_renderstate.c: +3 -1
drivers/gpu/drm/i915/gt/intel_reset.c: +10 -6
drivers/gpu/drm/i915/gt/intel_ringbuffer.c: +79 -68
drivers/gpu/drm/i915/gt/intel_sseu.c: +1 -1
drivers/gpu/drm/i915/gt/intel_timeline.c: +52 -80
drivers/gpu/drm/i915/gt/intel_timeline.h: +2 -1
drivers/gpu/drm/i915/gt/intel_timeline_types.h: +19 -1
drivers/gpu/drm/i915/gt/intel_workarounds.c: +23 -3
drivers/gpu/drm/i915/gt/mock_engine.c: +43 -55
drivers/gpu/drm/i915/gt/selftest_context.c: +456 -0
drivers/gpu/drm/i915/gt/selftest_engine.c: +28 -0
drivers/gpu/drm/i915/gt/selftest_engine.h: +14 -0
drivers/gpu/drm/i915/gt/selftest_engine_cs.c: +15 -11
drivers/gpu/drm/i915/gt/selftest_engine_pm.c: +83 -0
drivers/gpu/drm/i915/gt/selftest_hangcheck.c: +15 -2
drivers/gpu/drm/i915/gt/selftest_lrc.c: +85 -58
drivers/gpu/drm/i915/gt/selftest_timeline.c: +4 -2
drivers/gpu/drm/i915/gt/selftest_workarounds.c: +22 -11
drivers/gpu/drm/i915/gt/selftests/mock_timeline.c: +1 -1
drivers/gpu/drm/i915/gt/uc/intel_guc.c: +12 -26
drivers/gpu/drm/i915/gt/uc/intel_guc.h: +19 -24
drivers/gpu/drm/i915/gt/uc/intel_guc_ads.c: +2 -21
drivers/gpu/drm/i915/gt/uc/intel_guc_ads.h: +2 -21
drivers/gpu/drm/i915/gt/uc/intel_guc_ct.c: +2 -20
drivers/gpu/drm/i915/gt/uc/intel_guc_ct.h: +2 -20
drivers/gpu/drm/i915/gt/uc/intel_guc_fw.c: +8 -23
drivers/gpu/drm/i915/gt/uc/intel_guc_fw.h: +2 -21
drivers/gpu/drm/i915/gt/uc/intel_guc_fwif.h: +3 -20
drivers/gpu/drm/i915/gt/uc/intel_guc_log.c: +8 -22
drivers/gpu/drm/i915/gt/uc/intel_guc_log.h: +2 -21
drivers/gpu/drm/i915/gt/uc/intel_guc_reg.h: +3 -21
drivers/gpu/drm/i915/gt/uc/intel_guc_submission.c: +62 -46
drivers/gpu/drm/i915/gt/uc/intel_guc_submission.h: +3 -23
drivers/gpu/drm/i915/gt/uc/intel_huc.c: +27 -30
drivers/gpu/drm/i915/gt/uc/intel_huc.h: +12 -21
drivers/gpu/drm/i915/gt/uc/intel_huc_fw.c: +9 -4
drivers/gpu/drm/i915/gt/uc/intel_huc_fw.h: +2 -3
drivers/gpu/drm/i915/gt/uc/intel_uc.c: +226 -169
drivers/gpu/drm/i915/gt/uc/intel_uc.h: +30 -32
drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c: +184 -108
drivers/gpu/drm/i915/gt/uc/intel_uc_fw.h: +95 -39
drivers/gpu/drm/i915/gt/uc/selftest_guc.c: +1 -20
drivers/gpu/drm/i915/gvt/aperture_gm.c: +5 -5
drivers/gpu/drm/i915/gvt/cmd_parser.c: +149 -31
drivers/gpu/drm/i915/gvt/debugfs.c: +9 -38
drivers/gpu/drm/i915/gvt/gvt.c: +1 -3
drivers/gpu/drm/i915/gvt/gvt.h: +6 -2
drivers/gpu/drm/i915/gvt/interrupt.c: +2 -2
drivers/gpu/drm/i915/gvt/kvmgt.c: +5 -10
drivers/gpu/drm/i915/gvt/mmio_context.c: +39 -18
drivers/gpu/drm/i915/gvt/scheduler.c: +25 -11
drivers/gpu/drm/i915/gvt/vgpu.c: +1 -3
drivers/gpu/drm/i915/i915_active.c: +286 -45
drivers/gpu/drm/i915/i915_active.h: +11 -22
drivers/gpu/drm/i915/i915_active_types.h: +16 -1
drivers/gpu/drm/i915/i915_buddy.c: +428 -0
drivers/gpu/drm/i915/i915_buddy.h: +128 -0
drivers/gpu/drm/i915/i915_cmd_parser.c: +2 -2
drivers/gpu/drm/i915/i915_debugfs.c: +102 -188
drivers/gpu/drm/i915/i915_drv.c: +217 -574
drivers/gpu/drm/i915/i915_drv.h: +161 -422
drivers/gpu/drm/i915/i915_gem.c: +110 -183
drivers/gpu/drm/i915/i915_gem.h: +2 -0
drivers/gpu/drm/i915/i915_gem_batch_pool.c: +0 -132
drivers/gpu/drm/i915/i915_gem_batch_pool.h: +0 -26
drivers/gpu/drm/i915/i915_gem_evict.c: +0 -9
drivers/gpu/drm/i915/i915_gem_fence_reg.c: +64 -44
drivers/gpu/drm/i915/i915_gem_fence_reg.h: +1 -1
drivers/gpu/drm/i915/i915_gem_gtt.c: +116 -65
drivers/gpu/drm/i915/i915_gem_gtt.h: +3 -3
drivers/gpu/drm/i915/i915_getparam.c: +168 -0
drivers/gpu/drm/i915/i915_globals.c: +1 -0
drivers/gpu/drm/i915/i915_globals.h: +1 -0
drivers/gpu/drm/i915/i915_gpu_error.c: +129 -159
drivers/gpu/drm/i915/i915_gpu_error.h: +5 -2
drivers/gpu/drm/i915/i915_irq.c: +339 -756
drivers/gpu/drm/i915/i915_irq.h: +57 -22
drivers/gpu/drm/i915/i915_memcpy.c: +1 -1
drivers/gpu/drm/i915/i915_memcpy.h: +32 -0
drivers/gpu/drm/i915/i915_mm.c: +2 -3
drivers/gpu/drm/i915/i915_pci.c: +16 -12
drivers/gpu/drm/i915/i915_perf.c: +279 -267
drivers/gpu/drm/i915/i915_perf.h: +32 -0
drivers/gpu/drm/i915/i915_pmu.c: +154 -140
drivers/gpu/drm/i915/i915_priolist_types.h: +13 -12
drivers/gpu/drm/i915/i915_query.c: +2 -3
drivers/gpu/drm/i915/i915_reg.h: +59 -72
drivers/gpu/drm/i915/i915_request.c: +127 -125
drivers/gpu/drm/i915/i915_request.h: +2 -3
drivers/gpu/drm/i915/i915_scheduler.c: +1 -2
drivers/gpu/drm/i915/i915_selftest.h: +2 -0
drivers/gpu/drm/i915/i915_suspend.c: +2 -1
drivers/gpu/drm/i915/i915_suspend.h: +14 -0
drivers/gpu/drm/i915/i915_sw_fence.c: +18 -5
drivers/gpu/drm/i915/i915_sw_fence.h: +7 -0
drivers/gpu/drm/i915/i915_sw_fence_work.c: +95 -0
drivers/gpu/drm/i915/i915_sw_fence_work.h: +44 -0
drivers/gpu/drm/i915/i915_sysfs.c: +1 -1
drivers/gpu/drm/i915/i915_sysfs.h: +14 -0
drivers/gpu/drm/i915/i915_trace.h: +6 -6
drivers/gpu/drm/i915/i915_utils.c: +78 -0
drivers/gpu/drm/i915/i915_utils.h: +49 -10
drivers/gpu/drm/i915/i915_vgpu.c: +3 -1
drivers/gpu/drm/i915/i915_vma.c: +38 -42
drivers/gpu/drm/i915/i915_vma.h: +16 -5
drivers/gpu/drm/i915/intel_csr.c: +7 -0
drivers/gpu/drm/i915/intel_device_info.c: +3 -2
drivers/gpu/drm/i915/intel_device_info.h: +1 -0
drivers/gpu/drm/i915/intel_gvt.c: +1 -1
drivers/gpu/drm/i915/intel_pch.c: +201 -0
drivers/gpu/drm/i915/intel_pch.h: +73 -0
drivers/gpu/drm/i915/intel_pm.c: +5 -14
drivers/gpu/drm/i915/intel_runtime_pm.c: +1 -0
drivers/gpu/drm/i915/intel_sideband.c: +1 -3
drivers/gpu/drm/i915/intel_uncore.c: +69 -32
drivers/gpu/drm/i915/intel_uncore.h: +23 -7
drivers/gpu/drm/i915/intel_wakeref.c: +59 -21
drivers/gpu/drm/i915/intel_wakeref.h: +53 -20
drivers/gpu/drm/i915/intel_wopcm.c: +128 -142
drivers/gpu/drm/i915/intel_wopcm.h: +16 -4
drivers/gpu/drm/i915/oa/Makefile: +7 -0
drivers/gpu/drm/i915/oa/i915_oa_bdw.c: +17 -18
drivers/gpu/drm/i915/oa/i915_oa_bdw.h: +4 -3
drivers/gpu/drm/i915/oa/i915_oa_bxt.c: +17 -18
drivers/gpu/drm/i915/oa/i915_oa_bxt.h: +4 -3
drivers/gpu/drm/i915/oa/i915_oa_cflgt2.c: +17 -18
drivers/gpu/drm/i915/oa/i915_oa_cflgt2.h: +4 -3
drivers/gpu/drm/i915/oa/i915_oa_cflgt3.c: +17 -18
drivers/gpu/drm/i915/oa/i915_oa_cflgt3.h: +4 -3
drivers/gpu/drm/i915/oa/i915_oa_chv.c: +17 -18
drivers/gpu/drm/i915/oa/i915_oa_chv.h: +4 -3
drivers/gpu/drm/i915/oa/i915_oa_cnl.c: +17 -18
drivers/gpu/drm/i915/oa/i915_oa_cnl.h: +4 -3
drivers/gpu/drm/i915/oa/i915_oa_glk.c: +17 -18
drivers/gpu/drm/i915/oa/i915_oa_glk.h: +4 -3
drivers/gpu/drm/i915/oa/i915_oa_hsw.c: +17 -18
drivers/gpu/drm/i915/oa/i915_oa_hsw.h: +4 -3
drivers/gpu/drm/i915/oa/i915_oa_icl.c: +17 -18
drivers/gpu/drm/i915/oa/i915_oa_icl.h: +4 -3
drivers/gpu/drm/i915/oa/i915_oa_kblgt2.c: +17 -18
drivers/gpu/drm/i915/oa/i915_oa_kblgt2.h: +4 -3
drivers/gpu/drm/i915/oa/i915_oa_kblgt3.c: +17 -18
drivers/gpu/drm/i915/oa/i915_oa_kblgt3.h: +4 -3
drivers/gpu/drm/i915/oa/i915_oa_sklgt2.c: +17 -18
drivers/gpu/drm/i915/oa/i915_oa_sklgt2.h: +4 -3
drivers/gpu/drm/i915/oa/i915_oa_sklgt3.c: +17 -18
drivers/gpu/drm/i915/oa/i915_oa_sklgt3.h: +4 -3
drivers/gpu/drm/i915/oa/i915_oa_sklgt4.c: +17 -18
drivers/gpu/drm/i915/oa/i915_oa_sklgt4.h: +4 -3
drivers/gpu/drm/i915/selftests/i915_active.c: +1 -2
drivers/gpu/drm/i915/selftests/i915_buddy.c: +720 -0
drivers/gpu/drm/i915/selftests/i915_gem_evict.c: +11 -8
drivers/gpu/drm/i915/selftests/i915_live_selftests.h: +4 -2
drivers/gpu/drm/i915/selftests/i915_mock_selftests.h: +1 -0
drivers/gpu/drm/i915/selftests/i915_request.c: +28 -18
drivers/gpu/drm/i915/selftests/i915_selftest.c: +1 -1
drivers/gpu/drm/i915/selftests/igt_spinner.c: +16 -14
drivers/gpu/drm/i915/selftests/igt_spinner.h: +2 -4
drivers/gpu/drm/i915/selftests/lib_sw_fence.c: +1 -0
drivers/gpu/drm/i915/selftests/mock_gem_device.c: +1 -0
drivers/gpu/drm/i915/selftests/mock_request.c: +2 -4
drivers/gpu/drm/i915/selftests/mock_request.h: +1 -3
include/drm/i915_pciids.h: +4 -1
