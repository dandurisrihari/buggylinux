Commit Hash: a4412fdd49dc011bcc2c0d81ac4cab7457092650
Subject: error-injection: Add prompt for function error injection


Security Keywords:
- injection

Full commit message:
error-injection: Add prompt for function error injection

The config to be able to inject error codes into any function annotated
with ALLOW_ERROR_INJECTION() is enabled when FUNCTION_ERROR_INJECTION is
enabled.  But unfortunately, this is always enabled on x86 when KPROBES
is enabled, and there's no way to turn it off.

As kprobes is useful for observability of the kernel, it is useful to
have it enabled in production environments.  But error injection should
be avoided.  Add a prompt to the config to allow it to be disabled even
when kprobes is enabled, and get rid of the "def_bool y".

This is a kernel debug feature (it's in Kconfig.debug), and should have
never been something enabled by default.

Cc: stable@vger.kernel.org
Fixes: 540adea3809f6 ("error-injection: Separate error-injection from kprobe")
Signed-off-by: Steven Rostedt (Google) <rostedt@goodmis.org>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

Metadata:
Author: Steven Rostedt (Google) <rostedt@goodmis.org>
Author Date: Mon Nov 21 10:44:03 2022 -0500
Committer: Linus Torvalds <torvalds@linux-foundation.org>
Commit Date: Thu Dec 1 13:14:21 2022 -0800

Files Changed: 1
Lines Added: 7
Lines Removed: 1
Total Changes: 8
