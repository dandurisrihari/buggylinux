{
  "hash": "0181ce31b26021f7c2f9506112a05c847a36f0f2",
  "hash_short": "0181ce31",
  "subject": "IB/hfi1: Add receive fault injection feature",
  "body": "Add fault injection capability:\n  - Drop packets unconditionally (fault_by_packet)\n  - Drop packets based on opcode (fault_by_opcode)\n\nThis feature reacts to the global FAULT_INJECTION\nconfig flag.\n\nThe faulting traces have been added:\n  - misc/fault_opcode\n  - misc/fault_packet\n\nSee 'Documentation/fault-injection/fault-injection.txt'\nfor details.\n\nExamples:\n  - Dropping packets by opcode:\n    /sys/kernel/debug/hfi1/hfi1_X/fault_opcode\n\t# Enable fault\n\techo Y > fault_by_opcode\n\t# Setprobability of dropping (0-100%)\n\t# echo 25 > probability\n\t# Set opcode\n\techo 0x64 > opcode\n\t# Number of times to fault\n\techo 3 > times\n\t# An optional mask allows you to fault\n\t# a range of opcodes\n\techo 0xf0 > mask\n    /sys/kernel/debug/hfi1/hfi1_X/fault_stats\n    contains a value in parentheses to indicate\n    number of each opcode dropped.\n\n  - Dropping packets unconditionally\n    /sys/kernel/debug/hfi1/hfi1_X/fault_packet\n\t# Enable fault\n\techo Y > fault_by_packet\n    /sys/kernel/debug/hfi1/hfi1_X/fault_packet/fault_stats\n    contains the number of packets dropped.\n\nReviewed-by: Dennis Dalessandro <dennis.dalessandro@intel.com>\nSigned-off-by: Mike Marciniszyn <mike.marciniszyn@intel.com>\nSigned-off-by: Don Hiatt <don.hiatt@intel.com>\nSigned-off-by: Dennis Dalessandro <dennis.dalessandro@intel.com>\nSigned-off-by: Doug Ledford <dledford@redhat.com>",
  "full_message": "IB/hfi1: Add receive fault injection feature\n\nAdd fault injection capability:\n  - Drop packets unconditionally (fault_by_packet)\n  - Drop packets based on opcode (fault_by_opcode)\n\nThis feature reacts to the global FAULT_INJECTION\nconfig flag.\n\nThe faulting traces have been added:\n  - misc/fault_opcode\n  - misc/fault_packet\n\nSee 'Documentation/fault-injection/fault-injection.txt'\nfor details.\n\nExamples:\n  - Dropping packets by opcode:\n    /sys/kernel/debug/hfi1/hfi1_X/fault_opcode\n\t# Enable fault\n\techo Y > fault_by_opcode\n\t# Setprobability of dropping (0-100%)\n\t# echo 25 > probability\n\t# Set opcode\n\techo 0x64 > opcode\n\t# Number of times to fault\n\techo 3 > times\n\t# An optional mask allows you to fault\n\t# a range of opcodes\n\techo 0xf0 > mask\n    /sys/kernel/debug/hfi1/hfi1_X/fault_stats\n    contains a value in parentheses to indicate\n    number of each opcode dropped.\n\n  - Dropping packets unconditionally\n    /sys/kernel/debug/hfi1/hfi1_X/fault_packet\n\t# Enable fault\n\techo Y > fault_by_packet\n    /sys/kernel/debug/hfi1/hfi1_X/fault_packet/fault_stats\n    contains the number of packets dropped.\n\nReviewed-by: Dennis Dalessandro <dennis.dalessandro@intel.com>\nSigned-off-by: Mike Marciniszyn <mike.marciniszyn@intel.com>\nSigned-off-by: Don Hiatt <don.hiatt@intel.com>\nSigned-off-by: Dennis Dalessandro <dennis.dalessandro@intel.com>\nSigned-off-by: Doug Ledford <dledford@redhat.com>",
  "author_name": "Don Hiatt",
  "author_email": "don.hiatt@intel.com",
  "author_date": "Mon Mar 20 17:26:14 2017 -0700",
  "author_date_iso": "2017-03-20T17:26:14-07:00",
  "committer_name": "Doug Ledford",
  "committer_email": "dledford@redhat.com",
  "committer_date": "Wed Apr 5 14:45:09 2017 -0400",
  "committer_date_iso": "2017-04-05T14:45:09-04:00",
  "files_changed": [
    "drivers/infiniband/hw/hfi1/debugfs.c",
    "drivers/infiniband/hw/hfi1/debugfs.h",
    "drivers/infiniband/hw/hfi1/driver.c",
    "drivers/infiniband/hw/hfi1/trace_misc.h",
    "drivers/infiniband/hw/hfi1/verbs.c",
    "drivers/infiniband/hw/hfi1/verbs.h"
  ],
  "files_changed_count": 6,
  "stats": [
    {
      "file": "drivers/infiniband/hw/hfi1/debugfs.c",
      "insertions": 222,
      "deletions": 0
    },
    {
      "file": "drivers/infiniband/hw/hfi1/debugfs.h",
      "insertions": 48,
      "deletions": 3
    },
    {
      "file": "drivers/infiniband/hw/hfi1/driver.c",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "drivers/infiniband/hw/hfi1/trace_misc.h",
      "insertions": 48,
      "deletions": 0
    },
    {
      "file": "drivers/infiniband/hw/hfi1/verbs.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "drivers/infiniband/hw/hfi1/verbs.h",
      "insertions": 4,
      "deletions": 0
    }
  ],
  "total_insertions": 336,
  "total_deletions": 3,
  "total_changes": 339,
  "parents": [
    "f7b42633720deb5ca8f4bcb175c7dc2933057e7f"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.12",
    "v4.12-rc1",
    "v4.12-rc2",
    "v4.12-rc3",
    "v4.12-rc4",
    "v4.12-rc5",
    "v4.12-rc6",
    "v4.12-rc7",
    "v4.13",
    "v4.13-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/infiniband/hw/hfi1/debugfs.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/infiniband/hw/hfi1/debugfs.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/infiniband/hw/hfi1/verbs.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/infiniband/hw/hfi1/driver.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/infiniband/hw/hfi1/trace_misc.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/infiniband/hw/hfi1/verbs.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}