{
  "hash": "6c41468c7c12d74843bb414fc00307ea8a6318c3",
  "hash_short": "6c41468c",
  "subject": "KVM: x86: Clear \"has_error_code\", not \"error_code\", for RM exception injection",
  "body": "When injecting an exception into a vCPU in Real Mode, suppress the error\ncode by clearing the flag that tracks whether the error code is valid, not\nby clearing the error code itself.  The \"typo\" was introduced by recent\nfix for SVM's funky Paged Real Mode.\n\nOpportunistically hoist the logic above the tracepoint so that the trace\nis coherent with respect to what is actually injected (this was also the\nbehavior prior to the buggy commit).\n\nFixes: b97f07458373 (\"KVM: x86: determine if an exception has an error code only when injecting it.\")\nCc: stable@vger.kernel.org\nCc: Maxim Levitsky <mlevitsk@redhat.com>\nSigned-off-by: Sean Christopherson <seanjc@google.com>\nMessage-Id: <20230322143300.2209476-2-seanjc@google.com>\nSigned-off-by: Paolo Bonzini <pbonzini@redhat.com>",
  "full_message": "KVM: x86: Clear \"has_error_code\", not \"error_code\", for RM exception injection\n\nWhen injecting an exception into a vCPU in Real Mode, suppress the error\ncode by clearing the flag that tracks whether the error code is valid, not\nby clearing the error code itself.  The \"typo\" was introduced by recent\nfix for SVM's funky Paged Real Mode.\n\nOpportunistically hoist the logic above the tracepoint so that the trace\nis coherent with respect to what is actually injected (this was also the\nbehavior prior to the buggy commit).\n\nFixes: b97f07458373 (\"KVM: x86: determine if an exception has an error code only when injecting it.\")\nCc: stable@vger.kernel.org\nCc: Maxim Levitsky <mlevitsk@redhat.com>\nSigned-off-by: Sean Christopherson <seanjc@google.com>\nMessage-Id: <20230322143300.2209476-2-seanjc@google.com>\nSigned-off-by: Paolo Bonzini <pbonzini@redhat.com>",
  "author_name": "Sean Christopherson",
  "author_email": "seanjc@google.com",
  "author_date": "Wed Mar 22 07:32:59 2023 -0700",
  "author_date_iso": "2023-03-22T07:32:59-07:00",
  "committer_name": "Paolo Bonzini",
  "committer_email": "pbonzini@redhat.com",
  "committer_date": "Mon Mar 27 10:15:10 2023 -0400",
  "committer_date_iso": "2023-03-27T10:15:10-04:00",
  "files_changed": [
    "arch/x86/kvm/x86.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "arch/x86/kvm/x86.c",
      "insertions": 9,
      "deletions": 2
    }
  ],
  "total_insertions": 9,
  "total_deletions": 2,
  "total_changes": 11,
  "parents": [
    "0dc902267cb32ade1c29eed8208e566ad743518a"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/kvm/x86.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}