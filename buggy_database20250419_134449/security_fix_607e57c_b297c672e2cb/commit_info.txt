Commit Hash: 607e57c6c62c00965ae276902c166834ce73014a
Subject: hardening: Remove Clang's enable flag for -ftrivial-auto-var-init=zero


Security Keywords:
- hardening

Full commit message:
hardening: Remove Clang's enable flag for -ftrivial-auto-var-init=zero

Now that Clang's -enable-trivial-auto-var-init-zero-knowing-it-will-be-removed-from-clang
option is no longer required, remove it from the command line. Clang 16
and later will warn when it is used, which will cause Kconfig to think
it can't use -ftrivial-auto-var-init=zero at all. Check for whether it
is required and only use it when so.

Cc: Nathan Chancellor <nathan@kernel.org>
Cc: Masahiro Yamada <masahiroy@kernel.org>
Cc: Nick Desaulniers <ndesaulniers@google.com>
Cc: linux-kbuild@vger.kernel.org
Cc: llvm@lists.linux.dev
Cc: stable@vger.kernel.org
Fixes: f02003c860d9 ("hardening: Avoid harmless Clang option under CONFIG_INIT_STACK_ALL_ZERO")
Signed-off-by: Kees Cook <keescook@chromium.org>

Metadata:
Author: Kees Cook <keescook@chromium.org>
Author Date: Thu Sep 29 22:57:43 2022 -0700
Committer: Kees Cook <keescook@chromium.org>
Commit Date: Thu Sep 29 23:05:00 2022 -0700

Files Changed: 2
Lines Added: 12
Lines Removed: 6
Total Changes: 18
