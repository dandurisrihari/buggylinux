{
  "hash": "32e7b94a3fa8e137aab9f2c65dff86be73245fc8",
  "hash_short": "32e7b94a",
  "subject": "drm: simplify authentication management",
  "body": "The magic auth tokens we have are a simple map from cyclic IDs to drm_file\nobjects. Remove all the old bulk of code and replace it with a simple,\ndirect IDR.\n\nThe previous behavior is kept. Especially calling authmagic multiple times\non the same magic results in EINVAL except on the first call. The only\ndifference in behavior is that we never allocate IDs multiple times as\nlong as a client has its FD open.\n\nv2:\n - Fix return code of GetMagic()\n - Use non-cyclic IDR allocator\n - fix off-by-one in \"magic > INT_MAX\" sanity check\n\nv3:\n - drop redundant \"magic > INT_MAX\" check\n\nSigned-off-by: David Herrmann <dh.herrmann@gmail.com>\nReviewed-by: Chris Wilson <chris@chris-wilson.co.uk>\nSigned-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>",
  "full_message": "drm: simplify authentication management\n\nThe magic auth tokens we have are a simple map from cyclic IDs to drm_file\nobjects. Remove all the old bulk of code and replace it with a simple,\ndirect IDR.\n\nThe previous behavior is kept. Especially calling authmagic multiple times\non the same magic results in EINVAL except on the first call. The only\ndifference in behavior is that we never allocate IDs multiple times as\nlong as a client has its FD open.\n\nv2:\n - Fix return code of GetMagic()\n - Use non-cyclic IDR allocator\n - fix off-by-one in \"magic > INT_MAX\" sanity check\n\nv3:\n - drop redundant \"magic > INT_MAX\" check\n\nSigned-off-by: David Herrmann <dh.herrmann@gmail.com>\nReviewed-by: Chris Wilson <chris@chris-wilson.co.uk>\nSigned-off-by: Daniel Vetter <daniel.vetter@ffwll.ch>",
  "author_name": "David Herrmann",
  "author_email": "dh.herrmann@gmail.com",
  "author_date": "Mon May 4 21:01:30 2015 +0200",
  "author_date_iso": "2015-05-04T21:01:30+02:00",
  "committer_name": "Daniel Vetter",
  "committer_email": "daniel.vetter@ffwll.ch",
  "committer_date": "Tue May 5 09:45:57 2015 +0200",
  "committer_date_iso": "2015-05-05T09:45:57+02:00",
  "files_changed": [
    "drivers/gpu/drm/drm_auth.c",
    "drivers/gpu/drm/drm_drv.c",
    "drivers/gpu/drm/drm_fops.c",
    "drivers/gpu/drm/drm_internal.h",
    "include/drm/drmP.h"
  ],
  "files_changed_count": 5,
  "stats": [
    {
      "file": "drivers/gpu/drm/drm_auth.c",
      "insertions": 35,
      "deletions": 140
    },
    {
      "file": "drivers/gpu/drm/drm_drv.c",
      "insertions": 3,
      "deletions": 9
    },
    {
      "file": "drivers/gpu/drm/drm_fops.c",
      "insertions": 2,
      "deletions": 5
    },
    {
      "file": "drivers/gpu/drm/drm_internal.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "include/drm/drmP.h",
      "insertions": 2,
      "deletions": 2
    }
  ],
  "total_insertions": 42,
  "total_deletions": 157,
  "total_changes": 199,
  "parents": [
    "acab18b5c3a7025640abc84ace5e94c76ebd3d10"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpu/drm/drm_auth.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/drm_drv.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/drm_fops.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/drm_internal.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/drm/drmP.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}