{
  "hash": "6e4a53ee7989c8a2b9fc3b14cd90f6e2d613ca76",
  "hash_short": "6e4a53ee",
  "subject": "ocfs2: replace zero-length arrays with DECLARE_FLEX_ARRAY() helper",
  "body": "Zero-length arrays are deprecated and we are moving towards adopting C99\nflexible-array members, instead.  So, replace zero-length array\ndeclarations in a couple of structures and unions with the new\nDECLARE_FLEX_ARRAY() helper macro.\n\nThis helper allows for a flexible-array member in a union and as only\nmember in a structure.\n\nAlso, this addresses multiple warnings reported when building with\nClang-15 and -Wzero-length-array.\n\nLastly, this will also help memcpy (in a coming hardening update) execute\nproper bounds-checking on variable length object i_symlink at\nfs/ocfs2/namei.c:1973:\n\nfs/ocfs2/namei.c:\n1973                 memcpy((char *) fe->id2.i_symlink, symname, l);\n\nLink: https://github.com/KSPP/linux/issues/21\nLink: https://github.com/KSPP/linux/issues/193\nLink: https://github.com/KSPP/linux/issues/197\nLink: https://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html\nLink: https://lkml.kernel.org/r/YxKY6O2hmdwNh8r8@work\nSigned-off-by: Gustavo A. R. Silva <gustavoars@kernel.org>\nReviewed-by: Kees Cook <keescook@chromium.org>\nReviewed-by: Joseph Qi <joseph.qi@linux.alibaba.com>\nCc: Mark Fasheh <mark@fasheh.com>\nCc: Joel Becker <jlbec@evilplan.org>\nCc: Junxiao Bi <junxiao.bi@oracle.com>\nCc: Changwei Ge <gechangwei@live.cn>\nCc: Gang He <ghe@suse.com>\nCc: Jun Piao <piaojun@huawei.com>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>",
  "full_message": "ocfs2: replace zero-length arrays with DECLARE_FLEX_ARRAY() helper\n\nZero-length arrays are deprecated and we are moving towards adopting C99\nflexible-array members, instead.  So, replace zero-length array\ndeclarations in a couple of structures and unions with the new\nDECLARE_FLEX_ARRAY() helper macro.\n\nThis helper allows for a flexible-array member in a union and as only\nmember in a structure.\n\nAlso, this addresses multiple warnings reported when building with\nClang-15 and -Wzero-length-array.\n\nLastly, this will also help memcpy (in a coming hardening update) execute\nproper bounds-checking on variable length object i_symlink at\nfs/ocfs2/namei.c:1973:\n\nfs/ocfs2/namei.c:\n1973                 memcpy((char *) fe->id2.i_symlink, symname, l);\n\nLink: https://github.com/KSPP/linux/issues/21\nLink: https://github.com/KSPP/linux/issues/193\nLink: https://github.com/KSPP/linux/issues/197\nLink: https://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html\nLink: https://lkml.kernel.org/r/YxKY6O2hmdwNh8r8@work\nSigned-off-by: Gustavo A. R. Silva <gustavoars@kernel.org>\nReviewed-by: Kees Cook <keescook@chromium.org>\nReviewed-by: Joseph Qi <joseph.qi@linux.alibaba.com>\nCc: Mark Fasheh <mark@fasheh.com>\nCc: Joel Becker <jlbec@evilplan.org>\nCc: Junxiao Bi <junxiao.bi@oracle.com>\nCc: Changwei Ge <gechangwei@live.cn>\nCc: Gang He <ghe@suse.com>\nCc: Jun Piao <piaojun@huawei.com>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>",
  "author_name": "Gustavo A. R. Silva",
  "author_email": "ocfs2-devel@oss.oracle.com",
  "author_date": "Sat Sep 3 00:59:36 2022 +0100",
  "author_date_iso": "2022-09-03T00:59:36+01:00",
  "committer_name": "Andrew Morton",
  "committer_email": "akpm@linux-foundation.org",
  "committer_date": "Mon Oct 3 14:21:42 2022 -0700",
  "committer_date_iso": "2022-10-03T14:21:42-07:00",
  "files_changed": [
    "fs/ocfs2/ocfs2_fs.h"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "fs/ocfs2/ocfs2_fs.h",
      "insertions": 4,
      "deletions": 4
    }
  ],
  "total_insertions": 4,
  "total_deletions": 4,
  "total_changes": 8,
  "parents": [
    "b814751175470b00969a317bf3192260750f9455"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "fs/ocfs2/ocfs2_fs.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}