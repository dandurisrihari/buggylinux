Files changed: 8
Insertions: 7835
Deletions: 3073
Total changes: 10908

File-specific changes:
CREDITS: +4 -0
Documentation/devicetree/bindings/display/panel/himax,hx83102.yaml: +6 -0
Documentation/devicetree/bindings/display/renesas,du.yaml: +31 -5
Documentation/devicetree/bindings/display/rockchip/rockchip,rk3588-dw-hdmi-qp.yaml: +2 -1
Documentation/devicetree/bindings/display/rockchip/rockchip-vop2.yaml: +4 -0
Documentation/devicetree/bindings/vendor-prefixes.yaml: +2 -0
Documentation/gpu/drivers.rst: +1 -0
Documentation/gpu/drm-usage-stats.rst: +4 -1
Documentation/gpu/nouveau.rst: +29 -0
Documentation/gpu/panthor.rst: +10 -0
MAINTAINERS: +12 -16
arch/arm/configs/multi_v7_defconfig: +2 -2
arch/parisc/configs/generic-32bit_defconfig: +2 -2
arch/parisc/configs/generic-64bit_defconfig: +2 -2
drivers/accel/amdxdna/aie2_ctx.c: +12 -12
drivers/accel/amdxdna/aie2_error.c: +3 -5
drivers/accel/amdxdna/aie2_message.c: +5 -5
drivers/accel/amdxdna/aie2_pci.h: +5 -5
drivers/accel/amdxdna/aie2_smu.c: +2 -0
drivers/accel/amdxdna/amdxdna_mailbox.c: +3 -3
drivers/accel/amdxdna/amdxdna_mailbox.h: +1 -1
drivers/accel/amdxdna/amdxdna_mailbox_helper.c: +3 -3
drivers/accel/amdxdna/amdxdna_mailbox_helper.h: +1 -1
drivers/accel/ivpu/ivpu_debugfs.c: +89 -0
drivers/accel/ivpu/ivpu_drv.c: +26 -64
drivers/accel/ivpu/ivpu_drv.h: +13 -1
drivers/accel/ivpu/ivpu_fw.c: +8 -1
drivers/accel/ivpu/ivpu_gem.c: +43 -0
drivers/accel/ivpu/ivpu_gem.h: +1 -0
drivers/accel/ivpu/ivpu_hw.c: +73 -37
drivers/accel/ivpu/ivpu_hw.h: +5 -9
drivers/accel/ivpu/ivpu_hw_btrs.c: +8 -2
drivers/accel/ivpu/ivpu_hw_btrs.h: +1 -0
drivers/accel/ivpu/ivpu_hw_btrs_lnl_reg.h: +1 -0
drivers/accel/ivpu/ivpu_hw_ip.c: +2 -2
drivers/accel/ivpu/ivpu_hw_reg_io.h: +37 -27
drivers/accel/ivpu/ivpu_ipc.c: +3 -4
drivers/accel/ivpu/ivpu_ipc.h: +1 -1
drivers/accel/ivpu/ivpu_job.c: +379 -143
drivers/accel/ivpu/ivpu_job.h: +7 -1
drivers/accel/ivpu/ivpu_jsm_msg.c: +11 -18
drivers/accel/ivpu/ivpu_mmu.c: +100 -21
drivers/accel/ivpu/ivpu_mmu.h: +2 -0
drivers/accel/ivpu/ivpu_mmu_context.c: +0 -13
drivers/accel/ivpu/ivpu_mmu_context.h: +0 -2
drivers/accel/ivpu/ivpu_pm.c: +3 -7
drivers/accel/ivpu/ivpu_pm.h: +1 -1
drivers/accel/ivpu/ivpu_sysfs.c: +32 -3
drivers/accel/qaic/mhi_controller.c: +346 -14
drivers/accel/qaic/mhi_controller.h: +1 -1
drivers/accel/qaic/qaic.h: +10 -4
drivers/accel/qaic/qaic_drv.c: +67 -30
drivers/accel/qaic/qaic_timesync.c: +1 -1
drivers/accel/qaic/sahara.c: +39 -4
drivers/bus/mhi/host/boot.c: +150 -53
drivers/bus/mhi/host/init.c: +1 -1
drivers/bus/mhi/host/internal.h: +7 -0
drivers/dma-buf/dma-fence-unwrap.c: +10 -1
drivers/dma-buf/st-dma-fence-unwrap.c: +264 -4
drivers/gpu/drm/Makefile: +0 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_connectors.c: +4 -4
drivers/gpu/drm/amd/amdgpu/atombios_dp.c: +1 -1
drivers/gpu/drm/amd/amdgpu/atombios_dp.h: +1 -1
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c: +9 -3
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.h: +1 -1
drivers/gpu/drm/arm/display/komeda/komeda_wb_connector.c: +1 -1
drivers/gpu/drm/arm/malidp_mw.c: +1 -1
drivers/gpu/drm/ast/Makefile: +1 -0
drivers/gpu/drm/ast/ast_dp.c: +182 -83
drivers/gpu/drm/ast/ast_drv.c: +6 -2
drivers/gpu/drm/ast/ast_drv.h: +8 -24
drivers/gpu/drm/ast/ast_main.c: +143 -72
drivers/gpu/drm/ast/ast_mode.c: +86 -229
drivers/gpu/drm/ast/ast_post.c: +37 -14
drivers/gpu/drm/ast/ast_reg.h: +12 -19
drivers/gpu/drm/ast/ast_tables.h: +2 -185
drivers/gpu/drm/ast/ast_vbios.c: +241 -0
drivers/gpu/drm/ast/ast_vbios.h: +108 -0
drivers/gpu/drm/bridge/adv7511/adv7511_audio.c: +5 -0
drivers/gpu/drm/bridge/adv7511/adv7511_drv.c: +11 -5
drivers/gpu/drm/bridge/cadence/cdns-mhdp8546-core.c: +1 -1
drivers/gpu/drm/bridge/ite-it6505.c: +4 -3
drivers/gpu/drm/bridge/megachips-stdpxxxx-ge-b850v3-fw.c: +0 -7
drivers/gpu/drm/bridge/microchip-lvds.c: +1 -2
drivers/gpu/drm/bridge/nxp-ptn3460.c: +0 -1
drivers/gpu/drm/bridge/parade-ps8622.c: +0 -1
drivers/gpu/drm/bridge/parade-ps8640.c: +0 -1
drivers/gpu/drm/bridge/synopsys/dw-hdmi.c: +2 -2
drivers/gpu/drm/bridge/tc358762.c: +1 -1
drivers/gpu/drm/bridge/tc358775.c: +0 -1
drivers/gpu/drm/bridge/ti-sn65dsi83.c: +0 -1
drivers/gpu/drm/bridge/ti-sn65dsi86.c: +2 -1
drivers/gpu/drm/ci/build.sh: +1 -1
drivers/gpu/drm/ci/build.yml: +102 -2
drivers/gpu/drm/ci/container.yml: +11 -11
drivers/gpu/drm/ci/gitlab-ci.yml: +105 -92
drivers/gpu/drm/ci/igt_runner.sh: +5 -8
drivers/gpu/drm/ci/image-tags.yml: +9 -2
drivers/gpu/drm/ci/lava-submit.sh: +72 -28
drivers/gpu/drm/ci/test.yml: +19 -18
drivers/gpu/drm/ci/xfails/amdgpu-stoney-fails.txt: +7 -1
drivers/gpu/drm/ci/xfails/amdgpu-stoney-flakes.txt: +14 -7
drivers/gpu/drm/ci/xfails/amdgpu-stoney-skips.txt: +5 -0
drivers/gpu/drm/ci/xfails/i915-amly-fails.txt: +5 -15
drivers/gpu/drm/ci/xfails/i915-amly-flakes.txt: +14 -0
drivers/gpu/drm/ci/xfails/i915-amly-skips.txt: +1 -0
drivers/gpu/drm/ci/xfails/i915-apl-fails.txt: +3 -5
drivers/gpu/drm/ci/xfails/i915-cml-fails.txt: +12 -10
drivers/gpu/drm/ci/xfails/i915-cml-flakes.txt: +7 -0
drivers/gpu/drm/ci/xfails/i915-cml-skips.txt: +1 -0
drivers/gpu/drm/ci/xfails/i915-glk-fails.txt: +2 -29
drivers/gpu/drm/ci/xfails/i915-glk-flakes.txt: +7 -0
drivers/gpu/drm/ci/xfails/i915-glk-skips.txt: +298 -0
drivers/gpu/drm/ci/xfails/i915-jsl-fails.txt: +8 -10
drivers/gpu/drm/ci/xfails/i915-jsl-flakes.txt: +4 -11
drivers/gpu/drm/ci/xfails/i915-kbl-skips.txt: +112 -0
drivers/gpu/drm/ci/xfails/i915-tgl-fails.txt: +7 -48
drivers/gpu/drm/ci/xfails/i915-tgl-skips.txt: +13 -0
drivers/gpu/drm/ci/xfails/i915-whl-fails.txt: +3 -12
drivers/gpu/drm/ci/xfails/i915-whl-flakes.txt: +7 -0
drivers/gpu/drm/ci/xfails/mediatek-mt8173-fails.txt: +2 -5
drivers/gpu/drm/ci/xfails/mediatek-mt8173-flakes.txt: +7 -0
drivers/gpu/drm/ci/xfails/mediatek-mt8173-skips.txt: +5 -0
drivers/gpu/drm/ci/xfails/mediatek-mt8183-fails.txt: +4 -8
drivers/gpu/drm/ci/xfails/mediatek-mt8183-skips.txt: +5 -0
drivers/gpu/drm/ci/xfails/msm-apq8016-fails.txt: +3 -0
drivers/gpu/drm/ci/xfails/msm-sc7180-trogdor-kingoftown-fails.txt: +0 -1
drivers/gpu/drm/ci/xfails/msm-sc7180-trogdor-kingoftown-flakes.txt: +14 -0
drivers/gpu/drm/ci/xfails/msm-sc7180-trogdor-kingoftown-skips.txt: +5 -0
drivers/gpu/drm/ci/xfails/msm-sc7180-trogdor-lazor-limozeen-fails.txt: +0 -1
drivers/gpu/drm/ci/xfails/msm-sc7180-trogdor-lazor-limozeen-skips.txt: +5 -0
drivers/gpu/drm/ci/xfails/msm-sdm845-fails.txt: +0 -2
drivers/gpu/drm/ci/xfails/msm-sdm845-skips.txt: +5 -0
drivers/gpu/drm/ci/xfails/msm-sm8350-hdk-fails.txt: +0 -5
drivers/gpu/drm/ci/xfails/rockchip-rk3288-fails.txt: +6 -20
drivers/gpu/drm/ci/xfails/rockchip-rk3399-fails.txt: +5 -8
drivers/gpu/drm/ci/xfails/rockchip-rk3399-flakes.txt: +56 -0
drivers/gpu/drm/ci/xfails/rockchip-rk3399-skips.txt: +5 -0
drivers/gpu/drm/ci/xfails/virtio_gpu-none-skips.txt: +5 -0
drivers/gpu/drm/ci/xfails/vkms-none-fails.txt: +2 -8
drivers/gpu/drm/ci/xfails/vkms-none-skips.txt: +539 -4
drivers/gpu/drm/display/drm_bridge_connector.c: +1 -1
drivers/gpu/drm/display/drm_dp_helper.c: +58 -0
drivers/gpu/drm/display/drm_dp_mst_topology.c: +21 -10
drivers/gpu/drm/display/drm_hdmi_state_helper.c: +1 -1
drivers/gpu/drm/drm_atomic_helper.c: +41 -3
drivers/gpu/drm/drm_buddy.c: +8 -3
drivers/gpu/drm/drm_crtc.c: +20 -0
drivers/gpu/drm/drm_crtc_helper_internal.h: +1 -1
drivers/gpu/drm/drm_file.c: +18 -8
drivers/gpu/drm/drm_managed.c: +8 -0
drivers/gpu/drm/drm_panic.c: +1 -1
drivers/gpu/drm/drm_panic_qr.rs: +35 -73
drivers/gpu/drm/drm_probe_helper.c: +18 -17
drivers/gpu/drm/drm_writeback.c: +157 -27
drivers/gpu/drm/exynos/exynos_hdmi.c: +1 -1
drivers/gpu/drm/fsl-dcu/fsl_dcu_drm_rgb.c: +1 -1
drivers/gpu/drm/gma500/cdv_intel_crt.c: +1 -1
drivers/gpu/drm/gma500/cdv_intel_dp.c: +1 -1
drivers/gpu/drm/gma500/cdv_intel_hdmi.c: +1 -1
drivers/gpu/drm/gma500/cdv_intel_lvds.c: +1 -1
drivers/gpu/drm/gma500/oaktrail_hdmi.c: +1 -1
drivers/gpu/drm/gma500/psb_intel_drv.h: +1 -1
drivers/gpu/drm/gma500/psb_intel_lvds.c: +1 -1
drivers/gpu/drm/gma500/psb_intel_sdvo.c: +1 -1
drivers/gpu/drm/i2c/Kconfig: +0 -18
drivers/gpu/drm/i2c/Makefile: +0 -6
drivers/gpu/drm/i915/display/dvo_ch7017.c: +1 -1
drivers/gpu/drm/i915/display/dvo_ch7xxx.c: +1 -1
drivers/gpu/drm/i915/display/dvo_ivch.c: +1 -1
drivers/gpu/drm/i915/display/dvo_ns2501.c: +1 -1
drivers/gpu/drm/i915/display/dvo_sil164.c: +1 -1
drivers/gpu/drm/i915/display/dvo_tfp410.c: +1 -1
drivers/gpu/drm/i915/display/icl_dsi.c: +1 -1
drivers/gpu/drm/i915/display/intel_crt.c: +1 -1
drivers/gpu/drm/i915/display/intel_ddi.c: +4 -0
drivers/gpu/drm/i915/display/intel_dp.c: +1 -1
drivers/gpu/drm/i915/display/intel_dp_link_training.c: +1 -1
drivers/gpu/drm/i915/display/intel_dp_link_training.h: +1 -0
drivers/gpu/drm/i915/display/intel_dp_mst.c: +1 -1
drivers/gpu/drm/i915/display/intel_dsi.c: +1 -1
drivers/gpu/drm/i915/display/intel_dsi.h: +1 -1
drivers/gpu/drm/i915/display/intel_dvo.c: +1 -1
drivers/gpu/drm/i915/display/intel_dvo_dev.h: +1 -1
drivers/gpu/drm/i915/display/intel_hdmi.c: +1 -1
drivers/gpu/drm/i915/display/intel_lvds.c: +1 -1
drivers/gpu/drm/i915/display/intel_sdvo.c: +1 -1
drivers/gpu/drm/i915/display/intel_tv.c: +1 -1
drivers/gpu/drm/i915/display/vlv_dsi.c: +1 -1
drivers/gpu/drm/imagination/pvr_job.c: +3 -9
drivers/gpu/drm/imx/ipuv3/imx-tve.c: +1 -1
drivers/gpu/drm/mgag200/Makefile: +1 -0
drivers/gpu/drm/mgag200/mgag200_drv.c: +4 -0
drivers/gpu/drm/mgag200/mgag200_drv.h: +3 -0
drivers/gpu/drm/mgag200/mgag200_g200eh5.c: +204 -0
drivers/gpu/drm/msm/disp/mdp4/mdp4_lvds_connector.c: +1 -1
drivers/gpu/drm/nouveau/Kconfig: +18 -0
drivers/gpu/drm/nouveau/dispnv04/Kbuild: +3 -0
drivers/gpu/drm/nouveau/dispnv04/dfp.c: +9 -8
drivers/gpu/drm/nouveau/dispnv04/i2c/Kbuild: +5 -0
drivers/gpu/drm/{ => nouveau/dispnv04}/i2c/ch7006_drv.c: +16 -16
drivers/gpu/drm/{ => nouveau/dispnv04}/i2c/ch7006_mode.c: +4 -4
drivers/gpu/drm/{ => nouveau/dispnv04}/i2c/ch7006_priv.h: +6 -5
drivers/gpu/drm/{ => nouveau/dispnv04}/i2c/sil164_drv.c: +18 -17
drivers/gpu/drm/{drm_encoder_slave.c => nouveau/dispnv04/nouveau_i2c_encoder.c}: +29 -66
drivers/gpu/drm/nouveau/dispnv04/tvnv04.c: +12 -12
drivers/gpu/drm/nouveau/dispnv04/tvnv17.c: +3 -3
drivers/gpu/drm/nouveau/dispnv50/disp.c: +1 -1
{include/drm => drivers/gpu/drm/nouveau/include/dispnv04}/i2c/ch7006.h: +2 -2
include/drm/drm_encoder_slave.h => drivers/gpu/drm/nouveau/include/dispnv04/i2c/encoder_i2c.h: +51 -72
{include/drm => drivers/gpu/drm/nouveau/include/dispnv04}/i2c/sil164.h: +2 -2
drivers/gpu/drm/nouveau/include/nvkm/subdev/gsp.h: +4 -4
drivers/gpu/drm/nouveau/nouveau_connector.c: +7 -5
drivers/gpu/drm/nouveau/nouveau_drm.c: +1 -1
drivers/gpu/drm/nouveau/nouveau_encoder.h: +4 -9
drivers/gpu/drm/nouveau/nvkm/subdev/gsp/r535.c: +385 -153
drivers/gpu/drm/omapdrm/dss/dss.c: +4 -10
drivers/gpu/drm/omapdrm/dss/hdmi5_core.c: +0 -17
drivers/gpu/drm/omapdrm/dss/hdmi5_core.h: +0 -1
drivers/gpu/drm/panel/panel-ebbg-ft8719.c: +16 -51
drivers/gpu/drm/panel/panel-edp.c: +23 -0
drivers/gpu/drm/panel/panel-himax-hx83102.c: +380 -0
drivers/gpu/drm/panel/panel-samsung-s6e88a0-ams452ef01.c: +31 -60
drivers/gpu/drm/panel/panel-sharp-ls060t1sx01.c: +16 -43
drivers/gpu/drm/panel/panel-xinpeng-xpp055c272.c: +80 -98
drivers/gpu/drm/panthor/panthor_device.c: +12 -10
drivers/gpu/drm/panthor/panthor_drv.c: +14 -0
drivers/gpu/drm/panthor/panthor_fw.c: +0 -1
drivers/gpu/drm/panthor/panthor_gem.h: +0 -5
drivers/gpu/drm/panthor/panthor_heap.c: +26 -0
drivers/gpu/drm/panthor/panthor_heap.h: +2 -0
drivers/gpu/drm/panthor/panthor_mmu.c: +70 -34
drivers/gpu/drm/panthor/panthor_mmu.h: +3 -0
drivers/gpu/drm/panthor/panthor_sched.c: +57 -4
drivers/gpu/drm/panthor/panthor_sched.h: +3 -0
drivers/gpu/drm/qxl/qxl_display.c: +1 -1
drivers/gpu/drm/radeon/atombios_dp.c: +1 -1
drivers/gpu/drm/radeon/radeon_connectors.c: +5 -5
drivers/gpu/drm/radeon/radeon_mode.h: +1 -1
drivers/gpu/drm/rockchip/cdn-dp-core.c: +1 -1
drivers/gpu/drm/rockchip/dw_hdmi_qp-rockchip.c: +191 -43
drivers/gpu/drm/rockchip/inno_hdmi.c: +2 -2
drivers/gpu/drm/rockchip/rk3066_hdmi.c: +1 -1
drivers/gpu/drm/rockchip/rockchip_drm_vop2.c: +35 -1
drivers/gpu/drm/scheduler/sched_main.c: +23 -19
drivers/gpu/drm/solomon/ssd130x-spi.c: +3 -4
drivers/gpu/drm/solomon/ssd130x.c: +4 -2
drivers/gpu/drm/sti/sti_dvo.c: +1 -1
drivers/gpu/drm/sti/sti_hda.c: +6 -6
drivers/gpu/drm/sti/sti_hdmi.c: +1 -1
drivers/gpu/drm/tegra/dsi.c: +1 -1
drivers/gpu/drm/tegra/hdmi.c: +1 -1
drivers/gpu/drm/tegra/sor.c: +1 -1
drivers/gpu/drm/tests/Makefile: +1 -0
drivers/gpu/drm/tests/drm_atomic_state_test.c: +375 -0
drivers/gpu/drm/tests/drm_buddy_test.c: +20 -10
drivers/gpu/drm/tidss/tidss_dispc_regs.h: +1 -1
drivers/gpu/drm/tidss/tidss_plane.c: +1 -1
drivers/gpu/drm/ttm/ttm_bo.c: +2 -1
drivers/gpu/drm/ttm/ttm_bo_util.c: +2 -1
drivers/gpu/drm/ttm/ttm_pool.c: +108 -75
drivers/gpu/drm/ttm/ttm_resource.c: +34 -16
drivers/gpu/drm/v3d/v3d_drv.h: +0 -1
drivers/gpu/drm/v3d/v3d_sched.c: +0 -2
drivers/gpu/drm/vc4/Kconfig: +1 -0
drivers/gpu/drm/vc4/vc4_crtc.c: +15 -18
drivers/gpu/drm/vc4/vc4_drv.h: +0 -27
drivers/gpu/drm/vc4/vc4_gem.c: +37 -146
drivers/gpu/drm/vc4/vc4_txp.c: +1 -1
drivers/gpu/drm/vc4/vc4_validate.c: +0 -11
drivers/gpu/drm/virtio/virtgpu_display.c: +1 -1
drivers/gpu/drm/virtio/virtgpu_drv.c: +40 -1
drivers/gpu/drm/virtio/virtgpu_drv.h: +11 -0
drivers/gpu/drm/virtio/virtgpu_gem.c: +14 -0
drivers/gpu/drm/virtio/virtgpu_plane.c: +96 -0
drivers/gpu/drm/virtio/virtgpu_prime.c: +19 -17
drivers/gpu/drm/virtio/virtgpu_vq.c: +154 -0
drivers/gpu/drm/virtio/virtgpu_vram.c: +6 -3
drivers/gpu/drm/vkms/vkms_crtc.c: +20 -15
drivers/gpu/drm/vkms/vkms_drv.c: +0 -9
drivers/gpu/drm/vkms/vkms_drv.h: +5 -6
drivers/gpu/drm/vkms/vkms_formats.c: +32 -0
drivers/gpu/drm/vkms/vkms_output.c: +32 -29
drivers/gpu/drm/vkms/vkms_plane.c: +1 -0
drivers/gpu/drm/vkms/vkms_writeback.c: +22 -15
drivers/gpu/drm/vmwgfx/vmwgfx_kms.c: +1 -1
drivers/gpu/drm/vmwgfx/vmwgfx_kms.h: +1 -1
drivers/gpu/drm/vmwgfx/vmwgfx_stdu.c: +1 -1
drivers/gpu/drm/xlnx/zynqmp_dp_audio.c: +4 -0
drivers/gpu/drm/xlnx/zynqmp_dpsub.c: +2 -0
include/drm/display/drm_dp.h: +14 -0
include/drm/display/drm_dp_helper.h: +1 -0
include/drm/display/drm_dp_mst_helper.h: +7 -0
include/drm/display/drm_hdmi_state_helper.h: +1 -1
include/drm/drm_atomic.h: +21 -2
include/drm/drm_crtc.h: +1 -1
include/drm/drm_file.h: +5 -0
include/drm/drm_managed.h: +12 -0
include/drm/drm_mode_object.h: +1 -1
include/drm/drm_modeset_helper_vtables.h: +2 -2
include/drm/drm_panel.h: +0 -1
include/drm/drm_writeback.h: +6 -0
include/drm/gpu_scheduler.h: +2 -18
include/drm/ttm/ttm_resource.h: +6 -5
include/sound/hdmi-codec.h: +1 -0
include/uapi/drm/drm_fourcc.h: +41 -0
include/uapi/drm/ivpu_accel.h: +84 -0
include/uapi/drm/panthor_drm.h: +44 -42
sound/soc/codecs/hdmi-codec.c: +4 -0
