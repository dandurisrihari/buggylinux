{
  "hash": "0ef0fd351550130129bbdb77362488befd7b69d2",
  "hash_short": "0ef0fd35",
  "subject": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm",
  "body": "Pull KVM updates from Paolo Bonzini:\n \"ARM:\n   - support for SVE and Pointer Authentication in guests\n   - PMU improvements\n\n  POWER:\n   - support for direct access to the POWER9 XIVE interrupt controller\n   - memory and performance optimizations\n\n  x86:\n   - support for accessing memory not backed by struct page\n   - fixes and refactoring\n\n  Generic:\n   - dirty page tracking improvements\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (155 commits)\n  kvm: fix compilation on aarch64\n  Revert \"KVM: nVMX: Expose RDPMC-exiting only when guest supports PMU\"\n  kvm: x86: Fix L1TF mitigation for shadow MMU\n  KVM: nVMX: Disable intercept for FS/GS base MSRs in vmcs02 when possible\n  KVM: PPC: Book3S: Remove useless checks in 'release' method of KVM device\n  KVM: PPC: Book3S HV: XIVE: Fix spelling mistake \"acessing\" -> \"accessing\"\n  KVM: PPC: Book3S HV: Make sure to load LPID for radix VCPUs\n  kvm: nVMX: Set nested_run_pending in vmx_set_nested_state after checks complete\n  tests: kvm: Add tests for KVM_SET_NESTED_STATE\n  KVM: nVMX: KVM_SET_NESTED_STATE - Tear down old EVMCS state before setting new state\n  tests: kvm: Add tests for KVM_CAP_MAX_VCPUS and KVM_CAP_MAX_CPU_ID\n  tests: kvm: Add tests to .gitignore\n  KVM: Introduce KVM_CAP_MANUAL_DIRTY_LOG_PROTECT2\n  KVM: Fix kvm_clear_dirty_log_protect off-by-(minus-)one\n  KVM: Fix the bitmap range to copy during clear dirty\n  KVM: arm64: Fix ptrauth ID register masking logic\n  KVM: x86: use direct accessors for RIP and RSP\n  KVM: VMX: Use accessors for GPRs outside of dedicated caching logic\n  KVM: x86: Omit caching logic for always-available GPRs\n  kvm, x86: Properly check whether a pfn is an MMIO or not\n  ...",
  "full_message": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm\n\nPull KVM updates from Paolo Bonzini:\n \"ARM:\n   - support for SVE and Pointer Authentication in guests\n   - PMU improvements\n\n  POWER:\n   - support for direct access to the POWER9 XIVE interrupt controller\n   - memory and performance optimizations\n\n  x86:\n   - support for accessing memory not backed by struct page\n   - fixes and refactoring\n\n  Generic:\n   - dirty page tracking improvements\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (155 commits)\n  kvm: fix compilation on aarch64\n  Revert \"KVM: nVMX: Expose RDPMC-exiting only when guest supports PMU\"\n  kvm: x86: Fix L1TF mitigation for shadow MMU\n  KVM: nVMX: Disable intercept for FS/GS base MSRs in vmcs02 when possible\n  KVM: PPC: Book3S: Remove useless checks in 'release' method of KVM device\n  KVM: PPC: Book3S HV: XIVE: Fix spelling mistake \"acessing\" -> \"accessing\"\n  KVM: PPC: Book3S HV: Make sure to load LPID for radix VCPUs\n  kvm: nVMX: Set nested_run_pending in vmx_set_nested_state after checks complete\n  tests: kvm: Add tests for KVM_SET_NESTED_STATE\n  KVM: nVMX: KVM_SET_NESTED_STATE - Tear down old EVMCS state before setting new state\n  tests: kvm: Add tests for KVM_CAP_MAX_VCPUS and KVM_CAP_MAX_CPU_ID\n  tests: kvm: Add tests to .gitignore\n  KVM: Introduce KVM_CAP_MANUAL_DIRTY_LOG_PROTECT2\n  KVM: Fix kvm_clear_dirty_log_protect off-by-(minus-)one\n  KVM: Fix the bitmap range to copy during clear dirty\n  KVM: arm64: Fix ptrauth ID register masking logic\n  KVM: x86: use direct accessors for RIP and RSP\n  KVM: VMX: Use accessors for GPRs outside of dedicated caching logic\n  KVM: x86: Omit caching logic for always-available GPRs\n  kvm, x86: Properly check whether a pfn is an MMIO or not\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Fri May 17 10:33:30 2019 -0700",
  "author_date_iso": "2019-05-17T10:33:30-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Fri May 17 10:33:30 2019 -0700",
  "committer_date_iso": "2019-05-17T10:33:30-07:00",
  "files_changed": [
    "Documentation/virtual/kvm/api.txt",
    "arch/arm64/Kconfig",
    "arch/arm64/include/asm/kvm_hyp.h",
    "arch/arm64/include/asm/sysreg.h",
    "arch/arm64/kernel/asm-offsets.c",
    "arch/arm64/kernel/cpufeature.c",
    "arch/arm64/kernel/fpsimd.c",
    "arch/arm64/kernel/perf_event.c",
    "arch/powerpc/kvm/book3s_hv_rmhandlers.S",
    "arch/s390/include/asm/cpacf.h",
    "arch/s390/kvm/Kconfig",
    "arch/s390/kvm/interrupt.c",
    "arch/x86/events/intel/core.c",
    "arch/x86/include/asm/kvm_host.h",
    "arch/x86/include/asm/msr-index.h",
    "arch/x86/kvm/cpuid.c",
    "arch/x86/kvm/hyperv.c",
    "arch/x86/kvm/lapic.c",
    "arch/x86/kvm/mmu.c",
    "arch/x86/kvm/paging_tmpl.h",
    "arch/x86/kvm/svm.c",
    "arch/x86/kvm/vmx/nested.c",
    "arch/x86/kvm/vmx/vmx.c",
    "arch/x86/kvm/x86.c",
    "arch/x86/kvm/x86.h",
    "include/linux/perf_event.h",
    "tools/testing/selftests/kvm/dirty_log_test.c",
    "virt/kvm/arm/arm.c",
    "virt/kvm/kvm_main.c"
  ],
  "files_changed_count": 29,
  "stats": [
    {
      "file": "Documentation/arm64/perf.txt",
      "insertions": 85,
      "deletions": 0
    },
    {
      "file": "Documentation/arm64/pointer-authentication.txt",
      "insertions": 18,
      "deletions": 4
    },
    {
      "file": "Documentation/virtual/kvm/api.txt",
      "insertions": 200,
      "deletions": 25
    },
    {
      "file": "Documentation/virtual/kvm/devices/vm.txt",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "Documentation/virtual/kvm/devices/xive.txt",
      "insertions": 197,
      "deletions": 0
    },
    {
      "file": "arch/arm/include/asm/kvm_emulate.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/arm/include/asm/kvm_host.h",
      "insertions": 23,
      "deletions": 3
    },
    {
      "file": "arch/arm64/Kconfig",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "arch/arm64/include/asm/fpsimd.h",
      "insertions": 28,
      "deletions": 1
    },
    {
      "file": "arch/arm64/include/asm/kvm_asm.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "arch/arm64/include/asm/kvm_emulate.h",
      "insertions": 16,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "insertions": 93,
      "deletions": 8
    },
    {
      "file": "arch/arm64/include/asm/kvm_hyp.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/arm64/include/asm/kvm_ptrauth.h",
      "insertions": 111,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/sysreg.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/uapi/asm/kvm.h",
      "insertions": 43,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kernel/asm-offsets.c",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kernel/cpufeature.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kernel/fpsimd.c",
      "insertions": 126,
      "deletions": 53
    },
    {
      "file": "arch/arm64/kernel/perf_event.c",
      "insertions": 41,
      "deletions": 9
    },
    {
      "file": "arch/arm64/kernel/signal.c",
      "insertions": 0,
      "deletions": 5
    },
    {
      "file": "arch/arm64/kvm/Makefile",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/fpsimd.c",
      "insertions": 14,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kvm/guest.c",
      "insertions": 383,
      "deletions": 32
    },
    {
      "file": "arch/arm64/kvm/handle_exit.c",
      "insertions": 28,
      "deletions": 8
    },
    {
      "file": "arch/arm64/kvm/hyp/entry.S",
      "insertions": 15,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/switch.c",
      "insertions": 64,
      "deletions": 16
    },
    {
      "file": "arch/arm64/kvm/pmu.c",
      "insertions": 239,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/reset.c",
      "insertions": 166,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/sys_regs.c",
      "insertions": 157,
      "deletions": 26
    },
    {
      "file": "arch/arm64/kvm/sys_regs.h",
      "insertions": 25,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/include/asm/kvm_host.h",
      "insertions": 10,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/include/asm/kvm_ppc.h",
      "insertions": 37,
      "deletions": 4
    },
    {
      "file": "arch/powerpc/include/asm/xive.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/include/uapi/asm/kvm.h",
      "insertions": 46,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/Makefile",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kvm/book3s.c",
      "insertions": 41,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kvm/book3s_64_vio.c",
      "insertions": 78,
      "deletions": 18
    },
    {
      "file": "arch/powerpc/kvm/book3s_64_vio_hv.c",
      "insertions": 67,
      "deletions": 38
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv.c",
      "insertions": 97,
      "deletions": 55
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv_builtin.c",
      "insertions": 57,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv_rm_mmu.c",
      "insertions": 144,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv_rmhandlers.S",
      "insertions": 33,
      "deletions": 53
    },
    {
      "file": "arch/powerpc/kvm/book3s_xive.c",
      "insertions": 188,
      "deletions": 62
    },
    {
      "file": "arch/powerpc/kvm/book3s_xive.h",
      "insertions": 37,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/book3s_xive_native.c",
      "insertions": 1249,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/book3s_xive_template.c",
      "insertions": 40,
      "deletions": 38
    },
    {
      "file": "arch/powerpc/kvm/powerpc.c",
      "insertions": 37,
      "deletions": 3
    },
    {
      "file": "arch/powerpc/sysdev/xive/native.c",
      "insertions": 11,
      "deletions": 0
    },
    {
      "file": "arch/s390/include/asm/cpacf.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/s390/include/asm/kvm_host.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/s390/include/uapi/asm/kvm.h",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "arch/s390/kvm/Kconfig",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/s390/kvm/interrupt.c",
      "insertions": 9,
      "deletions": 2
    },
    {
      "file": "arch/s390/kvm/kvm-s390.c",
      "insertions": 116,
      "deletions": 4
    },
    {
      "file": "arch/s390/kvm/vsie.c",
      "insertions": 9,
      "deletions": 4
    },
    {
      "file": "arch/s390/tools/gen_facilities.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/x86/events/intel/core.c",
      "insertions": 5,
      "deletions": 1
    },
    {
      "file": "arch/x86/include/asm/e820/api.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/include/asm/kvm_host.h",
      "insertions": 6,
      "deletions": 1
    },
    {
      "file": "arch/x86/include/asm/msr-index.h",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "arch/x86/kernel/e820.c",
      "insertions": 15,
      "deletions": 3
    },
    {
      "file": "arch/x86/kvm/cpuid.c",
      "insertions": 6,
      "deletions": 6
    },
    {
      "file": "arch/x86/kvm/hyperv.c",
      "insertions": 12,
      "deletions": 12
    },
    {
      "file": "arch/x86/kvm/kvm_cache_regs.h",
      "insertions": 40,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/lapic.c",
      "insertions": 24,
      "deletions": 14
    },
    {
      "file": "arch/x86/kvm/mmu.c",
      "insertions": 17,
      "deletions": 6
    },
    {
      "file": "arch/x86/kvm/mtrr.c",
      "insertions": 1,
      "deletions": 9
    },
    {
      "file": "arch/x86/kvm/paging_tmpl.h",
      "insertions": 29,
      "deletions": 9
    },
    {
      "file": "arch/x86/kvm/svm.c",
      "insertions": 61,
      "deletions": 67
    },
    {
      "file": "arch/x86/kvm/vmx/capabilities.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/vmx/nested.c",
      "insertions": 157,
      "deletions": 191
    },
    {
      "file": "arch/x86/kvm/vmx/pmu_intel.c",
      "insertions": 7,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/vmx/vmx.c",
      "insertions": 36,
      "deletions": 54
    },
    {
      "file": "arch/x86/kvm/vmx/vmx.h",
      "insertions": 8,
      "deletions": 3
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "insertions": 123,
      "deletions": 76
    },
    {
      "file": "arch/x86/kvm/x86.h",
      "insertions": 10,
      "deletions": 0
    },
    {
      "file": "include/linux/kvm_host.h",
      "insertions": 48,
      "deletions": 0
    },
    {
      "file": "include/linux/perf_event.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "include/uapi/linux/kvm.h",
      "insertions": 13,
      "deletions": 2
    },
    {
      "file": "tools/arch/s390/include/uapi/asm/kvm.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "tools/testing/selftests/kvm/.gitignore",
      "insertions": 6,
      "deletions": 1
    },
    {
      "file": "tools/testing/selftests/kvm/Makefile",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/dirty_log_test.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "tools/testing/selftests/kvm/include/kvm_util.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/lib/kvm_util.c",
      "insertions": 32,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/kvm_create_max_vcpus.c",
      "insertions": 70,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/vmx_set_nested_state_test.c",
      "insertions": 280,
      "deletions": 0
    },
    {
      "file": "virt/kvm/Kconfig",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "virt/kvm/arm/arm.c",
      "insertions": 34,
      "deletions": 9
    },
    {
      "file": "virt/kvm/kvm_main.c",
      "insertions": 94,
      "deletions": 9
    }
  ],
  "total_insertions": 5574,
  "total_deletions": 965,
  "total_changes": 6539,
  "parents": [
    "4489da7183099f569a7d3dd819c975073c04bc72",
    "c011d23ba046826ccf8c4a4a6c1d01c9ccaa1403"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.2",
    "v5.2-rc1",
    "v5.2-rc2",
    "v5.2-rc3",
    "v5.2-rc4",
    "v5.2-rc5",
    "v5.2-rc6",
    "v5.2-rc7",
    "v5.3",
    "v5.3-rc1"
  ],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "Authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/arm64/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/asm/sysreg.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kernel/asm-offsets.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "Documentation/virtual/kvm/api.txt",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/asm/kvm_hyp.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kernel/cpufeature.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kernel/fpsimd.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv_rmhandlers.S",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kernel/perf_event.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/s390/include/asm/cpacf.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/s390/kvm/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/include/asm/msr-index.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/s390/kvm/interrupt.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/include/asm/kvm_host.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/cpuid.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/events/intel/core.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/mmu.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/lapic.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/hyperv.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/paging_tmpl.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/x86.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/perf_event.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "tools/testing/selftests/kvm/dirty_log_test.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/vmx/nested.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/svm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/arm/arm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/kvm_main.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/vmx/vmx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}