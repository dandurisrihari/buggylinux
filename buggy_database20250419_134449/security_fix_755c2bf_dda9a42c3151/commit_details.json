{
  "hash": "755c2bf878607dbddb1423df9abf16b82205896f",
  "hash_short": "755c2bf8",
  "subject": "KVM: x86: lapic: don't touch irr_pending in kvm_apic_update_apicv when inhibiting it",
  "body": "kvm_apic_update_apicv is called when AVIC is still active, thus IRR bits\ncan be set by the CPU after it is called, and don't cause the irr_pending\nto be set to true.\n\nAlso logic in avic_kick_target_vcpu doesn't expect a race with this\nfunction so to make it simple, just keep irr_pending set to true and\nlet the next interrupt injection to the guest clear it.\n\nSigned-off-by: Maxim Levitsky <mlevitsk@redhat.com>\nMessage-Id: <20220207155447.840194-9-mlevitsk@redhat.com>\nSigned-off-by: Paolo Bonzini <pbonzini@redhat.com>",
  "full_message": "KVM: x86: lapic: don't touch irr_pending in kvm_apic_update_apicv when inhibiting it\n\nkvm_apic_update_apicv is called when AVIC is still active, thus IRR bits\ncan be set by the CPU after it is called, and don't cause the irr_pending\nto be set to true.\n\nAlso logic in avic_kick_target_vcpu doesn't expect a race with this\nfunction so to make it simple, just keep irr_pending set to true and\nlet the next interrupt injection to the guest clear it.\n\nSigned-off-by: Maxim Levitsky <mlevitsk@redhat.com>\nMessage-Id: <20220207155447.840194-9-mlevitsk@redhat.com>\nSigned-off-by: Paolo Bonzini <pbonzini@redhat.com>",
  "author_name": "Maxim Levitsky",
  "author_email": "mlevitsk@redhat.com",
  "author_date": "Mon Feb 7 17:54:25 2022 +0200",
  "author_date_iso": "2022-02-07T17:54:25+02:00",
  "committer_name": "Paolo Bonzini",
  "committer_email": "pbonzini@redhat.com",
  "committer_date": "Tue Feb 8 13:30:49 2022 -0500",
  "committer_date_iso": "2022-02-08T13:30:49-05:00",
  "files_changed": [
    "arch/x86/kvm/lapic.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "arch/x86/kvm/lapic.c",
      "insertions": 6,
      "deletions": 1
    }
  ],
  "total_insertions": 6,
  "total_deletions": 1,
  "total_changes": 7,
  "parents": [
    "2b0ecccb55310a4b8ad5d59c703cf8c821be6260"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/kvm/lapic.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}