{
  "hash": "e501d0553a7580fcc6654d7f58a5f061d31d00af",
  "hash_short": "e501d055",
  "subject": "Bluetooth: Check L2CAP pending status before sending connect request",
  "body": "Due to race condition in L2CAP state machine L2CAP Connection Request\nmay be sent twice for SDP with the same source channel id. Problems\nreported connecting to Apple products, some carkit, Blackberry phones.\n\n...\n2010-06-07 21:18:03.651031 < ACL data: handle 1 flags 0x02 dlen 12\n    L2CAP(s): Connect req: psm 1 scid 0x0040\n2010-06-07 21:18:03.653473 > HCI Event: Number of Completed Packets (0x13) plen 5\n    handle 1 packets 1\n2010-06-07 21:18:03.653808 > HCI Event: Auth Complete (0x06) plen 3\n    status 0x00 handle 1\n2010-06-07 21:18:03.653869 < ACL data: handle 1 flags 0x02 dlen 12\n    L2CAP(s): Connect req: psm 1 scid 0x0040\n...\n\nPatch uses L2CAP_CONF_CONNECT_PEND flag to mark that L2CAP Connection\nRequest has been sent already.\n\nModified version of patch from Ville Tervo.\n\nSigned-off-by: Andrei Emeltchenko <andrei.emeltchenko@nokia.com>\nSigned-off-by: Marcel Holtmann <marcel@holtmann.org>",
  "full_message": "Bluetooth: Check L2CAP pending status before sending connect request\n\nDue to race condition in L2CAP state machine L2CAP Connection Request\nmay be sent twice for SDP with the same source channel id. Problems\nreported connecting to Apple products, some carkit, Blackberry phones.\n\n...\n2010-06-07 21:18:03.651031 < ACL data: handle 1 flags 0x02 dlen 12\n    L2CAP(s): Connect req: psm 1 scid 0x0040\n2010-06-07 21:18:03.653473 > HCI Event: Number of Completed Packets (0x13) plen 5\n    handle 1 packets 1\n2010-06-07 21:18:03.653808 > HCI Event: Auth Complete (0x06) plen 3\n    status 0x00 handle 1\n2010-06-07 21:18:03.653869 < ACL data: handle 1 flags 0x02 dlen 12\n    L2CAP(s): Connect req: psm 1 scid 0x0040\n...\n\nPatch uses L2CAP_CONF_CONNECT_PEND flag to mark that L2CAP Connection\nRequest has been sent already.\n\nModified version of patch from Ville Tervo.\n\nSigned-off-by: Andrei Emeltchenko <andrei.emeltchenko@nokia.com>\nSigned-off-by: Marcel Holtmann <marcel@holtmann.org>",
  "author_name": "Andrei Emeltchenko",
  "author_email": "andrei.emeltchenko@nokia.com",
  "author_date": "Thu Jul 8 12:14:41 2010 +0300",
  "author_date_iso": "2010-07-08T12:14:41+03:00",
  "committer_name": "Marcel Holtmann",
  "committer_email": "marcel@holtmann.org",
  "committer_date": "Thu Jul 8 20:35:23 2010 -0300",
  "committer_date_iso": "2010-07-08T20:35:23-03:00",
  "files_changed": [
    "net/bluetooth/l2cap.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "net/bluetooth/l2cap.c",
      "insertions": 11,
      "deletions": 3
    }
  ],
  "total_insertions": 11,
  "total_deletions": 3,
  "total_changes": 14,
  "parents": [
    "33b665eeeb85956ccbdf31c4c31a4e2a31133c44"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v2.6.35",
    "v2.6.35-rc6",
    "v2.6.36",
    "v2.6.36-rc1",
    "v2.6.36-rc2",
    "v2.6.36-rc3",
    "v2.6.36-rc4",
    "v2.6.36-rc5",
    "v2.6.36-rc6",
    "v2.6.36-rc7"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "Auth"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "net/bluetooth/l2cap.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}