Commit Hash: 3edede08ff37c6a9370510508d5eeb54890baf47
Subject: ipv6: ioam: Support for IOAM injection with lwtunnels


Security Keywords:
- injection

Full commit message:
ipv6: ioam: Support for IOAM injection with lwtunnels

Add support for the IOAM inline insertion (only for the host-to-host use case)
which is per-route configured with lightweight tunnels. The target is iproute2
and the patch is ready. It will be posted as soon as this patchset is merged.
Here is an overview:

$ ip -6 ro ad fc00::1/128 encap ioam6 trace type 0x800000 ns 1 size 12 dev eth0

This example configures an IOAM Pre-allocated Trace option attached to the
fc00::1/128 prefix. The IOAM namespace (ns) is 1, the size of the pre-allocated
trace data block is 12 octets (size) and only the first IOAM data (bit 0:
hop_limit + node id) is included in the trace (type) represented as a bitfield.

The reason why the in-transit (IPv6-in-IPv6 encapsulation) use case is not
implemented is explained on the patchset cover.

Signed-off-by: Justin Iurman <justin.iurman@uliege.be>
Signed-off-by: David S. Miller <davem@davemloft.net>

Metadata:
Author: Justin Iurman <justin.iurman@uliege.be>
Author Date: Tue Jul 20 21:42:59 2021 +0200
Committer: David S. Miller <davem@davemloft.net>
Commit Date: Wed Jul 21 08:14:33 2021 -0700

Files Changed: 10
Lines Added: 358
Lines Removed: 12
Total Changes: 370
