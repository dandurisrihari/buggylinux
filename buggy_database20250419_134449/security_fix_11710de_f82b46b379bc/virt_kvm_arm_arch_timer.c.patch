commit 11710dec8a45084a3e0ad2f6da944c990fad23a4
Author: Christoffer Dall <christoffer.dall@linaro.org>
Date:   Wed Feb 1 11:03:45 2017 +0100

    KVM: arm/arm64: Remove kvm_vgic_inject_mapped_irq
    
    The only benefit of having kvm_vgic_inject_mapped_irq separate from
    kvm_vgic_inject_irq is that we pass a boolean that we use for error
    checking on the injection path.
    
    While this could potentially help in some aspect of robustness, it's
    also a little bit of a defensive move, and arguably callers into the
    vgic should have make sure they have marked their virtual IRQs as mapped
    if required.
    
    Acked-by: Marc Zyngier <marc.zyngier@arm.com>
    Reviewed-by: Andre Przywara <andre.przywara@arm.com>
    Signed-off-by: Christoffer Dall <christoffer.dall@linaro.org>

diff --git a/virt/kvm/arm/arch_timer.c b/virt/kvm/arm/arch_timer.c
index 6a084cd57b88..91ecf48f7fe2 100644
--- a/virt/kvm/arm/arch_timer.c
+++ b/virt/kvm/arm/arch_timer.c
@@ -175,7 +175,8 @@ static void kvm_timer_update_irq(struct kvm_vcpu *vcpu, bool new_level)
 	timer->irq.level = new_level;
 	trace_kvm_timer_update_irq(vcpu->vcpu_id, timer->irq.irq,
 				   timer->irq.level);
-	ret = kvm_vgic_inject_mapped_irq(vcpu->kvm, vcpu->vcpu_id,
+
+	ret = kvm_vgic_inject_irq(vcpu->kvm, vcpu->vcpu_id,
 					 timer->irq.irq,
 					 timer->irq.level);
 	WARN_ON(ret);