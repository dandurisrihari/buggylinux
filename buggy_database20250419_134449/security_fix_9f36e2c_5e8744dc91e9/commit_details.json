{
  "hash": "9f36e2c448007b54851e7e4fa48da97d1477a175",
  "hash_short": "9f36e2c4",
  "subject": "printk: use %pK for /proc/kallsyms and /proc/modules",
  "body": "In an effort to reduce kernel address leaks that might be used to help\ntarget kernel privilege escalation exploits, this patch uses %pK when\ndisplaying addresses in /proc/kallsyms, /proc/modules, and\n/sys/module/*/sections/*.\n\nNote that this changes %x to %p, so some legitimately 0 values in\n/proc/kallsyms would have changed from 00000000 to \"(null)\".  To avoid\nthis, \"(null)\" is not used when using the \"K\" format.  Anything that was\nalready successfully parsing \"(null)\" in addition to full hex digits\nshould have no problem with this change.  (Thanks to Joe Perches for the\nsuggestion.) Due to the %x to %p, \"void *\" casts are needed since these\naddresses are already \"unsigned long\" everywhere internally, due to their\nstarting life as ELF section offsets.\n\nSigned-off-by: Kees Cook <kees.cook@canonical.com>\nCc: Eugene Teo <eugene@redhat.com>\nCc: Dan Rosenberg <drosenberg@vsecurity.com>\nCc: Rusty Russell <rusty@rustcorp.com.au>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\nSigned-off-by: Linus Torvalds <torvalds@linux-foundation.org>",
  "full_message": "printk: use %pK for /proc/kallsyms and /proc/modules\n\nIn an effort to reduce kernel address leaks that might be used to help\ntarget kernel privilege escalation exploits, this patch uses %pK when\ndisplaying addresses in /proc/kallsyms, /proc/modules, and\n/sys/module/*/sections/*.\n\nNote that this changes %x to %p, so some legitimately 0 values in\n/proc/kallsyms would have changed from 00000000 to \"(null)\".  To avoid\nthis, \"(null)\" is not used when using the \"K\" format.  Anything that was\nalready successfully parsing \"(null)\" in addition to full hex digits\nshould have no problem with this change.  (Thanks to Joe Perches for the\nsuggestion.) Due to the %x to %p, \"void *\" casts are needed since these\naddresses are already \"unsigned long\" everywhere internally, due to their\nstarting life as ELF section offsets.\n\nSigned-off-by: Kees Cook <kees.cook@canonical.com>\nCc: Eugene Teo <eugene@redhat.com>\nCc: Dan Rosenberg <drosenberg@vsecurity.com>\nCc: Rusty Russell <rusty@rustcorp.com.au>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\nSigned-off-by: Linus Torvalds <torvalds@linux-foundation.org>",
  "author_name": "Kees Cook",
  "author_email": "kees.cook@canonical.com",
  "author_date": "Tue Mar 22 16:34:22 2011 -0700",
  "author_date_iso": "2011-03-22T16:34:22-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Tue Mar 22 17:44:12 2011 -0700",
  "committer_date_iso": "2011-03-22T17:44:12-07:00",
  "files_changed": [
    "kernel/kallsyms.c",
    "kernel/module.c",
    "lib/vsprintf.c"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "kernel/kallsyms.c",
      "insertions": 4,
      "deletions": 6
    },
    {
      "file": "kernel/module.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "lib/vsprintf.c",
      "insertions": 1,
      "deletions": 1
    }
  ],
  "total_insertions": 7,
  "total_deletions": 9,
  "total_changes": 16,
  "parents": [
    "fe3d8ad31cf51b062bbb8a9609eeb1d0c41a7f30"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v2.6.39",
    "v2.6.39-rc1",
    "v2.6.39-rc2",
    "v2.6.39-rc3",
    "v2.6.39-rc4",
    "v2.6.39-rc5",
    "v2.6.39-rc6",
    "v2.6.39-rc7",
    "v3.0",
    "v3.0-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "privilege escalation"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "kernel/kallsyms.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "kernel/module.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "lib/vsprintf.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}