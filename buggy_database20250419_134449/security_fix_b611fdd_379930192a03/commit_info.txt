Commit Hash: b611fddc0435738e64453bbf1dadd4b12a801858
Subject: xfs: don't ifdef around the exact minlen allocations


Security Keywords:
- injection

Full commit message:
xfs: don't ifdef around the exact minlen allocations

Exact minlen allocations only exist as an error injection tool for debug
builds.  Currently this is implemented using ifdefs, which means the code
isn't even compiled for non-XFS_DEBUG builds.  Enhance the compile test
coverage by always building the code and use the compilers' dead code
elimination to remove it from the generated binary instead.

The only downside is that the alloc_minlen_only field is unconditionally
added to struct xfs_alloc_args now, but by moving it around and packing
it tightly this doesn't actually increase the size of the structure.

Signed-off-by: Christoph Hellwig <hch@lst.de>
Reviewed-by: Darrick J. Wong <djwong@kernel.org>
Signed-off-by: Carlos Maiolino <cem@kernel.org>

Metadata:
Author: Christoph Hellwig <hch@lst.de>
Author Date: Wed Sep 18 07:30:08 2024 +0200
Committer: Carlos Maiolino <cem@kernel.org>
Commit Date: Mon Oct 7 08:00:11 2024 +0200

Files Changed: 3
Lines Added: 3
Lines Removed: 14
Total Changes: 17
