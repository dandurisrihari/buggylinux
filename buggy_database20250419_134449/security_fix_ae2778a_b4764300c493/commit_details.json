{
  "hash": "ae2778a64724f77fd6cad674461a045fb3307df7",
  "hash_short": "ae2778a6",
  "subject": "net: dsa: tag_ocelot: use traffic class to map priority on injected header",
  "body": "For Ocelot switches, the CPU injected frames have an injection header\nwhere it can specify the QoS class of the packet and the DSA tag, now it\nuses the SKB priority to set that. If a traffic class to priority\nmapping is configured on the netdevice (with mqprio for example ...), it\nwon't be considered for CPU injected headers. This patch make the QoS\nclass aligned to the priority to traffic class mapping if it exists.\n\nFixes: 8dce89aa5f32 (\"net: dsa: ocelot: add tagger for Ocelot/Felix switches\")\nSigned-off-by: Xiaoliang Yang <xiaoliang.yang_1@nxp.com>\nSigned-off-by: Marouen Ghodhbane <marouen.ghodhbane@nxp.com>\nLink: https://lore.kernel.org/r/20211223072211.33130-1-xiaoliang.yang_1@nxp.com\nSigned-off-by: Jakub Kicinski <kuba@kernel.org>",
  "full_message": "net: dsa: tag_ocelot: use traffic class to map priority on injected header\n\nFor Ocelot switches, the CPU injected frames have an injection header\nwhere it can specify the QoS class of the packet and the DSA tag, now it\nuses the SKB priority to set that. If a traffic class to priority\nmapping is configured on the netdevice (with mqprio for example ...), it\nwon't be considered for CPU injected headers. This patch make the QoS\nclass aligned to the priority to traffic class mapping if it exists.\n\nFixes: 8dce89aa5f32 (\"net: dsa: ocelot: add tagger for Ocelot/Felix switches\")\nSigned-off-by: Xiaoliang Yang <xiaoliang.yang_1@nxp.com>\nSigned-off-by: Marouen Ghodhbane <marouen.ghodhbane@nxp.com>\nLink: https://lore.kernel.org/r/20211223072211.33130-1-xiaoliang.yang_1@nxp.com\nSigned-off-by: Jakub Kicinski <kuba@kernel.org>",
  "author_name": "Xiaoliang Yang",
  "author_email": "xiaoliang.yang_1@nxp.com",
  "author_date": "Thu Dec 23 15:22:11 2021 +0800",
  "author_date_iso": "2021-12-23T15:22:11+08:00",
  "committer_name": "Jakub Kicinski",
  "committer_email": "kuba@kernel.org",
  "committer_date": "Thu Dec 23 09:44:59 2021 -0800",
  "committer_date_iso": "2021-12-23T09:44:59-08:00",
  "files_changed": [
    "net/dsa/tag_ocelot.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "net/dsa/tag_ocelot.c",
      "insertions": 5,
      "deletions": 1
    }
  ],
  "total_insertions": 5,
  "total_deletions": 1,
  "total_changes": 6,
  "parents": [
    "9695b7de5b4760ed22132aca919570c0190cb0ce"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "net/dsa/tag_ocelot.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}