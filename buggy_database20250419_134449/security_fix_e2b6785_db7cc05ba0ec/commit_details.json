{
  "hash": "e2b67859ab6efd4458bda1baaee20331a367d995",
  "hash_short": "e2b67859",
  "subject": "crypto: qat - add heartbeat error simulator",
  "body": "Add a mechanism that allows to inject a heartbeat error for testing\npurposes.\nA new attribute `inject_error` is added to debugfs for each QAT device.\nUpon a write on this attribute, the driver will inject an error on the\ndevice which can then be detected by the heartbeat feature.\nErrors are breaking the device functionality thus they require a\ndevice reset in order to be recovered.\n\nThis functionality is not compiled by default, to enable it\nCRYPTO_DEV_QAT_ERROR_INJECTION must be set.\n\nSigned-off-by: Damian Muszynski <damian.muszynski@intel.com>\nReviewed-by: Giovanni Cabiddu <giovanni.cabiddu@intel.com>\nReviewed-by: Lucas Segarra Fernandez <lucas.segarra.fernandez@intel.com>\nReviewed-by: Ahsan Atta <ahsan.atta@intel.com>\nReviewed-by: Markas Rapoportas <markas.rapoportas@intel.com>\nSigned-off-by: Mun Chun Yep <mun.chun.yep@intel.com>\nSigned-off-by: Herbert Xu <herbert@gondor.apana.org.au>",
  "full_message": "crypto: qat - add heartbeat error simulator\n\nAdd a mechanism that allows to inject a heartbeat error for testing\npurposes.\nA new attribute `inject_error` is added to debugfs for each QAT device.\nUpon a write on this attribute, the driver will inject an error on the\ndevice which can then be detected by the heartbeat feature.\nErrors are breaking the device functionality thus they require a\ndevice reset in order to be recovered.\n\nThis functionality is not compiled by default, to enable it\nCRYPTO_DEV_QAT_ERROR_INJECTION must be set.\n\nSigned-off-by: Damian Muszynski <damian.muszynski@intel.com>\nReviewed-by: Giovanni Cabiddu <giovanni.cabiddu@intel.com>\nReviewed-by: Lucas Segarra Fernandez <lucas.segarra.fernandez@intel.com>\nReviewed-by: Ahsan Atta <ahsan.atta@intel.com>\nReviewed-by: Markas Rapoportas <markas.rapoportas@intel.com>\nSigned-off-by: Mun Chun Yep <mun.chun.yep@intel.com>\nSigned-off-by: Herbert Xu <herbert@gondor.apana.org.au>",
  "author_name": "Damian Muszynski",
  "author_email": "damian.muszynski@intel.com",
  "author_date": "Fri Feb 2 18:53:16 2024 +0800",
  "author_date_iso": "2024-02-02T18:53:16+08:00",
  "committer_name": "Herbert Xu",
  "committer_email": "herbert@gondor.apana.org.au",
  "committer_date": "Fri Feb 9 12:57:18 2024 +0800",
  "committer_date_iso": "2024-02-09T12:57:18+08:00",
  "files_changed": [
    "Documentation/ABI/testing/debugfs-driver-qat",
    "drivers/crypto/intel/qat/Kconfig",
    "drivers/crypto/intel/qat/qat_common/Makefile",
    "drivers/crypto/intel/qat/qat_common/adf_common_drv.h",
    "drivers/crypto/intel/qat/qat_common/adf_heartbeat.c",
    "drivers/crypto/intel/qat/qat_common/adf_heartbeat.h",
    "drivers/crypto/intel/qat/qat_common/adf_heartbeat_dbgfs.c",
    "drivers/crypto/intel/qat/qat_common/adf_heartbeat_inject.c",
    "drivers/crypto/intel/qat/qat_common/adf_hw_arbiter.c"
  ],
  "files_changed_count": 9,
  "stats": [
    {
      "file": "Documentation/ABI/testing/debugfs-driver-qat",
      "insertions": 26,
      "deletions": 0
    },
    {
      "file": "drivers/crypto/intel/qat/Kconfig",
      "insertions": 14,
      "deletions": 0
    },
    {
      "file": "drivers/crypto/intel/qat/qat_common/Makefile",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/crypto/intel/qat/qat_common/adf_common_drv.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/crypto/intel/qat/qat_common/adf_heartbeat.c",
      "insertions": 0,
      "deletions": 6
    },
    {
      "file": "drivers/crypto/intel/qat/qat_common/adf_heartbeat.h",
      "insertions": 18,
      "deletions": 0
    },
    {
      "file": "drivers/crypto/intel/qat/qat_common/adf_heartbeat_dbgfs.c",
      "insertions": 52,
      "deletions": 0
    },
    {
      "file": "drivers/crypto/intel/qat/qat_common/adf_heartbeat_inject.c",
      "insertions": 76,
      "deletions": 0
    },
    {
      "file": "drivers/crypto/intel/qat/qat_common/adf_hw_arbiter.c",
      "insertions": 25,
      "deletions": 0
    }
  ],
  "total_insertions": 214,
  "total_deletions": 6,
  "total_changes": 220,
  "parents": [
    "633eeefab69ed4bdfa3f1d375c609e87feb1c55a"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "inject"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/crypto/intel/qat/qat_common/adf_heartbeat.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "Documentation/ABI/testing/debugfs-driver-qat",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/intel/qat/qat_common/Makefile",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/intel/qat/qat_common/adf_common_drv.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/intel/qat/qat_common/adf_heartbeat.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/intel/qat/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/intel/qat/qat_common/adf_heartbeat_dbgfs.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/intel/qat/qat_common/adf_heartbeat_inject.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/intel/qat/qat_common/adf_hw_arbiter.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}