Commit Hash: 10513142a7114d251670361ad40cba2c61403406
Subject: ALSA: hdspm: Hardening for potential Spectre v1


Security Keywords:
- Hardening

Full commit message:
ALSA: hdspm: Hardening for potential Spectre v1

As recently Smatch suggested, a couple of places in HDSP MADI driver
may expand the array directly from the user-space value with
speculation:
  sound/pci/rme9652/hdspm.c:5717 snd_hdspm_channel_info() warn: potential spectre issue 'hdspm->channel_map_out' (local cap)
  sound/pci/rme9652/hdspm.c:5734 snd_hdspm_channel_info() warn: potential spectre issue 'hdspm->channel_map_in' (local cap)

This patch puts array_index_nospec() for hardening against them.

BugLink: https://marc.info/?l=linux-kernel&m=152411496503418&w=2
Reported-by: Dan Carpenter <dan.carpenter@oracle.com>
Cc: <stable@vger.kernel.org>
Signed-off-by: Takashi Iwai <tiwai@suse.de>

Metadata:
Author: Takashi Iwai <tiwai@suse.de>
Author Date: Tue Apr 24 08:03:14 2018 +0200
Committer: Takashi Iwai <tiwai@suse.de>
Commit Date: Wed Apr 25 10:37:48 2018 +0200

Files Changed: 1
Lines Added: 14
Lines Removed: 10
Total Changes: 24
