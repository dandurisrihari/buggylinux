{
  "hash": "c4f71901d53b6d8a4703389459d9f99fbd80ffd2",
  "hash_short": "c4f71901",
  "subject": "Merge tag 'kvmarm-5.13' of git://git.kernel.org/pub/scm/linux/kernel/git/kvmarm/kvmarm into HEAD",
  "body": "KVM/arm64 updates for Linux 5.13\n\nNew features:\n\n- Stage-2 isolation for the host kernel when running in protected mode\n- Guest SVE support when running in nVHE mode\n- Force W^X hypervisor mappings in nVHE mode\n- ITS save/restore for guests using direct injection with GICv4.1\n- nVHE panics now produce readable backtraces\n- Guest support for PTP using the ptp_kvm driver\n- Performance improvements in the S2 fault handler\n- Alexandru is now a reviewer (not really a new feature...)\n\nFixes:\n- Proper emulation of the GICR_TYPER register\n- Handle the complete set of relocation in the nVHE EL2 object\n- Get rid of the oprofile dependency in the PMU code (and of the\n  oprofile body parts at the same time)\n- Debug and SPE fixes\n- Fix vcpu reset",
  "full_message": "Merge tag 'kvmarm-5.13' of git://git.kernel.org/pub/scm/linux/kernel/git/kvmarm/kvmarm into HEAD\n\nKVM/arm64 updates for Linux 5.13\n\nNew features:\n\n- Stage-2 isolation for the host kernel when running in protected mode\n- Guest SVE support when running in nVHE mode\n- Force W^X hypervisor mappings in nVHE mode\n- ITS save/restore for guests using direct injection with GICv4.1\n- nVHE panics now produce readable backtraces\n- Guest support for PTP using the ptp_kvm driver\n- Performance improvements in the S2 fault handler\n- Alexandru is now a reviewer (not really a new feature...)\n\nFixes:\n- Proper emulation of the GICR_TYPER register\n- Handle the complete set of relocation in the nVHE EL2 object\n- Get rid of the oprofile dependency in the PMU code (and of the\n  oprofile body parts at the same time)\n- Debug and SPE fixes\n- Fix vcpu reset",
  "author_name": "Paolo Bonzini",
  "author_email": "pbonzini@redhat.com",
  "author_date": "Fri Apr 23 07:41:17 2021 -0400",
  "author_date_iso": "2021-04-23T07:41:17-04:00",
  "committer_name": "Paolo Bonzini",
  "committer_email": "pbonzini@redhat.com",
  "committer_date": "Fri Apr 23 07:41:17 2021 -0400",
  "committer_date_iso": "2021-04-23T07:41:17-04:00",
  "files_changed": [
    "Documentation/virt/kvm/api.rst",
    "MAINTAINERS",
    "arch/arm64/Kconfig",
    "arch/arm64/include/asm/kvm_host.h",
    "arch/arm64/kernel/cpufeature.c",
    "arch/arm64/kvm/arm.c",
    "arch/arm64/kvm/guest.c",
    "arch/arm64/kvm/mmu.c",
    "include/uapi/linux/kvm.h",
    "tools/testing/selftests/kvm/.gitignore",
    "tools/testing/selftests/kvm/Makefile",
    "tools/testing/selftests/kvm/include/kvm_util.h",
    "tools/testing/selftests/kvm/lib/kvm_util.c"
  ],
  "files_changed_count": 13,
  "stats": [
    {
      "file": "Documentation/ABI/testing/sysfs-bus-coresight-devices-trbe",
      "insertions": 14,
      "deletions": 0
    },
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "Documentation/devicetree/bindings/arm/ete.yaml",
      "insertions": 75,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/arm/trbe.yaml",
      "insertions": 49,
      "deletions": 0
    },
    {
      "file": "Documentation/trace/coresight/coresight-trbe.rst",
      "insertions": 38,
      "deletions": 0
    },
    {
      "file": "Documentation/virt/kvm/api.rst",
      "insertions": 23,
      "deletions": 1
    },
    {
      "file": "Documentation/virt/kvm/arm/index.rst",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "Documentation/virt/kvm/arm/ptp_kvm.rst",
      "insertions": 25,
      "deletions": 0
    },
    {
      "file": "Documentation/virt/kvm/devices/arm-vgic-its.rst",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "Documentation/virt/kvm/devices/arm-vgic-v3.rst",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "MAINTAINERS",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "arch/arm/include/asm/hypervisor.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/arm64/Kconfig",
      "insertions": 0,
      "deletions": 20
    },
    {
      "file": "arch/arm64/crypto/aes-modes.S",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/crypto/sha1-ce-core.S",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/crypto/sha2-ce-core.S",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/crypto/sha3-ce-core.S",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/arm64/crypto/sha512-ce-core.S",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/include/asm/assembler.h",
      "insertions": 51,
      "deletions": 78
    },
    {
      "file": "arch/arm64/include/asm/barrier.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/cpufeature.h",
      "insertions": 17,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/el2_setup.h",
      "insertions": 13,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/fpsimd.h",
      "insertions": 11,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/fpsimdmacros.h",
      "insertions": 8,
      "deletions": 2
    },
    {
      "file": "arch/arm64/include/asm/hyp_image.h",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/hypervisor.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/kvm_arm.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/kvm_asm.h",
      "insertions": 9,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "insertions": 28,
      "deletions": 18
    },
    {
      "file": "arch/arm64/include/asm/kvm_hyp.h",
      "insertions": 13,
      "deletions": 1
    },
    {
      "file": "arch/arm64/include/asm/kvm_mmu.h",
      "insertions": 22,
      "deletions": 3
    },
    {
      "file": "arch/arm64/include/asm/kvm_pgtable.h",
      "insertions": 148,
      "deletions": 16
    },
    {
      "file": "arch/arm64/include/asm/pgtable-prot.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/arm64/include/asm/sections.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/sysreg.h",
      "insertions": 56,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kernel/asm-offsets.c",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kernel/cpu-reset.S",
      "insertions": 1,
      "deletions": 4
    },
    {
      "file": "arch/arm64/kernel/cpufeature.c",
      "insertions": 6,
      "deletions": 4
    },
    {
      "file": "arch/arm64/kernel/fpsimd.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/arm64/kernel/head.S",
      "insertions": 36,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kernel/hyp-stub.S",
      "insertions": 6,
      "deletions": 7
    },
    {
      "file": "arch/arm64/kernel/idreg-override.c",
      "insertions": 25,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kernel/image-vars.h",
      "insertions": 32,
      "deletions": 2
    },
    {
      "file": "arch/arm64/kernel/vmlinux.lds.S",
      "insertions": 43,
      "deletions": 31
    },
    {
      "file": "arch/arm64/kvm/arm.c",
      "insertions": 184,
      "deletions": 32
    },
    {
      "file": "arch/arm64/kvm/debug.c",
      "insertions": 90,
      "deletions": 28
    },
    {
      "file": "arch/arm64/kvm/fpsimd.c",
      "insertions": 22,
      "deletions": 4
    },
    {
      "file": "arch/arm64/kvm/guest.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kvm/handle_exit.c",
      "insertions": 45,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/Makefile",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/hyp/fpsimd.S",
      "insertions": 10,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/include/hyp/switch.h",
      "insertions": 54,
      "deletions": 53
    },
    {
      "file": "arch/arm64/kvm/hyp/include/nvhe/early_alloc.h",
      "insertions": 14,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/include/nvhe/gfp.h",
      "insertions": 68,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/include/nvhe/mem_protect.h",
      "insertions": 36,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/include/nvhe/memory.h",
      "insertions": 51,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/include/nvhe/mm.h",
      "insertions": 96,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/include/nvhe/spinlock.h",
      "insertions": 92,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/Makefile",
      "insertions": 7,
      "deletions": 2
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/cache.S",
      "insertions": 13,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/debug-sr.c",
      "insertions": 43,
      "deletions": 13
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/early_alloc.c",
      "insertions": 54,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/gen-hyprel.c",
      "insertions": 18,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/host.S",
      "insertions": 7,
      "deletions": 11
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/hyp-init.S",
      "insertions": 39,
      "deletions": 15
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/hyp-main.c",
      "insertions": 74,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/hyp-smp.c",
      "insertions": 2,
      "deletions": 4
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/hyp.lds.S",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/mem_protect.c",
      "insertions": 279,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/mm.c",
      "insertions": 173,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/page_alloc.c",
      "insertions": 195,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/psci-relay.c",
      "insertions": 1,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/setup.c",
      "insertions": 214,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/stub.c",
      "insertions": 22,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/switch.c",
      "insertions": 13,
      "deletions": 13
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/tlb.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/hyp/pgtable.c",
      "insertions": 318,
      "deletions": 92
    },
    {
      "file": "arch/arm64/kvm/hyp/reserved_mem.c",
      "insertions": 113,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/vhe/switch.c",
      "insertions": 1,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kvm/hypercalls.c",
      "insertions": 71,
      "deletions": 9
    },
    {
      "file": "arch/arm64/kvm/mmu.c",
      "insertions": 119,
      "deletions": 17
    },
    {
      "file": "arch/arm64/kvm/perf.c",
      "insertions": 1,
      "deletions": 6
    },
    {
      "file": "arch/arm64/kvm/pmu-emul.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/pmu.c",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "arch/arm64/kvm/reset.c",
      "insertions": 9,
      "deletions": 42
    },
    {
      "file": "arch/arm64/kvm/sys_regs.c",
      "insertions": 16,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/va_layout.c",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-init.c",
      "insertions": 7,
      "deletions": 5
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-its.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-kvm-device.c",
      "insertions": 5,
      "deletions": 2
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-mmio-v3.c",
      "insertions": 50,
      "deletions": 31
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-mmio.c",
      "insertions": 4,
      "deletions": 6
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-v3.c",
      "insertions": 60,
      "deletions": 6
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-v4.c",
      "insertions": 38,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/arm64/lib/clear_page.S",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/arm64/lib/copy_page.S",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/arm64/mm/init.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/s390/kernel/perf_event.c",
      "insertions": 0,
      "deletions": 21
    },
    {
      "file": "arch/sh/kernel/perf_event.c",
      "insertions": 0,
      "deletions": 18
    },
    {
      "file": "drivers/clocksource/arm_arch_timer.c",
      "insertions": 36,
      "deletions": 0
    },
    {
      "file": "drivers/firmware/psci/psci.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/firmware/smccc/Makefile",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/firmware/smccc/kvm_guest.c",
      "insertions": 50,
      "deletions": 0
    },
    {
      "file": "drivers/firmware/smccc/smccc.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/hwtracing/coresight/Kconfig",
      "insertions": 19,
      "deletions": 5
    },
    {
      "file": "drivers/hwtracing/coresight/Makefile",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/hwtracing/coresight/coresight-core.c",
      "insertions": 27,
      "deletions": 2
    },
    {
      "file": "drivers/hwtracing/coresight/coresight-etm-perf.c",
      "insertions": 106,
      "deletions": 13
    },
    {
      "file": "drivers/hwtracing/coresight/coresight-etm4x-core.c",
      "insertions": 137,
      "deletions": 24
    },
    {
      "file": "drivers/hwtracing/coresight/coresight-etm4x-sysfs.c",
      "insertions": 16,
      "deletions": 3
    },
    {
      "file": "drivers/hwtracing/coresight/coresight-etm4x.h",
      "insertions": 74,
      "deletions": 9
    },
    {
      "file": "drivers/hwtracing/coresight/coresight-platform.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "drivers/hwtracing/coresight/coresight-priv.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/hwtracing/coresight/coresight-trbe.c",
      "insertions": 1157,
      "deletions": 0
    },
    {
      "file": "drivers/hwtracing/coresight/coresight-trbe.h",
      "insertions": 152,
      "deletions": 0
    },
    {
      "file": "drivers/irqchip/irq-gic-v3-its.c",
      "insertions": 16,
      "deletions": 2
    },
    {
      "file": "drivers/perf/arm_pmu.c",
      "insertions": 0,
      "deletions": 30
    },
    {
      "file": "drivers/ptp/Kconfig",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/ptp/Makefile",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/ptp/ptp_kvm_arm.c",
      "insertions": 28,
      "deletions": 0
    },
    {
      "file": "drivers/ptp/{ptp_kvm.c => ptp_kvm_common.c}",
      "insertions": 23,
      "deletions": 62
    },
    {
      "file": "drivers/ptp/ptp_kvm_x86.c",
      "insertions": 97,
      "deletions": 0
    },
    {
      "file": "include/kvm/arm_pmu.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "include/kvm/arm_vgic.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "include/linux/arm-smccc.h",
      "insertions": 41,
      "deletions": 0
    },
    {
      "file": "include/linux/bug.h",
      "insertions": 10,
      "deletions": 0
    },
    {
      "file": "include/linux/clocksource.h",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "include/linux/clocksource_ids.h",
      "insertions": 12,
      "deletions": 0
    },
    {
      "file": "include/linux/coresight.h",
      "insertions": 13,
      "deletions": 0
    },
    {
      "file": "include/linux/perf_event.h",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "include/linux/ptp_kvm.h",
      "insertions": 19,
      "deletions": 0
    },
    {
      "file": "include/linux/timekeeping.h",
      "insertions": 7,
      "deletions": 5
    },
    {
      "file": "include/uapi/linux/kvm.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "include/uapi/linux/perf_event.h",
      "insertions": 9,
      "deletions": 4
    },
    {
      "file": "kernel/events/core.c",
      "insertions": 0,
      "deletions": 5
    },
    {
      "file": "kernel/time/clocksource.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "kernel/time/timekeeping.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "lib/bug.c",
      "insertions": 29,
      "deletions": 25
    },
    {
      "file": "tools/testing/selftests/kvm/.gitignore",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/Makefile",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/aarch64/vgic_init.c",
      "insertions": 551,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/include/kvm_util.h",
      "insertions": 9,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/lib/kvm_util.c",
      "insertions": 75,
      "deletions": 0
    }
  ],
  "total_insertions": 6296,
  "total_deletions": 857,
  "total_changes": 7153,
  "parents": [
    "fd49e8ee70b306a003323a17bbcc0633f322c135",
    "9a8aae605b80fc0a830cdce747eed48e11acc067"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kernel/cpufeature.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/arm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/guest.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/mmu.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "tools/testing/selftests/kvm/Makefile",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "tools/testing/selftests/kvm/include/kvm_util.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/uapi/linux/kvm.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "tools/testing/selftests/kvm/.gitignore",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "MAINTAINERS",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "Documentation/virt/kvm/api.rst",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "tools/testing/selftests/kvm/lib/kvm_util.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}