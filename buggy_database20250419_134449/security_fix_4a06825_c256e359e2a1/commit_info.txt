Commit Hash: 4a06825839889cc1756d0dd8a52d6b1071ee0263
Subject: SUNRPC: Transport fault injection


Security Keywords:
- injection

Full commit message:
SUNRPC: Transport fault injection

It has been exceptionally useful to exercise the logic that handles
local immediate errors and RDMA connection loss.  To enable
developers to test this regularly and repeatably, add logic to
simulate connection loss every so often.

Fault injection is disabled by default. It is enabled with

  $ sudo echo xxx > /sys/kernel/debug/sunrpc/inject_fault/disconnect

where "xxx" is a large positive number of transport method calls
before a disconnect. A value of several thousand is usually a good
number that allows reasonable forward progress while still causing a
lot of connection drops.

These hooks are disabled when SUNRPC_DEBUG is turned off.

Signed-off-by: Chuck Lever <chuck.lever@oracle.com>
Signed-off-by: Trond Myklebust <trond.myklebust@primarydata.com>

Metadata:
Author: Chuck Lever <chuck.lever@oracle.com>
Author Date: Mon May 11 14:02:25 2015 -0400
Committer: Trond Myklebust <trond.myklebust@primarydata.com>
Commit Date: Wed Jun 10 18:37:26 2015 -0400

Files Changed: 6
Lines Added: 120
Lines Removed: 0
Total Changes: 120
