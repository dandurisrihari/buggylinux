Commit Hash: 6e192214c6c82c2f52238d5e1865f11594e58a6f
Subject: iommu/arm-smmu-v3: Document SVA interaction with new pagetable features


Security Keywords:
- hardening

Full commit message:
iommu/arm-smmu-v3: Document SVA interaction with new pagetable features

Process pagetables may now be using new permission-indirection-based
features which an SMMU may not understand when given such a table for
SVA. Although SMMUv3.4 does add its own S1PIE feature, realistically
we're still going to have to cope with feature mismatches between CPUs
and SMMUs, so let's start simple and essentially just document the
expectations for what falls out as-is. Although it seems unlikely for
SVA applications to also depend on memory-hardening features, or
vice-versa, the relative lifecycles make it tricky to enforce mutual
exclusivity. Thankfully our PIE index allocation makes it relatively
benign for an SMMU to keep interpreting them as direct permissions, the
only real implication is that an SVA application cannot harden itself
against its own devices with these features. Thus, inform the user about
that just in case they have other expectations.

Also we don't (yet) support LPA2, so deny SVA entirely if we're going to
misunderstand the pagetable format altogether.

Signed-off-by: Robin Murphy <robin.murphy@arm.com>
Link: https://lore.kernel.org/r/68a37b00a720f0827cac0e4f40e4d3a688924054.1733406275.git.robin.murphy@arm.com
Signed-off-by: Will Deacon <will@kernel.org>

Metadata:
Author: Robin Murphy <robin.murphy@arm.com>
Author Date: Thu Dec 5 13:48:09 2024 +0000
Committer: Will Deacon <will@kernel.org>
Commit Date: Mon Dec 9 22:49:19 2024 +0000

Files Changed: 1
Lines Added: 14
Lines Removed: 1
Total Changes: 15
