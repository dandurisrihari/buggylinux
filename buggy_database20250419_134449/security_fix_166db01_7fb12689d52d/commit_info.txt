Commit Hash: 166db01007ea802ff9933ac73ec8f140ca0cf5d5
Subject: soc: qcom: cmd-db: replace deprecated strncpy with strtomem


Security Keywords:
- hardening

Full commit message:
soc: qcom: cmd-db: replace deprecated strncpy with strtomem

strncpy() is an ambiguous and potentially dangerous interface [1]. We
should prefer more robust and less ambiguous alternatives.

@query is marked as __nonstring and doesn't need to be NUL-terminated.

Since we are doing a string to memory copy, we can use the aptly named
"strtomem" -- specifically, the "pad" variant to also ensure NUL-padding
throughout the destination buffer.

Link: https://www.kernel.org/doc/html/latest/process/deprecated.html#strncpy-on-nul-terminated-strings [1]
Link: https://manpages.debian.org/testing/linux-manual-4.8/strscpy.9.en.html [2]
Link: https://github.com/KSPP/linux/issues/90
Cc: linux-hardening@vger.kernel.org
Reviewed-by: Kees Cook <keescook@chromium.org>
Signed-off-by: Justin Stitt <justinstitt@google.com>
Link: https://lore.kernel.org/r/20240319-strncpy-drivers-soc-qcom-cmd-db-c-v3-1-aeb5c5180c32@google.com
Signed-off-by: Bjorn Andersson <andersson@kernel.org>

Metadata:
Author: Justin Stitt <justinstitt@google.com>
Author Date: Tue Mar 19 21:19:59 2024 +0000
Committer: Bjorn Andersson <andersson@kernel.org>
Commit Date: Sun Apr 21 12:26:47 2024 -0500

Files Changed: 1
Lines Added: 1
Lines Removed: 6
Total Changes: 7
