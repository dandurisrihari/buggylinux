Commit Hash: bd1ce5f91f545730df4af492f774d9d32f5da3cb
Subject: HWPOISON: avoid grabbing the page count multiple times during madvise injection


Security Keywords:
- injection

Full commit message:
HWPOISON: avoid grabbing the page count multiple times during madvise injection

If page is double referenced in madvise_hwpoison() and __memory_failure(),
remove_mapping() will fail because it expects page_count=2. Fix it by
not grabbing extra page count in __memory_failure().

Signed-off-by: Wu Fengguang <fengguang.wu@intel.com>
Signed-off-by: Andi Kleen <ak@linux.intel.com>

Metadata:
Author: Wu Fengguang <fengguang.wu@intel.com>
Author Date: Wed Dec 16 12:19:57 2009 +0100
Committer: Andi Kleen <ak@linux.intel.com>
Commit Date: Wed Dec 16 12:19:57 2009 +0100

Files Changed: 2
Lines Added: 4
Lines Removed: 5
Total Changes: 9
