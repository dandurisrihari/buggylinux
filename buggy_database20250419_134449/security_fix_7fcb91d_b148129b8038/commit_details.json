{
  "hash": "7fcb91d94e897413c0345bb32ea11293f33efbb1",
  "hash_short": "7fcb91d9",
  "subject": "configs/hardening: Disable CONFIG_UBSAN_SIGNED_WRAP",
  "body": "kernel/configs/hardening.config turns on UBSAN for the bounds sanitizer,\nas that in combination with trapping can stop the exploitation of buffer\noverflows within the kernel. At the same time, hardening.config turns\noff every other UBSAN sanitizer because trapping means all UBSAN reports\nwill be fatal and the problems brought up by other sanitizers generally\ndo not have security implications.\n\nThe signed integer overflow sanitizer was recently added back to the\nkernel and it is default on with just CONFIG_UBSAN=y, meaning that it\ngets enabled when merging hardening.config into another configuration.\nWhile this sanitizer does have security implications like the array\nbounds sanitizer, work to clean up enough instances to allow this to run\nin production environments is still ramping up, which means regular\nusers and testers may be broken by these instances with\nCONFIG_UBSAN_TRAP=y. Disable CONFIG_UBSAN_SIGNED_WRAP in\nhardening.config to avoid this situation.\n\nFixes: 557f8c582a9b (\"ubsan: Reintroduce signed overflow sanitizer\")\nSigned-off-by: Nathan Chancellor <nathan@kernel.org>\nLink: https://lore.kernel.org/r/20240411-fix-ubsan-in-hardening-config-v1-2-e0177c80ffaa@kernel.org\nSigned-off-by: Kees Cook <keescook@chromium.org>",
  "full_message": "configs/hardening: Disable CONFIG_UBSAN_SIGNED_WRAP\n\nkernel/configs/hardening.config turns on UBSAN for the bounds sanitizer,\nas that in combination with trapping can stop the exploitation of buffer\noverflows within the kernel. At the same time, hardening.config turns\noff every other UBSAN sanitizer because trapping means all UBSAN reports\nwill be fatal and the problems brought up by other sanitizers generally\ndo not have security implications.\n\nThe signed integer overflow sanitizer was recently added back to the\nkernel and it is default on with just CONFIG_UBSAN=y, meaning that it\ngets enabled when merging hardening.config into another configuration.\nWhile this sanitizer does have security implications like the array\nbounds sanitizer, work to clean up enough instances to allow this to run\nin production environments is still ramping up, which means regular\nusers and testers may be broken by these instances with\nCONFIG_UBSAN_TRAP=y. Disable CONFIG_UBSAN_SIGNED_WRAP in\nhardening.config to avoid this situation.\n\nFixes: 557f8c582a9b (\"ubsan: Reintroduce signed overflow sanitizer\")\nSigned-off-by: Nathan Chancellor <nathan@kernel.org>\nLink: https://lore.kernel.org/r/20240411-fix-ubsan-in-hardening-config-v1-2-e0177c80ffaa@kernel.org\nSigned-off-by: Kees Cook <keescook@chromium.org>",
  "author_name": "Nathan Chancellor",
  "author_email": "nathan@kernel.org",
  "author_date": "Thu Apr 11 11:11:07 2024 -0700",
  "author_date_iso": "2024-04-11T11:11:07-07:00",
  "committer_name": "Kees Cook",
  "committer_email": "keescook@chromium.org",
  "committer_date": "Mon Apr 15 11:08:24 2024 -0700",
  "committer_date_iso": "2024-04-15T11:08:24-07:00",
  "files_changed": [
    "kernel/configs/hardening.config"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "kernel/configs/hardening.config",
      "insertions": 1,
      "deletions": 0
    }
  ],
  "total_insertions": 1,
  "total_deletions": 0,
  "total_changes": 1,
  "parents": [
    "e048d668f2969cf2b76e0fa21882a1b3bb323eca"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "kernel/configs/hardening.config",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}