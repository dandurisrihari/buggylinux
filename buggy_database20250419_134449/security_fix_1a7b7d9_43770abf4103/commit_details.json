{
  "hash": "1a7b7d9220819afe79d1ec5d759fe4349bd2453e",
  "hash_short": "1a7b7d92",
  "subject": "modules: Use vmalloc special flag",
  "body": "Use new flag for handling freeing of special permissioned memory in vmalloc\nand remove places where memory was set RW before freeing which is no longer\nneeded.\n\nSince freeing of VM_FLUSH_RESET_PERMS memory is not supported in an\ninterrupt by vmalloc, the freeing of init sections is moved to a work\nqueue. Instead of call_rcu it now uses synchronize_rcu() in the work\nqueue.\n\nLastly, there is now a WARN_ON in module_memfree since it should not be\ncalled in an interrupt with special memory as is required for\nVM_FLUSH_RESET_PERMS.\n\nSigned-off-by: Rick Edgecombe <rick.p.edgecombe@intel.com>\nSigned-off-by: Peter Zijlstra (Intel) <peterz@infradead.org>\nCc: <akpm@linux-foundation.org>\nCc: <ard.biesheuvel@linaro.org>\nCc: <deneen.t.dock@intel.com>\nCc: <kernel-hardening@lists.openwall.com>\nCc: <kristen@linux.intel.com>\nCc: <linux_dti@icloud.com>\nCc: <will.deacon@arm.com>\nCc: Andy Lutomirski <luto@kernel.org>\nCc: Borislav Petkov <bp@alien8.de>\nCc: Dave Hansen <dave.hansen@linux.intel.com>\nCc: H. Peter Anvin <hpa@zytor.com>\nCc: Jessica Yu <jeyu@kernel.org>\nCc: Linus Torvalds <torvalds@linux-foundation.org>\nCc: Nadav Amit <nadav.amit@gmail.com>\nCc: Rik van Riel <riel@surriel.com>\nCc: Steven Rostedt <rostedt@goodmis.org>\nCc: Thomas Gleixner <tglx@linutronix.de>\nLink: https://lkml.kernel.org/r/20190426001143.4983-18-namit@vmware.com\nSigned-off-by: Ingo Molnar <mingo@kernel.org>",
  "full_message": "modules: Use vmalloc special flag\n\nUse new flag for handling freeing of special permissioned memory in vmalloc\nand remove places where memory was set RW before freeing which is no longer\nneeded.\n\nSince freeing of VM_FLUSH_RESET_PERMS memory is not supported in an\ninterrupt by vmalloc, the freeing of init sections is moved to a work\nqueue. Instead of call_rcu it now uses synchronize_rcu() in the work\nqueue.\n\nLastly, there is now a WARN_ON in module_memfree since it should not be\ncalled in an interrupt with special memory as is required for\nVM_FLUSH_RESET_PERMS.\n\nSigned-off-by: Rick Edgecombe <rick.p.edgecombe@intel.com>\nSigned-off-by: Peter Zijlstra (Intel) <peterz@infradead.org>\nCc: <akpm@linux-foundation.org>\nCc: <ard.biesheuvel@linaro.org>\nCc: <deneen.t.dock@intel.com>\nCc: <kernel-hardening@lists.openwall.com>\nCc: <kristen@linux.intel.com>\nCc: <linux_dti@icloud.com>\nCc: <will.deacon@arm.com>\nCc: Andy Lutomirski <luto@kernel.org>\nCc: Borislav Petkov <bp@alien8.de>\nCc: Dave Hansen <dave.hansen@linux.intel.com>\nCc: H. Peter Anvin <hpa@zytor.com>\nCc: Jessica Yu <jeyu@kernel.org>\nCc: Linus Torvalds <torvalds@linux-foundation.org>\nCc: Nadav Amit <nadav.amit@gmail.com>\nCc: Rik van Riel <riel@surriel.com>\nCc: Steven Rostedt <rostedt@goodmis.org>\nCc: Thomas Gleixner <tglx@linutronix.de>\nLink: https://lkml.kernel.org/r/20190426001143.4983-18-namit@vmware.com\nSigned-off-by: Ingo Molnar <mingo@kernel.org>",
  "author_name": "Rick Edgecombe",
  "author_email": "rick.p.edgecombe@intel.com",
  "author_date": "Thu Apr 25 17:11:37 2019 -0700",
  "author_date_iso": "2019-04-25T17:11:37-07:00",
  "committer_name": "Ingo Molnar",
  "committer_email": "mingo@kernel.org",
  "committer_date": "Tue Apr 30 12:37:58 2019 +0200",
  "committer_date_iso": "2019-04-30T12:37:58+02:00",
  "files_changed": [
    "kernel/module.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "kernel/module.c",
      "insertions": 39,
      "deletions": 38
    }
  ],
  "total_insertions": 39,
  "total_deletions": 38,
  "total_changes": 77,
  "parents": [
    "868b104d7379e28013e9d48bdd2db25e0bdcf751"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.2",
    "v5.2-rc1",
    "v5.2-rc2",
    "v5.2-rc3",
    "v5.2-rc4",
    "v5.2-rc5",
    "v5.2-rc6",
    "v5.2-rc7",
    "v5.3",
    "v5.3-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "kernel/module.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}