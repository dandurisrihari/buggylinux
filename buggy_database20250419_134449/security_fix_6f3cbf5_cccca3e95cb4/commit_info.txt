Commit Hash: 6f3cbf552e0557a463ad421f07b2e873a608406f
Subject: [SCSI] scsi_debug: error processing


Security Keywords:
- injection

Full commit message:
[SCSI] scsi_debug: error processing

After discussions in the thread titled:
    [PATCH] scsi_debug: illegal blocking memory allocation
here is a patch containing the discussed fix and some other
fixes and additions. The patch is against lk 2.6.20-rc3 .
The version is bumped to 1.81 .

ChangeLog:
  - Change several GFP_KERNEL allocations to GFP_ATOMIC
    as they can be called from queuecommand() context
  - check above allocation returns and if out of memory
    report DID_REQUEUE in two cases, DID_NO_CONNECT in
    another, and fail slave configure() in another
  - add support for WRITE BUFFER command
  - add aborted_command error injection support
    (opts mask 0x10), similar mechanism to
    recovered_error injection.

Signed-off-by: Douglas Gilbert <dougg@torque.net>
Signed-off-by: James Bottomley <James.Bottomley@SteelEye.com>

Metadata:
Author: Douglas Gilbert <dougg@torque.net>
Author Date: Fri Jan 5 00:05:25 2007 -0500
Committer: James Bottomley <jejb@mulgrave.il.steeleye.com>
Commit Date: Sat Jan 13 13:52:37 2007 -0600

Files Changed: 1
Lines Added: 33
Lines Removed: 9
Total Changes: 42
