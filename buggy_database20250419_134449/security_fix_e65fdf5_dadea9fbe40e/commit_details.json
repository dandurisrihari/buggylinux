{
  "hash": "e65fdf530f55c5e387db14470a59a399faa29613",
  "hash_short": "e65fdf53",
  "subject": "nvmet: fix a memory leak",
  "body": "We need to also free the dhchap_ctrl_secret when releasing nvmet_host.\nkmemleak complaint:\n--\nunreferenced object 0xffff99b1cbca5140 (size 64):\n  comm \"check\", pid 4864, jiffies 4305092436 (age 2913.583s)\n  hex dump (first 32 bytes):\n    44 48 48 43 2d 31 3a 30 30 3a 65 36 2b 41 63 44  DHHC-1:00:e6+AcD\n    39 76 47 4d 52 57 59 78 67 54 47 44 51 59 47 78  9vGMRWYxgTGDQYGx\n  backtrace:\n    [<00000000c07d369d>] kstrdup+0x2e/0x60\n    [<000000001372171c>] 0xffffffffc0cceec6\n    [<0000000010dbf50b>] 0xffffffffc0cc6783\n    [<000000007465e93c>] configfs_write_iter+0xb1/0x120\n    [<0000000039c23f62>] vfs_write+0x2be/0x3c0\n    [<000000002da4351c>] ksys_write+0x5f/0xe0\n    [<00000000d5011e32>] do_syscall_64+0x38/0x90\n    [<00000000503870cf>] entry_SYSCALL_64_after_hwframe+0x63/0xcd\n\nFixes: db1312dd9548 (\"nvmet: implement basic In-Band Authentication\")\nSigned-off-by: Sagi Grimberg <sagi@grimberg.me>\nReviewed-by: Chaitanya Kulkarni <kch@nvidia.com>\nSigned-off-by: Christoph Hellwig <hch@lst.de>",
  "full_message": "nvmet: fix a memory leak\n\nWe need to also free the dhchap_ctrl_secret when releasing nvmet_host.\nkmemleak complaint:\n--\nunreferenced object 0xffff99b1cbca5140 (size 64):\n  comm \"check\", pid 4864, jiffies 4305092436 (age 2913.583s)\n  hex dump (first 32 bytes):\n    44 48 48 43 2d 31 3a 30 30 3a 65 36 2b 41 63 44  DHHC-1:00:e6+AcD\n    39 76 47 4d 52 57 59 78 67 54 47 44 51 59 47 78  9vGMRWYxgTGDQYGx\n  backtrace:\n    [<00000000c07d369d>] kstrdup+0x2e/0x60\n    [<000000001372171c>] 0xffffffffc0cceec6\n    [<0000000010dbf50b>] 0xffffffffc0cc6783\n    [<000000007465e93c>] configfs_write_iter+0xb1/0x120\n    [<0000000039c23f62>] vfs_write+0x2be/0x3c0\n    [<000000002da4351c>] ksys_write+0x5f/0xe0\n    [<00000000d5011e32>] do_syscall_64+0x38/0x90\n    [<00000000503870cf>] entry_SYSCALL_64_after_hwframe+0x63/0xcd\n\nFixes: db1312dd9548 (\"nvmet: implement basic In-Band Authentication\")\nSigned-off-by: Sagi Grimberg <sagi@grimberg.me>\nReviewed-by: Chaitanya Kulkarni <kch@nvidia.com>\nSigned-off-by: Christoph Hellwig <hch@lst.de>",
  "author_name": "Sagi Grimberg",
  "author_email": "sagi@grimberg.me",
  "author_date": "Wed Nov 9 05:29:57 2022 +0200",
  "author_date_iso": "2022-11-09T05:29:57+02:00",
  "committer_name": "Christoph Hellwig",
  "committer_email": "hch@lst.de",
  "committer_date": "Wed Nov 9 14:29:13 2022 +0100",
  "committer_date_iso": "2022-11-09T14:29:13+01:00",
  "files_changed": [
    "drivers/nvme/target/configfs.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/nvme/target/configfs.c",
      "insertions": 1,
      "deletions": 0
    }
  ],
  "total_insertions": 1,
  "total_deletions": 0,
  "total_changes": 1,
  "parents": [
    "becc4cac309dc867571f0080fde4426a6c2222e0"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "Authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/nvme/target/configfs.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}