{
  "hash": "e545f0d8a54a9594fe604d67d80ca6fddf72ca59",
  "hash_short": "e545f0d8",
  "subject": "thunderbolt: Allow clearing the key",
  "body": "If secure authentication of a devices fails, either because the device\nalready has another key uploaded, or there is some other error sending\nchallenge to the device, and the user only wants to approve the device\njust once (without a new key being uploaded to the device) the current\nimplementation does not allow this because the key cannot be cleared\nonce set even if we allow it to be changed.\n\nMake this scenario possible and allow clearing the key by writing\nempty string to the key sysfs file.\n\nSigned-off-by: Yehezkel Bernat <yehezkel.bernat@intel.com>\nAcked-by: Mika Westerberg <mika.westerberg@linux.intel.com>\nSigned-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>",
  "full_message": "thunderbolt: Allow clearing the key\n\nIf secure authentication of a devices fails, either because the device\nalready has another key uploaded, or there is some other error sending\nchallenge to the device, and the user only wants to approve the device\njust once (without a new key being uploaded to the device) the current\nimplementation does not allow this because the key cannot be cleared\nonce set even if we allow it to be changed.\n\nMake this scenario possible and allow clearing the key by writing\nempty string to the key sysfs file.\n\nSigned-off-by: Yehezkel Bernat <yehezkel.bernat@intel.com>\nAcked-by: Mika Westerberg <mika.westerberg@linux.intel.com>\nSigned-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>",
  "author_name": "Bernat, Yehezkel",
  "author_email": "yehezkel.bernat@intel.com",
  "author_date": "Tue Aug 15 08:19:20 2017 +0300",
  "author_date_iso": "2017-08-15T08:19:20+03:00",
  "committer_name": "Greg Kroah-Hartman",
  "committer_email": "gregkh@linuxfoundation.org",
  "committer_date": "Mon Aug 28 16:21:32 2017 +0200",
  "committer_date_iso": "2017-08-28T16:21:32+02:00",
  "files_changed": [
    "Documentation/ABI/testing/sysfs-bus-thunderbolt",
    "drivers/thunderbolt/switch.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "Documentation/ABI/testing/sysfs-bus-thunderbolt",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/thunderbolt/switch.c",
      "insertions": 11,
      "deletions": 4
    }
  ],
  "total_insertions": 13,
  "total_deletions": 4,
  "total_changes": 17,
  "parents": [
    "0956e41169222822d3557871fcd1d32e4fa7e934"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.14",
    "v4.14-rc1",
    "v4.14-rc2",
    "v4.14-rc3",
    "v4.14-rc4",
    "v4.14-rc5",
    "v4.14-rc6",
    "v4.14-rc7",
    "v4.14-rc8",
    "v4.15"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "Documentation/ABI/testing/sysfs-bus-thunderbolt",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/thunderbolt/switch.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}