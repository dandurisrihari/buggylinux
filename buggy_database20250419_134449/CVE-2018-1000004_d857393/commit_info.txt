Commit Hash: d85739367c6d56e475c281945c68fdb05ca74b4c
Subject: ALSA: seq: Don't allow resizing pool in use

CVE Identifiers:
- CVE-2018-1000004

Full commit message:
ALSA: seq: Don't allow resizing pool in use

This is a fix for a (sort of) fallout in the recent commit
d15d662e89fc ("ALSA: seq: Fix racy pool initializations") for
CVE-2018-1000004.
As the pool resize deletes the existing cells, it may lead to a race
when another thread is writing concurrently, eventually resulting a
UAF.

A simple workaround is not to allow the pool resizing when the pool is
in use.  It's an invalid behavior in anyway.

Fixes: d15d662e89fc ("ALSA: seq: Fix racy pool initializations")
Reported-by: 范龙飞 <long7573@126.com>
Reported-by: Nicolai Stange <nstange@suse.de>
Cc: <stable@vger.kernel.org>
Signed-off-by: Takashi Iwai <tiwai@suse.de>

Metadata:
Author: Takashi Iwai <tiwai@suse.de>
Author Date: Mon Mar 5 22:00:55 2018 +0100
Committer: Takashi Iwai <tiwai@suse.de>
Commit Date: Thu Mar 8 08:59:26 2018 +0100

Files Changed: 1
Lines Added: 3
Lines Removed: 0
Total Changes: 3
