Commit Hash: 04716e6621ff4abb422d64ba7b48718f52716a3e
Subject: nfsd: permit unauthenticated stat of export root


Security Keywords:
- authentication
- bypass

Full commit message:
nfsd: permit unauthenticated stat of export root

RFC 2623 section 2.3.2 permits the server to bypass gss authentication
checks for certain operations that a client may perform when mounting.
In the case of a client that doesn't have some form of credentials
available to it on boot, this allows it to perform the mount unattended.
(Presumably real file access won't be needed until a user with
credentials logs in.)

Being slightly more lenient allows lots of old clients to access
krb5-only exports, with the only loss being a small amount of
information leaked about the root directory of the export.

This affects only v2 and v3; v4 still requires authentication for all
access.

Thanks to Peter Staubach testing against a Solaris client, which
suggesting addition of v3 getattr, to the list, and to Trond for noting
that doing so exposes no additional information.

Signed-off-by: J. Bruce Fields <bfields@citi.umich.edu>
Cc: Peter Staubach <staubach@redhat.com>
Cc: Trond Myklebust <trond.myklebust@fys.uio.no>

Metadata:
Author: J. Bruce Fields <bfields@citi.umich.edu>
Author Date: Thu Aug 7 13:00:20 2008 -0400
Committer: J. Bruce Fields <bfields@citi.umich.edu>
Commit Date: Mon Sep 29 17:56:56 2008 -0400

Files Changed: 5
Lines Added: 33
Lines Removed: 18
Total Changes: 51
