{
  "hash": "85f4896123d0299128f2c95cc40f3b8b01d4b0f6",
  "hash_short": "85f48961",
  "subject": "mutex: Fix w/w mutex deadlock injection",
  "body": "The check needs to be for > 1, because ctx->acquired is already incremented.\nThis will prevent ww_mutex_lock_slow from returning -EDEADLK and not locking\nthe mutex. It caused a lot of false gpu lockups on radeon with\nCONFIG_DEBUG_WW_MUTEX_SLOWPATH=y because a function that shouldn't be able\nto return -EDEADLK did.\n\nSigned-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>\nSigned-off-by: Peter Zijlstra <peterz@infradead.org>\nCc: Alex Deucher <alexander.deucher@amd.com>\nCc: Linus Torvalds <torvalds@linux-foundation.org>\nCc: Andrew Morton <akpm@linux-foundation.org>\nCc: Thomas Gleixner <tglx@linutronix.de>\nLink: http://lkml.kernel.org/r/51F775B5.201@canonical.com\nSigned-off-by: Ingo Molnar <mingo@kernel.org>",
  "full_message": "mutex: Fix w/w mutex deadlock injection\n\nThe check needs to be for > 1, because ctx->acquired is already incremented.\nThis will prevent ww_mutex_lock_slow from returning -EDEADLK and not locking\nthe mutex. It caused a lot of false gpu lockups on radeon with\nCONFIG_DEBUG_WW_MUTEX_SLOWPATH=y because a function that shouldn't be able\nto return -EDEADLK did.\n\nSigned-off-by: Maarten Lankhorst <maarten.lankhorst@canonical.com>\nSigned-off-by: Peter Zijlstra <peterz@infradead.org>\nCc: Alex Deucher <alexander.deucher@amd.com>\nCc: Linus Torvalds <torvalds@linux-foundation.org>\nCc: Andrew Morton <akpm@linux-foundation.org>\nCc: Thomas Gleixner <tglx@linutronix.de>\nLink: http://lkml.kernel.org/r/51F775B5.201@canonical.com\nSigned-off-by: Ingo Molnar <mingo@kernel.org>",
  "author_name": "Maarten Lankhorst",
  "author_email": "maarten.lankhorst@canonical.com",
  "author_date": "Tue Jul 30 10:13:41 2013 +0200",
  "author_date_iso": "2013-07-30T10:13:41+02:00",
  "committer_name": "Ingo Molnar",
  "committer_email": "mingo@kernel.org",
  "committer_date": "Tue Jul 30 22:16:40 2013 +0200",
  "committer_date_iso": "2013-07-30T22:16:40+02:00",
  "files_changed": [
    "kernel/mutex.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "kernel/mutex.c",
      "insertions": 2,
      "deletions": 2
    }
  ],
  "total_insertions": 2,
  "total_deletions": 2,
  "total_changes": 4,
  "parents": [
    "36f571e9ed0419e73d127e18aa8992ced867268c"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v3.11",
    "v3.11-rc6",
    "v3.11-rc7",
    "v3.12",
    "v3.12-rc1",
    "v3.12-rc2",
    "v3.12-rc3",
    "v3.12-rc4",
    "v3.12-rc5",
    "v3.12-rc6"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "kernel/mutex.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}