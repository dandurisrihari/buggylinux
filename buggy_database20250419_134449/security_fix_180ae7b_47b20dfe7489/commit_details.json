{
  "hash": "180ae7b1182344ca617d8b5200306b02a6b5075d",
  "hash_short": "180ae7b1",
  "subject": "KVM: arm/arm64: Enable irqchip routing",
  "body": "This patch adds compilation and link against irqchip.\n\nMain motivation behind using irqchip code is to enable MSI\nrouting code. In the future irqchip routing may also be useful\nwhen targeting multiple irqchips.\n\nRouting standard callbacks now are implemented in vgic-irqfd:\n- kvm_set_routing_entry\n- kvm_set_irq\n- kvm_set_msi\n\nThey only are supported with new_vgic code.\n\nBoth HAVE_KVM_IRQCHIP and HAVE_KVM_IRQ_ROUTING are defined.\nKVM_CAP_IRQ_ROUTING is advertised and KVM_SET_GSI_ROUTING is allowed.\n\nSo from now on IRQCHIP routing is enabled and a routing table entry\nmust exist for irqfd injection to succeed for a given SPI. This patch\nbuilds a default flat irqchip routing table (gsi=irqchip.pin) covering\nall the VGIC SPI indexes. This routing table is overwritten by the\nfirst first user-space call to KVM_SET_GSI_ROUTING ioctl.\n\nMSI routing setup is not yet allowed.\n\nSigned-off-by: Eric Auger <eric.auger@redhat.com>\nSigned-off-by: Marc Zyngier <marc.zyngier@arm.com>",
  "full_message": "KVM: arm/arm64: Enable irqchip routing\n\nThis patch adds compilation and link against irqchip.\n\nMain motivation behind using irqchip code is to enable MSI\nrouting code. In the future irqchip routing may also be useful\nwhen targeting multiple irqchips.\n\nRouting standard callbacks now are implemented in vgic-irqfd:\n- kvm_set_routing_entry\n- kvm_set_irq\n- kvm_set_msi\n\nThey only are supported with new_vgic code.\n\nBoth HAVE_KVM_IRQCHIP and HAVE_KVM_IRQ_ROUTING are defined.\nKVM_CAP_IRQ_ROUTING is advertised and KVM_SET_GSI_ROUTING is allowed.\n\nSo from now on IRQCHIP routing is enabled and a routing table entry\nmust exist for irqfd injection to succeed for a given SPI. This patch\nbuilds a default flat irqchip routing table (gsi=irqchip.pin) covering\nall the VGIC SPI indexes. This routing table is overwritten by the\nfirst first user-space call to KVM_SET_GSI_ROUTING ioctl.\n\nMSI routing setup is not yet allowed.\n\nSigned-off-by: Eric Auger <eric.auger@redhat.com>\nSigned-off-by: Marc Zyngier <marc.zyngier@arm.com>",
  "author_name": "Eric Auger",
  "author_email": "eric.auger@redhat.com",
  "author_date": "Fri Jul 22 16:20:41 2016 +0000",
  "author_date_iso": "2016-07-22T16:20:41+00:00",
  "committer_name": "Marc Zyngier",
  "committer_email": "marc.zyngier@arm.com",
  "committer_date": "Fri Jul 22 18:52:01 2016 +0100",
  "committer_date_iso": "2016-07-22T18:52:01+01:00",
  "files_changed": [
    "Documentation/virtual/kvm/api.txt",
    "arch/arm/kvm/Kconfig",
    "arch/arm/kvm/Makefile",
    "arch/arm/kvm/irq.h",
    "arch/arm64/kvm/Kconfig",
    "arch/arm64/kvm/Makefile",
    "arch/arm64/kvm/irq.h",
    "include/kvm/arm_vgic.h",
    "virt/kvm/arm/vgic/vgic-init.c",
    "virt/kvm/arm/vgic/vgic-irqfd.c",
    "virt/kvm/arm/vgic/vgic.c"
  ],
  "files_changed_count": 11,
  "stats": [
    {
      "file": "Documentation/virtual/kvm/api.txt",
      "insertions": 8,
      "deletions": 4
    },
    {
      "file": "arch/arm/kvm/Kconfig",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/arm/kvm/Makefile",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm/kvm/irq.h",
      "insertions": 19,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/Kconfig",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/Makefile",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/irq.h",
      "insertions": 19,
      "deletions": 0
    },
    {
      "file": "include/kvm/arm_vgic.h",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-init.c",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-irqfd.c",
      "insertions": 82,
      "deletions": 18
    },
    {
      "file": "virt/kvm/arm/vgic/vgic.c",
      "insertions": 0,
      "deletions": 7
    }
  ],
  "total_insertions": 145,
  "total_deletions": 29,
  "total_changes": 174,
  "parents": [
    "d9565a7399d665fa7313122504778cb3d5ef3e19"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/arm/kvm/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm/kvm/Makefile",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/Makefile",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm/kvm/irq.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/irq.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/kvm/arm_vgic.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "Documentation/virtual/kvm/api.txt",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-init.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/arm/vgic/vgic.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-irqfd.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}