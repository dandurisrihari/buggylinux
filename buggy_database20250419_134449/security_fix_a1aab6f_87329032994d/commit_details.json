{
  "hash": "a1aab6f3d295f078c008893ee7fa2c011626c46f",
  "hash_short": "a1aab6f3",
  "subject": "Merge branch 'x86-asm-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip",
  "body": "Pull x86 asm updates from Ingo Molnar:\n \"Most of the changes relate to Peter Zijlstra's cleanup of ptregs\n  handling, in particular the i386 part is now much simplified and\n  standardized - no more partial ptregs stack frames via the esp/ss\n  oddity. This simplifies ftrace, kprobes, the unwinder, ptrace, kdump\n  and kgdb.\n\n  There's also a CR4 hardening enhancements by Kees Cook, to make the\n  generic platform functions such as native_write_cr4() less useful as\n  ROP gadgets that disable SMEP/SMAP. Also protect the WP bit of CR0\n  against similar attacks.\n\n  The rest is smaller cleanups/fixes\"\n\n* 'x86-asm-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip:\n  x86/alternatives: Add int3_emulate_call() selftest\n  x86/stackframe/32: Allow int3_emulate_push()\n  x86/stackframe/32: Provide consistent pt_regs\n  x86/stackframe, x86/ftrace: Add pt_regs frame annotations\n  x86/stackframe, x86/kprobes: Fix frame pointer annotations\n  x86/stackframe: Move ENCODE_FRAME_POINTER to asm/frame.h\n  x86/entry/32: Clean up return from interrupt preemption path\n  x86/asm: Pin sensitive CR0 bits\n  x86/asm: Pin sensitive CR4 bits\n  Documentation/x86: Fix path to entry_32.S\n  x86/asm: Remove unused TASK_TI_flags from asm-offsets.c",
  "full_message": "Merge branch 'x86-asm-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip\n\nPull x86 asm updates from Ingo Molnar:\n \"Most of the changes relate to Peter Zijlstra's cleanup of ptregs\n  handling, in particular the i386 part is now much simplified and\n  standardized - no more partial ptregs stack frames via the esp/ss\n  oddity. This simplifies ftrace, kprobes, the unwinder, ptrace, kdump\n  and kgdb.\n\n  There's also a CR4 hardening enhancements by Kees Cook, to make the\n  generic platform functions such as native_write_cr4() less useful as\n  ROP gadgets that disable SMEP/SMAP. Also protect the WP bit of CR0\n  against similar attacks.\n\n  The rest is smaller cleanups/fixes\"\n\n* 'x86-asm-for-linus' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip:\n  x86/alternatives: Add int3_emulate_call() selftest\n  x86/stackframe/32: Allow int3_emulate_push()\n  x86/stackframe/32: Provide consistent pt_regs\n  x86/stackframe, x86/ftrace: Add pt_regs frame annotations\n  x86/stackframe, x86/kprobes: Fix frame pointer annotations\n  x86/stackframe: Move ENCODE_FRAME_POINTER to asm/frame.h\n  x86/entry/32: Clean up return from interrupt preemption path\n  x86/asm: Pin sensitive CR0 bits\n  x86/asm: Pin sensitive CR4 bits\n  Documentation/x86: Fix path to entry_32.S\n  x86/asm: Remove unused TASK_TI_flags from asm-offsets.c",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Mon Jul 8 16:59:34 2019 -0700",
  "author_date_iso": "2019-07-08T16:59:34-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Mon Jul 8 16:59:34 2019 -0700",
  "committer_date_iso": "2019-07-08T16:59:34-07:00",
  "files_changed": [
    "arch/x86/entry/entry_32.S",
    "arch/x86/include/asm/text-patching.h",
    "arch/x86/kernel/alternative.c",
    "arch/x86/kernel/cpu/common.c",
    "arch/x86/kernel/ftrace.c",
    "arch/x86/kernel/ptrace.c",
    "arch/x86/kernel/time.c",
    "arch/x86/kernel/unwind_orc.c"
  ],
  "files_changed_count": 8,
  "stats": [
    {
      "file": "Documentation/x86/exception-tables.rst",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/x86/entry/calling.h",
      "insertions": 0,
      "deletions": 15
    },
    {
      "file": "arch/x86/entry/entry_32.S",
      "insertions": 105,
      "deletions": 40
    },
    {
      "file": "arch/x86/include/asm/frame.h",
      "insertions": 49,
      "deletions": 0
    },
    {
      "file": "arch/x86/include/asm/kexec.h",
      "insertions": 0,
      "deletions": 17
    },
    {
      "file": "arch/x86/include/asm/ptrace.h",
      "insertions": 2,
      "deletions": 15
    },
    {
      "file": "arch/x86/include/asm/special_insns.h",
      "insertions": 35,
      "deletions": 2
    },
    {
      "file": "arch/x86/include/asm/stacktrace.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/x86/include/asm/text-patching.h",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "arch/x86/kernel/alternative.c",
      "insertions": 77,
      "deletions": 4
    },
    {
      "file": "arch/x86/kernel/asm-offsets.c",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/x86/kernel/cpu/common.c",
      "insertions": 20,
      "deletions": 0
    },
    {
      "file": "arch/x86/kernel/crash.c",
      "insertions": 0,
      "deletions": 8
    },
    {
      "file": "arch/x86/kernel/ftrace.c",
      "insertions": 0,
      "deletions": 7
    },
    {
      "file": "arch/x86/kernel/ftrace_32.S",
      "insertions": 45,
      "deletions": 33
    },
    {
      "file": "arch/x86/kernel/ftrace_64.S",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/x86/kernel/kgdb.c",
      "insertions": 0,
      "deletions": 8
    },
    {
      "file": "arch/x86/kernel/kprobes/common.h",
      "insertions": 14,
      "deletions": 14
    },
    {
      "file": "arch/x86/kernel/kprobes/core.c",
      "insertions": 12,
      "deletions": 17
    },
    {
      "file": "arch/x86/kernel/kprobes/opt.c",
      "insertions": 12,
      "deletions": 8
    },
    {
      "file": "arch/x86/kernel/process_32.c",
      "insertions": 5,
      "deletions": 11
    },
    {
      "file": "arch/x86/kernel/ptrace.c",
      "insertions": 0,
      "deletions": 29
    },
    {
      "file": "arch/x86/kernel/smpboot.c",
      "insertions": 7,
      "deletions": 1
    },
    {
      "file": "arch/x86/kernel/time.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "arch/x86/kernel/unwind_frame.c",
      "insertions": 4,
      "deletions": 28
    },
    {
      "file": "arch/x86/kernel/unwind_orc.c",
      "insertions": 1,
      "deletions": 1
    }
  ],
  "total_insertions": 394,
  "total_deletions": 265,
  "total_changes": 659,
  "parents": [
    "dad1c12ed831a7a89cc01e5582cd0b81a4be7f19",
    "7457c0da024b181a9143988d740001f9bc98698d"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.3",
    "v5.3-rc1",
    "v5.3-rc2",
    "v5.3-rc3",
    "v5.3-rc4",
    "v5.3-rc5",
    "v5.3-rc6",
    "v5.3-rc7",
    "v5.3-rc8",
    "v5.4"
  ],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/include/asm/text-patching.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/time.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/ptrace.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/alternative.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/cpu/common.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/unwind_orc.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/ftrace.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/entry/entry_32.S",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}