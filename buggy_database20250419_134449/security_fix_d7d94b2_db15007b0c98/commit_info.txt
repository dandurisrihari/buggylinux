Commit Hash: d7d94b2612f5dc25d61dc7bf58aafe7b31f40191
Subject: net: microchip: sparx5: fix PTP init/deinit not checking all ports


Security Keywords:
- injection

Full commit message:
net: microchip: sparx5: fix PTP init/deinit not checking all ports

Check all ports instead of just port_count ports. PTP init was only
checking ports 0 to port_count. If the hardware ports are not mapped
starting from 0 then they would be missed, e.g. if only ports 20-30 were
mapped it would attempt to init ports 0-10, resulting in NULL pointers
when attempting to timestamp. Now it will init all mapped ports.

Fixes: 70dfe25cd866 ("net: sparx5: Update extraction/injection for timestamping")
Signed-off-by: Casper Andersson <casper.casan@gmail.com>
Reviewed-by: Horatiu Vultur <horatiu.vultur@microchip.com>
Signed-off-by: David S. Miller <davem@davemloft.net>

Metadata:
Author: Casper Andersson <casper.casan@gmail.com>
Author Date: Fri Feb 3 09:55:57 2023 +0100
Committer: David S. Miller <davem@davemloft.net>
Commit Date: Mon Feb 6 09:26:04 2023 +0000

Files Changed: 1
Lines Added: 2
Lines Removed: 2
Total Changes: 4
