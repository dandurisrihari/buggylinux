Commit Hash: bb6d73d9add68ad270888db327514384dfa44958
Subject: RDMA/irdma: Prevent zero-length STAG registration

CVE Identifiers:
- CVE-2023-25775

Full commit message:
RDMA/irdma: Prevent zero-length STAG registration

Currently irdma allows zero-length STAGs to be programmed in HW during
the kernel mode fast register flow. Zero-length MR or STAG registration
disable HW memory length checks.

Improve gaps in bounds checking in irdma by preventing zero-length STAG or
MR registrations except if the IB_PD_UNSAFE_GLOBAL_RKEY is set.

This addresses the disclosure CVE-2023-25775.

Fixes: b48c24c2d710 ("RDMA/irdma: Implement device supported verb APIs")
Signed-off-by: Christopher Bednarz <christopher.n.bednarz@intel.com>
Signed-off-by: Shiraz Saleem <shiraz.saleem@intel.com>
Link: https://lore.kernel.org/r/20230818144838.1758-1-shiraz.saleem@intel.com
Signed-off-by: Leon Romanovsky <leon@kernel.org>

Metadata:
Author: Christopher Bednarz <christopher.n.bednarz@intel.com>
Author Date: Fri Aug 18 09:48:38 2023 -0500
Committer: Leon Romanovsky <leon@kernel.org>
Commit Date: Sat Aug 19 19:28:17 2023 +0300

Files Changed: 3
Lines Added: 16
Lines Removed: 2
Total Changes: 18
