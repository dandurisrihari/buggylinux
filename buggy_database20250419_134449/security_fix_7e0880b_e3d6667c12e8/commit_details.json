{
  "hash": "7e0880b9fbbe7d21e29347020bef0b7329cb0e9d",
  "hash_short": "7e0880b9",
  "subject": "crypto: caam - add Derived Key Protocol (DKP) support",
  "body": "Offload split key generation in CAAM engine, using DKP.\nDKP is supported starting with Era 6.\n\nNote that the way assoclen is transmitted from the job descriptor\nto the shared descriptor changes - DPOVRD register is used instead\nof MATH3 (where available), since DKP protocol thrashes the MATH\nregisters.\n\nThe replacement of MDHA split key generation with DKP has the side\neffect of the crypto engine writing the authentication key, and thus\nthe DMA mapping direction for the buffer holding the key has to change\nfrom DMA_TO_DEVICE to DMA_BIDIRECTIONAL.\nThere are two cases:\n-key is inlined in descriptor - descriptor buffer mapping changes\n-key is referenced - key buffer mapping changes\n\nSigned-off-by: Horia Geant\u0103 <horia.geanta@nxp.com>\nSigned-off-by: Herbert Xu <herbert@gondor.apana.org.au>",
  "full_message": "crypto: caam - add Derived Key Protocol (DKP) support\n\nOffload split key generation in CAAM engine, using DKP.\nDKP is supported starting with Era 6.\n\nNote that the way assoclen is transmitted from the job descriptor\nto the shared descriptor changes - DPOVRD register is used instead\nof MATH3 (where available), since DKP protocol thrashes the MATH\nregisters.\n\nThe replacement of MDHA split key generation with DKP has the side\neffect of the crypto engine writing the authentication key, and thus\nthe DMA mapping direction for the buffer holding the key has to change\nfrom DMA_TO_DEVICE to DMA_BIDIRECTIONAL.\nThere are two cases:\n-key is inlined in descriptor - descriptor buffer mapping changes\n-key is referenced - key buffer mapping changes\n\nSigned-off-by: Horia Geant\u0103 <horia.geanta@nxp.com>\nSigned-off-by: Herbert Xu <herbert@gondor.apana.org.au>",
  "author_name": "Horia Geant\u0103",
  "author_email": "horia.geanta@nxp.com",
  "author_date": "Tue Dec 19 12:16:07 2017 +0200",
  "author_date_iso": "2017-12-19T12:16:07+02:00",
  "committer_name": "Herbert Xu",
  "committer_email": "herbert@gondor.apana.org.au",
  "committer_date": "Thu Dec 28 17:56:48 2017 +1100",
  "committer_date_iso": "2017-12-28T17:56:48+11:00",
  "files_changed": [
    "drivers/crypto/caam/caamalg.c",
    "drivers/crypto/caam/caamalg_desc.c",
    "drivers/crypto/caam/caamalg_desc.h",
    "drivers/crypto/caam/caamalg_qi.c",
    "drivers/crypto/caam/caamhash.c",
    "drivers/crypto/caam/desc.h",
    "drivers/crypto/caam/desc_constr.h",
    "drivers/crypto/caam/key_gen.c",
    "drivers/crypto/caam/key_gen.h"
  ],
  "files_changed_count": 9,
  "stats": [
    {
      "file": "drivers/crypto/caam/caamalg.c",
      "insertions": 79,
      "deletions": 33
    },
    {
      "file": "drivers/crypto/caam/caamalg_desc.c",
      "insertions": 107,
      "deletions": 69
    },
    {
      "file": "drivers/crypto/caam/caamalg_desc.h",
      "insertions": 5,
      "deletions": 5
    },
    {
      "file": "drivers/crypto/caam/caamalg_qi.c",
      "insertions": 43,
      "deletions": 11
    },
    {
      "file": "drivers/crypto/caam/caamhash.c",
      "insertions": 50,
      "deletions": 23
    },
    {
      "file": "drivers/crypto/caam/desc.h",
      "insertions": 29,
      "deletions": 0
    },
    {
      "file": "drivers/crypto/caam/desc_constr.h",
      "insertions": 41,
      "deletions": 0
    },
    {
      "file": "drivers/crypto/caam/key_gen.c",
      "insertions": 0,
      "deletions": 30
    },
    {
      "file": "drivers/crypto/caam/key_gen.h",
      "insertions": 30,
      "deletions": 0
    }
  ],
  "total_insertions": 384,
  "total_deletions": 171,
  "total_changes": 555,
  "parents": [
    "9fe712df08ea805868789bb6800f2226f5fd5285"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.16",
    "v4.16-rc1",
    "v4.16-rc2",
    "v4.16-rc3",
    "v4.16-rc4",
    "v4.16-rc5",
    "v4.16-rc6",
    "v4.16-rc7",
    "v4.17",
    "v4.17-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/crypto/caam/caamalg_desc.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/caam/caamalg_qi.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/caam/caamalg_desc.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/caam/caamalg.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/caam/key_gen.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/caam/desc_constr.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/caam/caamhash.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/caam/key_gen.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/caam/desc.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}