Files changed: 20
Insertions: 8185
Deletions: 5753
Total changes: 13938

File-specific changes:
MAINTAINERS: +1 -1
drivers/gpu/drm/display/drm_dp_dual_mode_helper.c: +2 -2
drivers/gpu/drm/i915/Makefile: +2 -0
drivers/gpu/drm/i915/display/dvo_ns2501.c: +1 -1
drivers/gpu/drm/i915/display/g4x_dp.c: +53 -59
drivers/gpu/drm/i915/display/g4x_dp.h: +7 -7
drivers/gpu/drm/i915/display/g4x_hdmi.c: +83 -87
drivers/gpu/drm/i915/display/g4x_hdmi.h: +3 -3
drivers/gpu/drm/i915/display/hsw_ips.c: +12 -14
drivers/gpu/drm/i915/display/i9xx_plane.c: +220 -152
drivers/gpu/drm/i915/display/i9xx_plane.h: +7 -3
drivers/gpu/drm/i915/display/i9xx_wm.c: +3 -3
drivers/gpu/drm/i915/display/icl_dsi.c: +15 -21
drivers/gpu/drm/i915/display/intel_atomic_plane.c: +337 -15
drivers/gpu/drm/i915/display/intel_atomic_plane.h: +7 -0
drivers/gpu/drm/i915/display/intel_audio.c: +250 -248
drivers/gpu/drm/i915/display/intel_audio.h: +7 -7
drivers/gpu/drm/i915/display/intel_backlight.c: +261 -235
drivers/gpu/drm/i915/display/intel_cdclk.c: +75 -99
drivers/gpu/drm/i915/display/intel_cmtg.c: +189 -0
drivers/gpu/drm/i915/display/intel_cmtg.h: +13 -0
drivers/gpu/drm/i915/display/intel_cmtg_regs.h: +21 -0
drivers/gpu/drm/i915/display/intel_color.c: +8 -3
drivers/gpu/drm/i915/display/intel_combo_phy.c: +89 -91
drivers/gpu/drm/i915/display/intel_combo_phy.h: +4 -4
drivers/gpu/drm/i915/display/intel_connector.c: +42 -0
drivers/gpu/drm/i915/display/intel_connector.h: +2 -0
drivers/gpu/drm/i915/display/intel_crt.c: +19 -24
drivers/gpu/drm/i915/display/intel_crtc.c: +43 -35
drivers/gpu/drm/i915/display/intel_crtc.h: +3 -4
drivers/gpu/drm/i915/display/intel_crtc_state_dump.c: +19 -9
drivers/gpu/drm/i915/display/intel_cursor.c: +124 -88
drivers/gpu/drm/i915/display/intel_cursor.h: +2 -2
drivers/gpu/drm/i915/display/intel_cx0_phy.c: +193 -104
drivers/gpu/drm/i915/display/intel_cx0_phy.h: +1 -1
drivers/gpu/drm/i915/display/intel_cx0_phy_regs.h: +32 -1
drivers/gpu/drm/i915/display/intel_ddi.c: +230 -254
drivers/gpu/drm/i915/display/intel_ddi_buf_trans.c: +33 -25
drivers/gpu/drm/i915/display/intel_display.c: +287 -617
drivers/gpu/drm/i915/display/intel_display.h: +7 -26
drivers/gpu/drm/i915/display/intel_display_debugfs.c: +99 -164
drivers/gpu/drm/i915/display/intel_display_device.c: +13 -0
drivers/gpu/drm/i915/display/intel_display_device.h: +13 -0
drivers/gpu/drm/i915/display/intel_display_driver.c: +7 -9
drivers/gpu/drm/i915/display/intel_display_irq.c: +613 -176
drivers/gpu/drm/i915/display/intel_display_irq.h: +6 -2
drivers/gpu/drm/i915/display/intel_display_params.c: +1 -1
drivers/gpu/drm/i915/display/intel_display_power.c: +53 -76
drivers/gpu/drm/i915/display/intel_display_power.h: +35 -36
drivers/gpu/drm/i915/display/intel_display_power_well.c: +7 -12
drivers/gpu/drm/i915/display/intel_display_power_well.h: +2 -2
drivers/gpu/drm/i915/display/intel_display_reset.c: +2 -0
drivers/gpu/drm/i915/display/intel_display_trace.h: +129 -21
drivers/gpu/drm/i915/display/intel_display_types.h: +21 -24
drivers/gpu/drm/i915/display/intel_dkl_phy.c: +27 -27
drivers/gpu/drm/i915/display/intel_dkl_phy.h: +5 -4
drivers/gpu/drm/i915/display/intel_dmc.c: +2 -5
drivers/gpu/drm/i915/display/intel_dmc_wl.c: +63 -15
drivers/gpu/drm/i915/display/intel_dp.c: +133 -185
drivers/gpu/drm/i915/display/intel_dp.h: +2 -3
drivers/gpu/drm/i915/display/intel_dp_aux.c: +2 -3
drivers/gpu/drm/i915/display/intel_dp_aux_backlight.c: +140 -41
drivers/gpu/drm/i915/display/intel_dp_link_training.c: +2 -2
drivers/gpu/drm/i915/display/intel_dp_mst.c: +210 -181
drivers/gpu/drm/i915/display/intel_dp_mst.h: +1 -2
drivers/gpu/drm/i915/display/intel_dp_test.c: +2 -2
drivers/gpu/drm/i915/display/intel_dp_tunnel.c: +1 -1
drivers/gpu/drm/i915/display/intel_dp_tunnel.h: +3 -2
drivers/gpu/drm/i915/display/intel_dpio_phy.c: +35 -1
drivers/gpu/drm/i915/display/intel_dpio_phy.h: +6 -0
drivers/gpu/drm/i915/display/intel_dpll.c: +21 -20
drivers/gpu/drm/i915/display/intel_dpll.h: +3 -2
drivers/gpu/drm/i915/display/intel_dpll_mgr.c: +524 -520
drivers/gpu/drm/i915/display/intel_dpll_mgr.h: +14 -15
drivers/gpu/drm/i915/display/intel_dsb.c: +89 -37
drivers/gpu/drm/i915/display/intel_dsb.h: +3 -0
drivers/gpu/drm/i915/display/intel_dsi.c: +4 -4
drivers/gpu/drm/i915/display/intel_dsi_vbt.c: +1 -1
drivers/gpu/drm/i915/display/intel_dvo.c: +4 -4
drivers/gpu/drm/i915/display/intel_dvo_dev.h: +1 -1
drivers/gpu/drm/i915/display/intel_fb.c: +278 -132
drivers/gpu/drm/i915/display/intel_fb.h: +23 -8
drivers/gpu/drm/i915/display/intel_fb_bo.c: +10 -8
drivers/gpu/drm/i915/display/intel_fb_bo.h: +4 -4
drivers/gpu/drm/i915/display/intel_fb_pin.c: +13 -10
drivers/gpu/drm/i915/display/intel_fb_pin.h: +3 -1
drivers/gpu/drm/i915/display/intel_fbdev.c: +8 -4
drivers/gpu/drm/i915/display/intel_fbdev.h: +8 -0
drivers/gpu/drm/i915/display/intel_fdi.c: +10 -11
drivers/gpu/drm/i915/display/intel_fdi.h: +4 -3
drivers/gpu/drm/i915/display/intel_fifo_underrun.c: +90 -93
drivers/gpu/drm/i915/display/intel_fifo_underrun.h: +9 -9
drivers/gpu/drm/i915/display/intel_frontbuffer.c: +1 -1
drivers/gpu/drm/i915/display/intel_gmbus.c: +4 -6
drivers/gpu/drm/i915/display/intel_hdcp.c: +180 -19
drivers/gpu/drm/i915/display/intel_hdcp.h: +5 -6
drivers/gpu/drm/i915/display/intel_hdmi.c: +6 -21
drivers/gpu/drm/i915/display/intel_hdmi.h: +9 -0
drivers/gpu/drm/i915/display/intel_hotplug.c: +23 -8
drivers/gpu/drm/i915/display/intel_hotplug.h: +2 -2
drivers/gpu/drm/i915/display/intel_hotplug_irq.c: +1 -1
drivers/gpu/drm/i915/display/intel_link_bw.c: +1 -1
drivers/gpu/drm/i915/display/intel_lpe_audio.c: +60 -58
drivers/gpu/drm/i915/display/intel_lpe_audio.h: +9 -9
drivers/gpu/drm/i915/display/intel_lspcon.c: +24 -6
drivers/gpu/drm/i915/display/intel_lspcon.h: +9 -16
drivers/gpu/drm/i915/display/intel_lvds.c: +10 -8
drivers/gpu/drm/i915/display/intel_modeset_setup.c: +11 -8
drivers/gpu/drm/i915/display/intel_overlay.c: +14 -8
drivers/gpu/drm/i915/display/intel_pch_display.c: +26 -23
drivers/gpu/drm/i915/display/intel_pch_refclk.c: +17 -17
drivers/gpu/drm/i915/display/intel_pipe_crc.c: +3 -2
drivers/gpu/drm/i915/display/intel_pmdemand.c: +1 -1
drivers/gpu/drm/i915/display/intel_pps.c: +14 -20
drivers/gpu/drm/i915/display/intel_psr.c: +125 -105
drivers/gpu/drm/i915/display/intel_psr.h: +7 -3
drivers/gpu/drm/i915/display/intel_psr_regs.h: +10 -0
drivers/gpu/drm/i915/display/intel_sdvo.c: +150 -150
drivers/gpu/drm/i915/display/intel_sdvo.h: +5 -5
drivers/gpu/drm/i915/display/intel_sdvo_regs.h: +1 -1
drivers/gpu/drm/i915/display/intel_snps_hdmi_pll.c: +364 -0
drivers/gpu/drm/i915/display/intel_snps_hdmi_pll.h: +17 -0
drivers/gpu/drm/i915/display/intel_snps_phy.c: +10 -29
drivers/gpu/drm/i915/display/intel_snps_phy.h: +0 -1
drivers/gpu/drm/i915/display/intel_sprite.c: +99 -79
drivers/gpu/drm/i915/display/intel_sprite.h: +3 -3
drivers/gpu/drm/i915/display/intel_tc.c: +48 -42
drivers/gpu/drm/i915/display/intel_tv.c: +2 -4
drivers/gpu/drm/i915/display/intel_vblank.c: +62 -24
drivers/gpu/drm/i915/display/intel_vblank.h: +6 -0
drivers/gpu/drm/i915/display/intel_vdsc.c: +34 -33
drivers/gpu/drm/i915/display/intel_vga.c: +2 -3
drivers/gpu/drm/i915/display/intel_vrr.c: +140 -30
drivers/gpu/drm/i915/display/intel_vrr.h: +8 -1
drivers/gpu/drm/i915/display/skl_scaler.c: +199 -131
drivers/gpu/drm/i915/display/skl_universal_plane.c: +411 -239
drivers/gpu/drm/i915/display/skl_universal_plane.h: +10 -4
drivers/gpu/drm/i915/display/skl_watermark.c: +98 -15
drivers/gpu/drm/i915/display/skl_watermark.h: +2 -1
drivers/gpu/drm/i915/display/vlv_dsi.c: +7 -7
drivers/gpu/drm/i915/display/vlv_dsi_pll.c: +7 -7
drivers/gpu/drm/i915/display/vlv_dsi_pll.h: +6 -4
drivers/gpu/drm/i915/gem/i915_gem_context.c: +3 -3
drivers/gpu/drm/i915/gem/i915_gem_context_types.h: +3 -3
drivers/gpu/drm/i915/gem/i915_gem_create.c: +1 -1
drivers/gpu/drm/i915/gem/i915_gem_domain.c: +4 -13
drivers/gpu/drm/i915/gem/i915_gem_execbuffer.c: +2 -2
drivers/gpu/drm/i915/gem/i915_gem_object.h: +1 -1
drivers/gpu/drm/i915/gem/i915_gem_region.c: +1 -1
drivers/gpu/drm/i915/gem/i915_gem_shrinker.c: +2 -2
drivers/gpu/drm/i915/gem/i915_gem_tiling.c: +1 -1
drivers/gpu/drm/i915/gem/i915_gem_ttm.c: +1 -1
drivers/gpu/drm/i915/gem/i915_gem_ttm_move.c: +1 -1
drivers/gpu/drm/i915/gem/selftests/huge_pages.c: +1 -1
drivers/gpu/drm/i915/gem/selftests/i915_gem_mman.c: +1 -1
drivers/gpu/drm/i915/gt/gen2_engine_cs.c: +1 -1
drivers/gpu/drm/i915/gt/intel_engine_cs.c: +4 -4
drivers/gpu/drm/i915/gt/intel_engine_types.h: +2 -2
drivers/gpu/drm/i915/gt/intel_gt_irq.c: +1 -1
drivers/gpu/drm/i915/gt/intel_gt_mcr.c: +1 -1
drivers/gpu/drm/i915/gt/intel_gt_pm.c: +4 -2
drivers/gpu/drm/i915/gt/intel_migrate.c: +2 -2
drivers/gpu/drm/i915/gt/intel_mocs.c: +1 -1
drivers/gpu/drm/i915/gt/intel_reset.c: +1 -1
drivers/gpu/drm/i915/gt/intel_ring_submission.c: +1 -1
drivers/gpu/drm/i915/gt/intel_rps_types.h: +2 -2
drivers/gpu/drm/i915/gt/intel_sa_media.c: +1 -1
drivers/gpu/drm/i915/gt/intel_sseu.c: +1 -1
drivers/gpu/drm/i915/gt/intel_workarounds.c: +1 -1
drivers/gpu/drm/i915/gt/selftest_execlists.c: +1 -1
drivers/gpu/drm/i915/gt/selftest_hangcheck.c: +1 -1
drivers/gpu/drm/i915/gt/selftest_lrc.c: +1 -1
drivers/gpu/drm/i915/gt/selftest_rc6.c: +1 -1
drivers/gpu/drm/i915/gt/selftest_rps.c: +1 -1
drivers/gpu/drm/i915/gt/shaders/README: +3 -3
drivers/gpu/drm/i915/gt/shaders/clear_kernel/hsw.asm: +1 -1
drivers/gpu/drm/i915/gt/shaders/clear_kernel/ivb.asm: +1 -1
drivers/gpu/drm/i915/gt/uc/guc_capture_fwif.h: +2 -2
drivers/gpu/drm/i915/gt/uc/intel_guc.c: +1 -1
drivers/gpu/drm/i915/gt/uc/intel_guc.h: +1 -1
drivers/gpu/drm/i915/gt/uc/intel_guc_fwif.h: +1 -1
drivers/gpu/drm/i915/gt/uc/intel_guc_slpc.c: +32 -7
drivers/gpu/drm/i915/gt/uc/intel_guc_submission.c: +2 -2
drivers/gpu/drm/i915/gt/uc/intel_uc.c: +1 -1
drivers/gpu/drm/i915/gt/uc/selftest_guc_hangcheck.c: +1 -1
drivers/gpu/drm/i915/gvt/cmd_parser.c: +8 -7
drivers/gpu/drm/i915/gvt/display.c: +1 -1
drivers/gpu/drm/i915/gvt/dmabuf.c: +1 -1
drivers/gpu/drm/i915/gvt/edid.c: +1 -1
drivers/gpu/drm/i915/gvt/fb_decoder.c: +0 -117
drivers/gpu/drm/i915/gvt/fb_decoder.h: +0 -2
drivers/gpu/drm/i915/gvt/gtt.c: +1 -67
drivers/gpu/drm/i915/gvt/gvt.h: +5 -9
drivers/gpu/drm/i915/gvt/handlers.c: +3 -20
drivers/gpu/drm/i915/gvt/kvmgt.c: +1 -1
drivers/gpu/drm/i915/gvt/mmio.h: +0 -3
drivers/gpu/drm/i915/gvt/mmio_context.c: +3 -3
drivers/gpu/drm/i915/gvt/scheduler.c: +6 -5
drivers/gpu/drm/i915/gvt/vgpu.c: +3 -3
drivers/gpu/drm/i915/i915_driver.c: +1 -1
drivers/gpu/drm/i915/i915_drv.h: +0 -1
drivers/gpu/drm/i915/i915_gem.c: +3 -3
drivers/gpu/drm/i915/i915_irq.c: +55 -14
drivers/gpu/drm/i915/i915_irq.h: +4 -0
drivers/gpu/drm/i915/i915_module.c: +1 -1
drivers/gpu/drm/i915/i915_perf.c: +12 -7
drivers/gpu/drm/i915/i915_pmu.h: +1 -1
drivers/gpu/drm/i915/i915_reg.h: +58 -13
drivers/gpu/drm/i915/i915_reg_defs.h: +8 -0
drivers/gpu/drm/i915/i915_request.c: +1 -1
drivers/gpu/drm/i915/i915_request.h: +2 -2
drivers/gpu/drm/i915/i915_vma.c: +5 -5
drivers/gpu/drm/i915/intel_clock_gating.c: +1 -1
drivers/gpu/drm/i915/intel_gvt.c: +1 -1
drivers/gpu/drm/i915/intel_gvt_mmio_table.c: +1 -1
drivers/gpu/drm/i915/intel_runtime_pm.c: +1 -1
drivers/gpu/drm/i915/intel_runtime_pm.h: +1 -1
drivers/gpu/drm/i915/intel_uncore.c: +1 -1
drivers/gpu/drm/i915/pxp/intel_pxp_cmd_interface_43.h: +1 -1
drivers/gpu/drm/i915/pxp/intel_pxp_types.h: +1 -1
drivers/gpu/drm/i915/selftests/i915_gem.c: +1 -1
drivers/gpu/drm/i915/selftests/i915_gem_gtt.c: +13 -8
drivers/gpu/drm/i915/selftests/i915_vma.c: +10 -5
drivers/gpu/drm/i915/soc/intel_pch.c: +35 -9
drivers/gpu/drm/i915/soc/intel_pch.h: +6 -39
drivers/gpu/drm/xe/Kconfig: +14 -0
drivers/gpu/drm/xe/Makefile: +5 -0
drivers/gpu/drm/xe/compat-i915-headers/i915_vma.h: +3 -0
drivers/gpu/drm/xe/display/ext/i915_irq.c: +23 -0
drivers/gpu/drm/xe/display/intel_fb_bo.c: +4 -3
drivers/gpu/drm/xe/display/xe_display.c: +1 -1
drivers/gpu/drm/xe/display/xe_fb_pin.c: +44 -5
drivers/gpu/drm/xe/display/xe_plane_initial.c: +1 -11
drivers/gpu/drm/xe/xe_device_types.h: +0 -1
include/drm/display/drm_dp.h: +2 -1
include/drm/display/drm_dp_dual_mode_helper.h: +1 -1
include/drm/intel/pciids.h: +5 -2
