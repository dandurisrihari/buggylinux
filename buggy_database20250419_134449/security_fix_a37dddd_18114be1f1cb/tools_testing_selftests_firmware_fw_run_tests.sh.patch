commit a37ddddd86037c896c702b4df416bc4e51b2a5a0
Author: Russ Weight <russell.h.weight@intel.com>
Date:   Tue Apr 26 09:35:32 2022 -0700

    selftests: firmware: Add firmware upload selftests
    
    Add selftests to verify the firmware upload mechanism. These test
    include simple firmware uploads as well as upload cancellation and
    error injection. The test creates three firmware devices and verifies
    that they all work correctly and independently.
    
    Tested-by: Matthew Gerlach <matthew.gerlach@linux.intel.com>
    Reviewed-by: Luis Chamberlain <mcgrof@kernel.org>
    Reviewed-by: Tianfei zhang <tianfei.zhang@intel.com>
    Signed-off-by: Russ Weight <russell.h.weight@intel.com>
    Link: https://lore.kernel.org/r/20220426163532.114961-1-russell.h.weight@intel.com
    Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

diff --git a/tools/testing/selftests/firmware/fw_run_tests.sh b/tools/testing/selftests/firmware/fw_run_tests.sh
index 777377078d5e..f6d95a2d5124 100755
--- a/tools/testing/selftests/firmware/fw_run_tests.sh
+++ b/tools/testing/selftests/firmware/fw_run_tests.sh
@@ -22,6 +22,10 @@ run_tests()
 	proc_set_force_sysfs_fallback $1
 	proc_set_ignore_sysfs_fallback $2
 	$TEST_DIR/fw_fallback.sh
+
+	proc_set_force_sysfs_fallback $1
+	proc_set_ignore_sysfs_fallback $2
+	$TEST_DIR/fw_upload.sh
 }
 
 run_test_config_0001()