{
  "hash": "962f8e64cd18a5353c34937436dd06b992f73c0a",
  "hash_short": "962f8e64",
  "subject": "Merge tag 'powerpc-cve-2020-4788' into fixes",
  "body": "From Daniel's cover letter:\n\nIBM Power9 processors can speculatively operate on data in the L1 cache\nbefore it has been completely validated, via a way-prediction mechanism. It\nis not possible for an attacker to determine the contents of impermissible\nmemory using this method, since these systems implement a combination of\nhardware and software security measures to prevent scenarios where\nprotected data could be leaked.\n\nHowever these measures don't address the scenario where an attacker induces\nthe operating system to speculatively execute instructions using data that\nthe attacker controls. This can be used for example to speculatively bypass\n\"kernel user access prevention\" techniques, as discovered by Anthony\nSteinhauser of Google's Safeside Project. This is not an attack by itself,\nbut there is a possibility it could be used in conjunction with\nside-channels or other weaknesses in the privileged code to construct an\nattack.\n\nThis issue can be mitigated by flushing the L1 cache between privilege\nboundaries of concern.\n\nThis patch series flushes the L1 cache on kernel entry (patch 2) and after the\nkernel performs any user accesses (patch 3). It also adds a self-test and\nperforms some related cleanups.",
  "full_message": "Merge tag 'powerpc-cve-2020-4788' into fixes\n\nFrom Daniel's cover letter:\n\nIBM Power9 processors can speculatively operate on data in the L1 cache\nbefore it has been completely validated, via a way-prediction mechanism. It\nis not possible for an attacker to determine the contents of impermissible\nmemory using this method, since these systems implement a combination of\nhardware and software security measures to prevent scenarios where\nprotected data could be leaked.\n\nHowever these measures don't address the scenario where an attacker induces\nthe operating system to speculatively execute instructions using data that\nthe attacker controls. This can be used for example to speculatively bypass\n\"kernel user access prevention\" techniques, as discovered by Anthony\nSteinhauser of Google's Safeside Project. This is not an attack by itself,\nbut there is a possibility it could be used in conjunction with\nside-channels or other weaknesses in the privileged code to construct an\nattack.\n\nThis issue can be mitigated by flushing the L1 cache between privilege\nboundaries of concern.\n\nThis patch series flushes the L1 cache on kernel entry (patch 2) and after the\nkernel performs any user accesses (patch 3). It also adds a self-test and\nperforms some related cleanups.",
  "author_name": "Michael Ellerman",
  "author_email": "mpe@ellerman.id.au",
  "author_date": "Mon Nov 23 21:16:27 2020 +1100",
  "author_date_iso": "2020-11-23T21:16:27+11:00",
  "committer_name": "Michael Ellerman",
  "committer_email": "mpe@ellerman.id.au",
  "committer_date": "Mon Nov 23 21:16:27 2020 +1100",
  "committer_date_iso": "2020-11-23T21:16:27+11:00",
  "files_changed": [
    "arch/powerpc/kernel/exceptions-64s.S"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/include/asm/book3s/64/kup-radix.h",
      "insertions": 42,
      "deletions": 24
    },
    {
      "file": "arch/powerpc/include/asm/exception-64s.h",
      "insertions": 11,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/include/asm/feature-fixups.h",
      "insertions": 19,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/include/asm/kup.h",
      "insertions": 20,
      "deletions": 6
    },
    {
      "file": "arch/powerpc/include/asm/security_features.h",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/include/asm/setup.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kernel/exceptions-64s.S",
      "insertions": 42,
      "deletions": 38
    },
    {
      "file": "arch/powerpc/kernel/setup_64.c",
      "insertions": 121,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kernel/syscall_64.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kernel/vmlinux.lds.S",
      "insertions": 14,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/lib/feature-fixups.c",
      "insertions": 104,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/platforms/powernv/setup.c",
      "insertions": 21,
      "deletions": 3
    },
    {
      "file": "arch/powerpc/platforms/pseries/mobility.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/powerpc/platforms/pseries/pseries.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/platforms/pseries/setup.c",
      "insertions": 12,
      "deletions": 3
    },
    {
      "file": "tools/testing/selftests/powerpc/include/utils.h",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/powerpc/security/.gitignore",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/powerpc/security/Makefile",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "tools/testing/selftests/powerpc/security/entry_flush.c",
      "insertions": 139,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/powerpc/security/flush_utils.c",
      "insertions": 70,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/powerpc/security/flush_utils.h",
      "insertions": 17,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/powerpc/security/rfi_flush.c",
      "insertions": 30,
      "deletions": 66
    }
  ],
  "total_insertions": 693,
  "total_deletions": 147,
  "total_changes": 840,
  "parents": [
    "cd81acc600a9684ea4b4d25a47900d38a3890eab",
    "da631f7fd623b6c180c8d93a93040d1e0d61291f"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "bypass"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/powerpc/kernel/exceptions-64s.S",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}