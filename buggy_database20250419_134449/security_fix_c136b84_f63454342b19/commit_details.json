{
  "hash": "c136b84393d4e340e1b53fc7f737dd5827b19ee5",
  "hash_short": "c136b843",
  "subject": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm",
  "body": "Pull KVM updates from Paolo Bonzini:\n \"PPC:\n   - Better machine check handling for HV KVM\n   - Ability to support guests with threads=2, 4 or 8 on POWER9\n   - Fix for a race that could cause delayed recognition of signals\n   - Fix for a bug where POWER9 guests could sleep with interrupts pending.\n\n  ARM:\n   - VCPU request overhaul\n   - allow timer and PMU to have their interrupt number selected from userspace\n   - workaround for Cavium erratum 30115\n   - handling of memory poisonning\n   - the usual crop of fixes and cleanups\n\n  s390:\n   - initial machine check forwarding\n   - migration support for the CMMA page hinting information\n   - cleanups and fixes\n\n  x86:\n   - nested VMX bugfixes and improvements\n   - more reliable NMI window detection on AMD\n   - APIC timer optimizations\n\n  Generic:\n   - VCPU request overhaul + documentation of common code patterns\n   - kvm_stat improvements\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (124 commits)\n  Update my email address\n  kvm: vmx: allow host to access guest MSR_IA32_BNDCFGS\n  x86: kvm: mmu: use ept a/d in vmcs02 iff used in vmcs12\n  kvm: x86: mmu: allow A/D bits to be disabled in an mmu\n  x86: kvm: mmu: make spte mmio mask more explicit\n  x86: kvm: mmu: dead code thanks to access tracking\n  KVM: PPC: Book3S: Fix typo in XICS-on-XIVE state saving code\n  KVM: PPC: Book3S HV: Close race with testing for signals on guest entry\n  KVM: PPC: Book3S HV: Simplify dynamic micro-threading code\n  KVM: x86: remove ignored type attribute\n  KVM: LAPIC: Fix lapic timer injection delay\n  KVM: lapic: reorganize restart_apic_timer\n  KVM: lapic: reorganize start_hv_timer\n  kvm: nVMX: Check memory operand to INVVPID\n  KVM: s390: Inject machine check into the nested guest\n  KVM: s390: Inject machine check into the guest\n  tools/kvm_stat: add new interactive command 'b'\n  tools/kvm_stat: add new command line switch '-i'\n  tools/kvm_stat: fix error on interactive command 'g'\n  KVM: SVM: suppress unnecessary NMI singlestep on GIF=0 and nested exit\n  ...",
  "full_message": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm\n\nPull KVM updates from Paolo Bonzini:\n \"PPC:\n   - Better machine check handling for HV KVM\n   - Ability to support guests with threads=2, 4 or 8 on POWER9\n   - Fix for a race that could cause delayed recognition of signals\n   - Fix for a bug where POWER9 guests could sleep with interrupts pending.\n\n  ARM:\n   - VCPU request overhaul\n   - allow timer and PMU to have their interrupt number selected from userspace\n   - workaround for Cavium erratum 30115\n   - handling of memory poisonning\n   - the usual crop of fixes and cleanups\n\n  s390:\n   - initial machine check forwarding\n   - migration support for the CMMA page hinting information\n   - cleanups and fixes\n\n  x86:\n   - nested VMX bugfixes and improvements\n   - more reliable NMI window detection on AMD\n   - APIC timer optimizations\n\n  Generic:\n   - VCPU request overhaul + documentation of common code patterns\n   - kvm_stat improvements\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (124 commits)\n  Update my email address\n  kvm: vmx: allow host to access guest MSR_IA32_BNDCFGS\n  x86: kvm: mmu: use ept a/d in vmcs02 iff used in vmcs12\n  kvm: x86: mmu: allow A/D bits to be disabled in an mmu\n  x86: kvm: mmu: make spte mmio mask more explicit\n  x86: kvm: mmu: dead code thanks to access tracking\n  KVM: PPC: Book3S: Fix typo in XICS-on-XIVE state saving code\n  KVM: PPC: Book3S HV: Close race with testing for signals on guest entry\n  KVM: PPC: Book3S HV: Simplify dynamic micro-threading code\n  KVM: x86: remove ignored type attribute\n  KVM: LAPIC: Fix lapic timer injection delay\n  KVM: lapic: reorganize restart_apic_timer\n  KVM: lapic: reorganize start_hv_timer\n  kvm: nVMX: Check memory operand to INVVPID\n  KVM: s390: Inject machine check into the nested guest\n  KVM: s390: Inject machine check into the guest\n  tools/kvm_stat: add new interactive command 'b'\n  tools/kvm_stat: add new command line switch '-i'\n  tools/kvm_stat: fix error on interactive command 'g'\n  KVM: SVM: suppress unnecessary NMI singlestep on GIF=0 and nested exit\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Thu Jul 6 18:38:31 2017 -0700",
  "author_date_iso": "2017-07-06T18:38:31-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Thu Jul 6 18:38:31 2017 -0700",
  "committer_date_iso": "2017-07-06T18:38:31-07:00",
  "files_changed": [
    "Documentation/admin-guide/kernel-parameters.txt",
    "MAINTAINERS",
    "arch/arm64/Kconfig",
    "arch/arm64/include/asm/esr.h",
    "arch/powerpc/kvm/book3s_hv.c",
    "arch/s390/include/asm/kvm_host.h",
    "arch/s390/kvm/gaccess.c",
    "arch/s390/kvm/interrupt.c",
    "arch/s390/kvm/kvm-s390.c",
    "arch/s390/kvm/priv.c",
    "arch/x86/include/asm/msr-index.h",
    "arch/x86/kvm/emulate.c",
    "arch/x86/kvm/mmu.c",
    "arch/x86/kvm/mmu.h",
    "arch/x86/kvm/svm.c",
    "arch/x86/kvm/vmx.c",
    "arch/x86/kvm/x86.c",
    "virt/kvm/arm/mmu.c"
  ],
  "files_changed_count": 18,
  "stats": [
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "insertions": 12,
      "deletions": 0
    },
    {
      "file": "Documentation/arm64/silicon-errata.txt",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "Documentation/virtual/kvm/api.txt",
      "insertions": 172,
      "deletions": 0
    },
    {
      "file": "Documentation/virtual/kvm/devices/s390_flic.txt",
      "insertions": 15,
      "deletions": 0
    },
    {
      "file": "Documentation/virtual/kvm/devices/vcpu.txt",
      "insertions": 34,
      "deletions": 7
    },
    {
      "file": "Documentation/virtual/kvm/devices/vm.txt",
      "insertions": 33,
      "deletions": 0
    },
    {
      "file": "Documentation/virtual/kvm/mmu.txt",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "Documentation/virtual/kvm/vcpu-requests.rst",
      "insertions": 307,
      "deletions": 0
    },
    {
      "file": "MAINTAINERS",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "arch/arm/include/asm/kvm_host.h",
      "insertions": 10,
      "deletions": 18
    },
    {
      "file": "arch/arm/include/uapi/asm/kvm.h",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "arch/arm/kvm/guest.c",
      "insertions": 51,
      "deletions": 0
    },
    {
      "file": "arch/arm/kvm/handle_exit.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm/kvm/hyp/switch.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/arm/kvm/reset.c",
      "insertions": 1,
      "deletions": 15
    },
    {
      "file": "arch/arm64/Kconfig",
      "insertions": 11,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/arch_gicv3.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/include/asm/cpucaps.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "arch/arm64/include/asm/cputype.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/esr.h",
      "insertions": 24,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "arch/arm64/include/asm/kvm_hyp.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/sysreg.h",
      "insertions": 20,
      "deletions": 3
    },
    {
      "file": "arch/arm64/include/uapi/asm/kvm.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kernel/cpu_errata.c",
      "insertions": 21,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/guest.c",
      "insertions": 9,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/handle_exit.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/switch.c",
      "insertions": 15,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/reset.c",
      "insertions": 1,
      "deletions": 15
    },
    {
      "file": "arch/arm64/kvm/sys_regs.c",
      "insertions": 23,
      "deletions": 4
    },
    {
      "file": "arch/arm64/kvm/vgic-sys-reg-v3.c",
      "insertions": 15,
      "deletions": 30
    },
    {
      "file": "arch/mips/kvm/trap_emul.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/mips/kvm/vz.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/include/asm/kvm_book3s.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/include/asm/kvm_book3s_asm.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/include/asm/kvm_host.h",
      "insertions": 10,
      "deletions": 3
    },
    {
      "file": "arch/powerpc/include/asm/kvm_ppc.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/include/asm/ppc-opcode.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/include/uapi/asm/kvm.h",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kernel/asm-offsets.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kernel/mce.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv.c",
      "insertions": 399,
      "deletions": 112
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv_builtin.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv_interrupts.S",
      "insertions": 1,
      "deletions": 7
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv_ras.c",
      "insertions": 17,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv_rmhandlers.S",
      "insertions": 99,
      "deletions": 66
    },
    {
      "file": "arch/powerpc/kvm/book3s_xive.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/powerpc/kvm/booke.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kvm/emulate.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/powerpc/kvm/powerpc.c",
      "insertions": 41,
      "deletions": 4
    },
    {
      "file": "arch/s390/include/asm/ctl_reg.h",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "arch/s390/include/asm/kvm_host.h",
      "insertions": 21,
      "deletions": 12
    },
    {
      "file": "arch/s390/include/asm/nmi.h",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "arch/s390/include/uapi/asm/kvm.h",
      "insertions": 12,
      "deletions": 0
    },
    {
      "file": "arch/s390/kvm/gaccess.c",
      "insertions": 31,
      "deletions": 12
    },
    {
      "file": "arch/s390/kvm/interrupt.c",
      "insertions": 90,
      "deletions": 1
    },
    {
      "file": "arch/s390/kvm/kvm-s390.c",
      "insertions": 371,
      "deletions": 2
    },
    {
      "file": "arch/s390/kvm/kvm-s390.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/s390/kvm/priv.c",
      "insertions": 98,
      "deletions": 5
    },
    {
      "file": "arch/s390/kvm/vsie.c",
      "insertions": 20,
      "deletions": 5
    },
    {
      "file": "arch/x86/include/asm/kvm_host.h",
      "insertions": 27,
      "deletions": 23
    },
    {
      "file": "arch/x86/include/asm/msr-index.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/cpuid.h",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/emulate.c",
      "insertions": 38,
      "deletions": 46
    },
    {
      "file": "arch/x86/kvm/lapic.c",
      "insertions": 64,
      "deletions": 52
    },
    {
      "file": "arch/x86/kvm/lapic.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/mmu.c",
      "insertions": 101,
      "deletions": 54
    },
    {
      "file": "arch/x86/kvm/mmu.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/mmutrace.h",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/svm.c",
      "insertions": 85,
      "deletions": 10
    },
    {
      "file": "arch/x86/kvm/vmx.c",
      "insertions": 48,
      "deletions": 35
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "insertions": 7,
      "deletions": 7
    },
    {
      "file": "include/kvm/arm_arch_timer.h",
      "insertions": 5,
      "deletions": 3
    },
    {
      "file": "include/kvm/arm_pmu.h",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "include/kvm/arm_vgic.h",
      "insertions": 11,
      "deletions": 3
    },
    {
      "file": "include/linux/irqchip/arm-gic-v3.h",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "include/linux/kvm_host.h",
      "insertions": 12,
      "deletions": 0
    },
    {
      "file": "include/uapi/linux/kvm.h",
      "insertions": 35,
      "deletions": 0
    },
    {
      "file": "tools/kvm/kvm_stat/kvm_stat",
      "insertions": 430,
      "deletions": 239
    },
    {
      "file": "tools/kvm/kvm_stat/kvm_stat.txt",
      "insertions": 12,
      "deletions": 0
    },
    {
      "file": "virt/kvm/arm/aarch32.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "virt/kvm/arm/arch_timer.c",
      "insertions": 125,
      "deletions": 14
    },
    {
      "file": "virt/kvm/arm/arm.c",
      "insertions": 53,
      "deletions": 29
    },
    {
      "file": "virt/kvm/arm/hyp/vgic-v3-sr.c",
      "insertions": 807,
      "deletions": 16
    },
    {
      "file": "virt/kvm/arm/mmu.c",
      "insertions": 23,
      "deletions": 0
    },
    {
      "file": "virt/kvm/arm/pmu.c",
      "insertions": 81,
      "deletions": 36
    },
    {
      "file": "virt/kvm/arm/psci.c",
      "insertions": 5,
      "deletions": 3
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-irqfd.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-mmio-v2.c",
      "insertions": 13,
      "deletions": 11
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-mmio-v3.c",
      "insertions": 13,
      "deletions": 9
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-mmio.c",
      "insertions": 53,
      "deletions": 15
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-mmio.h",
      "insertions": 11,
      "deletions": 1
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-v3.c",
      "insertions": 45,
      "deletions": 0
    },
    {
      "file": "virt/kvm/arm/vgic/vgic.c",
      "insertions": 57,
      "deletions": 11
    },
    {
      "file": "virt/kvm/kvm_main.c",
      "insertions": 9,
      "deletions": 3
    }
  ],
  "total_insertions": 4250,
  "total_deletions": 967,
  "total_changes": 5217,
  "parents": [
    "e0f25a3f2d052e36ff67a9b4db835c3e27e950d8",
    "1372324b328cd5dabaef5e345e37ad48c63df2a9"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.13",
    "v4.13-rc1",
    "v4.13-rc2",
    "v4.13-rc3",
    "v4.13-rc4",
    "v4.13-rc5",
    "v4.13-rc6",
    "v4.13-rc7",
    "v4.14",
    "v4.14-rc1"
  ],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/arm64/include/asm/esr.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/s390/kvm/interrupt.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/s390/kvm/gaccess.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/s390/kvm/kvm-s390.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/s390/include/asm/kvm_host.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/s390/kvm/priv.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/include/asm/msr-index.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/mmu.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/mmu.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/emulate.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "MAINTAINERS",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/svm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/arm/mmu.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/vmx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}