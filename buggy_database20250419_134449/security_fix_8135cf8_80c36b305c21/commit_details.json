{
  "hash": "8135cf8b092723dbfcc611fe6fdcb3a36c9951c5",
  "hash_short": "8135cf8b",
  "subject": "xen/pciback: Save xen_pci_op commands before processing it",
  "body": "Double fetch vulnerabilities that happen when a variable is\nfetched twice from shared memory but a security check is only\nperformed the first time.\n\nThe xen_pcibk_do_op function performs a switch statements on the op->cmd\nvalue which is stored in shared memory. Interestingly this can result\nin a double fetch vulnerability depending on the performed compiler\noptimization.\n\nThis patch fixes it by saving the xen_pci_op command before\nprocessing it. We also use 'barrier' to make sure that the\ncompiler does not perform any optimization.\n\nThis is part of XSA155.\n\nCC: stable@vger.kernel.org\nReviewed-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\nSigned-off-by: Jan Beulich <JBeulich@suse.com>\nSigned-off-by: David Vrabel <david.vrabel@citrix.com>\nSigned-off-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>",
  "full_message": "xen/pciback: Save xen_pci_op commands before processing it\n\nDouble fetch vulnerabilities that happen when a variable is\nfetched twice from shared memory but a security check is only\nperformed the first time.\n\nThe xen_pcibk_do_op function performs a switch statements on the op->cmd\nvalue which is stored in shared memory. Interestingly this can result\nin a double fetch vulnerability depending on the performed compiler\noptimization.\n\nThis patch fixes it by saving the xen_pci_op command before\nprocessing it. We also use 'barrier' to make sure that the\ncompiler does not perform any optimization.\n\nThis is part of XSA155.\n\nCC: stable@vger.kernel.org\nReviewed-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\nSigned-off-by: Jan Beulich <JBeulich@suse.com>\nSigned-off-by: David Vrabel <david.vrabel@citrix.com>\nSigned-off-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>",
  "author_name": "Konrad Rzeszutek Wilk",
  "author_email": "konrad.wilk@oracle.com",
  "author_date": "Mon Nov 16 12:40:48 2015 -0500",
  "author_date_iso": "2015-11-16T12:40:48-05:00",
  "committer_name": "Konrad Rzeszutek Wilk",
  "committer_email": "konrad.wilk@oracle.com",
  "committer_date": "Fri Dec 18 10:00:47 2015 -0500",
  "committer_date_iso": "2015-12-18T10:00:47-05:00",
  "files_changed": [
    "drivers/xen/xen-pciback/pciback.h",
    "drivers/xen/xen-pciback/pciback_ops.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "drivers/xen/xen-pciback/pciback.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/xen/xen-pciback/pciback_ops.c",
      "insertions": 14,
      "deletions": 1
    }
  ],
  "total_insertions": 15,
  "total_deletions": 1,
  "total_changes": 16,
  "parents": [
    "be69746ec12f35b484707da505c6c76ff06f97dc"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "vulnerability"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/xen/xen-pciback/pciback.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/xen/xen-pciback/pciback_ops.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}