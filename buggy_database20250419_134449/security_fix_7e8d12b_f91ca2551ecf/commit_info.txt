Commit Hash: 7e8d12bc733fc9deeb5d78140cda169030fa2ac5
Subject: drm/i915/huc: Avoid attempting to authenticate non-existent fw


Security Keywords:
- authentication

Full commit message:
drm/i915/huc: Avoid attempting to authenticate non-existent fw

HuC authentication is called even if HuC firmware is not present in the
system, leading to NULL ptr dereference on not allocated gem_object.
Let's avoid trying to authenticate HuC if its firmware is not loaded
successfully.

Fixes: dac84a388528 ("drm/i915/huc: Support HuC authentication")

v2: Check inside the auth function, split the assert (Michał)
v3: Oops, hit send before compiling, s/huc_fw/huc->fw

Cc: Anusha Srivatsa <anusha.srivatsa@intel.com>
Cc: Arkadiusz Hiler <arkadiusz.hiler@intel.com>
Cc: Chris Wilson <chris@chris-wilson.co.uk>
Reviewed-by: Michal Wajdeczko <michal.wajdeczko@intel.com>
Signed-off-by: Michał Winiarski <michal.winiarski@intel.com>
Link: http://patchwork.freedesktop.org/patch/msgid/20170120192348.2049-1-michal.winiarski@intel.com
Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>

Metadata:
Author: Michał Winiarski <michal.winiarski@intel.com>
Author Date: Fri Jan 20 20:23:46 2017 +0100
Committer: Chris Wilson <chris@chris-wilson.co.uk>
Commit Date: Fri Jan 20 19:59:53 2017 +0000

Files Changed: 1
Lines Added: 3
Lines Removed: 0
Total Changes: 3
