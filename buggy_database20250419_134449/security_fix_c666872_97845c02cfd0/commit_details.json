{
  "hash": "c6668726d2c2c581e6c417448c472c994d026f5f",
  "hash_short": "c6668726",
  "subject": "Merge branch 'for-next' of git://git.kernel.org/pub/scm/linux/kernel/git/nab/target-pending",
  "body": "Pull SCSI target updates from Nicholas Bellinger:\n \"Lots of activity in target land the last months.\n\n  The highlights include:\n\n   - Convert fabric drivers tree-wide to target_register_template() (hch\n     + bart)\n\n   - iser-target hardening fixes + v1.0 improvements (sagi)\n\n   - Convert iscsi_thread_set usage to kthread.h + kill\n     iscsi_target_tq.c (sagi + nab)\n\n   - Add support for T10-PI WRITE_STRIP + READ_INSERT operation (mkp +\n     sagi + nab)\n\n   - DIF fixes for CONFIG_DEBUG_SG=y + UNMAP file emulation (akinobu +\n     sagi + mkp)\n\n   - Extended TCMU ABI v2 for future BIDI + DIF support (andy + ilias)\n\n   - Fix COMPARE_AND_WRITE handling for NO_ALLLOC drivers (hch + nab)\n\n  Thanks to everyone who contributed this round with new features,\n  bug-reports, fixes, cleanups and improvements.\n\n  Looking forward, it's currently shaping up to be a busy v4.2 as well\"\n\n* 'for-next' of git://git.kernel.org/pub/scm/linux/kernel/git/nab/target-pending: (69 commits)\n  target: Put TCMU under a new config option\n  target: Version 2 of TCMU ABI\n  target: fix tcm_mod_builder.py\n  target/file: Fix UNMAP with DIF protection support\n  target/file: Fix SG table for prot_buf initialization\n  target/file: Fix BUG() when CONFIG_DEBUG_SG=y and DIF protection enabled\n  target: Make core_tmr_abort_task() skip TMFs\n  target/sbc: Update sbc_dif_generate pr_debug output\n  target/sbc: Make internal DIF emulation honor ->prot_checks\n  target/sbc: Return INVALID_CDB_FIELD if DIF + sess_prot_type disabled\n  target: Ensure sess_prot_type is saved across session restart\n  target/rd: Don't pass incomplete scatterlist entries to sbc_dif_verify_*\n  target: Remove the unused flag SCF_ACK_KREF\n  target: Fix two sparse warnings\n  target: Fix COMPARE_AND_WRITE with SG_TO_MEM_NOALLOC handling\n  target: simplify the target template registration API\n  target: simplify target_xcopy_init_pt_lun\n  target: remove the unused SCF_CMD_XCOPY_PASSTHROUGH flag\n  target/rd: reduce code duplication in rd_execute_rw()\n  tcm_loop: fixup tpgt string to integer conversion\n  ...",
  "full_message": "Merge branch 'for-next' of git://git.kernel.org/pub/scm/linux/kernel/git/nab/target-pending\n\nPull SCSI target updates from Nicholas Bellinger:\n \"Lots of activity in target land the last months.\n\n  The highlights include:\n\n   - Convert fabric drivers tree-wide to target_register_template() (hch\n     + bart)\n\n   - iser-target hardening fixes + v1.0 improvements (sagi)\n\n   - Convert iscsi_thread_set usage to kthread.h + kill\n     iscsi_target_tq.c (sagi + nab)\n\n   - Add support for T10-PI WRITE_STRIP + READ_INSERT operation (mkp +\n     sagi + nab)\n\n   - DIF fixes for CONFIG_DEBUG_SG=y + UNMAP file emulation (akinobu +\n     sagi + mkp)\n\n   - Extended TCMU ABI v2 for future BIDI + DIF support (andy + ilias)\n\n   - Fix COMPARE_AND_WRITE handling for NO_ALLLOC drivers (hch + nab)\n\n  Thanks to everyone who contributed this round with new features,\n  bug-reports, fixes, cleanups and improvements.\n\n  Looking forward, it's currently shaping up to be a busy v4.2 as well\"\n\n* 'for-next' of git://git.kernel.org/pub/scm/linux/kernel/git/nab/target-pending: (69 commits)\n  target: Put TCMU under a new config option\n  target: Version 2 of TCMU ABI\n  target: fix tcm_mod_builder.py\n  target/file: Fix UNMAP with DIF protection support\n  target/file: Fix SG table for prot_buf initialization\n  target/file: Fix BUG() when CONFIG_DEBUG_SG=y and DIF protection enabled\n  target: Make core_tmr_abort_task() skip TMFs\n  target/sbc: Update sbc_dif_generate pr_debug output\n  target/sbc: Make internal DIF emulation honor ->prot_checks\n  target/sbc: Return INVALID_CDB_FIELD if DIF + sess_prot_type disabled\n  target: Ensure sess_prot_type is saved across session restart\n  target/rd: Don't pass incomplete scatterlist entries to sbc_dif_verify_*\n  target: Remove the unused flag SCF_ACK_KREF\n  target: Fix two sparse warnings\n  target: Fix COMPARE_AND_WRITE with SG_TO_MEM_NOALLOC handling\n  target: simplify the target template registration API\n  target: simplify target_xcopy_init_pt_lun\n  target: remove the unused SCF_CMD_XCOPY_PASSTHROUGH flag\n  target/rd: reduce code duplication in rd_execute_rw()\n  tcm_loop: fixup tpgt string to integer conversion\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Fri Apr 24 10:22:09 2015 -0700",
  "author_date_iso": "2015-04-24T10:22:09-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Fri Apr 24 10:22:09 2015 -0700",
  "committer_date_iso": "2015-04-24T10:22:09-07:00",
  "files_changed": [
    "drivers/infiniband/ulp/srpt/ib_srpt.c",
    "drivers/scsi/qla2xxx/tcm_qla2xxx.c",
    "drivers/target/iscsi/iscsi_target.c",
    "drivers/target/iscsi/iscsi_target_erl0.c",
    "drivers/target/loopback/tcm_loop.c",
    "drivers/target/target_core_sbc.c",
    "drivers/target/target_core_spc.c",
    "drivers/target/target_core_transport.c",
    "drivers/usb/gadget/legacy/tcm_usb_gadget.c",
    "drivers/vhost/scsi.c",
    "drivers/xen/xen-scsiback.c"
  ],
  "files_changed_count": 11,
  "stats": [
    {
      "file": "Documentation/target/tcm_mod_builder.py",
      "insertions": 12,
      "deletions": 67
    },
    {
      "file": "Documentation/target/tcmu-design.txt",
      "insertions": 28,
      "deletions": 15
    },
    {
      "file": "drivers/infiniband/ulp/isert/ib_isert.c",
      "insertions": 380,
      "deletions": 311
    },
    {
      "file": "drivers/infiniband/ulp/isert/ib_isert.h",
      "insertions": 18,
      "deletions": 19
    },
    {
      "file": "drivers/infiniband/ulp/srpt/ib_srpt.c",
      "insertions": 13,
      "deletions": 36
    },
    {
      "file": "drivers/scsi/qla2xxx/qla_target.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/scsi/qla2xxx/tcm_qla2xxx.c",
      "insertions": 81,
      "deletions": 93
    },
    {
      "file": "drivers/scsi/qla2xxx/tcm_qla2xxx.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/target/Kconfig",
      "insertions": 3,
      "deletions": 2
    },
    {
      "file": "drivers/target/Makefile",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/target/iscsi/Makefile",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "drivers/target/iscsi/iscsi_target.c",
      "insertions": 60,
      "deletions": 71
    },
    {
      "file": "drivers/target/iscsi/iscsi_target.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/target/iscsi/iscsi_target_configfs.c",
      "insertions": 89,
      "deletions": 119
    },
    {
      "file": "drivers/target/iscsi/iscsi_target_configfs.h",
      "insertions": 0,
      "deletions": 7
    },
    {
      "file": "drivers/target/iscsi/iscsi_target_erl0.c",
      "insertions": 8,
      "deletions": 6
    },
    {
      "file": "drivers/target/iscsi/iscsi_target_login.c",
      "insertions": 54,
      "deletions": 6
    },
    {
      "file": "drivers/target/iscsi/iscsi_target_tpg.c",
      "insertions": 21,
      "deletions": 4
    },
    {
      "file": "drivers/target/iscsi/iscsi_target_tpg.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/target/iscsi/iscsi_target_tq.c",
      "insertions": 0,
      "deletions": 495
    },
    {
      "file": "drivers/target/iscsi/iscsi_target_tq.h",
      "insertions": 0,
      "deletions": 84
    },
    {
      "file": "drivers/target/iscsi/iscsi_target_util.c",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "drivers/target/loopback/tcm_loop.c",
      "insertions": 105,
      "deletions": 137
    },
    {
      "file": "drivers/target/loopback/tcm_loop.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/target/sbp/sbp_target.c",
      "insertions": 10,
      "deletions": 58
    },
    {
      "file": "drivers/target/target_core_configfs.c",
      "insertions": 55,
      "deletions": 137
    },
    {
      "file": "drivers/target/target_core_fabric_configfs.c",
      "insertions": 26,
      "deletions": 12
    },
    {
      "file": "drivers/target/target_core_file.c",
      "insertions": 115,
      "deletions": 146
    },
    {
      "file": "drivers/target/target_core_iblock.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/target/target_core_internal.h",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "drivers/target/target_core_pr.c",
      "insertions": 29,
      "deletions": 19
    },
    {
      "file": "drivers/target/target_core_rd.c",
      "insertions": 99,
      "deletions": 38
    },
    {
      "file": "drivers/target/target_core_sbc.c",
      "insertions": 81,
      "deletions": 28
    },
    {
      "file": "drivers/target/target_core_spc.c",
      "insertions": 10,
      "deletions": 6
    },
    {
      "file": "drivers/target/target_core_tmr.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/target/target_core_tpg.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/target/target_core_transport.c",
      "insertions": 136,
      "deletions": 26
    },
    {
      "file": "drivers/target/target_core_user.c",
      "insertions": 38,
      "deletions": 14
    },
    {
      "file": "drivers/target/target_core_xcopy.c",
      "insertions": 12,
      "deletions": 34
    },
    {
      "file": "drivers/target/tcm_fc/tcm_fc.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "drivers/target/tcm_fc/tfc_conf.c",
      "insertions": 24,
      "deletions": 65
    },
    {
      "file": "drivers/usb/gadget/legacy/tcm_usb_gadget.c",
      "insertions": 9,
      "deletions": 48
    },
    {
      "file": "drivers/vhost/scsi.c",
      "insertions": 63,
      "deletions": 63
    },
    {
      "file": "drivers/xen/xen-scsiback.c",
      "insertions": 13,
      "deletions": 61
    },
    {
      "file": "include/target/iscsi/iscsi_target_core.h",
      "insertions": 11,
      "deletions": 4
    },
    {
      "file": "include/target/target_core_base.h",
      "insertions": 5,
      "deletions": 5
    },
    {
      "file": "include/target/target_core_configfs.h",
      "insertions": 0,
      "deletions": 6
    },
    {
      "file": "include/target/target_core_fabric.h",
      "insertions": 30,
      "deletions": 3
    },
    {
      "file": "include/target/target_core_fabric_configfs.h",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "include/uapi/linux/target_core_user.h",
      "insertions": 27,
      "deletions": 17
    }
  ],
  "total_insertions": 1687,
  "total_deletions": 2273,
  "total_changes": 3960,
  "parents": [
    "06b45f2aa703837163496f5db6a53575665cc6b4",
    "68d4cef3bab3fb9bb0dbac690ba35a96cb5a16d9"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.1",
    "v4.1-rc1",
    "v4.1-rc2",
    "v4.1-rc3",
    "v4.1-rc4",
    "v4.1-rc5",
    "v4.1-rc6",
    "v4.1-rc7",
    "v4.1-rc8",
    "v4.10"
  ],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/target/iscsi/iscsi_target_erl0.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/target/target_core_sbc.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/scsi/qla2xxx/tcm_qla2xxx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/target/loopback/tcm_loop.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/target/target_core_spc.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/infiniband/ulp/srpt/ib_srpt.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/target/iscsi/iscsi_target.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/target/target_core_transport.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/vhost/scsi.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/xen/xen-scsiback.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/usb/gadget/legacy/tcm_usb_gadget.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}