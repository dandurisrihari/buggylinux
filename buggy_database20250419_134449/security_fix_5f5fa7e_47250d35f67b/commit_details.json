{
  "hash": "5f5fa7ea89dc82d34ed458f4d7a8634e8e9eefce",
  "hash_short": "5f5fa7ea",
  "subject": "rcu: Don't use negative nesting depth in __rcu_read_unlock()",
  "body": "Now that RCU flavors have been consolidated, an RCU-preempt\nrcu_read_unlock() in an interrupt or softirq handler cannot possibly\nend the RCU read-side critical section.  Consider the old vulnerability\ninvolving rcu_read_unlock() being invoked within such a handler that\ninterrupted an __rcu_read_unlock_special(), in which a wakeup might be\ninvoked with a scheduler lock held.  Because rcu_read_unlock_special()\nno longer does wakeups in such situations, it is no longer necessary\nfor __rcu_read_unlock() to set the nesting level negative.\n\nThis commit therefore removes this recursion-protection code from\n__rcu_read_unlock().\n\n[ paulmck: Let rcu_exp_handler() continue to call rcu_report_exp_rdp(). ]\n[ paulmck: Adjust other checks given no more negative nesting. ]\nSigned-off-by: Lai Jiangshan <laijs@linux.alibaba.com>\nSigned-off-by: Paul E. McKenney <paulmck@kernel.org>",
  "full_message": "rcu: Don't use negative nesting depth in __rcu_read_unlock()\n\nNow that RCU flavors have been consolidated, an RCU-preempt\nrcu_read_unlock() in an interrupt or softirq handler cannot possibly\nend the RCU read-side critical section.  Consider the old vulnerability\ninvolving rcu_read_unlock() being invoked within such a handler that\ninterrupted an __rcu_read_unlock_special(), in which a wakeup might be\ninvoked with a scheduler lock held.  Because rcu_read_unlock_special()\nno longer does wakeups in such situations, it is no longer necessary\nfor __rcu_read_unlock() to set the nesting level negative.\n\nThis commit therefore removes this recursion-protection code from\n__rcu_read_unlock().\n\n[ paulmck: Let rcu_exp_handler() continue to call rcu_report_exp_rdp(). ]\n[ paulmck: Adjust other checks given no more negative nesting. ]\nSigned-off-by: Lai Jiangshan <laijs@linux.alibaba.com>\nSigned-off-by: Paul E. McKenney <paulmck@kernel.org>",
  "author_name": "Lai Jiangshan",
  "author_email": "laijs@linux.alibaba.com",
  "author_date": "Sat Feb 15 15:23:26 2020 -0800",
  "author_date_iso": "2020-02-15T15:23:26-08:00",
  "committer_name": "Paul E. McKenney",
  "committer_email": "paulmck@kernel.org",
  "committer_date": "Mon Apr 27 11:03:50 2020 -0700",
  "committer_date_iso": "2020-04-27T11:03:50-07:00",
  "files_changed": [
    "kernel/rcu/tree_exp.h",
    "kernel/rcu/tree_plugin.h"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "kernel/rcu/tree_exp.h",
      "insertions": 5,
      "deletions": 26
    },
    {
      "file": "kernel/rcu/tree_plugin.h",
      "insertions": 7,
      "deletions": 15
    }
  ],
  "total_insertions": 12,
  "total_deletions": 41,
  "total_changes": 53,
  "parents": [
    "f0bdf6d473cf12a488a78422e15aafdfe77cf853"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "vulnerability"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "kernel/rcu/tree_exp.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "kernel/rcu/tree_plugin.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}