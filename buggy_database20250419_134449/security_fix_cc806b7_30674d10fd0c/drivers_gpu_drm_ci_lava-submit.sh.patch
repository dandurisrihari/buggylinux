commit cc806b74466672a9bbd4e9a04265d44eb506b686
Author: Vignesh Raman <vignesh.raman@collabora.com>
Date:   Wed May 29 08:10:44 2024 +0530

    drm/ci: uprev mesa version
    
    zlib.net is not allowing tarball download anymore and results
    in below error in kernel+rootfs_arm32 container build,
    urllib.error.HTTPError: HTTP Error 403: Forbidden
    urllib.error.HTTPError: HTTP Error 415: Unsupported Media Type
    
    Uprev mesa to latest version which includes a fix for this issue.
    https://gitlab.freedesktop.org/mesa/mesa/-/commit/908f444e
    
    Use id_tokens for JWT authentication. Since s3 bucket is migrated to
    mesa-rootfs, update the variables accordingly. Also copy helper scripts
    to install, so that the ci jobs can use these scripts for logging.
    
    Signed-off-by: Vignesh Raman <vignesh.raman@collabora.com>
    Reviewed-by: Dmitry Baryshkov <dmitry.baryshkov@linaro.org>
    Reviewed-by: Jessica Zhang <quic_jesszhan@quicinc.com>
    Acked-by: Helen Koike <helen.koike@collabora.com>
    Signed-off-by: Helen Koike <helen.koike@collabora.com>
    Link: https://patchwork.freedesktop.org/patch/msgid/20240529024049.356327-2-vignesh.raman@collabora.com

diff --git a/drivers/gpu/drm/ci/lava-submit.sh b/drivers/gpu/drm/ci/lava-submit.sh
index 3d39b0c916a8..0707fa706a48 100755
--- a/drivers/gpu/drm/ci/lava-submit.sh
+++ b/drivers/gpu/drm/ci/lava-submit.sh
@@ -27,7 +27,7 @@ KERNEL_IMAGE_BASE="https://${BASE_SYSTEM_HOST_PATH}" \
 section_end variables
 
 tar zcf job-rootfs-overlay.tar.gz -C results/job-rootfs-overlay/ .
-ci-fairy s3cp --token-file "${CI_JOB_JWT_FILE}" job-rootfs-overlay.tar.gz "https://${JOB_ROOTFS_OVERLAY_PATH}"
+ci-fairy s3cp --token-file "${S3_JWT_FILE}" job-rootfs-overlay.tar.gz "https://${JOB_ROOTFS_OVERLAY_PATH}"
 
 touch results/lava.log
 tail -f results/lava.log &
@@ -45,7 +45,7 @@ PYTHONPATH=artifacts/ artifacts/lava/lava_job_submitter.py \
 	--ci-project-dir "${CI_PROJECT_DIR}" \
 	--device-type "${DEVICE_TYPE}" \
 	--dtb-filename "${DTB}" \
-	--jwt-file "${CI_JOB_JWT_FILE}" \
+	--jwt-file "${S3_JWT_FILE}" \
 	--kernel-image-name "${KERNEL_IMAGE_NAME}" \
 	--kernel-image-type "${KERNEL_IMAGE_TYPE}" \
 	--boot-method "${BOOT_METHOD}" \