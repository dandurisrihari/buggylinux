Commit Hash: e79b431fb901ba1106670bcc80b9b617b25def7d
Subject: vhost: vsock: add weight support

CVE Identifiers:
- CVE-2019-3900

Full commit message:
vhost: vsock: add weight support

This patch will check the weight and exit the loop if we exceeds the
weight. This is useful for preventing vsock kthread from hogging cpu
which is guest triggerable. The weight can help to avoid starving the
request from on direction while another direction is being processed.

The value of weight is picked from vhost-net.

This addresses CVE-2019-3900.

Cc: Stefan Hajnoczi <stefanha@redhat.com>
Fixes: 433fc58e6bf2 ("VSOCK: Introduce vhost_vsock.ko")
Signed-off-by: Jason Wang <jasowang@redhat.com>
Reviewed-by: Stefan Hajnoczi <stefanha@redhat.com>
Signed-off-by: Michael S. Tsirkin <mst@redhat.com>

Metadata:
Author: Jason Wang <jasowang@redhat.com>
Author Date: Fri May 17 00:29:51 2019 -0400
Committer: Michael S. Tsirkin <mst@redhat.com>
Commit Date: Mon May 27 11:08:23 2019 -0400

Files Changed: 1
Lines Added: 10
Lines Removed: 6
Total Changes: 16
