Commit Hash: df938a5576f3f3b08e1f217c660385c0d58a0b91
Subject: KVM: PPC: Book3S HV nestedv2: Do not inject certain interrupts


Security Keywords:
- inject

Full commit message:
KVM: PPC: Book3S HV nestedv2: Do not inject certain interrupts

There is no need to inject an external interrupt in
kvmppc_book3s_irqprio_deliver() as the test for BOOK3S_IRQPRIO_EXTERNAL
in kvmhv_run_single_vcpu() before guest entry will raise LPCR_MER if
needed. There is also no need to inject the decrementer interrupt as
this will be raised within the L2 if needed. Avoiding these injections
reduces H_GUEST_GET_STATE hcalls by the L1.

Suggested-by: Nicholas Piggin <npiggin@gmail.com>
Signed-off-by: Jordan Niethe <jniethe5@gmail.com>
Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
Link: https://msgid.link/20231201132618.555031-8-vaibhav@linux.ibm.com

Metadata:
Author: Jordan Niethe <jniethe5@gmail.com>
Author Date: Fri Dec 1 18:56:12 2023 +0530
Committer: Michael Ellerman <mpe@ellerman.id.au>
Commit Date: Thu Dec 7 23:33:07 2023 +1100

Files Changed: 1
Lines Added: 2
Lines Removed: 2
Total Changes: 4
