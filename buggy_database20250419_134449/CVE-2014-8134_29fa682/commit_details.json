{
  "hash": "29fa6825463c97e5157284db80107d1bfac5d77b",
  "hash_short": "29fa6825",
  "subject": "x86, kvm: Clear paravirt_enabled on KVM guests for espfix32's benefit",
  "body": "paravirt_enabled has the following effects:\n\n - Disables the F00F bug workaround warning.  There is no F00F bug\n   workaround any more because Linux's standard IDT handling already\n   works around the F00F bug, but the warning still exists.  This\n   is only cosmetic, and, in any event, there is no such thing as\n   KVM on a CPU with the F00F bug.\n\n - Disables 32-bit APM BIOS detection.  On a KVM paravirt system,\n   there should be no APM BIOS anyway.\n\n - Disables tboot.  I think that the tboot code should check the\n   CPUID hypervisor bit directly if it matters.\n\n - paravirt_enabled disables espfix32.  espfix32 should *not* be\n   disabled under KVM paravirt.\n\nThe last point is the purpose of this patch.  It fixes a leak of the\nhigh 16 bits of the kernel stack address on 32-bit KVM paravirt\nguests.  Fixes CVE-2014-8134.\n\nCc: stable@vger.kernel.org\nSuggested-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\nSigned-off-by: Andy Lutomirski <luto@amacapital.net>\nSigned-off-by: Paolo Bonzini <pbonzini@redhat.com>",
  "full_message": "x86, kvm: Clear paravirt_enabled on KVM guests for espfix32's benefit\n\nparavirt_enabled has the following effects:\n\n - Disables the F00F bug workaround warning.  There is no F00F bug\n   workaround any more because Linux's standard IDT handling already\n   works around the F00F bug, but the warning still exists.  This\n   is only cosmetic, and, in any event, there is no such thing as\n   KVM on a CPU with the F00F bug.\n\n - Disables 32-bit APM BIOS detection.  On a KVM paravirt system,\n   there should be no APM BIOS anyway.\n\n - Disables tboot.  I think that the tboot code should check the\n   CPUID hypervisor bit directly if it matters.\n\n - paravirt_enabled disables espfix32.  espfix32 should *not* be\n   disabled under KVM paravirt.\n\nThe last point is the purpose of this patch.  It fixes a leak of the\nhigh 16 bits of the kernel stack address on 32-bit KVM paravirt\nguests.  Fixes CVE-2014-8134.\n\nCc: stable@vger.kernel.org\nSuggested-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\nSigned-off-by: Andy Lutomirski <luto@amacapital.net>\nSigned-off-by: Paolo Bonzini <pbonzini@redhat.com>",
  "author_name": "Andy Lutomirski",
  "author_email": "luto@amacapital.net",
  "author_date": "Fri Dec 5 19:03:28 2014 -0800",
  "author_date_iso": "2014-12-05T19:03:28-08:00",
  "committer_name": "Paolo Bonzini",
  "committer_email": "pbonzini@redhat.com",
  "committer_date": "Wed Dec 10 12:49:39 2014 +0100",
  "committer_date_iso": "2014-12-10T12:49:39+01:00",
  "files_changed": [
    "arch/x86/kernel/kvm.c",
    "arch/x86/kernel/kvmclock.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "arch/x86/kernel/kvm.c",
      "insertions": 8,
      "deletions": 1
    },
    {
      "file": "arch/x86/kernel/kvmclock.c",
      "insertions": 0,
      "deletions": 1
    }
  ],
  "total_insertions": 8,
  "total_deletions": 2,
  "total_changes": 10,
  "parents": [
    "e08e833616f7eefebdacfd1d743d80ff3c3b2585"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v3.19",
    "v3.19-rc1",
    "v3.19-rc2",
    "v3.19-rc3",
    "v3.19-rc4",
    "v3.19-rc5",
    "v3.19-rc6",
    "v3.19-rc7",
    "v4.0",
    "v4.0-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [
      "CVE-2014-8134"
    ],
    "security_keywords": []
  },
  "fix_type": "cve",
  "file_results": [
    {
      "file": "arch/x86/kernel/kvm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/kvmclock.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}