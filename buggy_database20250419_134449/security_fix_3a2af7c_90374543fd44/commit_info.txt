Commit Hash: 3a2af7cccbbaf2362db9053a946a6084e12bfa73
Subject: mac80211_hwsim: Fix possible Spectre-v1 for hwsim_world_regdom_custom


Security Keywords:
- exploit
- sanitize
- bypass

Full commit message:
mac80211_hwsim: Fix possible Spectre-v1 for hwsim_world_regdom_custom

User controls @idx which to be used as index of hwsim_world_regdom_custom.
So, It can be exploited via Spectre-like attack. (speculative execution)

This kind of attack leaks address of hwsim_world_regdom_custom,
It leads an attacker to bypass security mechanism such as KASLR.

So sanitize @idx before using it to prevent attack.

I leveraged strategy [1] to find and exploit this gadget.

[1] https://github.com/jinb-park/linux-exploit/tree/master/exploit-remaining-spectre-gadget/

Signed-off-by: Jinbum Park <jinb.park7@gmail.com>
[johannes: unwrap URL]
Signed-off-by: Johannes Berg <johannes.berg@intel.com>

Metadata:
Author: Jinbum Park <jinb.park7@gmail.com>
Author Date: Tue Jul 31 23:10:40 2018 +0900
Committer: Johannes Berg <johannes.berg@intel.com>
Commit Date: Tue Aug 28 11:14:56 2018 +0200

Files Changed: 1
Lines Added: 4
Lines Removed: 0
Total Changes: 4
