Commit Hash: 349fbfe9b918e6dea00734f07c0fbaf4c2e2df5e
Subject: KVM: PPC: mmio: Return to guest after emulation failure


Security Keywords:
- injection

Full commit message:
KVM: PPC: mmio: Return to guest after emulation failure

If MMIO emulation fails we don't want to crash the whole guest by
returning to userspace.

The original commit bbf45ba57eae ("KVM: ppc: PowerPC 440 KVM
implementation") added a todo:

  /* XXX Deliver Program interrupt to guest. */

and later the commit d69614a295ae ("KVM: PPC: Separate loadstore
emulation from priv emulation") added the Program interrupt injection
but in another file, so I'm assuming it was missed that this block
needed to be altered.

Also change the message to a ratelimited one since we're letting the
guest run and it could flood the host logs.

Signed-off-by: Fabiano Rosas <farosas@linux.ibm.com>
Reviewed-by: Nicholas Piggin <npiggin@gmail.com>
Signed-off-by: Michael Ellerman <mpe@ellerman.id.au>
Link: https://lore.kernel.org/r/20220125215655.1026224-5-farosas@linux.ibm.com

Metadata:
Author: Fabiano Rosas <farosas@linux.ibm.com>
Author Date: Tue Jan 25 18:56:54 2022 -0300
Committer: Michael Ellerman <mpe@ellerman.id.au>
Commit Date: Mon Jan 31 13:43:00 2022 +1100

Files Changed: 1
Lines Added: 3
Lines Removed: 3
Total Changes: 6
