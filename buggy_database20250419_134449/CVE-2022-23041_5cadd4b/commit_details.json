{
  "hash": "5cadd4bb1d7fc9ab201ac14620d1a478357e4ebd",
  "hash_short": "5cadd4bb",
  "subject": "xen/9p: use alloc/free_pages_exact()",
  "body": "Instead of __get_free_pages() and free_pages() use alloc_pages_exact()\nand free_pages_exact(). This is in preparation of a change of\ngnttab_end_foreign_access() which will prohibit use of high-order\npages.\n\nBy using the local variable \"order\" instead of ring->intf->ring_order\nin the error path of xen_9pfs_front_alloc_dataring() another bug is\nfixed, as the error path can be entered before ring->intf->ring_order\nis being set.\n\nBy using alloc_pages_exact() the size in bytes is specified for the\nallocation, which fixes another bug for the case of\norder < (PAGE_SHIFT - XEN_PAGE_SHIFT).\n\nThis is part of CVE-2022-23041 / XSA-396.\n\nReported-by: Simon Gaiser <simon@invisiblethingslab.com>\nSigned-off-by: Juergen Gross <jgross@suse.com>\nReviewed-by: Jan Beulich <jbeulich@suse.com>\n---\nV4:\n- new patch",
  "full_message": "xen/9p: use alloc/free_pages_exact()\n\nInstead of __get_free_pages() and free_pages() use alloc_pages_exact()\nand free_pages_exact(). This is in preparation of a change of\ngnttab_end_foreign_access() which will prohibit use of high-order\npages.\n\nBy using the local variable \"order\" instead of ring->intf->ring_order\nin the error path of xen_9pfs_front_alloc_dataring() another bug is\nfixed, as the error path can be entered before ring->intf->ring_order\nis being set.\n\nBy using alloc_pages_exact() the size in bytes is specified for the\nallocation, which fixes another bug for the case of\norder < (PAGE_SHIFT - XEN_PAGE_SHIFT).\n\nThis is part of CVE-2022-23041 / XSA-396.\n\nReported-by: Simon Gaiser <simon@invisiblethingslab.com>\nSigned-off-by: Juergen Gross <jgross@suse.com>\nReviewed-by: Jan Beulich <jbeulich@suse.com>\n---\nV4:\n- new patch",
  "author_name": "Juergen Gross",
  "author_email": "jgross@suse.com",
  "author_date": "Mon Mar 7 09:48:55 2022 +0100",
  "author_date_iso": "2022-03-07T09:48:55+01:00",
  "committer_name": "Juergen Gross",
  "committer_email": "jgross@suse.com",
  "committer_date": "Mon Mar 7 09:48:55 2022 +0100",
  "committer_date_iso": "2022-03-07T09:48:55+01:00",
  "files_changed": [
    "net/9p/trans_xen.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "net/9p/trans_xen.c",
      "insertions": 6,
      "deletions": 8
    }
  ],
  "total_insertions": 6,
  "total_deletions": 8,
  "total_changes": 14,
  "parents": [
    "cd7bcfab4e73dcb3de92c2014c19f17af3864bfe"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [
      "CVE-2022-23041"
    ],
    "security_keywords": []
  },
  "fix_type": "cve",
  "file_results": [
    {
      "file": "net/9p/trans_xen.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}