Commit Hash: 21d375b6b34ff511a507de27bf316b3dde6938d9
Subject: x86/entry/64: Remove the SYSCALL64 fast path


Security Keywords:
- Hardening

Full commit message:
x86/entry/64: Remove the SYSCALL64 fast path

The SYCALLL64 fast path was a nice, if small, optimization back in the good
old days when syscalls were actually reasonably fast.  Now there is PTI to
slow everything down, and indirect branches are verboten, making everything
messier.  The retpoline code in the fast path is particularly nasty.

Just get rid of the fast path. The slow path is barely slower.

[ tglx: Split out the 'push all extra regs' part ]

Signed-off-by: Andy Lutomirski <luto@kernel.org>
Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
Acked-by: Ingo Molnar <mingo@kernel.org>
Cc: Borislav Petkov <bp@alien8.de>
Cc: Linus Torvalds <torvalds@linux-foundation.org>
Cc: Kernel Hardening <kernel-hardening@lists.openwall.com>
Link: https://lkml.kernel.org/r/462dff8d4d64dfbfc851fbf3130641809d980ecd.1517164461.git.luto@kernel.org

Metadata:
Author: Andy Lutomirski <luto@kernel.org>
Author Date: Sun Jan 28 10:38:49 2018 -0800
Committer: Thomas Gleixner <tglx@linutronix.de>
Commit Date: Tue Jan 30 15:30:36 2018 +0100

Files Changed: 2
Lines Added: 2
Lines Removed: 122
Total Changes: 124
