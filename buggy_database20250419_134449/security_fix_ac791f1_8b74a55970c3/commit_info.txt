Commit Hash: ac791f19a273a7fe254a7596f193af6534582a9f
Subject: media: cec-pin: fix broken tx_ignore_nack_until_eom error injection


Security Keywords:
- injection

Full commit message:
media: cec-pin: fix broken tx_ignore_nack_until_eom error injection

If the tx_ignore_nack_until_eom error injection was activated,
then tx_nacked was never set instead of setting it when the last
byte of the message was transmitted.

As a result the transmit was marked as OK, when it should have
been NACKed.

Modify the condition so that it always sets tx_nacked when the
last byte of the message was transmitted.

Signed-off-by: Hans Verkuil <hans.verkuil@cisco.com>
Cc: <stable@vger.kernel.org>      # for v4.17 and up
Signed-off-by: Hans Verkuil <hansverk@cisco.com>
Signed-off-by: Mauro Carvalho Chehab <mchehab+samsung@kernel.org>

Metadata:
Author: Hans Verkuil <hverkuil@xs4all.nl>
Author Date: Wed Nov 14 03:37:53 2018 -0500
Committer: Mauro Carvalho Chehab <mchehab+samsung@kernel.org>
Commit Date: Fri Nov 23 05:48:44 2018 -0500

Files Changed: 1
Lines Added: 3
Lines Removed: 2
Total Changes: 5
