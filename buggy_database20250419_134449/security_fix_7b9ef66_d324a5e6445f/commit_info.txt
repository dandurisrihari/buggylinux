Commit Hash: 7b9ef666f27afde43c047de2be2985b68ad9febe
Subject: tomoyo: refactor deprecated strncpy


Security Keywords:
- hardening

Full commit message:
tomoyo: refactor deprecated strncpy

`strncpy` is deprecated for use on NUL-terminated destination strings [1].

A suitable replacement is `strscpy` [2] due to the fact that it
guarantees NUL-termination on its destination buffer argument which is
_not_ the case for `strncpy`!

It should be noted that the destination buffer is zero-initialized and
had a max length of `sizeof(dest) - 1`. There is likely _not_ a bug
present in the current implementation. However, by switching to
`strscpy` we get the benefit of no longer needing the `- 1`'s from the
string copy invocations on top of `strscpy` being a safer interface all
together.

[1]: www.kernel.org/doc/html/latest/process/deprecated.html#strncpy-on-nul-terminated-strings
[2]: https://manpages.debian.org/testing/linux-manual-4.8/strscpy.9.en.html

Link: https://github.com/KSPP/linux/issues/90
Cc: linux-hardening@vger.kernel.org
Signed-off-by: Justin Stitt <justinstitt@google.com>
Reviewed-by: Kees Cook <keescook@chromium.org>
Signed-off-by: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>

Metadata:
Author: Justin Stitt <justinstitt@google.com>
Author Date: Thu Aug 3 21:33:44 2023 +0000
Committer: Tetsuo Handa <penguin-kernel@I-love.SAKURA.ne.jp>
Commit Date: Sat Aug 5 19:55:10 2023 +0900

Files Changed: 1
Lines Added: 2
Lines Removed: 3
Total Changes: 5
