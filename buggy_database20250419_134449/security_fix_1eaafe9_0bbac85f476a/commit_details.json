{
  "hash": "1eaafe91a0df4157521b6417b3dd8430bf5f52f0",
  "hash_short": "1eaafe91",
  "subject": "kvm: x86: IA32_ARCH_CAPABILITIES is always supported",
  "body": "If there is a possibility that a VM may migrate to a Skylake host,\nthen the hypervisor should report IA32_ARCH_CAPABILITIES.RSBA[bit 2]\nas being set (future work, of course). This implies that\nCPUID.(EAX=7,ECX=0):EDX.ARCH_CAPABILITIES[bit 29] should be\nset. Therefore, kvm should report this CPUID bit as being supported\nwhether or not the host supports it.  Userspace is still free to clear\nthe bit if it chooses.\n\nFor more information on RSBA, see Intel's white paper, \"Retpoline: A\nBranch Target Injection Mitigation\" (Document Number 337131-001),\ncurrently available at https://bugzilla.kernel.org/show_bug.cgi?id=199511.\n\nSince the IA32_ARCH_CAPABILITIES MSR is emulated in kvm, there is no\ndependency on hardware support for this feature.\n\nSigned-off-by: Jim Mattson <jmattson@google.com>\nReviewed-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\nFixes: 28c1c9fabf48 (\"KVM/VMX: Emulate MSR_IA32_ARCH_CAPABILITIES\")\nCc: stable@vger.kernel.org\nSigned-off-by: Radim Kr\u010dm\u00e1\u0159 <rkrcmar@redhat.com>",
  "full_message": "kvm: x86: IA32_ARCH_CAPABILITIES is always supported\n\nIf there is a possibility that a VM may migrate to a Skylake host,\nthen the hypervisor should report IA32_ARCH_CAPABILITIES.RSBA[bit 2]\nas being set (future work, of course). This implies that\nCPUID.(EAX=7,ECX=0):EDX.ARCH_CAPABILITIES[bit 29] should be\nset. Therefore, kvm should report this CPUID bit as being supported\nwhether or not the host supports it.  Userspace is still free to clear\nthe bit if it chooses.\n\nFor more information on RSBA, see Intel's white paper, \"Retpoline: A\nBranch Target Injection Mitigation\" (Document Number 337131-001),\ncurrently available at https://bugzilla.kernel.org/show_bug.cgi?id=199511.\n\nSince the IA32_ARCH_CAPABILITIES MSR is emulated in kvm, there is no\ndependency on hardware support for this feature.\n\nSigned-off-by: Jim Mattson <jmattson@google.com>\nReviewed-by: Konrad Rzeszutek Wilk <konrad.wilk@oracle.com>\nFixes: 28c1c9fabf48 (\"KVM/VMX: Emulate MSR_IA32_ARCH_CAPABILITIES\")\nCc: stable@vger.kernel.org\nSigned-off-by: Radim Kr\u010dm\u00e1\u0159 <rkrcmar@redhat.com>",
  "author_name": "Jim Mattson",
  "author_email": "jmattson@google.com",
  "author_date": "Wed May 9 14:29:35 2018 -0700",
  "author_date_iso": "2018-05-09T14:29:35-07:00",
  "committer_name": "Radim Kr\u010dm\u00e1\u0159",
  "committer_email": "rkrcmar@redhat.com",
  "committer_date": "Thu May 24 18:38:34 2018 +0200",
  "committer_date_iso": "2018-05-24T18:38:34+02:00",
  "files_changed": [
    "arch/x86/kvm/cpuid.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "arch/x86/kvm/cpuid.c",
      "insertions": 5,
      "deletions": 0
    }
  ],
  "total_insertions": 5,
  "total_deletions": 0,
  "total_changes": 5,
  "parents": [
    "c4d2188206bafa177ea58e9a25b952baa0bf7712"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.17",
    "v4.17-rc7",
    "v4.18",
    "v4.18-rc1",
    "v4.18-rc2",
    "v4.18-rc3",
    "v4.18-rc4",
    "v4.18-rc5",
    "v4.18-rc6",
    "v4.18-rc7"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "Injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/kvm/cpuid.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}