Commit Hash: 58494c980f40274c465ebfdece02d401def088bf
Subject: block, bfq: push up injection only after setting service time


Security Keywords:
- injection

Full commit message:
block, bfq: push up injection only after setting service time

If equal to 0, the injection limit for a bfq_queue is pushed to 1
after a first sample of the total service time of the I/O requests of
the queue is computed (to allow injection to start). Yet, because of a
mistake in the branch that performs this action, the push may happen
also in some other case. This commit fixes this issue.

Tested-by: Oleksandr Natalenko <oleksandr@natalenko.name>
Signed-off-by: Paolo Valente <paolo.valente@linaro.org>
Signed-off-by: Jens Axboe <axboe@kernel.dk>

Metadata:
Author: Paolo Valente <paolo.valente@linaro.org>
Author Date: Thu Aug 22 17:20:37 2019 +0200
Committer: Jens Axboe <axboe@kernel.dk>
Commit Date: Tue Sep 17 20:03:49 2019 -0600

Files Changed: 1
Lines Added: 7
Lines Removed: 5
Total Changes: 12
