{
  "hash": "0486beaf88d2460e9dbcbba281dab683a838f0c6",
  "hash_short": "0486beaf",
  "subject": "Merge tag 'gpio-v5.10-1' of git://git.kernel.org/pub/scm/linux/kernel/git/linusw/linux-gpio",
  "body": "Pull GPIO updates from Linus Walleij:\n \"This time very little driver changes but lots of core changes.\n\n  We have some interesting cooperative work for ARM and Intel alike,\n  making the GPIO subsystem more and more suitable for industrial\n  systems and the like, in addition to the in-kernel users.\n\n  We touch driver core (device properties) and lib/* by adding one\n  simple string array free function, these are authored by Andy\n  Shevchenko who is a well known and recognized core helpers maintainers\n  so this should be fine.\n\n  We also see some Android GKI-related modularization in the MXC\n  drivers.\n\n  Core changes:\n\n   - The big core change is the updated (v2) userspace character device\n     API.\n\n     This corrects badly designed 64-bit alignment around the line\n     events. We also add the debounce request feature. This echoes the\n     often quotes passage from Frederick Brooks \"The mythical man-month\"\n     to always throw one away, which we have seen before in things such\n     as V4L2. So we put in a new one and deprecate and obsolete the old\n     one.\n\n   - All example tools in tools/gpio/* are migrated to the new API to\n     set a good example. The libgpiod userspace library has been\n     augmented to use this new API pretty much from day 1.\n\n   - Some misc API hardening by using strn* function calls has been\n     added as well.\n\n   - Use the simpler IDA interface for GPIO chip instance enumeration.\n\n   - Add device core function for counting string arrays in device\n     properties.\n\n   - Provide a generic library function kfree_strarray() that can be\n     used throughout the kernel.\n\n  Driver enhancements:\n\n   - The DesignWare dwapb-gpio driver has been enhanced and now uses the\n     IRQ handling in the gpiolib core.\n\n   - The mockup and aggregator drivers have seen some substantial code\n     clean-up and now use more of the core kernel inftrastructure.\n\n   - Misc cleanups using dev_err_probe().\n\n   - The MXC drivers (Freescale/NXP) can now be built modularized, which\n     makes modularized GKI Android kernels happy\"\n\n* tag 'gpio-v5.10-1' of git://git.kernel.org/pub/scm/linux/kernel/git/linusw/linux-gpio: (73 commits)\n  gpiolib: Update header block in gpiolib-cdev.h\n  gpiolib: cdev: switch from kstrdup() to kstrndup()\n  docs: gpio: add a new document to its index.rst\n  gpio: pca953x: Add support for the NXP PCAL9554B/C\n  tools: gpio: add debounce support to gpio-event-mon\n  tools: gpio: add multi-line monitoring to gpio-event-mon\n  tools: gpio: port gpio-event-mon to v2 uAPI\n  tools: gpio: port gpio-hammer to v2 uAPI\n  tools: gpio: rename nlines to num_lines\n  tools: gpio: port gpio-watch to v2 uAPI\n  tools: gpio: port lsgpio to v2 uAPI\n  gpio: uapi: document uAPI v1 as deprecated\n  gpiolib: cdev: support setting debounce\n  gpiolib: cdev: support GPIO_V2_LINE_SET_VALUES_IOCTL\n  gpiolib: cdev: support GPIO_V2_LINE_SET_CONFIG_IOCTL\n  gpiolib: cdev: support edge detection for uAPI v2\n  gpiolib: cdev: support GPIO_V2_GET_LINEINFO_IOCTL and GPIO_V2_GET_LINEINFO_WATCH_IOCTL\n  gpiolib: cdev: support GPIO_V2_GET_LINE_IOCTL and GPIO_V2_LINE_GET_VALUES_IOCTL\n  gpiolib: add build option for CDEV v1 ABI\n  gpiolib: make cdev a build option\n  ...",
  "full_message": "Merge tag 'gpio-v5.10-1' of git://git.kernel.org/pub/scm/linux/kernel/git/linusw/linux-gpio\n\nPull GPIO updates from Linus Walleij:\n \"This time very little driver changes but lots of core changes.\n\n  We have some interesting cooperative work for ARM and Intel alike,\n  making the GPIO subsystem more and more suitable for industrial\n  systems and the like, in addition to the in-kernel users.\n\n  We touch driver core (device properties) and lib/* by adding one\n  simple string array free function, these are authored by Andy\n  Shevchenko who is a well known and recognized core helpers maintainers\n  so this should be fine.\n\n  We also see some Android GKI-related modularization in the MXC\n  drivers.\n\n  Core changes:\n\n   - The big core change is the updated (v2) userspace character device\n     API.\n\n     This corrects badly designed 64-bit alignment around the line\n     events. We also add the debounce request feature. This echoes the\n     often quotes passage from Frederick Brooks \"The mythical man-month\"\n     to always throw one away, which we have seen before in things such\n     as V4L2. So we put in a new one and deprecate and obsolete the old\n     one.\n\n   - All example tools in tools/gpio/* are migrated to the new API to\n     set a good example. The libgpiod userspace library has been\n     augmented to use this new API pretty much from day 1.\n\n   - Some misc API hardening by using strn* function calls has been\n     added as well.\n\n   - Use the simpler IDA interface for GPIO chip instance enumeration.\n\n   - Add device core function for counting string arrays in device\n     properties.\n\n   - Provide a generic library function kfree_strarray() that can be\n     used throughout the kernel.\n\n  Driver enhancements:\n\n   - The DesignWare dwapb-gpio driver has been enhanced and now uses the\n     IRQ handling in the gpiolib core.\n\n   - The mockup and aggregator drivers have seen some substantial code\n     clean-up and now use more of the core kernel inftrastructure.\n\n   - Misc cleanups using dev_err_probe().\n\n   - The MXC drivers (Freescale/NXP) can now be built modularized, which\n     makes modularized GKI Android kernels happy\"\n\n* tag 'gpio-v5.10-1' of git://git.kernel.org/pub/scm/linux/kernel/git/linusw/linux-gpio: (73 commits)\n  gpiolib: Update header block in gpiolib-cdev.h\n  gpiolib: cdev: switch from kstrdup() to kstrndup()\n  docs: gpio: add a new document to its index.rst\n  gpio: pca953x: Add support for the NXP PCAL9554B/C\n  tools: gpio: add debounce support to gpio-event-mon\n  tools: gpio: add multi-line monitoring to gpio-event-mon\n  tools: gpio: port gpio-event-mon to v2 uAPI\n  tools: gpio: port gpio-hammer to v2 uAPI\n  tools: gpio: rename nlines to num_lines\n  tools: gpio: port gpio-watch to v2 uAPI\n  tools: gpio: port lsgpio to v2 uAPI\n  gpio: uapi: document uAPI v1 as deprecated\n  gpiolib: cdev: support setting debounce\n  gpiolib: cdev: support GPIO_V2_LINE_SET_VALUES_IOCTL\n  gpiolib: cdev: support GPIO_V2_LINE_SET_CONFIG_IOCTL\n  gpiolib: cdev: support edge detection for uAPI v2\n  gpiolib: cdev: support GPIO_V2_GET_LINEINFO_IOCTL and GPIO_V2_GET_LINEINFO_WATCH_IOCTL\n  gpiolib: cdev: support GPIO_V2_GET_LINE_IOCTL and GPIO_V2_LINE_GET_VALUES_IOCTL\n  gpiolib: add build option for CDEV v1 ABI\n  gpiolib: make cdev a build option\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Tue Oct 13 10:09:33 2020 -0700",
  "author_date_iso": "2020-10-13T10:09:33-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Tue Oct 13 10:09:33 2020 -0700",
  "committer_date_iso": "2020-10-13T10:09:33-07:00",
  "files_changed": [
    "Documentation/devicetree/bindings/trivial-devices.yaml",
    "drivers/gpio/gpio-omap.c",
    "drivers/gpio/gpio-pca953x.c",
    "drivers/gpio/gpio-tc3589x.c",
    "drivers/gpio/gpiolib-acpi.c",
    "drivers/gpio/gpiolib-cdev.c"
  ],
  "files_changed_count": 6,
  "stats": [
    {
      "file": "Documentation/admin-guide/gpio/gpio-mockup.rst",
      "insertions": 50,
      "deletions": 0
    },
    {
      "file": "Documentation/admin-guide/gpio/index.rst",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/gpio/fsl-imx-gpio.yaml",
      "insertions": 49,
      "deletions": 6
    },
    {
      "file": "Documentation/devicetree/bindings/gpio/gpio-max732x.txt",
      "insertions": 0,
      "deletions": 58
    },
    {
      "file": "Documentation/devicetree/bindings/gpio/gpio-pca953x.txt",
      "insertions": 0,
      "deletions": 90
    },
    {
      "file": "Documentation/devicetree/bindings/gpio/gpio-pca95xx.yaml",
      "insertions": 232,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/gpio/pl061-gpio.yaml",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/gpio/renesas,rcar-gpio.yaml",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/gpio/snps,dw-apb-gpio.yaml",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/trivial-devices.yaml",
      "insertions": 0,
      "deletions": 4
    },
    {
      "file": "drivers/gpio/Kconfig",
      "insertions": 29,
      "deletions": 4
    },
    {
      "file": "drivers/gpio/Makefile",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "drivers/gpio/gpio-aggregator.c",
      "insertions": 43,
      "deletions": 27
    },
    {
      "file": "drivers/gpio/gpio-bcm-kona.c",
      "insertions": 1,
      "deletions": 4
    },
    {
      "file": "drivers/gpio/gpio-davinci.c",
      "insertions": 2,
      "deletions": 6
    },
    {
      "file": "drivers/gpio/gpio-dwapb.c",
      "insertions": 181,
      "deletions": 171
    },
    {
      "file": "drivers/gpio/gpio-mockup.c",
      "insertions": 80,
      "deletions": 78
    },
    {
      "file": "drivers/gpio/gpio-mpc8xxx.c",
      "insertions": 12,
      "deletions": 33
    },
    {
      "file": "drivers/gpio/gpio-mxc.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "drivers/gpio/gpio-omap.c",
      "insertions": 1,
      "deletions": 4
    },
    {
      "file": "drivers/gpio/gpio-pca953x.c",
      "insertions": 5,
      "deletions": 6
    },
    {
      "file": "drivers/gpio/gpio-pisosr.c",
      "insertions": 3,
      "deletions": 6
    },
    {
      "file": "drivers/gpio/gpio-stp-xway.c",
      "insertions": 48,
      "deletions": 6
    },
    {
      "file": "drivers/gpio/gpio-tc3589x.c",
      "insertions": 16,
      "deletions": 2
    },
    {
      "file": "drivers/gpio/gpio-zynq.c",
      "insertions": 3,
      "deletions": 5
    },
    {
      "file": "drivers/gpio/gpiolib-acpi.c",
      "insertions": 0,
      "deletions": 3
    },
    {
      "file": "drivers/gpio/gpiolib-cdev.c",
      "insertions": 1375,
      "deletions": 167
    },
    {
      "file": "drivers/gpio/gpiolib-cdev.h",
      "insertions": 18,
      "deletions": 1
    },
    {
      "file": "drivers/gpio/gpiolib-devprop.c",
      "insertions": 0,
      "deletions": 63
    },
    {
      "file": "drivers/gpio/gpiolib-of.c",
      "insertions": 0,
      "deletions": 5
    },
    {
      "file": "drivers/gpio/gpiolib.c",
      "insertions": 66,
      "deletions": 23
    },
    {
      "file": "drivers/gpio/gpiolib.h",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "drivers/pinctrl/bcm/Kconfig",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "include/linux/gpio/driver.h",
      "insertions": 0,
      "deletions": 3
    },
    {
      "file": "include/linux/mfd/tc3589x.h",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "include/linux/platform_data/gpio-dwapb.h",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "include/linux/property.h",
      "insertions": 13,
      "deletions": 0
    },
    {
      "file": "include/linux/string_helpers.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "include/uapi/linux/gpio.h",
      "insertions": 321,
      "deletions": 13
    },
    {
      "file": "lib/string_helpers.c",
      "insertions": 23,
      "deletions": 0
    },
    {
      "file": "tools/gpio/gpio-event-mon.c",
      "insertions": 93,
      "deletions": 53
    },
    {
      "file": "tools/gpio/gpio-hammer.c",
      "insertions": 32,
      "deletions": 24
    },
    {
      "file": "tools/gpio/gpio-utils.c",
      "insertions": 141,
      "deletions": 35
    },
    {
      "file": "tools/gpio/gpio-utils.h",
      "insertions": 43,
      "deletions": 5
    },
    {
      "file": "tools/gpio/gpio-watch.c",
      "insertions": 8,
      "deletions": 8
    },
    {
      "file": "tools/gpio/lsgpio.c",
      "insertions": 38,
      "deletions": 22
    }
  ],
  "total_insertions": 2962,
  "total_deletions": 938,
  "total_changes": 3900,
  "parents": [
    "a996b9c61729cd1507e48303c214dc317df890e2",
    "fc709df553a34fd18010f52e6b47652268d83e7d"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpio/gpio-pca953x.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpio/gpio-omap.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "Documentation/devicetree/bindings/trivial-devices.yaml",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpio/gpio-tc3589x.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpio/gpiolib-cdev.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpio/gpiolib-acpi.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}