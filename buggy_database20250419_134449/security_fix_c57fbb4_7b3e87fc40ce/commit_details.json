{
  "hash": "c57fbb404af28eda44d0590ede8812b889a89b8c",
  "hash_short": "c57fbb40",
  "subject": "greybus: firmware: Add runtime PM support",
  "body": "This patch implements runtime PM support for firmware management bundle.\nThis guarantees that the bundle will be active, while the AP or the\nModule is trying to exchange any operations over any of the CPorts.\n\n- Firmware Management CPort:\n\n  Runtime PM get/put calls are placed around the ioctl calls, which are\n  all implemented as blocking ioctls.\n\n- Component Authentication CPort:\n\n  Runtime PM get/put calls are placed around the ioctl calls, which are\n  all implemented as blocking ioctls.\n\n- SPI:\n\n  Uses the interface provided by spilib.c and runtime PM get/put are\n  called around connection usage.\n\n- firmware-download:\n\n  This is the most tricky one. All operations on this CPort are\n  initiated from the Module and not from the AP. And the AP needs to do\n  runtime_pm_get() before any request is received over this CPort.\n\n  The module doesn't send any request over this connection, unless the\n  AP has requested the module over firmware management CPort to download\n  a firmware package over firmware download CPort.\n\n  And so the runtime PM get/put calls around the ioctls in\n  fw-management.c are sufficient to handle the firmware management CPort\n  as well.\n\nSigned-off-by: Viresh Kumar <viresh.kumar@linaro.org>\nSigned-off-by: Greg Kroah-Hartman <gregkh@google.com>",
  "full_message": "greybus: firmware: Add runtime PM support\n\nThis patch implements runtime PM support for firmware management bundle.\nThis guarantees that the bundle will be active, while the AP or the\nModule is trying to exchange any operations over any of the CPorts.\n\n- Firmware Management CPort:\n\n  Runtime PM get/put calls are placed around the ioctl calls, which are\n  all implemented as blocking ioctls.\n\n- Component Authentication CPort:\n\n  Runtime PM get/put calls are placed around the ioctl calls, which are\n  all implemented as blocking ioctls.\n\n- SPI:\n\n  Uses the interface provided by spilib.c and runtime PM get/put are\n  called around connection usage.\n\n- firmware-download:\n\n  This is the most tricky one. All operations on this CPort are\n  initiated from the Module and not from the AP. And the AP needs to do\n  runtime_pm_get() before any request is received over this CPort.\n\n  The module doesn't send any request over this connection, unless the\n  AP has requested the module over firmware management CPort to download\n  a firmware package over firmware download CPort.\n\n  And so the runtime PM get/put calls around the ioctls in\n  fw-management.c are sufficient to handle the firmware management CPort\n  as well.\n\nSigned-off-by: Viresh Kumar <viresh.kumar@linaro.org>\nSigned-off-by: Greg Kroah-Hartman <gregkh@google.com>",
  "author_name": "Viresh Kumar",
  "author_email": "viresh.kumar@linaro.org",
  "author_date": "Tue Jul 26 13:41:02 2016 -0700",
  "author_date_iso": "2016-07-26T13:41:02-07:00",
  "committer_name": "Greg Kroah-Hartman",
  "committer_email": "gregkh@google.com",
  "committer_date": "Tue Jul 26 15:29:00 2016 -0700",
  "committer_date_iso": "2016-07-26T15:29:00-07:00",
  "files_changed": [
    "drivers/staging/greybus/authentication.c",
    "drivers/staging/greybus/fw-core.c",
    "drivers/staging/greybus/fw-management.c"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "drivers/staging/greybus/authentication.c",
      "insertions": 8,
      "deletions": 2
    },
    {
      "file": "drivers/staging/greybus/fw-core.c",
      "insertions": 30,
      "deletions": 1
    },
    {
      "file": "drivers/staging/greybus/fw-management.c",
      "insertions": 8,
      "deletions": 2
    }
  ],
  "total_insertions": 46,
  "total_deletions": 5,
  "total_changes": 51,
  "parents": [
    "2321f049a93368fffc3375cfbf2f9f9561ef1e69"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "Authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/staging/greybus/authentication.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/staging/greybus/fw-core.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/staging/greybus/fw-management.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}