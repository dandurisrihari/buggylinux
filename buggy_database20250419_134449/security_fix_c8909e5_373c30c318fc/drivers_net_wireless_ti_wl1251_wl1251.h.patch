commit c8909e5a275bfb57dc525d6551ed572e118e2eea
Author: David Gnedt <david.gnedt@davizone.at>
Date:   Tue Jan 7 13:10:14 2014 +0100

    wl1251: enable tx path in monitor mode if necessary for packet injection
    
    If necessary enable the tx path in monitor mode for packet injection using
    the JOIN command with BSS_TYPE_STA_BSS and zero BSSID.
    
    Signed-off-by: David Gnedt <david.gnedt@davizone.at>
    Signed-off-by: Pali Roh√°r <pali.rohar@gmail.com>
    Signed-off-by: Pavel Machek <pavel@ucw.cz>
    Signed-off-by: John W. Linville <linville@tuxdriver.com>

diff --git a/drivers/net/wireless/ti/wl1251/wl1251.h b/drivers/net/wireless/ti/wl1251/wl1251.h
index e231cdc44fc5..235617a7716d 100644
--- a/drivers/net/wireless/ti/wl1251/wl1251.h
+++ b/drivers/net/wireless/ti/wl1251/wl1251.h
@@ -305,6 +305,7 @@ struct wl1251 {
 	u8 listen_int;
 	int channel;
 	bool monitor_present;
+	bool joined;
 
 	void *target_mem_map;
 	struct acx_data_path_params_resp *data_path;