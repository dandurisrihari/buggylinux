commit 45880f7b7b19e043ce0aaa4cb7d05369425c82fa
Author: Leo Yan <leo.yan@linux.dev>
Date:   Tue Aug 6 18:00:13 2019 +0800

    error-injection: Consolidate override function definition
    
    The function override_function_with_return() is defined separately for
    each architecture and every architecture's definition is almost same
    with each other.  E.g. x86 and powerpc both define function in its own
    asm/error-injection.h header and override_function_with_return() has
    the same definition, the only difference is that x86 defines an extra
    function just_return_func() but it is specific for x86 and is only used
    by x86's override_function_with_return(), so don't need to export this
    function.
    
    This patch consolidates override_function_with_return() definition into
    asm-generic/error-injection.h header, thus all architectures can use the
    common definition.  As result, the architecture specific headers are
    removed; the include/linux/error-injection.h header also changes to
    include asm-generic/error-injection.h header rather than architecture
    header, furthermore, it includes linux/compiler.h for successful
    compilation.
    
    Reviewed-by: Masami Hiramatsu <mhiramat@kernel.org>
    Signed-off-by: Leo Yan <leo.yan@linaro.org>
    Signed-off-by: Will Deacon <will@kernel.org>

diff --git a/include/linux/error-injection.h b/include/linux/error-injection.h
index 280c61ecbf20..635a95caf29f 100644
--- a/include/linux/error-injection.h
+++ b/include/linux/error-injection.h
@@ -2,16 +2,16 @@
 #ifndef _LINUX_ERROR_INJECTION_H
 #define _LINUX_ERROR_INJECTION_H
 
-#ifdef CONFIG_FUNCTION_ERROR_INJECTION
+#include <linux/compiler.h>
+#include <asm-generic/error-injection.h>
 
-#include <asm/error-injection.h>
+#ifdef CONFIG_FUNCTION_ERROR_INJECTION
 
 extern bool within_error_injection_list(unsigned long addr);
 extern int get_injectable_error_type(unsigned long addr);
 
 #else /* !CONFIG_FUNCTION_ERROR_INJECTION */
 
-#include <asm-generic/error-injection.h>
 static inline bool within_error_injection_list(unsigned long addr)
 {
 	return false;