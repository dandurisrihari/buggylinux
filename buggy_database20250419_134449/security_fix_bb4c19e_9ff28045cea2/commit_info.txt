Commit Hash: bb4c19e030f45c5416f1eb4daa94fbaf7165e9ea
Subject: block: null_blk: make fault-injection dynamically configurable per device


Security Keywords:
- injection

Full commit message:
block: null_blk: make fault-injection dynamically configurable per device

The null_blk driver has multiple driver-specific fault injection
mechanisms.  Each fault injection configuration can only be specified by a
module parameter and cannot be reconfigured without reloading the driver.
Also, each configuration is common to all devices and is initialized every
time a new device is added.

This change adds the following subdirectories for each null_blk device.

/sys/kernel/config/nullb/<disk>/timeout_inject
/sys/kernel/config/nullb/<disk>/requeue_inject
/sys/kernel/config/nullb/<disk>/init_hctx_fault_inject

Each fault injection attribute can be dynamically set per device by a
corresponding file in these directories.

Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com>
Link: https://lore.kernel.org/r/20230327143733.14599-3-akinobu.mita@gmail.com
Signed-off-by: Jens Axboe <axboe@kernel.dk>

Metadata:
Author: Akinobu Mita <akinobu.mita@gmail.com>
Author Date: Mon Mar 27 23:37:33 2023 +0900
Committer: Jens Axboe <axboe@kernel.dk>
Commit Date: Thu Apr 13 07:38:55 2023 -0600

Files Changed: 4
Lines Added: 87
Lines Removed: 23
Total Changes: 110
