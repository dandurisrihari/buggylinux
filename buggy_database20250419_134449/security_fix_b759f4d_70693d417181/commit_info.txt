Commit Hash: b759f4ddcafb6414056cf3e49f2ab12359101c2e
Subject: mac80211: fix idle handling in monitor mode


Security Keywords:
- injection

Full commit message:
mac80211: fix idle handling in monitor mode

When the driver does not want a monitor mode VIF, no channel context is
allocated for it. This causes ieee80211_recalc_idle to put the hardware
into idle mode if only a monitor mode is active, breaking injection.

Fix this by checking local->monitors in addition to active channel
contexts.

Signed-off-by: Felix Fietkau <nbd@openwrt.org>
Signed-off-by: Johannes Berg <johannes.berg@intel.com>

Metadata:
Author: Felix Fietkau <nbd@openwrt.org>
Author Date: Sat Feb 23 18:40:57 2013 +0100
Committer: Johannes Berg <johannes.berg@intel.com>
Commit Date: Tue Feb 26 21:53:01 2013 +0100

Files Changed: 1
Lines Added: 1
Lines Removed: 1
Total Changes: 2
