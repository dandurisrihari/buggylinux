{
  "hash": "89581f06b2bc225f0c9822fa52e714aa2e3810dd",
  "hash_short": "89581f06",
  "subject": "arm64: KVM: Set cpsr before spsr on fault injection",
  "body": "We need to set cpsr before determining the spsr bank, as the bank\ndepends on the target exception level of the injection, not the\ncurrent mode of the vcpu. Normally this is one in the same (EL1),\nbut not when we manage to trap an EL0 fault. It still doesn't really\nmatter for the 64-bit EL0 case though, as vcpu_spsr() unconditionally\nuses the EL1 bank for that. However the 32-bit EL0 case gets fun, as\nthat path will lead to the BUG() in vcpu_spsr32().\n\nThis patch fixes the assignment order and also modifies some white\nspace in order to better group pairs of lines that have strict order.\n\nCc: stable@vger.kernel.org # v4.5\nSigned-off-by: Andrew Jones <drjones@redhat.com>\nSigned-off-by: Marc Zyngier <marc.zyngier@arm.com>",
  "full_message": "arm64: KVM: Set cpsr before spsr on fault injection\n\nWe need to set cpsr before determining the spsr bank, as the bank\ndepends on the target exception level of the injection, not the\ncurrent mode of the vcpu. Normally this is one in the same (EL1),\nbut not when we manage to trap an EL0 fault. It still doesn't really\nmatter for the 64-bit EL0 case though, as vcpu_spsr() unconditionally\nuses the EL1 bank for that. However the 32-bit EL0 case gets fun, as\nthat path will lead to the BUG() in vcpu_spsr32().\n\nThis patch fixes the assignment order and also modifies some white\nspace in order to better group pairs of lines that have strict order.\n\nCc: stable@vger.kernel.org # v4.5\nSigned-off-by: Andrew Jones <drjones@redhat.com>\nSigned-off-by: Marc Zyngier <marc.zyngier@arm.com>",
  "author_name": "Andrew Jones",
  "author_email": "drjones@redhat.com",
  "author_date": "Fri Jul 22 10:38:46 2016 -0400",
  "author_date_iso": "2016-07-22T10:38:46-04:00",
  "committer_name": "Marc Zyngier",
  "committer_email": "marc.zyngier@arm.com",
  "committer_date": "Mon Aug 1 15:09:47 2016 +0100",
  "committer_date_iso": "2016-08-01T15:09:47+01:00",
  "files_changed": [
    "arch/arm64/kvm/inject_fault.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "arch/arm64/kvm/inject_fault.c",
      "insertions": 5,
      "deletions": 7
    }
  ],
  "total_insertions": 5,
  "total_deletions": 7,
  "total_changes": 12,
  "parents": [
    "3f312db6b65baf393bee02f6dfdfaa94d786dd0f"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/arm64/kvm/inject_fault.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}