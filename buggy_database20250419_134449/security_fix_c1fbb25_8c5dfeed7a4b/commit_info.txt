Commit Hash: c1fbb258846dfc425507a093922d2d001e54c3ea
Subject: cfg80211: free sme on connection failures


Security Keywords:
- authentication

Full commit message:
cfg80211: free sme on connection failures

cfg80211 is notified about connection failures by
__cfg80211_connect_result() call. However, this
function currently does not free cfg80211 sme.

This results in hanging connection attempts in some cases

e.g. when mac80211 authentication attempt is denied,
we have this function call:
ieee80211_rx_mgmt_auth() -> cfg80211_rx_mlme_mgmt() ->
cfg80211_process_auth() -> cfg80211_sme_rx_auth() ->
__cfg80211_connect_result()

but cfg80211_sme_free() is never get called.

Fixes: ceca7b712 ("cfg80211: separate internal SME implementation")
Cc: stable@vger.kernel.org (3.10+)
Signed-off-by: Eliad Peller <eliadx.peller@intel.com>
Signed-off-by: Johannes Berg <johannes.berg@intel.com>

Metadata:
Author: Eliad Peller <eliad@wizery.com>
Author Date: Wed Apr 30 15:58:13 2014 +0300
Committer: Johannes Berg <johannes.berg@intel.com>
Commit Date: Mon May 5 14:59:00 2014 +0200

Files Changed: 1
Lines Added: 1
Lines Removed: 1
Total Changes: 2
