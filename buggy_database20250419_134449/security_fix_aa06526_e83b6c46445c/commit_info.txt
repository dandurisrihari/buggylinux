Commit Hash: aa065263ecb0b0df096ff4b02b2fb88060dd2d45
Subject: iwlwifi: Make injection of non-broadcast frames work again


Security Keywords:
- injection

Full commit message:
iwlwifi: Make injection of non-broadcast frames work again

Commit 1ccb84d87d04df3c76cd4352fe69786d8c7cf016 by Wey-Yi Guy
("iwlwifi: clean up unused NL80211_IFTYPE_MONITOR for Monitor mode")
broke injection of non-broadcast frames to unassociated stations
(causing a SYSASSERT for all such injected frames), due to injected
frames no longer automatically getting a broadcast station ID assigned.
This patch restores the old behavior, fixing the aforementioned
regression.

Also, consistently check for IEEE80211_TX_CTL_INJECTED instead of
iwl_is_monitor_mode in the TX path, as TX_CTL_INJECTED specifically
means that a given packet is coming from a monitor interface, while
iwl_is_monitor_mode only shows whether a monitor interface exists
on the device.

Signed-off-by: Gábor Stefanik <netrolller.3d@gmail.com>
Acked-by: Reinette Chatre <reinette.chatre@intel.com>
Signed-off-by: John W. Linville <linville@tuxdriver.com>

Metadata:
Author: Gábor Stefanik <netrolller.3d@gmail.com>
Author Date: Fri Aug 21 20:44:09 2009 +0200
Committer: John W. Linville <linville@tuxdriver.com>
Commit Date: Fri Aug 28 14:40:36 2009 -0400

Files Changed: 2
Lines Added: 12
Lines Removed: 7
Total Changes: 19
