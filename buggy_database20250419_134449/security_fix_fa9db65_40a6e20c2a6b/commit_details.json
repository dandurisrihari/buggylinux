{
  "hash": "fa9db655d0e112c108fe838809608caf759bdf5e",
  "hash_short": "fa9db655",
  "subject": "Merge tag 'for-5.20/block-2022-08-04' of git://git.kernel.dk/linux-block",
  "body": "Pull block driver updates from Jens Axboe:\n\n - NVMe pull requests via Christoph:\n      - add support for In-Band authentication (Hannes Reinecke)\n      - handle the persistent internal error AER (Michael Kelley)\n      - use in-capsule data for TCP I/O queue connect (Caleb Sander)\n      - remove timeout for getting RDMA-CM established event (Israel\n        Rukshin)\n      - misc cleanups (Joel Granados, Sagi Grimberg, Chaitanya Kulkarni,\n        Guixin Liu, Xiang wangx)\n      - use command_id instead of req->tag in trace_nvme_complete_rq()\n        (Bean Huo)\n      - various fixes for the new authentication code (Lukas Bulwahn,\n        Dan Carpenter, Colin Ian King, Chaitanya Kulkarni, Hannes\n        Reinecke)\n      - small cleanups (Liu Song, Christoph Hellwig)\n      - restore compat_ioctl support (Nick Bowler)\n      - make a nvmet-tcp workqueue lockdep-safe (Sagi Grimberg)\n      - enable generic interface (/dev/ngXnY) for unknown command sets\n        (Joel Granados, Christoph Hellwig)\n      - don't always build constants.o (Christoph Hellwig)\n      - print the command name of aborted commands (Christoph Hellwig)\n\n - MD pull requests via Song:\n      - Improve raid5 lock contention, by Logan Gunthorpe.\n      - Misc fixes to raid5, by Logan Gunthorpe.\n      - Fix race condition with md_reap_sync_thread(), by Guoqing Jiang.\n      - Fix potential deadlock with raid5_quiesce and\n        raid5_get_active_stripe, by Logan Gunthorpe.\n      - Refactoring md_alloc(), by Christoph\"\n      - Fix md disk_name lifetime problems, by Christoph Hellwig\n      - Convert prepare_to_wait() to wait_woken() api, by Logan\n        Gunthorpe;\n      - Fix sectors_to_do bitmap issue, by Logan Gunthorpe.\n\n - Work on unifying the null_blk module parameters and configfs API\n   (Vincent)\n\n - drbd bitmap IO error fix (Lars)\n\n - Set of rnbd fixes (Guoqing, Md Haris)\n\n - Remove experimental marker on bcache async device registration (Coly)\n\n - Series from cleaning up the bio splitting (Christoph)\n\n - Removal of the sx8 block driver. This hardware never really\n   widespread, and it didn't receive a lot of attention after the\n   initial merge of it back in 2005 (Christoph)\n\n - A few fixes for s390 dasd (Eric, Jiang)\n\n - Followup set of fixes for ublk (Ming)\n\n - Support for UBLK_IO_NEED_GET_DATA for ublk (ZiyangZhang)\n\n - Fixes for the dio dma alignment (Keith)\n\n - Misc fixes and cleanups (Ming, Yu, Dan, Christophe\n\n* tag 'for-5.20/block-2022-08-04' of git://git.kernel.dk/linux-block: (136 commits)\n  s390/dasd: Establish DMA alignment\n  s390/dasd: drop unexpected word 'for' in comments\n  ublk_drv: add support for UBLK_IO_NEED_GET_DATA\n  ublk_cmd.h: add one new ublk command: UBLK_IO_NEED_GET_DATA\n  ublk_drv: cleanup ublksrv_ctrl_dev_info\n  ublk_drv: add SET_PARAMS/GET_PARAMS control command\n  ublk_drv: fix ublk device leak in case that add_disk fails\n  ublk_drv: cancel device even though disk isn't up\n  block: fix leaking page ref on truncated direct io\n  block: ensure bio_iov_add_page can't fail\n  block: ensure iov_iter advances for added pages\n  drivers:md:fix a potential use-after-free bug\n  md/raid5: Ensure batch_last is released before sleeping for quiesce\n  md/raid5: Move stripe_request_ctx up\n  md/raid5: Drop unnecessary call to r5c_check_stripe_cache_usage()\n  md/raid5: Make is_inactive_blocked() helper\n  md/raid5: Refactor raid5_get_active_stripe()\n  block: pass struct queue_limits to the bio splitting helpers\n  block: move bio_allowed_max_sectors to blk-merge.c\n  block: move the call to get_max_io_size out of blk_bio_segment_split\n  ...",
  "full_message": "Merge tag 'for-5.20/block-2022-08-04' of git://git.kernel.dk/linux-block\n\nPull block driver updates from Jens Axboe:\n\n - NVMe pull requests via Christoph:\n      - add support for In-Band authentication (Hannes Reinecke)\n      - handle the persistent internal error AER (Michael Kelley)\n      - use in-capsule data for TCP I/O queue connect (Caleb Sander)\n      - remove timeout for getting RDMA-CM established event (Israel\n        Rukshin)\n      - misc cleanups (Joel Granados, Sagi Grimberg, Chaitanya Kulkarni,\n        Guixin Liu, Xiang wangx)\n      - use command_id instead of req->tag in trace_nvme_complete_rq()\n        (Bean Huo)\n      - various fixes for the new authentication code (Lukas Bulwahn,\n        Dan Carpenter, Colin Ian King, Chaitanya Kulkarni, Hannes\n        Reinecke)\n      - small cleanups (Liu Song, Christoph Hellwig)\n      - restore compat_ioctl support (Nick Bowler)\n      - make a nvmet-tcp workqueue lockdep-safe (Sagi Grimberg)\n      - enable generic interface (/dev/ngXnY) for unknown command sets\n        (Joel Granados, Christoph Hellwig)\n      - don't always build constants.o (Christoph Hellwig)\n      - print the command name of aborted commands (Christoph Hellwig)\n\n - MD pull requests via Song:\n      - Improve raid5 lock contention, by Logan Gunthorpe.\n      - Misc fixes to raid5, by Logan Gunthorpe.\n      - Fix race condition with md_reap_sync_thread(), by Guoqing Jiang.\n      - Fix potential deadlock with raid5_quiesce and\n        raid5_get_active_stripe, by Logan Gunthorpe.\n      - Refactoring md_alloc(), by Christoph\"\n      - Fix md disk_name lifetime problems, by Christoph Hellwig\n      - Convert prepare_to_wait() to wait_woken() api, by Logan\n        Gunthorpe;\n      - Fix sectors_to_do bitmap issue, by Logan Gunthorpe.\n\n - Work on unifying the null_blk module parameters and configfs API\n   (Vincent)\n\n - drbd bitmap IO error fix (Lars)\n\n - Set of rnbd fixes (Guoqing, Md Haris)\n\n - Remove experimental marker on bcache async device registration (Coly)\n\n - Series from cleaning up the bio splitting (Christoph)\n\n - Removal of the sx8 block driver. This hardware never really\n   widespread, and it didn't receive a lot of attention after the\n   initial merge of it back in 2005 (Christoph)\n\n - A few fixes for s390 dasd (Eric, Jiang)\n\n - Followup set of fixes for ublk (Ming)\n\n - Support for UBLK_IO_NEED_GET_DATA for ublk (ZiyangZhang)\n\n - Fixes for the dio dma alignment (Keith)\n\n - Misc fixes and cleanups (Ming, Yu, Dan, Christophe\n\n* tag 'for-5.20/block-2022-08-04' of git://git.kernel.dk/linux-block: (136 commits)\n  s390/dasd: Establish DMA alignment\n  s390/dasd: drop unexpected word 'for' in comments\n  ublk_drv: add support for UBLK_IO_NEED_GET_DATA\n  ublk_cmd.h: add one new ublk command: UBLK_IO_NEED_GET_DATA\n  ublk_drv: cleanup ublksrv_ctrl_dev_info\n  ublk_drv: add SET_PARAMS/GET_PARAMS control command\n  ublk_drv: fix ublk device leak in case that add_disk fails\n  ublk_drv: cancel device even though disk isn't up\n  block: fix leaking page ref on truncated direct io\n  block: ensure bio_iov_add_page can't fail\n  block: ensure iov_iter advances for added pages\n  drivers:md:fix a potential use-after-free bug\n  md/raid5: Ensure batch_last is released before sleeping for quiesce\n  md/raid5: Move stripe_request_ctx up\n  md/raid5: Drop unnecessary call to r5c_check_stripe_cache_usage()\n  md/raid5: Make is_inactive_blocked() helper\n  md/raid5: Refactor raid5_get_active_stripe()\n  block: pass struct queue_limits to the bio splitting helpers\n  block: move bio_allowed_max_sectors to blk-merge.c\n  block: move the call to get_max_io_size out of blk_bio_segment_split\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Thu Aug 4 20:00:14 2022 -0700",
  "author_date_iso": "2022-08-04T20:00:14-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Thu Aug 4 20:00:14 2022 -0700",
  "committer_date_iso": "2022-08-04T20:00:14-07:00",
  "files_changed": [
    "MAINTAINERS",
    "include/linux/blkdev.h",
    "lib/Makefile"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "Documentation/block/null_blk.rst",
      "insertions": 22,
      "deletions": 0
    },
    {
      "file": "MAINTAINERS",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "block/bio-integrity.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "block/bio.c",
      "insertions": 25,
      "deletions": 26
    },
    {
      "file": "block/blk-core.c",
      "insertions": 1,
      "deletions": 8
    },
    {
      "file": "block/blk-merge.c",
      "insertions": 94,
      "deletions": 91
    },
    {
      "file": "block/blk-mq.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "block/blk-sysfs.c",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "block/blk.h",
      "insertions": 21,
      "deletions": 26
    },
    {
      "file": "block/bounce.c",
      "insertions": 13,
      "deletions": 13
    },
    {
      "file": "block/genhd.c",
      "insertions": 7,
      "deletions": 1
    },
    {
      "file": "crypto/kpp.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "crypto/shash.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "drivers/block/Kconfig",
      "insertions": 0,
      "deletions": 9
    },
    {
      "file": "drivers/block/Makefile",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "drivers/block/drbd/drbd_bitmap.c",
      "insertions": 42,
      "deletions": 7
    },
    {
      "file": "drivers/block/drbd/drbd_req.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/block/nbd.c",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "drivers/block/null_blk/main.c",
      "insertions": 82,
      "deletions": 26
    },
    {
      "file": "drivers/block/null_blk/null_blk.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/block/pktcdvd.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/block/ps3vram.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/block/rnbd/rnbd-clt-sysfs.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/block/rnbd/rnbd-clt.c",
      "insertions": 119,
      "deletions": 82
    },
    {
      "file": "drivers/block/rnbd/rnbd-clt.h",
      "insertions": 3,
      "deletions": 15
    },
    {
      "file": "drivers/block/rnbd/rnbd-srv.c",
      "insertions": 9,
      "deletions": 11
    },
    {
      "file": "drivers/block/rnbd/rnbd-srv.h",
      "insertions": 0,
      "deletions": 4
    },
    {
      "file": "drivers/block/sx8.c",
      "insertions": 0,
      "deletions": 1582
    },
    {
      "file": "drivers/block/ublk_drv.c",
      "insertions": 303,
      "deletions": 45
    },
    {
      "file": "drivers/md/bcache/Kconfig",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/md/dm-raid.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/md/dm.c",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "drivers/md/md-autodetect.c",
      "insertions": 6,
      "deletions": 15
    },
    {
      "file": "drivers/md/md-cluster.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/md/md.c",
      "insertions": 227,
      "deletions": 197
    },
    {
      "file": "drivers/md/md.h",
      "insertions": 19,
      "deletions": 0
    },
    {
      "file": "drivers/md/raid10.c",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "drivers/md/raid5-cache.c",
      "insertions": 19,
      "deletions": 21
    },
    {
      "file": "drivers/md/raid5-log.h",
      "insertions": 37,
      "deletions": 40
    },
    {
      "file": "drivers/md/raid5-ppl.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/md/raid5.c",
      "insertions": 482,
      "deletions": 245
    },
    {
      "file": "drivers/md/raid5.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/nvme/Kconfig",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/Makefile",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/common/Kconfig",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/common/Makefile",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/common/auth.c",
      "insertions": 483,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/host/Kconfig",
      "insertions": 15,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/host/Makefile",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "drivers/nvme/host/apple.c",
      "insertions": 17,
      "deletions": 11
    },
    {
      "file": "drivers/nvme/host/auth.c",
      "insertions": 1017,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/host/constants.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "drivers/nvme/host/core.c",
      "insertions": 351,
      "deletions": 139
    },
    {
      "file": "drivers/nvme/host/fabrics.c",
      "insertions": 86,
      "deletions": 8
    },
    {
      "file": "drivers/nvme/host/fabrics.h",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/host/multipath.c",
      "insertions": 5,
      "deletions": 4
    },
    {
      "file": "drivers/nvme/host/nvme.h",
      "insertions": 34,
      "deletions": 5
    },
    {
      "file": "drivers/nvme/host/pci.c",
      "insertions": 74,
      "deletions": 71
    },
    {
      "file": "drivers/nvme/host/rdma.c",
      "insertions": 52,
      "deletions": 54
    },
    {
      "file": "drivers/nvme/host/tcp.c",
      "insertions": 49,
      "deletions": 46
    },
    {
      "file": "drivers/nvme/host/trace.c",
      "insertions": 32,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/host/trace.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/nvme/target/Kconfig",
      "insertions": 15,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/target/Makefile",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/target/admin-cmd.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "drivers/nvme/target/auth.c",
      "insertions": 525,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/target/configfs.c",
      "insertions": 136,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/target/core.c",
      "insertions": 15,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/target/fabrics-cmd-auth.c",
      "insertions": 544,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/target/fabrics-cmd.c",
      "insertions": 52,
      "deletions": 3
    },
    {
      "file": "drivers/nvme/target/loop.c",
      "insertions": 2,
      "deletions": 6
    },
    {
      "file": "drivers/nvme/target/nvmet.h",
      "insertions": 74,
      "deletions": 1
    },
    {
      "file": "drivers/nvme/target/tcp.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "drivers/s390/block/dasd.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/s390/block/dasd_diag.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/s390/block/dasd_eckd.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/s390/block/dcssblk.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "include/crypto/hash.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "include/crypto/kpp.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "include/linux/base64.h",
      "insertions": 16,
      "deletions": 0
    },
    {
      "file": "include/linux/blkdev.h",
      "insertions": 3,
      "deletions": 2
    },
    {
      "file": "include/linux/nvme-auth.h",
      "insertions": 41,
      "deletions": 0
    },
    {
      "file": "include/linux/nvme.h",
      "insertions": 212,
      "deletions": 1
    },
    {
      "file": "include/uapi/linux/ublk_cmd.h",
      "insertions": 73,
      "deletions": 7
    },
    {
      "file": "lib/Makefile",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "lib/base64.c",
      "insertions": 103,
      "deletions": 0
    }
  ],
  "total_insertions": 5640,
  "total_deletions": 2856,
  "total_changes": 8496,
  "parents": [
    "e495274793ea602415d050452088a496abcd9e6c",
    "bc792884b76f0da2f5c9a8d720e430e2de9756f5"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "MAINTAINERS",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/blkdev.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "lib/Makefile",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}