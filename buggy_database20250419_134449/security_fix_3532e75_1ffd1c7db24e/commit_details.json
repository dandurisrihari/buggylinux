{
  "hash": "3532e75dfadcf52f8cb56dbfb6bce4503c69091f",
  "hash_short": "3532e75d",
  "subject": "drm/i915/uc: perma-pin firmwares",
  "body": "Now that each FW has its own reserved area, we can keep them always\npinned and skip the pin/unpin dance on reset. This will make things\neasier for the 2-step HuC authentication, which requires the FW to be\npinned in GGTT after the xfer is completed.\nSince the vma is now valid for a long time and not just for the quick\npin-load-unpin dance, the name \"dummy\" is no longer appropriare and has\nbeen replaced with vma_res. All the functions have also been updated to\noperate on vma_res for consistency.\nGiven that we pin the vma behind the allocator's back (which is ok\nbecause we do the pinning in an area that was previously reserved for\nthus purpose), we do need to explicitly re-pin on resume because the\nautomated helper won't cover us.\n\nv2: better comments and commit message, s/dummy/vma_res/\n\nSigned-off-by: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>\nCc: Alan Previn <alan.previn.teres.alexis@intel.com>\nCc: John Harrison <John.C.Harrison@Intel.com>\nReviewed-by: John Harrison <John.C.Harrison@Intel.com>\nLink: https://patchwork.freedesktop.org/patch/msgid/20230531235415.1467475-2-daniele.ceraolospurio@intel.com",
  "full_message": "drm/i915/uc: perma-pin firmwares\n\nNow that each FW has its own reserved area, we can keep them always\npinned and skip the pin/unpin dance on reset. This will make things\neasier for the 2-step HuC authentication, which requires the FW to be\npinned in GGTT after the xfer is completed.\nSince the vma is now valid for a long time and not just for the quick\npin-load-unpin dance, the name \"dummy\" is no longer appropriare and has\nbeen replaced with vma_res. All the functions have also been updated to\noperate on vma_res for consistency.\nGiven that we pin the vma behind the allocator's back (which is ok\nbecause we do the pinning in an area that was previously reserved for\nthus purpose), we do need to explicitly re-pin on resume because the\nautomated helper won't cover us.\n\nv2: better comments and commit message, s/dummy/vma_res/\n\nSigned-off-by: Daniele Ceraolo Spurio <daniele.ceraolospurio@intel.com>\nCc: Alan Previn <alan.previn.teres.alexis@intel.com>\nCc: John Harrison <John.C.Harrison@Intel.com>\nReviewed-by: John Harrison <John.C.Harrison@Intel.com>\nLink: https://patchwork.freedesktop.org/patch/msgid/20230531235415.1467475-2-daniele.ceraolospurio@intel.com",
  "author_name": "Daniele Ceraolo Spurio",
  "author_email": "daniele.ceraolospurio@intel.com",
  "author_date": "Wed May 31 16:54:09 2023 -0700",
  "author_date_iso": "2023-05-31T16:54:09-07:00",
  "committer_name": "Daniele Ceraolo Spurio",
  "committer_email": "daniele.ceraolospurio@intel.com",
  "committer_date": "Mon Jun 5 09:52:42 2023 -0700",
  "committer_date_iso": "2023-06-05T09:52:42-07:00",
  "files_changed": [
    "drivers/gpu/drm/i915/gt/intel_ggtt.c",
    "drivers/gpu/drm/i915/gt/uc/intel_gsc_uc.c",
    "drivers/gpu/drm/i915/gt/uc/intel_guc.c",
    "drivers/gpu/drm/i915/gt/uc/intel_huc.c",
    "drivers/gpu/drm/i915/gt/uc/intel_uc.c",
    "drivers/gpu/drm/i915/gt/uc/intel_uc.h",
    "drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c",
    "drivers/gpu/drm/i915/gt/uc/intel_uc_fw.h"
  ],
  "files_changed_count": 8,
  "stats": [
    {
      "file": "drivers/gpu/drm/i915/gt/intel_ggtt.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_gsc_uc.c",
      "insertions": 6,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_guc.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_huc.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_uc.c",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_uc.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c",
      "insertions": 35,
      "deletions": 15
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_uc_fw.h",
      "insertions": 15,
      "deletions": 7
    }
  ],
  "total_insertions": 71,
  "total_deletions": 25,
  "total_changes": 96,
  "parents": [
    "9ff17e6bdaa50892dd9bdb1b116cb71b73dd711a"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_huc.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_guc.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_uc.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_gsc_uc.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/gt/intel_ggtt.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_uc_fw.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_uc.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}