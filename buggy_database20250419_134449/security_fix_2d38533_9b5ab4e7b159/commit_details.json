{
  "hash": "2d385336afcc43732aef1d51528c03f177ecd54e",
  "hash_short": "2d385336",
  "subject": "Merge tag 'irq-core-2020-03-30' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip",
  "body": "Pull irq updates from Thomas Gleixner:\n \"Updates for the interrupt subsystem:\n\n  Treewide:\n\n    - Cleanup of setup_irq() which is not longer required because the\n      memory allocator is available early.\n\n      Most cleanup changes come through the various maintainer trees, so\n      the final removal of setup_irq() is postponed towards the end of\n      the merge window.\n\n  Core:\n\n    - Protection against unsafe invocation of interrupt handlers and\n      unsafe interrupt injection including a fixup of the offending\n      PCI/AER error injection mechanism.\n\n      Invoking interrupt handlers from arbitrary contexts, i.e. outside\n      of an actual interrupt, can cause inconsistent state on the\n      fragile x86 interrupt affinity changing hardware trainwreck.\n\n  Drivers:\n\n    - Second wave of support for the new ARM GICv4.1\n\n    - Multi-instance support for Xilinx and PLIC interrupt controllers\n\n    - CPU-Hotplug support for PLIC\n\n    - The obligatory new driver for X1000 TCU\n\n    - Enhancements, cleanups and fixes all over the place\"\n\n* tag 'irq-core-2020-03-30' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip: (58 commits)\n  unicore32: Replace setup_irq() by request_irq()\n  sh: Replace setup_irq() by request_irq()\n  hexagon: Replace setup_irq() by request_irq()\n  c6x: Replace setup_irq() by request_irq()\n  alpha: Replace setup_irq() by request_irq()\n  irqchip/gic-v4.1: Eagerly vmap vPEs\n  irqchip/gic-v4.1: Add VSGI property setup\n  irqchip/gic-v4.1: Add VSGI allocation/teardown\n  irqchip/gic-v4.1: Move doorbell management to the GICv4 abstraction layer\n  irqchip/gic-v4.1: Plumb set_vcpu_affinity SGI callbacks\n  irqchip/gic-v4.1: Plumb get/set_irqchip_state SGI callbacks\n  irqchip/gic-v4.1: Plumb mask/unmask SGI callbacks\n  irqchip/gic-v4.1: Add initial SGI configuration\n  irqchip/gic-v4.1: Plumb skeletal VSGI irqchip\n  irqchip/stm32: Retrigger both in eoi and unmask callbacks\n  irqchip/gic-v3: Move irq_domain_update_bus_token to after checking for NULL domain\n  irqchip/xilinx: Do not call irq_set_default_host()\n  irqchip/xilinx: Enable generic irq multi handler\n  irqchip/xilinx: Fill error code when irq domain registration fails\n  irqchip/xilinx: Add support for multiple instances\n  ...",
  "full_message": "Merge tag 'irq-core-2020-03-30' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip\n\nPull irq updates from Thomas Gleixner:\n \"Updates for the interrupt subsystem:\n\n  Treewide:\n\n    - Cleanup of setup_irq() which is not longer required because the\n      memory allocator is available early.\n\n      Most cleanup changes come through the various maintainer trees, so\n      the final removal of setup_irq() is postponed towards the end of\n      the merge window.\n\n  Core:\n\n    - Protection against unsafe invocation of interrupt handlers and\n      unsafe interrupt injection including a fixup of the offending\n      PCI/AER error injection mechanism.\n\n      Invoking interrupt handlers from arbitrary contexts, i.e. outside\n      of an actual interrupt, can cause inconsistent state on the\n      fragile x86 interrupt affinity changing hardware trainwreck.\n\n  Drivers:\n\n    - Second wave of support for the new ARM GICv4.1\n\n    - Multi-instance support for Xilinx and PLIC interrupt controllers\n\n    - CPU-Hotplug support for PLIC\n\n    - The obligatory new driver for X1000 TCU\n\n    - Enhancements, cleanups and fixes all over the place\"\n\n* tag 'irq-core-2020-03-30' of git://git.kernel.org/pub/scm/linux/kernel/git/tip/tip: (58 commits)\n  unicore32: Replace setup_irq() by request_irq()\n  sh: Replace setup_irq() by request_irq()\n  hexagon: Replace setup_irq() by request_irq()\n  c6x: Replace setup_irq() by request_irq()\n  alpha: Replace setup_irq() by request_irq()\n  irqchip/gic-v4.1: Eagerly vmap vPEs\n  irqchip/gic-v4.1: Add VSGI property setup\n  irqchip/gic-v4.1: Add VSGI allocation/teardown\n  irqchip/gic-v4.1: Move doorbell management to the GICv4 abstraction layer\n  irqchip/gic-v4.1: Plumb set_vcpu_affinity SGI callbacks\n  irqchip/gic-v4.1: Plumb get/set_irqchip_state SGI callbacks\n  irqchip/gic-v4.1: Plumb mask/unmask SGI callbacks\n  irqchip/gic-v4.1: Add initial SGI configuration\n  irqchip/gic-v4.1: Plumb skeletal VSGI irqchip\n  irqchip/stm32: Retrigger both in eoi and unmask callbacks\n  irqchip/gic-v3: Move irq_domain_update_bus_token to after checking for NULL domain\n  irqchip/xilinx: Do not call irq_set_default_host()\n  irqchip/xilinx: Enable generic irq multi handler\n  irqchip/xilinx: Fill error code when irq domain registration fails\n  irqchip/xilinx: Add support for multiple instances\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Mon Mar 30 17:35:14 2020 -0700",
  "author_date_iso": "2020-03-30T17:35:14-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Mon Mar 30 17:35:14 2020 -0700",
  "committer_date_iso": "2020-03-30T17:35:14-07:00",
  "files_changed": [
    "arch/x86/Kconfig",
    "arch/x86/kernel/apic/vector.c",
    "drivers/irqchip/irq-gic-v3.c"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "arch/alpha/kernel/irq_alpha.c",
      "insertions": 5,
      "deletions": 24
    },
    {
      "file": "arch/alpha/kernel/irq_i8259.c",
      "insertions": 2,
      "deletions": 6
    },
    {
      "file": "arch/alpha/kernel/irq_impl.h",
      "insertions": 1,
      "deletions": 6
    },
    {
      "file": "arch/alpha/kernel/irq_pyxis.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "arch/alpha/kernel/sys_alcor.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "arch/alpha/kernel/sys_cabriolet.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "arch/alpha/kernel/sys_eb64p.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "arch/alpha/kernel/sys_marvel.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/alpha/kernel/sys_miata.c",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "arch/alpha/kernel/sys_ruffian.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "arch/alpha/kernel/sys_rx164.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "arch/alpha/kernel/sys_sx164.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "arch/alpha/kernel/sys_wildfire.c",
      "insertions": 2,
      "deletions": 5
    },
    {
      "file": "arch/alpha/kernel/time.c",
      "insertions": 2,
      "deletions": 4
    },
    {
      "file": "arch/arm/common/sa1111.c",
      "insertions": 5,
      "deletions": 2
    },
    {
      "file": "arch/c6x/platforms/timer64.c",
      "insertions": 3,
      "deletions": 8
    },
    {
      "file": "arch/hexagon/kernel/smp.c",
      "insertions": 11,
      "deletions": 11
    },
    {
      "file": "arch/hexagon/kernel/time.c",
      "insertions": 3,
      "deletions": 8
    },
    {
      "file": "arch/microblaze/Kconfig",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/microblaze/include/asm/irq.h",
      "insertions": 0,
      "deletions": 3
    },
    {
      "file": "arch/microblaze/kernel/irq.c",
      "insertions": 1,
      "deletions": 20
    },
    {
      "file": "arch/riscv/kernel/traps.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/sh/boards/mach-cayman/irq.c",
      "insertions": 6,
      "deletions": 12
    },
    {
      "file": "arch/sh/drivers/dma/dma-pvr2.c",
      "insertions": 3,
      "deletions": 6
    },
    {
      "file": "arch/unicore32/kernel/time.c",
      "insertions": 3,
      "deletions": 8
    },
    {
      "file": "arch/x86/Kconfig",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/kernel/apic/vector.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "drivers/irqchip/Kconfig",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/irqchip/irq-atmel-aic.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/irqchip/irq-atmel-aic5.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/irqchip/irq-bcm2835.c",
      "insertions": 15,
      "deletions": 0
    },
    {
      "file": "drivers/irqchip/irq-bcm7038-l1.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/irqchip/irq-gic-v3-its.c",
      "insertions": 474,
      "deletions": 58
    },
    {
      "file": "drivers/irqchip/irq-gic-v3.c",
      "insertions": 13,
      "deletions": 3
    },
    {
      "file": "drivers/irqchip/irq-gic-v4.c",
      "insertions": 127,
      "deletions": 7
    },
    {
      "file": "drivers/irqchip/irq-i8259.c",
      "insertions": 6,
      "deletions": 10
    },
    {
      "file": "drivers/irqchip/irq-ingenic-tcu.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/irqchip/irq-ingenic.c",
      "insertions": 3,
      "deletions": 6
    },
    {
      "file": "drivers/irqchip/irq-renesas-intc-irqpin.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/irqchip/irq-sifive-plic.c",
      "insertions": 85,
      "deletions": 34
    },
    {
      "file": "drivers/irqchip/irq-stm32-exti.c",
      "insertions": 13,
      "deletions": 1
    },
    {
      "file": "drivers/irqchip/irq-versatile-fpga.c",
      "insertions": 13,
      "deletions": 5
    },
    {
      "file": "drivers/irqchip/irq-vic.c",
      "insertions": 5,
      "deletions": 4
    },
    {
      "file": "drivers/irqchip/irq-xilinx-intc.c",
      "insertions": 74,
      "deletions": 49
    },
    {
      "file": "drivers/irqchip/qcom-irq-combiner.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/pci/pcie/Kconfig",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/pci/pcie/aer_inject.c",
      "insertions": 2,
      "deletions": 4
    },
    {
      "file": "drivers/pinctrl/stm32/pinctrl-stm32.c",
      "insertions": 54,
      "deletions": 3
    },
    {
      "file": "include/kvm/arm_vgic.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "include/linux/cpuhotplug.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "include/linux/interrupt.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "include/linux/irq.h",
      "insertions": 13,
      "deletions": 0
    },
    {
      "file": "include/linux/irqchip/arm-gic-common.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "include/linux/irqchip/arm-gic-v3.h",
      "insertions": 22,
      "deletions": 1
    },
    {
      "file": "include/linux/irqchip/arm-gic-v4.h",
      "insertions": 23,
      "deletions": 2
    },
    {
      "file": "kernel/irq/Kconfig",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "kernel/irq/chip.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "kernel/irq/debugfs.c",
      "insertions": 1,
      "deletions": 27
    },
    {
      "file": "kernel/irq/internals.h",
      "insertions": 9,
      "deletions": 1
    },
    {
      "file": "kernel/irq/irqdesc.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "kernel/irq/irqdomain.c",
      "insertions": 7,
      "deletions": 7
    },
    {
      "file": "kernel/irq/resend.c",
      "insertions": 107,
      "deletions": 36
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-v3.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-v4.c",
      "insertions": 14,
      "deletions": 20
    }
  ],
  "total_insertions": 1185,
  "total_deletions": 420,
  "total_changes": 1605,
  "parents": [
    "673b41e04a035d760bc0aff83fa9ee24fd9c2779",
    "8a13b02a010a743ea0725e9a5454f42cddb65cf0"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.7-rc1"
  ],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/apic/vector.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/irqchip/irq-gic-v3.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}