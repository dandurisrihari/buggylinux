{
  "hash": "54b44ad26c4296f341a26456ef121d2fd2ac0c59",
  "hash_short": "54b44ad2",
  "subject": "Merge branch kvm-arm64/sgi-injection into kvmarm/next",
  "body": "* kvm-arm64/sgi-injection:\n  : vSGI injection improvements + fixes, courtesy Marc Zyngier\n  :\n  : Avoid linearly searching for vSGI targets using a compressed MPIDR to\n  : index a cache. While at it, fix some egregious bugs in KVM's mishandling\n  : of vcpuid (user-controlled value) and vcpu_idx.\n  KVM: arm64: Clarify the ordering requirements for vcpu/RD creation\n  KVM: arm64: vgic-v3: Optimize affinity-based SGI injection\n  KVM: arm64: Fast-track kvm_mpidr_to_vcpu() when mpidr_data is available\n  KVM: arm64: Build MPIDR to vcpu index cache at runtime\n  KVM: arm64: Simplify kvm_vcpu_get_mpidr_aff()\n  KVM: arm64: Use vcpu_idx for invalidation tracking\n  KVM: arm64: vgic: Use vcpu_idx for the debug information\n  KVM: arm64: vgic-v2: Use cpuid from userspace as vcpu_id\n  KVM: arm64: vgic-v3: Refactor GICv3 SGI generation\n  KVM: arm64: vgic-its: Treat the collection target address as a vcpu_id\n  KVM: arm64: vgic: Make kvm_vgic_inject_irq() take a vcpu pointer\n\nSigned-off-by: Oliver Upton <oliver.upton@linux.dev>",
  "full_message": "Merge branch kvm-arm64/sgi-injection into kvmarm/next\n\n* kvm-arm64/sgi-injection:\n  : vSGI injection improvements + fixes, courtesy Marc Zyngier\n  :\n  : Avoid linearly searching for vSGI targets using a compressed MPIDR to\n  : index a cache. While at it, fix some egregious bugs in KVM's mishandling\n  : of vcpuid (user-controlled value) and vcpu_idx.\n  KVM: arm64: Clarify the ordering requirements for vcpu/RD creation\n  KVM: arm64: vgic-v3: Optimize affinity-based SGI injection\n  KVM: arm64: Fast-track kvm_mpidr_to_vcpu() when mpidr_data is available\n  KVM: arm64: Build MPIDR to vcpu index cache at runtime\n  KVM: arm64: Simplify kvm_vcpu_get_mpidr_aff()\n  KVM: arm64: Use vcpu_idx for invalidation tracking\n  KVM: arm64: vgic: Use vcpu_idx for the debug information\n  KVM: arm64: vgic-v2: Use cpuid from userspace as vcpu_id\n  KVM: arm64: vgic-v3: Refactor GICv3 SGI generation\n  KVM: arm64: vgic-its: Treat the collection target address as a vcpu_id\n  KVM: arm64: vgic: Make kvm_vgic_inject_irq() take a vcpu pointer\n\nSigned-off-by: Oliver Upton <oliver.upton@linux.dev>",
  "author_name": "Oliver Upton",
  "author_email": "oliver.upton@linux.dev",
  "author_date": "Mon Oct 30 20:19:13 2023 +0000",
  "author_date_iso": "2023-10-30T20:19:13+00:00",
  "committer_name": "Oliver Upton",
  "committer_email": "oliver.upton@linux.dev",
  "committer_date": "Mon Oct 30 20:19:13 2023 +0000",
  "committer_date_iso": "2023-10-30T20:19:13+00:00",
  "files_changed": [
    "arch/arm64/include/asm/kvm_emulate.h",
    "arch/arm64/include/asm/kvm_host.h",
    "arch/arm64/kvm/arch_timer.c",
    "arch/arm64/kvm/arm.c",
    "arch/arm64/kvm/pmu-emul.c",
    "arch/arm64/kvm/vgic/vgic-kvm-device.c"
  ],
  "files_changed_count": 6,
  "stats": [
    {
      "file": "Documentation/virt/kvm/devices/arm-vgic-v3.rst",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/kvm_emulate.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "insertions": 28,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/arch_timer.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/arm.c",
      "insertions": 76,
      "deletions": 17
    },
    {
      "file": "arch/arm64/kvm/pmu-emul.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-debug.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-irqfd.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-its.c",
      "insertions": 27,
      "deletions": 22
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-kvm-device.c",
      "insertions": 2,
      "deletions": 6
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-mmio-v3.c",
      "insertions": 58,
      "deletions": 92
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic.c",
      "insertions": 5,
      "deletions": 7
    },
    {
      "file": "include/kvm/arm_vgic.h",
      "insertions": 2,
      "deletions": 2
    }
  ],
  "total_insertions": 212,
  "total_deletions": 153,
  "total_changes": 365,
  "parents": [
    "df26b77915be7813a0ca06ddd06f04fb4e13e471",
    "f9940416f193d148dd7ad7498ce4f40c83d12e7a"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/asm/kvm_emulate.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/arch_timer.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/pmu-emul.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-kvm-device.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/arm.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}