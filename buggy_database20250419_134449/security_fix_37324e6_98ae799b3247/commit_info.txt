Commit Hash: 37324e6bb120bc3cb7cbaa87512ff3a93dbcf5c4
Subject: SUNRPC: Cache deferral injection


Security Keywords:
- injection

Full commit message:
SUNRPC: Cache deferral injection

Cache deferral injection stress-tests the cache deferral logic as
well as upper layer protocol deferred request handlers. This
facility is for developers and professional testers to ensure
coverage of the rqst deferral code paths. To date, we haven't
had an adequate way to ensure these code paths are covered
during testing, short of temporary code changes to force their
use.

A file called /sys/kernel/debug/fail_sunrpc/ignore-cache-wait
enables administrators to disable cache deferral injection while
allowing other types of sunrpc errors to be injected. The default
setting is that cache deferral injection is enabled (ignore=false).

To enable support for cache deferral injection,
CONFIG_FAULT_INJECTION, CONFIG_FAULT_INJECTION_DEBUG_FS, and
CONFIG_SUNRPC_DEBUG must all be set to "Y".

Signed-off-by: Chuck Lever <chuck.lever@oracle.com>

Metadata:
Author: Chuck Lever <chuck.lever@oracle.com>
Author Date: Thu Mar 31 15:30:10 2022 -0400
Committer: Chuck Lever <chuck.lever@oracle.com>
Commit Date: Thu May 19 12:25:38 2022 -0400

Files Changed: 3
Lines Added: 21
Lines Removed: 2
Total Changes: 23
