commit 6d29709de8028cfd5a827d02f93a5076ba632563
Author: Rob Clark <robdclark@chromium.org>
Date:   Sun Aug 7 10:28:48 2022 -0700

    drm/msm: Add fault-injection support
    
    Intended as a way to trigger error paths in mesa.
    
    Signed-off-by: Rob Clark <robdclark@chromium.org>
    Reviewed-by: Dmitry Baryshkov <dmitry.baryshkov@linaro.org>
    Patchwork: https://patchwork.freedesktop.org/patch/496710/
    Link: https://lore.kernel.org/r/20220807172848.2432845-1-robdclark@gmail.com

diff --git a/drivers/gpu/drm/msm/msm_drv.h b/drivers/gpu/drm/msm/msm_drv.h
index 208ae5bc5e6b..09c4585a8064 100644
--- a/drivers/gpu/drm/msm/msm_drv.h
+++ b/drivers/gpu/drm/msm/msm_drv.h
@@ -34,6 +34,13 @@
 #include <drm/msm_drm.h>
 #include <drm/drm_gem.h>
 
+#ifdef CONFIG_FAULT_INJECTION
+extern struct fault_attr fail_gem_alloc;
+extern struct fault_attr fail_gem_iova;
+#else
+#  define should_fail(attr, size) 0
+#endif
+
 struct msm_kms;
 struct msm_gpu;
 struct msm_mmu;