commit 98909e6d1c811b6368c9c84fa6b3f0817c32ac2f
Author: Marc Zyngier <maz@kernel.org>
Date:   Fri Jun 28 23:05:38 2019 +0100

    KVM: arm64: Move ELR_EL1 to the system register array
    
    As ELR-EL1 is a VNCR-capable register with ARMv8.4-NV, let's move it to
    the sys_regs array and repaint the accessors. While we're at it, let's
    kill the now useless accessors used only on the fault injection path.
    
    Reviewed-by: James Morse <james.morse@arm.com>
    Signed-off-by: Marc Zyngier <maz@kernel.org>

diff --git a/arch/arm64/kvm/inject_fault.c b/arch/arm64/kvm/inject_fault.c
index e21fdd93027a..ebfdfc27b2bd 100644
--- a/arch/arm64/kvm/inject_fault.c
+++ b/arch/arm64/kvm/inject_fault.c
@@ -64,7 +64,7 @@ static void enter_exception64(struct kvm_vcpu *vcpu, unsigned long target_mode,
 	case PSR_MODE_EL1h:
 		vbar = vcpu_read_sys_reg(vcpu, VBAR_EL1);
 		sctlr = vcpu_read_sys_reg(vcpu, SCTLR_EL1);
-		vcpu_write_elr_el1(vcpu, *vcpu_pc(vcpu));
+		vcpu_write_sys_reg(vcpu, *vcpu_pc(vcpu), ELR_EL1);
 		break;
 	default:
 		/* Don't do that */