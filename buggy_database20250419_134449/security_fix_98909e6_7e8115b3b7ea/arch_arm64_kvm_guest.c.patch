commit 98909e6d1c811b6368c9c84fa6b3f0817c32ac2f
Author: Marc Zyngier <maz@kernel.org>
Date:   Fri Jun 28 23:05:38 2019 +0100

    KVM: arm64: Move ELR_EL1 to the system register array
    
    As ELR-EL1 is a VNCR-capable register with ARMv8.4-NV, let's move it to
    the sys_regs array and repaint the accessors. While we're at it, let's
    kill the now useless accessors used only on the fault injection path.
    
    Reviewed-by: James Morse <james.morse@arm.com>
    Signed-off-by: Marc Zyngier <maz@kernel.org>

diff --git a/arch/arm64/kvm/guest.c b/arch/arm64/kvm/guest.c
index 9dd5bbeefae6..99ff09ad24e8 100644
--- a/arch/arm64/kvm/guest.c
+++ b/arch/arm64/kvm/guest.c
@@ -132,7 +132,7 @@ static void *core_reg_addr(struct kvm_vcpu *vcpu, const struct kvm_one_reg *reg)
 		return &vcpu->arch.ctxt.sp_el1;
 
 	case KVM_REG_ARM_CORE_REG(elr_el1):
-		return &vcpu->arch.ctxt.elr_el1;
+		return __ctxt_sys_reg(&vcpu->arch.ctxt, ELR_EL1);
 
 	case KVM_REG_ARM_CORE_REG(spsr[0]) ...
 	     KVM_REG_ARM_CORE_REG(spsr[KVM_NR_SPSR - 1]):