Commit Hash: 0624fca9512d08cbd9b5d098d904c840d3432404
Subject: kvm/x86: return meaningful value from KVM_SIGNAL_MSI


Security Keywords:
- injection

Full commit message:
kvm/x86: return meaningful value from KVM_SIGNAL_MSI

If kvm_apic_map_get_dest_lapic() finds a disabled LAPIC,
it will return with bitmap==0 and (*r == -1) will be returned to
userspace.

QEMU may then record "KVM: injection failed, MSI lost
(Operation not permitted)" in its log, which is quite puzzling.

Reported-by: Peng Hao <penghao122@sina.com.cn>
Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>

Metadata:
Author: Paolo Bonzini <pbonzini@redhat.com>
Author Date: Mon Oct 1 16:07:18 2018 +0200
Committer: Paolo Bonzini <pbonzini@redhat.com>
Commit Date: Wed Oct 17 00:29:43 2018 +0200

Files Changed: 1
Lines Added: 3
Lines Removed: 3
Total Changes: 6
