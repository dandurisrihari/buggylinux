Files changed: 27
Insertions: 142367
Deletions: 40654
Total changes: 183021

File-specific changes:
.mailmap: +7 -5
CREDITS: +4 -0
Documentation/ABI/testing/sysfs-driver-intel-xe-hwmon: +16 -0
Documentation/devicetree/bindings/display/apple,h7-display-pipe-mipi.yaml: +83 -0
Documentation/devicetree/bindings/display/apple,h7-display-pipe.yaml: +88 -0
Documentation/devicetree/bindings/display/bridge/ti,sn65dsi83.yaml: +3 -0
Documentation/devicetree/bindings/display/mediatek/mediatek,dpi.yaml: +7 -0
Documentation/devicetree/bindings/display/mediatek/mediatek,dsc.yaml: +3 -0
Documentation/devicetree/bindings/display/msm/dsi-controller-main.yaml: +11 -59
Documentation/devicetree/bindings/display/msm/dsi-phy-common.yaml: +2 -0
Documentation/devicetree/bindings/display/msm/gmu.yaml: +1 -0
Documentation/devicetree/bindings/display/msm/qcom,sa8775p-mdss.yaml: +30 -2
Documentation/devicetree/bindings/display/msm/qcom,sm8550-mdss.yaml: +9 -5
Documentation/devicetree/bindings/display/msm/qcom,sm8650-mdss.yaml: +11 -2
Documentation/devicetree/bindings/display/panel/apple,summit.yaml: +58 -0
Documentation/devicetree/bindings/display/panel/himax,hx83102.yaml: +6 -0
Documentation/devicetree/bindings/display/panel/panel-simple-lvds-dual-ports.yaml: +2 -0
Documentation/devicetree/bindings/display/panel/panel-simple.yaml: +2 -0
Documentation/devicetree/bindings/display/panel/raydium,rm67200.yaml: +72 -0
Documentation/devicetree/bindings/display/panel/visionox,rm692e5.yaml: +77 -0
Documentation/devicetree/bindings/display/renesas,du.yaml: +31 -5
Documentation/devicetree/bindings/display/rockchip/rockchip,rk3588-dw-hdmi-qp.yaml: +2 -1
Documentation/devicetree/bindings/display/rockchip/rockchip-vop2.yaml: +89 -14
Documentation/devicetree/bindings/gpu/arm,mali-bifrost.yaml: +1 -0
Documentation/devicetree/bindings/vendor-prefixes.yaml: +2 -0
Documentation/gpu/amdgpu/amdgpu-glossary.rst: +42 -3
Documentation/gpu/amdgpu/display/dc-glossary.rst: +0 -6
Documentation/gpu/drivers.rst: +2 -0
Documentation/gpu/drm-internals.rst: +7 -0
Documentation/gpu/drm-uapi.rst: +113 -3
Documentation/gpu/drm-usage-stats.rst: +4 -1
Documentation/gpu/nouveau.rst: +29 -0
Documentation/gpu/nova/core/guidelines.rst: +24 -0
Documentation/gpu/nova/core/todo.rst: +446 -0
Documentation/gpu/nova/guidelines.rst: +69 -0
Documentation/gpu/nova/index.rst: +30 -0
Documentation/gpu/panthor.rst: +10 -0
Documentation/gpu/rfc/gpusvm.rst: +112 -0
Documentation/gpu/rfc/index.rst: +4 -0
Kbuild: +1 -0
MAINTAINERS: +55 -19
arch/arm/configs/multi_v7_defconfig: +2 -2
arch/parisc/configs/generic-32bit_defconfig: +2 -2
arch/parisc/configs/generic-64bit_defconfig: +2 -2
drivers/accel/amdxdna/aie2_ctx.c: +37 -28
drivers/accel/amdxdna/aie2_error.c: +3 -5
drivers/accel/amdxdna/aie2_message.c: +5 -5
drivers/accel/amdxdna/aie2_pci.h: +5 -5
drivers/accel/amdxdna/aie2_smu.c: +2 -0
drivers/accel/amdxdna/amdxdna_ctx.c: +2 -0
drivers/accel/amdxdna/amdxdna_ctx.h: +3 -0
drivers/accel/amdxdna/amdxdna_mailbox.c: +16 -7
drivers/accel/amdxdna/amdxdna_mailbox.h: +1 -1
drivers/accel/amdxdna/amdxdna_mailbox_helper.c: +3 -3
drivers/accel/amdxdna/amdxdna_mailbox_helper.h: +1 -1
drivers/accel/ivpu/ivpu_debugfs.c: +89 -0
drivers/accel/ivpu/ivpu_drv.c: +26 -64
drivers/accel/ivpu/ivpu_drv.h: +13 -1
drivers/accel/ivpu/ivpu_fw.c: +8 -1
drivers/accel/ivpu/ivpu_gem.c: +43 -0
drivers/accel/ivpu/ivpu_gem.h: +1 -0
drivers/accel/ivpu/ivpu_hw.c: +73 -37
drivers/accel/ivpu/ivpu_hw.h: +5 -9
drivers/accel/ivpu/ivpu_hw_btrs.c: +8 -2
drivers/accel/ivpu/ivpu_hw_btrs.h: +1 -0
drivers/accel/ivpu/ivpu_hw_btrs_lnl_reg.h: +1 -0
drivers/accel/ivpu/ivpu_hw_ip.c: +2 -2
drivers/accel/ivpu/ivpu_hw_reg_io.h: +37 -27
drivers/accel/ivpu/ivpu_ipc.c: +3 -4
drivers/accel/ivpu/ivpu_ipc.h: +1 -1
drivers/accel/ivpu/ivpu_job.c: +379 -143
drivers/accel/ivpu/ivpu_job.h: +7 -1
drivers/accel/ivpu/ivpu_jsm_msg.c: +11 -18
drivers/accel/ivpu/ivpu_mmu.c: +100 -21
drivers/accel/ivpu/ivpu_mmu.h: +2 -0
drivers/accel/ivpu/ivpu_mmu_context.c: +0 -13
drivers/accel/ivpu/ivpu_mmu_context.h: +0 -2
drivers/accel/ivpu/ivpu_pm.c: +3 -7
drivers/accel/ivpu/ivpu_pm.h: +1 -1
drivers/accel/ivpu/ivpu_sysfs.c: +32 -3
drivers/accel/qaic/mhi_controller.c: +346 -14
drivers/accel/qaic/mhi_controller.h: +1 -1
drivers/accel/qaic/qaic.h: +10 -4
drivers/accel/qaic/qaic_drv.c: +67 -30
drivers/accel/qaic/qaic_timesync.c: +1 -1
drivers/accel/qaic/sahara.c: +39 -4
drivers/base/component.c: +17 -0
drivers/base/devres.c: +11 -1
drivers/bus/mhi/host/boot.c: +150 -53
drivers/bus/mhi/host/init.c: +1 -1
drivers/bus/mhi/host/internal.h: +7 -0
drivers/dma-buf/dma-fence-unwrap.c: +10 -1
drivers/dma-buf/st-dma-fence-unwrap.c: +264 -4
drivers/gpu/Makefile: +1 -0
drivers/gpu/drm/Kconfig: +22 -2
drivers/gpu/drm/Makefile: +20 -2
drivers/gpu/drm/adp/Kconfig: +17 -0
drivers/gpu/drm/adp/Makefile: +5 -0
drivers/gpu/drm/adp/adp-mipi.c: +276 -0
drivers/gpu/drm/adp/adp_drv.c: +612 -0
drivers/gpu/drm/amd/amdgpu/Makefile: +2 -1
drivers/gpu/drm/amd/amdgpu/amdgpu.h: +23 -2
drivers/gpu/drm/amd/amdgpu/amdgpu_aca.c: +58 -12
drivers/gpu/drm/amd/amdgpu/amdgpu_aca.h: +26 -2
drivers/gpu/drm/amd/amdgpu/amdgpu_acp.c: +1 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c: +5 -5
drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd.c: +2 -44
drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd.h: +3 -12
drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_aldebaran.c: +2 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_arcturus.c: +3 -2
drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gc_9_4_3.c: +15 -3
drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v10.c: +22 -15
drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v10.h: +5 -2
drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v10_3.c: +3 -2
drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v11.c: +8 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v12.c: +7 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v9.c: +23 -21
drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v9.h: +5 -2
drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gpuvm.c: +34 -90
drivers/gpu/drm/amd/amdgpu/amdgpu_atombios.c: +32 -12
drivers/gpu/drm/amd/amdgpu/amdgpu_atombios.h: +1 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_atomfirmware.c: +12 -6
drivers/gpu/drm/amd/amdgpu/amdgpu_bios.c: +14 -6
drivers/gpu/drm/amd/amdgpu/amdgpu_connectors.c: +4 -4
drivers/gpu/drm/amd/amdgpu/amdgpu_cper.c: +581 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_cper.h: +105 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_cs.c: +12 -8
drivers/gpu/drm/amd/amdgpu/amdgpu_debugfs.c: +1 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_dev_coredump.c: +4 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_device.c: +236 -53
drivers/gpu/drm/amd/amdgpu/amdgpu_discovery.c: +143 -53
drivers/gpu/drm/amd/amdgpu/amdgpu_drv.c: +35 -5
drivers/gpu/drm/amd/amdgpu/amdgpu_fru_eeprom.c: +17 -8
drivers/gpu/drm/amd/amdgpu/amdgpu_gfx.c: +117 -23
drivers/gpu/drm/amd/amdgpu/amdgpu_gfx.h: +14 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_gmc.c: +25 -2
drivers/gpu/drm/amd/amdgpu/amdgpu_gmc.h: +1 -22
drivers/gpu/drm/amd/amdgpu/amdgpu_i2c.c: +19 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_i2c.h: +1 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_ids.c: +25 -40
drivers/gpu/drm/amd/amdgpu/amdgpu_ids.h: +1 -2
drivers/gpu/drm/amd/amdgpu/amdgpu_ih.h: +3 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_isp.c: +1 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_isp.h: +1 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_job.c: +56 -13
drivers/gpu/drm/amd/amdgpu/amdgpu_jpeg.c: +84 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_jpeg.h: +16 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_kms.c: +10 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_mes.c: +7 -13
drivers/gpu/drm/amd/amdgpu/amdgpu_mes.h: +4 -4
drivers/gpu/drm/amd/amdgpu/amdgpu_mode.h: +1 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_object.c: +23 -15
drivers/gpu/drm/amd/amdgpu/amdgpu_psp.c: +56 -31
drivers/gpu/drm/amd/amdgpu/amdgpu_ras.c: +173 -135
drivers/gpu/drm/amd/amdgpu/amdgpu_ras.h: +2 -2
drivers/gpu/drm/amd/amdgpu/amdgpu_ras_eeprom.c: +60 -45
drivers/gpu/drm/amd/amdgpu/amdgpu_ras_eeprom.h: +7 -14
drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c: +97 -27
drivers/gpu/drm/amd/amdgpu/amdgpu_ring.h: +5 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_sdma.c: +194 -7
drivers/gpu/drm/amd/amdgpu/amdgpu_sdma.h: +19 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_sync.c: +35 -9
drivers/gpu/drm/amd/amdgpu/amdgpu_sync.h: +3 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_trace.h: +32 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c: +18 -4
drivers/gpu/drm/amd/amdgpu/amdgpu_ucode.c: +1 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_umc.c: +42 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_umc.h: +7 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_umsch_mm.c: +5 -460
drivers/gpu/drm/amd/amdgpu/amdgpu_vcn.c: +272 -218
drivers/gpu/drm/amd/amdgpu/amdgpu_vcn.h: +38 -19
drivers/gpu/drm/amd/amdgpu/amdgpu_virt.c: +159 -10
drivers/gpu/drm/amd/amdgpu/amdgpu_virt.h: +21 -4
drivers/gpu/drm/amd/amdgpu/amdgpu_vkms.c: +1 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_vm.c: +22 -24
drivers/gpu/drm/amd/amdgpu/amdgpu_vm.h: +0 -5
drivers/gpu/drm/amd/amdgpu/amdgpu_vm_pt.c: +13 -30
drivers/gpu/drm/amd/amdgpu/amdgpu_vram_mgr.c: +0 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_xgmi.c: +96 -12
drivers/gpu/drm/amd/amdgpu/amdgpu_xgmi.h: +56 -14
drivers/gpu/drm/amd/amdgpu/amdgv_sriovmsg.h: +27 -13
drivers/gpu/drm/amd/amdgpu/aqua_vanjaram.c: +6 -2
drivers/gpu/drm/amd/amdgpu/atombios_dp.c: +1 -1
drivers/gpu/drm/amd/amdgpu/atombios_dp.h: +1 -1
drivers/gpu/drm/amd/amdgpu/cik.c: +1 -1
drivers/gpu/drm/amd/amdgpu/cik_ih.c: +2 -2
drivers/gpu/drm/amd/amdgpu/cik_sdma.c: +2 -2
drivers/gpu/drm/amd/amdgpu/cikd.h: +9 -0
drivers/gpu/drm/amd/amdgpu/cz_ih.c: +2 -2
drivers/gpu/drm/amd/amdgpu/dce_v10_0.c: +1 -1
drivers/gpu/drm/amd/amdgpu/dce_v11_0.c: +1 -1
drivers/gpu/drm/amd/amdgpu/dce_v6_0.c: +115 -47
drivers/gpu/drm/amd/amdgpu/dce_v8_0.c: +8 -8
drivers/gpu/drm/amd/amdgpu/gfx_v10_0.c: +95 -9
drivers/gpu/drm/amd/amdgpu/gfx_v10_0_cleaner_shader.h: +35 -0
drivers/gpu/drm/amd/amdgpu/gfx_v10_1_10_cleaner_shader.asm: +126 -0
drivers/gpu/drm/amd/amdgpu/gfx_v11_0.c: +83 -26
drivers/gpu/drm/amd/amdgpu/gfx_v12_0.c: +59 -36
drivers/gpu/drm/amd/amdgpu/gfx_v6_0.c: +16 -5
drivers/gpu/drm/amd/amdgpu/gfx_v7_0.c: +2 -2
drivers/gpu/drm/amd/amdgpu/gfx_v8_0.c: +5 -5
drivers/gpu/drm/amd/amdgpu/gfx_v9_0.c: +14 -10
drivers/gpu/drm/amd/amdgpu/gfx_v9_4.c: +0 -1
drivers/gpu/drm/amd/amdgpu/gfx_v9_4_3.c: +29 -93
drivers/gpu/drm/amd/amdgpu/gfxhub_v1_0.c: +5 -5
drivers/gpu/drm/amd/amdgpu/gfxhub_v1_2.c: +13 -9
drivers/gpu/drm/amd/amdgpu/gfxhub_v2_1.c: +0 -37
drivers/gpu/drm/amd/amdgpu/gmc_v10_0.c: +3 -3
drivers/gpu/drm/amd/amdgpu/gmc_v11_0.c: +6 -3
drivers/gpu/drm/amd/amdgpu/gmc_v12_0.c: +3 -3
drivers/gpu/drm/amd/amdgpu/gmc_v6_0.c: +3 -3
drivers/gpu/drm/amd/amdgpu/gmc_v7_0.c: +2 -2
drivers/gpu/drm/amd/amdgpu/gmc_v8_0.c: +4 -4
drivers/gpu/drm/amd/amdgpu/gmc_v9_0.c: +47 -46
drivers/gpu/drm/amd/amdgpu/hdp_v4_0.c: +0 -1
drivers/gpu/drm/amd/amdgpu/hdp_v5_0.c: +0 -1
drivers/gpu/drm/amd/amdgpu/hdp_v5_2.c: +0 -1
drivers/gpu/drm/amd/amdgpu/hdp_v6_0.c: +0 -1
drivers/gpu/drm/amd/amdgpu/hdp_v7_0.c: +0 -1
drivers/gpu/drm/amd/amdgpu/iceland_ih.c: +2 -2
drivers/gpu/drm/amd/amdgpu/ih_v6_0.c: +3 -3
drivers/gpu/drm/amd/amdgpu/ih_v6_1.c: +3 -3
drivers/gpu/drm/amd/amdgpu/ih_v7_0.c: +3 -3
drivers/gpu/drm/amd/amdgpu/imu_v11_0.c: +1 -0
drivers/gpu/drm/amd/amdgpu/isp_v4_1_0.c: +39 -18
drivers/gpu/drm/amd/amdgpu/isp_v4_1_0.h: +2 -2
drivers/gpu/drm/amd/amdgpu/isp_v4_1_1.c: +38 -16
drivers/gpu/drm/amd/amdgpu/isp_v4_1_1.h: +2 -3
drivers/gpu/drm/amd/amdgpu/jpeg_v1_0.c: +3 -3
drivers/gpu/drm/amd/amdgpu/jpeg_v2_0.c: +39 -4
drivers/gpu/drm/amd/amdgpu/jpeg_v2_5.c: +97 -51
drivers/gpu/drm/amd/amdgpu/jpeg_v3_0.c: +39 -4
drivers/gpu/drm/amd/amdgpu/jpeg_v4_0.c: +38 -9
drivers/gpu/drm/amd/amdgpu/jpeg_v4_0_3.c: +213 -133
drivers/gpu/drm/amd/amdgpu/jpeg_v4_0_3.h: +1 -0
drivers/gpu/drm/amd/amdgpu/jpeg_v4_0_5.c: +27 -4
drivers/gpu/drm/amd/amdgpu/jpeg_v5_0_0.c: +25 -3
drivers/gpu/drm/amd/amdgpu/jpeg_v5_0_1.c: +169 -86
drivers/gpu/drm/amd/amdgpu/jpeg_v5_0_1.h: +73 -1
drivers/gpu/drm/amd/amdgpu/mes_v11_0.c: +41 -45
drivers/gpu/drm/amd/amdgpu/mes_v12_0.c: +30 -26
drivers/gpu/drm/amd/amdgpu/mmhub_v1_7.c: +25 -0
drivers/gpu/drm/amd/amdgpu/mmhub_v1_8.c: +30 -1
drivers/gpu/drm/amd/amdgpu/mmhub_v3_3.c: +1 -0
drivers/gpu/drm/amd/amdgpu/mmhub_v9_4.c: +31 -0
drivers/gpu/drm/amd/amdgpu/mxgpu_nv.c: +14 -0
drivers/gpu/drm/amd/amdgpu/mxgpu_nv.h: +2 -0
drivers/gpu/drm/amd/amdgpu/navi10_ih.c: +3 -3
drivers/gpu/drm/amd/amdgpu/nbif_v6_3_1.c: +0 -47
drivers/gpu/drm/amd/amdgpu/nbif_v6_3_1.h: +0 -1
drivers/gpu/drm/amd/amdgpu/nbio_v2_3.c: +0 -1
drivers/gpu/drm/amd/amdgpu/nbio_v4_3.c: +0 -1
drivers/gpu/drm/amd/amdgpu/nbio_v6_1.c: +0 -1
drivers/gpu/drm/amd/amdgpu/nbio_v7_0.c: +0 -1
drivers/gpu/drm/amd/amdgpu/nbio_v7_11.c: +0 -1
drivers/gpu/drm/amd/amdgpu/nbio_v7_2.c: +0 -1
drivers/gpu/drm/amd/amdgpu/nbio_v7_4.c: +0 -1
drivers/gpu/drm/amd/amdgpu/nbio_v7_7.c: +0 -1
drivers/gpu/drm/amd/amdgpu/nbio_v7_9.c: +0 -1
drivers/gpu/drm/amd/amdgpu/nv.c: +12 -11
drivers/gpu/drm/amd/amdgpu/nvd.h: +208 -0
drivers/gpu/drm/amd/amdgpu/psp_v11_0.c: +1 -0
drivers/gpu/drm/amd/amdgpu/psp_v14_0.c: +10 -0
drivers/gpu/drm/amd/amdgpu/sdma_v2_4.c: +2 -2
drivers/gpu/drm/amd/amdgpu/sdma_v3_0.c: +4 -4
drivers/gpu/drm/amd/amdgpu/sdma_v4_0.c: +4 -6
drivers/gpu/drm/amd/amdgpu/sdma_v4_4_2.c: +232 -32
drivers/gpu/drm/amd/amdgpu/sdma_v5_0.c: +4 -4
drivers/gpu/drm/amd/amdgpu/sdma_v5_2.c: +4 -4
drivers/gpu/drm/amd/amdgpu/sdma_v6_0.c: +4 -3
drivers/gpu/drm/amd/amdgpu/sdma_v7_0.c: +3 -3
drivers/gpu/drm/amd/amdgpu/si.c: +38 -38
drivers/gpu/drm/amd/amdgpu/si_dma.c: +3 -3
drivers/gpu/drm/amd/amdgpu/si_enums.h: +0 -12
drivers/gpu/drm/amd/amdgpu/si_ih.c: +3 -3
drivers/gpu/drm/amd/amdgpu/sid.h: +24 -345
drivers/gpu/drm/amd/amdgpu/soc15.c: +6 -9
drivers/gpu/drm/amd/amdgpu/soc15d.h: +139 -0
drivers/gpu/drm/amd/amdgpu/soc21.c: +35 -11
drivers/gpu/drm/amd/amdgpu/soc24.c: +3 -4
drivers/gpu/drm/amd/amdgpu/ta_ras_if.h: +1 -0
drivers/gpu/drm/amd/amdgpu/tonga_ih.c: +2 -2
drivers/gpu/drm/amd/amdgpu/umc_v12_0.c: +1 -0
drivers/gpu/drm/amd/amdgpu/uvd_v3_1.c: +5 -5
drivers/gpu/drm/amd/amdgpu/uvd_v4_2.c: +4 -3
drivers/gpu/drm/amd/amdgpu/uvd_v5_0.c: +4 -4
drivers/gpu/drm/amd/amdgpu/uvd_v6_0.c: +5 -5
drivers/gpu/drm/amd/amdgpu/vce_v2_0.c: +4 -4
drivers/gpu/drm/amd/amdgpu/vce_v3_0.c: +5 -5
drivers/gpu/drm/amd/amdgpu/vcn_v1_0.c: +111 -90
drivers/gpu/drm/amd/amdgpu/vcn_v2_0.c: +119 -102
drivers/gpu/drm/amd/amdgpu/vcn_v2_5.c: +666 -513
drivers/gpu/drm/amd/amdgpu/vcn_v3_0.c: +358 -317
drivers/gpu/drm/amd/amdgpu/vcn_v4_0.c: +352 -319
drivers/gpu/drm/amd/amdgpu/vcn_v4_0_3.c: +335 -304
drivers/gpu/drm/amd/amdgpu/vcn_v4_0_3.h: +9 -0
drivers/gpu/drm/amd/amdgpu/vcn_v4_0_5.c: +349 -315
drivers/gpu/drm/amd/amdgpu/vcn_v5_0_0.c: +311 -287
drivers/gpu/drm/amd/amdgpu/vcn_v5_0_1.c: +309 -270
drivers/gpu/drm/amd/amdgpu/vcn_v5_0_1.h: +3 -0
drivers/gpu/drm/amd/amdgpu/vega10_ih.c: +1 -1
drivers/gpu/drm/amd/amdgpu/vega10_sdma_pkt_open.h: +70 -0
drivers/gpu/drm/amd/amdgpu/vega20_ih.c: +1 -1
drivers/gpu/drm/amd/amdgpu/vi.c: +3 -3
drivers/gpu/drm/amd/amdkfd/Makefile: +0 -1
drivers/gpu/drm/amd/amdkfd/cik_event_interrupt.c: +14 -4
drivers/gpu/drm/amd/amdkfd/kfd_chardev.c: +25 -13
drivers/gpu/drm/amd/amdkfd/kfd_crat.c: +17 -11
drivers/gpu/drm/amd/amdkfd/kfd_debug.c: +13 -13
drivers/gpu/drm/amd/amdkfd/kfd_device.c: +18 -2
drivers/gpu/drm/amd/amdkfd/kfd_device_queue_manager.c: +184 -145
drivers/gpu/drm/amd/amdkfd/kfd_device_queue_manager.h: +14 -4
drivers/gpu/drm/amd/amdkfd/kfd_device_queue_manager_cik.c: +50 -25
drivers/gpu/drm/amd/amdkfd/kfd_device_queue_manager_v10.c: +26 -17
drivers/gpu/drm/amd/amdkfd/kfd_device_queue_manager_v11.c: +26 -17
drivers/gpu/drm/amd/amdkfd/kfd_device_queue_manager_v12.c: +26 -17
drivers/gpu/drm/amd/amdkfd/kfd_device_queue_manager_v9.c: +42 -3
drivers/gpu/drm/amd/amdkfd/kfd_device_queue_manager_vi.c: +49 -28
drivers/gpu/drm/amd/amdkfd/kfd_events.c: +24 -19
drivers/gpu/drm/amd/amdkfd/kfd_int_process_v11.c: +1 -1
drivers/gpu/drm/amd/amdkfd/kfd_int_process_v9.c: +1 -1
drivers/gpu/drm/amd/amdkfd/kfd_migrate.c: +1 -1
drivers/gpu/drm/amd/amdkfd/kfd_mqd_manager_v9.c: +24 -3
drivers/gpu/drm/amd/amdkfd/kfd_packet_manager.c: +30 -6
drivers/gpu/drm/amd/amdkfd/kfd_packet_manager_v9.c: +72 -16
drivers/gpu/drm/amd/amdkfd/kfd_packet_manager_vi.c: +4 -3
drivers/gpu/drm/amd/amdkfd/kfd_pasid.c: +0 -70
drivers/gpu/drm/amd/amdkfd/kfd_priv.h: +30 -15
drivers/gpu/drm/amd/amdkfd/kfd_process.c: +93 -61
drivers/gpu/drm/amd/amdkfd/kfd_process_queue_manager.c: +22 -19
drivers/gpu/drm/amd/amdkfd/kfd_svm.c: +30 -24
drivers/gpu/drm/amd/amdkfd/kfd_svm.h: +1 -1
drivers/gpu/drm/amd/amdkfd/kfd_topology.c: +35 -38
drivers/gpu/drm/amd/amdkfd/kfd_topology.h: +18 -0
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c: +265 -116
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.h: +29 -2
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_debugfs.c: +1 -1
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_hdcp.c: +13 -30
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_helpers.c: +11 -5
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_irq.c: +5 -9
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_irq.h: +3 -3
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_mst_types.c: +5 -4
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_plane.c: +9 -6
drivers/gpu/drm/amd/display/dc/Makefile: +1 -1
drivers/gpu/drm/amd/display/dc/basics/dc_common.c: +2 -1
drivers/gpu/drm/amd/display/dc/bios/bios_parser2.c: +13 -2
drivers/gpu/drm/amd/display/dc/bios/command_table2.c: +47 -9
drivers/gpu/drm/amd/display/dc/bios/command_table_helper.c: +104 -0
drivers/gpu/drm/amd/display/dc/bios/command_table_helper.h: +8 -0
drivers/gpu/drm/amd/display/dc/bios/command_table_helper2.c: +2 -2
drivers/gpu/drm/amd/display/dc/bios/dce110/command_table_helper_dce110.c: +0 -104
drivers/gpu/drm/amd/display/dc/bios/dce112/command_table_helper2_dce112.c: +2 -104
drivers/gpu/drm/amd/display/dc/bios/dce112/command_table_helper_dce112.c: +0 -104
drivers/gpu/drm/amd/display/dc/bios/dce60/command_table_helper_dce60.c: +0 -104
drivers/gpu/drm/amd/display/dc/bios/dce80/command_table_helper_dce80.c: +0 -104
drivers/gpu/drm/amd/display/dc/clk_mgr/dcn315/dcn315_clk_mgr.c: +12 -10
drivers/gpu/drm/amd/display/dc/clk_mgr/dcn316/dcn316_clk_mgr.c: +10 -5
drivers/gpu/drm/amd/display/dc/clk_mgr/dcn35/dcn35_clk_mgr.c: +31 -19
drivers/gpu/drm/amd/display/dc/clk_mgr/dcn401/dcn401_clk_mgr.c: +2 -0
drivers/gpu/drm/amd/display/dc/core/dc.c: +114 -79
drivers/gpu/drm/amd/display/dc/core/dc_debug.c: +0 -120
drivers/gpu/drm/amd/display/dc/core/dc_hw_sequencer.c: +75 -3
drivers/gpu/drm/amd/display/dc/core/dc_link_enc_cfg.c: +2 -25
drivers/gpu/drm/amd/display/dc/core/dc_link_exports.c: +8 -7
drivers/gpu/drm/amd/display/dc/core/dc_resource.c: +292 -12
drivers/gpu/drm/amd/display/dc/core/dc_stream.c: +2 -1
drivers/gpu/drm/amd/display/dc/core/dc_surface.c: +4 -27
drivers/gpu/drm/amd/display/dc/dc.h: +18 -20
drivers/gpu/drm/amd/display/dc/dc_dmub_srv.c: +46 -93
drivers/gpu/drm/amd/display/dc/dc_dmub_srv.h: +1 -1
drivers/gpu/drm/amd/display/dc/dc_dp_types.h: +84 -13
drivers/gpu/drm/amd/display/dc/dc_helper.c: +2 -0
drivers/gpu/drm/amd/display/dc/dc_hw_types.h: +4 -1
drivers/gpu/drm/amd/display/dc/dc_plane.h: +2 -2
drivers/gpu/drm/amd/display/dc/dc_spl_translate.c: +0 -1
drivers/gpu/drm/amd/display/dc/dc_stream.h: +0 -12
drivers/gpu/drm/amd/display/dc/dc_types.h: +8 -1
drivers/gpu/drm/amd/display/dc/dccg/dcn20/dcn20_dccg.h: +48 -46
drivers/gpu/drm/amd/display/dc/dccg/dcn401/dcn401_dccg.c: +13 -13
drivers/gpu/drm/amd/display/dc/dccg/dcn401/dcn401_dccg.h: +39 -2
drivers/gpu/drm/amd/display/dc/dce/dce_stream_encoder.c: +2 -1
drivers/gpu/drm/amd/display/dc/dce/dmub_hw_lock_mgr.c: +4 -0
drivers/gpu/drm/amd/display/dc/dce/dmub_psr.c: +4 -0
drivers/gpu/drm/amd/display/dc/dce110/dce110_compressor.c: +0 -13
drivers/gpu/drm/amd/display/dc/dce110/dce110_compressor.h: +0 -2
drivers/gpu/drm/amd/display/dc/dce60/dce60_hw_sequencer.c: +1 -0
drivers/gpu/drm/amd/display/dc/dcn10/dcn10_hw_sequencer_debug.c: +5 -2
drivers/gpu/drm/amd/display/dc/dio/dcn10/dcn10_stream_encoder.c: +2 -1
drivers/gpu/drm/amd/display/dc/dio/dcn30/dcn30_dio_stream_encoder.c: +1 -1
drivers/gpu/drm/amd/display/dc/dio/dcn30/dcn30_dio_stream_encoder.h: +5 -1
drivers/gpu/drm/amd/display/dc/dio/dcn35/dcn35_dio_link_encoder.c: +47 -3
drivers/gpu/drm/amd/display/dc/dio/dcn35/dcn35_dio_link_encoder.h: +23 -0
drivers/gpu/drm/amd/display/dc/dio/dcn401/dcn401_dio_stream_encoder.c: +9 -8
drivers/gpu/drm/amd/display/dc/dio/dcn401/dcn401_dio_stream_encoder.h: +23 -0
drivers/gpu/drm/amd/display/dc/dm_services.h: +7 -0
drivers/gpu/drm/amd/display/dc/dm_services_types.h: +26 -0
drivers/gpu/drm/amd/display/dc/dml/dcn30/dcn30_fpu.c: +0 -76
drivers/gpu/drm/amd/display/dc/dml/dcn30/dcn30_fpu.h: +0 -3
drivers/gpu/drm/amd/display/dc/dml/dcn30/display_mode_vba_30.c: +6 -6
drivers/gpu/drm/amd/display/dc/dml/dcn314/dcn314_fpu.c: +3 -0
drivers/gpu/drm/amd/display/dc/dml/dcn32/dcn32_fpu.c: +1 -0
drivers/gpu/drm/amd/display/dc/dml/dcn35/dcn35_fpu.c: +3 -1
drivers/gpu/drm/amd/display/dc/dml/dcn351/dcn351_fpu.c: +1 -0
drivers/gpu/drm/amd/display/dc/dml/display_rq_dlg_helpers.c: +0 -11
drivers/gpu/drm/amd/display/dc/dml/display_rq_dlg_helpers.h: +0 -1
drivers/gpu/drm/amd/display/dc/dml2/display_mode_core.c: +2 -0
drivers/gpu/drm/amd/display/dc/dml2/display_mode_core_structs.h: +1 -0
drivers/gpu/drm/amd/display/dc/dml2/dml21/dml21_utils.c: +0 -1
drivers/gpu/drm/amd/display/dc/dml2/dml21/dml21_wrapper.c: +14 -0
drivers/gpu/drm/amd/display/dc/dml2/dml21/inc/dml_top_types.h: +5 -5
drivers/gpu/drm/amd/display/dc/dml2/dml21/src/dml2_core/dml2_core_dcn4.c: +30 -3
drivers/gpu/drm/amd/display/dc/dml2/dml21/src/dml2_core/dml2_core_dcn4.h: +0 -3
drivers/gpu/drm/amd/display/dc/dml2/dml21/src/dml2_core/dml2_core_dcn4_calcs.c: +89 -45
drivers/gpu/drm/amd/display/dc/dml2/dml21/src/dml2_core/dml2_core_shared.c: +0 -12413
drivers/gpu/drm/amd/display/dc/dml2/dml21/src/dml2_core/dml2_core_shared_types.h: +13 -1
drivers/gpu/drm/amd/display/dc/dml2/dml21/src/dml2_core/dml2_core_utils.c: +2 -1
drivers/gpu/drm/amd/display/dc/dml2/dml21/src/dml2_dpmm/dml2_dpmm_dcn4.c: +2 -2
drivers/gpu/drm/amd/display/dc/dml2/dml21/src/dml2_dpmm/dml2_dpmm_dcn4.h: +0 -2
drivers/gpu/drm/amd/display/dc/dml2/dml21/src/dml2_mcg/dml2_mcg_factory.c: +1 -1
drivers/gpu/drm/amd/display/dc/dml2/dml21/src/dml2_pmo/dml2_pmo_dcn4_fams2.c: +20 -0
drivers/gpu/drm/amd/display/dc/dml2/dml21/src/dml2_top/dml2_top_interfaces.c: +0 -1
drivers/gpu/drm/amd/display/dc/dml2/dml21/src/dml2_top/dml2_top_soc15.c: +0 -8
drivers/gpu/drm/amd/display/dc/dml2/dml21/src/dml2_top/dml_top.c: +0 -354
drivers/gpu/drm/amd/display/dc/dml2/dml21/src/inc/dml2_debug.c: +0 -5
drivers/gpu/drm/amd/display/dc/dml2/dml21/src/inc/dml2_debug.h: +2 -4
drivers/gpu/drm/amd/display/dc/dml2/dml21/src/inc/dml2_internal_shared_types.h: +0 -6
drivers/gpu/drm/amd/display/dc/dml2/dml2_dc_resource_mgmt.c: +0 -26
drivers/gpu/drm/amd/display/dc/dml2/dml2_policy.c: +1 -0
drivers/gpu/drm/amd/display/dc/dml2/dml2_translation_helper.c: +5 -1
drivers/gpu/drm/amd/display/dc/dml2/dml2_wrapper.c: +8 -2
drivers/gpu/drm/amd/display/dc/dml2/dml2_wrapper.h: +1 -0
drivers/gpu/drm/amd/display/dc/dpp/dcn20/dcn20_dpp.h: +0 -1
drivers/gpu/drm/amd/display/dc/dpp/dcn30/dcn30_dpp.c: +6 -5
drivers/gpu/drm/amd/display/dc/dpp/dcn32/dcn32_dpp.h: +0 -1
drivers/gpu/drm/amd/display/dc/dpp/dcn401/dcn401_dpp.h: +75 -73
drivers/gpu/drm/amd/display/dc/dsc/dcn401/dcn401_dsc.c: +6 -13
drivers/gpu/drm/amd/display/dc/dsc/dcn401/dcn401_dsc.h: +7 -0
drivers/gpu/drm/amd/display/dc/gpio/hw_factory.c: +1 -0
drivers/gpu/drm/amd/display/dc/gpio/hw_translate.c: +1 -0
drivers/gpu/drm/amd/display/dc/hpo/dcn31/dcn31_hpo_dp_link_encoder.c: +5 -5
drivers/gpu/drm/amd/display/dc/hpo/dcn31/dcn31_hpo_dp_link_encoder.h: +6 -0
drivers/gpu/drm/amd/display/dc/hpo/dcn31/dcn31_hpo_dp_stream_encoder.c: +2 -1
drivers/gpu/drm/amd/display/dc/hpo/dcn32/dcn32_hpo_dp_link_encoder.c: +1 -1
drivers/gpu/drm/amd/display/dc/hpo/dcn32/dcn32_hpo_dp_link_encoder.h: +4 -0
drivers/gpu/drm/amd/display/dc/hubbub/dcn10/dcn10_hubbub.c: +0 -18
drivers/gpu/drm/amd/display/dc/hubbub/dcn10/dcn10_hubbub.h: +0 -3
drivers/gpu/drm/amd/display/dc/hubbub/dcn35/dcn35_hubbub.c: +7 -7
drivers/gpu/drm/amd/display/dc/hubbub/dcn35/dcn35_hubbub.h: +16 -0
drivers/gpu/drm/amd/display/dc/hubp/dcn20/dcn20_hubp.h: +2 -3
drivers/gpu/drm/amd/display/dc/hubp/dcn31/dcn31_hubp.c: +1 -1
drivers/gpu/drm/amd/display/dc/hubp/dcn35/dcn35_hubp.c: +1 -1
drivers/gpu/drm/amd/display/dc/hubp/dcn35/dcn35_hubp.h: +1 -0
drivers/gpu/drm/amd/display/dc/hwss/dce/dce_hwseq.h: +9 -0
drivers/gpu/drm/amd/display/dc/hwss/dce100/dce100_hwseq.c: +30 -0
drivers/gpu/drm/amd/display/dc/hwss/dce100/dce100_hwseq.h: +4 -0
drivers/gpu/drm/amd/display/dc/hwss/dce110/dce110_hwseq.c: +13 -10
drivers/gpu/drm/amd/display/dc/hwss/dce120/dce120_hwseq.c: +2 -0
drivers/gpu/drm/amd/display/dc/hwss/dce80/dce80_hwseq.c: +1 -0
drivers/gpu/drm/amd/display/dc/hwss/dcn10/dcn10_hwseq.c: +43 -66
drivers/gpu/drm/amd/display/dc/hwss/dcn10/dcn10_hwseq.h: +4 -0
drivers/gpu/drm/amd/display/dc/hwss/dcn10/dcn10_init.c: +1 -0
drivers/gpu/drm/amd/display/dc/hwss/dcn20/dcn20_hwseq.c: +18 -12
drivers/gpu/drm/amd/display/dc/hwss/dcn20/dcn20_init.c: +1 -0
drivers/gpu/drm/amd/display/dc/hwss/dcn201/dcn201_init.c: +1 -0
drivers/gpu/drm/amd/display/dc/hwss/dcn21/dcn21_init.c: +1 -0
drivers/gpu/drm/amd/display/dc/hwss/dcn30/dcn30_init.c: +1 -0
drivers/gpu/drm/amd/display/dc/hwss/dcn301/dcn301_init.c: +1 -0
drivers/gpu/drm/amd/display/dc/hwss/dcn31/dcn31_hwseq.c: +8 -4
drivers/gpu/drm/amd/display/dc/hwss/dcn31/dcn31_init.c: +1 -0
drivers/gpu/drm/amd/display/dc/hwss/dcn314/dcn314_init.c: +1 -0
drivers/gpu/drm/amd/display/dc/hwss/dcn32/dcn32_hwseq.c: +4 -1
drivers/gpu/drm/amd/display/dc/hwss/dcn32/dcn32_init.c: +1 -0
drivers/gpu/drm/amd/display/dc/hwss/dcn35/dcn35_hwseq.c: +1 -2
drivers/gpu/drm/amd/display/dc/hwss/dcn35/dcn35_init.c: +1 -0
drivers/gpu/drm/amd/display/dc/hwss/dcn351/dcn351_init.c: +1 -0
drivers/gpu/drm/amd/display/dc/hwss/dcn401/dcn401_hwseq.c: +43 -56
drivers/gpu/drm/amd/display/dc/hwss/dcn401/dcn401_hwseq.h: +7 -0
drivers/gpu/drm/amd/display/dc/hwss/dcn401/dcn401_init.c: +2 -1
drivers/gpu/drm/amd/display/dc/hwss/hw_sequencer.h: +12 -0
drivers/gpu/drm/amd/display/dc/inc/core_types.h: +5 -2
drivers/gpu/drm/amd/display/dc/inc/hw/clk_mgr_internal.h: +1 -0
drivers/gpu/drm/amd/display/dc/inc/hw/dpp.h: +5 -1
drivers/gpu/drm/amd/display/dc/inc/hw/optc.h: +1 -29
drivers/gpu/drm/amd/display/dc/inc/hw/timing_generator.h: +30 -0
drivers/gpu/drm/amd/display/dc/inc/hw/transform.h: +1 -1
drivers/gpu/drm/amd/display/dc/inc/link.h: +1 -3
drivers/gpu/drm/amd/display/dc/inc/link_enc_cfg.h: +0 -5
drivers/gpu/drm/amd/display/dc/inc/resource.h: +7 -1
drivers/gpu/drm/amd/display/dc/irq/Makefile: +9 -0
drivers/gpu/drm/amd/display/dc/irq/dcn36/irq_service_dcn36.c: +408 -0
drivers/gpu/drm/amd/display/dc/irq/dcn36/irq_service_dcn36.h: +12 -0
drivers/gpu/drm/amd/display/dc/irq_types.h: +1 -0
drivers/gpu/drm/amd/display/dc/link/hwss/link_hwss_dio.c: +60 -11
drivers/gpu/drm/amd/display/dc/link/hwss/link_hwss_dio_fixed_vs_pe_retimer.c: +4 -1
drivers/gpu/drm/amd/display/dc/link/hwss/link_hwss_dpia.c: +36 -24
drivers/gpu/drm/amd/display/dc/link/link_detection.c: +4 -1
drivers/gpu/drm/amd/display/dc/link/link_dpms.c: +9 -23
drivers/gpu/drm/amd/display/dc/link/link_factory.c: +0 -1
drivers/gpu/drm/amd/display/dc/link/protocols/link_dp_capability.c: +104 -37
drivers/gpu/drm/amd/display/dc/link/protocols/link_dp_capability.h: +1 -0
drivers/gpu/drm/amd/display/dc/link/protocols/link_dp_dpia_bw.c: +60 -149
drivers/gpu/drm/amd/display/dc/link/protocols/link_dp_dpia_bw.h: +12 -16
drivers/gpu/drm/amd/display/dc/link/protocols/link_dp_irq_handler.c: +40 -3
drivers/gpu/drm/amd/display/dc/link/protocols/link_dp_phy.c: +14 -10
drivers/gpu/drm/amd/display/dc/link/protocols/link_dp_phy.h: +2 -1
drivers/gpu/drm/amd/display/dc/link/protocols/link_dp_training.c: +18 -12
drivers/gpu/drm/amd/display/dc/link/protocols/link_dp_training.h: +2 -0
drivers/gpu/drm/amd/display/dc/link/protocols/link_dp_training_128b_132b.c: +3 -1
drivers/gpu/drm/amd/display/dc/link/protocols/link_dp_training_128b_132b.h: +1 -0
drivers/gpu/drm/amd/display/dc/link/protocols/link_dp_training_8b_10b.c: +8 -4
drivers/gpu/drm/amd/display/dc/link/protocols/link_dp_training_8b_10b.h: +2 -1
drivers/gpu/drm/amd/display/dc/link/protocols/link_dp_training_auxless.c: +1 -0
drivers/gpu/drm/amd/display/dc/link/protocols/link_dp_training_dpia.c: +9 -5
drivers/gpu/drm/amd/display/dc/link/protocols/link_dp_training_fixed_vs_pe_retimer.c: +2 -1
drivers/gpu/drm/amd/display/dc/link/protocols/link_edp_panel_control.c: +22 -3
drivers/gpu/drm/amd/display/dc/mmhubbub/Makefile: +1 -1
drivers/gpu/drm/amd/display/dc/mpc/Makefile: +1 -1
drivers/gpu/drm/amd/display/dc/mpc/dcn10/dcn10_mpc.c: +0 -16
drivers/gpu/drm/amd/display/dc/mpc/dcn10/dcn10_mpc.h: +0 -4
drivers/gpu/drm/amd/display/dc/mpc/dcn401/dcn401_mpc.c: +2 -2
drivers/gpu/drm/amd/display/dc/mpc/dcn401/dcn401_mpc.h: +26 -2
drivers/gpu/drm/amd/display/dc/optc/dcn10/dcn10_optc.c: +5 -2
drivers/gpu/drm/amd/display/dc/optc/dcn10/dcn10_optc.h: +109 -104
drivers/gpu/drm/amd/display/dc/optc/dcn20/dcn20_optc.c: +1 -0
drivers/gpu/drm/amd/display/dc/optc/dcn201/dcn201_optc.c: +1 -0
drivers/gpu/drm/amd/display/dc/optc/dcn30/dcn30_optc.c: +1 -0
drivers/gpu/drm/amd/display/dc/optc/dcn301/dcn301_optc.c: +1 -0
drivers/gpu/drm/amd/display/dc/optc/dcn31/dcn31_optc.c: +71 -0
drivers/gpu/drm/amd/display/dc/optc/dcn31/dcn31_optc.h: +6 -1
drivers/gpu/drm/amd/display/dc/optc/dcn314/dcn314_optc.c: +1 -0
drivers/gpu/drm/amd/display/dc/optc/dcn314/dcn314_optc.h: +3 -1
drivers/gpu/drm/amd/display/dc/optc/dcn32/dcn32_optc.c: +1 -0
drivers/gpu/drm/amd/display/dc/optc/dcn32/dcn32_optc.h: +2 -1
drivers/gpu/drm/amd/display/dc/optc/dcn35/dcn35_optc.c: +1 -0
drivers/gpu/drm/amd/display/dc/optc/dcn35/dcn35_optc.h: +2 -1
drivers/gpu/drm/amd/display/dc/optc/dcn401/dcn401_optc.c: +12 -11
drivers/gpu/drm/amd/display/dc/optc/dcn401/dcn401_optc.h: +21 -1
drivers/gpu/drm/amd/display/dc/resource/Makefile: +8 -0
drivers/gpu/drm/amd/display/dc/resource/dce120/dce120_resource.c: +17 -0
drivers/gpu/drm/amd/display/dc/resource/dcn20/dcn20_resource.c: +3 -2
drivers/gpu/drm/amd/display/dc/resource/dcn21/dcn21_resource.c: +3 -3
drivers/gpu/drm/amd/display/dc/resource/dcn30/dcn30_resource.c: +2 -1
drivers/gpu/drm/amd/display/dc/resource/dcn31/dcn31_resource.c: +3 -2
drivers/gpu/drm/amd/display/dc/resource/dcn314/dcn314_resource.c: +2 -1
drivers/gpu/drm/amd/display/dc/resource/dcn315/dcn315_resource.c: +20 -22
drivers/gpu/drm/amd/display/dc/resource/dcn32/dcn32_resource.c: +2 -1
drivers/gpu/drm/amd/display/dc/resource/dcn32/dcn32_resource.h: +2 -1
drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35_resource.c: +4 -3
drivers/gpu/drm/amd/display/dc/resource/dcn35/dcn35_resource.h: +2 -1
drivers/gpu/drm/amd/display/dc/resource/dcn351/dcn351_resource.c: +4 -3
drivers/gpu/drm/amd/display/dc/resource/dcn36/dcn36_resource.c: +2171 -0
drivers/gpu/drm/amd/display/dc/resource/dcn36/dcn36_resource.h: +73 -0
drivers/gpu/drm/amd/display/dc/resource/dcn401/dcn401_resource.c: +7 -10
drivers/gpu/drm/amd/display/dc/resource/dcn401/dcn401_resource.h: +2 -1
drivers/gpu/drm/amd/display/dc/spl/dc_spl.h: +0 -18
drivers/gpu/drm/amd/display/dc/spl/dc_spl_scl_filters.h: +0 -22
drivers/gpu/drm/amd/display/dc/{spl => sspl}/Makefile: +1 -1
drivers/gpu/drm/amd/display/dc/{spl => sspl}/dc_spl.c: +64 -38
drivers/gpu/drm/amd/display/dc/sspl/dc_spl.h: +27 -0
drivers/gpu/drm/amd/display/dc/{spl => sspl}/dc_spl_filters.c: +0 -0
drivers/gpu/drm/amd/display/dc/{spl => sspl}/dc_spl_filters.h: +0 -0
drivers/gpu/drm/amd/display/dc/{spl => sspl}/dc_spl_isharp_filters.c: +124 -328
drivers/gpu/drm/amd/display/dc/{spl => sspl}/dc_spl_isharp_filters.h: +5 -13
drivers/gpu/drm/amd/display/dc/{spl => sspl}/dc_spl_scl_easf_filters.c: +959 -99
drivers/gpu/drm/amd/display/dc/{spl => sspl}/dc_spl_scl_easf_filters.h: +4 -5
drivers/gpu/drm/amd/display/dc/{spl => sspl}/dc_spl_scl_filters.c: +7 -225
drivers/gpu/drm/amd/display/dc/sspl/dc_spl_scl_filters.h: +13 -0
drivers/gpu/drm/amd/display/dc/{spl => sspl}/dc_spl_types.h: +11 -1
drivers/gpu/drm/amd/display/dc/{spl => sspl}/spl_custom_float.c: +0 -0
drivers/gpu/drm/amd/display/dc/{spl => sspl}/spl_custom_float.h: +0 -0
drivers/gpu/drm/amd/display/dc/{spl => sspl}/spl_debug.h: +0 -0
drivers/gpu/drm/amd/display/dc/{spl => sspl}/spl_fixpt31_32.c: +1 -1
drivers/gpu/drm/amd/display/dc/{spl => sspl}/spl_fixpt31_32.h: +2 -2
drivers/gpu/drm/amd/display/dc/{spl => sspl}/spl_os_types.h: +0 -0
drivers/gpu/drm/amd/display/dmub/dmub_srv.h: +6 -6
drivers/gpu/drm/amd/display/dmub/inc/dmub_cmd.h: +130 -1
drivers/gpu/drm/amd/display/dmub/src/Makefile: +1 -0
drivers/gpu/drm/amd/display/dmub/src/dmub_dcn20.c: +44 -41
drivers/gpu/drm/amd/display/dmub/src/dmub_dcn20.h: +1 -1
drivers/gpu/drm/amd/display/dmub/src/dmub_dcn31.c: +60 -51
drivers/gpu/drm/amd/display/dmub/src/dmub_dcn31.h: +1 -1
drivers/gpu/drm/amd/display/dmub/src/dmub_dcn32.c: +50 -48
drivers/gpu/drm/amd/display/dmub/src/dmub_dcn32.h: +1 -1
drivers/gpu/drm/amd/display/dmub/src/dmub_dcn35.c: +50 -47
drivers/gpu/drm/amd/display/dmub/src/dmub_dcn35.h: +1 -1
drivers/gpu/drm/amd/display/dmub/src/dmub_dcn36.c: +34 -0
drivers/gpu/drm/amd/display/dmub/src/dmub_dcn36.h: +13 -0
drivers/gpu/drm/amd/display/dmub/src/dmub_dcn401.c: +80 -64
drivers/gpu/drm/amd/display/dmub/src/dmub_dcn401.h: +3 -2
drivers/gpu/drm/amd/display/dmub/src/dmub_srv.c: +11 -6
drivers/gpu/drm/amd/display/include/dal_asic_id.h: +1 -0
drivers/gpu/drm/amd/display/include/dal_types.h: +1 -0
drivers/gpu/drm/amd/display/include/logger_interface.h: +0 -5
drivers/gpu/drm/amd/display/include/logger_types.h: +1 -0
drivers/gpu/drm/amd/display/modules/freesync/freesync.c: +0 -137
drivers/gpu/drm/amd/display/modules/inc/mod_freesync.h: +0 -26
drivers/gpu/drm/amd/display/modules/info_packet/info_packet.c: +2 -2
drivers/gpu/drm/amd/include/amd_acpi.h: +3 -1
drivers/gpu/drm/amd/include/amd_cper.h: +269 -0
drivers/gpu/drm/amd/include/amd_shared.h: +18 -2
drivers/gpu/drm/amd/include/asic_reg/dcn/dcn_3_6_0_offset.h: +15485 -0
drivers/gpu/drm/amd/include/asic_reg/dcn/dcn_3_6_0_sh_mask.h: +61940 -0
drivers/gpu/drm/amd/include/asic_reg/gc/gc_11_5_0_offset.h: +2 -0
drivers/gpu/drm/amd/include/asic_reg/gc/gc_9_4_3_sh_mask.h: +2 -0
drivers/gpu/drm/amd/include/asic_reg/mmhub/mmhub_9_4_1_offset.h: +32 -0
drivers/gpu/drm/amd/include/asic_reg/mmhub/mmhub_9_4_1_sh_mask.h: +48 -0
drivers/gpu/drm/amd/include/asic_reg/vcn/vcn_4_0_3_offset.h: +36 -1
drivers/gpu/drm/amd/include/kgd_kfd_interface.h: +5 -2
drivers/gpu/drm/amd/include/mes_v11_api_def.h: +2 -1
drivers/gpu/drm/amd/include/mes_v12_api_def.h: +41 -1
drivers/gpu/drm/amd/pm/amdgpu_dpm.c: +27 -0
drivers/gpu/drm/amd/pm/amdgpu_pm.c: +261 -407
drivers/gpu/drm/amd/pm/inc/amdgpu_dpm.h: +3 -1
drivers/gpu/drm/amd/pm/legacy-dpm/kv_dpm.c: +1 -1
drivers/gpu/drm/amd/pm/legacy-dpm/si_dpm.c: +1 -1
drivers/gpu/drm/amd/pm/powerplay/amd_powerplay.c: +6 -1
drivers/gpu/drm/amd/pm/powerplay/hwmgr/hardwaremanager.c: +0 -10
drivers/gpu/drm/amd/pm/powerplay/hwmgr/ppatomfwctrl.c: +0 -78
drivers/gpu/drm/amd/pm/powerplay/hwmgr/ppatomfwctrl.h: +0 -3
drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu10_hwmgr.c: +0 -1
drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu7_clockpowergating.c: +1 -1
drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu7_clockpowergating.h: +0 -1
drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu7_hwmgr.c: +0 -1
drivers/gpu/drm/amd/pm/powerplay/hwmgr/smu8_hwmgr.c: +0 -1
drivers/gpu/drm/amd/pm/powerplay/inc/hardwaremanager.h: +0 -1
drivers/gpu/drm/amd/pm/powerplay/inc/hwmgr.h: +0 -1
drivers/gpu/drm/amd/pm/swsmu/amdgpu_smu.c: +43 -28
drivers/gpu/drm/amd/pm/swsmu/inc/amdgpu_smu.h: +5 -0
drivers/gpu/drm/amd/pm/swsmu/inc/pmfw_if/smu_v13_0_12_pmfw.h: +281 -0
drivers/gpu/drm/amd/pm/swsmu/inc/pmfw_if/smu_v13_0_12_ppsmc.h: +143 -0
drivers/gpu/drm/amd/pm/swsmu/inc/pmfw_if/smu_v13_0_6_pmfw.h: +113 -2
drivers/gpu/drm/amd/pm/swsmu/inc/pmfw_if/smu_v13_0_6_ppsmc.h: +1 -1
drivers/gpu/drm/amd/pm/swsmu/inc/smu_types.h: +6 -3
drivers/gpu/drm/amd/pm/swsmu/inc/smu_v13_0.h: +13 -0
drivers/gpu/drm/amd/pm/swsmu/smu11/smu_v11_0.c: +8 -4
drivers/gpu/drm/amd/pm/swsmu/smu12/renoir_ppt.c: +6 -0
drivers/gpu/drm/amd/pm/swsmu/smu13/Makefile: +1 -1
drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0.c: +1 -4
drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_0_ppt.c: +18 -3
drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_12_ppt.c: +490 -0
drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_6_ppt.c: +180 -126
drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_6_ppt.h: +24 -0
drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_7_ppt.c: +10 -1
drivers/gpu/drm/amd/pm/swsmu/smu14/smu_v14_0.c: +54 -0
drivers/gpu/drm/amd/pm/swsmu/smu14/smu_v14_0_2_ppt.c: +10 -0
drivers/gpu/drm/amd/pm/swsmu/smu_cmn.c: +1 -2
drivers/gpu/drm/arm/Kconfig: +1 -0
drivers/gpu/drm/arm/display/komeda/komeda_wb_connector.c: +1 -1
drivers/gpu/drm/arm/malidp_mw.c: +1 -1
drivers/gpu/drm/aspeed/aspeed_gfx_drv.c: +1 -3
drivers/gpu/drm/ast/Makefile: +2 -0
drivers/gpu/drm/ast/ast_cursor.c: +309 -0
drivers/gpu/drm/ast/ast_dp.c: +182 -83
drivers/gpu/drm/ast/ast_drv.c: +6 -2
drivers/gpu/drm/ast/ast_drv.h: +36 -37
drivers/gpu/drm/ast/ast_main.c: +143 -72
drivers/gpu/drm/ast/ast_mode.c: +94 -494
drivers/gpu/drm/ast/ast_post.c: +37 -14
drivers/gpu/drm/ast/ast_reg.h: +12 -19
drivers/gpu/drm/ast/ast_tables.h: +2 -185
drivers/gpu/drm/ast/ast_vbios.c: +241 -0
drivers/gpu/drm/ast/ast_vbios.h: +108 -0
drivers/gpu/drm/bridge/Kconfig: +8 -0
drivers/gpu/drm/bridge/Makefile: +4 -0
drivers/gpu/drm/bridge/adv7511/adv7511_audio.c: +5 -0
drivers/gpu/drm/bridge/adv7511/adv7511_drv.c: +11 -5
drivers/gpu/drm/bridge/analogix/analogix_dp_core.c: +9 -20
drivers/gpu/drm/bridge/analogix/anx7625.c: +4 -4
drivers/gpu/drm/bridge/cadence/cdns-mhdp8546-core.c: +6 -13
drivers/gpu/drm/bridge/chipone-icn6211.c: +3 -4
drivers/gpu/drm/bridge/fsl-ldb.c: +2 -3
drivers/gpu/drm/bridge/imx/imx8mp-hdmi-pvi.c: +4 -3
drivers/gpu/drm/bridge/imx/imx8qm-ldb.c: +4 -6
drivers/gpu/drm/bridge/imx/imx8qxp-ldb.c: +9 -12
drivers/gpu/drm/bridge/imx/imx8qxp-pixel-combiner.c: +2 -3
drivers/gpu/drm/bridge/imx/imx8qxp-pixel-link.c: +4 -6
drivers/gpu/drm/bridge/imx/imx8qxp-pxl2dpi.c: +3 -5
drivers/gpu/drm/bridge/ite-it6263.c: +4 -7
drivers/gpu/drm/bridge/ite-it6505.c: +8 -8
drivers/gpu/drm/bridge/ite-it66121.c: +2 -3
drivers/gpu/drm/bridge/lontium-lt9211.c: +2 -3
drivers/gpu/drm/bridge/lontium-lt9611.c: +7 -11
drivers/gpu/drm/bridge/megachips-stdpxxxx-ge-b850v3-fw.c: +0 -7
drivers/gpu/drm/bridge/microchip-lvds.c: +1 -2
drivers/gpu/drm/bridge/nwl-dsi.c: +5 -6
drivers/gpu/drm/bridge/nxp-ptn3460.c: +0 -1
drivers/gpu/drm/bridge/panel.c: +7 -9
drivers/gpu/drm/bridge/parade-ps8622.c: +0 -1
drivers/gpu/drm/bridge/parade-ps8640.c: +2 -3
drivers/gpu/drm/bridge/samsung-dsim.c: +4 -4
drivers/gpu/drm/bridge/sii902x.c: +3 -3
drivers/gpu/drm/bridge/synopsys/dw-hdmi-qp.c: +491 -3
drivers/gpu/drm/bridge/synopsys/dw-hdmi.c: +4 -5
drivers/gpu/drm/bridge/synopsys/dw-mipi-dsi.c: +3 -3
drivers/gpu/drm/bridge/synopsys/dw-mipi-dsi2.c: +3 -3
drivers/gpu/drm/bridge/tc358762.c: +7 -4
drivers/gpu/drm/bridge/tc358767.c: +8 -12
drivers/gpu/drm/bridge/tc358775.c: +0 -1
drivers/gpu/drm/{i2c => bridge}/tda998x_drv.c: +4 -45
drivers/gpu/drm/bridge/ti-dlpc3433.c: +3 -3
drivers/gpu/drm/bridge/ti-sn65dsi83.c: +148 -5
drivers/gpu/drm/bridge/ti-sn65dsi86.c: +10 -9
drivers/gpu/drm/bridge/ti-tdp158.c: +4 -2
drivers/gpu/drm/ci/build.sh: +1 -1
drivers/gpu/drm/ci/build.yml: +102 -2
drivers/gpu/drm/ci/container.yml: +11 -11
drivers/gpu/drm/ci/gitlab-ci.yml: +105 -92
drivers/gpu/drm/ci/igt_runner.sh: +5 -8
drivers/gpu/drm/ci/image-tags.yml: +9 -2
drivers/gpu/drm/ci/lava-submit.sh: +72 -28
drivers/gpu/drm/ci/test.yml: +19 -18
drivers/gpu/drm/ci/xfails/amdgpu-stoney-fails.txt: +7 -1
drivers/gpu/drm/ci/xfails/amdgpu-stoney-flakes.txt: +14 -7
drivers/gpu/drm/ci/xfails/amdgpu-stoney-skips.txt: +5 -0
drivers/gpu/drm/ci/xfails/i915-amly-fails.txt: +5 -15
drivers/gpu/drm/ci/xfails/i915-amly-flakes.txt: +14 -0
drivers/gpu/drm/ci/xfails/i915-amly-skips.txt: +1 -0
drivers/gpu/drm/ci/xfails/i915-apl-fails.txt: +3 -5
drivers/gpu/drm/ci/xfails/i915-cml-fails.txt: +12 -10
drivers/gpu/drm/ci/xfails/i915-cml-flakes.txt: +7 -0
drivers/gpu/drm/ci/xfails/i915-cml-skips.txt: +1 -0
drivers/gpu/drm/ci/xfails/i915-glk-fails.txt: +2 -29
drivers/gpu/drm/ci/xfails/i915-glk-flakes.txt: +7 -0
drivers/gpu/drm/ci/xfails/i915-glk-skips.txt: +298 -0
drivers/gpu/drm/ci/xfails/i915-jsl-fails.txt: +8 -10
drivers/gpu/drm/ci/xfails/i915-jsl-flakes.txt: +4 -11
drivers/gpu/drm/ci/xfails/i915-kbl-skips.txt: +112 -0
drivers/gpu/drm/ci/xfails/i915-tgl-fails.txt: +7 -48
drivers/gpu/drm/ci/xfails/i915-tgl-skips.txt: +13 -0
drivers/gpu/drm/ci/xfails/i915-whl-fails.txt: +3 -12
drivers/gpu/drm/ci/xfails/i915-whl-flakes.txt: +7 -0
drivers/gpu/drm/ci/xfails/mediatek-mt8173-fails.txt: +2 -5
drivers/gpu/drm/ci/xfails/mediatek-mt8173-flakes.txt: +7 -0
drivers/gpu/drm/ci/xfails/mediatek-mt8173-skips.txt: +5 -0
drivers/gpu/drm/ci/xfails/mediatek-mt8183-fails.txt: +4 -8
drivers/gpu/drm/ci/xfails/mediatek-mt8183-skips.txt: +5 -0
drivers/gpu/drm/ci/xfails/msm-apq8016-fails.txt: +3 -0
drivers/gpu/drm/ci/xfails/msm-sc7180-trogdor-kingoftown-fails.txt: +0 -1
drivers/gpu/drm/ci/xfails/msm-sc7180-trogdor-kingoftown-flakes.txt: +14 -0
drivers/gpu/drm/ci/xfails/msm-sc7180-trogdor-kingoftown-skips.txt: +5 -0
drivers/gpu/drm/ci/xfails/msm-sc7180-trogdor-lazor-limozeen-fails.txt: +0 -1
drivers/gpu/drm/ci/xfails/msm-sc7180-trogdor-lazor-limozeen-skips.txt: +5 -0
drivers/gpu/drm/ci/xfails/msm-sdm845-fails.txt: +0 -2
drivers/gpu/drm/ci/xfails/msm-sdm845-skips.txt: +5 -0
drivers/gpu/drm/ci/xfails/msm-sm8350-hdk-fails.txt: +0 -5
drivers/gpu/drm/ci/xfails/rockchip-rk3288-fails.txt: +6 -20
drivers/gpu/drm/ci/xfails/rockchip-rk3399-fails.txt: +5 -8
drivers/gpu/drm/ci/xfails/rockchip-rk3399-flakes.txt: +56 -0
drivers/gpu/drm/ci/xfails/rockchip-rk3399-skips.txt: +5 -0
drivers/gpu/drm/ci/xfails/virtio_gpu-none-skips.txt: +5 -0
drivers/gpu/drm/ci/xfails/vkms-none-fails.txt: +2 -8
drivers/gpu/drm/ci/xfails/vkms-none-skips.txt: +539 -4
drivers/gpu/drm/display/drm_bridge_connector.c: +1 -1
drivers/gpu/drm/display/drm_dp_dual_mode_helper.c: +2 -2
drivers/gpu/drm/display/drm_dp_helper.c: +119 -0
drivers/gpu/drm/display/drm_dp_mst_topology.c: +21 -10
drivers/gpu/drm/display/drm_hdmi_state_helper.c: +1 -1
drivers/gpu/drm/drm_atomic_helper.c: +208 -125
drivers/gpu/drm/drm_atomic_uapi.c: +27 -10
drivers/gpu/drm/drm_bridge.c: +22 -57
drivers/gpu/drm/drm_buddy.c: +8 -3
drivers/gpu/drm/drm_client_event.c: +28 -13
drivers/gpu/drm/drm_crtc.c: +20 -0
drivers/gpu/drm/drm_crtc_helper_internal.h: +1 -1
drivers/gpu/drm/drm_damage_helper.c: +1 -1
drivers/gpu/drm/drm_debugfs.c: +1 -1
drivers/gpu/drm/drm_drv.c: +68 -0
drivers/gpu/drm/drm_fb_dma_helper.c: +1 -1
drivers/gpu/drm/drm_fb_helper.c: +14 -6
drivers/gpu/drm/drm_file.c: +18 -8
drivers/gpu/drm/drm_format_helper.c: +123 -0
drivers/gpu/drm/drm_gem.c: +2 -2
drivers/gpu/drm/drm_gem_dma_helper.c: +2 -2
drivers/gpu/drm/drm_gem_framebuffer_helper.c: +4 -8
drivers/gpu/drm/drm_gem_shmem_helper.c: +15 -15
drivers/gpu/drm/drm_gpusvm.c: +2250 -0
drivers/gpu/drm/drm_managed.c: +8 -0
drivers/gpu/drm/drm_mipi_dbi.c: +1 -1
drivers/gpu/drm/drm_mipi_dsi.c: +29 -25
drivers/gpu/drm/drm_of.c: +1 -1
drivers/gpu/drm/drm_panel.c: +4 -1
drivers/gpu/drm/drm_panel_orientation_quirks.c: +44 -2
drivers/gpu/drm/drm_panic.c: +1 -1
drivers/gpu/drm/drm_panic_qr.rs: +35 -73
drivers/gpu/drm/drm_prime.c: +1 -7
drivers/gpu/drm/drm_probe_helper.c: +18 -17
drivers/gpu/drm/drm_writeback.c: +158 -28
drivers/gpu/drm/etnaviv/etnaviv_sched.c: +11 -11
drivers/gpu/drm/exynos/exynos_hdmi.c: +1 -1
drivers/gpu/drm/fsl-dcu/fsl_dcu_drm_rgb.c: +1 -1
drivers/gpu/drm/gma500/cdv_device.c: +1 -1
drivers/gpu/drm/gma500/cdv_intel_crt.c: +1 -1
drivers/gpu/drm/gma500/cdv_intel_dp.c: +2 -3
drivers/gpu/drm/gma500/cdv_intel_hdmi.c: +1 -1
drivers/gpu/drm/gma500/cdv_intel_lvds.c: +1 -1
drivers/gpu/drm/gma500/oaktrail_hdmi.c: +1 -1
drivers/gpu/drm/gma500/psb_intel_drv.h: +1 -1
drivers/gpu/drm/gma500/psb_intel_lvds.c: +1 -1
drivers/gpu/drm/gma500/psb_intel_sdvo.c: +1 -1
drivers/gpu/drm/i2c/Kconfig: +0 -36
drivers/gpu/drm/i2c/Makefile: +0 -10
drivers/gpu/drm/i915/Makefile: +2 -0
drivers/gpu/drm/i915/display/dvo_ch7017.c: +1 -1
drivers/gpu/drm/i915/display/dvo_ch7xxx.c: +1 -1
drivers/gpu/drm/i915/display/dvo_ivch.c: +1 -1
drivers/gpu/drm/i915/display/dvo_ns2501.c: +2 -2
drivers/gpu/drm/i915/display/dvo_sil164.c: +1 -1
drivers/gpu/drm/i915/display/dvo_tfp410.c: +1 -1
drivers/gpu/drm/i915/display/g4x_dp.c: +54 -60
drivers/gpu/drm/i915/display/g4x_dp.h: +7 -7
drivers/gpu/drm/i915/display/g4x_hdmi.c: +84 -88
drivers/gpu/drm/i915/display/g4x_hdmi.h: +3 -3
drivers/gpu/drm/i915/display/hsw_ips.c: +12 -14
drivers/gpu/drm/i915/display/i9xx_plane.c: +220 -152
drivers/gpu/drm/i915/display/i9xx_plane.h: +7 -3
drivers/gpu/drm/i915/display/i9xx_wm.c: +7 -17
drivers/gpu/drm/i915/display/icl_dsi.c: +17 -23
drivers/gpu/drm/i915/display/intel_acpi.c: +2 -0
drivers/gpu/drm/i915/display/intel_atomic.h: +0 -1
drivers/gpu/drm/i915/display/intel_atomic_plane.c: +402 -42
drivers/gpu/drm/i915/display/intel_atomic_plane.h: +9 -0
drivers/gpu/drm/i915/display/intel_audio.c: +252 -248
drivers/gpu/drm/i915/display/intel_audio.h: +7 -7
drivers/gpu/drm/i915/display/intel_backlight.c: +261 -235
drivers/gpu/drm/i915/display/intel_bios.c: +2 -3
drivers/gpu/drm/i915/display/intel_bw.c: +56 -18
drivers/gpu/drm/i915/display/intel_bw.h: +4 -2
drivers/gpu/drm/i915/display/intel_cdclk.c: +104 -100
drivers/gpu/drm/i915/display/intel_cdclk.h: +3 -1
drivers/gpu/drm/i915/display/intel_cmtg.c: +189 -0
drivers/gpu/drm/i915/display/intel_cmtg.h: +13 -0
drivers/gpu/drm/i915/display/intel_cmtg_regs.h: +21 -0
drivers/gpu/drm/i915/display/intel_color.c: +8 -3
drivers/gpu/drm/i915/display/intel_combo_phy.c: +89 -91
drivers/gpu/drm/i915/display/intel_combo_phy.h: +4 -4
drivers/gpu/drm/i915/display/intel_combo_phy_regs.h: +2 -0
drivers/gpu/drm/i915/display/intel_connector.c: +44 -2
drivers/gpu/drm/i915/display/intel_connector.h: +2 -0
drivers/gpu/drm/i915/display/intel_crt.c: +21 -25
drivers/gpu/drm/i915/display/intel_crtc.c: +43 -35
drivers/gpu/drm/i915/display/intel_crtc.h: +3 -4
drivers/gpu/drm/i915/display/intel_crtc_state_dump.c: +19 -9
drivers/gpu/drm/i915/display/intel_cursor.c: +124 -88
drivers/gpu/drm/i915/display/intel_cursor.h: +2 -2
drivers/gpu/drm/i915/display/intel_cx0_phy.c: +193 -104
drivers/gpu/drm/i915/display/intel_cx0_phy.h: +1 -1
drivers/gpu/drm/i915/display/intel_cx0_phy_regs.h: +32 -1
drivers/gpu/drm/i915/display/intel_ddi.c: +246 -266
drivers/gpu/drm/i915/display/intel_ddi.h: +1 -3
drivers/gpu/drm/i915/display/intel_ddi_buf_trans.c: +33 -25
drivers/gpu/drm/i915/display/intel_ddi_buf_trans.h: +0 -1
drivers/gpu/drm/i915/display/intel_display.c: +878 -1385
drivers/gpu/drm/i915/display/intel_display.h: +21 -46
drivers/gpu/drm/i915/display/intel_display_core.h: +3 -1
drivers/gpu/drm/i915/display/intel_display_debugfs.c: +108 -183
drivers/gpu/drm/i915/display/intel_display_debugfs.h: +3 -3
drivers/gpu/drm/i915/display/intel_display_device.c: +13 -0
drivers/gpu/drm/i915/display/intel_display_device.h: +14 -0
drivers/gpu/drm/i915/display/intel_display_driver.c: +20 -18
drivers/gpu/drm/i915/display/intel_display_irq.c: +613 -176
drivers/gpu/drm/i915/display/intel_display_irq.h: +6 -2
drivers/gpu/drm/i915/display/intel_display_params.c: +1 -1
drivers/gpu/drm/i915/display/intel_display_power.c: +57 -77
drivers/gpu/drm/i915/display/intel_display_power.h: +39 -39
drivers/gpu/drm/i915/display/intel_display_power_map.c: +2 -0
drivers/gpu/drm/i915/display/intel_display_power_well.c: +10 -18
drivers/gpu/drm/i915/display/intel_display_power_well.h: +2 -2
drivers/gpu/drm/i915/display/intel_display_reset.c: +32 -43
drivers/gpu/drm/i915/display/intel_display_reset.h: +9 -3
drivers/gpu/drm/i915/display/intel_display_rps.c: +3 -1
drivers/gpu/drm/i915/display/intel_display_rps.h: +2 -2
drivers/gpu/drm/i915/display/intel_display_trace.h: +129 -21
drivers/gpu/drm/i915/display/intel_display_types.h: +49 -51
drivers/gpu/drm/i915/display/intel_dkl_phy.c: +31 -31
drivers/gpu/drm/i915/display/intel_dkl_phy.h: +6 -6
drivers/gpu/drm/i915/display/intel_dmc.c: +2 -5
drivers/gpu/drm/i915/display/intel_dmc_wl.c: +63 -15
drivers/gpu/drm/i915/display/intel_dp.c: +157 -213
drivers/gpu/drm/i915/display/intel_dp.h: +2 -3
drivers/gpu/drm/i915/display/intel_dp_aux.c: +2 -3
drivers/gpu/drm/i915/display/intel_dp_aux_backlight.c: +142 -41
drivers/gpu/drm/i915/display/intel_dp_hdcp.c: +4 -4
drivers/gpu/drm/i915/display/intel_dp_link_training.c: +9 -22
drivers/gpu/drm/i915/display/intel_dp_link_training.h: +1 -0
drivers/gpu/drm/i915/display/intel_dp_mst.c: +272 -242
drivers/gpu/drm/i915/display/intel_dp_mst.h: +1 -2
drivers/gpu/drm/i915/display/intel_dp_test.c: +4 -2
drivers/gpu/drm/i915/display/intel_dp_tunnel.c: +2 -1
drivers/gpu/drm/i915/display/intel_dp_tunnel.h: +3 -2
drivers/gpu/drm/i915/display/intel_dpio_phy.c: +35 -1
drivers/gpu/drm/i915/display/intel_dpio_phy.h: +6 -0
drivers/gpu/drm/i915/display/intel_dpll.c: +21 -20
drivers/gpu/drm/i915/display/intel_dpll.h: +3 -2
drivers/gpu/drm/i915/display/intel_dpll_mgr.c: +524 -520
drivers/gpu/drm/i915/display/intel_dpll_mgr.h: +14 -15
drivers/gpu/drm/i915/display/intel_dpt.c: +15 -14
drivers/gpu/drm/i915/display/intel_dpt.h: +3 -4
drivers/gpu/drm/i915/display/intel_drrs.c: +21 -24
drivers/gpu/drm/i915/display/intel_drrs.h: +5 -5
drivers/gpu/drm/i915/display/intel_dsb.c: +89 -37
drivers/gpu/drm/i915/display/intel_dsb.h: +3 -0
drivers/gpu/drm/i915/display/intel_dsi.c: +5 -5
drivers/gpu/drm/i915/display/intel_dsi.h: +1 -1
drivers/gpu/drm/i915/display/intel_dsi_vbt.c: +1 -1
drivers/gpu/drm/i915/display/intel_dvo.c: +5 -5
drivers/gpu/drm/i915/display/intel_dvo_dev.h: +2 -2
drivers/gpu/drm/i915/display/intel_fb.c: +278 -132
drivers/gpu/drm/i915/display/intel_fb.h: +23 -8
drivers/gpu/drm/i915/display/intel_fb_bo.c: +10 -8
drivers/gpu/drm/i915/display/intel_fb_bo.h: +4 -4
drivers/gpu/drm/i915/display/intel_fb_pin.c: +19 -14
drivers/gpu/drm/i915/display/intel_fb_pin.h: +3 -1
drivers/gpu/drm/i915/display/intel_fbc.c: +201 -69
drivers/gpu/drm/i915/display/intel_fbc.h: +7 -3
drivers/gpu/drm/i915/display/intel_fbc_regs.h: +9 -0
drivers/gpu/drm/i915/display/intel_fbdev.c: +85 -267
drivers/gpu/drm/i915/display/intel_fbdev.h: +14 -7
drivers/gpu/drm/i915/display/intel_fdi.c: +236 -247
drivers/gpu/drm/i915/display/intel_fdi.h: +12 -11
drivers/gpu/drm/i915/display/intel_fifo_underrun.c: +90 -93
drivers/gpu/drm/i915/display/intel_fifo_underrun.h: +9 -9
drivers/gpu/drm/i915/display/intel_frontbuffer.c: +7 -7
drivers/gpu/drm/i915/display/intel_gmbus.c: +4 -6
drivers/gpu/drm/i915/display/intel_hdcp.c: +226 -65
drivers/gpu/drm/i915/display/intel_hdcp.h: +5 -6
drivers/gpu/drm/i915/display/intel_hdmi.c: +8 -23
drivers/gpu/drm/i915/display/intel_hdmi.h: +9 -1
drivers/gpu/drm/i915/display/intel_hotplug.c: +23 -8
drivers/gpu/drm/i915/display/intel_hotplug.h: +2 -2
drivers/gpu/drm/i915/display/intel_hotplug_irq.c: +1 -1
drivers/gpu/drm/i915/display/intel_link_bw.c: +2 -1
drivers/gpu/drm/i915/display/intel_lpe_audio.c: +60 -58
drivers/gpu/drm/i915/display/intel_lpe_audio.h: +9 -9
drivers/gpu/drm/i915/display/intel_lspcon.c: +24 -6
drivers/gpu/drm/i915/display/intel_lspcon.h: +9 -16
drivers/gpu/drm/i915/display/intel_lvds.c: +13 -10
drivers/gpu/drm/i915/display/intel_modeset_setup.c: +25 -49
drivers/gpu/drm/i915/display/intel_modeset_verify.c: +2 -1
drivers/gpu/drm/i915/display/intel_overlay.c: +17 -11
drivers/gpu/drm/i915/display/intel_overlay.h: +0 -1
drivers/gpu/drm/i915/display/intel_panel.c: +1 -0
drivers/gpu/drm/i915/display/intel_pch_display.c: +44 -40
drivers/gpu/drm/i915/display/intel_pch_refclk.c: +17 -17
drivers/gpu/drm/i915/display/intel_pfit.c: +168 -2
drivers/gpu/drm/i915/display/intel_pfit.h: +8 -2
drivers/gpu/drm/i915/display/intel_pfit_regs.h: +79 -0
drivers/gpu/drm/i915/display/intel_pipe_crc.c: +3 -2
drivers/gpu/drm/i915/display/intel_pipe_crc.h: +0 -1
drivers/gpu/drm/i915/display/intel_plane_initial.c: +6 -1
drivers/gpu/drm/i915/display/intel_plane_initial.h: +2 -0
drivers/gpu/drm/i915/display/intel_pmdemand.c: +1 -1
drivers/gpu/drm/i915/display/intel_pps.c: +14 -20
drivers/gpu/drm/i915/display/intel_psr.c: +125 -105
drivers/gpu/drm/i915/display/intel_psr.h: +7 -3
drivers/gpu/drm/i915/display/intel_psr_regs.h: +10 -0
drivers/gpu/drm/i915/display/intel_quirks.c: +2 -0
drivers/gpu/drm/i915/display/intel_sdvo.c: +151 -151
drivers/gpu/drm/i915/display/intel_sdvo.h: +5 -5
drivers/gpu/drm/i915/display/intel_sdvo_regs.h: +1 -1
drivers/gpu/drm/i915/display/intel_snps_hdmi_pll.c: +364 -0
drivers/gpu/drm/i915/display/intel_snps_hdmi_pll.h: +17 -0
drivers/gpu/drm/i915/display/intel_snps_phy.c: +47 -67
drivers/gpu/drm/i915/display/intel_snps_phy.h: +3 -4
drivers/gpu/drm/i915/display/intel_sprite.c: +99 -79
drivers/gpu/drm/i915/display/intel_sprite.h: +3 -3
drivers/gpu/drm/i915/display/intel_tc.c: +48 -42
drivers/gpu/drm/i915/display/intel_tdf.h: +3 -3
drivers/gpu/drm/i915/display/intel_tv.c: +3 -5
drivers/gpu/drm/i915/display/intel_vblank.c: +62 -24
drivers/gpu/drm/i915/display/intel_vblank.h: +6 -0
drivers/gpu/drm/i915/display/intel_vdsc.c: +122 -127
drivers/gpu/drm/i915/display/intel_vga.c: +2 -3
drivers/gpu/drm/i915/display/intel_vrr.c: +140 -30
drivers/gpu/drm/i915/display/intel_vrr.h: +8 -1
drivers/gpu/drm/i915/display/intel_wm.c: +6 -0
drivers/gpu/drm/i915/display/intel_wm.h: +1 -0
drivers/gpu/drm/i915/display/skl_scaler.c: +233 -157
drivers/gpu/drm/i915/display/skl_scaler.h: +5 -2
drivers/gpu/drm/i915/display/skl_universal_plane.c: +458 -243
drivers/gpu/drm/i915/display/skl_universal_plane.h: +10 -4
drivers/gpu/drm/i915/display/skl_watermark.c: +149 -20
drivers/gpu/drm/i915/display/skl_watermark.h: +6 -1
drivers/gpu/drm/i915/display/vlv_dsi.c: +9 -9
drivers/gpu/drm/i915/display/vlv_dsi_pll.c: +7 -7
drivers/gpu/drm/i915/display/vlv_dsi_pll.h: +11 -5
drivers/gpu/drm/i915/gem/i915_gem_context.c: +3 -3
drivers/gpu/drm/i915/gem/i915_gem_context_types.h: +3 -3
drivers/gpu/drm/i915/gem/i915_gem_create.c: +1 -1
drivers/gpu/drm/i915/gem/i915_gem_domain.c: +4 -13
drivers/gpu/drm/i915/gem/i915_gem_execbuffer.c: +3 -3
drivers/gpu/drm/i915/gem/i915_gem_object.c: +26 -0
drivers/gpu/drm/i915/gem/i915_gem_object.h: +1 -1
drivers/gpu/drm/i915/gem/i915_gem_region.c: +1 -1
drivers/gpu/drm/i915/gem/i915_gem_shrinker.c: +2 -2
drivers/gpu/drm/i915/gem/i915_gem_tiling.c: +1 -1
drivers/gpu/drm/i915/gem/i915_gem_ttm.c: +1 -1
drivers/gpu/drm/i915/gem/i915_gem_ttm_move.c: +1 -1
drivers/gpu/drm/i915/gem/selftests/huge_pages.c: +1 -1
drivers/gpu/drm/i915/gem/selftests/i915_gem_mman.c: +1 -1
drivers/gpu/drm/i915/gem/selftests/mock_context.c: +0 -38
drivers/gpu/drm/i915/gem/selftests/mock_context.h: +0 -3
drivers/gpu/drm/i915/gem/selftests/mock_dmabuf.c: +1 -2
drivers/gpu/drm/i915/gt/gen2_engine_cs.c: +1 -1
drivers/gpu/drm/i915/gt/intel_engine_cs.c: +7 -8
drivers/gpu/drm/i915/gt/intel_engine_types.h: +2 -2
drivers/gpu/drm/i915/gt/intel_ggtt_fencing.c: +4 -3
drivers/gpu/drm/i915/gt/intel_gt.c: +38 -51
drivers/gpu/drm/i915/gt/intel_gt_clock_utils.c: +3 -7
drivers/gpu/drm/i915/gt/intel_gt_irq.c: +1 -1
drivers/gpu/drm/i915/gt/intel_gt_mcr.c: +3 -4
drivers/gpu/drm/i915/gt/intel_gt_pm.c: +5 -3
drivers/gpu/drm/i915/gt/intel_gt_regs.h: +65 -74
drivers/gpu/drm/i915/gt/intel_gt_sysfs_pm.c: +47 -0
drivers/gpu/drm/i915/gt/intel_migrate.c: +2 -2
drivers/gpu/drm/i915/gt/intel_mocs.c: +1 -1
drivers/gpu/drm/i915/gt/intel_reset.c: +39 -13
drivers/gpu/drm/i915/gt/intel_reset.h: +2 -0
drivers/gpu/drm/i915/gt/intel_reset_types.h: +1 -2
drivers/gpu/drm/i915/gt/intel_ring_submission.c: +1 -1
drivers/gpu/drm/i915/gt/intel_rps.c: +4 -0
drivers/gpu/drm/i915/gt/intel_rps_types.h: +2 -2
drivers/gpu/drm/i915/gt/intel_sa_media.c: +1 -1
drivers/gpu/drm/i915/gt/intel_sseu.c: +27 -31
drivers/gpu/drm/i915/gt/intel_workarounds.c: +14 -7
drivers/gpu/drm/i915/gt/selftest_execlists.c: +1 -1
drivers/gpu/drm/i915/gt/selftest_hangcheck.c: +1 -1
drivers/gpu/drm/i915/gt/selftest_lrc.c: +1 -1
drivers/gpu/drm/i915/gt/selftest_rc6.c: +1 -1
drivers/gpu/drm/i915/gt/selftest_rps.c: +8 -7
drivers/gpu/drm/i915/gt/selftest_slpc.c: +16 -1
drivers/gpu/drm/i915/gt/shaders/README: +3 -3
drivers/gpu/drm/i915/gt/shaders/clear_kernel/hsw.asm: +1 -1
drivers/gpu/drm/i915/gt/shaders/clear_kernel/ivb.asm: +1 -1
drivers/gpu/drm/i915/gt/shmem_utils.c: +4 -4
drivers/gpu/drm/i915/gt/uc/abi/guc_actions_slpc_abi.h: +5 -0
drivers/gpu/drm/i915/gt/uc/guc_capture_fwif.h: +2 -2
drivers/gpu/drm/i915/gt/uc/intel_guc.c: +1 -1
drivers/gpu/drm/i915/gt/uc/intel_guc.h: +1 -1
drivers/gpu/drm/i915/gt/uc/intel_guc_fw.c: +6 -5
drivers/gpu/drm/i915/gt/uc/intel_guc_fwif.h: +1 -1
drivers/gpu/drm/i915/gt/uc/intel_guc_hwconfig.c: +3 -0
drivers/gpu/drm/i915/gt/uc/intel_guc_slpc.c: +97 -7
drivers/gpu/drm/i915/gt/uc/intel_guc_slpc.h: +1 -0
drivers/gpu/drm/i915/gt/uc/intel_guc_slpc_types.h: +3 -0
drivers/gpu/drm/i915/gt/uc/intel_guc_submission.c: +4 -7
drivers/gpu/drm/i915/gt/uc/intel_huc.c: +7 -5
drivers/gpu/drm/i915/gt/uc/intel_uc.c: +1 -1
drivers/gpu/drm/i915/gt/uc/selftest_guc_hangcheck.c: +1 -1
drivers/gpu/drm/i915/gvt/cmd_parser.c: +8 -7
drivers/gpu/drm/i915/gvt/display.c: +1 -1
drivers/gpu/drm/i915/gvt/dmabuf.c: +1 -1
drivers/gpu/drm/i915/gvt/edid.c: +1 -1
drivers/gpu/drm/i915/gvt/fb_decoder.c: +0 -117
drivers/gpu/drm/i915/gvt/fb_decoder.h: +0 -2
drivers/gpu/drm/i915/gvt/gtt.c: +1 -67
drivers/gpu/drm/i915/gvt/gvt.h: +5 -9
drivers/gpu/drm/i915/gvt/handlers.c: +3 -20
drivers/gpu/drm/i915/gvt/kvmgt.c: +1 -1
drivers/gpu/drm/i915/gvt/mmio.h: +0 -3
drivers/gpu/drm/i915/gvt/mmio_context.c: +3 -3
drivers/gpu/drm/i915/gvt/scheduler.c: +6 -5
drivers/gpu/drm/i915/gvt/vgpu.c: +3 -3
drivers/gpu/drm/i915/i915_debugfs.c: +0 -3
drivers/gpu/drm/i915/i915_driver.c: +11 -12
drivers/gpu/drm/i915/i915_drv.h: +0 -1
drivers/gpu/drm/i915/i915_gem.c: +3 -3
drivers/gpu/drm/i915/i915_gpu_error.h: +0 -2
drivers/gpu/drm/i915/i915_gtt_view_types.h: +59 -0
drivers/gpu/drm/i915/i915_irq.c: +55 -14
drivers/gpu/drm/i915/i915_irq.h: +4 -0
drivers/gpu/drm/i915/i915_module.c: +1 -3
drivers/gpu/drm/i915/i915_perf.c: +12 -7
drivers/gpu/drm/i915/i915_pmu.c: +1 -119
drivers/gpu/drm/i915/i915_pmu.h: +1 -12
drivers/gpu/drm/i915/i915_reg.h: +60 -85
drivers/gpu/drm/i915/i915_reg_defs.h: +8 -0
drivers/gpu/drm/i915/i915_request.c: +1 -1
drivers/gpu/drm/i915/i915_request.h: +2 -2
drivers/gpu/drm/i915/i915_vma.c: +5 -5
drivers/gpu/drm/i915/i915_vma_types.h: +2 -50
drivers/gpu/drm/i915/intel_clock_gating.c: +1 -1
drivers/gpu/drm/i915/intel_gvt.c: +1 -1
drivers/gpu/drm/i915/intel_gvt_mmio_table.c: +2 -1
drivers/gpu/drm/i915/intel_runtime_pm.c: +1 -1
drivers/gpu/drm/i915/intel_runtime_pm.h: +1 -1
drivers/gpu/drm/i915/intel_uncore.c: +1 -1
drivers/gpu/drm/i915/pxp/intel_pxp.c: +3 -3
drivers/gpu/drm/i915/pxp/intel_pxp.h: +1 -3
drivers/gpu/drm/i915/pxp/intel_pxp_cmd_interface_43.h: +1 -1
drivers/gpu/drm/i915/pxp/intel_pxp_types.h: +1 -1
drivers/gpu/drm/i915/selftests/i915_gem.c: +5 -4
drivers/gpu/drm/i915/selftests/i915_gem_gtt.c: +13 -8
drivers/gpu/drm/i915/selftests/i915_vma.c: +10 -5
drivers/gpu/drm/i915/soc/intel_pch.c: +35 -9
drivers/gpu/drm/i915/soc/intel_pch.h: +6 -39
drivers/gpu/drm/imagination/pvr_job.c: +3 -9
drivers/gpu/drm/imagination/pvr_queue.c: +12 -6
drivers/gpu/drm/imx/ipuv3/imx-tve.c: +1 -1
drivers/gpu/drm/ingenic/ingenic-drm-drv.c: +2 -2
drivers/gpu/drm/lima/lima_sched.c: +10 -6
drivers/gpu/drm/loongson/lsdc_plane.c: +2 -1
drivers/gpu/drm/mediatek/mtk_crtc.c: +5 -2
drivers/gpu/drm/mediatek/mtk_disp_color.c: +1 -3
drivers/gpu/drm/mediatek/mtk_disp_gamma.c: +1 -3
drivers/gpu/drm/mediatek/mtk_disp_merge.c: +1 -3
drivers/gpu/drm/mediatek/mtk_disp_ovl.c: +1 -3
drivers/gpu/drm/mediatek/mtk_disp_rdma.c: +1 -3
drivers/gpu/drm/mediatek/mtk_dp.c: +6 -6
drivers/gpu/drm/mediatek/mtk_dpi.c: +241 -82
drivers/gpu/drm/mediatek/mtk_dpi_regs.h: +9 -0
drivers/gpu/drm/mediatek/mtk_drm_drv.c: +10 -0
drivers/gpu/drm/mediatek/mtk_dsi.c: +8 -10
drivers/gpu/drm/mediatek/mtk_hdmi.c: +52 -65
drivers/gpu/drm/mediatek/mtk_mdp_rdma.c: +1 -3
drivers/gpu/drm/mediatek/mtk_plane.c: +1 -1
drivers/gpu/drm/meson/meson_encoder_cvbs.c: +2 -3
drivers/gpu/drm/meson/meson_encoder_dsi.c: +2 -3
drivers/gpu/drm/meson/meson_encoder_hdmi.c: +2 -3
drivers/gpu/drm/mgag200/Makefile: +1 -0
drivers/gpu/drm/mgag200/mgag200_drv.c: +4 -0
drivers/gpu/drm/mgag200/mgag200_drv.h: +3 -0
drivers/gpu/drm/mgag200/mgag200_g200eh5.c: +204 -0
drivers/gpu/drm/msm/Kconfig: +2 -0
drivers/gpu/drm/msm/adreno/a6xx_catalog.c: +29 -0
drivers/gpu/drm/msm/adreno/a6xx_gmu.c: +39 -33
drivers/gpu/drm/msm/adreno/a6xx_gpu.c: +8 -0
drivers/gpu/drm/msm/adreno/a6xx_gpu_state.c: +12 -3
drivers/gpu/drm/msm/adreno/a6xx_gpu_state.h: +17 -0
drivers/gpu/drm/msm/adreno/adreno_gpu.c: +10 -0
drivers/gpu/drm/msm/adreno/adreno_gpu.h: +5 -0
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_10_0_sm8650.h: +3 -2
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_1_14_msm8937.h: +1 -0
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_1_15_msm8917.h: +1 -0
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_1_16_msm8953.h: +1 -0
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_1_7_msm8996.h: +1 -0
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_3_0_msm8998.h: +1 -0
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_3_2_sdm660.h: +1 -0
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_3_3_sdm630.h: +1 -0
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_4_0_sdm845.h: +1 -0
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_4_1_sdm670.h: +1 -0
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_5_0_sm8150.h: +3 -2
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_5_1_sc8180x.h: +3 -2
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_5_2_sm7150.h: +3 -2
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_5_3_sm6150.h: +19 -0
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_5_4_sm6125.h: +3 -2
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_6_0_sm8250.h: +1 -1
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_6_2_sc7180.h: +3 -2
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_6_4_sm6350.h: +3 -2
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_7_0_sm8350.h: +3 -2
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_7_2_sc7280.h: +1 -1
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_8_0_sc8280xp.h: +1 -0
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_8_1_sm8450.h: +3 -2
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_8_4_sa8775p.h: +1 -1
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_9_0_sm8550.h: +3 -2
drivers/gpu/drm/msm/disp/dpu1/catalog/dpu_9_2_x1e80100.h: +3 -2
drivers/gpu/drm/msm/disp/dpu1/dpu_core_perf.c: +63 -77
drivers/gpu/drm/msm/disp/dpu1/dpu_core_perf.h: +5 -5
drivers/gpu/drm/msm/disp/dpu1/dpu_crtc.c: +215 -18
drivers/gpu/drm/msm/disp/dpu1/dpu_crtc.h: +3 -0
drivers/gpu/drm/msm/disp/dpu1/dpu_encoder.c: +283 -185
drivers/gpu/drm/msm/disp/dpu1/dpu_encoder.h: +11 -1
drivers/gpu/drm/msm/disp/dpu1/dpu_encoder_phys.h: +6 -1
drivers/gpu/drm/msm/disp/dpu1/dpu_encoder_phys_cmd.c: +3 -2
drivers/gpu/drm/msm/disp/dpu1/dpu_encoder_phys_wb.c: +12 -4
drivers/gpu/drm/msm/disp/dpu1/dpu_hw_catalog.c: +8 -32
drivers/gpu/drm/msm/disp/dpu1/dpu_hw_cdm.c: +3 -1
drivers/gpu/drm/msm/disp/dpu1/dpu_hw_ctl.c: +29 -1
drivers/gpu/drm/msm/disp/dpu1/dpu_hw_ctl.h: +14 -1
drivers/gpu/drm/msm/disp/dpu1/dpu_hw_mdss.h: +2 -0
drivers/gpu/drm/msm/disp/dpu1/dpu_kms.c: +19 -2
drivers/gpu/drm/msm/disp/dpu1/dpu_kms.h: +7 -6
drivers/gpu/drm/msm/disp/dpu1/dpu_rm.c: +197 -101
drivers/gpu/drm/msm/disp/dpu1/dpu_rm.h: +8 -6
drivers/gpu/drm/msm/disp/mdp4/mdp4_lvds_connector.c: +1 -1
drivers/gpu/drm/msm/disp/mdp5/mdp5_ctl.c: +2 -1
drivers/gpu/drm/msm/disp/mdp5/mdp5_plane.c: +1 -1
drivers/gpu/drm/msm/dp/dp_ctrl.c: +13 -12
drivers/gpu/drm/msm/dp/dp_display.c: +31 -16
drivers/gpu/drm/msm/dp/dp_drm.c: +11 -13
drivers/gpu/drm/msm/dp/dp_drm.h: +3 -3
drivers/gpu/drm/msm/dsi/dsi_host.c: +95 -98
drivers/gpu/drm/msm/dsi/dsi_manager.c: +21 -11
drivers/gpu/drm/msm/dsi/phy/dsi_phy.h: +2 -3
drivers/gpu/drm/msm/dsi/phy/dsi_phy_10nm.c: +1 -0
drivers/gpu/drm/msm/dsi/phy/dsi_phy_14nm.c: +1 -0
drivers/gpu/drm/msm/dsi/phy/dsi_phy_28nm.c: +1 -0
drivers/gpu/drm/msm/dsi/phy/dsi_phy_28nm_8960.c: +1 -0
drivers/gpu/drm/msm/dsi/phy/dsi_phy_7nm.c: +11 -10
drivers/gpu/drm/msm/hdmi/hdmi.c: +2 -118
drivers/gpu/drm/msm/hdmi/hdmi.h: +9 -22
drivers/gpu/drm/msm/hdmi/hdmi_audio.c: +69 -55
drivers/gpu/drm/msm/hdmi/hdmi_bridge.c: +252 -72
drivers/gpu/drm/msm/msm_atomic.c: +14 -1
drivers/gpu/drm/msm/msm_drv.c: +1 -0
drivers/gpu/drm/msm/msm_dsc_helper.h: +0 -11
drivers/gpu/drm/msm/msm_gem_submit.c: +1 -1
drivers/gpu/drm/msm/msm_gpu.c: +9 -0
drivers/gpu/drm/msm/msm_gpu.h: +8 -0
drivers/gpu/drm/msm/msm_iommu.c: +51 -3
drivers/gpu/drm/msm/msm_kms.c: +18 -1
drivers/gpu/drm/msm/msm_kms.h: +10 -0
drivers/gpu/drm/msm/msm_mmu.h: +3 -1
drivers/gpu/drm/msm/msm_ringbuffer.c: +9 -8
drivers/gpu/drm/msm/registers/display/dsi_phy_7nm.xml: +1 -0
drivers/gpu/drm/msm/registers/display/hdmi.xml: +1 -1
drivers/gpu/drm/nouveau/Kconfig: +18 -0
drivers/gpu/drm/nouveau/dispnv04/Kbuild: +3 -0
drivers/gpu/drm/nouveau/dispnv04/dfp.c: +9 -8
drivers/gpu/drm/nouveau/dispnv04/i2c/Kbuild: +5 -0
drivers/gpu/drm/{ => nouveau/dispnv04}/i2c/ch7006_drv.c: +16 -16
drivers/gpu/drm/{ => nouveau/dispnv04}/i2c/ch7006_mode.c: +4 -4
drivers/gpu/drm/{ => nouveau/dispnv04}/i2c/ch7006_priv.h: +6 -5
drivers/gpu/drm/{ => nouveau/dispnv04}/i2c/sil164_drv.c: +18 -17
drivers/gpu/drm/{drm_encoder_slave.c => nouveau/dispnv04/nouveau_i2c_encoder.c}: +29 -66
drivers/gpu/drm/nouveau/dispnv04/tvnv04.c: +12 -12
drivers/gpu/drm/nouveau/dispnv04/tvnv17.c: +3 -3
drivers/gpu/drm/nouveau/dispnv50/disp.c: +1 -1
{include/drm => drivers/gpu/drm/nouveau/include/dispnv04}/i2c/ch7006.h: +2 -2
include/drm/drm_encoder_slave.h => drivers/gpu/drm/nouveau/include/dispnv04/i2c/encoder_i2c.h: +51 -72
{include/drm => drivers/gpu/drm/nouveau/include/dispnv04}/i2c/sil164.h: +2 -2
drivers/gpu/drm/nouveau/include/nvif/ioctl.h: +21 -11
drivers/gpu/drm/nouveau/include/nvkm/subdev/gsp.h: +4 -4
drivers/gpu/drm/nouveau/nouveau_connector.c: +7 -5
drivers/gpu/drm/nouveau/nouveau_dp.c: +2 -15
drivers/gpu/drm/nouveau/nouveau_drm.c: +1 -1
drivers/gpu/drm/nouveau/nouveau_encoder.h: +4 -9
drivers/gpu/drm/nouveau/nouveau_sched.c: +11 -5
drivers/gpu/drm/nouveau/nouveau_svm.c: +2 -2
drivers/gpu/drm/nouveau/nvif/object.c: +6 -6
drivers/gpu/drm/nouveau/nvkm/subdev/gsp/r535.c: +386 -153
drivers/gpu/drm/omapdrm/dss/dss.c: +4 -10
drivers/gpu/drm/omapdrm/dss/hdmi4.c: +2 -3
drivers/gpu/drm/omapdrm/dss/hdmi5.c: +2 -3
drivers/gpu/drm/omapdrm/dss/hdmi5_core.c: +0 -17
drivers/gpu/drm/omapdrm/dss/hdmi5_core.h: +0 -1
drivers/gpu/drm/panel/Kconfig: +31 -0
drivers/gpu/drm/panel/Makefile: +3 -0
drivers/gpu/drm/panel/panel-ebbg-ft8719.c: +16 -51
drivers/gpu/drm/panel/panel-edp.c: +23 -0
drivers/gpu/drm/panel/panel-himax-hx83102.c: +380 -0
drivers/gpu/drm/panel/panel-ilitek-ili9882t.c: +1 -1
drivers/gpu/drm/panel/panel-raydium-rm67200.c: +499 -0
drivers/gpu/drm/panel/panel-samsung-s6e88a0-ams452ef01.c: +31 -60
drivers/gpu/drm/panel/panel-sharp-ls060t1sx01.c: +16 -43
drivers/gpu/drm/panel/panel-simple.c: +64 -0
drivers/gpu/drm/panel/panel-sony-td4353-jdi.c: +23 -84
drivers/gpu/drm/panel/panel-summit.c: +132 -0
drivers/gpu/drm/panel/panel-visionox-r66451.c: +77 -104
drivers/gpu/drm/panel/panel-visionox-rm692e5.c: +442 -0
drivers/gpu/drm/panel/panel-xinpeng-xpp055c272.c: +80 -98
drivers/gpu/drm/panfrost/panfrost_job.c: +11 -9
drivers/gpu/drm/panthor/panthor_device.c: +12 -10
drivers/gpu/drm/panthor/panthor_drv.c: +14 -0
drivers/gpu/drm/panthor/panthor_fw.c: +4 -6
drivers/gpu/drm/panthor/panthor_fw.h: +3 -3
drivers/gpu/drm/panthor/panthor_gem.h: +0 -5
drivers/gpu/drm/panthor/panthor_heap.c: +39 -15
drivers/gpu/drm/panthor/panthor_heap.h: +2 -0
drivers/gpu/drm/panthor/panthor_mmu.c: +75 -39
drivers/gpu/drm/panthor/panthor_mmu.h: +3 -0
drivers/gpu/drm/panthor/panthor_sched.c: +86 -29
drivers/gpu/drm/panthor/panthor_sched.h: +3 -0
drivers/gpu/drm/qxl/qxl_display.c: +1 -1
drivers/gpu/drm/radeon/atombios_dp.c: +1 -1
drivers/gpu/drm/radeon/ci_dpm.c: +10 -24
drivers/gpu/drm/radeon/radeon_connectors.c: +5 -5
drivers/gpu/drm/radeon/radeon_device.c: +3 -3
drivers/gpu/drm/radeon/radeon_fence.c: +1 -1
drivers/gpu/drm/radeon/radeon_mode.h: +1 -1
drivers/gpu/drm/radeon/radeon_uvd.c: +1 -1
drivers/gpu/drm/radeon/si.c: +1 -1
drivers/gpu/drm/renesas/rcar-du/rcar_lvds.c: +2 -3
drivers/gpu/drm/renesas/rcar-du/rcar_mipi_dsi.c: +2 -2
drivers/gpu/drm/renesas/rz-du/rzg2l_mipi_dsi.c: +2 -3
drivers/gpu/drm/rockchip/analogix_dp-rockchip.c: +77 -37
drivers/gpu/drm/rockchip/cdn-dp-core.c: +1 -1
drivers/gpu/drm/rockchip/dw_hdmi-rockchip.c: +8 -8
drivers/gpu/drm/rockchip/dw_hdmi_qp-rockchip.c: +199 -51
drivers/gpu/drm/rockchip/inno_hdmi.c: +2 -2
drivers/gpu/drm/rockchip/rk3066_hdmi.c: +1 -1
drivers/gpu/drm/rockchip/rockchip_drm_drv.c: +4 -2
drivers/gpu/drm/rockchip/rockchip_drm_vop.c: +1 -1
drivers/gpu/drm/rockchip/rockchip_drm_vop2.c: +317 -1275
drivers/gpu/drm/rockchip/rockchip_drm_vop2.h: +274 -4
drivers/gpu/drm/rockchip/rockchip_lvds.c: +29 -51
drivers/gpu/drm/rockchip/rockchip_vop2_reg.c: +1784 -14
drivers/gpu/drm/scheduler/sched_entity.c: +6 -19
drivers/gpu/drm/scheduler/sched_fence.c: +2 -0
drivers/gpu/drm/scheduler/sched_internal.h: +91 -0
drivers/gpu/drm/scheduler/sched_main.c: +61 -70
drivers/gpu/drm/solomon/ssd130x-spi.c: +3 -4
drivers/gpu/drm/solomon/ssd130x.c: +4 -2
drivers/gpu/drm/sti/sti_dvo.c: +1 -1
drivers/gpu/drm/sti/sti_hda.c: +6 -6
drivers/gpu/drm/sti/sti_hdmi.c: +1 -1
drivers/gpu/drm/stm/ltdc.c: +1 -3
drivers/gpu/drm/stm/lvds.c: +2 -3
drivers/gpu/drm/tegra/dc.c: +2 -1
drivers/gpu/drm/tegra/dsi.c: +1 -1
drivers/gpu/drm/tegra/hdmi.c: +1 -1
drivers/gpu/drm/tegra/sor.c: +1 -1
drivers/gpu/drm/tests/Makefile: +1 -0
drivers/gpu/drm/tests/drm_atomic_state_test.c: +379 -0
drivers/gpu/drm/tests/drm_buddy_test.c: +20 -10
drivers/gpu/drm/tests/drm_format_helper_test.c: +81 -0
drivers/gpu/drm/tests/drm_hdmi_state_helper_test.c: +150 -104
drivers/gpu/drm/tests/drm_kunit_helpers.c: +0 -41
drivers/gpu/drm/tidss/tidss_dispc_regs.h: +1 -1
drivers/gpu/drm/tidss/tidss_plane.c: +1 -1
drivers/gpu/drm/tiny/Kconfig: +12 -0
drivers/gpu/drm/tiny/Makefile: +1 -0
drivers/gpu/drm/tiny/appletbdrm.c: +840 -0
drivers/gpu/drm/tiny/arcpgu.c: +1 -3
drivers/gpu/drm/tiny/repaper.c: +2 -2
drivers/gpu/drm/ttm/Makefile: +1 -1
drivers/gpu/drm/ttm/ttm_backup.c: +207 -0
drivers/gpu/drm/ttm/ttm_bo.c: +2 -1
drivers/gpu/drm/ttm/ttm_bo_util.c: +244 -6
drivers/gpu/drm/ttm/ttm_pool.c: +612 -106
drivers/gpu/drm/ttm/ttm_resource.c: +34 -16
drivers/gpu/drm/ttm/ttm_tt.c: +83 -0
drivers/gpu/drm/v3d/v3d_drv.c: +20 -5
drivers/gpu/drm/v3d/v3d_drv.h: +0 -1
drivers/gpu/drm/v3d/v3d_sched.c: +26 -41
drivers/gpu/drm/vboxvideo/hgsmi_base.c: +0 -37
drivers/gpu/drm/vboxvideo/vboxvideo_guest.h: +0 -2
drivers/gpu/drm/vc4/Kconfig: +1 -0
drivers/gpu/drm/vc4/tests/vc4_test_pv_muxing.c: +27 -19
drivers/gpu/drm/vc4/vc4_crtc.c: +15 -18
drivers/gpu/drm/vc4/vc4_drv.h: +0 -27
drivers/gpu/drm/vc4/vc4_dsi.c: +4 -5
drivers/gpu/drm/vc4/vc4_gem.c: +37 -146
drivers/gpu/drm/vc4/vc4_hdmi.c: +33 -78
drivers/gpu/drm/vc4/vc4_plane.c: +1 -1
drivers/gpu/drm/vc4/vc4_txp.c: +1 -1
drivers/gpu/drm/vc4/vc4_validate.c: +0 -11
drivers/gpu/drm/virtio/virtgpu_display.c: +1 -1
drivers/gpu/drm/virtio/virtgpu_drv.c: +40 -1
drivers/gpu/drm/virtio/virtgpu_drv.h: +11 -0
drivers/gpu/drm/virtio/virtgpu_gem.c: +14 -0
drivers/gpu/drm/virtio/virtgpu_plane.c: +96 -0
drivers/gpu/drm/virtio/virtgpu_prime.c: +19 -17
drivers/gpu/drm/virtio/virtgpu_vq.c: +154 -0
drivers/gpu/drm/virtio/virtgpu_vram.c: +6 -3
drivers/gpu/drm/vkms/vkms_crtc.c: +20 -15
drivers/gpu/drm/vkms/vkms_drv.c: +9 -15
drivers/gpu/drm/vkms/vkms_drv.h: +5 -6
drivers/gpu/drm/vkms/vkms_formats.c: +32 -0
drivers/gpu/drm/vkms/vkms_output.c: +32 -29
drivers/gpu/drm/vkms/vkms_plane.c: +1 -0
drivers/gpu/drm/vkms/vkms_writeback.c: +22 -15
drivers/gpu/drm/vmwgfx/vmwgfx_kms.c: +1 -1
drivers/gpu/drm/vmwgfx/vmwgfx_kms.h: +1 -1
drivers/gpu/drm/vmwgfx/vmwgfx_stdu.c: +1 -1
drivers/gpu/drm/xe/Kconfig: +24 -0
drivers/gpu/drm/xe/Kconfig.profile: +1 -0
drivers/gpu/drm/xe/Makefile: +22 -6
drivers/gpu/drm/xe/abi/gsc_pxp_commands_abi.h: +41 -0
drivers/gpu/drm/xe/abi/guc_actions_abi.h: +1 -0
drivers/gpu/drm/xe/abi/guc_actions_slpc_abi.h: +3 -0
drivers/gpu/drm/xe/compat-i915-headers/gem/i915_gem_object.h: +15 -0
drivers/gpu/drm/xe/compat-i915-headers/gem/i915_gem_stolen.h: +5 -0
drivers/gpu/drm/xe/compat-i915-headers/i915_drv.h: +0 -8
drivers/gpu/drm/xe/compat-i915-headers/i915_gtt_view_types.h: +7 -0
drivers/gpu/drm/xe/compat-i915-headers/i915_scheduler_types.h: +13 -0
drivers/gpu/drm/xe/compat-i915-headers/i915_vma.h: +3 -0
drivers/gpu/drm/xe/compat-i915-headers/i915_vma_types.h: +0 -74
drivers/gpu/drm/xe/compat-i915-headers/intel_uncore.h: +2 -0
drivers/gpu/drm/xe/compat-i915-headers/pxp/intel_pxp.h: +12 -5
drivers/gpu/drm/xe/display/ext/i915_irq.c: +23 -0
drivers/gpu/drm/xe/display/intel_bo.c: +1 -1
drivers/gpu/drm/xe/display/intel_fb_bo.c: +6 -5
drivers/gpu/drm/xe/display/intel_fbdev_fb.c: +2 -2
drivers/gpu/drm/xe/display/xe_display.c: +98 -101
drivers/gpu/drm/xe/display/xe_display.h: +2 -9
drivers/gpu/drm/xe/display/xe_display_rps.c: +1 -1
drivers/gpu/drm/xe/display/xe_fb_pin.c: +54 -14
drivers/gpu/drm/xe/display/xe_plane_initial.c: +19 -2
drivers/gpu/drm/xe/display/xe_tdf.c: +4 -2
drivers/gpu/drm/xe/instructions/xe_instr_defs.h: +1 -0
drivers/gpu/drm/xe/instructions/xe_mfx_commands.h: +28 -0
drivers/gpu/drm/xe/instructions/xe_mi_commands.h: +5 -0
drivers/gpu/drm/xe/regs/xe_engine_regs.h: +1 -0
drivers/gpu/drm/xe/regs/xe_eu_stall_regs.h: +29 -0
drivers/gpu/drm/xe/regs/xe_gt_regs.h: +12 -1
drivers/gpu/drm/xe/regs/xe_irq_regs.h: +8 -0
drivers/gpu/drm/xe/regs/xe_mchbar_regs.h: +3 -0
drivers/gpu/drm/xe/regs/xe_pcode_regs.h: +2 -0
drivers/gpu/drm/xe/regs/xe_pxp_regs.h: +23 -0
drivers/gpu/drm/xe/regs/xe_reg_defs.h: +13 -15
drivers/gpu/drm/xe/regs/xe_regs.h: +0 -4
drivers/gpu/drm/xe/tests/xe_bo.c: +5 -1
drivers/gpu/drm/xe/tests/xe_guc_buf_kunit.c: +334 -0
drivers/gpu/drm/xe/tests/xe_pci.c: +13 -13
drivers/gpu/drm/xe/tests/xe_rtp_test.c: +1 -1
drivers/gpu/drm/xe/xe_bo.c: +403 -28
drivers/gpu/drm/xe/xe_bo.h: +64 -0
drivers/gpu/drm/xe/xe_bo_types.h: +10 -0
drivers/gpu/drm/xe/xe_debugfs.c: +5 -1
drivers/gpu/drm/xe/xe_devcoredump.c: +4 -4
drivers/gpu/drm/xe/xe_device.c: +178 -69
drivers/gpu/drm/xe/xe_device.h: +5 -0
drivers/gpu/drm/xe/xe_device_sysfs.c: +0 -6
drivers/gpu/drm/xe/xe_device_types.h: +45 -21
drivers/gpu/drm/xe/xe_drm_client.c: +8 -0
drivers/gpu/drm/xe/xe_eu_stall.c: +960 -0
drivers/gpu/drm/xe/xe_eu_stall.h: +24 -0
drivers/gpu/drm/xe/xe_exec.c: +6 -0
drivers/gpu/drm/xe/xe_exec_queue.c: +68 -9
drivers/gpu/drm/xe/xe_exec_queue.h: +5 -0
drivers/gpu/drm/xe/xe_exec_queue_types.h: +10 -0
drivers/gpu/drm/xe/xe_execlist.c: +11 -6
drivers/gpu/drm/xe/xe_gen_wa_oob.c: +3 -3
drivers/gpu/drm/xe/xe_gpu_scheduler.c: +14 -3
drivers/gpu/drm/xe/xe_gsc.c: +0 -9
drivers/gpu/drm/xe/xe_gsc.h: +0 -1
drivers/gpu/drm/xe/xe_gsc_proxy.c: +29 -34
drivers/gpu/drm/xe/xe_gsc_proxy.h: +0 -1
drivers/gpu/drm/xe/xe_gsc_types.h: +1 -0
drivers/gpu/drm/xe/xe_gt.c: +38 -35
drivers/gpu/drm/xe/xe_gt.h: +0 -1
drivers/gpu/drm/xe/xe_gt_clock.c: +23 -34
drivers/gpu/drm/xe/xe_gt_debugfs.c: +11 -0
drivers/gpu/drm/xe/xe_gt_idle.c: +20 -3
drivers/gpu/drm/xe/xe_gt_idle.h: +1 -0
drivers/gpu/drm/xe/xe_gt_idle_types.h: +3 -0
drivers/gpu/drm/xe/xe_gt_mcr.c: +7 -1
drivers/gpu/drm/xe/xe_gt_pagefault.c: +21 -8
drivers/gpu/drm/xe/xe_gt_sriov_pf.c: +47 -2
drivers/gpu/drm/xe/xe_gt_sriov_pf_config.c: +113 -48
drivers/gpu/drm/xe/xe_gt_sriov_pf_config.h: +1 -0
drivers/gpu/drm/xe/xe_gt_sriov_pf_policy.c: +24 -26
drivers/gpu/drm/xe/xe_gt_sriov_pf_service.c: +22 -6
drivers/gpu/drm/xe/xe_gt_sriov_pf_types.h: +10 -0
drivers/gpu/drm/xe/xe_gt_sriov_vf.c: +27 -1
drivers/gpu/drm/xe/xe_gt_sriov_vf.h: +1 -0
drivers/gpu/drm/xe/xe_gt_stats.c: +5 -3
drivers/gpu/drm/xe/xe_gt_stats_types.h: +2 -0
drivers/gpu/drm/xe/xe_gt_tlb_invalidation.c: +22 -0
drivers/gpu/drm/xe/xe_gt_tlb_invalidation.h: +2 -0
drivers/gpu/drm/xe/xe_gt_topology.c: +13 -3
drivers/gpu/drm/xe/xe_gt_topology.h: +13 -0
drivers/gpu/drm/xe/xe_gt_types.h: +14 -1
drivers/gpu/drm/xe/xe_guc.c: +10 -8
drivers/gpu/drm/xe/xe_guc_ads.c: +1 -1
drivers/gpu/drm/xe/xe_guc_buf.c: +176 -0
drivers/gpu/drm/xe/xe_guc_buf.h: +47 -0
drivers/gpu/drm/xe/xe_guc_buf_types.h: +28 -0
drivers/gpu/drm/xe/xe_guc_debugfs.c: +28 -0
drivers/gpu/drm/xe/xe_guc_engine_activity.c: +373 -0
drivers/gpu/drm/xe/xe_guc_engine_activity.h: +19 -0
drivers/gpu/drm/xe/xe_guc_engine_activity_types.h: +92 -0
drivers/gpu/drm/xe/xe_guc_fwif.h: +19 -0
drivers/gpu/drm/xe/xe_guc_log.c: +2 -6
drivers/gpu/drm/xe/xe_guc_pc.c: +87 -10
drivers/gpu/drm/xe/xe_guc_pc.h: +2 -0
drivers/gpu/drm/xe/xe_guc_relay.c: +1 -1
drivers/gpu/drm/xe/xe_guc_submit.c: +8 -0
drivers/gpu/drm/xe/xe_guc_types.h: +7 -0
drivers/gpu/drm/xe/xe_heci_gsc.c: +17 -23
drivers/gpu/drm/xe/xe_heci_gsc.h: +1 -2
drivers/gpu/drm/xe/xe_hw_engine.c: +2 -4
drivers/gpu/drm/xe/xe_hw_engine_group.c: +1 -0
drivers/gpu/drm/xe/xe_hwmon.c: +76 -15
drivers/gpu/drm/xe/xe_hwmon.h: +2 -2
drivers/gpu/drm/xe/xe_irq.c: +19 -1
drivers/gpu/drm/xe/xe_lmtt.c: +2 -2
drivers/gpu/drm/xe/xe_lrc.c: +15 -3
drivers/gpu/drm/xe/xe_lrc.h: +5 -2
drivers/gpu/drm/xe/xe_migrate.c: +175 -0
drivers/gpu/drm/xe/xe_migrate.h: +10 -0
drivers/gpu/drm/xe/xe_mmio.c: +24 -53
drivers/gpu/drm/xe/xe_mmio.h: +3 -1
drivers/gpu/drm/xe/xe_mocs.c: +3 -1
drivers/gpu/drm/xe/xe_module.c: +7 -5
drivers/gpu/drm/xe/xe_module.h: +2 -0
drivers/gpu/drm/xe/xe_oa.c: +49 -60
drivers/gpu/drm/xe/xe_oa.h: +1 -3
drivers/gpu/drm/xe/xe_observation.c: +14 -0
drivers/gpu/drm/xe/xe_pci.c: +142 -158
drivers/gpu/drm/xe/xe_pci_sriov.c: +51 -0
drivers/gpu/drm/xe/xe_pci_types.h: +4 -16
drivers/gpu/drm/xe/xe_pcode_api.h: +14 -0
drivers/gpu/drm/xe/xe_pm.c: +31 -10
drivers/gpu/drm/xe/xe_pmu.c: +531 -0
drivers/gpu/drm/xe/xe_pmu.h: +18 -0
drivers/gpu/drm/xe/xe_pmu_types.h: +39 -0
drivers/gpu/drm/xe/xe_pt.c: +348 -51
drivers/gpu/drm/xe/xe_pt.h: +5 -0
drivers/gpu/drm/xe/xe_pt_types.h: +2 -0
drivers/gpu/drm/xe/xe_pxp.c: +919 -0
drivers/gpu/drm/xe/xe_pxp.h: +35 -0
drivers/gpu/drm/xe/xe_pxp_debugfs.c: +120 -0
drivers/gpu/drm/xe/xe_pxp_debugfs.h: +13 -0
drivers/gpu/drm/xe/xe_pxp_submit.c: +588 -0
drivers/gpu/drm/xe/xe_pxp_submit.h: +22 -0
drivers/gpu/drm/xe/xe_pxp_types.h: +135 -0
drivers/gpu/drm/xe/xe_query.c: +81 -1
drivers/gpu/drm/xe/xe_reg_whitelist.c: +2 -2
drivers/gpu/drm/xe/xe_res_cursor.h: +121 -2
drivers/gpu/drm/xe/xe_ring_ops.c: +17 -17
drivers/gpu/drm/xe/xe_rtp.c: +5 -1
drivers/gpu/drm/xe/xe_rtp.h: +1 -1
drivers/gpu/drm/xe/xe_sa.c: +34 -17
drivers/gpu/drm/xe/xe_sa.h: +24 -6
drivers/gpu/drm/xe/xe_sched_job_types.h: +2 -2
drivers/gpu/drm/xe/xe_shrinker.c: +258 -0
drivers/gpu/drm/xe/xe_shrinker.h: +18 -0
drivers/gpu/drm/xe/xe_sriov.c: +1 -1
drivers/gpu/drm/xe/xe_survivability_mode.c: +237 -0
drivers/gpu/drm/xe/xe_survivability_mode.h: +17 -0
drivers/gpu/drm/xe/xe_survivability_mode_types.h: +35 -0
drivers/gpu/drm/xe/xe_svm.c: +946 -0
drivers/gpu/drm/xe/xe_svm.h: +150 -0
drivers/gpu/drm/xe/xe_sync.c: +1 -0
drivers/gpu/drm/xe/xe_tile.c: +13 -10
drivers/gpu/drm/xe/xe_tile.h: +1 -0
drivers/gpu/drm/xe/xe_trace.h: +30 -0
drivers/gpu/drm/xe/xe_trace_bo.h: +15 -4
drivers/gpu/drm/xe/xe_trace_guc.h: +49 -0
drivers/gpu/drm/xe/xe_ttm_stolen_mgr.c: +9 -8
drivers/gpu/drm/xe/xe_ttm_stolen_mgr.h: +1 -1
drivers/gpu/drm/xe/xe_ttm_sys_mgr.c: +1 -2
drivers/gpu/drm/xe/xe_ttm_vram_mgr.c: +1 -2
drivers/gpu/drm/xe/xe_ttm_vram_mgr_types.h: +0 -4
drivers/gpu/drm/xe/xe_tuning.c: +68 -16
drivers/gpu/drm/xe/xe_tuning.h: +3 -0
drivers/gpu/drm/xe/xe_uc.c: +3 -13
drivers/gpu/drm/xe/xe_uc.h: +0 -1
drivers/gpu/drm/xe/xe_vm.c: +473 -67
drivers/gpu/drm/xe/xe_vm.h: +22 -1
drivers/gpu/drm/xe/xe_vm_doc.h: +1 -1
drivers/gpu/drm/xe/xe_vm_types.h: +58 -0
drivers/gpu/drm/xe/xe_wa.c: +29 -10
drivers/gpu/drm/xe/xe_wa_oob.rules: +11 -0
drivers/gpu/drm/xlnx/zynqmp_dp.c: +58 -107
drivers/gpu/drm/xlnx/zynqmp_dp_audio.c: +4 -0
drivers/gpu/drm/xlnx/zynqmp_dpsub.c: +2 -0
drivers/gpu/host1x/debug.c: +0 -9
drivers/gpu/host1x/debug.h: +0 -1
drivers/gpu/ipu-v3/ipu-common.c: +0 -38
drivers/gpu/ipu-v3/ipu-cpmem.c: +0 -23
drivers/gpu/ipu-v3/ipu-csi.c: +0 -108
drivers/gpu/ipu-v3/ipu-ic.c: +0 -73
drivers/gpu/ipu-v3/ipu-image-convert.c: +0 -48
drivers/gpu/ipu-v3/ipu-prv.h: +0 -2
drivers/gpu/ipu-v3/ipu-vdi.c: +0 -11
drivers/gpu/nova-core/Kconfig: +14 -0
drivers/gpu/nova-core/Makefile: +3 -0
drivers/gpu/nova-core/driver.rs: +47 -0
drivers/gpu/nova-core/firmware.rs: +45 -0
drivers/gpu/nova-core/gpu.rs: +199 -0
drivers/gpu/nova-core/nova_core.rs: +20 -0
drivers/gpu/nova-core/regs.rs: +55 -0
drivers/gpu/nova-core/util.rs: +21 -0
drivers/media/cec/i2c/Kconfig: +9 -0
drivers/media/cec/i2c/Makefile: +1 -0
drivers/{gpu/drm => media/cec}/i2c/tda9950.c: +0 -0
drivers/staging/fbtft/fbtft-core.c: +1 -3
drivers/video/Kconfig: +1 -0
include/Kbuild: +1 -0
include/drm/Makefile: +18 -0
include/drm/display/drm_dp.h: +16 -1
include/drm/display/drm_dp_dual_mode_helper.h: +1 -1
include/drm/display/drm_dp_helper.h: +3 -0
include/drm/display/drm_dp_mst_helper.h: +7 -0
include/drm/display/drm_hdmi_state_helper.h: +1 -1
include/drm/drm_atomic.h: +52 -2
include/drm/drm_atomic_helper.h: +2 -0
include/drm/drm_bridge.h: +4 -4
include/drm/drm_client.h: +8 -0
include/drm/drm_client_event.h: +2 -0
include/drm/drm_crtc.h: +1 -1
include/drm/drm_damage_helper.h: +1 -1
include/drm/drm_device.h: +8 -0
include/drm/drm_drv.h: +1 -0
include/drm/drm_fb_helper.h: +27 -17
include/drm/drm_file.h: +5 -0
include/drm/drm_format_helper.h: +6 -0
include/drm/drm_gem.h: +14 -0
include/drm/drm_gem_shmem_helper.h: +1 -1
include/drm/drm_gpusvm.h: +509 -0
include/drm/drm_gpuvm.h: +5 -0
include/drm/drm_kunit_helpers.h: +0 -2
include/drm/drm_managed.h: +12 -0
include/drm/drm_mipi_dsi.h: +1 -1
include/drm/drm_mode_object.h: +1 -1
include/drm/drm_modeset_helper_vtables.h: +8 -3
include/drm/drm_pagemap.h: +107 -0
include/drm/drm_panel.h: +0 -1
include/drm/drm_print.h: +23 -18
include/drm/drm_writeback.h: +6 -0
include/drm/gpu_scheduler.h: +84 -94
include/drm/i2c/tda998x.h: +0 -40
include/drm/intel/pciids.h: +11 -7
include/drm/ttm/ttm_backup.h: +74 -0
include/drm/ttm/ttm_bo.h: +93 -0
include/drm/ttm/ttm_pool.h: +8 -0
include/drm/ttm/ttm_resource.h: +6 -5
include/drm/ttm/ttm_tt.h: +67 -2
include/dt-bindings/clock/qcom,dsi-phy-28nm.h: +9 -0
include/linux/component.h: +3 -1
include/linux/migrate.h: +1 -0
include/sound/hdmi-codec.h: +1 -0
include/uapi/drm/amdgpu_drm.h: +10 -0
include/uapi/drm/drm_fourcc.h: +41 -0
include/uapi/drm/ivpu_accel.h: +84 -0
include/uapi/drm/panthor_drm.h: +44 -42
include/uapi/drm/xe_drm.h: +236 -4
include/uapi/linux/kfd_ioctl.h: +8 -2
include/uapi/linux/kfd_sysfs.h: +3 -0
include/video/imx-ipu-image-convert.h: +0 -32
include/video/imx-ipu-v3.h: +0 -14
mm/memory.c: +9 -4
mm/migrate_device.c: +83 -33
rust/kernel/firmware.rs: +216 -0
rust/macros/module.rs: +4 -0
sound/soc/codecs/hdmi-codec.c: +4 -0
