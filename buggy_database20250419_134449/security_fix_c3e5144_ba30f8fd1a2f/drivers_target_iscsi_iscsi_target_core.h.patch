commit c3e51442711d20ea1245bb6d260aa05593849e82
Author: Nicholas Bellinger <nab@linux-iscsi.org>
Date:   Wed Jun 19 18:48:51 2013 -0700

    iscsi-target: Add demo-mode TPG authentication context support
    
    This patch adds a auth configfs group context following existing
    explict NodeACL and discovery auth within:
    
      /sys/kernel/config/target/iscsi/$TARGETNAME/$TPGT/auth/
    
    This patch allows these attributes to be used for CHAP authentication
    an TPG is configured in demo-mode (generate_node_acl=1).
    
    Note this authentication information takes precedence over NodeACL
    authentication when struct se_node_acl->dynamic_node_acl is present.
    
    Cc: Dax Kelson <dkelson@gurulabs.com>
    Signed-off-by: Nicholas Bellinger <nab@linux-iscsi.org>

diff --git a/drivers/target/iscsi/iscsi_target_core.h b/drivers/target/iscsi/iscsi_target_core.h
index 3436a2cc1d35..391283c85313 100644
--- a/drivers/target/iscsi/iscsi_target_core.h
+++ b/drivers/target/iscsi/iscsi_target_core.h
@@ -813,6 +813,7 @@ struct iscsi_portal_group {
 	struct mutex		tpg_access_lock;
 	struct mutex		np_login_lock;
 	struct iscsi_tpg_attrib	tpg_attrib;
+	struct iscsi_node_auth	tpg_demo_auth;
 	/* Pointer to default list of iSCSI parameters for TPG */
 	struct iscsi_param_list	*param_list;
 	struct iscsi_tiqn	*tpg_tiqn;