Commit Hash: e818fac595ab94900f0046baba1f1a0e2d5c2435
Subject: MIPS: Generate relocation table when CONFIG_RELOCATABLE


Security Keywords:
- hardening

Full commit message:
MIPS: Generate relocation table when CONFIG_RELOCATABLE

When CONFIG_RELOCATABLE is enabled (added in later patch) add
--emit-relocs to vmlinux LDFLAGS so that fully linked vmlinux contains
relocation information.

Run the previously added relocs tool to fill in the .data.relocs section
of vmlinux with a table of relocations. The relocs tool will also remove
(mark as 0 length) the relocation sections added to vmlinux.

When vmlinux is passed to the boot makefile for conversion into a boot
image the now empty relocation sections will be removed and the
populated relocation table will be included in the binary image.

Signed-off-by: Matt Redfearn <matt.redfearn@imgtec.com>
Cc: linux-mips@linux-mips.org
Cc: kernel-hardening@lists.openwall.com
Cc: linux-kernel@vger.kernel.org
Patchwork: https://patchwork.linux-mips.org/patch/12983/
Signed-off-by: Ralf Baechle <ralf@linux-mips.org>

Metadata:
Author: Matt Redfearn <matt.redfearn@imgtec.com>
Author Date: Thu Mar 31 10:05:35 2016 +0100
Committer: Ralf Baechle <ralf@linux-mips.org>
Commit Date: Fri May 13 14:02:02 2016 +0200

Files Changed: 1
Lines Added: 16
Lines Removed: 0
Total Changes: 16
