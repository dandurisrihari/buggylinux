{
  "hash": "727dbda16b83600379061c4ca8270ef3e2f51922",
  "hash_short": "727dbda1",
  "subject": "Merge tag 'hardening-v6.6-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/kees/linux",
  "body": "Pull hardening updates from Kees Cook:\n \"As has become normal, changes are scattered around the tree (either\n  explicitly maintainer Acked or for trivial stuff that went ignored):\n\n   - Carve out the new CONFIG_LIST_HARDENED as a more focused subset of\n     CONFIG_DEBUG_LIST (Marco Elver)\n\n   - Fix kallsyms lookup failure under Clang LTO (Yonghong Song)\n\n   - Clarify documentation for CONFIG_UBSAN_TRAP (Jann Horn)\n\n   - Flexible array member conversion not carried in other tree (Gustavo\n     A. R. Silva)\n\n   - Various strlcpy() and strncpy() removals not carried in other trees\n     (Azeem Shaikh, Justin Stitt)\n\n   - Convert nsproxy.count to refcount_t (Elena Reshetova)\n\n   - Add handful of __counted_by annotations not carried in other trees,\n     as well as an LKDTM test\n\n   - Fix build failure with gcc-plugins on GCC 14+\n\n   - Fix selftests to respect SKIP for signal-delivery tests\n\n   - Fix CFI warning for paravirt callback prototype\n\n   - Clarify documentation for seq_show_option_n() usage\"\n\n* tag 'hardening-v6.6-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/kees/linux: (23 commits)\n  LoadPin: Annotate struct dm_verity_loadpin_trusted_root_digest with __counted_by\n  kallsyms: Change func signature for cleanup_symbol_name()\n  kallsyms: Fix kallsyms_selftest failure\n  nsproxy: Convert nsproxy.count to refcount_t\n  integrity: Annotate struct ima_rule_opt_list with __counted_by\n  lkdtm: Add FAM_BOUNDS test for __counted_by\n  Compiler Attributes: counted_by: Adjust name and identifier expansion\n  um: refactor deprecated strncpy to memcpy\n  um: vector: refactor deprecated strncpy\n  alpha: Replace one-element array with flexible-array member\n  hardening: Move BUG_ON_DATA_CORRUPTION to hardening options\n  list: Introduce CONFIG_LIST_HARDENED\n  list_debug: Introduce inline wrappers for debug checks\n  compiler_types: Introduce the Clang __preserve_most function attribute\n  gcc-plugins: Rename last_stmt() for GCC 14+\n  selftests/harness: Actually report SKIP for signal tests\n  x86/paravirt: Fix tlb_remove_table function callback prototype warning\n  EISA: Replace all non-returning strlcpy with strscpy\n  perf: Replace strlcpy with strscpy\n  um: Remove strlcpy declaration\n  ...",
  "full_message": "Merge tag 'hardening-v6.6-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/kees/linux\n\nPull hardening updates from Kees Cook:\n \"As has become normal, changes are scattered around the tree (either\n  explicitly maintainer Acked or for trivial stuff that went ignored):\n\n   - Carve out the new CONFIG_LIST_HARDENED as a more focused subset of\n     CONFIG_DEBUG_LIST (Marco Elver)\n\n   - Fix kallsyms lookup failure under Clang LTO (Yonghong Song)\n\n   - Clarify documentation for CONFIG_UBSAN_TRAP (Jann Horn)\n\n   - Flexible array member conversion not carried in other tree (Gustavo\n     A. R. Silva)\n\n   - Various strlcpy() and strncpy() removals not carried in other trees\n     (Azeem Shaikh, Justin Stitt)\n\n   - Convert nsproxy.count to refcount_t (Elena Reshetova)\n\n   - Add handful of __counted_by annotations not carried in other trees,\n     as well as an LKDTM test\n\n   - Fix build failure with gcc-plugins on GCC 14+\n\n   - Fix selftests to respect SKIP for signal-delivery tests\n\n   - Fix CFI warning for paravirt callback prototype\n\n   - Clarify documentation for seq_show_option_n() usage\"\n\n* tag 'hardening-v6.6-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/kees/linux: (23 commits)\n  LoadPin: Annotate struct dm_verity_loadpin_trusted_root_digest with __counted_by\n  kallsyms: Change func signature for cleanup_symbol_name()\n  kallsyms: Fix kallsyms_selftest failure\n  nsproxy: Convert nsproxy.count to refcount_t\n  integrity: Annotate struct ima_rule_opt_list with __counted_by\n  lkdtm: Add FAM_BOUNDS test for __counted_by\n  Compiler Attributes: counted_by: Adjust name and identifier expansion\n  um: refactor deprecated strncpy to memcpy\n  um: vector: refactor deprecated strncpy\n  alpha: Replace one-element array with flexible-array member\n  hardening: Move BUG_ON_DATA_CORRUPTION to hardening options\n  list: Introduce CONFIG_LIST_HARDENED\n  list_debug: Introduce inline wrappers for debug checks\n  compiler_types: Introduce the Clang __preserve_most function attribute\n  gcc-plugins: Rename last_stmt() for GCC 14+\n  selftests/harness: Actually report SKIP for signal tests\n  x86/paravirt: Fix tlb_remove_table function callback prototype warning\n  EISA: Replace all non-returning strlcpy with strscpy\n  perf: Replace strlcpy with strscpy\n  um: Remove strlcpy declaration\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Mon Aug 28 12:59:45 2023 -0700",
  "author_date_iso": "2023-08-28T12:59:45-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Mon Aug 28 12:59:45 2023 -0700",
  "committer_date_iso": "2023-08-28T12:59:45-07:00",
  "files_changed": [
    "lib/Kconfig.debug",
    "lib/Makefile"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "arch/alpha/kernel/osf_sys.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/Makefile",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/list_debug.c",
      "insertions": 5,
      "deletions": 3
    },
    {
      "file": "arch/um/drivers/mconsole_kern.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/um/drivers/vector_user.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/um/include/shared/user.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/um/os-Linux/umid.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "arch/x86/kernel/paravirt.c",
      "insertions": 6,
      "deletions": 2
    },
    {
      "file": "drivers/eisa/eisa-bus.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/misc/lkdtm/bugs.c",
      "insertions": 46,
      "deletions": 5
    },
    {
      "file": "drivers/soc/fsl/qe/qe.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "include/linux/compiler_attributes.h",
      "insertions": 13,
      "deletions": 13
    },
    {
      "file": "include/linux/compiler_types.h",
      "insertions": 28,
      "deletions": 0
    },
    {
      "file": "include/linux/dm-verity-loadpin.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "include/linux/list.h",
      "insertions": 85,
      "deletions": 4
    },
    {
      "file": "include/linux/nsproxy.h",
      "insertions": 3,
      "deletions": 4
    },
    {
      "file": "include/linux/seq_file.h",
      "insertions": 4,
      "deletions": 3
    },
    {
      "file": "include/uapi/linux/stddef.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "kernel/events/core.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "kernel/kallsyms.c",
      "insertions": 11,
      "deletions": 16
    },
    {
      "file": "kernel/kallsyms_selftest.c",
      "insertions": 1,
      "deletions": 22
    },
    {
      "file": "kernel/nsproxy.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "lib/Kconfig.debug",
      "insertions": 8,
      "deletions": 13
    },
    {
      "file": "lib/Kconfig.ubsan",
      "insertions": 9,
      "deletions": 1
    },
    {
      "file": "lib/Makefile",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "lib/list_debug.c",
      "insertions": 9,
      "deletions": 7
    },
    {
      "file": "scripts/gcc-plugins/gcc-common.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "security/Kconfig.hardening",
      "insertions": 23,
      "deletions": 0
    },
    {
      "file": "security/integrity/ima/ima_policy.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "security/loadpin/loadpin.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "tools/testing/selftests/kselftest_harness.h",
      "insertions": 5,
      "deletions": 6
    }
  ],
  "total_insertions": 286,
  "total_deletions": 123,
  "total_changes": 409,
  "parents": [
    "b03a4342142be0c608061a91fa52ec21f6853152",
    "5f536ac6a5a7b67351e4e5ae4f9e1e57d31268e6"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "lib/Kconfig.debug",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "lib/Makefile",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}