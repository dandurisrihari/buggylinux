{
  "hash": "107866a8eb0b664675a260f1ba0655010fac1e08",
  "hash_short": "107866a8",
  "subject": "xen-netback: take a reference to the RX task thread",
  "body": "Do this in order to prevent the task from being freed if the thread\nreturns (which can be triggered by the frontend) before the call to\nkthread_stop done as part of the backend tear down. Not taking the\nreference will lead to a use-after-free in that scenario. Such\nreference was taken before but dropped as part of the rework done in\n2ac061ce97f4.\n\nReintroduce the reference taking and add a comment this time\nexplaining why it's needed.\n\nThis is XSA-374 / CVE-2021-28691.\n\nFixes: 2ac061ce97f4 ('xen/netback: cleanup init and deinit code')\nSigned-off-by: Roger Pau Monn\u00e9 <roger.pau@citrix.com>\nCc: stable@vger.kernel.org\nReviewed-by: Jan Beulich <jbeulich@suse.com>\nReviewed-by: Juergen Gross <jgross@suse.com>\nSigned-off-by: Juergen Gross <jgross@suse.com>",
  "full_message": "xen-netback: take a reference to the RX task thread\n\nDo this in order to prevent the task from being freed if the thread\nreturns (which can be triggered by the frontend) before the call to\nkthread_stop done as part of the backend tear down. Not taking the\nreference will lead to a use-after-free in that scenario. Such\nreference was taken before but dropped as part of the rework done in\n2ac061ce97f4.\n\nReintroduce the reference taking and add a comment this time\nexplaining why it's needed.\n\nThis is XSA-374 / CVE-2021-28691.\n\nFixes: 2ac061ce97f4 ('xen/netback: cleanup init and deinit code')\nSigned-off-by: Roger Pau Monn\u00e9 <roger.pau@citrix.com>\nCc: stable@vger.kernel.org\nReviewed-by: Jan Beulich <jbeulich@suse.com>\nReviewed-by: Juergen Gross <jgross@suse.com>\nSigned-off-by: Juergen Gross <jgross@suse.com>",
  "author_name": "Roger Pau Monne",
  "author_email": "roger.pau@citrix.com",
  "author_date": "Mon Jun 7 15:13:15 2021 +0200",
  "author_date_iso": "2021-06-07T15:13:15+02:00",
  "committer_name": "Juergen Gross",
  "committer_email": "jgross@suse.com",
  "committer_date": "Mon Jun 7 15:13:15 2021 +0200",
  "committer_date_iso": "2021-06-07T15:13:15+02:00",
  "files_changed": [
    "drivers/net/xen-netback/interface.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/net/xen-netback/interface.c",
      "insertions": 6,
      "deletions": 0
    }
  ],
  "total_insertions": 6,
  "total_deletions": 0,
  "total_changes": 6,
  "parents": [
    "c81d3d24602540f65256f98831d0a25599ea6b87"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [
      "CVE-2021-28691"
    ],
    "security_keywords": []
  },
  "fix_type": "cve",
  "file_results": [
    {
      "file": "drivers/net/xen-netback/interface.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}