{
  "hash": "3e78f7712115e352a8af5db8d91f8febddf41595",
  "hash_short": "3e78f771",
  "subject": "drm/i915/guc: Annotate struct ct_incoming_msg with __counted_by",
  "body": "Prepare for the coming implementation by GCC and Clang of the __counted_by\nattribute. Flexible array members annotated with __counted_by can have\ntheir accesses bounds-checked at run-time via CONFIG_UBSAN_BOUNDS (for\narray indexing) and CONFIG_FORTIFY_SOURCE (for strcpy/memcpy-family\nfunctions).\n\nAs found with Coccinelle[1], add __counted_by for struct ct_incoming_msg.\n\nCc: Jani Nikula <jani.nikula@linux.intel.com>\nCc: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>\nCc: Rodrigo Vivi <rodrigo.vivi@intel.com>\nCc: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>\nCc: David Airlie <airlied@gmail.com>\nCc: Daniel Vetter <daniel@ffwll.ch>\nCc: \"Gustavo A. R. Silva\" <gustavoars@kernel.org>\nCc: John Harrison <John.C.Harrison@Intel.com>\nCc: Matthew Brost <matthew.brost@intel.com>\nCc: Michal Wajdeczko <michal.wajdeczko@intel.com>\nCc: Matt Roper <matthew.d.roper@intel.com>\nCc: intel-gfx@lists.freedesktop.org\nCc: dri-devel@lists.freedesktop.org\nCc: linux-hardening@vger.kernel.org\nLink: https://github.com/kees/kernel-tools/blob/trunk/coccinelle/examples/counted_by.cocci [1]\nSigned-off-by: Kees Cook <keescook@chromium.org>\nReviewed-by: Gustavo A. R. Silva <gustavoars@kernel.org>\nReviewed-by: Andi Shyti <andi.shyti@linux.intel.com>\nSigned-off-by: Andi Shyti <andi.shyti@linux.intel.com>\nLink: https://patchwork.freedesktop.org/patch/msgid/20231006201744.work.135-kees@kernel.org",
  "full_message": "drm/i915/guc: Annotate struct ct_incoming_msg with __counted_by\n\nPrepare for the coming implementation by GCC and Clang of the __counted_by\nattribute. Flexible array members annotated with __counted_by can have\ntheir accesses bounds-checked at run-time via CONFIG_UBSAN_BOUNDS (for\narray indexing) and CONFIG_FORTIFY_SOURCE (for strcpy/memcpy-family\nfunctions).\n\nAs found with Coccinelle[1], add __counted_by for struct ct_incoming_msg.\n\nCc: Jani Nikula <jani.nikula@linux.intel.com>\nCc: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>\nCc: Rodrigo Vivi <rodrigo.vivi@intel.com>\nCc: Tvrtko Ursulin <tvrtko.ursulin@linux.intel.com>\nCc: David Airlie <airlied@gmail.com>\nCc: Daniel Vetter <daniel@ffwll.ch>\nCc: \"Gustavo A. R. Silva\" <gustavoars@kernel.org>\nCc: John Harrison <John.C.Harrison@Intel.com>\nCc: Matthew Brost <matthew.brost@intel.com>\nCc: Michal Wajdeczko <michal.wajdeczko@intel.com>\nCc: Matt Roper <matthew.d.roper@intel.com>\nCc: intel-gfx@lists.freedesktop.org\nCc: dri-devel@lists.freedesktop.org\nCc: linux-hardening@vger.kernel.org\nLink: https://github.com/kees/kernel-tools/blob/trunk/coccinelle/examples/counted_by.cocci [1]\nSigned-off-by: Kees Cook <keescook@chromium.org>\nReviewed-by: Gustavo A. R. Silva <gustavoars@kernel.org>\nReviewed-by: Andi Shyti <andi.shyti@linux.intel.com>\nSigned-off-by: Andi Shyti <andi.shyti@linux.intel.com>\nLink: https://patchwork.freedesktop.org/patch/msgid/20231006201744.work.135-kees@kernel.org",
  "author_name": "Kees Cook",
  "author_email": "keescook@chromium.org",
  "author_date": "Fri Oct 6 13:17:45 2023 -0700",
  "author_date_iso": "2023-10-06T13:17:45-07:00",
  "committer_name": "Andi Shyti",
  "committer_email": "andi.shyti@linux.intel.com",
  "committer_date": "Mon Oct 9 13:59:18 2023 +0200",
  "committer_date_iso": "2023-10-09T13:59:18+02:00",
  "files_changed": [
    "drivers/gpu/drm/i915/gt/uc/intel_guc_ct.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_guc_ct.c",
      "insertions": 1,
      "deletions": 1
    }
  ],
  "total_insertions": 1,
  "total_deletions": 1,
  "total_changes": 2,
  "parents": [
    "1621a8edc226137e62e245eb5763d3ff91a9d02a"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_guc_ct.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}