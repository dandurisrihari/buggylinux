{
  "hash": "23c44f6c83257923b179461694edcf62749bedd5",
  "hash_short": "23c44f6c",
  "subject": "perf tools: Fix build-id event recording",
  "body": "The build-id events written at the end of the record session are broken\ndue to unexpected data.  The write_buildid() writes the fixed length\nevent first and then variable length filename.\n\nBut a recent change made it write more data in the padding area\naccidentally.  So readers of the event see zero-filled data for the\nnext entry and treat it incorrectly.  This resulted in wrong kernel\nsymbols because the kernel DSO loaded a random vmlinux image in the\npath as it didn't have a valid build-id.\n\nFixes: ae39ba16554e (\"perf inject: Fix build ID injection\")\nReported-by: Linus Torvalds <torvalds@linux-foundation.org>\nTested-by: Arnaldo Carvalho de Melo <acme@redhat.com>\nReviewed-by: Ian Rogers <irogers@google.com>\nLink: https://lore.kernel.org/r/Z0aRFFW9xMh3mqKB@google.com\nSigned-off-by: Namhyung Kim <namhyung@kernel.org>",
  "full_message": "perf tools: Fix build-id event recording\n\nThe build-id events written at the end of the record session are broken\ndue to unexpected data.  The write_buildid() writes the fixed length\nevent first and then variable length filename.\n\nBut a recent change made it write more data in the padding area\naccidentally.  So readers of the event see zero-filled data for the\nnext entry and treat it incorrectly.  This resulted in wrong kernel\nsymbols because the kernel DSO loaded a random vmlinux image in the\npath as it didn't have a valid build-id.\n\nFixes: ae39ba16554e (\"perf inject: Fix build ID injection\")\nReported-by: Linus Torvalds <torvalds@linux-foundation.org>\nTested-by: Arnaldo Carvalho de Melo <acme@redhat.com>\nReviewed-by: Ian Rogers <irogers@google.com>\nLink: https://lore.kernel.org/r/Z0aRFFW9xMh3mqKB@google.com\nSigned-off-by: Namhyung Kim <namhyung@kernel.org>",
  "author_name": "Namhyung Kim",
  "author_email": "namhyung@kernel.org",
  "author_date": "Tue Nov 26 19:13:31 2024 -0800",
  "author_date_iso": "2024-11-26T19:13:31-08:00",
  "committer_name": "Namhyung Kim",
  "committer_email": "namhyung@kernel.org",
  "committer_date": "Mon Dec 2 12:36:20 2024 -0800",
  "committer_date_iso": "2024-12-02T12:36:20-08:00",
  "files_changed": [
    "tools/perf/util/build-id.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "tools/perf/util/build-id.c",
      "insertions": 2,
      "deletions": 2
    }
  ],
  "total_insertions": 2,
  "total_deletions": 2,
  "total_changes": 4,
  "parents": [
    "40384c840ea1944d7c5a392e8975ed088ecf0b37"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "inject"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "tools/perf/util/build-id.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}