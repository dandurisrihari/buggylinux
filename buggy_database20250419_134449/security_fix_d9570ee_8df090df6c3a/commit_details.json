{
  "hash": "d9570ee3bd1d4f20ce63485f5ef05663866fe6c0",
  "hash_short": "d9570ee3",
  "subject": "kmemleak: allow to coexist with fault injection",
  "body": "kmemleak does one slab allocation per user allocation.  So if slab fault\ninjection is enabled to any degree, kmemleak instantly fails to allocate\nand turns itself off.  However, it's useful to use kmemleak with fault\ninjection to find leaks on error paths.  On the other hand, checking\nkmemleak itself is not so useful because (1) it's a debugging tool and\n(2) it has a very regular allocation pattern (basically a single\nallocation site, so it either works or not).\n\nTurn off fault injection for kmemleak allocations.\n\nLink: http://lkml.kernel.org/r/20180109192243.19316-1-dvyukov@google.com\nSigned-off-by: Dmitry Vyukov <dvyukov@google.com>\nCc: Catalin Marinas <catalin.marinas@arm.com>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\nSigned-off-by: Linus Torvalds <torvalds@linux-foundation.org>",
  "full_message": "kmemleak: allow to coexist with fault injection\n\nkmemleak does one slab allocation per user allocation.  So if slab fault\ninjection is enabled to any degree, kmemleak instantly fails to allocate\nand turns itself off.  However, it's useful to use kmemleak with fault\ninjection to find leaks on error paths.  On the other hand, checking\nkmemleak itself is not so useful because (1) it's a debugging tool and\n(2) it has a very regular allocation pattern (basically a single\nallocation site, so it either works or not).\n\nTurn off fault injection for kmemleak allocations.\n\nLink: http://lkml.kernel.org/r/20180109192243.19316-1-dvyukov@google.com\nSigned-off-by: Dmitry Vyukov <dvyukov@google.com>\nCc: Catalin Marinas <catalin.marinas@arm.com>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>\nSigned-off-by: Linus Torvalds <torvalds@linux-foundation.org>",
  "author_name": "Dmitry Vyukov",
  "author_email": "dvyukov@google.com",
  "author_date": "Fri Jan 12 16:53:10 2018 -0800",
  "author_date_iso": "2018-01-12T16:53:10-08:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Sat Jan 13 10:42:48 2018 -0800",
  "committer_date_iso": "2018-01-13T10:42:48-08:00",
  "files_changed": [
    "mm/kmemleak.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "mm/kmemleak.c",
      "insertions": 1,
      "deletions": 1
    }
  ],
  "total_insertions": 1,
  "total_deletions": 1,
  "total_changes": 2,
  "parents": [
    "bed6760cf2c40778a58f2e399c8947b3b3c55518"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.15",
    "v4.15-rc8",
    "v4.15-rc9",
    "v4.16",
    "v4.16-rc1",
    "v4.16-rc2",
    "v4.16-rc3",
    "v4.16-rc4",
    "v4.16-rc5",
    "v4.16-rc6"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "mm/kmemleak.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}