{
  "hash": "0542f17bf2c1f2430d368f44c8fcf2f82ec9e53e",
  "hash_short": "0542f17b",
  "subject": "userns: Document what the invariant required for safe unprivileged mappings.",
  "body": "The rule is simple.  Don't allow anything that wouldn't be allowed\nwithout unprivileged mappings.\n\nIt was previously overlooked that establishing gid mappings would\nallow dropping groups and potentially gaining permission to files and\ndirectories that had lesser permissions for a specific group than for\nall other users.\n\nThis is the rule needed to fix CVE-2014-8989 and prevent any other\nsecurity issues with new_idmap_permitted.\n\nThe reason for this rule is that the unix permission model is old and\nthere are programs out there somewhere that take advantage of every\nlittle corner of it.  So allowing a uid or gid mapping to be\nestablished without privielge that would allow anything that would not\nbe allowed without that mapping will result in expectations from some\ncode somewhere being violated.  Violated expectations about the\nbehavior of the OS is a long way to say a security issue.\n\nCc: stable@vger.kernel.org\nSigned-off-by: \"Eric W. Biederman\" <ebiederm@xmission.com>",
  "full_message": "userns: Document what the invariant required for safe unprivileged mappings.\n\nThe rule is simple.  Don't allow anything that wouldn't be allowed\nwithout unprivileged mappings.\n\nIt was previously overlooked that establishing gid mappings would\nallow dropping groups and potentially gaining permission to files and\ndirectories that had lesser permissions for a specific group than for\nall other users.\n\nThis is the rule needed to fix CVE-2014-8989 and prevent any other\nsecurity issues with new_idmap_permitted.\n\nThe reason for this rule is that the unix permission model is old and\nthere are programs out there somewhere that take advantage of every\nlittle corner of it.  So allowing a uid or gid mapping to be\nestablished without privielge that would allow anything that would not\nbe allowed without that mapping will result in expectations from some\ncode somewhere being violated.  Violated expectations about the\nbehavior of the OS is a long way to say a security issue.\n\nCc: stable@vger.kernel.org\nSigned-off-by: \"Eric W. Biederman\" <ebiederm@xmission.com>",
  "author_name": "Eric W. Biederman",
  "author_email": "ebiederm@xmission.com",
  "author_date": "Fri Dec 5 17:51:47 2014 -0600",
  "author_date_iso": "2014-12-05T17:51:47-06:00",
  "committer_name": "Eric W. Biederman",
  "committer_email": "ebiederm@xmission.com",
  "committer_date": "Fri Dec 5 19:07:26 2014 -0600",
  "committer_date_iso": "2014-12-05T19:07:26-06:00",
  "files_changed": [
    "kernel/user_namespace.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "kernel/user_namespace.c",
      "insertions": 3,
      "deletions": 1
    }
  ],
  "total_insertions": 3,
  "total_deletions": 1,
  "total_changes": 4,
  "parents": [
    "7ff4d90b4c24a03666f296c3d4878cd39001e81e"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v3.19",
    "v3.19-rc1",
    "v3.19-rc2",
    "v3.19-rc3",
    "v3.19-rc4",
    "v3.19-rc5",
    "v3.19-rc6",
    "v3.19-rc7",
    "v4.0",
    "v4.0-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [
      "CVE-2014-8989"
    ],
    "security_keywords": [
      "security issue"
    ]
  },
  "fix_type": "cve",
  "file_results": [
    {
      "file": "kernel/user_namespace.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}