commit 2044513ffe4a9c18e6e2a64f048e05d8b62fa927
Merge: bbcf9cd15767 bdcd93ef9afb
Author: Linus Torvalds <torvalds@linux-foundation.org>
Date:   Thu Aug 6 10:15:28 2020 -0700

    Merge tag 'csky-for-linus-5.9-rc1' of https://github.com/c-sky/csky-linux
    
    Pull arch/csky updates from Guo Ren:
     "New features:
       - seccomp-filter
       - err-injection
       - top-down&random mmap-layout
       - irq_work
       - show_ipi
       - context-tracking
    
      Fixes & Optimizations:
       - kprobe_on_ftrace
       - optimize panic print"
    
    * tag 'csky-for-linus-5.9-rc1' of https://github.com/c-sky/csky-linux:
      csky: Add context tracking support
      csky: Add arch_show_interrupts for IPI interrupts
      csky: Add irq_work support
      csky: Fixup warning by EXPORT_SYMBOL(kmap)
      csky: Set CONFIG_NR_CPU 4 as default
      csky: Use top-down mmap layout
      csky: Optimize the trap processing flow
      csky: Add support for function error injection
      csky: Fixup kprobes handler couldn't change pc
      csky: Fixup duplicated restore sp in RESTORE_REGS_FTRACE
      csky: Add cpu feature register hint for smp
      csky: Add SECCOMP_FILTER supported
      csky: remove unusued thread_saved_pc and *_segments functions/macros

diff --cc arch/csky/kernel/process.c
index 28cfeaaf902a,3da63cf0bfde..f730869e21ee
--- a/arch/csky/kernel/process.c
+++ b/arch/csky/kernel/process.c
@@@ -30,17 -30,7 +30,7 @@@ asmlinkage void ret_from_kernel_thread(
   */
  void flush_thread(void){}
  
- /*
-  * Return saved PC from a blocked thread
-  */
- unsigned long thread_saved_pc(struct task_struct *tsk)
- {
- 	struct switch_stack *sw = (struct switch_stack *)tsk->thread.sp;
- 
- 	return sw->r15;
- }
- 
 -int copy_thread_tls(unsigned long clone_flags,
 +int copy_thread(unsigned long clone_flags,
  		unsigned long usp,
  		unsigned long kthread_arg,
  		struct task_struct *p,