Commit Hash: 77a1326f64c3245ae9d2f9297abec5c8a0f11f58
Subject: tracing: Replace multiple deprecated strncpy with memcpy


Security Keywords:
- hardening

Full commit message:
tracing: Replace multiple deprecated strncpy with memcpy

strncpy() is deprecated for use on NUL-terminated destination strings [1] and
as such we should prefer more robust and less ambiguous string interfaces.

String copy operations involving manual pointer offset and length
calculations followed by explicit NUL-byte assignments are best changed
to either strscpy or memcpy.

strscpy is not a drop-in replacement as @len would need a one subtracted
from it to avoid truncating the source string.

To not sabotage readability of the current code, use memcpy (retaining
the manual NUL assignment) as this unambiguously describes the desired
behavior.

Link: https://www.kernel.org/doc/html/latest/process/deprecated.html#strncpy-on-nul-terminated-strings [1]
Link: https://github.com/KSPP/linux/issues/90 [2]

Cc: Masami Hiramatsu <mhiramat@kernel.org>
Cc: Mathieu Desnoyers <mathieu.desnoyers@efficios.com>
Cc: linux-hardening@vger.kernel.org
Link: https://lore.kernel.org/20241014-strncpy-kernel-trace-trace_events_filter-c-v2-1-d821e81e371e@google.com
Reviewed-by: Kees Cook <kees@kernel.org>
Signed-off-by: Justin Stitt <justinstitt@google.com>
Signed-off-by: Steven Rostedt (Google) <rostedt@goodmis.org>

Metadata:
Author: Justin Stitt <justinstitt@google.com>
Author Date: Mon Oct 14 14:13:14 2024 -0700
Committer: Steven Rostedt (Google) <rostedt@goodmis.org>
Commit Date: Wed Oct 30 19:41:08 2024 -0400

Files Changed: 1
Lines Added: 4
Lines Removed: 4
Total Changes: 8
