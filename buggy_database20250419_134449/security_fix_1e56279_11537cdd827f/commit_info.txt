Commit Hash: 1e56279a49168f24b2b58e843ae92976f90a98a6
Subject: x86/mce/inject: Set the valid bit in MCA_STATUS before error injection


Security Keywords:
- inject

Full commit message:
x86/mce/inject: Set the valid bit in MCA_STATUS before error injection

MCA handlers check the valid bit in each status register
(MCA_STATUS[Val]) and continue processing the error only if the valid
bit is set.

Set the valid bit unconditionally in the corresponding MCA_STATUS
register and correct any Val=0 injections made by the user as such
errors will get ignored and such injections will be largely pointless.

Signed-off-by: Smita Koralahalli <Smita.KoralahalliChannabasappa@amd.com>
Signed-off-by: Borislav Petkov <bp@suse.de>
Link: https://lore.kernel.org/r/20211104215846.254012-3-Smita.KoralahalliChannabasappa@amd.com

Metadata:
Author: Smita Koralahalli <Smita.KoralahalliChannabasappa@amd.com>
Author Date: Thu Nov 4 16:58:42 2021 -0500
Committer: Borislav Petkov <bp@suse.de>
Commit Date: Wed Dec 8 12:01:01 2021 +0100

Files Changed: 1
Lines Added: 2
Lines Removed: 0
Total Changes: 2
