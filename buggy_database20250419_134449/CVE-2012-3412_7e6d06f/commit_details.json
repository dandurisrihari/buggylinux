{
  "hash": "7e6d06f0de3f74ca929441add094518ae332257c",
  "hash_short": "7e6d06f0",
  "subject": "sfc: Fix maximum number of TSO segments and minimum TX queue size",
  "body": "Currently an skb requiring TSO may not fit within a minimum-size TX\nqueue.  The TX queue selected for the skb may stall and trigger the TX\nwatchdog repeatedly (since the problem skb will be retried after the\nTX reset).  This issue is designated as CVE-2012-3412.\n\nSet the maximum number of TSO segments for our devices to 100.  This\nshould make no difference to behaviour unless the actual MSS is less\nthan about 700.  Increase the minimum TX queue size accordingly to\nallow for 2 worst-case skbs, so that there will definitely be space\nto add an skb after we wake a queue.\n\nTo avoid invalidating existing configurations, change\nefx_ethtool_set_ringparam() to fix up values that are too small rather\nthan returning -EINVAL.\n\nSigned-off-by: Ben Hutchings <bhutchings@solarflare.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "full_message": "sfc: Fix maximum number of TSO segments and minimum TX queue size\n\nCurrently an skb requiring TSO may not fit within a minimum-size TX\nqueue.  The TX queue selected for the skb may stall and trigger the TX\nwatchdog repeatedly (since the problem skb will be retried after the\nTX reset).  This issue is designated as CVE-2012-3412.\n\nSet the maximum number of TSO segments for our devices to 100.  This\nshould make no difference to behaviour unless the actual MSS is less\nthan about 700.  Increase the minimum TX queue size accordingly to\nallow for 2 worst-case skbs, so that there will definitely be space\nto add an skb after we wake a queue.\n\nTo avoid invalidating existing configurations, change\nefx_ethtool_set_ringparam() to fix up values that are too small rather\nthan returning -EINVAL.\n\nSigned-off-by: Ben Hutchings <bhutchings@solarflare.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "author_name": "Ben Hutchings",
  "author_email": "bhutchings@solarflare.com",
  "author_date": "Mon Jul 30 15:57:44 2012 +0000",
  "author_date_iso": "2012-07-30T15:57:44+00:00",
  "committer_name": "David S. Miller",
  "committer_email": "davem@davemloft.net",
  "committer_date": "Thu Aug 2 00:19:17 2012 -0700",
  "committer_date_iso": "2012-08-02T00:19:17-07:00",
  "files_changed": [
    "drivers/net/ethernet/sfc/efx.c",
    "drivers/net/ethernet/sfc/efx.h",
    "drivers/net/ethernet/sfc/ethtool.c",
    "drivers/net/ethernet/sfc/tx.c"
  ],
  "files_changed_count": 4,
  "stats": [
    {
      "file": "drivers/net/ethernet/sfc/efx.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "drivers/net/ethernet/sfc/efx.h",
      "insertions": 10,
      "deletions": 4
    },
    {
      "file": "drivers/net/ethernet/sfc/ethtool.c",
      "insertions": 11,
      "deletions": 5
    },
    {
      "file": "drivers/net/ethernet/sfc/tx.c",
      "insertions": 19,
      "deletions": 0
    }
  ],
  "total_insertions": 46,
  "total_deletions": 9,
  "total_changes": 55,
  "parents": [
    "30b678d844af3305cda5953467005cebb5d7b687"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v3.10",
    "v3.10-rc1",
    "v3.10-rc2",
    "v3.10-rc3",
    "v3.10-rc4",
    "v3.10-rc5",
    "v3.10-rc6",
    "v3.10-rc7",
    "v3.11",
    "v3.11-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [
      "CVE-2012-3412"
    ],
    "security_keywords": []
  },
  "fix_type": "cve",
  "file_results": [
    {
      "file": "drivers/net/ethernet/sfc/efx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/ethernet/sfc/efx.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/ethernet/sfc/ethtool.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/ethernet/sfc/tx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}