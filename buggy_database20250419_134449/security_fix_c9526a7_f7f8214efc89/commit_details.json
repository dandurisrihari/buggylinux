{
  "hash": "c9526a735082bba57da322332cbcef1bbdff5698",
  "hash_short": "c9526a73",
  "subject": "perf tests: Skip pipe test if noploop symbol is missing",
  "body": "perf pipe recording and injection test depends on finding symbol noploop in\nperf, and fails if perf has been stripped and no debug object is available.\nIn that case, skip the test instead.\n\nExample:\n\n Before:\n\n  $ strip tools/perf/perf\n  $ tools/perf/perf buildid-cache -p `realpath tools/perf/perf`\n  $ tools/perf/perf test -v pipe\n   86: perf pipe recording and injection test                          :\n  --- start ---\n  test child forked, pid 47734\n  [ perf record: Woken up 1 times to write data ]\n  [ perf record: Captured and wrote 0.000 MB - ]\n       47741    47741       -1 |perf\n  [ perf record: Woken up 1 times to write data ]\n  [ perf record: Captured and wrote 0.000 MB - ]\n  cannot find noploop function in pipe #1\n  test child finished with -1\n  ---- end ----\n  perf pipe recording and injection test: FAILED!\n\nAfter:\n\n  $ tools/perf/perf test -v pipe\n   86: perf pipe recording and injection test                          :\n  --- start ---\n  test child forked, pid 48996\n  perf does not have symbol 'noploop'\n  perf is missing symbols - skipping test\n  test child finished with -2\n  ---- end ----\n  perf pipe recording and injection test: Skip\n\nSigned-off-by: Adrian Hunter <adrian.hunter@intel.com>\nAcked-by: Ian Rogers <irogers@google.com>\nCc: German Gomez <german.gomez@arm.com>\nCc: James Clark <james.clark@arm.com>\nCc: Jiri Olsa <jolsa@kernel.org>\nCc: Leo Yan <leo.yan@linaro.org>\nCc: Namhyung Kim <namhyung@kernel.org>\nLink: https://lore.kernel.org/r/20231123075848.9652-4-adrian.hunter@intel.com\nSigned-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>",
  "full_message": "perf tests: Skip pipe test if noploop symbol is missing\n\nperf pipe recording and injection test depends on finding symbol noploop in\nperf, and fails if perf has been stripped and no debug object is available.\nIn that case, skip the test instead.\n\nExample:\n\n Before:\n\n  $ strip tools/perf/perf\n  $ tools/perf/perf buildid-cache -p `realpath tools/perf/perf`\n  $ tools/perf/perf test -v pipe\n   86: perf pipe recording and injection test                          :\n  --- start ---\n  test child forked, pid 47734\n  [ perf record: Woken up 1 times to write data ]\n  [ perf record: Captured and wrote 0.000 MB - ]\n       47741    47741       -1 |perf\n  [ perf record: Woken up 1 times to write data ]\n  [ perf record: Captured and wrote 0.000 MB - ]\n  cannot find noploop function in pipe #1\n  test child finished with -1\n  ---- end ----\n  perf pipe recording and injection test: FAILED!\n\nAfter:\n\n  $ tools/perf/perf test -v pipe\n   86: perf pipe recording and injection test                          :\n  --- start ---\n  test child forked, pid 48996\n  perf does not have symbol 'noploop'\n  perf is missing symbols - skipping test\n  test child finished with -2\n  ---- end ----\n  perf pipe recording and injection test: Skip\n\nSigned-off-by: Adrian Hunter <adrian.hunter@intel.com>\nAcked-by: Ian Rogers <irogers@google.com>\nCc: German Gomez <german.gomez@arm.com>\nCc: James Clark <james.clark@arm.com>\nCc: Jiri Olsa <jolsa@kernel.org>\nCc: Leo Yan <leo.yan@linaro.org>\nCc: Namhyung Kim <namhyung@kernel.org>\nLink: https://lore.kernel.org/r/20231123075848.9652-4-adrian.hunter@intel.com\nSigned-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>",
  "author_name": "Adrian Hunter",
  "author_email": "adrian.hunter@intel.com",
  "author_date": "Thu Nov 23 09:58:43 2023 +0200",
  "author_date_iso": "2023-11-23T09:58:43+02:00",
  "committer_name": "Arnaldo Carvalho de Melo",
  "committer_email": "acme@redhat.com",
  "committer_date": "Mon Nov 27 15:40:00 2023 -0300",
  "committer_date_iso": "2023-11-27T15:40:00-03:00",
  "files_changed": [
    "tools/perf/tests/shell/pipe_test.sh"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "tools/perf/tests/shell/pipe_test.sh",
      "insertions": 8,
      "deletions": 1
    }
  ],
  "total_insertions": 8,
  "total_deletions": 1,
  "total_changes": 9,
  "parents": [
    "96ba5999e8d86138cea90422f8c00309a7eedd3b"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "tools/perf/tests/shell/pipe_test.sh",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}