Commit Hash: 9eeb52ae712e72141c4c1d173048a606ba8f42f6
Subject: fault-inject: fix wrong should_fail() decision in task context


Security Keywords:
- inject

Full commit message:
fault-inject: fix wrong should_fail() decision in task context

Commit 1203c8e6fb0a ("fault-inject: simplify access check for fail-nth")
unintentionally broke a conditional statement in should_fail().  Any
faults are not injected in the task context by the change when the
systematic fault injection is not used.

This change restores to the previous correct behaviour.

Link: http://lkml.kernel.org/r/1501633700-3488-1-git-send-email-akinobu.mita@gmail.com
Fixes: 1203c8e6fb0a ("fault-inject: simplify access check for fail-nth")
Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com>
Reported-by: Lu Fengqi <lufq.fnst@cn.fujitsu.com>
Tested-by: Lu Fengqi <lufq.fnst@cn.fujitsu.com>
Cc: Dmitry Vyukov <dvyukov@google.com>
Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

Metadata:
Author: Akinobu Mita <akinobu.mita@gmail.com>
Author Date: Thu Aug 10 15:23:53 2017 -0700
Committer: Linus Torvalds <torvalds@linux-foundation.org>
Commit Date: Thu Aug 10 15:54:06 2017 -0700

Files Changed: 1
Lines Added: 5
Lines Removed: 3
Total Changes: 8
