{
  "hash": "32d2a8935bf8faf201ff1a859eeb43ef6e5e438d",
  "hash_short": "32d2a893",
  "subject": "soundwire: cadence: add parity error injection through debugfs",
  "body": "The Cadence IP can inject errors, let's make use of this capability to\ntest Slave parity error checks.\n\nSee e.g. example log where both the master and slave detect the parity\nerror injected on a dummy read command.\n\ncd /sys/kernel/debug/soundwire/master-1/intel-sdw/\necho 1 > cdns-parity-error-injection\n\n[   44.756249] intel-master sdw-master-1: Parity error\n[   44.756313] intel-master sdw-master-1: Msg NACK received\n[   44.756366] intel-master sdw-master-1: Msg NACKed for Slave 15\n[   44.756375] intel-master sdw-master-1: trf on Slave 15 failed:-5\n[   44.756382] intel-master sdw-master-1: parity error injection, read: -5\n[   44.756649] rt1308 sdw:1:25d:1308:0: Parity error detected\n\nThe code makes sure the Master device is resumed, hence the clock\nrestarted, before sending a parity error.\n\nSigned-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>\nSigned-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>\nReviewed-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>\nReviewed-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>\nLink: https://lore.kernel.org/r/20200908134521.6781-8-yung-chuan.liao@linux.intel.com\nSigned-off-by: Vinod Koul <vkoul@kernel.org>",
  "full_message": "soundwire: cadence: add parity error injection through debugfs\n\nThe Cadence IP can inject errors, let's make use of this capability to\ntest Slave parity error checks.\n\nSee e.g. example log where both the master and slave detect the parity\nerror injected on a dummy read command.\n\ncd /sys/kernel/debug/soundwire/master-1/intel-sdw/\necho 1 > cdns-parity-error-injection\n\n[   44.756249] intel-master sdw-master-1: Parity error\n[   44.756313] intel-master sdw-master-1: Msg NACK received\n[   44.756366] intel-master sdw-master-1: Msg NACKed for Slave 15\n[   44.756375] intel-master sdw-master-1: trf on Slave 15 failed:-5\n[   44.756382] intel-master sdw-master-1: parity error injection, read: -5\n[   44.756649] rt1308 sdw:1:25d:1308:0: Parity error detected\n\nThe code makes sure the Master device is resumed, hence the clock\nrestarted, before sending a parity error.\n\nSigned-off-by: Pierre-Louis Bossart <pierre-louis.bossart@linux.intel.com>\nSigned-off-by: Bard Liao <yung-chuan.liao@linux.intel.com>\nReviewed-by: Kai Vehmanen <kai.vehmanen@linux.intel.com>\nReviewed-by: Guennadi Liakhovetski <guennadi.liakhovetski@linux.intel.com>\nLink: https://lore.kernel.org/r/20200908134521.6781-8-yung-chuan.liao@linux.intel.com\nSigned-off-by: Vinod Koul <vkoul@kernel.org>",
  "author_name": "Pierre-Louis Bossart",
  "author_email": "pierre-louis.bossart@linux.intel.com",
  "author_date": "Tue Sep 8 21:45:21 2020 +0800",
  "author_date_iso": "2020-09-08T21:45:21+08:00",
  "committer_name": "Vinod Koul",
  "committer_email": "vkoul@kernel.org",
  "committer_date": "Thu Sep 10 11:21:05 2020 +0530",
  "committer_date_iso": "2020-09-10T11:21:05+05:30",
  "files_changed": [
    "drivers/soundwire/cadence_master.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/soundwire/cadence_master.c",
      "insertions": 86,
      "deletions": 0
    }
  ],
  "total_insertions": 86,
  "total_deletions": 0,
  "total_changes": 86,
  "parents": [
    "a350aff45b4d33355cdc59b7b76950e39639e32f"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/soundwire/cadence_master.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}