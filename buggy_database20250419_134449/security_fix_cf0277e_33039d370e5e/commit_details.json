{
  "hash": "cf0277e714a0db302a8f80e1b85fd61c32cf00b3",
  "hash_short": "cf0277e7",
  "subject": "mac80211: fix skb buffering issue",
  "body": "Since I removed the master netdev, we've been\nkeeping internal queues only, and even before\nthat we never told the networking stack above\nthe virtual interfaces about congestion. This\nmeans that packets are queued in mac80211 and\nthe upper layers never know, possibly leading\nto memory exhaustion and other problems.\n\nThis patch makes all interfaces multiqueue and\nuses ndo_select_queue to put the packets into\nqueues per AC. Additionally, when the driver\nstops a queue, we now stop all corresponding\nqueues for the virtual interfaces as well.\n\nThe injection case will use VO by default for\nnon-data frames, and BE for data frames, but\ndowngrade any data frames according to ACM. It\nneeds to be fleshed out in the future to allow\nchosing the queue/AC in radiotap.\n\nReported-by: Lennert Buytenhek <buytenh@marvell.com>\nSigned-off-by: Johannes Berg <johannes@sipsolutions.net>\nCc: stable@kernel.org [2.6.32]\nSigned-off-by: John W. Linville <linville@tuxdriver.com>",
  "full_message": "mac80211: fix skb buffering issue\n\nSince I removed the master netdev, we've been\nkeeping internal queues only, and even before\nthat we never told the networking stack above\nthe virtual interfaces about congestion. This\nmeans that packets are queued in mac80211 and\nthe upper layers never know, possibly leading\nto memory exhaustion and other problems.\n\nThis patch makes all interfaces multiqueue and\nuses ndo_select_queue to put the packets into\nqueues per AC. Additionally, when the driver\nstops a queue, we now stop all corresponding\nqueues for the virtual interfaces as well.\n\nThe injection case will use VO by default for\nnon-data frames, and BE for data frames, but\ndowngrade any data frames according to ACM. It\nneeds to be fleshed out in the future to allow\nchosing the queue/AC in radiotap.\n\nReported-by: Lennert Buytenhek <buytenh@marvell.com>\nSigned-off-by: Johannes Berg <johannes@sipsolutions.net>\nCc: stable@kernel.org [2.6.32]\nSigned-off-by: John W. Linville <linville@tuxdriver.com>",
  "author_name": "Johannes Berg",
  "author_email": "johannes@sipsolutions.net",
  "author_date": "Tue Jan 5 18:00:58 2010 +0100",
  "author_date_iso": "2010-01-05T18:00:58+01:00",
  "committer_name": "John W. Linville",
  "committer_email": "linville@tuxdriver.com",
  "committer_date": "Tue Jan 5 16:21:40 2010 -0500",
  "committer_date_iso": "2010-01-05T16:21:40-05:00",
  "files_changed": [
    "net/mac80211/iface.c",
    "net/mac80211/rx.c",
    "net/mac80211/tx.c",
    "net/mac80211/util.c",
    "net/mac80211/wme.c",
    "net/mac80211/wme.h"
  ],
  "files_changed_count": 6,
  "stats": [
    {
      "file": "net/mac80211/iface.c",
      "insertions": 37,
      "deletions": 2
    },
    {
      "file": "net/mac80211/rx.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "net/mac80211/tx.c",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "net/mac80211/util.c",
      "insertions": 12,
      "deletions": 0
    },
    {
      "file": "net/mac80211/wme.c",
      "insertions": 70,
      "deletions": 26
    },
    {
      "file": "net/mac80211/wme.h",
      "insertions": 6,
      "deletions": 2
    }
  ],
  "total_insertions": 132,
  "total_deletions": 32,
  "total_changes": 164,
  "parents": [
    "301a8234ea81938f0f083ae4e274d9c9296f3c86"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v2.6.33",
    "v2.6.33-rc5",
    "v2.6.33-rc6",
    "v2.6.33-rc7",
    "v2.6.33-rc8",
    "v2.6.34",
    "v2.6.34-rc1",
    "v2.6.34-rc2",
    "v2.6.34-rc3",
    "v2.6.34-rc4"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "net/mac80211/wme.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/mac80211/util.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/mac80211/rx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/mac80211/iface.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/mac80211/tx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/mac80211/wme.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}