{
  "hash": "09b35989421dfd5573f0b4683c7700a7483c71f9",
  "hash_short": "09b35989",
  "subject": "kdb: Use format-strings rather than '\\0' injection in kdb_read()",
  "body": "Currently when kdb_read() needs to reposition the cursor it uses copy and\npaste code that works by injecting an '\\0' at the cursor position before\ndelivering a carriage-return and reprinting the line (which stops at the\n'\\0').\n\nTidy up the code by hoisting the copy and paste code into an appropriately\nnamed function. Additionally let's replace the '\\0' injection with a\nproper field width parameter so that the string will be abridged during\nformatting instead.\n\nCc: stable@vger.kernel.org # Not a bug fix but it is needed for later bug fixes\nTested-by: Justin Stitt <justinstitt@google.com>\nReviewed-by: Douglas Anderson <dianders@chromium.org>\nLink: https://lore.kernel.org/r/20240424-kgdb_read_refactor-v3-2-f236dbe9828d@linaro.org\nSigned-off-by: Daniel Thompson <daniel.thompson@linaro.org>",
  "full_message": "kdb: Use format-strings rather than '\\0' injection in kdb_read()\n\nCurrently when kdb_read() needs to reposition the cursor it uses copy and\npaste code that works by injecting an '\\0' at the cursor position before\ndelivering a carriage-return and reprinting the line (which stops at the\n'\\0').\n\nTidy up the code by hoisting the copy and paste code into an appropriately\nnamed function. Additionally let's replace the '\\0' injection with a\nproper field width parameter so that the string will be abridged during\nformatting instead.\n\nCc: stable@vger.kernel.org # Not a bug fix but it is needed for later bug fixes\nTested-by: Justin Stitt <justinstitt@google.com>\nReviewed-by: Douglas Anderson <dianders@chromium.org>\nLink: https://lore.kernel.org/r/20240424-kgdb_read_refactor-v3-2-f236dbe9828d@linaro.org\nSigned-off-by: Daniel Thompson <daniel.thompson@linaro.org>",
  "author_name": "Daniel Thompson",
  "author_email": "daniel.thompson@linaro.org",
  "author_date": "Wed Apr 24 15:03:35 2024 +0100",
  "author_date_iso": "2024-04-24T15:03:35+01:00",
  "committer_name": "Daniel Thompson",
  "committer_email": "daniel.thompson@linaro.org",
  "committer_date": "Fri Apr 26 17:13:30 2024 +0100",
  "committer_date_iso": "2024-04-26T17:13:30+01:00",
  "files_changed": [
    "kernel/debug/kdb/kdb_io.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "kernel/debug/kdb/kdb_io.c",
      "insertions": 34,
      "deletions": 21
    }
  ],
  "total_insertions": 34,
  "total_deletions": 21,
  "total_changes": 55,
  "parents": [
    "e9730744bf3af04cda23799029342aa3cddbc454"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "kernel/debug/kdb/kdb_io.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}