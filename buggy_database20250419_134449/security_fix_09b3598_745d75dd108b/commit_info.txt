Commit Hash: 09b35989421dfd5573f0b4683c7700a7483c71f9
Subject: kdb: Use format-strings rather than '\0' injection in kdb_read()


Security Keywords:
- injection

Full commit message:
kdb: Use format-strings rather than '\0' injection in kdb_read()

Currently when kdb_read() needs to reposition the cursor it uses copy and
paste code that works by injecting an '\0' at the cursor position before
delivering a carriage-return and reprinting the line (which stops at the
'\0').

Tidy up the code by hoisting the copy and paste code into an appropriately
named function. Additionally let's replace the '\0' injection with a
proper field width parameter so that the string will be abridged during
formatting instead.

Cc: stable@vger.kernel.org # Not a bug fix but it is needed for later bug fixes
Tested-by: Justin Stitt <justinstitt@google.com>
Reviewed-by: Douglas Anderson <dianders@chromium.org>
Link: https://lore.kernel.org/r/20240424-kgdb_read_refactor-v3-2-f236dbe9828d@linaro.org
Signed-off-by: Daniel Thompson <daniel.thompson@linaro.org>

Metadata:
Author: Daniel Thompson <daniel.thompson@linaro.org>
Author Date: Wed Apr 24 15:03:35 2024 +0100
Committer: Daniel Thompson <daniel.thompson@linaro.org>
Commit Date: Fri Apr 26 17:13:30 2024 +0100

Files Changed: 1
Lines Added: 34
Lines Removed: 21
Total Changes: 55
