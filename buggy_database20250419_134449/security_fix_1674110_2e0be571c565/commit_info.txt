Commit Hash: 1674110c0dd44a6240f03fff9a05fd72917b3f7d
Subject: net: mdio_bus: replace deprecated strncpy with strscpy


Security Keywords:
- hardening

Full commit message:
net: mdio_bus: replace deprecated strncpy with strscpy

strncpy() is deprecated for use on NUL-terminated destination strings
[1] and as such we should prefer more robust and less ambiguous string
interfaces.

We expect mdiodev->modalias to be NUL-terminated based on its usage with
strcmp():
|       return strcmp(mdiodev->modalias, drv->name) == 0;

Moreover, mdiodev->modalias is already zero-allocated:
|       mdiodev = kzalloc(sizeof(*mdiodev), GFP_KERNEL);
... which means the NUL-padding strncpy provides is not necessary.

Considering the above, a suitable replacement is `strscpy` [2] due to
the fact that it guarantees NUL-termination on the destination buffer
without unnecessarily NUL-padding.

Link: https://www.kernel.org/doc/html/latest/process/deprecated.html#strncpy-on-nul-terminated-strings [1]
Link: https://manpages.debian.org/testing/linux-manual-4.8/strscpy.9.en.html [2]
Link: https://github.com/KSPP/linux/issues/90
Cc: linux-hardening@vger.kernel.org
Signed-off-by: Justin Stitt <justinstitt@google.com>
Reviewed-by: Kees Cook <keescook@chromium.org>
Signed-off-by: David S. Miller <davem@davemloft.net>

Metadata:
Author: Justin Stitt <justinstitt@google.com>
Author Date: Thu Dec 7 21:57:50 2023 +0000
Committer: David S. Miller <davem@davemloft.net>
Commit Date: Sun Dec 10 19:08:58 2023 +0000

Files Changed: 1
Lines Added: 1
Lines Removed: 1
Total Changes: 2
