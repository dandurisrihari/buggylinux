diff --cc arch/x86/kernel/process.c
index e57cd31bfec4,00a831d56c50..b650cde3f64d
--- a/arch/x86/kernel/process.c
+++ b/arch/x86/kernel/process.c
@@@ -735,11 -717,23 +735,12 @@@ void arch_cpu_idle_dead(void
  /*
   * Called from the generic idle code.
   */
 -void arch_cpu_idle(void)
 +void __cpuidle arch_cpu_idle(void)
  {
 -	x86_idle();
 +	static_call(x86_idle)();
  }
+ EXPORT_SYMBOL_GPL(arch_cpu_idle);
  
 -/*
 - * We use this if we don't have any better idle routine..
 - */
 -void __cpuidle default_idle(void)
 -{
 -	raw_safe_halt();
 -}
 -#if defined(CONFIG_APM_MODULE) || defined(CONFIG_HALTPOLL_CPUIDLE_MODULE)
 -EXPORT_SYMBOL(default_idle);
 -#endif
 -
  #ifdef CONFIG_XEN
  bool xen_set_default_idle(void)
  {