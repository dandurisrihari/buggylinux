{
  "hash": "2504ba8b01634319a6f95b7fa9bf9c101437e158",
  "hash_short": "2504ba8b",
  "subject": "Merge tag 'pm-6.3-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm",
  "body": "Pull power management updates from Rafael Wysocki:\n \"These add EPP support to the AMD P-state cpufreq driver, add support\n  for new platforms to the Intel RAPL power capping driver, intel_idle\n  and the Qualcomm cpufreq driver, enable thermal cooling for Tegra194,\n  drop the custom cpufreq driver for loongson1 that is not necessary any\n  more (and the corresponding cpufreq platform device), fix assorted\n  issues and clean up code.\n\n  Specifics:\n\n   - Add EPP support to the AMD P-state cpufreq driver (Perry Yuan, Wyes\n     Karny, Arnd Bergmann, Bagas Sanjaya)\n\n   - Drop the custom cpufreq driver for loongson1 that is not necessary\n     any more and the corresponding cpufreq platform device (Keguang\n     Zhang)\n\n   - Remove \"select SRCU\" from system sleep, cpufreq and OPP Kconfig\n     entries (Paul E. McKenney)\n\n   - Enable thermal cooling for Tegra194 (Yi-Wei Wang)\n\n   - Register module device table and add missing compatibles for\n     cpufreq-qcom-hw (N\u00edcolas F. R. A. Prado, Abel Vesa and Luca Weiss)\n\n   - Various dt binding updates for qcom-cpufreq-nvmem and\n     opp-v2-kryo-cpu (Christian Marangi)\n\n   - Make kobj_type structure in the cpufreq core constant (Thomas\n     Wei\u00dfschuh)\n\n   - Make cpufreq_unregister_driver() return void (Uwe Kleine-K\u00f6nig)\n\n   - Make the TEO cpuidle governor check CPU utilization in order to\n     refine idle state selection (Kajetan Puchalski)\n\n   - Make Kconfig select the haltpoll cpuidle governor when the haltpoll\n     cpuidle driver is selected and replace a default_idle() call in\n     that driver with arch_cpu_idle() to allow MWAIT to be used (Li\n     RongQing)\n\n   - Add Emerald Rapids Xeon support to the intel_idle driver (Artem\n     Bityutskiy)\n\n   - Add ARCH_SUSPEND_POSSIBLE dependencies for ARMv4 cpuidle drivers to\n     avoid randconfig build failures (Arnd Bergmann)\n\n   - Make kobj_type structures used in the cpuidle sysfs interface\n     constant (Thomas Wei\u00dfschuh)\n\n   - Make the cpuidle driver registration code update microsecond values\n     of idle state parameters in accordance with their nanosecond values\n     if they are provided (Rafael Wysocki)\n\n   - Make the PSCI cpuidle driver prevent topology CPUs from being\n     suspended on PREEMPT_RT (Krzysztof Kozlowski)\n\n   - Document that pm_runtime_force_suspend() cannot be used with\n     DPM_FLAG_SMART_SUSPEND (Richard Fitzgerald)\n\n   - Add EXPORT macros for exporting PM functions from drivers (Richard\n     Fitzgerald)\n\n   - Remove /** from non-kernel-doc comments in hibernation code (Randy\n     Dunlap)\n\n   - Fix possible name leak in powercap_register_zone() (Yang Yingliang)\n\n   - Add Meteor Lake and Emerald Rapids support to the intel_rapl power\n     capping driver (Zhang Rui)\n\n   - Modify the idle_inject power capping facility to support 100% idle\n     injection (Srinivas Pandruvada)\n\n   - Fix large time windows handling in the intel_rapl power capping\n     driver (Zhang Rui)\n\n   - Fix memory leaks with using debugfs_lookup() in the generic PM\n     domains and Energy Model code (Greg Kroah-Hartman)\n\n   - Add missing 'cache-unified' property in the example for kryo OPP\n     bindings (Rob Herring)\n\n   - Fix error checking in opp_migrate_dentry() (Qi Zheng)\n\n   - Let qcom,opp-fuse-level be a 2-long array for qcom SoCs (Konrad\n     Dybcio)\n\n   - Modify some power management utilities to use the canonical ftrace\n     path (Ross Zwisler)\n\n   - Correct spelling problems for Documentation/power/ as reported by\n     codespell (Randy Dunlap)\"\n\n* tag 'pm-6.3-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm: (53 commits)\n  Documentation: amd-pstate: disambiguate user space sections\n  cpufreq: amd-pstate: Fix invalid write to MSR_AMD_CPPC_REQ\n  dt-bindings: opp: opp-v2-kryo-cpu: enlarge opp-supported-hw maximum\n  dt-bindings: cpufreq: qcom-cpufreq-nvmem: make cpr bindings optional\n  dt-bindings: cpufreq: qcom-cpufreq-nvmem: specify supported opp tables\n  PM: Add EXPORT macros for exporting PM functions\n  cpuidle: psci: Do not suspend topology CPUs on PREEMPT_RT\n  MIPS: loongson32: Drop obsolete cpufreq platform device\n  powercap: intel_rapl: Fix handling for large time window\n  cpuidle: driver: Update microsecond values of state parameters as needed\n  cpuidle: sysfs: make kobj_type structures constant\n  cpuidle: add ARCH_SUSPEND_POSSIBLE dependencies\n  PM: EM: fix memory leak with using debugfs_lookup()\n  PM: domains: fix memory leak with using debugfs_lookup()\n  cpufreq: Make kobj_type structure constant\n  cpufreq: davinci: Fix clk use after free\n  cpufreq: amd-pstate: avoid uninitialized variable use\n  cpufreq: Make cpufreq_unregister_driver() return void\n  OPP: fix error checking in opp_migrate_dentry()\n  dt-bindings: cpufreq: cpufreq-qcom-hw: Add SM8550 compatible\n  ...",
  "full_message": "Merge tag 'pm-6.3-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm\n\nPull power management updates from Rafael Wysocki:\n \"These add EPP support to the AMD P-state cpufreq driver, add support\n  for new platforms to the Intel RAPL power capping driver, intel_idle\n  and the Qualcomm cpufreq driver, enable thermal cooling for Tegra194,\n  drop the custom cpufreq driver for loongson1 that is not necessary any\n  more (and the corresponding cpufreq platform device), fix assorted\n  issues and clean up code.\n\n  Specifics:\n\n   - Add EPP support to the AMD P-state cpufreq driver (Perry Yuan, Wyes\n     Karny, Arnd Bergmann, Bagas Sanjaya)\n\n   - Drop the custom cpufreq driver for loongson1 that is not necessary\n     any more and the corresponding cpufreq platform device (Keguang\n     Zhang)\n\n   - Remove \"select SRCU\" from system sleep, cpufreq and OPP Kconfig\n     entries (Paul E. McKenney)\n\n   - Enable thermal cooling for Tegra194 (Yi-Wei Wang)\n\n   - Register module device table and add missing compatibles for\n     cpufreq-qcom-hw (N\u00edcolas F. R. A. Prado, Abel Vesa and Luca Weiss)\n\n   - Various dt binding updates for qcom-cpufreq-nvmem and\n     opp-v2-kryo-cpu (Christian Marangi)\n\n   - Make kobj_type structure in the cpufreq core constant (Thomas\n     Wei\u00dfschuh)\n\n   - Make cpufreq_unregister_driver() return void (Uwe Kleine-K\u00f6nig)\n\n   - Make the TEO cpuidle governor check CPU utilization in order to\n     refine idle state selection (Kajetan Puchalski)\n\n   - Make Kconfig select the haltpoll cpuidle governor when the haltpoll\n     cpuidle driver is selected and replace a default_idle() call in\n     that driver with arch_cpu_idle() to allow MWAIT to be used (Li\n     RongQing)\n\n   - Add Emerald Rapids Xeon support to the intel_idle driver (Artem\n     Bityutskiy)\n\n   - Add ARCH_SUSPEND_POSSIBLE dependencies for ARMv4 cpuidle drivers to\n     avoid randconfig build failures (Arnd Bergmann)\n\n   - Make kobj_type structures used in the cpuidle sysfs interface\n     constant (Thomas Wei\u00dfschuh)\n\n   - Make the cpuidle driver registration code update microsecond values\n     of idle state parameters in accordance with their nanosecond values\n     if they are provided (Rafael Wysocki)\n\n   - Make the PSCI cpuidle driver prevent topology CPUs from being\n     suspended on PREEMPT_RT (Krzysztof Kozlowski)\n\n   - Document that pm_runtime_force_suspend() cannot be used with\n     DPM_FLAG_SMART_SUSPEND (Richard Fitzgerald)\n\n   - Add EXPORT macros for exporting PM functions from drivers (Richard\n     Fitzgerald)\n\n   - Remove /** from non-kernel-doc comments in hibernation code (Randy\n     Dunlap)\n\n   - Fix possible name leak in powercap_register_zone() (Yang Yingliang)\n\n   - Add Meteor Lake and Emerald Rapids support to the intel_rapl power\n     capping driver (Zhang Rui)\n\n   - Modify the idle_inject power capping facility to support 100% idle\n     injection (Srinivas Pandruvada)\n\n   - Fix large time windows handling in the intel_rapl power capping\n     driver (Zhang Rui)\n\n   - Fix memory leaks with using debugfs_lookup() in the generic PM\n     domains and Energy Model code (Greg Kroah-Hartman)\n\n   - Add missing 'cache-unified' property in the example for kryo OPP\n     bindings (Rob Herring)\n\n   - Fix error checking in opp_migrate_dentry() (Qi Zheng)\n\n   - Let qcom,opp-fuse-level be a 2-long array for qcom SoCs (Konrad\n     Dybcio)\n\n   - Modify some power management utilities to use the canonical ftrace\n     path (Ross Zwisler)\n\n   - Correct spelling problems for Documentation/power/ as reported by\n     codespell (Randy Dunlap)\"\n\n* tag 'pm-6.3-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm: (53 commits)\n  Documentation: amd-pstate: disambiguate user space sections\n  cpufreq: amd-pstate: Fix invalid write to MSR_AMD_CPPC_REQ\n  dt-bindings: opp: opp-v2-kryo-cpu: enlarge opp-supported-hw maximum\n  dt-bindings: cpufreq: qcom-cpufreq-nvmem: make cpr bindings optional\n  dt-bindings: cpufreq: qcom-cpufreq-nvmem: specify supported opp tables\n  PM: Add EXPORT macros for exporting PM functions\n  cpuidle: psci: Do not suspend topology CPUs on PREEMPT_RT\n  MIPS: loongson32: Drop obsolete cpufreq platform device\n  powercap: intel_rapl: Fix handling for large time window\n  cpuidle: driver: Update microsecond values of state parameters as needed\n  cpuidle: sysfs: make kobj_type structures constant\n  cpuidle: add ARCH_SUSPEND_POSSIBLE dependencies\n  PM: EM: fix memory leak with using debugfs_lookup()\n  PM: domains: fix memory leak with using debugfs_lookup()\n  cpufreq: Make kobj_type structure constant\n  cpufreq: davinci: Fix clk use after free\n  cpufreq: amd-pstate: avoid uninitialized variable use\n  cpufreq: Make cpufreq_unregister_driver() return void\n  OPP: fix error checking in opp_migrate_dentry()\n  dt-bindings: cpufreq: cpufreq-qcom-hw: Add SM8550 compatible\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Tue Feb 21 12:13:58 2023 -0800",
  "author_date_iso": "2023-02-21T12:13:58-08:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Tue Feb 21 12:13:58 2023 -0800",
  "committer_date_iso": "2023-02-21T12:13:58-08:00",
  "files_changed": [
    "Documentation/admin-guide/kernel-parameters.txt",
    "arch/x86/kernel/process.c",
    "drivers/base/power/runtime.c",
    "drivers/cpufreq/Kconfig",
    "drivers/cpufreq/Makefile",
    "drivers/cpuidle/cpuidle-psci.c",
    "drivers/idle/intel_idle.c"
  ],
  "files_changed_count": 7,
  "stats": [
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "Documentation/admin-guide/pm/amd-pstate.rst",
      "insertions": 74,
      "deletions": 4
    },
    {
      "file": "Documentation/devicetree/bindings/cpufreq/cpufreq-qcom-hw.yaml",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/cpufreq/qcom-cpufreq-nvmem.yaml",
      "insertions": 56,
      "deletions": 25
    },
    {
      "file": "Documentation/devicetree/bindings/opp/opp-v2-kryo-cpu.yaml",
      "insertions": 15,
      "deletions": 3
    },
    {
      "file": "Documentation/devicetree/bindings/opp/opp-v2-qcom-level.yaml",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "Documentation/power/suspend-and-interrupts.rst",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/mips/include/asm/mach-loongson32/cpufreq.h",
      "insertions": 0,
      "deletions": 18
    },
    {
      "file": "arch/mips/include/asm/mach-loongson32/platform.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/mips/loongson32/common/platform.c",
      "insertions": 0,
      "deletions": 16
    },
    {
      "file": "arch/mips/loongson32/ls1b/board.c",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/x86/kernel/process.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/acpi/cppc_acpi.c",
      "insertions": 67,
      "deletions": 0
    },
    {
      "file": "drivers/base/power/domain.c",
      "insertions": 1,
      "deletions": 4
    },
    {
      "file": "drivers/base/power/runtime.c",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "drivers/cpufreq/Kconfig",
      "insertions": 0,
      "deletions": 10
    },
    {
      "file": "drivers/cpufreq/Makefile",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "drivers/cpufreq/amd-pstate.c",
      "insertions": 686,
      "deletions": 19
    },
    {
      "file": "drivers/cpufreq/brcmstb-avs-cpufreq.c",
      "insertions": 1,
      "deletions": 4
    },
    {
      "file": "drivers/cpufreq/cpufreq.c",
      "insertions": 4,
      "deletions": 6
    },
    {
      "file": "drivers/cpufreq/davinci-cpufreq.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "drivers/cpufreq/loongson1-cpufreq.c",
      "insertions": 0,
      "deletions": 222
    },
    {
      "file": "drivers/cpufreq/mediatek-cpufreq-hw.c",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "drivers/cpufreq/omap-cpufreq.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "drivers/cpufreq/qcom-cpufreq-hw.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "drivers/cpufreq/tegra194-cpufreq.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "drivers/cpuidle/Kconfig",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/cpuidle/Kconfig.arm",
      "insertions": 10,
      "deletions": 0
    },
    {
      "file": "drivers/cpuidle/cpuidle-haltpoll.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/cpuidle/cpuidle-psci-domain.c",
      "insertions": 5,
      "deletions": 2
    },
    {
      "file": "drivers/cpuidle/cpuidle-psci.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/cpuidle/driver.c",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "drivers/cpuidle/governors/teo.c",
      "insertions": 98,
      "deletions": 4
    },
    {
      "file": "drivers/cpuidle/sysfs.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "drivers/idle/intel_idle.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/opp/Kconfig",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "drivers/opp/debugfs.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/powercap/idle_inject.c",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "drivers/powercap/intel_rapl_common.c",
      "insertions": 12,
      "deletions": 1
    },
    {
      "file": "drivers/powercap/powercap_sys.c",
      "insertions": 9,
      "deletions": 5
    },
    {
      "file": "include/acpi/cppc_acpi.h",
      "insertions": 12,
      "deletions": 0
    },
    {
      "file": "include/linux/amd-pstate.h",
      "insertions": 32,
      "deletions": 0
    },
    {
      "file": "include/linux/cpufreq.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "include/linux/pm.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "kernel/power/Kconfig",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "kernel/power/energy_model.c",
      "insertions": 1,
      "deletions": 4
    },
    {
      "file": "kernel/power/swap.c",
      "insertions": 8,
      "deletions": 8
    },
    {
      "file": "tools/power/pm-graph/sleepgraph.py",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "tools/power/x86/amd_pstate_tracer/amd_pstate_trace.py",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "tools/power/x86/intel_pstate_tracer/intel_pstate_tracer.py",
      "insertions": 5,
      "deletions": 5
    }
  ],
  "total_insertions": 1160,
  "total_deletions": 384,
  "total_changes": 1544,
  "parents": [
    "4a7d37e824f57dbace61abf62f53843800bd245c",
    "dd855f01e8d194d2dfeda36b620203c623c10430"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/cpufreq/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/process.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/cpufreq/Makefile",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/cpuidle/cpuidle-psci.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/idle/intel_idle.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/base/power/runtime.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}