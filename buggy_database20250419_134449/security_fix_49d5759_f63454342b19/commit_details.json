{
  "hash": "49d575926890e6ada930bf6f06d62b2fde8fce95",
  "hash_short": "49d57592",
  "subject": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm",
  "body": "Pull kvm updates from Paolo Bonzini:\n \"ARM:\n\n   - Provide a virtual cache topology to the guest to avoid\n     inconsistencies with migration on heterogenous systems. Non secure\n     software has no practical need to traverse the caches by set/way in\n     the first place\n\n   - Add support for taking stage-2 access faults in parallel. This was\n     an accidental omission in the original parallel faults\n     implementation, but should provide a marginal improvement to\n     machines w/o FEAT_HAFDBS (such as hardware from the fruit company)\n\n   - A preamble to adding support for nested virtualization to KVM,\n     including vEL2 register state, rudimentary nested exception\n     handling and masking unsupported features for nested guests\n\n   - Fixes to the PSCI relay that avoid an unexpected host SVE trap when\n     resuming a CPU when running pKVM\n\n   - VGIC maintenance interrupt support for the AIC\n\n   - Improvements to the arch timer emulation, primarily aimed at\n     reducing the trap overhead of running nested\n\n   - Add CONFIG_USERFAULTFD to the KVM selftests config fragment in the\n     interest of CI systems\n\n   - Avoid VM-wide stop-the-world operations when a vCPU accesses its\n     own redistributor\n\n   - Serialize when toggling CPACR_EL1.SMEN to avoid unexpected\n     exceptions in the host\n\n   - Aesthetic and comment/kerneldoc fixes\n\n   - Drop the vestiges of the old Columbia mailing list and add [Oliver]\n     as co-maintainer\n\n  RISC-V:\n\n   - Fix wrong usage of PGDIR_SIZE instead of PUD_SIZE\n\n   - Correctly place the guest in S-mode after redirecting a trap to the\n     guest\n\n   - Redirect illegal instruction traps to guest\n\n   - SBI PMU support for guest\n\n  s390:\n\n   - Sort out confusion between virtual and physical addresses, which\n     currently are the same on s390\n\n   - A new ioctl that performs cmpxchg on guest memory\n\n   - A few fixes\n\n  x86:\n\n   - Change tdp_mmu to a read-only parameter\n\n   - Separate TDP and shadow MMU page fault paths\n\n   - Enable Hyper-V invariant TSC control\n\n   - Fix a variety of APICv and AVIC bugs, some of them real-world, some\n     of them affecting architecurally legal but unlikely to happen in\n     practice\n\n   - Mark APIC timer as expired if its in one-shot mode and the count\n     underflows while the vCPU task was being migrated\n\n   - Advertise support for Intel's new fast REP string features\n\n   - Fix a double-shootdown issue in the emergency reboot code\n\n   - Ensure GIF=1 and disable SVM during an emergency reboot, i.e. give\n     SVM similar treatment to VMX\n\n   - Update Xen's TSC info CPUID sub-leaves as appropriate\n\n   - Add support for Hyper-V's extended hypercalls, where \"support\" at\n     this point is just forwarding the hypercalls to userspace\n\n   - Clean up the kvm->lock vs. kvm->srcu sequences when updating the\n     PMU and MSR filters\n\n   - One-off fixes and cleanups\n\n   - Fix and cleanup the range-based TLB flushing code, used when KVM is\n     running on Hyper-V\n\n   - Add support for filtering PMU events using a mask. If userspace\n     wants to restrict heavily what events the guest can use, it can now\n     do so without needing an absurd number of filter entries\n\n   - Clean up KVM's handling of \"PMU MSRs to save\", especially when vPMU\n     support is disabled\n\n   - Add PEBS support for Intel Sapphire Rapids\n\n   - Fix a mostly benign overflow bug in SEV's\n     send|receive_update_data()\n\n   - Move several SVM-specific flags into vcpu_svm\n\n  x86 Intel:\n\n   - Handle NMI VM-Exits before leaving the noinstr region\n\n   - A few trivial cleanups in the VM-Enter flows\n\n   - Stop enabling VMFUNC for L1 purely to document that KVM doesn't\n     support EPTP switching (or any other VM function) for L1\n\n   - Fix a crash when using eVMCS's enlighted MSR bitmaps\n\n  Generic:\n\n   - Clean up the hardware enable and initialization flow, which was\n     scattered around multiple arch-specific hooks. Instead, just let\n     the arch code call into generic code. Both x86 and ARM should\n     benefit from not having to fight common KVM code's notion of how to\n     do initialization\n\n   - Account allocations in generic kvm_arch_alloc_vm()\n\n   - Fix a memory leak if coalesced MMIO unregistration fails\n\n  selftests:\n\n   - On x86, cache the CPU vendor (AMD vs. Intel) and use the info to\n     emit the correct hypercall instruction instead of relying on KVM to\n     patch in VMMCALL\n\n   - Use TAP interface for kvm_binary_stats_test and tsc_msrs_test\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (325 commits)\n  KVM: SVM: hyper-v: placate modpost section mismatch error\n  KVM: x86/mmu: Make tdp_mmu_allowed static\n  KVM: arm64: nv: Use reg_to_encoding() to get sysreg ID\n  KVM: arm64: nv: Only toggle cache for virtual EL2 when SCTLR_EL2 changes\n  KVM: arm64: nv: Filter out unsupported features from ID regs\n  KVM: arm64: nv: Emulate EL12 register accesses from the virtual EL2\n  KVM: arm64: nv: Allow a sysreg to be hidden from userspace only\n  KVM: arm64: nv: Emulate PSTATE.M for a guest hypervisor\n  KVM: arm64: nv: Add accessors for SPSR_EL1, ELR_EL1 and VBAR_EL1 from virtual EL2\n  KVM: arm64: nv: Handle SMCs taken from virtual EL2\n  KVM: arm64: nv: Handle trapped ERET from virtual EL2\n  KVM: arm64: nv: Inject HVC exceptions to the virtual EL2\n  KVM: arm64: nv: Support virtual EL2 exceptions\n  KVM: arm64: nv: Handle HCR_EL2.NV system register traps\n  KVM: arm64: nv: Add nested virt VCPU primitives for vEL2 VCPU state\n  KVM: arm64: nv: Add EL2 system registers to vcpu context\n  KVM: arm64: nv: Allow userspace to set PSR_MODE_EL2x\n  KVM: arm64: nv: Reset VCPU to EL2 registers if VCPU nested virt is set\n  KVM: arm64: nv: Introduce nested virtualization VCPU feature\n  KVM: arm64: Use the S2 MMU context to iterate over S2 table\n  ...",
  "full_message": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm\n\nPull kvm updates from Paolo Bonzini:\n \"ARM:\n\n   - Provide a virtual cache topology to the guest to avoid\n     inconsistencies with migration on heterogenous systems. Non secure\n     software has no practical need to traverse the caches by set/way in\n     the first place\n\n   - Add support for taking stage-2 access faults in parallel. This was\n     an accidental omission in the original parallel faults\n     implementation, but should provide a marginal improvement to\n     machines w/o FEAT_HAFDBS (such as hardware from the fruit company)\n\n   - A preamble to adding support for nested virtualization to KVM,\n     including vEL2 register state, rudimentary nested exception\n     handling and masking unsupported features for nested guests\n\n   - Fixes to the PSCI relay that avoid an unexpected host SVE trap when\n     resuming a CPU when running pKVM\n\n   - VGIC maintenance interrupt support for the AIC\n\n   - Improvements to the arch timer emulation, primarily aimed at\n     reducing the trap overhead of running nested\n\n   - Add CONFIG_USERFAULTFD to the KVM selftests config fragment in the\n     interest of CI systems\n\n   - Avoid VM-wide stop-the-world operations when a vCPU accesses its\n     own redistributor\n\n   - Serialize when toggling CPACR_EL1.SMEN to avoid unexpected\n     exceptions in the host\n\n   - Aesthetic and comment/kerneldoc fixes\n\n   - Drop the vestiges of the old Columbia mailing list and add [Oliver]\n     as co-maintainer\n\n  RISC-V:\n\n   - Fix wrong usage of PGDIR_SIZE instead of PUD_SIZE\n\n   - Correctly place the guest in S-mode after redirecting a trap to the\n     guest\n\n   - Redirect illegal instruction traps to guest\n\n   - SBI PMU support for guest\n\n  s390:\n\n   - Sort out confusion between virtual and physical addresses, which\n     currently are the same on s390\n\n   - A new ioctl that performs cmpxchg on guest memory\n\n   - A few fixes\n\n  x86:\n\n   - Change tdp_mmu to a read-only parameter\n\n   - Separate TDP and shadow MMU page fault paths\n\n   - Enable Hyper-V invariant TSC control\n\n   - Fix a variety of APICv and AVIC bugs, some of them real-world, some\n     of them affecting architecurally legal but unlikely to happen in\n     practice\n\n   - Mark APIC timer as expired if its in one-shot mode and the count\n     underflows while the vCPU task was being migrated\n\n   - Advertise support for Intel's new fast REP string features\n\n   - Fix a double-shootdown issue in the emergency reboot code\n\n   - Ensure GIF=1 and disable SVM during an emergency reboot, i.e. give\n     SVM similar treatment to VMX\n\n   - Update Xen's TSC info CPUID sub-leaves as appropriate\n\n   - Add support for Hyper-V's extended hypercalls, where \"support\" at\n     this point is just forwarding the hypercalls to userspace\n\n   - Clean up the kvm->lock vs. kvm->srcu sequences when updating the\n     PMU and MSR filters\n\n   - One-off fixes and cleanups\n\n   - Fix and cleanup the range-based TLB flushing code, used when KVM is\n     running on Hyper-V\n\n   - Add support for filtering PMU events using a mask. If userspace\n     wants to restrict heavily what events the guest can use, it can now\n     do so without needing an absurd number of filter entries\n\n   - Clean up KVM's handling of \"PMU MSRs to save\", especially when vPMU\n     support is disabled\n\n   - Add PEBS support for Intel Sapphire Rapids\n\n   - Fix a mostly benign overflow bug in SEV's\n     send|receive_update_data()\n\n   - Move several SVM-specific flags into vcpu_svm\n\n  x86 Intel:\n\n   - Handle NMI VM-Exits before leaving the noinstr region\n\n   - A few trivial cleanups in the VM-Enter flows\n\n   - Stop enabling VMFUNC for L1 purely to document that KVM doesn't\n     support EPTP switching (or any other VM function) for L1\n\n   - Fix a crash when using eVMCS's enlighted MSR bitmaps\n\n  Generic:\n\n   - Clean up the hardware enable and initialization flow, which was\n     scattered around multiple arch-specific hooks. Instead, just let\n     the arch code call into generic code. Both x86 and ARM should\n     benefit from not having to fight common KVM code's notion of how to\n     do initialization\n\n   - Account allocations in generic kvm_arch_alloc_vm()\n\n   - Fix a memory leak if coalesced MMIO unregistration fails\n\n  selftests:\n\n   - On x86, cache the CPU vendor (AMD vs. Intel) and use the info to\n     emit the correct hypercall instruction instead of relying on KVM to\n     patch in VMMCALL\n\n   - Use TAP interface for kvm_binary_stats_test and tsc_msrs_test\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (325 commits)\n  KVM: SVM: hyper-v: placate modpost section mismatch error\n  KVM: x86/mmu: Make tdp_mmu_allowed static\n  KVM: arm64: nv: Use reg_to_encoding() to get sysreg ID\n  KVM: arm64: nv: Only toggle cache for virtual EL2 when SCTLR_EL2 changes\n  KVM: arm64: nv: Filter out unsupported features from ID regs\n  KVM: arm64: nv: Emulate EL12 register accesses from the virtual EL2\n  KVM: arm64: nv: Allow a sysreg to be hidden from userspace only\n  KVM: arm64: nv: Emulate PSTATE.M for a guest hypervisor\n  KVM: arm64: nv: Add accessors for SPSR_EL1, ELR_EL1 and VBAR_EL1 from virtual EL2\n  KVM: arm64: nv: Handle SMCs taken from virtual EL2\n  KVM: arm64: nv: Handle trapped ERET from virtual EL2\n  KVM: arm64: nv: Inject HVC exceptions to the virtual EL2\n  KVM: arm64: nv: Support virtual EL2 exceptions\n  KVM: arm64: nv: Handle HCR_EL2.NV system register traps\n  KVM: arm64: nv: Add nested virt VCPU primitives for vEL2 VCPU state\n  KVM: arm64: nv: Add EL2 system registers to vcpu context\n  KVM: arm64: nv: Allow userspace to set PSR_MODE_EL2x\n  KVM: arm64: nv: Reset VCPU to EL2 registers if VCPU nested virt is set\n  KVM: arm64: nv: Introduce nested virtualization VCPU feature\n  KVM: arm64: Use the S2 MMU context to iterate over S2 table\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Sat Feb 25 11:30:21 2023 -0800",
  "author_date_iso": "2023-02-25T11:30:21-08:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Sat Feb 25 11:30:21 2023 -0800",
  "committer_date_iso": "2023-02-25T11:30:21-08:00",
  "files_changed": [
    "Documentation/admin-guide/kernel-parameters.txt",
    "MAINTAINERS",
    "arch/arm64/include/asm/el2_setup.h",
    "arch/arm64/include/asm/sysreg.h",
    "arch/arm64/kernel/cacheinfo.c",
    "arch/arm64/kernel/cpufeature.c",
    "arch/arm64/tools/cpucaps",
    "arch/arm64/tools/gen-sysreg.awk",
    "arch/arm64/tools/sysreg",
    "arch/riscv/kvm/tlb.c",
    "arch/x86/events/intel/core.c",
    "arch/x86/events/intel/ds.c",
    "arch/x86/include/asm/cpufeatures.h",
    "arch/x86/include/asm/hyperv-tlfs.h",
    "arch/x86/kernel/cpu/mshyperv.c",
    "arch/x86/kernel/nmi.c",
    "arch/x86/kvm/cpuid.c",
    "arch/x86/kvm/emulate.c",
    "arch/x86/kvm/pmu.h",
    "arch/x86/kvm/reverse_cpuid.h",
    "arch/x86/kvm/svm/svm.c",
    "arch/x86/kvm/x86.c",
    "drivers/irqchip/irq-apple-aic.c",
    "drivers/perf/riscv_pmu_sbi.c",
    "include/linux/cpuhotplug.h"
  ],
  "files_changed_count": 25,
  "stats": [
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "insertions": 6,
      "deletions": 1
    },
    {
      "file": "Documentation/virt/kvm/api.rst",
      "insertions": 108,
      "deletions": 16
    },
    {
      "file": "Documentation/virt/kvm/devices/vm.rst",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "Documentation/virt/kvm/locking.rst",
      "insertions": 16,
      "deletions": 9
    },
    {
      "file": "Documentation/virt/kvm/x86/errata.rst",
      "insertions": 11,
      "deletions": 0
    },
    {
      "file": "MAINTAINERS",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "arch/arm64/include/asm/cache.h",
      "insertions": 9,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/el2_setup.h",
      "insertions": 99,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/esr.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/kvm_arm.h",
      "insertions": 20,
      "deletions": 3
    },
    {
      "file": "arch/arm64/include/asm/kvm_emulate.h",
      "insertions": 66,
      "deletions": 4
    },
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "insertions": 53,
      "deletions": 14
    },
    {
      "file": "arch/arm64/include/asm/kvm_hyp.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/kvm_mmu.h",
      "insertions": 12,
      "deletions": 3
    },
    {
      "file": "arch/arm64/include/asm/kvm_nested.h",
      "insertions": 20,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/kvm_pgtable.h",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/sysreg.h",
      "insertions": 37,
      "deletions": 2
    },
    {
      "file": "arch/arm64/include/uapi/asm/kvm.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kernel/cacheinfo.c",
      "insertions": 0,
      "deletions": 5
    },
    {
      "file": "arch/arm64/kernel/cpufeature.c",
      "insertions": 25,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kernel/hyp-stub.S",
      "insertions": 2,
      "deletions": 84
    },
    {
      "file": "arch/arm64/kvm/Kconfig",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/Makefile",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/arch_timer.c",
      "insertions": 60,
      "deletions": 46
    },
    {
      "file": "arch/arm64/kvm/arm.c",
      "insertions": 60,
      "deletions": 49
    },
    {
      "file": "arch/arm64/kvm/emulate-nested.c",
      "insertions": 203,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/fpsimd.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/guest.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/handle_exit.c",
      "insertions": 45,
      "deletions": 2
    },
    {
      "file": "arch/arm64/kvm/hyp/exception.c",
      "insertions": 36,
      "deletions": 12
    },
    {
      "file": "arch/arm64/kvm/hyp/include/hyp/sysreg-sr.h",
      "insertions": 18,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/hyp-init.S",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/sys_regs.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/pgtable.c",
      "insertions": 37,
      "deletions": 6
    },
    {
      "file": "arch/arm64/kvm/hyp/vhe/switch.c",
      "insertions": 25,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/hypercalls.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/inject_fault.c",
      "insertions": 55,
      "deletions": 6
    },
    {
      "file": "arch/arm64/kvm/mmu.c",
      "insertions": 23,
      "deletions": 23
    },
    {
      "file": "arch/arm64/kvm/nested.c",
      "insertions": 161,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/pvtime.c",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "arch/arm64/kvm/reset.c",
      "insertions": 21,
      "deletions": 4
    },
    {
      "file": "arch/arm64/kvm/sys_regs.c",
      "insertions": 350,
      "deletions": 109
    },
    {
      "file": "arch/arm64/kvm/sys_regs.h",
      "insertions": 12,
      "deletions": 2
    },
    {
      "file": "arch/arm64/kvm/trace_arm.h",
      "insertions": 59,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-init.c",
      "insertions": 3,
      "deletions": 18
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-mmio.c",
      "insertions": 8,
      "deletions": 5
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-v3.c",
      "insertions": 5,
      "deletions": 4
    },
    {
      "file": "arch/arm64/kvm/vmid.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "arch/arm64/tools/cpucaps",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/tools/gen-sysreg.awk",
      "insertions": 19,
      "deletions": 1
    },
    {
      "file": "arch/arm64/tools/sysreg",
      "insertions": 17,
      "deletions": 0
    },
    {
      "file": "arch/mips/include/asm/kvm_host.h",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "arch/mips/kvm/Kconfig",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/mips/kvm/Makefile",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/mips/kvm/callback.c",
      "insertions": 0,
      "deletions": 14
    },
    {
      "file": "arch/mips/kvm/mips.c",
      "insertions": 7,
      "deletions": 27
    },
    {
      "file": "arch/mips/kvm/vz.c",
      "insertions": 4,
      "deletions": 3
    },
    {
      "file": "arch/powerpc/include/asm/kvm_host.h",
      "insertions": 0,
      "deletions": 3
    },
    {
      "file": "arch/powerpc/include/asm/kvm_ppc.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kvm/book3s.c",
      "insertions": 1,
      "deletions": 11
    },
    {
      "file": "arch/powerpc/kvm/booke.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kvm/e500.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "arch/powerpc/kvm/e500mc.c",
      "insertions": 6,
      "deletions": 2
    },
    {
      "file": "arch/powerpc/kvm/powerpc.c",
      "insertions": 0,
      "deletions": 20
    },
    {
      "file": "arch/riscv/include/asm/kvm_host.h",
      "insertions": 7,
      "deletions": 4
    },
    {
      "file": "arch/riscv/include/asm/kvm_vcpu_pmu.h",
      "insertions": 107,
      "deletions": 0
    },
    {
      "file": "arch/riscv/include/asm/kvm_vcpu_sbi.h",
      "insertions": 11,
      "deletions": 2
    },
    {
      "file": "arch/riscv/include/asm/sbi.h",
      "insertions": 5,
      "deletions": 2
    },
    {
      "file": "arch/riscv/kvm/Kconfig",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/riscv/kvm/Makefile",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/riscv/kvm/main.c",
      "insertions": 4,
      "deletions": 22
    },
    {
      "file": "arch/riscv/kvm/mmu.c",
      "insertions": 10,
      "deletions": 10
    },
    {
      "file": "arch/riscv/kvm/tlb.c",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "arch/riscv/kvm/vcpu.c",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "arch/riscv/kvm/vcpu_exit.c",
      "insertions": 9,
      "deletions": 0
    },
    {
      "file": "arch/riscv/kvm/vcpu_insn.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "arch/riscv/kvm/vcpu_pmu.c",
      "insertions": 633,
      "deletions": 0
    },
    {
      "file": "arch/riscv/kvm/vcpu_sbi.c",
      "insertions": 35,
      "deletions": 37
    },
    {
      "file": "arch/riscv/kvm/vcpu_sbi_base.c",
      "insertions": 14,
      "deletions": 13
    },
    {
      "file": "arch/riscv/kvm/vcpu_sbi_hsm.c",
      "insertions": 14,
      "deletions": 14
    },
    {
      "file": "arch/riscv/kvm/vcpu_sbi_pmu.c",
      "insertions": 86,
      "deletions": 0
    },
    {
      "file": "arch/riscv/kvm/vcpu_sbi_replace.c",
      "insertions": 27,
      "deletions": 23
    },
    {
      "file": "arch/riscv/kvm/vcpu_sbi_v01.c",
      "insertions": 7,
      "deletions": 10
    },
    {
      "file": "arch/riscv/kvm/vmid.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/s390/include/asm/kvm_host.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/s390/kvm/gaccess.c",
      "insertions": 109,
      "deletions": 0
    },
    {
      "file": "arch/s390/kvm/gaccess.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/s390/kvm/interrupt.c",
      "insertions": 8,
      "deletions": 5
    },
    {
      "file": "arch/s390/kvm/kvm-s390.c",
      "insertions": 208,
      "deletions": 140
    },
    {
      "file": "arch/s390/kvm/kvm-s390.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/s390/kvm/pci.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/s390/kvm/pci.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/x86/events/intel/core.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/events/intel/ds.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "arch/x86/include/asm/cpufeatures.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/x86/include/asm/hyperv-tlfs.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/x86/include/asm/idtentry.h",
      "insertions": 6,
      "deletions": 10
    },
    {
      "file": "arch/x86/include/asm/kvm-x86-ops.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/x86/include/asm/kvm_host.h",
      "insertions": 71,
      "deletions": 38
    },
    {
      "file": "arch/x86/include/asm/reboot.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/x86/include/asm/virtext.h",
      "insertions": 15,
      "deletions": 1
    },
    {
      "file": "arch/x86/include/asm/xen/hypervisor.h",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "arch/x86/include/uapi/asm/kvm.h",
      "insertions": 32,
      "deletions": 2
    },
    {
      "file": "arch/x86/kernel/cpu/mshyperv.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/x86/kernel/crash.c",
      "insertions": 1,
      "deletions": 16
    },
    {
      "file": "arch/x86/kernel/nmi.c",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "arch/x86/kernel/reboot.c",
      "insertions": 64,
      "deletions": 24
    },
    {
      "file": "arch/x86/kernel/smp.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "arch/x86/kvm/Kconfig",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/cpuid.c",
      "insertions": 28,
      "deletions": 15
    },
    {
      "file": "arch/x86/kvm/debugfs.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/emulate.c",
      "insertions": 9,
      "deletions": 9
    },
    {
      "file": "arch/x86/kvm/hyperv.c",
      "insertions": 63,
      "deletions": 22
    },
    {
      "file": "arch/x86/kvm/hyperv.h",
      "insertions": 27,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/i8254.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/i8259.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/ioapic.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/irq.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/irq_comm.c",
      "insertions": 4,
      "deletions": 3
    },
    {
      "file": "arch/x86/kvm/kvm_cache_regs.h",
      "insertions": 12,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/kvm_emulate.h",
      "insertions": 2,
      "deletions": 5
    },
    {
      "file": "arch/x86/kvm/kvm_onhyperv.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/lapic.c",
      "insertions": 296,
      "deletions": 108
    },
    {
      "file": "arch/x86/kvm/lapic.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/mmu.h",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "arch/x86/kvm/mmu/mmu.c",
      "insertions": 203,
      "deletions": 117
    },
    {
      "file": "arch/x86/kvm/mmu/mmu_internal.h",
      "insertions": 21,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/mmu/page_track.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/mmu/paging_tmpl.h",
      "insertions": 7,
      "deletions": 18
    },
    {
      "file": "arch/x86/kvm/mmu/spte.c",
      "insertions": 5,
      "deletions": 5
    },
    {
      "file": "arch/x86/kvm/mmu/spte.h",
      "insertions": 10,
      "deletions": 10
    },
    {
      "file": "arch/x86/kvm/mmu/tdp_iter.c",
      "insertions": 4,
      "deletions": 8
    },
    {
      "file": "arch/x86/kvm/mmu/tdp_mmu.c",
      "insertions": 4,
      "deletions": 16
    },
    {
      "file": "arch/x86/kvm/mmu/tdp_mmu.h",
      "insertions": 3,
      "deletions": 22
    },
    {
      "file": "arch/x86/kvm/mtrr.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/pmu.c",
      "insertions": 238,
      "deletions": 52
    },
    {
      "file": "arch/x86/kvm/pmu.h",
      "insertions": 6,
      "deletions": 7
    },
    {
      "file": "arch/x86/kvm/reverse_cpuid.h",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/smm.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/svm/avic.c",
      "insertions": 167,
      "deletions": 207
    },
    {
      "file": "arch/x86/kvm/svm/nested.c",
      "insertions": 2,
      "deletions": 3
    },
    {
      "file": "arch/x86/kvm/svm/pmu.c",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/svm/sev.c",
      "insertions": 4,
      "deletions": 3
    },
    {
      "file": "arch/x86/kvm/svm/svm.c",
      "insertions": 75,
      "deletions": 56
    },
    {
      "file": "arch/x86/kvm/svm/svm.h",
      "insertions": 43,
      "deletions": 15
    },
    {
      "file": "arch/x86/kvm/svm/svm_onhyperv.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/svm/svm_onhyperv.h",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "arch/x86/kvm/vmx/capabilities.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/vmx/hyperv.c",
      "insertions": 68,
      "deletions": 19
    },
    {
      "file": "arch/x86/kvm/vmx/hyperv.h",
      "insertions": 89,
      "deletions": 39
    },
    {
      "file": "arch/x86/kvm/vmx/nested.c",
      "insertions": 10,
      "deletions": 14
    },
    {
      "file": "arch/x86/kvm/vmx/pmu_intel.c",
      "insertions": 17,
      "deletions": 11
    },
    {
      "file": "arch/x86/kvm/vmx/posted_intr.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/vmx/sgx.c",
      "insertions": 3,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/vmx/vmcs.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/vmx/vmcs12.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/vmx/vmenter.S",
      "insertions": 44,
      "deletions": 36
    },
    {
      "file": "arch/x86/kvm/vmx/vmx.c",
      "insertions": 328,
      "deletions": 296
    },
    {
      "file": "arch/x86/kvm/vmx/vmx.h",
      "insertions": 8,
      "deletions": 10
    },
    {
      "file": "arch/x86/kvm/vmx/vmx_ops.h",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "insertions": 310,
      "deletions": 247
    },
    {
      "file": "arch/x86/kvm/x86.h",
      "insertions": 15,
      "deletions": 3
    },
    {
      "file": "arch/x86/kvm/xen.c",
      "insertions": 27,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/xen.h",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "drivers/irqchip/irq-apple-aic.c",
      "insertions": 40,
      "deletions": 13
    },
    {
      "file": "drivers/perf/riscv_pmu_sbi.c",
      "insertions": 57,
      "deletions": 7
    },
    {
      "file": "drivers/s390/virtio/virtio_ccw.c",
      "insertions": 24,
      "deletions": 22
    },
    {
      "file": "include/kvm/arm_arch_timer.h",
      "insertions": 5,
      "deletions": 1
    },
    {
      "file": "include/kvm/arm_vgic.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "include/linux/cpuhotplug.h",
      "insertions": 1,
      "deletions": 4
    },
    {
      "file": "include/linux/kvm_host.h",
      "insertions": 8,
      "deletions": 11
    },
    {
      "file": "include/linux/kvm_types.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "include/linux/perf/riscv_pmu.h",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "include/uapi/linux/kvm.h",
      "insertions": 9,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/Makefile",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/aarch64/page_fault_test.c",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "tools/testing/selftests/kvm/config",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/include/x86_64/hyperv.h",
      "insertions": 102,
      "deletions": 47
    },
    {
      "file": "tools/testing/selftests/kvm/include/x86_64/processor.h",
      "insertions": 27,
      "deletions": 4
    },
    {
      "file": "tools/testing/selftests/kvm/kvm_binary_stats_test.c",
      "insertions": 10,
      "deletions": 11
    },
    {
      "file": "tools/testing/selftests/kvm/lib/elf.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/lib/guest_modes.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "tools/testing/selftests/kvm/lib/kvm_util.c",
      "insertions": 1,
      "deletions": 3
    },
    {
      "file": "tools/testing/selftests/kvm/lib/x86_64/processor.c",
      "insertions": 20,
      "deletions": 26
    },
    {
      "file": "tools/testing/selftests/kvm/memslot_perf_test.c",
      "insertions": 1,
      "deletions": 4
    },
    {
      "file": "tools/testing/selftests/kvm/s390x/memop.c",
      "insertions": 524,
      "deletions": 148
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/exit_on_emulation_failure_test.c",
      "insertions": 0,
      "deletions": 3
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/fix_hypercall_test.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/hyperv_clock.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/hyperv_extended_hypercalls.c",
      "insertions": 97,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/hyperv_features.c",
      "insertions": 207,
      "deletions": 132
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/mmio_warning_test.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/pmu_event_filter_test.c",
      "insertions": 378,
      "deletions": 7
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/tsc_msrs_test.c",
      "insertions": 12,
      "deletions": 4
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/vmx_exception_with_invalid_guest_state.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/xapic_state_test.c",
      "insertions": 55,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/xen_shinfo_test.c",
      "insertions": 6,
      "deletions": 9
    },
    {
      "file": "virt/kvm/Kconfig",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "virt/kvm/coalesced_mmio.c",
      "insertions": 5,
      "deletions": 3
    },
    {
      "file": "virt/kvm/kvm_main.c",
      "insertions": 156,
      "deletions": 141
    }
  ],
  "total_insertions": 7274,
  "total_deletions": 2928,
  "total_changes": 10202,
  "parents": [
    "01687e7c935ef70eca69ea2d468020bc93e898dc",
    "45dd9bc75d9adc9483f0c7d662ba6e73ed698a0b"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "Inject"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/arm64/include/asm/el2_setup.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kernel/cacheinfo.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/asm/sysreg.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/tools/cpucaps",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/tools/gen-sysreg.awk",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kernel/cpufeature.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/cpu/mshyperv.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/tools/sysreg",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/riscv/kvm/tlb.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/include/asm/cpufeatures.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/include/asm/hyperv-tlfs.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/events/intel/ds.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "MAINTAINERS",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/pmu.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/nmi.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/cpuid.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/reverse_cpuid.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/events/intel/core.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/emulate.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/svm/svm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/cpuhotplug.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/irqchip/irq-apple-aic.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/perf/riscv_pmu_sbi.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}