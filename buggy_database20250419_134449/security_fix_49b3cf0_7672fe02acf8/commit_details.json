{
  "hash": "49b3cf035edc5d7deb3ad1bf6805ce456ababc5b",
  "hash_short": "49b3cf03",
  "subject": "kasan: arm64: set TCR_EL1.TBID1 when enabled",
  "body": "On hardware supporting pointer authentication, we previously ended up\nenabling TBI on instruction accesses when tag-based ASAN was enabled,\nbut this was costing us 8 bits of PAC entropy, which was unnecessary\nsince tag-based ASAN does not require TBI on instruction accesses. Get\nthem back by setting TCR_EL1.TBID1.\n\nSigned-off-by: Peter Collingbourne <pcc@google.com>\nReviewed-by: Andrey Konovalov <andreyknvl@google.com>\nLink: https://linux-review.googlesource.com/id/I3dded7824be2e70ea64df0aabab9598d5aebfcc4\nLink: https://lore.kernel.org/r/20f64e26fc8a1309caa446fffcb1b4e2fe9e229f.1605952129.git.pcc@google.com\nSigned-off-by: Catalin Marinas <catalin.marinas@arm.com>",
  "full_message": "kasan: arm64: set TCR_EL1.TBID1 when enabled\n\nOn hardware supporting pointer authentication, we previously ended up\nenabling TBI on instruction accesses when tag-based ASAN was enabled,\nbut this was costing us 8 bits of PAC entropy, which was unnecessary\nsince tag-based ASAN does not require TBI on instruction accesses. Get\nthem back by setting TCR_EL1.TBID1.\n\nSigned-off-by: Peter Collingbourne <pcc@google.com>\nReviewed-by: Andrey Konovalov <andreyknvl@google.com>\nLink: https://linux-review.googlesource.com/id/I3dded7824be2e70ea64df0aabab9598d5aebfcc4\nLink: https://lore.kernel.org/r/20f64e26fc8a1309caa446fffcb1b4e2fe9e229f.1605952129.git.pcc@google.com\nSigned-off-by: Catalin Marinas <catalin.marinas@arm.com>",
  "author_name": "Peter Collingbourne",
  "author_email": "pcc@google.com",
  "author_date": "Sat Nov 21 01:59:02 2020 -0800",
  "author_date_iso": "2020-11-21T01:59:02-08:00",
  "committer_name": "Catalin Marinas",
  "committer_email": "catalin.marinas@arm.com",
  "committer_date": "Wed Nov 25 16:53:19 2020 +0000",
  "committer_date_iso": "2020-11-25T16:53:19+00:00",
  "files_changed": [
    "arch/arm64/include/asm/pgtable-hwdef.h",
    "arch/arm64/mm/proc.S"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "arch/arm64/include/asm/pgtable-hwdef.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/mm/proc.S",
      "insertions": 1,
      "deletions": 1
    }
  ],
  "total_insertions": 2,
  "total_deletions": 1,
  "total_changes": 3,
  "parents": [
    "739003c6428387432d42b9b80be185cde93978aa"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/arm64/include/asm/pgtable-hwdef.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/mm/proc.S",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}