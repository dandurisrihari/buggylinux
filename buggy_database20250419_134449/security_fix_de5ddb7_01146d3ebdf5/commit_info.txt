Commit Hash: de5ddb7d44347ad8b00533c1850a4e2e636a1ce9
Subject: PCI: hv: Use vmbus_requestor to generate transaction IDs for VMbus hardening


Security Keywords:
- hardening

Full commit message:
PCI: hv: Use vmbus_requestor to generate transaction IDs for VMbus hardening

Currently, pointers to guest memory are passed to Hyper-V as transaction
IDs in hv_pci.  In the face of errors or malicious behavior in Hyper-V,
hv_pci should not expose or trust the transaction IDs returned by
Hyper-V to be valid guest memory addresses.  Instead, use small integers
generated by vmbus_requestor as request (transaction) IDs.

Suggested-by: Michael Kelley <mikelley@microsoft.com>
Signed-off-by: Andrea Parri (Microsoft) <parri.andrea@gmail.com>
Reviewed-by: Michael Kelley <mikelley@microsoft.com>
Link: https://lore.kernel.org/r/20220419122325.10078-3-parri.andrea@gmail.com
Signed-off-by: Wei Liu <wei.liu@kernel.org>

Metadata:
Author: Andrea Parri (Microsoft) <parri.andrea@gmail.com>
Author Date: Tue Apr 19 14:23:21 2022 +0200
Committer: Wei Liu <wei.liu@kernel.org>
Commit Date: Mon Apr 25 15:51:12 2022 +0000

Files Changed: 1
Lines Added: 29
Lines Removed: 10
Total Changes: 39
