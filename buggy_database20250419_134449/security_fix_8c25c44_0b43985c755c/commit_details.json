{
  "hash": "8c25c4476496b7136767c4023d1c08990167eaa0",
  "hash_short": "8c25c447",
  "subject": "Merge tag 'perf-tools-fixes-for-v5.14-2021-07-18' of git://git.kernel.org/pub/scm/linux/kernel/git/acme/linux",
  "body": "Pull perf tools fixes from Arnaldo Carvalho de Melo:\n\n - Skip invalid hybrid PMU on hybrid systems when the atom (little) CPUs\n   are offlined.\n\n - Fix 'perf test' problems related to the recently added hybrid\n   (BIG/little) code.\n\n - Split ARM's coresight (hw tracing) decode by aux records to avoid\n   fatal decoding errors.\n\n - Fix add event failure in 'perf probe' when running 32-bit perf in a\n   64-bit kernel.\n\n - Fix 'perf sched record' failure when CONFIG_SCHEDSTATS is not set.\n\n - Fix memory and refcount leaks detected by ASAn when running 'perf\n   test', should be clean of warnings now.\n\n - Remove broken definition of __LITTLE_ENDIAN from tools'\n   linux/kconfig.h, which was breaking the build in some systems.\n\n - Cast PTHREAD_STACK_MIN to int as it may turn into 'long\n   sysconf(__SC_THREAD_STACK_MIN_VALUE), breaking the build in some\n   systems.\n\n - Fix libperf build error with LIBPFM4=1.\n\n - Sync UAPI files changed by the memfd_secret new syscall.\n\n* tag 'perf-tools-fixes-for-v5.14-2021-07-18' of git://git.kernel.org/pub/scm/linux/kernel/git/acme/linux: (35 commits)\n  perf sched: Fix record failure when CONFIG_SCHEDSTATS is not set\n  perf probe: Fix add event failure when running 32-bit perf in a 64-bit kernel\n  perf data: Close all files in close_dir()\n  perf probe-file: Delete namelist in del_events() on the error path\n  perf test bpf: Free obj_buf\n  perf trace: Free strings in trace__parse_events_option()\n  perf trace: Free syscall tp fields in evsel->priv\n  perf trace: Free syscall->arg_fmt\n  perf trace: Free malloc'd trace fields on exit\n  perf lzma: Close lzma stream on exit\n  perf script: Fix memory 'threads' and 'cpus' leaks on exit\n  perf script: Release zstd data\n  perf session: Cleanup trace_event\n  perf inject: Close inject.output on exit\n  perf report: Free generated help strings for sort option\n  perf env: Fix memory leak of cpu_pmu_caps\n  perf test maps__merge_in: Fix memory leak of maps\n  perf dso: Fix memory leak in dso__new_map()\n  perf test event_update: Fix memory leak of unit\n  perf test event_update: Fix memory leak of evlist\n  ...",
  "full_message": "Merge tag 'perf-tools-fixes-for-v5.14-2021-07-18' of git://git.kernel.org/pub/scm/linux/kernel/git/acme/linux\n\nPull perf tools fixes from Arnaldo Carvalho de Melo:\n\n - Skip invalid hybrid PMU on hybrid systems when the atom (little) CPUs\n   are offlined.\n\n - Fix 'perf test' problems related to the recently added hybrid\n   (BIG/little) code.\n\n - Split ARM's coresight (hw tracing) decode by aux records to avoid\n   fatal decoding errors.\n\n - Fix add event failure in 'perf probe' when running 32-bit perf in a\n   64-bit kernel.\n\n - Fix 'perf sched record' failure when CONFIG_SCHEDSTATS is not set.\n\n - Fix memory and refcount leaks detected by ASAn when running 'perf\n   test', should be clean of warnings now.\n\n - Remove broken definition of __LITTLE_ENDIAN from tools'\n   linux/kconfig.h, which was breaking the build in some systems.\n\n - Cast PTHREAD_STACK_MIN to int as it may turn into 'long\n   sysconf(__SC_THREAD_STACK_MIN_VALUE), breaking the build in some\n   systems.\n\n - Fix libperf build error with LIBPFM4=1.\n\n - Sync UAPI files changed by the memfd_secret new syscall.\n\n* tag 'perf-tools-fixes-for-v5.14-2021-07-18' of git://git.kernel.org/pub/scm/linux/kernel/git/acme/linux: (35 commits)\n  perf sched: Fix record failure when CONFIG_SCHEDSTATS is not set\n  perf probe: Fix add event failure when running 32-bit perf in a 64-bit kernel\n  perf data: Close all files in close_dir()\n  perf probe-file: Delete namelist in del_events() on the error path\n  perf test bpf: Free obj_buf\n  perf trace: Free strings in trace__parse_events_option()\n  perf trace: Free syscall tp fields in evsel->priv\n  perf trace: Free syscall->arg_fmt\n  perf trace: Free malloc'd trace fields on exit\n  perf lzma: Close lzma stream on exit\n  perf script: Fix memory 'threads' and 'cpus' leaks on exit\n  perf script: Release zstd data\n  perf session: Cleanup trace_event\n  perf inject: Close inject.output on exit\n  perf report: Free generated help strings for sort option\n  perf env: Fix memory leak of cpu_pmu_caps\n  perf test maps__merge_in: Fix memory leak of maps\n  perf dso: Fix memory leak in dso__new_map()\n  perf test event_update: Fix memory leak of unit\n  perf test event_update: Fix memory leak of evlist\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Sun Jul 18 12:20:27 2021 -0700",
  "author_date_iso": "2021-07-18T12:20:27-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Sun Jul 18 12:20:27 2021 -0700",
  "committer_date_iso": "2021-07-18T12:20:27-07:00",
  "files_changed": [],
  "files_changed_count": 0,
  "stats": [
    {
      "file": "tools/arch/arm64/include/uapi/asm/unistd.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/include/linux/kconfig.h",
      "insertions": 0,
      "deletions": 6
    },
    {
      "file": "tools/include/uapi/asm-generic/unistd.h",
      "insertions": 6,
      "deletions": 1
    },
    {
      "file": "tools/perf/arch/x86/entry/syscalls/syscall_64.tbl",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/perf/builtin-inject.c",
      "insertions": 9,
      "deletions": 4
    },
    {
      "file": "tools/perf/builtin-report.c",
      "insertions": 22,
      "deletions": 11
    },
    {
      "file": "tools/perf/builtin-sched.c",
      "insertions": 30,
      "deletions": 5
    },
    {
      "file": "tools/perf/builtin-script.c",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "tools/perf/builtin-stat.c",
      "insertions": 0,
      "deletions": 3
    },
    {
      "file": "tools/perf/builtin-trace.c",
      "insertions": 43,
      "deletions": 2
    },
    {
      "file": "tools/perf/tests/bpf.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "tools/perf/tests/event_update.c",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "tools/perf/tests/evsel-roundtrip-name.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "tools/perf/tests/maps.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "tools/perf/tests/parse-events.c",
      "insertions": 10,
      "deletions": 6
    },
    {
      "file": "tools/perf/tests/perf-time-to-tsc.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "tools/perf/tests/topology.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/perf/util/cs-etm.c",
      "insertions": 167,
      "deletions": 1
    },
    {
      "file": "tools/perf/util/data.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "tools/perf/util/dso.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "tools/perf/util/dwarf-aux.c",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "tools/perf/util/dwarf-aux.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "tools/perf/util/env.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "tools/perf/util/lzma.c",
      "insertions": 5,
      "deletions": 3
    },
    {
      "file": "tools/perf/util/map.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "tools/perf/util/pfm.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "tools/perf/util/pmu.c",
      "insertions": 8,
      "deletions": 1
    },
    {
      "file": "tools/perf/util/probe-event.c",
      "insertions": 26,
      "deletions": 27
    },
    {
      "file": "tools/perf/util/probe-event.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "tools/perf/util/probe-file.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "tools/perf/util/probe-finder.c",
      "insertions": 7,
      "deletions": 8
    },
    {
      "file": "tools/perf/util/probe-finder.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "tools/perf/util/session.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/perf/util/sort.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "tools/perf/util/sort.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "tools/perf/util/stat-display.c",
      "insertions": 13,
      "deletions": 1
    }
  ],
  "total_insertions": 391,
  "total_deletions": 98,
  "total_changes": 489,
  "parents": [
    "f0eb870a84224c9bfde0dc547927e8df1be4267c",
    "b0f008551f0bf4d5f6db9b5f0e071b02790d6a2e"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "inject"
    ]
  },
  "fix_type": "security",
  "file_results": []
}