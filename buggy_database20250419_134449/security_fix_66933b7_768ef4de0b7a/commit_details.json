{
  "hash": "66933b78e3204057bfc26343afcd0d463c0e8e55",
  "hash_short": "66933b78",
  "subject": "KVM: s390: simplify in-kernel program irq injection",
  "body": "The main reason to keep program injection in kernel separated until now\nwas that we were able to do some checking, if really only the owning\nthread injects program interrupts (via waitqueue_active(li->wq)).\n\nThis BUG_ON was never triggered and the chances of really hitting it, if\nanother thread injected a program irq to another vcpu, were very small.\n\nLet's drop this check and turn kvm_s390_inject_program_int() and\nkvm_s390_inject_prog_irq() into simple inline functions that makes use of\nkvm_s390_inject_vcpu().\n\n__must_check can be dropped as they are implicitely given by\nkvm_s390_inject_vcpu(), to avoid ugly long function prototypes.\n\nReviewed-by: Jens Freimann <jfrei@linux.vnet.ibm.com>\nAcked-by: Cornelia Huck <cornelia.huck@de.ibm.com>\nReviewed-by: Christian Borntraeger <borntraeger@de.ibm.com>\nSigned-off-by: David Hildenbrand <dahi@linux.vnet.ibm.com>\nSigned-off-by: Christian Borntraeger <borntraeger@de.ibm.com>",
  "full_message": "KVM: s390: simplify in-kernel program irq injection\n\nThe main reason to keep program injection in kernel separated until now\nwas that we were able to do some checking, if really only the owning\nthread injects program interrupts (via waitqueue_active(li->wq)).\n\nThis BUG_ON was never triggered and the chances of really hitting it, if\nanother thread injected a program irq to another vcpu, were very small.\n\nLet's drop this check and turn kvm_s390_inject_program_int() and\nkvm_s390_inject_prog_irq() into simple inline functions that makes use of\nkvm_s390_inject_vcpu().\n\n__must_check can be dropped as they are implicitely given by\nkvm_s390_inject_vcpu(), to avoid ugly long function prototypes.\n\nReviewed-by: Jens Freimann <jfrei@linux.vnet.ibm.com>\nAcked-by: Cornelia Huck <cornelia.huck@de.ibm.com>\nReviewed-by: Christian Borntraeger <borntraeger@de.ibm.com>\nSigned-off-by: David Hildenbrand <dahi@linux.vnet.ibm.com>\nSigned-off-by: Christian Borntraeger <borntraeger@de.ibm.com>",
  "author_name": "David Hildenbrand",
  "author_email": "dahi@linux.vnet.ibm.com",
  "author_date": "Thu Nov 20 13:49:32 2014 +0100",
  "author_date_iso": "2014-11-20T13:49:32+01:00",
  "committer_name": "Christian Borntraeger",
  "committer_email": "borntraeger@de.ibm.com",
  "committer_date": "Tue Oct 13 15:50:34 2015 +0200",
  "committer_date_iso": "2015-10-13T15:50:34+02:00",
  "files_changed": [
    "arch/s390/kvm/interrupt.c",
    "arch/s390/kvm/kvm-s390.h"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "arch/s390/kvm/interrupt.c",
      "insertions": 0,
      "deletions": 28
    },
    {
      "file": "arch/s390/kvm/kvm-s390.h",
      "insertions": 20,
      "deletions": 4
    }
  ],
  "total_insertions": 20,
  "total_deletions": 32,
  "total_changes": 52,
  "parents": [
    "4d32ad6becf0baf09f38707f0aff42c0f4367a99"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/s390/kvm/interrupt.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/s390/kvm/kvm-s390.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}