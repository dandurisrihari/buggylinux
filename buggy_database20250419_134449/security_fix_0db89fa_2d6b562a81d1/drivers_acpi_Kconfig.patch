commit 0db89fa243e5edc5de38c88b369e4c3755c5fb74
Author: Chen Yu <yu.c.chen@intel.com>
Date:   Wed Dec 22 12:31:41 2021 +0800

    ACPI: Introduce Platform Firmware Runtime Update device driver
    
    Introduce the pfr_update driver which can be used for Platform Firmware
    Runtime code injection and driver update [1].
    
    The user is expected to provide the EFI capsule, and pass it to the
    driver by writing the capsule to a device special file. The capsule
    is transferred by the driver to the platform firmware with the help
    of an ACPI _DSM method under the special ACPI Platform Firmware
    Runtime Update device (INTC1080), and the actual firmware update is
    carried out by the low-level Management Mode code in the platform
    firmware.
    
    This change allows certain pieces of the platform firmware to be
    updated on the fly while the system is running (runtime) without the
    need to restart it, which is key in the cases when the system needs to
    be available 100% of the time and it cannot afford the downtime related
    to restarting it, or when the work carried out by the system is
    particularly important, so it cannot be interrupted, and it is not
    practical to wait until it is complete.
    
    Link: https://uefi.org/sites/default/files/resources/Intel_MM_OS_Interface_Spec_Rev100.pdf # [1]
    Tested-by: Hongyu Ning <hongyu.ning@intel.com>
    Signed-off-by: Chen Yu <yu.c.chen@intel.com>
    [ rjw: Subject and changelog edits ]
    Signed-off-by: Rafael J. Wysocki <rafael.j.wysocki@intel.com>

diff --git a/drivers/acpi/Kconfig b/drivers/acpi/Kconfig
index cdbdf68bd98f..d0b3ca9d4a97 100644
--- a/drivers/acpi/Kconfig
+++ b/drivers/acpi/Kconfig
@@ -517,6 +517,24 @@ config ACPI_CONFIGFS
 	  userspace. The configurable ACPI groups will be visible under
 	  /config/acpi, assuming configfs is mounted under /config.
 
+config ACPI_PFRUT
+	tristate "ACPI Platform Firmware Runtime Update and Telemetry"
+	depends on 64BIT
+	help
+	  This mechanism allows certain pieces of the platform firmware
+	  to be updated on the fly while the system is running (runtime)
+	  without the need to restart it, which is key in the cases when
+	  the system needs to be available 100% of the time and it cannot
+	  afford the downtime related to restarting it, or when the work
+	  carried out by the system is particularly important, so it cannot
+	  be interrupted, and it is not practical to wait until it is complete.
+
+	  The existing firmware code can be modified (driver update) or
+	  extended by adding new code to the firmware (code injection).
+
+	  To compile this driver as module, choose M here:
+	  the module will be called pfr_update.
+
 if ARM64
 source "drivers/acpi/arm64/Kconfig"