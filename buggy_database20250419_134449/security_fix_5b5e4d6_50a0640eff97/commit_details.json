{
  "hash": "5b5e4d623ec8a34689df98e42d038a3b594d2ff9",
  "hash_short": "5b5e4d62",
  "subject": "x86/speculation/l1tf: Drop the swap storage limit restriction when l1tf=off",
  "body": "Swap storage is restricted to max_swapfile_size (~16TB on x86_64) whenever\nthe system is deemed affected by L1TF vulnerability. Even though the limit\nis quite high for most deployments it seems to be too restrictive for\ndeployments which are willing to live with the mitigation disabled.\n\nWe have a customer to deploy 8x 6,4TB PCIe/NVMe SSD swap devices which is\nclearly out of the limit.\n\nDrop the swap restriction when l1tf=off is specified. It also doesn't make\nmuch sense to warn about too much memory for the l1tf mitigation when it is\nforcefully disabled by the administrator.\n\n[ tglx: Folded the documentation delta change ]\n\nFixes: 377eeaa8e11f (\"x86/speculation/l1tf: Limit swap file size to MAX_PA/2\")\nSigned-off-by: Michal Hocko <mhocko@suse.com>\nSigned-off-by: Thomas Gleixner <tglx@linutronix.de>\nReviewed-by: Pavel Tatashin <pasha.tatashin@soleen.com>\nReviewed-by: Andi Kleen <ak@linux.intel.com>\nAcked-by: Jiri Kosina <jkosina@suse.cz>\nCc: Linus Torvalds <torvalds@linux-foundation.org>\nCc: Dave Hansen <dave.hansen@intel.com>\nCc: Andi Kleen <ak@linux.intel.com>\nCc: Borislav Petkov <bp@suse.de>\nCc: <linux-mm@kvack.org>\nCc: stable@vger.kernel.org\nLink: https://lkml.kernel.org/r/20181113184910.26697-1-mhocko@kernel.org",
  "full_message": "x86/speculation/l1tf: Drop the swap storage limit restriction when l1tf=off\n\nSwap storage is restricted to max_swapfile_size (~16TB on x86_64) whenever\nthe system is deemed affected by L1TF vulnerability. Even though the limit\nis quite high for most deployments it seems to be too restrictive for\ndeployments which are willing to live with the mitigation disabled.\n\nWe have a customer to deploy 8x 6,4TB PCIe/NVMe SSD swap devices which is\nclearly out of the limit.\n\nDrop the swap restriction when l1tf=off is specified. It also doesn't make\nmuch sense to warn about too much memory for the l1tf mitigation when it is\nforcefully disabled by the administrator.\n\n[ tglx: Folded the documentation delta change ]\n\nFixes: 377eeaa8e11f (\"x86/speculation/l1tf: Limit swap file size to MAX_PA/2\")\nSigned-off-by: Michal Hocko <mhocko@suse.com>\nSigned-off-by: Thomas Gleixner <tglx@linutronix.de>\nReviewed-by: Pavel Tatashin <pasha.tatashin@soleen.com>\nReviewed-by: Andi Kleen <ak@linux.intel.com>\nAcked-by: Jiri Kosina <jkosina@suse.cz>\nCc: Linus Torvalds <torvalds@linux-foundation.org>\nCc: Dave Hansen <dave.hansen@intel.com>\nCc: Andi Kleen <ak@linux.intel.com>\nCc: Borislav Petkov <bp@suse.de>\nCc: <linux-mm@kvack.org>\nCc: stable@vger.kernel.org\nLink: https://lkml.kernel.org/r/20181113184910.26697-1-mhocko@kernel.org",
  "author_name": "Michal Hocko",
  "author_email": "mhocko@suse.com",
  "author_date": "Tue Nov 13 19:49:10 2018 +0100",
  "author_date_iso": "2018-11-13T19:49:10+01:00",
  "committer_name": "Thomas Gleixner",
  "committer_email": "tglx@linutronix.de",
  "committer_date": "Tue Dec 11 11:46:13 2018 +0100",
  "committer_date_iso": "2018-12-11T11:46:13+01:00",
  "files_changed": [
    "Documentation/admin-guide/kernel-parameters.txt",
    "Documentation/admin-guide/l1tf.rst",
    "arch/x86/kernel/cpu/bugs.c",
    "arch/x86/mm/init.c"
  ],
  "files_changed_count": 4,
  "stats": [
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "Documentation/admin-guide/l1tf.rst",
      "insertions": 5,
      "deletions": 1
    },
    {
      "file": "arch/x86/kernel/cpu/bugs.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "arch/x86/mm/init.c",
      "insertions": 1,
      "deletions": 1
    }
  ],
  "total_insertions": 11,
  "total_deletions": 3,
  "total_changes": 14,
  "parents": [
    "aa77bfb354c495fc4361199e63fc5765b9e1e783"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.0",
    "v5.0-rc1",
    "v5.0-rc2",
    "v5.0-rc3",
    "v5.0-rc4",
    "v5.0-rc5",
    "v5.0-rc6",
    "v5.0-rc7",
    "v5.0-rc8",
    "v5.1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "vulnerability"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "Documentation/admin-guide/l1tf.rst",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/cpu/bugs.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/mm/init.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}