{
  "hash": "086ba2ec163b638abd2a90ef3e8bab0238d02e56",
  "hash_short": "086ba2ec",
  "subject": "Merge tag 'f2fs-for-5.9-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/jaegeuk/f2fs",
  "body": "Pull f2fs updates from Jaegeuk Kim:\n \"In this round, we've added two small interfaces: (a) GC_URGENT_LOW\n  mode for performance and (b) F2FS_IOC_SEC_TRIM_FILE ioctl for\n  security.\n\n  The new GC mode allows Android to run some lower priority GCs in\n  background, while new ioctl discards user information without race\n  condition when the account is removed.\n\n  In addition, some patches were merged to address latency-related\n  issues. We've fixed some compression-related bug fixes as well as edge\n  race conditions.\n\n  Enhancements:\n   - add GC_URGENT_LOW mode in gc_urgent\n   - introduce F2FS_IOC_SEC_TRIM_FILE ioctl\n   - bypass racy readahead to improve read latencies\n   - shrink node_write lock coverage to avoid long latency\n\n  Bug fixes:\n   - fix missing compression flag control, i_size, and mount option\n   - fix deadlock between quota writes and checkpoint\n   - remove inode eviction path in synchronous path to avoid deadlock\n   - fix to wait GCed compressed page writeback\n   - fix a kernel panic in f2fs_is_compressed_page\n   - check page dirty status before writeback\n   - wait page writeback before update in node page write flow\n   - fix a race condition between f2fs_write_end_io and f2fs_del_fsync_node_entry\n\n  We've added some minor sanity checks and refactored trivial code\n  blocks for better readability and debugging information\"\n\n* tag 'f2fs-for-5.9-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/jaegeuk/f2fs: (52 commits)\n  f2fs: prepare a waiter before entering io_schedule\n  f2fs: update_sit_entry: Make the judgment condition of f2fs_bug_on more intuitive\n  f2fs: replace test_and_set/clear_bit() with set/clear_bit()\n  f2fs: make file immutable even if releasing zero compression block\n  f2fs: compress: disable compression mount option if compression is off\n  f2fs: compress: add sanity check during compressed cluster read\n  f2fs: use macro instead of f2fs verity version\n  f2fs: fix deadlock between quota writes and checkpoint\n  f2fs: correct comment of f2fs_exist_written_data\n  f2fs: compress: delay temp page allocation\n  f2fs: compress: fix to update isize when overwriting compressed file\n  f2fs: space related cleanup\n  f2fs: fix use-after-free issue\n  f2fs: Change the type of f2fs_flush_inline_data() to void\n  f2fs: add F2FS_IOC_SEC_TRIM_FILE ioctl\n  f2fs: should avoid inode eviction in synchronous path\n  f2fs: segment.h: delete a duplicated word\n  f2fs: compress: fix to avoid memory leak on cc->cpages\n  f2fs: use generic names for generic ioctls\n  f2fs: don't keep meta inode pages used for compressed block migration\n  ...",
  "full_message": "Merge tag 'f2fs-for-5.9-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/jaegeuk/f2fs\n\nPull f2fs updates from Jaegeuk Kim:\n \"In this round, we've added two small interfaces: (a) GC_URGENT_LOW\n  mode for performance and (b) F2FS_IOC_SEC_TRIM_FILE ioctl for\n  security.\n\n  The new GC mode allows Android to run some lower priority GCs in\n  background, while new ioctl discards user information without race\n  condition when the account is removed.\n\n  In addition, some patches were merged to address latency-related\n  issues. We've fixed some compression-related bug fixes as well as edge\n  race conditions.\n\n  Enhancements:\n   - add GC_URGENT_LOW mode in gc_urgent\n   - introduce F2FS_IOC_SEC_TRIM_FILE ioctl\n   - bypass racy readahead to improve read latencies\n   - shrink node_write lock coverage to avoid long latency\n\n  Bug fixes:\n   - fix missing compression flag control, i_size, and mount option\n   - fix deadlock between quota writes and checkpoint\n   - remove inode eviction path in synchronous path to avoid deadlock\n   - fix to wait GCed compressed page writeback\n   - fix a kernel panic in f2fs_is_compressed_page\n   - check page dirty status before writeback\n   - wait page writeback before update in node page write flow\n   - fix a race condition between f2fs_write_end_io and f2fs_del_fsync_node_entry\n\n  We've added some minor sanity checks and refactored trivial code\n  blocks for better readability and debugging information\"\n\n* tag 'f2fs-for-5.9-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/jaegeuk/f2fs: (52 commits)\n  f2fs: prepare a waiter before entering io_schedule\n  f2fs: update_sit_entry: Make the judgment condition of f2fs_bug_on more intuitive\n  f2fs: replace test_and_set/clear_bit() with set/clear_bit()\n  f2fs: make file immutable even if releasing zero compression block\n  f2fs: compress: disable compression mount option if compression is off\n  f2fs: compress: add sanity check during compressed cluster read\n  f2fs: use macro instead of f2fs verity version\n  f2fs: fix deadlock between quota writes and checkpoint\n  f2fs: correct comment of f2fs_exist_written_data\n  f2fs: compress: delay temp page allocation\n  f2fs: compress: fix to update isize when overwriting compressed file\n  f2fs: space related cleanup\n  f2fs: fix use-after-free issue\n  f2fs: Change the type of f2fs_flush_inline_data() to void\n  f2fs: add F2FS_IOC_SEC_TRIM_FILE ioctl\n  f2fs: should avoid inode eviction in synchronous path\n  f2fs: segment.h: delete a duplicated word\n  f2fs: compress: fix to avoid memory leak on cc->cpages\n  f2fs: use generic names for generic ioctls\n  f2fs: don't keep meta inode pages used for compressed block migration\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Mon Aug 10 18:33:22 2020 -0700",
  "author_date_iso": "2020-08-10T18:33:22-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Mon Aug 10 18:33:22 2020 -0700",
  "committer_date_iso": "2020-08-10T18:33:22-07:00",
  "files_changed": [
    "Documentation/filesystems/f2fs.rst",
    "fs/f2fs/compress.c",
    "fs/f2fs/data.c",
    "fs/f2fs/super.c"
  ],
  "files_changed_count": 4,
  "stats": [
    {
      "file": "Documentation/ABI/testing/sysfs-fs-f2fs",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "Documentation/filesystems/f2fs.rst",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "fs/f2fs/checkpoint.c",
      "insertions": 9,
      "deletions": 6
    },
    {
      "file": "fs/f2fs/compress.c",
      "insertions": 64,
      "deletions": 25
    },
    {
      "file": "fs/f2fs/data.c",
      "insertions": 70,
      "deletions": 23
    },
    {
      "file": "fs/f2fs/debug.c",
      "insertions": 52,
      "deletions": 12
    },
    {
      "file": "fs/f2fs/dir.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/f2fs/extent_cache.c",
      "insertions": 9,
      "deletions": 9
    },
    {
      "file": "fs/f2fs/f2fs.h",
      "insertions": 46,
      "deletions": 35
    },
    {
      "file": "fs/f2fs/file.c",
      "insertions": 229,
      "deletions": 35
    },
    {
      "file": "fs/f2fs/gc.c",
      "insertions": 46,
      "deletions": 29
    },
    {
      "file": "fs/f2fs/inline.c",
      "insertions": 14,
      "deletions": 7
    },
    {
      "file": "fs/f2fs/inode.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "fs/f2fs/namei.c",
      "insertions": 10,
      "deletions": 8
    },
    {
      "file": "fs/f2fs/node.c",
      "insertions": 21,
      "deletions": 17
    },
    {
      "file": "fs/f2fs/recovery.c",
      "insertions": 9,
      "deletions": 3
    },
    {
      "file": "fs/f2fs/segment.c",
      "insertions": 91,
      "deletions": 38
    },
    {
      "file": "fs/f2fs/segment.h",
      "insertions": 7,
      "deletions": 3
    },
    {
      "file": "fs/f2fs/super.c",
      "insertions": 42,
      "deletions": 26
    },
    {
      "file": "fs/f2fs/sysfs.c",
      "insertions": 17,
      "deletions": 6
    },
    {
      "file": "fs/f2fs/verity.c",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "fs/f2fs/xattr.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "include/trace/events/f2fs.h",
      "insertions": 63,
      "deletions": 0
    }
  ],
  "total_insertions": 815,
  "total_deletions": 292,
  "total_changes": 1107,
  "parents": [
    "8c2618a6d0f7b08e2b41575a87cf568745c8860e",
    "828add774f0d2bf930cdeca6c982c1fbcdd846bb"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "bypass"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "Documentation/filesystems/f2fs.rst",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/f2fs/compress.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/f2fs/data.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/f2fs/super.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}