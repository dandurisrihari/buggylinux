{
  "hash": "c9047f533373e934b96d19d6a3d313ca2132fbe5",
  "hash_short": "c9047f53",
  "subject": "KVM: Handle guest page faults when emulating mmio",
  "body": "Usually, guest page faults are detected by the kvm page fault handler,\nwhich detects if they are shadow faults, mmio faults, pagetable faults,\nor normal guest page faults.\n\nHowever, in ceratin circumstances, we can detect a page fault much later.\nOne of these events is the following combination:\n\n- A two memory operand instruction (e.g. movsb) is executed.\n- The first operand is in mmio space (which is the fault reported to kvm)\n- The second operand is in an ummaped address (e.g. a guest page fault)\n\nThe Windows 2000 installer does such an access, an promptly hangs.  Fix\nby adding the missing page fault injection on that path.\n\nSigned-off-by: Avi Kivity <avi@qumranet.com>",
  "full_message": "KVM: Handle guest page faults when emulating mmio\n\nUsually, guest page faults are detected by the kvm page fault handler,\nwhich detects if they are shadow faults, mmio faults, pagetable faults,\nor normal guest page faults.\n\nHowever, in ceratin circumstances, we can detect a page fault much later.\nOne of these events is the following combination:\n\n- A two memory operand instruction (e.g. movsb) is executed.\n- The first operand is in mmio space (which is the fault reported to kvm)\n- The second operand is in an ummaped address (e.g. a guest page fault)\n\nThe Windows 2000 installer does such an access, an promptly hangs.  Fix\nby adding the missing page fault injection on that path.\n\nSigned-off-by: Avi Kivity <avi@qumranet.com>",
  "author_name": "Avi Kivity",
  "author_email": "avi@qumranet.com",
  "author_date": "Tue Apr 17 10:53:22 2007 +0300",
  "author_date_iso": "2007-04-17T10:53:22+03:00",
  "committer_name": "Avi Kivity",
  "committer_email": "avi@qumranet.com",
  "committer_date": "Thu May 3 10:52:29 2007 +0300",
  "committer_date_iso": "2007-05-03T10:52:29+03:00",
  "files_changed": [
    "drivers/kvm/kvm_main.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/kvm/kvm_main.c",
      "insertions": 3,
      "deletions": 1
    }
  ],
  "total_insertions": 3,
  "total_deletions": 1,
  "total_changes": 4,
  "parents": [
    "364b625b561b1dd74e6fa696949ae3de28999a66"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v2.6.22",
    "v2.6.22-rc1",
    "v2.6.22-rc2",
    "v2.6.22-rc3",
    "v2.6.22-rc4",
    "v2.6.22-rc5",
    "v2.6.22-rc6",
    "v2.6.22-rc7",
    "v2.6.23",
    "v2.6.23-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/kvm/kvm_main.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}