Commit Hash: 27f7ad53829f79e799a253285318bff79ece15bd
Subject: ALSA: seq/oss - Fix double-free at error path of snd_seq_oss_open()

CVE Identifiers:
- CVE-2010-3080

Full commit message:
ALSA: seq/oss - Fix double-free at error path of snd_seq_oss_open()

The error handling in snd_seq_oss_open() has several bad codes that
do dereferecing released pointers and double-free of kmalloc'ed data.
The object dp is release in free_devinfo() that is called via
private_free callback.  The rest shouldn't touch this object any more.

The patch changes delete_port() to call kfree() in any case, and gets
rid of unnecessary calls of destructors in snd_seq_oss_open().

Fixes CVE-2010-3080.

Reported-and-tested-by: Tavis Ormandy <taviso@cmpxchg8b.com>
Cc: <stable@kernel.org>
Signed-off-by: Takashi Iwai <tiwai@suse.de>

Metadata:
Author: Takashi Iwai <tiwai@suse.de>
Author Date: Mon Sep 6 09:13:45 2010 +0200
Committer: Takashi Iwai <tiwai@suse.de>
Commit Date: Wed Sep 8 10:45:34 2010 +0200

Files Changed: 1
Lines Added: 4
Lines Removed: 5
Total Changes: 9
