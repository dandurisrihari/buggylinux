Commit Hash: 15f73f5b3e5958f2d169fe13c420eeeeae07bbf2
Subject: blk-mq: move failure injection out of blk_mq_complete_request


Security Keywords:
- injection

Full commit message:
blk-mq: move failure injection out of blk_mq_complete_request

Move the call to blk_should_fake_timeout out of blk_mq_complete_request
and into the drivers, skipping call sites that are obvious error
handlers, and remove the now superflous blk_mq_force_complete_rq helper.
This ensures we don't keep injecting errors into completions that just
terminate the Linux request after the hardware has been reset or the
command has been aborted.

Reviewed-by: Daniel Wagner <dwagner@suse.de>
Signed-off-by: Christoph Hellwig <hch@lst.de>
Signed-off-by: Jens Axboe <axboe@kernel.dk>

Metadata:
Author: Christoph Hellwig <hch@lst.de>
Author Date: Thu Jun 11 08:44:47 2020 +0200
Committer: Jens Axboe <axboe@kernel.dk>
Commit Date: Wed Jun 24 09:15:57 2020 -0600

Files Changed: 19
Lines Added: 61
Lines Removed: 72
Total Changes: 133
