{
  "hash": "9dd6956b38923dc1b7b349ca1eee3c0bb1f0163a",
  "hash_short": "9dd6956b",
  "subject": "Merge tag 'for-6.4/block-2023-04-21' of git://git.kernel.dk/linux",
  "body": "Pull block updates from Jens Axboe:\n\n - drbd patches, bringing us closer to unifying the out-of-tree version\n   and the in tree one (Andreas, Christoph)\n\n - support for auto-quiesce for the s390 dasd driver (Stefan)\n\n - MD pull request via Song:\n      - md/bitmap: Optimal last page size (Jon Derrick)\n      - Various raid10 fixes (Yu Kuai, Li Nan)\n      - md: add error_handlers for raid0 and linear (Mariusz Tkaczyk)\n\n - NVMe pull request via Christoph:\n      - Drop redundant pci_enable_pcie_error_reporting (Bjorn Helgaas)\n      - Validate nvmet module parameters (Chaitanya Kulkarni)\n      - Fence TCP socket on receive error (Chris Leech)\n      - Fix async event trace event (Keith Busch)\n      - Minor cleanups (Chaitanya Kulkarni, zhenwei pi)\n      - Fix and cleanup nvmet Identify handling (Damien Le Moal,\n        Christoph Hellwig)\n      - Fix double blk_mq_complete_request race in the timeout handler\n        (Lei Yin)\n      - Fix irq locking in nvme-fcloop (Ming Lei)\n      - Remove queue mapping helper for rdma devices (Sagi Grimberg)\n\n - use structured request attribute checks for nbd (Jakub)\n\n - fix blk-crypto race conditions between keyslot management (Eric)\n\n - add sed-opal support for reading read locking range attributes\n   (Ondrej)\n\n - make fault injection configurable for null_blk (Akinobu)\n\n - clean up the request insertion API (Christoph)\n\n - clean up the queue running API (Christoph)\n\n - blkg config helper cleanups (Tejun)\n\n - lazy init support for blk-iolatency (Tejun)\n\n - various fixes and tweaks to ublk (Ming)\n\n - remove hybrid polling. It hasn't really been useful since we got\n   async polled IO support, and these days we don't support sync polled\n   IO at all (Keith)\n\n - misc fixes, cleanups, improvements (Zhong, Ondrej, Colin, Chengming,\n   Chaitanya, me)\n\n* tag 'for-6.4/block-2023-04-21' of git://git.kernel.dk/linux: (118 commits)\n  nbd: fix incomplete validation of ioctl arg\n  ublk: don't return 0 in case of any failure\n  sed-opal: geometry feature reporting command\n  null_blk: Always check queue mode setting from configfs\n  block: ublk: switch to ioctl command encoding\n  blk-mq: fix the blk_mq_add_to_requeue_list call in blk_kick_flush\n  block, bfq: Fix division by zero error on zero wsum\n  fault-inject: fix build error when FAULT_INJECTION_CONFIGFS=y and CONFIGFS_FS=m\n  block: store bdev->bd_disk->fops->submit_bio state in bdev\n  block: re-arrange the struct block_device fields for better layout\n  md/raid5: remove unused working_disks variable\n  md/raid10: don't call bio_start_io_acct twice for bio which experienced read error\n  md/raid10: fix memleak of md thread\n  md/raid10: fix memleak for 'conf->bio_split'\n  md/raid10: fix leak of 'r10bio->remaining' for recovery\n  md/raid10: don't BUG_ON() in raise_barrier()\n  md: fix soft lockup in status_resync\n  md: add error_handlers for raid0 and linear\n  md: Use optimal I/O size for last bitmap page\n  md: Fix types in sb writer\n  ...",
  "full_message": "Merge tag 'for-6.4/block-2023-04-21' of git://git.kernel.dk/linux\n\nPull block updates from Jens Axboe:\n\n - drbd patches, bringing us closer to unifying the out-of-tree version\n   and the in tree one (Andreas, Christoph)\n\n - support for auto-quiesce for the s390 dasd driver (Stefan)\n\n - MD pull request via Song:\n      - md/bitmap: Optimal last page size (Jon Derrick)\n      - Various raid10 fixes (Yu Kuai, Li Nan)\n      - md: add error_handlers for raid0 and linear (Mariusz Tkaczyk)\n\n - NVMe pull request via Christoph:\n      - Drop redundant pci_enable_pcie_error_reporting (Bjorn Helgaas)\n      - Validate nvmet module parameters (Chaitanya Kulkarni)\n      - Fence TCP socket on receive error (Chris Leech)\n      - Fix async event trace event (Keith Busch)\n      - Minor cleanups (Chaitanya Kulkarni, zhenwei pi)\n      - Fix and cleanup nvmet Identify handling (Damien Le Moal,\n        Christoph Hellwig)\n      - Fix double blk_mq_complete_request race in the timeout handler\n        (Lei Yin)\n      - Fix irq locking in nvme-fcloop (Ming Lei)\n      - Remove queue mapping helper for rdma devices (Sagi Grimberg)\n\n - use structured request attribute checks for nbd (Jakub)\n\n - fix blk-crypto race conditions between keyslot management (Eric)\n\n - add sed-opal support for reading read locking range attributes\n   (Ondrej)\n\n - make fault injection configurable for null_blk (Akinobu)\n\n - clean up the request insertion API (Christoph)\n\n - clean up the queue running API (Christoph)\n\n - blkg config helper cleanups (Tejun)\n\n - lazy init support for blk-iolatency (Tejun)\n\n - various fixes and tweaks to ublk (Ming)\n\n - remove hybrid polling. It hasn't really been useful since we got\n   async polled IO support, and these days we don't support sync polled\n   IO at all (Keith)\n\n - misc fixes, cleanups, improvements (Zhong, Ondrej, Colin, Chengming,\n   Chaitanya, me)\n\n* tag 'for-6.4/block-2023-04-21' of git://git.kernel.dk/linux: (118 commits)\n  nbd: fix incomplete validation of ioctl arg\n  ublk: don't return 0 in case of any failure\n  sed-opal: geometry feature reporting command\n  null_blk: Always check queue mode setting from configfs\n  block: ublk: switch to ioctl command encoding\n  blk-mq: fix the blk_mq_add_to_requeue_list call in blk_kick_flush\n  block, bfq: Fix division by zero error on zero wsum\n  fault-inject: fix build error when FAULT_INJECTION_CONFIGFS=y and CONFIGFS_FS=m\n  block: store bdev->bd_disk->fops->submit_bio state in bdev\n  block: re-arrange the struct block_device fields for better layout\n  md/raid5: remove unused working_disks variable\n  md/raid10: don't call bio_start_io_acct twice for bio which experienced read error\n  md/raid10: fix memleak of md thread\n  md/raid10: fix memleak for 'conf->bio_split'\n  md/raid10: fix leak of 'r10bio->remaining' for recovery\n  md/raid10: don't BUG_ON() in raise_barrier()\n  md: fix soft lockup in status_resync\n  md: add error_handlers for raid0 and linear\n  md: Use optimal I/O size for last bitmap page\n  md: Fix types in sb writer\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Wed Apr 26 12:52:58 2023 -0700",
  "author_date_iso": "2023-04-26T12:52:58-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Wed Apr 26 12:52:58 2023 -0700",
  "committer_date_iso": "2023-04-26T12:52:58-07:00",
  "files_changed": [
    "block/Kconfig",
    "block/blk-cgroup.c",
    "block/blk-cgroup.h",
    "block/blk-core.c",
    "block/blk-mq.c",
    "block/blk-mq.h",
    "block/genhd.c",
    "drivers/block/drbd/drbd_nl.c",
    "drivers/block/drbd/drbd_receiver.c",
    "drivers/block/drbd/drbd_state.c",
    "drivers/block/null_blk/main.c",
    "drivers/block/ublk_drv.c",
    "drivers/md/md.c",
    "drivers/nvme/host/core.c",
    "drivers/nvme/host/pci.c",
    "drivers/nvme/host/tcp.c",
    "include/linux/blk-mq.h",
    "include/linux/blk_types.h",
    "include/linux/blkdev.h",
    "io_uring/rw.c",
    "lib/Kconfig.debug"
  ],
  "files_changed_count": 21,
  "stats": [
    {
      "file": "Documentation/ABI/stable/sysfs-block",
      "insertions": 4,
      "deletions": 11
    },
    {
      "file": "Documentation/block/inline-encryption.rst",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "Documentation/fault-injection/fault-injection.rst",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "arch/s390/include/uapi/asm/dasd.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "block/Kconfig",
      "insertions": 0,
      "deletions": 5
    },
    {
      "file": "block/Makefile",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "block/bdev.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "block/bfq-cgroup.c",
      "insertions": 7,
      "deletions": 13
    },
    {
      "file": "block/bfq-iosched.c",
      "insertions": 10,
      "deletions": 9
    },
    {
      "file": "block/bfq-iosched.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "block/blk-cgroup.c",
      "insertions": 69,
      "deletions": 78
    },
    {
      "file": "block/blk-cgroup.h",
      "insertions": 6,
      "deletions": 6
    },
    {
      "file": "block/blk-core.c",
      "insertions": 4,
      "deletions": 10
    },
    {
      "file": "block/blk-crypto-internal.h",
      "insertions": 20,
      "deletions": 18
    },
    {
      "file": "block/blk-crypto-profile.c",
      "insertions": 25,
      "deletions": 35
    },
    {
      "file": "block/blk-crypto.c",
      "insertions": 38,
      "deletions": 28
    },
    {
      "file": "block/blk-flush.c",
      "insertions": 7,
      "deletions": 10
    },
    {
      "file": "block/blk-iocost.c",
      "insertions": 34,
      "deletions": 24
    },
    {
      "file": "block/blk-iolatency.c",
      "insertions": 34,
      "deletions": 5
    },
    {
      "file": "block/blk-merge.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "block/blk-mq-cpumap.c",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "block/blk-mq-debugfs.c",
      "insertions": 0,
      "deletions": 28
    },
    {
      "file": "block/blk-mq-pci.c",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "block/blk-mq-rdma.c",
      "insertions": 0,
      "deletions": 44
    },
    {
      "file": "block/blk-mq-sched.c",
      "insertions": 14,
      "deletions": 129
    },
    {
      "file": "block/blk-mq-sched.h",
      "insertions": 0,
      "deletions": 7
    },
    {
      "file": "block/blk-mq-sysfs.c",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "block/blk-mq-tag.c",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "block/blk-mq-tag.h",
      "insertions": 0,
      "deletions": 73
    },
    {
      "file": "block/blk-mq-virtio.c",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "block/blk-mq.c",
      "insertions": 256,
      "deletions": 409
    },
    {
      "file": "block/blk-mq.h",
      "insertions": 66,
      "deletions": 11
    },
    {
      "file": "block/blk-pm.c",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "block/blk-rq-qos.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "block/blk-stat.c",
      "insertions": 2,
      "deletions": 21
    },
    {
      "file": "block/blk-sysfs.c",
      "insertions": 1,
      "deletions": 25
    },
    {
      "file": "block/blk-throttle.c",
      "insertions": 12,
      "deletions": 7
    },
    {
      "file": "block/blk.h",
      "insertions": 0,
      "deletions": 6
    },
    {
      "file": "block/elevator.h",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "block/genhd.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "block/kyber-iosched.c",
      "insertions": 3,
      "deletions": 4
    },
    {
      "file": "block/mq-deadline.c",
      "insertions": 6,
      "deletions": 7
    },
    {
      "file": "block/opal_proto.h",
      "insertions": 10,
      "deletions": 0
    },
    {
      "file": "block/sed-opal.c",
      "insertions": 286,
      "deletions": 44
    },
    {
      "file": "drivers/block/Kconfig",
      "insertions": 17,
      "deletions": 0
    },
    {
      "file": "drivers/block/drbd/drbd_actlog.c",
      "insertions": 8,
      "deletions": 5
    },
    {
      "file": "drivers/block/drbd/drbd_bitmap.c",
      "insertions": 9,
      "deletions": 4
    },
    {
      "file": "drivers/block/drbd/drbd_int.h",
      "insertions": 64,
      "deletions": 56
    },
    {
      "file": "drivers/block/drbd/drbd_main.c",
      "insertions": 44,
      "deletions": 28
    },
    {
      "file": "drivers/block/drbd/drbd_nl.c",
      "insertions": 11,
      "deletions": 8
    },
    {
      "file": "drivers/block/drbd/drbd_receiver.c",
      "insertions": 53,
      "deletions": 49
    },
    {
      "file": "drivers/block/drbd/drbd_req.c",
      "insertions": 18,
      "deletions": 12
    },
    {
      "file": "drivers/block/drbd/drbd_req.h",
      "insertions": 7,
      "deletions": 4
    },
    {
      "file": "drivers/block/drbd/drbd_state.c",
      "insertions": 17,
      "deletions": 12
    },
    {
      "file": "drivers/block/drbd/drbd_worker.c",
      "insertions": 61,
      "deletions": 53
    },
    {
      "file": "drivers/block/nbd.c",
      "insertions": 11,
      "deletions": 4
    },
    {
      "file": "drivers/block/null_blk/Kconfig",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/block/null_blk/main.c",
      "insertions": 88,
      "deletions": 47
    },
    {
      "file": "drivers/block/null_blk/null_blk.h",
      "insertions": 6,
      "deletions": 1
    },
    {
      "file": "drivers/block/ublk_drv.c",
      "insertions": 76,
      "deletions": 57
    },
    {
      "file": "drivers/md/dm-table.c",
      "insertions": 5,
      "deletions": 14
    },
    {
      "file": "drivers/md/md-bitmap.c",
      "insertions": 83,
      "deletions": 60
    },
    {
      "file": "drivers/md/md-linear.c",
      "insertions": 13,
      "deletions": 1
    },
    {
      "file": "drivers/md/md.c",
      "insertions": 15,
      "deletions": 12
    },
    {
      "file": "drivers/md/md.h",
      "insertions": 2,
      "deletions": 8
    },
    {
      "file": "drivers/md/raid0.c",
      "insertions": 13,
      "deletions": 1
    },
    {
      "file": "drivers/md/raid10.c",
      "insertions": 57,
      "deletions": 45
    },
    {
      "file": "drivers/md/raid5.c",
      "insertions": 1,
      "deletions": 4
    },
    {
      "file": "drivers/nvme/host/apple.c",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "drivers/nvme/host/core.c",
      "insertions": 3,
      "deletions": 6
    },
    {
      "file": "drivers/nvme/host/pci.c",
      "insertions": 1,
      "deletions": 5
    },
    {
      "file": "drivers/nvme/host/rdma.c",
      "insertions": 6,
      "deletions": 13
    },
    {
      "file": "drivers/nvme/host/tcp.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/nvme/host/trace.h",
      "insertions": 6,
      "deletions": 9
    },
    {
      "file": "drivers/nvme/target/admin-cmd.c",
      "insertions": 33,
      "deletions": 48
    },
    {
      "file": "drivers/nvme/target/fcloop.c",
      "insertions": 27,
      "deletions": 21
    },
    {
      "file": "drivers/nvme/target/nvmet.h",
      "insertions": 2,
      "deletions": 10
    },
    {
      "file": "drivers/nvme/target/tcp.c",
      "insertions": 30,
      "deletions": 4
    },
    {
      "file": "drivers/nvme/target/zns.c",
      "insertions": 11,
      "deletions": 9
    },
    {
      "file": "drivers/s390/block/dasd.c",
      "insertions": 57,
      "deletions": 18
    },
    {
      "file": "drivers/s390/block/dasd_devmap.c",
      "insertions": 126,
      "deletions": 0
    },
    {
      "file": "drivers/s390/block/dasd_eckd.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/s390/block/dasd_eer.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/s390/block/dasd_int.h",
      "insertions": 17,
      "deletions": 15
    },
    {
      "file": "include/linux/blk-crypto.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "include/linux/blk-mq-rdma.h",
      "insertions": 0,
      "deletions": 11
    },
    {
      "file": "include/linux/blk-mq.h",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "include/linux/blk_types.h",
      "insertions": 13,
      "deletions": 8
    },
    {
      "file": "include/linux/blkdev.h",
      "insertions": 0,
      "deletions": 12
    },
    {
      "file": "include/linux/fault-inject.h",
      "insertions": 22,
      "deletions": 0
    },
    {
      "file": "include/linux/genl_magic_func.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "include/linux/sed-opal.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "include/uapi/linux/sed-opal.h",
      "insertions": 24,
      "deletions": 0
    },
    {
      "file": "include/uapi/linux/ublk_cmd.h",
      "insertions": 43,
      "deletions": 0
    },
    {
      "file": "io_uring/rw.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "lib/Kconfig.debug",
      "insertions": 13,
      "deletions": 1
    },
    {
      "file": "lib/fault-inject.c",
      "insertions": 191,
      "deletions": 0
    }
  ],
  "total_insertions": 2255,
  "total_deletions": 1768,
  "total_changes": 4023,
  "parents": [
    "5b9a7bb72fddbc5247f56ede55d485fab7abdf92",
    "55793ea54d77719a071b1ccc05a05056e3b5e009"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "block/blk-cgroup.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "block/blk-core.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "block/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "block/blk-cgroup.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "block/blk-mq.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/block/null_blk/main.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "block/genhd.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/block/drbd/drbd_nl.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/block/drbd/drbd_state.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "block/blk-mq.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/block/drbd/drbd_receiver.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/nvme/host/core.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/block/ublk_drv.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/md/md.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/blk-mq.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/nvme/host/pci.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "lib/Kconfig.debug",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/nvme/host/tcp.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/blk_types.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/blkdev.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "io_uring/rw.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}