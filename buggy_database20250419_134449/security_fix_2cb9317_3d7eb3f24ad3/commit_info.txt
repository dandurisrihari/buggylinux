Commit Hash: 2cb9317377caaec647d7485bc53ab33a0b54f27c
Subject: KVM: x86: Raise an event request when processing NMIs if an NMI is pending


Security Keywords:
- injection

Full commit message:
KVM: x86: Raise an event request when processing NMIs if an NMI is pending

Don't raise KVM_REQ_EVENT if no NMIs are pending at the end of
process_nmi().  Finishing process_nmi() without a pending NMI will become
much more likely when KVM gains support for AMD's vNMI, which allows
pending vNMIs in hardware, i.e. doesn't require explicit injection.

Signed-off-by: Santosh Shukla <Santosh.Shukla@amd.com>
Link: https://lore.kernel.org/r/20230227084016.3368-6-santosh.shukla@amd.com
Signed-off-by: Sean Christopherson <seanjc@google.com>

Metadata:
Author: Sean Christopherson <seanjc@google.com>
Author Date: Mon Feb 27 14:10:10 2023 +0530
Committer: Sean Christopherson <seanjc@google.com>
Commit Date: Wed Mar 22 12:34:32 2023 -0700

Files Changed: 1
Lines Added: 3
Lines Removed: 1
Total Changes: 4
