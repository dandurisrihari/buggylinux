Files changed: 38
Insertions: 5004
Deletions: 3114
Total changes: 8118

File-specific changes:
Documentation/ABI/testing/sysfs-bus-pci: +24 -0
Documentation/PCI/endpoint/pci-test-howto.txt: +11 -8
Documentation/PCI/pci-error-recovery.txt: +10 -25
Documentation/devicetree/bindings/pci/fsl,imx6q-pcie.txt: +1 -0
Documentation/devicetree/bindings/pci/pci-keystone.txt: +3 -0
Documentation/devicetree/bindings/pci/pci-rcar-gen2.txt: +1 -0
Documentation/devicetree/bindings/pci/rcar-pci.txt: +2 -0
Documentation/devicetree/bindings/pci/ti-pci.txt: +5 -0
Documentation/driver-api/index.rst: +1 -1
Documentation/driver-api/pci/index.rst: +22 -0
Documentation/driver-api/pci/p2pdma.rst: +145 -0
Documentation/driver-api/{ => pci}/pci.rst: +0 -0
Documentation/switchtec.txt: +20 -10
MAINTAINERS: +1 -1
arch/arm/boot/dts/imx7d.dtsi: +3 -2
arch/arm64/kernel/pci.c: +2 -3
arch/powerpc/include/asm/pnv-pci.h: +1 -1
arch/x86/pci/acpi.c: +1 -1
arch/x86/pci/fixup.c: +3 -9
drivers/acpi/pci_root.c: +13 -4
drivers/acpi/property.c: +71 -26
drivers/acpi/x86/apple.c: +1 -1
drivers/ata/sata_inic162x.c: +1 -1
drivers/block/rsxx/core.c: +1 -1
drivers/crypto/qat/qat_common/adf_aer.c: +0 -1
drivers/dma/ioat/init.c: +0 -7
drivers/gpio/gpiolib-acpi.c: +1 -1
drivers/infiniband/core/rw.c: +9 -2
drivers/infiniband/hw/cxgb4/qp.c: +5 -5
drivers/infiniband/hw/cxgb4/t4.h: +1 -1
drivers/infiniband/hw/hfi1/pcie.c: +0 -1
drivers/infiniband/hw/qib/qib_pcie.c: +0 -1
drivers/net/ethernet/atheros/alx/main.c: +0 -2
drivers/net/ethernet/broadcom/bnx2.c: +0 -7
drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c: +0 -8
drivers/net/ethernet/broadcom/bnxt/bnxt.c: +0 -7
drivers/net/ethernet/chelsio/cxgb4/cxgb4_main.c: +0 -1
drivers/net/ethernet/emulex/benet/be_main.c: +0 -1
drivers/net/ethernet/intel/e1000e/netdev.c: +0 -2
drivers/net/ethernet/intel/fm10k/fm10k_pci.c: +0 -2
drivers/net/ethernet/intel/i40e/i40e_main.c: +0 -9
drivers/net/ethernet/intel/igb/igb_main.c: +0 -9
drivers/net/ethernet/intel/ixgbe/ixgbe_main.c: +0 -10
drivers/net/ethernet/qlogic/netxen/netxen_nic_main.c: +0 -6
drivers/net/ethernet/qlogic/qlcnic/qlcnic_83xx_hw.c: +0 -1
drivers/net/ethernet/qlogic/qlcnic/qlcnic_main.c: +0 -1
drivers/net/ethernet/sfc/efx.c: +0 -8
drivers/net/ethernet/sfc/falcon/efx.c: +0 -8
drivers/nvme/host/core.c: +4 -0
drivers/nvme/host/nvme.h: +1 -0
drivers/nvme/host/pci.c: +58 -40
drivers/nvme/target/configfs.c: +47 -0
drivers/nvme/target/core.c: +180 -0
drivers/nvme/target/io-cmd-bdev.c: +3 -0
drivers/nvme/target/nvmet.h: +17 -0
drivers/nvme/target/rdma.c: +14 -8
drivers/pci/Kconfig: +20 -0
drivers/pci/Makefile: +2 -0
drivers/pci/access.c: +2 -2
drivers/pci/controller/Kconfig: +3 -1
drivers/pci/controller/dwc/Makefile: +1 -1
drivers/pci/controller/dwc/pci-dra7xx.c: +8 -3
drivers/pci/controller/dwc/pci-imx6.c: +171 -5
drivers/pci/controller/dwc/pci-keystone-dw.c: +0 -484
drivers/pci/controller/dwc/pci-keystone.c: +677 -111
drivers/pci/controller/dwc/pci-keystone.h: +0 -57
drivers/pci/controller/dwc/pcie-designware.h: +4 -0
drivers/pci/controller/dwc/pcie-kirin.c: +2 -2
drivers/pci/controller/dwc/pcie-qcom.c: +39 -17
drivers/pci/controller/pci-aardvark.c: +126 -3
drivers/pci/controller/pci-host-common.c: +0 -8
drivers/pci/controller/pci-mvebu.c: +100 -284
drivers/pci/controller/pcie-cadence-ep.c: +7 -6
drivers/pci/controller/pcie-cadence-host.c: +0 -7
drivers/pci/controller/pcie-cadence.c: +12 -8
drivers/pci/controller/pcie-iproc.c: +0 -8
drivers/pci/controller/pcie-mediatek.c: +205 -116
drivers/pci/controller/pcie-mobiveil.c: +0 -7
drivers/pci/controller/pcie-xilinx-nwl.c: +0 -9
drivers/pci/controller/pcie-xilinx.c: +0 -7
drivers/pci/controller/vmd.c: +1 -1
drivers/pci/hotplug/TODO: +74 -0
drivers/pci/hotplug/acpiphp.h: +7 -3
drivers/pci/hotplug/acpiphp_core.c: +11 -25
drivers/pci/hotplug/acpiphp_ibm.c: +1 -1
drivers/pci/hotplug/cpci_hotplug.h: +9 -2
drivers/pci/hotplug/cpci_hotplug_core.c: +24 -81
drivers/pci/hotplug/cpci_hotplug_pci.c: +2 -4
drivers/pci/hotplug/cpqphp.h: +7 -2
drivers/pci/hotplug/cpqphp_core.c: +13 -48
drivers/pci/hotplug/cpqphp_ctrl.c: +1 -30
drivers/pci/hotplug/ibmphp.h: +7 -2
drivers/pci/hotplug/ibmphp_core.c: +42 -79
drivers/pci/hotplug/ibmphp_ebda.c: +10 -60
drivers/pci/hotplug/pci_hotplug_core.c: +15 -38
drivers/pci/hotplug/pciehp.h: +66 -67
drivers/pci/hotplug/pciehp_core.c: +71 -97
drivers/pci/hotplug/pciehp_ctrl.c: +123 -140
drivers/pci/hotplug/pciehp_hpc.c: +74 -110
drivers/pci/hotplug/pciehp_pci.c: +26 -15
drivers/pci/hotplug/pnv_php.c: +24 -14
drivers/pci/hotplug/rpaphp.h: +8 -2
drivers/pci/hotplug/rpaphp_core.c: +10 -10
drivers/pci/hotplug/rpaphp_pci.c: +2 -9
drivers/pci/hotplug/rpaphp_slot.c: +4 -18
drivers/pci/hotplug/s390_pci_hpc.c: +13 -31
drivers/pci/hotplug/sgi_hotplug.c: +23 -40
drivers/pci/hotplug/shpchp.h: +5 -3
drivers/pci/hotplug/shpchp_core.c: +14 -34
drivers/pci/hotplug/shpchp_ctrl.c: +5 -16
drivers/pci/iov.c: +2 -1
drivers/pci/msi.c: +6 -3
drivers/pci/p2pdma.c: +805 -0
drivers/pci/pci-acpi.c: +62 -1
drivers/pci/pci-bridge-emul.c: +408 -0
drivers/pci/pci-bridge-emul.h: +124 -0
drivers/pci/pci.c: +97 -15
drivers/pci/pci.h: +71 -7
drivers/pci/pcie/Kconfig: +0 -4
drivers/pci/pcie/aer.c: +60 -179
drivers/pci/pcie/aer_inject.c: +46 -50
drivers/pci/pcie/aspm.c: +2 -2
drivers/pci/pcie/dpc.c: +61 -11
drivers/pci/pcie/err.c: +68 -213
drivers/pci/pcie/pme.c: +28 -2
drivers/pci/pcie/portdrv.h: +28 -4
drivers/pci/pcie/portdrv_core.c: +21 -0
drivers/pci/pcie/portdrv_pci.c: +23 -8
drivers/pci/probe.c: +21 -3
drivers/pci/quirks.c: +38 -58
drivers/pci/remove.c: +1 -3
drivers/pci/setup-bus.c: +15 -13
drivers/pci/slot.c: +1 -2
drivers/platform/x86/asus-wmi.c: +10 -29
drivers/platform/x86/eeepc-laptop.c: +13 -30
drivers/reset/reset-imx7.c: +1 -0
drivers/s390/net/ism_drv.c: +2 -2
drivers/scsi/aacraid/linit.c: +1 -3
drivers/scsi/be2iscsi/be_main.c: +0 -1
drivers/scsi/bfa/bfad.c: +0 -2
drivers/scsi/csiostor/csio_init.c: +0 -1
drivers/scsi/lpfc/lpfc_init.c: +0 -8
drivers/scsi/mpt3sas/mpt3sas_scsih.c: +0 -1
drivers/scsi/qla2xxx/qla_os.c: +0 -2
drivers/scsi/qla4xxx/ql4_os.c: +0 -1
include/acpi/acpi_bus.h: +7 -1
include/dt-bindings/reset/imx7-reset.h: +3 -1
include/linux/acpi.h: +9 -0
include/linux/blkdev.h: +3 -0
include/linux/memremap.h: +6 -0
include/linux/mm.h: +18 -0
include/linux/pci-dma-compat.h: +0 -18
include/linux/pci-dma.h: +0 -12
include/linux/pci-p2pdma.h: +114 -0
include/linux/pci.h: +6 -1
include/linux/pci_hotplug.h: +5 -38
include/linux/pci_ids.h: +0 -2
include/uapi/linux/pci_regs.h: +1 -0
tools/Makefile: +7 -6
tools/pci/Build: +1 -0
tools/pci/Makefile: +53 -0
tools/pci/pcitest.c: +2 -5
