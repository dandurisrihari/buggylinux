Files changed: 2
Insertions: 7197
Deletions: 2122
Total changes: 9319

File-specific changes:
Documentation/ABI/testing/sysfs-class-led-trigger-usbport: +12 -0
Documentation/devicetree/bindings/extcon/qcom,pm8941-misc.txt: +41 -0
Documentation/devicetree/bindings/phy/bcm-ns-usb3-phy.txt: +23 -0
Documentation/devicetree/bindings/phy/mxs-usb-phy.txt: +10 -0
Documentation/devicetree/bindings/phy/phy-rockchip-inno-usb2.txt: +64 -0
Documentation/devicetree/bindings/phy/phy-rockchip-typec.txt: +101 -0
Documentation/devicetree/bindings/phy/rcar-gen3-phy-usb2.txt: +4 -2
Documentation/devicetree/bindings/phy/rockchip-pcie-phy.txt: +31 -0
Documentation/devicetree/bindings/phy/rockchip-usb-phy.txt: +3 -0
Documentation/devicetree/bindings/phy/sun4i-usb-phy.txt: +1 -0
Documentation/devicetree/bindings/phy/ti-phy.txt: +2 -0
Documentation/devicetree/bindings/usb/ci-hdrc-usb2.txt: +2 -0
Documentation/devicetree/bindings/usb/dwc2.txt: +4 -1
Documentation/devicetree/bindings/usb/dwc3-cavium.txt: +28 -0
Documentation/devicetree/bindings/usb/dwc3.txt: +7 -1
Documentation/devicetree/bindings/usb/generic.txt: +6 -0
Documentation/devicetree/bindings/usb/renesas_usbhs.txt: +1 -0
Documentation/devicetree/bindings/usb/rockchip,dwc3.txt: +59 -0
Documentation/devicetree/bindings/usb/usb4604.txt: +19 -0
Documentation/devicetree/bindings/usb/usbmisc-imx.txt: +1 -0
Documentation/kernel-parameters.txt: +2 -0
Documentation/leds/ledtrig-usbport.txt: +41 -0
MAINTAINERS: +2 -1
drivers/bluetooth/bcm203x.c: +1 -3
drivers/extcon/Kconfig: +6 -0
drivers/extcon/Makefile: +1 -0
drivers/extcon/extcon-adc-jack.c: +15 -12
drivers/extcon/extcon-arizona.c: +15 -12
drivers/extcon/extcon-axp288.c: +4 -4
drivers/extcon/extcon-gpio.c: +2 -1
drivers/extcon/extcon-max14577.c: +9 -9
drivers/extcon/extcon-max3355.c: +4 -4
drivers/extcon/extcon-max77693.c: +23 -23
drivers/extcon/extcon-max77843.c: +11 -11
drivers/extcon/extcon-max8997.c: +10 -10
drivers/extcon/extcon-palmas.c: +8 -8
drivers/extcon/extcon-qcom-spmi-misc.c: +170 -0
drivers/extcon/extcon-rt8973a.c: +2 -2
drivers/extcon/extcon-sm5502.c: +2 -2
drivers/extcon/extcon-usb-gpio.c: +4 -4
drivers/extcon/extcon.c: +625 -149
drivers/media/dvb-frontends/rtl2832_sdr.c: +0 -1
drivers/media/radio/si470x/radio-si470x-usb.c: +0 -1
drivers/media/rc/imon.c: +3 -10
drivers/media/rc/redrat3.c: +1 -3
drivers/media/usb/airspy/airspy.c: +0 -1
drivers/media/usb/as102/as102_usb_drv.c: +0 -2
drivers/media/usb/au0828/au0828-video.c: +0 -1
drivers/media/usb/cpia2/cpia2_usb.c: +0 -1
drivers/media/usb/cx231xx/cx231xx-audio.c: +0 -2
drivers/media/usb/cx231xx/cx231xx-core.c: +0 -4
drivers/media/usb/cx231xx/cx231xx-vbi.c: +0 -2
drivers/media/usb/dvb-usb/dib0700_core.c: +1 -3
drivers/media/usb/em28xx/em28xx-audio.c: +0 -1
drivers/media/usb/em28xx/em28xx-core.c: +0 -1
drivers/media/usb/gspca/benq.c: +1 -3
drivers/media/usb/gspca/gspca.c: +1 -3
drivers/media/usb/gspca/konica.c: +1 -3
drivers/media/usb/hackrf/hackrf.c: +0 -1
drivers/media/usb/hdpvr/hdpvr-video.c: +1 -3
drivers/media/usb/msi2500/msi2500.c: +0 -1
drivers/media/usb/pwc/pwc-if.c: +0 -1
drivers/media/usb/s2255/s2255drv.c: +2 -7
drivers/media/usb/stk1160/stk1160-video.c: +1 -3
drivers/media/usb/stkwebcam/stk-webcam.c: +1 -3
drivers/media/usb/tm6000/tm6000-dvb.c: +1 -3
drivers/media/usb/tm6000/tm6000-video.c: +0 -1
drivers/media/usb/usbvision/usbvision-core.c: +1 -4
drivers/media/usb/zr364xx/zr364xx.c: +1 -3
drivers/mmc/host/vub300.c: +0 -2
drivers/phy/Kconfig: +36 -0
drivers/phy/Makefile: +4 -0
drivers/phy/phy-bcm-ns-usb3.c: +274 -0
drivers/phy/phy-bcm-ns2-pcie.c: +7 -21
drivers/phy/phy-core.c: +15 -0
drivers/phy/phy-da8xx-usb.c: +1 -1
drivers/phy/phy-exynos5-usbdrd.c: +2 -2
drivers/phy/phy-omap-usb2.c: +46 -54
drivers/phy/phy-qcom-ufs.c: +2 -4
drivers/phy/phy-rcar-gen3-usb2.c: +1 -0
drivers/phy/phy-rockchip-inno-usb2.c: +707 -0
drivers/phy/phy-rockchip-pcie.c: +357 -0
drivers/phy/phy-rockchip-typec.c: +1023 -0
drivers/phy/phy-rockchip-usb.c: +20 -0
drivers/phy/phy-sun4i-usb.c: +99 -55
drivers/phy/phy-twl4030-usb.c: +18 -7
drivers/phy/tegra/xusb.c: +3 -1
drivers/usb/Kconfig: +23 -1
drivers/usb/atm/cxacru.c: +1 -5
drivers/usb/atm/speedtch.c: +0 -1
drivers/usb/atm/ueagle-atm.c: +3 -10
drivers/usb/atm/usbatm.c: +1 -7
drivers/usb/chipidea/ci_hdrc_imx.c: +3 -0
drivers/usb/chipidea/ci_hdrc_imx.h: +1 -0
drivers/usb/chipidea/host.c: +3 -0
drivers/usb/chipidea/udc.c: +18 -24
drivers/usb/chipidea/usbmisc_imx.c: +17 -5
drivers/usb/class/cdc-acm.c: +18 -31
drivers/usb/class/cdc-wdm.c: +139 -26
drivers/usb/class/usbtmc.c: +4 -7
drivers/usb/common/ulpi.c: +9 -7
drivers/usb/core/Kconfig: +6 -19
drivers/usb/core/Makefile: +4 -1
drivers/usb/core/hcd.c: +3 -4
drivers/usb/core/hub.c: +4 -7
drivers/usb/core/ledtrig-usbport.c: +314 -0
drivers/usb/core/message.c: +6 -4
drivers/usb/core/of.c: +1 -0
drivers/usb/core/otg_whitelist.h: +1 -1
drivers/usb/core/urb.c: +1 -3
drivers/usb/core/usb.c: +11 -0
drivers/usb/dwc2/core.c: +109 -17
drivers/usb/dwc2/core.h: +1 -7
drivers/usb/dwc2/gadget.c: +26 -68
drivers/usb/dwc2/hcd.c: +1 -1
drivers/usb/dwc2/hw.h: +1 -0
drivers/usb/dwc3/Kconfig: +1 -1
drivers/usb/dwc3/core.c: +108 -14
drivers/usb/dwc3/core.h: +34 -1
drivers/usb/dwc3/dwc3-of-simple.c: +31 -17
drivers/usb/dwc3/gadget.c: +102 -176
drivers/usb/dwc3/ulpi.c: +5 -5
drivers/usb/gadget/Kconfig: +20 -19
drivers/usb/gadget/composite.c: +10 -6
drivers/usb/gadget/configfs.c: +3 -2
drivers/usb/gadget/function/f_fs.c: +41 -4
drivers/usb/gadget/function/f_hid.c: +15 -13
drivers/usb/gadget/function/f_loopback.c: +4 -10
drivers/usb/gadget/function/f_mass_storage.c: +22 -6
drivers/usb/gadget/function/f_mass_storage.h: +1 -0
drivers/usb/gadget/function/f_midi.c: +145 -89
drivers/usb/gadget/function/f_ncm.c: +82 -2
drivers/usb/gadget/function/f_printer.c: +5 -1
drivers/usb/gadget/function/f_sourcesink.c: +2 -4
drivers/usb/gadget/function/f_uvc.c: +7 -0
drivers/usb/gadget/function/storage_common.c: +24 -0
drivers/usb/gadget/function/storage_common.h: +10 -0
drivers/usb/gadget/function/u_ether.c: +6 -2
drivers/usb/gadget/function/u_ether.h: +1 -0
drivers/usb/gadget/legacy/gmidi.c: +1 -1
drivers/usb/gadget/u_f.c: +4 -2
drivers/usb/gadget/u_f.h: +15 -2
drivers/usb/gadget/udc/core.c: +1 -3
drivers/usb/gadget/udc/fsl_qe_udc.c: +4 -12
drivers/usb/gadget/udc/goku_udc.c: +3 -2
drivers/usb/gadget/udc/net2280.c: +76 -4
drivers/usb/gadget/udc/omap_udc.c: +1 -1
drivers/usb/gadget/udc/pxa27x_udc.c: +49 -2
drivers/usb/gadget/udc/udc-xilinx.c: +1 -3
drivers/usb/host/Kconfig: +1 -1
drivers/usb/host/bcma-hcd.c: +118 -51
drivers/usb/host/ehci-platform.c: +1 -1
drivers/usb/host/fhci-hcd.c: +1 -3
drivers/usb/host/fsl-mph-dr-of.c: +6 -12
drivers/usb/host/max3421-hcd.c: +2 -6
drivers/usb/host/ohci-at91.c: +68 -1
drivers/usb/host/ohci-omap.c: +0 -1
drivers/usb/host/ohci-sa1111.c: +1 -3
drivers/usb/host/uhci-hcd.c: +1 -4
drivers/usb/host/whci/init.c: +1 -1
drivers/usb/host/xhci-tegra.c: +1 -1
drivers/usb/host/xhci.c: +1 -3
drivers/usb/misc/Kconfig: +6 -0
drivers/usb/misc/Makefile: +1 -0
drivers/usb/misc/adutux.c: +5 -16
drivers/usb/misc/appledisplay.c: +2 -15
drivers/usb/misc/cypress_cy7c63.c: +1 -4
drivers/usb/misc/cytherm.c: +8 -24
drivers/usb/misc/ezusb.c: +1 -1
drivers/usb/misc/ftdi-elan.c: +13 -54
drivers/usb/misc/idmouse.c: +0 -1
drivers/usb/misc/iowarrior.c: +7 -19
drivers/usb/misc/ldusb.c: +7 -21
drivers/usb/misc/legousbtower.c: +23 -36
drivers/usb/misc/lvstest.c: +5 -20
drivers/usb/misc/sisusbvga/sisusb.c: +0 -3
drivers/usb/misc/trancevibrator.c: +1 -2
drivers/usb/misc/usb4604.c: +175 -0
drivers/usb/misc/usblcd.c: +2 -7
drivers/usb/misc/usbsevseg.c: +2 -6
drivers/usb/misc/uss720.c: +1 -4
drivers/usb/misc/yurex.c: +4 -12
drivers/usb/musb/Kconfig: +1 -1
drivers/usb/musb/am35x.c: +4 -4
drivers/usb/musb/da8xx.c: +59 -105
drivers/usb/musb/musb_core.c: +74 -7
drivers/usb/musb/musb_core.h: +2 -0
drivers/usb/musb/musb_dsps.c: +35 -45
drivers/usb/musb/musb_gadget.c: +3 -0
drivers/usb/musb/musb_virthub.c: +1 -0
drivers/usb/musb/omap2430.c: +10 -66
drivers/usb/musb/sunxi.c: +57 -4
drivers/usb/phy/phy-ab8500-usb.c: +4 -4
drivers/usb/phy/phy-generic.c: +4 -5
drivers/usb/phy/phy-mxs-usb.c: +61 -0
drivers/usb/renesas_usbhs/common.c: +4 -0
drivers/usb/renesas_usbhs/mod_gadget.c: +3 -5
drivers/usb/renesas_usbhs/mod_host.c: +2 -8
drivers/usb/renesas_usbhs/pipe.c: +1 -3
drivers/usb/serial/cp210x.c: +1 -0
drivers/usb/serial/keyspan_pda.c: +2 -2
drivers/usb/serial/ti_usb_3410_5052.c: +58 -113
drivers/usb/storage/alauda.c: +3 -8
drivers/usb/storage/scsiglue.c: +8 -0
drivers/usb/storage/sddr09.c: +4 -10
drivers/usb/storage/unusual_devs.h: +7 -0
drivers/usb/storage/usb.c: +10 -6
drivers/usb/usb-skeleton.c: +3 -11
drivers/usb/usbip/Kconfig: +23 -1
drivers/usb/usbip/stub_rx.c: +0 -1
drivers/usb/usbip/vhci.h: +44 -10
drivers/usb/usbip/vhci_hcd.c: +191 -94
drivers/usb/usbip/vhci_rx.c: +11 -10
drivers/usb/usbip/vhci_sysfs.c: +230 -66
drivers/usb/usbip/vudc_dev.c: +1 -1
drivers/usb/usbip/vudc_rx.c: +1 -1
drivers/usb/wusbcore/cbaf.c: +1 -2
drivers/usb/wusbcore/crypto.c: +1 -3
drivers/usb/wusbcore/security.c: +1 -3
drivers/usb/wusbcore/wa-nep.c: +2 -7
drivers/usb/wusbcore/wa-xfer.c: +1 -3
drivers/uwb/hwa-rc.c: +1 -3
drivers/watchdog/pcwd_usb.c: +1 -3
include/linux/bcma/bcma_regs.h: +1 -0
include/linux/extcon.h: +168 -23
include/linux/extcon/extcon-adc-jack.h: +2 -2
include/linux/phy/phy.h: +3 -0
include/linux/ulpi/driver.h: +6 -2
include/linux/ulpi/interface.h: +4 -5
include/linux/usb/composite.h: +2 -1
include/linux/usb/gadget.h: +27 -3
include/linux/usb_usual.h: +2 -0
include/soc/at91/atmel-sfr.h: +14 -0
include/uapi/linux/usb/functionfs.h: +2 -0
