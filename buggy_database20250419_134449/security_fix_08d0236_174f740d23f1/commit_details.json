{
  "hash": "08d02364b12faa54d76dbfea2090321fd27996f2",
  "hash_short": "08d02364",
  "subject": "net: mscc: fix the injection header",
  "body": "When injecting frames in the Ocelot switch driver an injection header\n(IFH) should be used to configure various parameters related to a given\nframe, such as the port onto which the frame should be departed or its\nvlan id. Other parameters in the switch configuration can led to an\ninjected frame being sent without an IFH but this led to various issues\nas the per-frame parameters are then not used. This is especially true\nwhen using multiple ports for injection.\n\nThe IFH was injected with the wrong endianness which led to the switch\nnot taking it into account as the IFH_INJ_BYPASS bit was then unset.\n(The bit tells the switch to use the IFH over its internal\nconfiguration). This patch fixes it.\n\nIn addition to the endianness fix, the IFH is also fixed. As it was\n(unwillingly) unused, some of its fields were not configured the right\nway.\n\nFixes: a556c76adc05 (\"net: mscc: Add initial Ocelot switch support\")\nSigned-off-by: Antoine Tenart <antoine.tenart@bootlin.com>\nReviewed-by: Alexandre Belloni <alexandre.belloni@bootlin.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "full_message": "net: mscc: fix the injection header\n\nWhen injecting frames in the Ocelot switch driver an injection header\n(IFH) should be used to configure various parameters related to a given\nframe, such as the port onto which the frame should be departed or its\nvlan id. Other parameters in the switch configuration can led to an\ninjected frame being sent without an IFH but this led to various issues\nas the per-frame parameters are then not used. This is especially true\nwhen using multiple ports for injection.\n\nThe IFH was injected with the wrong endianness which led to the switch\nnot taking it into account as the IFH_INJ_BYPASS bit was then unset.\n(The bit tells the switch to use the IFH over its internal\nconfiguration). This patch fixes it.\n\nIn addition to the endianness fix, the IFH is also fixed. As it was\n(unwillingly) unused, some of its fields were not configured the right\nway.\n\nFixes: a556c76adc05 (\"net: mscc: Add initial Ocelot switch support\")\nSigned-off-by: Antoine Tenart <antoine.tenart@bootlin.com>\nReviewed-by: Alexandre Belloni <alexandre.belloni@bootlin.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "author_name": "Antoine Tenart",
  "author_email": "antoine.tenart@bootlin.com",
  "author_date": "Wed Jun 20 10:50:46 2018 +0200",
  "author_date_iso": "2018-06-20T10:50:46+02:00",
  "committer_name": "David S. Miller",
  "committer_email": "davem@davemloft.net",
  "committer_date": "Thu Jun 21 10:29:46 2018 +0900",
  "committer_date_iso": "2018-06-21T10:29:46+09:00",
  "files_changed": [
    "drivers/net/ethernet/mscc/ocelot.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/net/ethernet/mscc/ocelot.c",
      "insertions": 5,
      "deletions": 5
    }
  ],
  "total_insertions": 5,
  "total_deletions": 5,
  "total_changes": 10,
  "parents": [
    "ea0820bb771175c7d4192fc6f5b5c56b3c6d5239"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.18",
    "v4.18-rc3",
    "v4.18-rc4",
    "v4.18-rc5",
    "v4.18-rc6",
    "v4.18-rc7",
    "v4.18-rc8",
    "v4.19",
    "v4.19-rc1",
    "v4.19-rc2"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/net/ethernet/mscc/ocelot.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}