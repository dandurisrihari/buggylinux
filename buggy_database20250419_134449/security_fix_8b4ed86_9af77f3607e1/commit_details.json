{
  "hash": "8b4ed8634f8b3f9aacfc42b4a872d30c36b9e255",
  "hash_short": "8b4ed863",
  "subject": "tipc: eliminate race condition at dual link establishment",
  "body": "Despite recent improvements, the establishment of dual parallel\nlinks still has a small glitch where messages can bypass each\nother. When the second link in a dual-link configuration is\nestablished, part of the first link's traffic will be steered over\nto the new link. Although we do have a mechanism to ensure that\npackets sent before and after the establishment of the new link\narrive in sequence to the destination node, this is not enough.\nThe arriving messages will still be delivered upwards in different\nthreads, something entailing a risk of message disordering during\nthe transition phase.\n\nTo fix this, we introduce a synchronization mechanism between the\ntwo parallel links, so that traffic arriving on the new link cannot\nbe added to its input queue until we are guaranteed that all\npre-establishment messages have been delivered on the old, parallel\nlink.\n\nThis problem seems to always have been around, but its occurrence is\nso rare that it has not been noticed until recent intensive testing.\n\nReviewed-by: Ying Xue <ying.xue@windriver.com>\nReviewed-by: Erik Hugne <erik.hugne@ericsson.com>\nSigned-off-by: Jon Maloy <jon.maloy@ericsson.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "full_message": "tipc: eliminate race condition at dual link establishment\n\nDespite recent improvements, the establishment of dual parallel\nlinks still has a small glitch where messages can bypass each\nother. When the second link in a dual-link configuration is\nestablished, part of the first link's traffic will be steered over\nto the new link. Although we do have a mechanism to ensure that\npackets sent before and after the establishment of the new link\narrive in sequence to the destination node, this is not enough.\nThe arriving messages will still be delivered upwards in different\nthreads, something entailing a risk of message disordering during\nthe transition phase.\n\nTo fix this, we introduce a synchronization mechanism between the\ntwo parallel links, so that traffic arriving on the new link cannot\nbe added to its input queue until we are guaranteed that all\npre-establishment messages have been delivered on the old, parallel\nlink.\n\nThis problem seems to always have been around, but its occurrence is\nso rare that it has not been noticed until recent intensive testing.\n\nReviewed-by: Ying Xue <ying.xue@windriver.com>\nReviewed-by: Erik Hugne <erik.hugne@ericsson.com>\nSigned-off-by: Jon Maloy <jon.maloy@ericsson.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "author_name": "Jon Paul Maloy",
  "author_email": "jon.maloy@ericsson.com",
  "author_date": "Wed Mar 25 12:07:26 2015 -0400",
  "author_date_iso": "2015-03-25T12:07:26-04:00",
  "committer_name": "David S. Miller",
  "committer_email": "davem@davemloft.net",
  "committer_date": "Wed Mar 25 14:05:56 2015 -0400",
  "committer_date_iso": "2015-03-25T14:05:56-04:00",
  "files_changed": [
    "net/tipc/link.c",
    "net/tipc/link.h",
    "net/tipc/msg.h"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "net/tipc/link.c",
      "insertions": 45,
      "deletions": 0
    },
    {
      "file": "net/tipc/link.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "net/tipc/msg.h",
      "insertions": 8,
      "deletions": 0
    }
  ],
  "total_insertions": 55,
  "total_deletions": 0,
  "total_changes": 55,
  "parents": [
    "3127a0200d4a46cf279bb388cc0f71827cd60699"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.1",
    "v4.1-rc1",
    "v4.1-rc2",
    "v4.1-rc3",
    "v4.1-rc4",
    "v4.1-rc5",
    "v4.1-rc6",
    "v4.1-rc7",
    "v4.1-rc8",
    "v4.10"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "bypass"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "net/tipc/link.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/tipc/link.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/tipc/msg.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}