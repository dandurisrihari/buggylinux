Commit Hash: 7cba18332e3635aaae60e4e7d4e52849de50d91b
Subject: net: sched: cls_u32: Avoid memcpy() false-positive warning


Security Keywords:
- hardening

Full commit message:
net: sched: cls_u32: Avoid memcpy() false-positive warning

To work around a misbehavior of the compiler's ability to see into
composite flexible array structs (as detailed in the coming memcpy()
hardening series[1]), use unsafe_memcpy(), as the sizing,
bounds-checking, and allocation are all very tightly coupled here.
This silences the false-positive reported by syzbot:

  memcpy: detected field-spanning write (size 80) of single field "&n->sel" at net/sched/cls_u32.c:1043 (size 16)

[1] https://lore.kernel.org/linux-hardening/20220901065914.1417829-2-keescook@chromium.org

Cc: Cong Wang <xiyou.wangcong@gmail.com>
Cc: Jiri Pirko <jiri@resnulli.us>
Reported-by: syzbot+a2c4601efc75848ba321@syzkaller.appspotmail.com
Link: https://lore.kernel.org/lkml/000000000000a96c0b05e97f0444@google.com/
Signed-off-by: Kees Cook <keescook@chromium.org>
Reviewed-by: Jamal Hadi Salim <jhs@mojatatu.com>
Link: https://lore.kernel.org/r/20220927153700.3071688-1-keescook@chromium.org
Signed-off-by: Jakub Kicinski <kuba@kernel.org>

Metadata:
Author: Kees Cook <keescook@chromium.org>
Author Date: Tue Sep 27 08:37:01 2022 -0700
Committer: Jakub Kicinski <kuba@kernel.org>
Commit Date: Thu Sep 29 18:44:07 2022 -0700

Files Changed: 1
Lines Added: 5
Lines Removed: 1
Total Changes: 6
