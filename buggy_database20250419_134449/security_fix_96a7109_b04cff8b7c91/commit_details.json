{
  "hash": "96a7109a16665255b65d021e24141c2edae0e202",
  "hash_short": "96a7109a",
  "subject": "mac80211: Set priority and queue mapping for injected frames",
  "body": "Some drivers, for example mt76, use the skb priority field, and\nexpects that to be consistent with the skb queue mapping. On some\nframe injection code paths that was not true, and it broke frame\ninjection. Now the skb queue mapping is set according to the skb\npriority value when the frame is injected. The skb priority value\nis also derived from the frame data for all frame types, as it\nwas done prior to commit dbd50a851c50 (only allocate one queue\nwhen using iTXQs). Fixes frame injection with the mt76 driver on\nMT7610E chipset.\n\nSigned-off-by: Johan Almbladh <johan.almbladh@anyfinetworks.com>\nLink: https://lore.kernel.org/r/20210401164455.978245-1-johan.almbladh@anyfinetworks.com\nSigned-off-by: Johannes Berg <johannes.berg@intel.com>",
  "full_message": "mac80211: Set priority and queue mapping for injected frames\n\nSome drivers, for example mt76, use the skb priority field, and\nexpects that to be consistent with the skb queue mapping. On some\nframe injection code paths that was not true, and it broke frame\ninjection. Now the skb queue mapping is set according to the skb\npriority value when the frame is injected. The skb priority value\nis also derived from the frame data for all frame types, as it\nwas done prior to commit dbd50a851c50 (only allocate one queue\nwhen using iTXQs). Fixes frame injection with the mt76 driver on\nMT7610E chipset.\n\nSigned-off-by: Johan Almbladh <johan.almbladh@anyfinetworks.com>\nLink: https://lore.kernel.org/r/20210401164455.978245-1-johan.almbladh@anyfinetworks.com\nSigned-off-by: Johannes Berg <johannes.berg@intel.com>",
  "author_name": "Johan Almbladh",
  "author_email": "johan.almbladh@anyfinetworks.com",
  "author_date": "Thu Apr 1 18:44:55 2021 +0200",
  "author_date_iso": "2021-04-01T18:44:55+02:00",
  "committer_name": "Johannes Berg",
  "committer_email": "johannes.berg@intel.com",
  "committer_date": "Thu Apr 8 15:32:04 2021 +0200",
  "committer_date_iso": "2021-04-08T15:32:04+02:00",
  "files_changed": [
    "net/mac80211/tx.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "net/mac80211/tx.c",
      "insertions": 9,
      "deletions": 11
    }
  ],
  "total_insertions": 9,
  "total_deletions": 11,
  "total_changes": 20,
  "parents": [
    "55f8205e7dddb2151def733cefbbf63deba9e1a5"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "net/mac80211/tx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}