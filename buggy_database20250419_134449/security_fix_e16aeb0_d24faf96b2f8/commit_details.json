{
  "hash": "e16aeb072682d3dcdbdad452c974baa0d2b0c6db",
  "hash_short": "e16aeb07",
  "subject": "arm64: ptrauth: Introduce Armv8.3 pointer authentication enhancements",
  "body": "Some Armv8.3 Pointer Authentication enhancements have been introduced\nwhich are mandatory for Armv8.6 and optional for Armv8.3. These features\nare,\n\n* ARMv8.3-PAuth2 - An enhanced PAC generation logic is added which hardens\n  finding the correct PAC value of the authenticated pointer.\n\n* ARMv8.3-FPAC - Fault is generated now when the ptrauth authentication\n  instruction fails in authenticating the PAC present in the address.\n  This is different from earlier case when such failures just adds an\n  error code in the top byte and waits for subsequent load/store to abort.\n  The ptrauth instructions which may cause this fault are autiasp, retaa\n  etc.\n\nThe above features are now represented by additional configurations\nfor the Address Authentication cpufeature and a new ESR exception class.\n\nThe userspace fault received in the kernel due to ARMv8.3-FPAC is treated\nas Illegal instruction and hence signal SIGILL is injected with ILL_ILLOPN\nas the signal code. Note that this is different from earlier ARMv8.3\nptrauth where signal SIGSEGV is issued due to Pointer authentication\nfailures. The in-kernel PAC fault causes kernel to crash.\n\nSigned-off-by: Amit Daniel Kachhap <amit.kachhap@arm.com>\nReviewed-by: Dave Martin <Dave.Martin@arm.com>\nLink: https://lore.kernel.org/r/20200914083656.21428-4-amit.kachhap@arm.com\nSigned-off-by: Will Deacon <will@kernel.org>",
  "full_message": "arm64: ptrauth: Introduce Armv8.3 pointer authentication enhancements\n\nSome Armv8.3 Pointer Authentication enhancements have been introduced\nwhich are mandatory for Armv8.6 and optional for Armv8.3. These features\nare,\n\n* ARMv8.3-PAuth2 - An enhanced PAC generation logic is added which hardens\n  finding the correct PAC value of the authenticated pointer.\n\n* ARMv8.3-FPAC - Fault is generated now when the ptrauth authentication\n  instruction fails in authenticating the PAC present in the address.\n  This is different from earlier case when such failures just adds an\n  error code in the top byte and waits for subsequent load/store to abort.\n  The ptrauth instructions which may cause this fault are autiasp, retaa\n  etc.\n\nThe above features are now represented by additional configurations\nfor the Address Authentication cpufeature and a new ESR exception class.\n\nThe userspace fault received in the kernel due to ARMv8.3-FPAC is treated\nas Illegal instruction and hence signal SIGILL is injected with ILL_ILLOPN\nas the signal code. Note that this is different from earlier ARMv8.3\nptrauth where signal SIGSEGV is issued due to Pointer authentication\nfailures. The in-kernel PAC fault causes kernel to crash.\n\nSigned-off-by: Amit Daniel Kachhap <amit.kachhap@arm.com>\nReviewed-by: Dave Martin <Dave.Martin@arm.com>\nLink: https://lore.kernel.org/r/20200914083656.21428-4-amit.kachhap@arm.com\nSigned-off-by: Will Deacon <will@kernel.org>",
  "author_name": "Amit Daniel Kachhap",
  "author_email": "amit.kachhap@arm.com",
  "author_date": "Mon Sep 14 14:06:53 2020 +0530",
  "author_date_iso": "2020-09-14T14:06:53+05:30",
  "committer_name": "Will Deacon",
  "committer_email": "will@kernel.org",
  "committer_date": "Mon Sep 14 12:07:02 2020 +0100",
  "committer_date_iso": "2020-09-14T12:07:02+01:00",
  "files_changed": [
    "arch/arm64/include/asm/esr.h",
    "arch/arm64/include/asm/exception.h",
    "arch/arm64/include/asm/sysreg.h",
    "arch/arm64/kernel/entry-common.c",
    "arch/arm64/kernel/traps.c"
  ],
  "files_changed_count": 5,
  "stats": [
    {
      "file": "arch/arm64/include/asm/esr.h",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "arch/arm64/include/asm/exception.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/sysreg.h",
      "insertions": 16,
      "deletions": 8
    },
    {
      "file": "arch/arm64/kernel/entry-common.c",
      "insertions": 21,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kernel/traps.c",
      "insertions": 12,
      "deletions": 0
    }
  ],
  "total_insertions": 53,
  "total_deletions": 9,
  "total_changes": 62,
  "parents": [
    "4ef333b2d10680b5d966a733ed7171f72164fcd5"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/arm64/include/asm/esr.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/asm/exception.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/include/asm/sysreg.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kernel/entry-common.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kernel/traps.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}