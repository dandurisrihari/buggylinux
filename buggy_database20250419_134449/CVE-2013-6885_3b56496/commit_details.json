{
  "hash": "3b56496865f9f7d9bcb2f93b44c63f274f08e3b6",
  "hash_short": "3b564968",
  "subject": "x86, cpu, amd: Add workaround for family 16h, erratum 793",
  "body": "This adds the workaround for erratum 793 as a precaution in case not\nevery BIOS implements it.  This addresses CVE-2013-6885.\n\nErratum text:\n\n[Revision Guide for AMD Family 16h Models 00h-0Fh Processors,\ndocument 51810 Rev. 3.04 November 2013]\n\n793 Specific Combination of Writes to Write Combined Memory Types and\nLocked Instructions May Cause Core Hang\n\nDescription\n\nUnder a highly specific and detailed set of internal timing\nconditions, a locked instruction may trigger a timing sequence whereby\nthe write to a write combined memory type is not flushed, causing the\nlocked instruction to stall indefinitely.\n\nPotential Effect on System\n\nProcessor core hang.\n\nSuggested Workaround\n\nBIOS should set MSR\nC001_1020[15] = 1b.\n\nFix Planned\n\nNo fix planned\n\n[ hpa: updated description, fixed typo in MSR name ]\n\nSigned-off-by: Borislav Petkov <bp@suse.de>\nLink: http://lkml.kernel.org/r/20140114230711.GS29865@pd.tnic\nTested-by: Aravind Gopalakrishnan <aravind.gopalakrishnan@amd.com>\nSigned-off-by: H. Peter Anvin <hpa@linux.intel.com>",
  "full_message": "x86, cpu, amd: Add workaround for family 16h, erratum 793\n\nThis adds the workaround for erratum 793 as a precaution in case not\nevery BIOS implements it.  This addresses CVE-2013-6885.\n\nErratum text:\n\n[Revision Guide for AMD Family 16h Models 00h-0Fh Processors,\ndocument 51810 Rev. 3.04 November 2013]\n\n793 Specific Combination of Writes to Write Combined Memory Types and\nLocked Instructions May Cause Core Hang\n\nDescription\n\nUnder a highly specific and detailed set of internal timing\nconditions, a locked instruction may trigger a timing sequence whereby\nthe write to a write combined memory type is not flushed, causing the\nlocked instruction to stall indefinitely.\n\nPotential Effect on System\n\nProcessor core hang.\n\nSuggested Workaround\n\nBIOS should set MSR\nC001_1020[15] = 1b.\n\nFix Planned\n\nNo fix planned\n\n[ hpa: updated description, fixed typo in MSR name ]\n\nSigned-off-by: Borislav Petkov <bp@suse.de>\nLink: http://lkml.kernel.org/r/20140114230711.GS29865@pd.tnic\nTested-by: Aravind Gopalakrishnan <aravind.gopalakrishnan@amd.com>\nSigned-off-by: H. Peter Anvin <hpa@linux.intel.com>",
  "author_name": "Borislav Petkov",
  "author_email": "bp@suse.de",
  "author_date": "Wed Jan 15 00:07:11 2014 +0100",
  "author_date_iso": "2014-01-15T00:07:11+01:00",
  "committer_name": "H. Peter Anvin",
  "committer_email": "hpa@linux.intel.com",
  "committer_date": "Tue Jan 14 16:39:07 2014 -0800",
  "committer_date_iso": "2014-01-14T16:39:07-08:00",
  "files_changed": [
    "arch/x86/include/uapi/asm/msr-index.h",
    "arch/x86/kernel/cpu/amd.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "arch/x86/include/uapi/asm/msr-index.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/kernel/cpu/amd.c",
      "insertions": 10,
      "deletions": 0
    }
  ],
  "total_insertions": 11,
  "total_deletions": 0,
  "total_changes": 11,
  "parents": [
    "a6da83f98267bc8ee4e34aa899169991eb0ceb93"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v3.14",
    "v3.14-rc1",
    "v3.14-rc2",
    "v3.14-rc3",
    "v3.14-rc4",
    "v3.14-rc5",
    "v3.14-rc6",
    "v3.14-rc7",
    "v3.14-rc8",
    "v3.15"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [
      "CVE-2013-6885"
    ],
    "security_keywords": []
  },
  "fix_type": "cve",
  "file_results": [
    {
      "file": "arch/x86/include/uapi/asm/msr-index.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/cpu/amd.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}