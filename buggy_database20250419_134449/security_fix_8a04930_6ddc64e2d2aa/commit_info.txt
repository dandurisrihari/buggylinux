Commit Hash: 8a04930f2bb0047de4ae18af12e5731084bd555c
Subject: kunit: tool: redo how we construct and mock LinuxSourceTree


Security Keywords:
- inject

Full commit message:
kunit: tool: redo how we construct and mock LinuxSourceTree

Our main function currently has an optional `linux` argument which is
used to by our unit tests to inject a mock.
We currently have the same code copy-pasted several times to do
  if not linux:
    linux = MakeRealInstance(cli_args.foo, cli_args.bar, ...)

But in python, dependency injection isn't necessary or idiomatic when we
can just use mock.patch() to mock things out.

This change
1. adds a helper to create a LinuxSourceTree from the cli_args
2. drops the `linux` parameter in favor of mocking the __init__ func.

Signed-off-by: Daniel Latypov <dlatypov@google.com>
Reviewed-by: David Gow <davidgow@google.com>
Reviewed-by: Brendan Higgins <brendanhiggins@google.com>
Signed-off-by: Shuah Khan <skhan@linuxfoundation.org>

Metadata:
Author: Daniel Latypov <dlatypov@google.com>
Author Date: Mon May 16 12:47:29 2022 -0700
Committer: Shuah Khan <skhan@linuxfoundation.org>
Commit Date: Thu Jul 7 17:45:59 2022 -0600

Files Changed: 2
Lines Added: 65
Lines Removed: 87
Total Changes: 152
