Files changed: 40
Insertions: 165982
Deletions: 34401
Total changes: 200383

File-specific changes:
Documentation/bpf/bpf_design_QA.rst: +45 -0
Documentation/bpf/bpf_devel_QA.rst: +27 -0
Documentation/bpf/bpf_iterators.rst: +485 -0
Documentation/bpf/btf.rst: +6 -1
Documentation/bpf/index.rst: +2 -0
Documentation/bpf/instruction-set.rst: +2 -2
Documentation/bpf/kfuncs.rst: +242 -13
Documentation/bpf/libbpf/index.rst: +3 -0
Documentation/bpf/libbpf/program_types.rst: +203 -0
Documentation/bpf/map_array.rst: +262 -0
Documentation/bpf/map_bloom_filter.rst: +174 -0
Documentation/bpf/map_cgrp_storage.rst: +109 -0
Documentation/bpf/map_cpumap.rst: +177 -0
Documentation/bpf/map_devmap.rst: +238 -0
Documentation/bpf/map_hash.rst: +28 -5
Documentation/bpf/map_lpm_trie.rst: +197 -0
Documentation/bpf/map_of_maps.rst: +130 -0
Documentation/bpf/map_queue_stack.rst: +146 -0
Documentation/bpf/map_sk_storage.rst: +155 -0
Documentation/bpf/map_xskmap.rst: +192 -0
Documentation/bpf/maps.rst: +65 -36
Documentation/bpf/programs.rst: +3 -0
Documentation/bpf/redirect.rst: +81 -0
Documentation/devicetree/bindings/arm/mediatek/mediatek,mt7622-wed.yaml: +52 -0
Documentation/devicetree/bindings/interrupt-controller/fsl,intmux.yaml: +2 -1
Documentation/devicetree/bindings/net/adi,adin1110.yaml: +4 -0
Documentation/devicetree/bindings/net/asix,ax88178.yaml: +3 -1
Documentation/devicetree/bindings/net/bluetooth.txt: +0 -5
Documentation/devicetree/bindings/net/bluetooth/bluetooth-controller.yaml: +29 -0
Documentation/devicetree/bindings/net/bluetooth/brcm,bcm4377-bluetooth.yaml: +81 -0
Documentation/devicetree/bindings/net/{ => bluetooth}/qualcomm-bluetooth.yaml: +3 -3
Documentation/devicetree/bindings/net/broadcom-bluetooth.yaml: +3 -0
Documentation/devicetree/bindings/net/can/fsl,flexcan.yaml: +1 -0
Documentation/devicetree/bindings/net/can/renesas,rcar-canfd.yaml: +73 -62
Documentation/devicetree/bindings/net/dsa/dsa-port.yaml: +2 -1
Documentation/devicetree/bindings/net/dsa/hirschmann,hellcreek.yaml: +1 -1
Documentation/devicetree/bindings/net/dsa/renesas,rzn1-a5psw.yaml: +1 -1
Documentation/devicetree/bindings/net/ethernet-controller.yaml: +10 -1
Documentation/devicetree/bindings/net/fsl,fec.yaml: +3 -1
Documentation/devicetree/bindings/net/fsl,fman-dtsec.yaml: +40 -13
Documentation/devicetree/bindings/net/fsl,qoriq-mc-dpmac.yaml: +1 -1
Documentation/devicetree/bindings/net/fsl-fman.txt: +3 -2
Documentation/devicetree/bindings/net/marvell,dfx-server.yaml: +62 -0
Documentation/devicetree/bindings/net/marvell,pp2.yaml: +305 -0
Documentation/devicetree/bindings/net/marvell,prestera.txt: +0 -81
Documentation/devicetree/bindings/net/marvell,prestera.yaml: +91 -0
Documentation/devicetree/bindings/net/marvell-pp2.txt: +0 -141
Documentation/devicetree/bindings/net/microchip,lan95xx.yaml: +3 -1
Documentation/devicetree/bindings/net/nfc/nxp,nci.yaml: +3 -1
Documentation/devicetree/bindings/net/nxp,dwmac-imx.yaml: +3 -1
Documentation/devicetree/bindings/net/pcs/fsl,lynx-pcs.yaml: +40 -0
Documentation/devicetree/bindings/net/qca,ar71xx.yaml: +0 -1
Documentation/devicetree/bindings/net/qcom,ipa.yaml: +58 -28
Documentation/devicetree/bindings/net/qcom,ipq4019-mdio.yaml: +36 -10
Documentation/devicetree/bindings/net/realtek-bluetooth.yaml: +1 -0
Documentation/devicetree/bindings/net/renesas,r8a779f0-ether-switch.yaml: +262 -0
Documentation/devicetree/bindings/net/sff,sfp.yaml: +2 -1
Documentation/devicetree/bindings/net/snps,dwmac.yaml: +264 -81
Documentation/devicetree/bindings/net/socionext,synquacer-netsec.yaml: +73 -0
Documentation/devicetree/bindings/net/socionext-netsec.txt: +0 -56
Documentation/devicetree/bindings/net/xilinx_axienet.txt: +2 -0
Documentation/devicetree/bindings/soc/mediatek/mediatek,mt7986-wo-ccif.yaml: +51 -0
Documentation/devicetree/bindings/soc/qcom/qcom,wcnss.yaml: +3 -5
Documentation/networking/bonding.rst: +3 -1
Documentation/networking/can.rst: +33 -0
Documentation/networking/device_drivers/ethernet/freescale/dpaa2/mac-phy-support.rst: +6 -3
Documentation/networking/device_drivers/ethernet/marvell/octeon_ep.rst: +1 -0
Documentation/networking/device_drivers/ethernet/mellanox/mlx5.rst: +54 -70
Documentation/networking/device_drivers/ethernet/netronome/nfp.rst: +145 -20
Documentation/networking/devlink/devlink-info.rst: +5 -0
Documentation/networking/devlink/devlink-port.rst: +161 -7
Documentation/networking/devlink/devlink-region.rst: +13 -0
Documentation/networking/devlink/devlink-trap.rst: +13 -0
Documentation/networking/devlink/etas_es58x.rst: +36 -0
Documentation/networking/devlink/ice.rst: +126 -2
Documentation/networking/ethtool-netlink.rst: +31 -1
Documentation/networking/index.rst: +1 -0
Documentation/networking/ip-sysctl.rst: +111 -0
Documentation/networking/ipvs-sysctl.rst: +22 -2
Documentation/networking/tc-queue-filters.rst: +37 -0
Documentation/networking/timestamping.rst: +31 -1
Documentation/networking/xfrm_device.rst: +53 -9
MAINTAINERS: +17 -6
arch/arm/boot/dts/armada-375.dtsi: +8 -4
arch/arm/mach-omap2/pdata-quirks.c: +0 -1
arch/arm64/boot/dts/apple/t8103-j274.dts: +4 -0
arch/arm64/boot/dts/apple/t8103-j293.dts: +4 -0
arch/arm64/boot/dts/apple/t8103-j313.dts: +4 -0
arch/arm64/boot/dts/apple/t8103-j456.dts: +4 -0
arch/arm64/boot/dts/apple/t8103-j457.dts: +4 -0
arch/arm64/boot/dts/apple/t8103-jxxx.dtsi: +8 -0
arch/arm64/boot/dts/freescale/fsl-ls1043-post.dtsi: +24 -0
arch/arm64/boot/dts/freescale/fsl-ls1046-post.dtsi: +25 -0
arch/arm64/boot/dts/marvell/armada-cp11x.dtsi: +11 -6
arch/arm64/boot/dts/mediatek/mt7986a.dtsi: +65 -0
arch/arm64/net/bpf_jit_comp.c: +2 -7
arch/mips/configs/mtx1_defconfig: +0 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-0-10g-0-best-effort.dtsi: +2 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-0-10g-0.dtsi: +9 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-0-10g-1-best-effort.dtsi: +9 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-0-10g-1.dtsi: +9 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-0-10g-2.dtsi: +45 -0
arch/powerpc/boot/dts/fsl/qoriq-fman3-0-10g-3.dtsi: +45 -0
arch/powerpc/boot/dts/fsl/qoriq-fman3-0-1g-0.dtsi: +2 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-0-1g-1.dtsi: +9 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-0-1g-2.dtsi: +9 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-0-1g-3.dtsi: +9 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-0-1g-4.dtsi: +2 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-0-1g-5.dtsi: +9 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-1-10g-0.dtsi: +9 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-1-10g-1.dtsi: +9 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-1-1g-0.dtsi: +2 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-1-1g-1.dtsi: +9 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-1-1g-2.dtsi: +9 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-1-1g-3.dtsi: +9 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-1-1g-4.dtsi: +2 -1
arch/powerpc/boot/dts/fsl/qoriq-fman3-1-1g-5.dtsi: +9 -1
arch/powerpc/boot/dts/fsl/t2081si-post.dtsi: +2 -2
arch/powerpc/configs/ppc6xx_defconfig: +0 -1
arch/riscv/net/bpf_jit_comp64.c: +28 -1
arch/sparc/net/bpf_jit_comp_32.c: +5 -5
arch/x86/net/bpf_jit_comp.c: +97 -31
drivers/bcma/driver_gpio.c: +6 -2
drivers/bcma/main.c: +3 -1
drivers/bcma/sprom.c: +1 -1
drivers/bluetooth/Kconfig: +23 -0
drivers/bluetooth/Makefile: +1 -0
drivers/bluetooth/btintel.c: +11 -10
drivers/bluetooth/btrtl.c: +7 -0
drivers/bluetooth/btrtl.h: +21 -0
drivers/bluetooth/btusb.c: +204 -32
drivers/bluetooth/hci_bcm.c: +12 -1
drivers/bluetooth/hci_bcm4377.c: +2514 -0
drivers/bluetooth/hci_bcsp.c: +1 -1
drivers/bluetooth/hci_h5.c: +1 -1
drivers/bluetooth/hci_ll.c: +1 -1
drivers/bluetooth/hci_qca.c: +3 -2
drivers/bluetooth/virtio_bt.c: +30 -5
drivers/crypto/marvell/octeontx2/otx2_cpt_devlink.c: +0 -4
drivers/hv/hv_util.c: +2 -2
drivers/infiniband/hw/mlx5/odp.c: +1 -2
drivers/infiniband/hw/mlx5/umr.c: +7 -7
drivers/net/bonding/bond_3ad.c: +9 -0
drivers/net/bonding/bond_main.c: +25 -19
drivers/net/bonding/bond_options.c: +0 -18
drivers/net/can/Kconfig: +0 -8
drivers/net/can/Makefile: +0 -1
drivers/net/can/c_can/Kconfig: +2 -1
drivers/net/can/c_can/c_can_platform.c: +1 -2
drivers/net/can/ctucanfd/Kconfig: +1 -1
drivers/net/can/flexcan/flexcan-core.c: +34 -3
drivers/net/can/flexcan/flexcan.h: +2 -0
drivers/net/can/m_can/m_can.c: +102 -54
drivers/net/can/m_can/m_can.h: +9 -9
drivers/net/can/m_can/m_can_platform.c: +1 -5
drivers/net/can/m_can/tcan4x5x-core.c: +4 -14
drivers/net/can/m_can/tcan4x5x-regmap.c: +39 -8
drivers/net/can/pch_can.c: +0 -1249
drivers/net/can/rcar/rcar_canfd.c: +63 -46
drivers/net/can/usb/Kconfig: +7 -3
drivers/net/can/usb/etas_es58x/Makefile: +1 -1
drivers/net/can/usb/etas_es58x/es581_4.c: +2 -2
drivers/net/can/usb/etas_es58x/es58x_core.c: +42 -62
drivers/net/can/usb/etas_es58x/es58x_core.h: +54 -4
drivers/net/can/usb/etas_es58x/es58x_devlink.c: +235 -0
drivers/net/can/usb/etas_es58x/es58x_fd.c: +2 -2
drivers/net/can/usb/gs_usb.c: +69 -30
drivers/net/can/usb/kvaser_usb/Makefile: +0 -5
drivers/net/can/usb/kvaser_usb/kvaser_usb.h: +27 -3
drivers/net/can/usb/kvaser_usb/kvaser_usb_core.c: +104 -9
drivers/net/can/usb/kvaser_usb/kvaser_usb_hydra.c: +130 -30
drivers/net/can/usb/kvaser_usb/kvaser_usb_leaf.c: +415 -49
drivers/net/can/usb/ucan.c: +5 -7
drivers/net/can/vxcan.c: +1 -1
drivers/net/dsa/Kconfig: +2 -0
drivers/net/dsa/b53/Kconfig: +1 -0
drivers/net/dsa/hirschmann/hellcreek.c: +0 -5
drivers/net/dsa/lan9303-core.c: +3 -1
drivers/net/dsa/lan9303_i2c.c: +2 -3
drivers/net/dsa/microchip/Kconfig: +1 -0
drivers/net/dsa/microchip/ksz8.h: +1 -0
drivers/net/dsa/microchip/ksz8795.c: +63 -12
drivers/net/dsa/microchip/ksz8795_reg.h: +3 -0
drivers/net/dsa/microchip/ksz8863_smi.c: +4 -5
drivers/net/dsa/microchip/ksz9477.c: +9 -15
drivers/net/dsa/microchip/ksz9477.h: +0 -1
drivers/net/dsa/microchip/ksz9477_i2c.c: +8 -9
drivers/net/dsa/microchip/ksz9477_reg.h: +0 -2
drivers/net/dsa/microchip/ksz_common.c: +143 -7
drivers/net/dsa/microchip/ksz_common.h: +15 -2
drivers/net/dsa/microchip/ksz_spi.c: +4 -6
drivers/net/dsa/microchip/lan937x_main.c: +5 -1
drivers/net/dsa/mv88e6xxx/Makefile: +4 -0
drivers/net/dsa/mv88e6xxx/chip.c: +4 -0
drivers/net/dsa/mv88e6xxx/devlink.c: +0 -5
drivers/net/dsa/mv88e6xxx/global1_atu.c: +65 -20
drivers/net/dsa/mv88e6xxx/global1_vtu.c: +3 -4
drivers/net/dsa/mv88e6xxx/port.c: +9 -0
drivers/net/dsa/mv88e6xxx/port.h: +2 -0
drivers/net/dsa/mv88e6xxx/trace.c: +6 -0
drivers/net/dsa/mv88e6xxx/trace.h: +96 -0
drivers/net/dsa/ocelot/felix.c: +4 -13
drivers/net/dsa/ocelot/felix.h: +0 -4
drivers/net/dsa/ocelot/felix_vsc9959.c: +0 -35
drivers/net/dsa/ocelot/seville_vsc9953.c: +0 -32
drivers/net/dsa/sja1105/sja1105_devlink.c: +3 -9
drivers/net/dsa/xrs700x/xrs700x_i2c.c: +2 -3
drivers/net/dummy.c: +0 -7
drivers/net/ethernet/Kconfig: +0 -10
drivers/net/ethernet/Makefile: +0 -1
drivers/net/ethernet/adi/adin1110.c: +37 -21
drivers/net/ethernet/alacritech/slic.h: +6 -6
drivers/net/ethernet/altera/altera_tse_main.c: +0 -1
drivers/net/ethernet/amazon/ena/ena_ethtool.c: +2 -2
drivers/net/ethernet/amazon/ena/ena_netdev.c: +6 -6
drivers/net/ethernet/amd/atarilance.c: +1 -1
drivers/net/ethernet/amd/lance.c: +1 -1
drivers/net/ethernet/amd/xgbe/xgbe-phy-v2.c: +8 -15
drivers/net/ethernet/amd/xgbe/xgbe-ptp.c: +4 -16
drivers/net/ethernet/apple/bmac.c: +1 -1
drivers/net/ethernet/apple/mace.c: +1 -1
drivers/net/ethernet/aquantia/atlantic/aq_ring.c: +4 -4
drivers/net/ethernet/asix/ax88796c_main.c: +2 -2
drivers/net/ethernet/atheros/ag71xx.c: +0 -1
drivers/net/ethernet/broadcom/b44.c: +4 -4
drivers/net/ethernet/broadcom/bcm4908_enet.c: +40 -17
drivers/net/ethernet/broadcom/bcmsysport.c: +17 -6
drivers/net/ethernet/broadcom/bcmsysport.h: +11 -0
drivers/net/ethernet/broadcom/bnx2.c: +4 -3
drivers/net/ethernet/broadcom/bnx2x/bnx2x_main.c: +5 -4
drivers/net/ethernet/broadcom/bnxt/bnxt.c: +79 -33
drivers/net/ethernet/broadcom/bnxt/bnxt.h: +3 -0
drivers/net/ethernet/broadcom/bnxt/bnxt_devlink.c: +0 -4
drivers/net/ethernet/broadcom/bnxt/bnxt_ethtool.c: +127 -7
drivers/net/ethernet/broadcom/bnxt/bnxt_hsi.h: +216 -65
drivers/net/ethernet/broadcom/bnxt/bnxt_ptp.c: +25 -14
drivers/net/ethernet/broadcom/bnxt/bnxt_ptp.h: +5 -2
drivers/net/ethernet/broadcom/genet/bcmgenet.c: +27 -22
drivers/net/ethernet/broadcom/genet/bcmmii.c: +14 -5
drivers/net/ethernet/broadcom/tg3.c: +7 -15
drivers/net/ethernet/brocade/bna/bfa_cs.h: +38 -22
drivers/net/ethernet/brocade/bna/bfa_ioc.c: +5 -5
drivers/net/ethernet/brocade/bna/bfa_ioc.h: +6 -2
drivers/net/ethernet/brocade/bna/bfa_msgq.c: +0 -2
drivers/net/ethernet/brocade/bna/bfa_msgq.h: +6 -2
drivers/net/ethernet/brocade/bna/bna_enet.c: +3 -3
drivers/net/ethernet/brocade/bna/bna_tx_rx.c: +3 -3
drivers/net/ethernet/brocade/bna/bna_types.h: +21 -6
drivers/net/ethernet/cadence/macb_main.c: +15 -2
drivers/net/ethernet/cavium/liquidio/lio_main.c: +7 -4
drivers/net/ethernet/cavium/liquidio/octeon_console.c: +3 -4
drivers/net/ethernet/chelsio/cxgb4/cxgb4_ptp.c: +8 -5
drivers/net/ethernet/chelsio/inline_crypto/ch_ipsec/chcr_ipsec.c: +4 -0
drivers/net/ethernet/chelsio/inline_crypto/ch_ktls/chcr_ktls.c: +12 -14
drivers/net/ethernet/cisco/enic/enic.h: +6 -17
drivers/net/ethernet/cisco/enic/enic_main.c: +5 -6
drivers/net/ethernet/cortina/gemini.c: +12 -12
drivers/net/ethernet/dlink/dl2k.c: +0 -2
drivers/net/ethernet/dlink/sundance.c: +0 -2
drivers/net/ethernet/dnet.c: +2 -2
drivers/net/ethernet/emulex/benet/be_ethtool.c: +6 -6
drivers/net/ethernet/emulex/benet/be_main.c: +8 -8
drivers/net/ethernet/engleder/tsnep.h: +8 -0
drivers/net/ethernet/engleder/tsnep_ethtool.c: +159 -6
drivers/net/ethernet/engleder/tsnep_hw.h: +7 -0
drivers/net/ethernet/engleder/tsnep_main.c: +171 -74
drivers/net/ethernet/faraday/ftmac100.c: +45 -20
drivers/net/ethernet/fealnx.c: +0 -1953
drivers/net/ethernet/freescale/Kconfig: +1 -0
drivers/net/ethernet/freescale/dpaa/Kconfig: +2 -2
drivers/net/ethernet/freescale/dpaa/dpaa_eth.c: +26 -63
drivers/net/ethernet/freescale/dpaa/dpaa_ethtool.c: +15 -75
drivers/net/ethernet/freescale/dpaa2/Makefile: +1 -1
drivers/net/ethernet/freescale/dpaa2/dpaa2-eth-debugfs.c: +53 -4
drivers/net/ethernet/freescale/dpaa2/dpaa2-eth-devlink.c: +2 -20
drivers/net/ethernet/freescale/dpaa2/dpaa2-eth-trace.h: +91 -51
drivers/net/ethernet/freescale/dpaa2/dpaa2-eth.c: +415 -194
drivers/net/ethernet/freescale/dpaa2/dpaa2-eth.h: +99 -13
drivers/net/ethernet/freescale/dpaa2/dpaa2-ethtool.c: +91 -37
drivers/net/ethernet/freescale/dpaa2/dpaa2-mac.c: +17 -5
drivers/net/ethernet/freescale/dpaa2/dpaa2-mac.h: +8 -2
drivers/net/ethernet/freescale/dpaa2/dpaa2-ptp.c: +0 -1
drivers/net/ethernet/freescale/dpaa2/dpaa2-switch-ethtool.c: +28 -17
drivers/net/ethernet/freescale/dpaa2/dpaa2-switch.c: +40 -20
drivers/net/ethernet/freescale/dpaa2/dpaa2-switch.h: +3 -6
drivers/net/ethernet/freescale/dpaa2/dpaa2-xsk.c: +454 -0
drivers/net/ethernet/freescale/dpaa2/dpni-cmd.h: +13 -6
drivers/net/ethernet/freescale/dpaa2/dpni.c: +5 -1
drivers/net/ethernet/freescale/dpaa2/dpni.h: +9 -0
drivers/net/ethernet/freescale/enetc/enetc_pf.c: +0 -1
drivers/net/ethernet/freescale/fec.h: +19 -1
drivers/net/ethernet/freescale/fec_main.c: +324 -73
drivers/net/ethernet/freescale/fec_ptp.c: +170 -7
drivers/net/ethernet/freescale/fman/Kconfig: +2 -1
drivers/net/ethernet/freescale/fman/fman_dtsec.c: +211 -246
drivers/net/ethernet/freescale/fman/fman_mac.h: +0 -10
drivers/net/ethernet/freescale/fman/fman_memac.c: +376 -368
drivers/net/ethernet/freescale/fman/fman_tgec.c: +58 -72
drivers/net/ethernet/freescale/fman/mac.c: +6 -162
drivers/net/ethernet/freescale/fman/mac.h: +10 -13
drivers/net/ethernet/fungible/funeth/funeth_devlink.c: +0 -7
drivers/net/ethernet/fungible/funeth/funeth_main.c: +1 -12
drivers/net/ethernet/fungible/funeth/funeth_txrx.h: +2 -2
drivers/net/ethernet/google/gve/gve.h: +21 -6
drivers/net/ethernet/google/gve/gve_adminq.c: +20 -1
drivers/net/ethernet/google/gve/gve_adminq.h: +51 -0
drivers/net/ethernet/google/gve/gve_desc_dqo.h: +5 -0
drivers/net/ethernet/google/gve/gve_ethtool.c: +10 -8
drivers/net/ethernet/google/gve/gve_main.c: +58 -6
drivers/net/ethernet/google/gve/gve_rx.c: +309 -235
drivers/net/ethernet/google/gve/gve_rx_dqo.c: +1 -1
drivers/net/ethernet/google/gve/gve_tx_dqo.c: +13 -7
drivers/net/ethernet/google/gve/gve_utils.c: +7 -23
drivers/net/ethernet/google/gve/gve_utils.h: +1 -1
drivers/net/ethernet/hisilicon/hns/hnae.c: +0 -3
drivers/net/ethernet/hisilicon/hns/hns_ethtool.c: +4 -7
drivers/net/ethernet/hisilicon/hns3/hns3_enet.c: +2 -2
drivers/net/ethernet/hisilicon/hns3/hns3_ethtool.c: +2 -4
drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_devlink.c: +0 -5
drivers/net/ethernet/hisilicon/hns3/hns3pf/hclge_ptp.c: +5 -17
drivers/net/ethernet/hisilicon/hns3/hns3vf/hclgevf_devlink.c: +0 -5
drivers/net/ethernet/huawei/hinic/hinic_dev.h: +4 -0
drivers/net/ethernet/huawei/hinic/hinic_hw_dev.h: +118 -52
drivers/net/ethernet/huawei/hinic/hinic_main.c: +12 -1
drivers/net/ethernet/huawei/hinic/hinic_port.c: +34 -16
drivers/net/ethernet/huawei/hinic/hinic_port.h: +12 -0
drivers/net/ethernet/huawei/hinic/hinic_rx.c: +2 -2
drivers/net/ethernet/huawei/hinic/hinic_sriov.c: +18 -0
drivers/net/ethernet/huawei/hinic/hinic_tx.c: +2 -2
drivers/net/ethernet/ibm/ibmveth.c: +1 -17
drivers/net/ethernet/ibm/ibmveth.h: +0 -1
drivers/net/ethernet/ibm/ibmvnic.c: +238 -1
drivers/net/ethernet/ibm/ibmvnic.h: +5 -0
drivers/net/ethernet/intel/e1000/e1000_main.c: +3 -6
drivers/net/ethernet/intel/e1000e/Makefile: +3 -0
drivers/net/ethernet/intel/e1000e/e1000.h: +3 -1
drivers/net/ethernet/intel/e1000e/e1000e_trace.h: +42 -0
drivers/net/ethernet/intel/e1000e/ethtool.c: +2 -0
drivers/net/ethernet/intel/e1000e/hw.h: +9 -0
drivers/net/ethernet/intel/e1000e/ich8lan.c: +27 -0
drivers/net/ethernet/intel/e1000e/netdev.c: +28 -23
drivers/net/ethernet/intel/e1000e/ptp.c: +4 -13
drivers/net/ethernet/intel/fm10k/fm10k_netdev.c: +4 -4
drivers/net/ethernet/intel/i40e/i40e.h: +1 -0
drivers/net/ethernet/intel/i40e/i40e_adminq_cmd.h: +5 -3
drivers/net/ethernet/intel/i40e/i40e_common.c: +26 -0
drivers/net/ethernet/intel/i40e/i40e_ethtool.c: +7 -5
drivers/net/ethernet/intel/i40e/i40e_main.c: +62 -23
drivers/net/ethernet/intel/i40e/i40e_prototype.h: +3 -0
drivers/net/ethernet/intel/i40e/i40e_ptp.c: +3 -14
drivers/net/ethernet/intel/i40e/i40e_trace.h: +49 -0
drivers/net/ethernet/intel/i40e/i40e_txrx.c: +21 -6
drivers/net/ethernet/intel/iavf/iavf_ethtool.c: +4 -4
drivers/net/ethernet/intel/iavf/iavf_main.c: +2 -2
drivers/net/ethernet/intel/ice/ice.h: +24 -0
drivers/net/ethernet/intel/ice/ice_adminq_cmd.h: +2 -2
drivers/net/ethernet/intel/ice/ice_base.c: +1 -1
drivers/net/ethernet/intel/ice/ice_common.c: +44 -4
drivers/net/ethernet/intel/ice/ice_common.h: +1 -0
drivers/net/ethernet/intel/ice/ice_dcb.c: +1 -1
drivers/net/ethernet/intel/ice/ice_dcb_lib.c: +10 -0
drivers/net/ethernet/intel/ice/ice_devlink.c: +570 -64
drivers/net/ethernet/intel/ice/ice_devlink.h: +3 -0
drivers/net/ethernet/intel/ice/ice_ethtool.c: +175 -6
drivers/net/ethernet/intel/ice/ice_hw_autogen.h: +3 -0
drivers/net/ethernet/intel/ice/ice_lan_tx_rx.h: +0 -12
drivers/net/ethernet/intel/ice/ice_lib.c: +237 -35
drivers/net/ethernet/intel/ice/ice_main.c: +90 -45
drivers/net/ethernet/intel/ice/ice_ptp.c: +272 -292
drivers/net/ethernet/intel/ice/ice_ptp.h: +25 -14
drivers/net/ethernet/intel/ice/ice_ptp_hw.c: +166 -182
drivers/net/ethernet/intel/ice/ice_ptp_hw.h: +6 -2
drivers/net/ethernet/intel/ice/ice_repr.c: +25 -15
drivers/net/ethernet/intel/ice/ice_sched.c: +93 -11
drivers/net/ethernet/intel/ice/ice_sched.h: +30 -1
drivers/net/ethernet/intel/ice/ice_tc_lib.c: +251 -100
drivers/net/ethernet/intel/ice/ice_tc_lib.h: +32 -8
drivers/net/ethernet/intel/ice/ice_txrx.c: +26 -14
drivers/net/ethernet/intel/ice/ice_txrx.h: +12 -6
drivers/net/ethernet/intel/ice/ice_txrx_lib.c: +1 -1
drivers/net/ethernet/intel/ice/ice_type.h: +9 -0
drivers/net/ethernet/intel/ice/ice_vf_lib.c: +24 -0
drivers/net/ethernet/intel/ice/ice_vf_lib_private.h: +1 -0
drivers/net/ethernet/intel/ice/ice_vf_mbx.c: +24 -68
drivers/net/ethernet/intel/ice/ice_virtchnl.c: +195 -0
drivers/net/ethernet/intel/ice/ice_virtchnl.h: +4 -0
drivers/net/ethernet/intel/ice/ice_virtchnl_allowlist.c: +6 -0
drivers/net/ethernet/intel/ice/ice_xsk.c: +18 -7
drivers/net/ethernet/intel/igb/igb_ethtool.c: +6 -6
drivers/net/ethernet/intel/igb/igb_main.c: +11 -7
drivers/net/ethernet/intel/igb/igb_ptp.c: +2 -16
drivers/net/ethernet/intel/igc/igc_defines.h: +9 -0
drivers/net/ethernet/intel/igc/igc_ethtool.c: +6 -6
drivers/net/ethernet/intel/igc/igc_main.c: +11 -4
drivers/net/ethernet/intel/igc/igc_regs.h: +1 -0
drivers/net/ethernet/intel/igc/igc_tsn.c: +30 -0
drivers/net/ethernet/intel/igc/igc_tsn.h: +1 -0
drivers/net/ethernet/intel/ixgbe/ixgbe.h: +8 -2
drivers/net/ethernet/intel/ixgbe/ixgbe_ethtool.c: +46 -15
drivers/net/ethernet/intel/ixgbe/ixgbe_ipsec.c: +5 -0
drivers/net/ethernet/intel/ixgbe/ixgbe_main.c: +4 -4
drivers/net/ethernet/intel/ixgbe/ixgbe_ptp.c: +5 -21
drivers/net/ethernet/intel/ixgbevf/ethtool.c: +6 -6
drivers/net/ethernet/intel/ixgbevf/ipsec.c: +5 -0
drivers/net/ethernet/intel/ixgbevf/ixgbevf_main.c: +16 -9
drivers/net/ethernet/marvell/mv643xx_eth.c: +42 -7
drivers/net/ethernet/marvell/mvneta.c: +5 -8
drivers/net/ethernet/marvell/mvpp2/mvpp2_main.c: +11 -5
drivers/net/ethernet/marvell/octeon_ep/octep_main.c: +17 -3
drivers/net/ethernet/marvell/octeon_ep/octep_main.h: +2 -0
drivers/net/ethernet/marvell/octeontx2/af/cgx.c: +50 -28
drivers/net/ethernet/marvell/octeontx2/af/cgx.h: +3 -6
drivers/net/ethernet/marvell/octeontx2/af/lmac_common.h: +13 -2
drivers/net/ethernet/marvell/octeontx2/af/mbox.h: +18 -0
drivers/net/ethernet/marvell/octeontx2/af/mcs.c: +5 -1
drivers/net/ethernet/marvell/octeontx2/af/npc.h: +3 -0
drivers/net/ethernet/marvell/octeontx2/af/rpm.c: +239 -23
drivers/net/ethernet/marvell/octeontx2/af/rpm.h: +35 -1
drivers/net/ethernet/marvell/octeontx2/af/rvu.h: +10 -3
drivers/net/ethernet/marvell/octeontx2/af/rvu_cgx.c: +34 -15
drivers/net/ethernet/marvell/octeontx2/af/rvu_debugfs.c: +15 -1
drivers/net/ethernet/marvell/octeontx2/af/rvu_devlink.c: +0 -7
drivers/net/ethernet/marvell/octeontx2/af/rvu_nix.c: +7 -3
drivers/net/ethernet/marvell/octeontx2/af/rvu_npc.c: +22 -0
drivers/net/ethernet/marvell/octeontx2/af/rvu_npc_fs.c: +126 -25
drivers/net/ethernet/marvell/octeontx2/af/rvu_npc_hash.c: +11 -10
drivers/net/ethernet/marvell/octeontx2/nic/otx2_common.h: +3 -0
drivers/net/ethernet/marvell/octeontx2/nic/otx2_devlink.c: +0 -15
drivers/net/ethernet/marvell/octeontx2/nic/otx2_ethtool.c: +34 -0
drivers/net/ethernet/marvell/octeontx2/nic/otx2_flows.c: +46 -6
drivers/net/ethernet/marvell/octeontx2/nic/otx2_pf.c: +1 -1
drivers/net/ethernet/marvell/octeontx2/nic/otx2_tc.c: +25 -0
drivers/net/ethernet/marvell/prestera/prestera_devlink.c: +0 -22
drivers/net/ethernet/marvell/prestera/prestera_devlink.h: +0 -5
drivers/net/ethernet/marvell/prestera/prestera_main.c: +5 -16
drivers/net/ethernet/marvell/prestera/prestera_pci.c: +105 -14
drivers/net/ethernet/marvell/sky2.c: +4 -4
drivers/net/ethernet/mediatek/Makefile: +1 -1
drivers/net/ethernet/mediatek/mtk_eth_soc.c: +390 -114
drivers/net/ethernet/mediatek/mtk_eth_soc.h: +47 -12
drivers/net/ethernet/mediatek/mtk_ppe.c: +21 -1
drivers/net/ethernet/mediatek/mtk_ppe.h: +4 -0
drivers/net/ethernet/mediatek/mtk_ppe_offload.c: +9 -3
drivers/net/ethernet/mediatek/mtk_sgmii.c: +100 -74
drivers/net/ethernet/mediatek/mtk_wed.c: +763 -100
drivers/net/ethernet/mediatek/mtk_wed.h: +21 -0
drivers/net/ethernet/mediatek/mtk_wed_debugfs.c: +87 -0
drivers/net/ethernet/mediatek/mtk_wed_mcu.c: +390 -0
drivers/net/ethernet/mediatek/mtk_wed_regs.h: +138 -2
drivers/net/ethernet/mediatek/mtk_wed_wo.c: +512 -0
drivers/net/ethernet/mediatek/mtk_wed_wo.h: +282 -0
drivers/net/ethernet/mellanox/mlx4/en_clock.c: +11 -18
drivers/net/ethernet/mellanox/mlx4/en_netdev.c: +3 -6
drivers/net/ethernet/mellanox/mlx4/en_tx.c: +10 -8
drivers/net/ethernet/mellanox/mlx4/main.c: +1 -1
drivers/net/ethernet/mellanox/mlx4/mlx4_en.h: +13 -5
drivers/net/ethernet/mellanox/mlx5/core/Makefile: +1 -0
drivers/net/ethernet/mellanox/mlx5/core/cmd.c: +0 -1
drivers/net/ethernet/mellanox/mlx5/core/devlink.c: +6 -13
drivers/net/ethernet/mellanox/mlx5/core/devlink.h: +2 -0
drivers/net/ethernet/mellanox/mlx5/core/diag/fs_tracepoint.c: +16 -0
drivers/net/ethernet/mellanox/mlx5/core/en.h: +7 -4
drivers/net/ethernet/mellanox/mlx5/core/en/devlink.c: +0 -17
drivers/net/ethernet/mellanox/mlx5/core/en/devlink.h: +0 -2
drivers/net/ethernet/mellanox/mlx5/core/en/fs.h: +2 -1
drivers/net/ethernet/mellanox/mlx5/core/en/params.c: +6 -10
drivers/net/ethernet/mellanox/mlx5/core/en/params.h: +14 -0
drivers/net/ethernet/mellanox/mlx5/core/en/rep/tc.c: +0 -1
drivers/net/ethernet/mellanox/mlx5/core/en/tc/act/accept.c: +1 -0
drivers/net/ethernet/mellanox/mlx5/core/en/tc/act/act.c: +1 -1
drivers/net/ethernet/mellanox/mlx5/core/en/tc/act/act.h: +12 -0
drivers/net/ethernet/mellanox/mlx5/core/en/tc/act/drop.c: +1 -0
drivers/net/ethernet/mellanox/mlx5/core/en/tc/act/goto.c: +1 -0
drivers/net/ethernet/mellanox/mlx5/core/en/tc/act/mirred.c: +7 -0
drivers/net/ethernet/mellanox/mlx5/core/en/tc/act/mirred_nic.c: +1 -0
drivers/net/ethernet/mellanox/mlx5/core/en/tc/act/police.c: +74 -12
drivers/net/ethernet/mellanox/mlx5/core/en/tc/act/trap.c: +2 -8
drivers/net/ethernet/mellanox/mlx5/core/en/tc/meter.c: +24 -16
drivers/net/ethernet/mellanox/mlx5/core/en/tc/meter.h: +3 -2
drivers/net/ethernet/mellanox/mlx5/core/en/tc/post_meter.c: +326 -76
drivers/net/ethernet/mellanox/mlx5/core/en/tc/post_meter.h: +36 -3
drivers/net/ethernet/mellanox/mlx5/core/en/tc_ct.c: +56 -33
drivers/net/ethernet/mellanox/mlx5/core/en/tc_priv.h: +0 -4
drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec.c: +277 -94
drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec.h: +103 -34
drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec_fs.c: +764 -305
drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec_offload.c: +297 -6
drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec_rxtx.c: +13 -9
drivers/net/ethernet/mellanox/mlx5/core/en_accel/ipsec_stats.c: +52 -0
drivers/net/ethernet/mellanox/mlx5/core/en_accel/ktls_tx.c: +26 -39
drivers/net/ethernet/mellanox/mlx5/core/en_accel/macsec.c: +6 -6
drivers/net/ethernet/mellanox/mlx5/core/en_arfs.c: +0 -2
drivers/net/ethernet/mellanox/mlx5/core/en_ethtool.c: +1 -0
drivers/net/ethernet/mellanox/mlx5/core/en_main.c: +19 -10
drivers/net/ethernet/mellanox/mlx5/core/en_rep.c: +85 -63
drivers/net/ethernet/mellanox/mlx5/core/en_rx.c: +145 -26
drivers/net/ethernet/mellanox/mlx5/core/en_stats.c: +18 -0
drivers/net/ethernet/mellanox/mlx5/core/en_stats.h: +19 -0
drivers/net/ethernet/mellanox/mlx5/core/en_tc.c: +328 -117
drivers/net/ethernet/mellanox/mlx5/core/en_tc.h: +7 -2
drivers/net/ethernet/mellanox/mlx5/core/eq.c: +5 -0
drivers/net/ethernet/mellanox/mlx5/core/esw/bridge.c: +4 -4
drivers/net/ethernet/mellanox/mlx5/core/esw/debugfs.c: +19 -3
drivers/net/ethernet/mellanox/mlx5/core/esw/devlink_port.c: +2 -2
drivers/net/ethernet/mellanox/mlx5/core/eswitch.c: +43 -0
drivers/net/ethernet/mellanox/mlx5/core/eswitch.h: +15 -1
drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads.c: +253 -17
drivers/net/ethernet/mellanox/mlx5/core/eswitch_offloads_termtbl.c: +28 -4
drivers/net/ethernet/mellanox/mlx5/core/fs_core.c: +15 -5
drivers/net/ethernet/mellanox/mlx5/core/fs_core.h: +1 -0
drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib.c: +6 -1
drivers/net/ethernet/mellanox/mlx5/core/ipoib/ipoib_vlan.c: +5 -1
drivers/net/ethernet/mellanox/mlx5/core/lag/mp.c: +48 -31
drivers/net/ethernet/mellanox/mlx5/core/lib/aso.c: +5 -5
drivers/net/ethernet/mellanox/mlx5/core/lib/aso.h: +3 -1
drivers/net/ethernet/mellanox/mlx5/core/lib/clock.c: +6 -16
drivers/net/ethernet/mellanox/mlx5/core/main.c: +19 -3
drivers/net/ethernet/mellanox/mlx5/core/mlx5_core.h: +4 -1
drivers/net/ethernet/mellanox/mlx5/core/pci_irq.c: +2 -1
drivers/net/ethernet/mellanox/mlx5/core/steering/dr_action.c: +254 -46
drivers/net/ethernet/mellanox/mlx5/core/steering/dr_buddy.c: +0 -2
drivers/net/ethernet/mellanox/mlx5/core/steering/dr_cmd.c: +84 -0
drivers/net/ethernet/mellanox/mlx5/core/steering/dr_dbg.c: +28 -1
drivers/net/ethernet/mellanox/mlx5/core/steering/dr_definer.c: +151 -0
drivers/net/ethernet/mellanox/mlx5/core/steering/dr_domain.c: +76 -20
drivers/net/ethernet/mellanox/mlx5/core/steering/dr_icm_pool.c: +102 -72
drivers/net/ethernet/mellanox/mlx5/core/steering/dr_rule.c: +77 -42
drivers/net/ethernet/mellanox/mlx5/core/steering/dr_send.c: +140 -1
drivers/net/ethernet/mellanox/mlx5/core/steering/dr_ste.c: +19 -3
drivers/net/ethernet/mellanox/mlx5/core/steering/dr_ste.h: +1 -0
drivers/net/ethernet/mellanox/mlx5/core/steering/dr_ste_v1.c: +69 -0
drivers/net/ethernet/mellanox/mlx5/core/steering/dr_ste_v1.h: +1 -0
drivers/net/ethernet/mellanox/mlx5/core/steering/dr_ste_v2.c: +1 -0
drivers/net/ethernet/mellanox/mlx5/core/steering/dr_table.c: +1 -1
drivers/net/ethernet/mellanox/mlx5/core/steering/dr_types.h: +58 -1
drivers/net/ethernet/mellanox/mlx5/core/steering/fs_dr.c: +41 -12
drivers/net/ethernet/mellanox/mlx5/core/steering/mlx5_ifc_dr_ste_v1.h: +35 -0
drivers/net/ethernet/mellanox/mlx5/core/steering/mlx5dr.h: +14 -8
drivers/net/ethernet/mellanox/mlx5/core/uar.c: +0 -1
drivers/net/ethernet/mellanox/mlx5/core/vport.c: +28 -2
drivers/net/ethernet/mellanox/mlx5/core/wq.h: +17 -0
drivers/net/ethernet/mellanox/mlxsw/core.c: +4 -21
drivers/net/ethernet/mellanox/mlxsw/core.h: +3 -4
drivers/net/ethernet/mellanox/mlxsw/i2c.c: +3 -3
drivers/net/ethernet/mellanox/mlxsw/minimal.c: +2 -15
drivers/net/ethernet/mellanox/mlxsw/reg.h: +36 -0
drivers/net/ethernet/mellanox/mlxsw/spectrum.c: +26 -16
drivers/net/ethernet/mellanox/mlxsw/spectrum.h: +4 -1
drivers/net/ethernet/mellanox/mlxsw/spectrum_ethtool.c: +21 -0
drivers/net/ethernet/mellanox/mlxsw/spectrum_ipip.c: +47 -113
drivers/net/ethernet/mellanox/mlxsw/spectrum_ipip.h: +1 -0
drivers/net/ethernet/mellanox/mlxsw/spectrum_ptp.c: +3 -15
drivers/net/ethernet/mellanox/mlxsw/spectrum_router.c: +85 -17
drivers/net/ethernet/mellanox/mlxsw/spectrum_router.h: +4 -0
drivers/net/ethernet/mellanox/mlxsw/spectrum_switchdev.c: +53 -11
drivers/net/ethernet/mellanox/mlxsw/spectrum_trap.c: +25 -0
drivers/net/ethernet/mellanox/mlxsw/trap.h: +2 -0
drivers/net/ethernet/microchip/Kconfig: +1 -0
drivers/net/ethernet/microchip/Makefile: +1 -0
drivers/net/ethernet/microchip/lan743x_ethtool.c: +153 -6
drivers/net/ethernet/microchip/lan743x_ethtool.h: +70 -1
drivers/net/ethernet/microchip/lan743x_main.c: +3 -3
drivers/net/ethernet/microchip/lan743x_main.h: +3 -0
drivers/net/ethernet/microchip/lan743x_ptp.c: +6 -48
drivers/net/ethernet/microchip/lan966x/Kconfig: +2 -0
drivers/net/ethernet/microchip/lan966x/Makefile: +6 -1
drivers/net/ethernet/microchip/lan966x/lan966x_fdma.c: +329 -104
drivers/net/ethernet/microchip/lan966x/lan966x_goto.c: +54 -0
drivers/net/ethernet/microchip/lan966x/lan966x_ifh.h: +1 -0
drivers/net/ethernet/microchip/lan966x/lan966x_main.c: +37 -5
drivers/net/ethernet/microchip/lan966x/lan966x_main.h: +91 -4
drivers/net/ethernet/microchip/lan966x/lan966x_phylink.c: +0 -2
drivers/net/ethernet/microchip/lan966x/lan966x_ptp.c: +227 -7
drivers/net/ethernet/microchip/lan966x/lan966x_regs.h: +196 -0
drivers/net/ethernet/microchip/lan966x/lan966x_tc.c: +2 -0
drivers/net/ethernet/microchip/lan966x/lan966x_tc_flower.c: +254 -0
drivers/net/ethernet/microchip/lan966x/lan966x_tc_matchall.c: +6 -0
drivers/net/ethernet/microchip/lan966x/lan966x_vcap_ag_api.c: +1608 -0
drivers/net/ethernet/microchip/lan966x/lan966x_vcap_ag_api.h: +11 -0
drivers/net/ethernet/microchip/lan966x/lan966x_vcap_impl.c: +549 -0
drivers/net/ethernet/microchip/lan966x/lan966x_xdp.c: +140 -0
drivers/net/ethernet/microchip/sparx5/Kconfig: +12 -0
drivers/net/ethernet/microchip/sparx5/Makefile: +9 -2
drivers/net/ethernet/microchip/sparx5/sparx5_dcb.c: +310 -0
drivers/net/ethernet/microchip/sparx5/sparx5_main.c: +12 -0
drivers/net/ethernet/microchip/sparx5/sparx5_main.h: +20 -0
drivers/net/ethernet/microchip/sparx5/sparx5_main_regs.h: +581 -2
drivers/net/ethernet/microchip/sparx5/sparx5_phylink.c: +0 -1
drivers/net/ethernet/microchip/sparx5/sparx5_port.c: +99 -0
drivers/net/ethernet/microchip/sparx5/sparx5_port.h: +42 -0
drivers/net/ethernet/microchip/sparx5/sparx5_qos.c: +4 -0
drivers/net/ethernet/microchip/sparx5/sparx5_tc.c: +51 -0
drivers/net/ethernet/microchip/sparx5/sparx5_tc.h: +19 -0
drivers/net/ethernet/microchip/sparx5/sparx5_tc_flower.c: +1016 -0
drivers/net/ethernet/microchip/sparx5/sparx5_tc_matchall.c: +97 -0
drivers/net/ethernet/microchip/sparx5/sparx5_vcap_ag_api.c: +1351 -0
drivers/net/ethernet/microchip/sparx5/sparx5_vcap_ag_api.h: +18 -0
drivers/net/ethernet/microchip/sparx5/sparx5_vcap_debugfs.c: +200 -0
drivers/net/ethernet/microchip/sparx5/sparx5_vcap_debugfs.h: +33 -0
drivers/net/ethernet/microchip/sparx5/sparx5_vcap_impl.c: +723 -0
drivers/net/ethernet/microchip/sparx5/sparx5_vcap_impl.h: +81 -0
drivers/net/ethernet/microchip/vcap/Kconfig: +53 -0
drivers/net/ethernet/microchip/vcap/Makefile: +10 -0
drivers/net/ethernet/microchip/vcap/vcap_ag_api.h: +735 -0
drivers/net/ethernet/microchip/vcap/vcap_api.c: +2883 -0
drivers/net/ethernet/microchip/vcap/vcap_api.h: +280 -0
drivers/net/ethernet/microchip/vcap/vcap_api_client.h: +265 -0
drivers/net/ethernet/microchip/vcap/vcap_api_debugfs.c: +431 -0
drivers/net/ethernet/microchip/vcap/vcap_api_debugfs.h: +41 -0
drivers/net/ethernet/microchip/vcap/vcap_api_debugfs_kunit.c: +555 -0
drivers/net/ethernet/microchip/vcap/vcap_api_kunit.c: +2245 -0
drivers/net/ethernet/microchip/vcap/vcap_api_private.h: +113 -0
drivers/net/ethernet/microchip/vcap/vcap_model_kunit.c: +5570 -0
drivers/net/ethernet/microchip/vcap/vcap_model_kunit.h: +10 -0
drivers/net/ethernet/microsoft/Kconfig: +1 -0
drivers/net/ethernet/microsoft/mana/gdma_main.c: +56 -14
drivers/net/ethernet/microsoft/mana/hw_channel.c: +3 -3
drivers/net/ethernet/microsoft/mana/mana_bpf.c: +1 -1
drivers/net/ethernet/microsoft/mana/mana_en.c: +160 -25
drivers/net/ethernet/microsoft/mana/mana_ethtool.c: +5 -5
drivers/net/ethernet/microsoft/mana/shm_channel.c: +1 -1
drivers/net/ethernet/mscc/ocelot.c: +2 -4
drivers/net/ethernet/mscc/ocelot_net.c: +1 -11
drivers/net/ethernet/mscc/ocelot_stats.c: +235 -9
drivers/net/ethernet/mscc/ocelot_vsc7514.c: +0 -14
drivers/net/ethernet/myricom/myri10ge/myri10ge.c: +1 -2
drivers/net/ethernet/neterion/s2io.c: +1 -1
drivers/net/ethernet/netronome/Kconfig: +11 -0
drivers/net/ethernet/netronome/nfp/Makefile: +2 -0
drivers/net/ethernet/netronome/nfp/ccm_mbox.c: +1 -1
drivers/net/ethernet/netronome/nfp/crypto/crypto.h: +23 -0
drivers/net/ethernet/netronome/nfp/crypto/ipsec.c: +592 -0
drivers/net/ethernet/netronome/nfp/flower/lag_conf.c: +41 -11
drivers/net/ethernet/netronome/nfp/flower/main.c: +9 -0
drivers/net/ethernet/netronome/nfp/flower/main.h: +20 -1
drivers/net/ethernet/netronome/nfp/flower/tunnel_conf.c: +44 -9
drivers/net/ethernet/netronome/nfp/nfd3/dp.c: +48 -10
drivers/net/ethernet/netronome/nfp/nfd3/ipsec.c: +18 -0
drivers/net/ethernet/netronome/nfp/nfd3/nfd3.h: +8 -0
drivers/net/ethernet/netronome/nfp/nfp_app.h: +0 -2
drivers/net/ethernet/netronome/nfp/nfp_devlink.c: +2 -25
drivers/net/ethernet/netronome/nfp/nfp_main.h: +1 -1
drivers/net/ethernet/netronome/nfp/nfp_net.h: +16 -0
drivers/net/ethernet/netronome/nfp/nfp_net_common.c: +76 -13
drivers/net/ethernet/netronome/nfp/nfp_net_ctrl.h: +32 -5
drivers/net/ethernet/netronome/nfp/nfp_net_ethtool.c: +77 -4
drivers/net/ethernet/netronome/nfp/nfp_net_main.c: +2 -10
drivers/net/ethernet/netronome/nfp/nfp_net_repr.c: +2 -3
drivers/net/ethernet/netronome/nfp/nfp_port.h: +0 -2
drivers/net/ethernet/netronome/nfp/nfpcore/nfp_nsp.c: +17 -0
drivers/net/ethernet/netronome/nfp/nfpcore/nfp_nsp.h: +56 -0
drivers/net/ethernet/netronome/nfp/nfpcore/nfp_nsp_eth.c: +26 -0
drivers/net/ethernet/nvidia/forcedeth.c: +4 -4
drivers/net/ethernet/pensando/ionic/ionic_dev.c: +14 -0
drivers/net/ethernet/pensando/ionic/ionic_dev.h: +3 -0
drivers/net/ethernet/pensando/ionic/ionic_devlink.c: +1 -5
drivers/net/ethernet/pensando/ionic/ionic_if.h: +44 -1
drivers/net/ethernet/pensando/ionic/ionic_lif.c: +96 -17
drivers/net/ethernet/pensando/ionic/ionic_main.c: +1 -1
drivers/net/ethernet/pensando/ionic/ionic_txrx.c: +18 -13
drivers/net/ethernet/qlogic/qed/qed_debug.c: +2 -1
drivers/net/ethernet/qlogic/qed/qed_devlink.c: +0 -4
drivers/net/ethernet/qlogic/qed/qed_ll2.c: +1 -1
drivers/net/ethernet/qlogic/qede/qede_ptp.c: +8 -5
drivers/net/ethernet/qlogic/qlcnic/qlcnic_ethtool.c: +1 -1
drivers/net/ethernet/qlogic/qlcnic/qlcnic_sriov_common.c: +2 -0
drivers/net/ethernet/qualcomm/rmnet/rmnet_vnd.c: +2 -2
drivers/net/ethernet/realtek/8139too.c: +4 -4
drivers/net/ethernet/realtek/r8169_main.c: +6 -3
drivers/net/ethernet/renesas/Kconfig: +12 -0
drivers/net/ethernet/renesas/Makefile: +4 -0
drivers/net/ethernet/renesas/ravb_ptp.c: +5 -12
drivers/net/ethernet/renesas/rcar_gen4_ptp.c: +181 -0
drivers/net/ethernet/renesas/rcar_gen4_ptp.h: +72 -0
drivers/net/ethernet/renesas/rswitch.c: +1841 -0
drivers/net/ethernet/renesas/rswitch.h: +973 -0
drivers/net/ethernet/rocker/rocker_ofdpa.c: +8 -7
drivers/net/ethernet/sfc/Makefile: +1 -1
drivers/net/ethernet/sfc/ef100_ethtool.c: +0 -2
drivers/net/ethernet/sfc/ef100_rx.c: +19 -4
drivers/net/ethernet/sfc/ef100_tx.c: +2 -1
drivers/net/ethernet/sfc/efx_channels.c: +8 -1
drivers/net/ethernet/sfc/efx_common.c: +1 -1
drivers/net/ethernet/sfc/ethtool_common.c: +0 -37
drivers/net/ethernet/sfc/ethtool_common.h: +0 -2
drivers/net/ethernet/sfc/mae.c: +301 -5
drivers/net/ethernet/sfc/mae.h: +7 -0
drivers/net/ethernet/sfc/mae_counter_format.h: +73 -0
drivers/net/ethernet/sfc/mcdi.h: +17 -0
drivers/net/ethernet/sfc/net_driver.h: +16 -3
drivers/net/ethernet/sfc/ptp.c: +4 -3
drivers/net/ethernet/sfc/rx_common.c: +3 -0
drivers/net/ethernet/sfc/siena/efx_common.c: +1 -1
drivers/net/ethernet/sfc/siena/ptp.c: +4 -3
drivers/net/ethernet/sfc/tc.c: +267 -35
drivers/net/ethernet/sfc/tc.h: +31 -17
drivers/net/ethernet/sfc/tc_counters.c: +503 -0
drivers/net/ethernet/sfc/tc_counters.h: +59 -0
drivers/net/ethernet/sfc/tx.c: +2 -2
drivers/net/ethernet/smsc/Kconfig: +0 -14
drivers/net/ethernet/smsc/Makefile: +0 -1
drivers/net/ethernet/smsc/smc911x.c: +0 -2198
drivers/net/ethernet/smsc/smc911x.h: +0 -901
drivers/net/ethernet/socionext/sni_ave.c: +4 -10
drivers/net/ethernet/stmicro/stmmac/Kconfig: +9 -0
drivers/net/ethernet/stmicro/stmmac/Makefile: +1 -0
drivers/net/ethernet/stmicro/stmmac/dwmac-tegra.c: +388 -0
drivers/net/ethernet/stmicro/stmmac/dwmac4.h: +1 -3
drivers/net/ethernet/stmicro/stmmac/dwmac4_core.c: +6 -15
drivers/net/ethernet/stmicro/stmmac/stmmac_hwtstamp.c: +2 -1
drivers/net/ethernet/stmicro/stmmac/stmmac_main.c: +7 -4
drivers/net/ethernet/stmicro/stmmac/stmmac_ptp.c: +7 -16
drivers/net/ethernet/stmicro/stmmac/stmmac_ptp.h: +1 -1
drivers/net/ethernet/stmicro/stmmac/stmmac_selftests.c: +6 -2
drivers/net/ethernet/stmicro/stmmac/stmmac_tc.c: +3 -0
drivers/net/ethernet/sun/cassini.c: +15 -33
drivers/net/ethernet/sun/sunvnet_common.c: +2 -2
drivers/net/ethernet/ti/am65-cpsw-nuss.c: +199 -67
drivers/net/ethernet/ti/am65-cpsw-nuss.h: +6 -0
drivers/net/ethernet/ti/am65-cpts.c: +79 -2
drivers/net/ethernet/ti/am65-cpts.h: +10 -0
drivers/net/ethernet/ti/cpsw_ale.c: +10 -0
drivers/net/ethernet/ti/cpsw_ale.h: +1 -0
drivers/net/ethernet/ti/cpts.c: +4 -16
drivers/net/ethernet/ti/netcp_core.c: +5 -5
drivers/net/ethernet/via/via-rhine.c: +4 -4
drivers/net/ethernet/wangxun/Kconfig: +7 -0
drivers/net/ethernet/wangxun/Makefile: +1 -0
drivers/net/ethernet/wangxun/libwx/Makefile: +7 -0
drivers/net/ethernet/wangxun/libwx/wx_hw.c: +936 -0
drivers/net/ethernet/wangxun/libwx/wx_hw.h: +28 -0
drivers/net/ethernet/wangxun/libwx/wx_type.h: +352 -0
drivers/net/ethernet/wangxun/ngbe/Makefile: +1 -1
drivers/net/ethernet/wangxun/ngbe/ngbe.h: +55 -0
drivers/net/ethernet/wangxun/ngbe/ngbe_hw.c: +87 -0
drivers/net/ethernet/wangxun/ngbe/ngbe_hw.h: +12 -0
drivers/net/ethernet/wangxun/ngbe/ngbe_main.c: +368 -0
drivers/net/ethernet/wangxun/ngbe/ngbe_type.h: +94 -5
drivers/net/ethernet/wangxun/txgbe/Makefile: +2 -1
drivers/net/ethernet/wangxun/txgbe/txgbe.h: +21 -2
drivers/net/ethernet/wangxun/txgbe/txgbe_hw.c: +312 -0
drivers/net/ethernet/wangxun/txgbe/txgbe_hw.h: +11 -0
drivers/net/ethernet/wangxun/txgbe/txgbe_main.c: +464 -1
drivers/net/ethernet/wangxun/txgbe/txgbe_type.h: +32 -15
drivers/net/ethernet/xilinx/xilinx_axienet.h: +0 -2
drivers/net/ethernet/xilinx/xilinx_axienet_main.c: +40 -5
drivers/net/ethernet/xilinx/xilinx_axienet_mdio.c: +48 -31
drivers/net/ethernet/xilinx/xilinx_emaclite.c: +1 -1
drivers/net/ethernet/xscale/ptp_ixp46x.c: +4 -15
drivers/net/fddi/defxx.c: +18 -4
drivers/net/geneve.c: +1 -1
drivers/net/hamradio/baycom_epp.c: +1 -1
drivers/net/hamradio/scc.c: +3 -3
drivers/net/hyperv/netvsc_drv.c: +16 -16
drivers/net/ieee802154/atusb.c: +28 -5
drivers/net/ieee802154/mac802154_hwsim.c: +172 -7
drivers/net/ieee802154/mcr20a.c: +3 -6
drivers/net/ifb.c: +6 -6
drivers/net/ipa/Makefile: +1 -1
drivers/net/ipa/data/ipa_data-v3.1.c: +10 -9
drivers/net/ipa/data/ipa_data-v3.5.1.c: +14 -13
drivers/net/ipa/data/ipa_data-v4.11.c: +9 -8
drivers/net/ipa/data/ipa_data-v4.2.c: +9 -8
drivers/net/ipa/data/ipa_data-v4.5.c: +9 -8
drivers/net/ipa/data/ipa_data-v4.7.c: +405 -0
drivers/net/ipa/data/ipa_data-v4.9.c: +9 -8
drivers/net/ipa/gsi_trans.c: +5 -2
drivers/net/ipa/ipa.h: +21 -11
drivers/net/ipa/ipa_cmd.c: +25 -49
drivers/net/ipa/ipa_cmd.h: +13 -3
drivers/net/ipa/ipa_data.h: +3 -0
drivers/net/ipa/ipa_endpoint.c: +160 -117
drivers/net/ipa/ipa_endpoint.h: +1 -1
drivers/net/ipa/ipa_interrupt.c: +22 -12
drivers/net/ipa/ipa_main.c: +90 -22
drivers/net/ipa/ipa_mem.c: +10 -9
drivers/net/ipa/ipa_qmi.c: +5 -4
drivers/net/ipa/ipa_qmi_msg.c: +10 -10
drivers/net/ipa/ipa_qmi_msg.h: +10 -10
drivers/net/ipa/ipa_reg.c: +2 -0
drivers/net/ipa/ipa_reg.h: +1 -0
drivers/net/ipa/ipa_sysfs.c: +3 -3
drivers/net/ipa/ipa_table.c: +196 -154
drivers/net/ipa/ipa_table.h: +10 -20
drivers/net/ipa/ipa_version.h: +4 -0
drivers/net/ipa/reg/ipa_reg-v3.1.c: +8 -5
drivers/net/ipa/reg/ipa_reg-v3.5.1.c: +8 -5
drivers/net/ipa/reg/ipa_reg-v4.11.c: +8 -5
drivers/net/ipa/reg/ipa_reg-v4.2.c: +8 -5
drivers/net/ipa/reg/ipa_reg-v4.5.c: +8 -5
drivers/net/ipa/reg/ipa_reg-v4.7.c: +507 -0
drivers/net/ipa/reg/ipa_reg-v4.9.c: +8 -5
drivers/net/ipvlan/ipvlan_main.c: +2 -2
drivers/net/loopback.c: +2 -2
drivers/net/macsec.c: +6 -6
drivers/net/macvlan.c: +2 -2
drivers/net/mhi_net.c: +4 -4
drivers/net/netdevsim/dev.c: +1 -6
drivers/net/netdevsim/ipsec.c: +5 -0
drivers/net/netdevsim/netdev.c: +3 -11
drivers/net/ntb_netdev.c: +2 -2
drivers/net/pcs/pcs-altera-tse.c: +3 -18
drivers/net/pcs/pcs-xpcs.c: +2 -8
drivers/net/phy/Kconfig: +1 -4
drivers/net/phy/aquantia_main.c: +40 -0
drivers/net/phy/dp83822.c: +2 -0
drivers/net/phy/dp83867.c: +7 -0
drivers/net/phy/micrel.c: +77 -0
drivers/net/phy/motorcomm.c: +1675 -2
drivers/net/phy/mscc/mscc_macsec.c: +30 -27
drivers/net/phy/mscc/mscc_macsec.h: +0 -2
drivers/net/phy/mxl-gpy.c: +94 -12
drivers/net/phy/phy-core.c: +10 -1
drivers/net/phy/phy.c: +1 -0
drivers/net/phy/phy_device.c: +12 -0
drivers/net/phy/phylink.c: +31 -12
drivers/net/phy/sfp.c: +85 -77
drivers/net/ppp/ppp_generic.c: +2 -0
drivers/net/tap.c: +8 -2
drivers/net/team/team.c: +4 -2
drivers/net/team/team_mode_loadbalance.c: +2 -2
drivers/net/thunderbolt.c: +12 -14
drivers/net/tun.c: +37 -38
drivers/net/usb/asix_devices.c: +20 -3
drivers/net/usb/cdc_ether.c: +6 -0
drivers/net/usb/cdc_ncm.c: +2 -1
drivers/net/usb/qmi_wwan.c: +3 -2
drivers/net/veth.c: +7 -7
drivers/net/virtio_net.c: +23 -12
drivers/net/vrf.c: +2 -2
drivers/net/vxlan/vxlan_core.c: +2 -2
drivers/net/vxlan/vxlan_vnifilter.c: +2 -2
drivers/net/wan/farsync.c: +2 -0
drivers/net/wireless/admtek/adm8211.c: +1 -0
drivers/net/wireless/ath/ar5523/ar5523.c: +7 -0
drivers/net/wireless/ath/ath10k/Kconfig: +1 -0
drivers/net/wireless/ath/ath10k/core.c: +16 -0
drivers/net/wireless/ath/ath10k/debug.c: +3 -2
drivers/net/wireless/ath/ath10k/htc.c: +9 -0
drivers/net/wireless/ath/ath10k/htt.h: +4 -2
drivers/net/wireless/ath/ath10k/htt_rx.c: +10 -15
drivers/net/wireless/ath/ath10k/hw.h: +2 -0
drivers/net/wireless/ath/ath10k/pci.c: +12 -8
drivers/net/wireless/ath/ath10k/qmi.c: +36 -1
drivers/net/wireless/ath/ath10k/qmi_wlfw_v01.c: +63 -63
drivers/net/wireless/ath/ath10k/qmi_wlfw_v01.h: +51 -51
drivers/net/wireless/ath/ath10k/wmi-tlv.c: +7 -0
drivers/net/wireless/ath/ath11k/core.c: +11 -4
drivers/net/wireless/ath/ath11k/core.h: +3 -0
drivers/net/wireless/ath/ath11k/hw.h: +1 -0
drivers/net/wireless/ath/ath11k/mac.c: +162 -70
drivers/net/wireless/ath/ath11k/mac.h: +1 -1
drivers/net/wireless/ath/ath11k/pcic.c: +10 -3
drivers/net/wireless/ath/ath11k/qmi.c: +48 -39
drivers/net/wireless/ath/ath11k/wmi.c: +1 -1
drivers/net/wireless/ath/ath5k/mac80211-ops.c: +1 -0
drivers/net/wireless/ath/ath9k/Makefile: +0 -5
drivers/net/wireless/ath/ath9k/ar9003_mci.c: +1 -2
drivers/net/wireless/ath/ath9k/ath9k.h: +1 -0
drivers/net/wireless/ath/ath9k/hif_usb.c: +29 -17
drivers/net/wireless/ath/ath9k/htc_drv_main.c: +1 -0
drivers/net/wireless/ath/ath9k/mci.c: +6 -2
drivers/net/wireless/ath/ath9k/tx99.c: +1 -1
drivers/net/wireless/ath/ath9k/xmit.c: +0 -2
drivers/net/wireless/ath/carl9170/Makefile: +0 -5
drivers/net/wireless/ath/carl9170/fwcmd.h: +2 -2
drivers/net/wireless/ath/carl9170/main.c: +1 -0
drivers/net/wireless/ath/carl9170/wlan.h: +1 -1
drivers/net/wireless/ath/wcn36xx/main.c: +1 -0
drivers/net/wireless/ath/wil6210/debugfs.c: +6 -30
drivers/net/wireless/atmel/at76c50x-usb.c: +1 -0
drivers/net/wireless/atmel/atmel.c: +79 -83
drivers/net/wireless/broadcom/b43/main.c: +4 -7
drivers/net/wireless/broadcom/b43legacy/main.c: +1 -0
drivers/net/wireless/broadcom/brcm80211/brcmfmac/Makefile: +11 -0
drivers/net/wireless/broadcom/brcm80211/brcmfmac/bca/Makefile: +12 -0
drivers/net/wireless/broadcom/brcm80211/brcmfmac/bca/core.c: +27 -0
drivers/net/wireless/broadcom/brcm80211/brcmfmac/bca/module.c: +27 -0
drivers/net/wireless/broadcom/brcm80211/brcmfmac/bca/vops.h: +11 -0
drivers/net/wireless/broadcom/brcm80211/brcmfmac/bcmsdh.c: +28 -24
drivers/net/wireless/broadcom/brcm80211/brcmfmac/bus.h: +35 -1
drivers/net/wireless/broadcom/brcm80211/brcmfmac/cfg80211.c: +558 -29
drivers/net/wireless/broadcom/brcm80211/brcmfmac/common.c: +10 -5
drivers/net/wireless/broadcom/brcm80211/brcmfmac/core.c: +13 -2
drivers/net/wireless/broadcom/brcm80211/brcmfmac/core.h: +9 -0
drivers/net/wireless/broadcom/brcm80211/brcmfmac/cyw/Makefile: +12 -0
drivers/net/wireless/broadcom/brcm80211/brcmfmac/cyw/core.c: +27 -0
drivers/net/wireless/broadcom/brcm80211/brcmfmac/cyw/module.c: +27 -0
drivers/net/wireless/broadcom/brcm80211/brcmfmac/cyw/vops.h: +11 -0
drivers/net/wireless/broadcom/brcm80211/brcmfmac/feature.c: +2 -1
drivers/net/wireless/broadcom/brcm80211/brcmfmac/feature.h: +3 -1
drivers/net/wireless/broadcom/brcm80211/brcmfmac/firmware.c: +5 -0
drivers/net/wireless/broadcom/brcm80211/brcmfmac/fwil_types.h: +2 -2
drivers/net/wireless/broadcom/brcm80211/brcmfmac/fwvid.c: +199 -0
drivers/net/wireless/broadcom/brcm80211/brcmfmac/fwvid.h: +47 -0
drivers/net/wireless/broadcom/brcm80211/brcmfmac/p2p.c: +6 -2
drivers/net/wireless/broadcom/brcm80211/brcmfmac/pcie.c: +177 -34
drivers/net/wireless/broadcom/brcm80211/brcmfmac/pno.c: +3 -3
drivers/net/wireless/broadcom/brcm80211/brcmfmac/sdio.c: +13 -4
drivers/net/wireless/broadcom/brcm80211/brcmfmac/usb.c: +19 -8
drivers/net/wireless/broadcom/brcm80211/brcmfmac/wcc/Makefile: +12 -0
drivers/net/wireless/broadcom/brcm80211/brcmfmac/wcc/core.c: +27 -0
drivers/net/wireless/broadcom/brcm80211/brcmfmac/wcc/module.c: +27 -0
drivers/net/wireless/broadcom/brcm80211/brcmfmac/wcc/vops.h: +11 -0
drivers/net/wireless/broadcom/brcm80211/brcmsmac/led.c: +0 -3
drivers/net/wireless/broadcom/brcm80211/brcmsmac/mac80211_if.c: +1 -0
drivers/net/wireless/cisco/airo.c: +108 -96
drivers/net/wireless/intel/ipw2x00/ipw2100.c: +0 -11
drivers/net/wireless/intel/ipw2x00/ipw2200.c: +1 -15
drivers/net/wireless/intel/iwlegacy/3945-mac.c: +1 -6
drivers/net/wireless/intel/iwlegacy/4965-mac.c: +1 -0
drivers/net/wireless/intel/iwlwifi/cfg/22000.c: +32 -4
drivers/net/wireless/intel/iwlwifi/dvm/mac80211.c: +1 -0
drivers/net/wireless/intel/iwlwifi/fw/api/datapath.h: +89 -6
drivers/net/wireless/intel/iwlwifi/fw/api/mac.h: +3 -3
drivers/net/wireless/intel/iwlwifi/fw/api/phy-ctxt.h: +16 -17
drivers/net/wireless/intel/iwlwifi/fw/api/rs.h: +4 -6
drivers/net/wireless/intel/iwlwifi/fw/dump.c: +4 -3
drivers/net/wireless/intel/iwlwifi/fw/rs.c: +2 -0
drivers/net/wireless/intel/iwlwifi/iwl-dbg-tlv.c: +5 -2
drivers/net/wireless/intel/iwlwifi/iwl-drv.c: +3 -0
drivers/net/wireless/intel/iwlwifi/iwl-eeprom-parse.h: +2 -1
drivers/net/wireless/intel/iwlwifi/iwl-modparams.h: +1 -0
drivers/net/wireless/intel/iwlwifi/iwl-nvm-parse.c: +210 -27
drivers/net/wireless/intel/iwlwifi/iwl-prph.h: +5 -0
drivers/net/wireless/intel/iwlwifi/iwl-trans.h: +5 -0
drivers/net/wireless/intel/iwlwifi/mei/iwl-mei.h: +30 -6
drivers/net/wireless/intel/iwlwifi/mei/main.c: +217 -87
drivers/net/wireless/intel/iwlwifi/mei/net.c: +7 -3
drivers/net/wireless/intel/iwlwifi/mei/sap.h: +59 -6
drivers/net/wireless/intel/iwlwifi/mei/trace-data.h: +1 -1
drivers/net/wireless/intel/iwlwifi/mei/trace.h: +1 -1
drivers/net/wireless/intel/iwlwifi/mvm/Makefile: +1 -0
drivers/net/wireless/intel/iwlwifi/mvm/d3.c: +7 -2
drivers/net/wireless/intel/iwlwifi/mvm/debugfs.c: +2 -2
drivers/net/wireless/intel/iwlwifi/mvm/ftm-initiator.c: +5 -7
drivers/net/wireless/intel/iwlwifi/mvm/fw.c: +35 -3
drivers/net/wireless/intel/iwlwifi/mvm/mac-ctxt.c: +52 -8
drivers/net/wireless/intel/iwlwifi/mvm/mac80211.c: +182 -30
drivers/net/wireless/intel/iwlwifi/mvm/mld-key.c: +226 -0
drivers/net/wireless/intel/iwlwifi/mvm/mvm.h: +18 -3
drivers/net/wireless/intel/iwlwifi/mvm/ops.c: +19 -6
drivers/net/wireless/intel/iwlwifi/mvm/phy-ctxt.c: +27 -27
drivers/net/wireless/intel/iwlwifi/mvm/rs-fw.c: +123 -2
drivers/net/wireless/intel/iwlwifi/mvm/rxmq.c: +25 -21
drivers/net/wireless/intel/iwlwifi/mvm/sta.c: +19 -10
drivers/net/wireless/intel/iwlwifi/mvm/time-event.c: +3 -4
drivers/net/wireless/intel/iwlwifi/mvm/tx.c: +23 -4
drivers/net/wireless/intel/iwlwifi/pcie/drv.c: +23 -10
drivers/net/wireless/intel/iwlwifi/pcie/trans.c: +47 -38
drivers/net/wireless/intersil/hostap/hostap_ioctl.c: +133 -111
drivers/net/wireless/intersil/orinoco/wext.c: +73 -58
drivers/net/wireless/intersil/p54/eeprom.h: +2 -2
drivers/net/wireless/intersil/p54/main.c: +1 -0
drivers/net/wireless/mac80211_hwsim.c: +1 -0
drivers/net/wireless/marvell/libertas_tf/main.c: +1 -0
drivers/net/wireless/marvell/mwifiex/debugfs.c: +1 -1
drivers/net/wireless/marvell/mwifiex/main.h: +1 -0
drivers/net/wireless/marvell/mwl8k.c: +1 -0
drivers/net/wireless/mediatek/mt76/Kconfig: +1 -0
drivers/net/wireless/mediatek/mt76/Makefile: +1 -0
drivers/net/wireless/mediatek/mt76/debugfs.c: +0 -19
drivers/net/wireless/mediatek/mt76/dma.c: +195 -51
drivers/net/wireless/mediatek/mt76/dma.h: +8 -0
drivers/net/wireless/mediatek/mt76/mac80211.c: +19 -8
drivers/net/wireless/mediatek/mt76/mt76.h: +30 -20
drivers/net/wireless/mediatek/mt76/mt7603/debugfs.c: +1 -1
drivers/net/wireless/mediatek/mt76/mt7603/dma.c: +1 -1
drivers/net/wireless/mediatek/mt76/mt7603/mac.c: +3 -3
drivers/net/wireless/mediatek/mt76/mt7603/mt7603.h: +1 -1
drivers/net/wireless/mediatek/mt76/mt7615/debugfs.c: +2 -4
drivers/net/wireless/mediatek/mt76/mt7615/mac.c: +23 -11
drivers/net/wireless/mediatek/mt76/mt7615/main.c: +5 -2
drivers/net/wireless/mediatek/mt76/mt7615/mcu.c: +1 -1
drivers/net/wireless/mediatek/mt76/mt7615/mt7615.h: +4 -2
drivers/net/wireless/mediatek/mt76/mt7615/regs.h: +2 -0
drivers/net/wireless/mediatek/mt76/mt76_connac.h: +16 -0
drivers/net/wireless/mediatek/mt76/mt76_connac_mac.c: +13 -4
drivers/net/wireless/mediatek/mt76/mt76_connac_mcu.c: +145 -69
drivers/net/wireless/mediatek/mt76/mt76_connac_mcu.h: +89 -10
drivers/net/wireless/mediatek/mt76/mt76x0/eeprom.c: +8 -20
drivers/net/wireless/mediatek/mt76/mt76x0/eeprom.h: +1 -1
drivers/net/wireless/mediatek/mt76/mt76x0/init.c: +1 -1
drivers/net/wireless/mediatek/mt76/mt76x0/phy.c: +5 -8
drivers/net/wireless/mediatek/mt76/mt76x02.h: +15 -1
drivers/net/wireless/mediatek/mt76/mt76x02_debugfs.c: +18 -1
drivers/net/wireless/mediatek/mt76/mt76x02_eeprom.h: +0 -2
drivers/net/wireless/mediatek/mt76/mt76x02_mac.c: +3 -3
drivers/net/wireless/mediatek/mt76/mt76x02_phy.c: +11 -11
drivers/net/wireless/mediatek/mt76/mt76x02_phy.h: +3 -3
drivers/net/wireless/mediatek/mt76/mt76x02_txrx.c: +7 -7
drivers/net/wireless/mediatek/mt76/mt76x2/eeprom.c: +2 -14
drivers/net/wireless/mediatek/mt76/mt76x2/eeprom.h: +1 -1
drivers/net/wireless/mediatek/mt76/mt76x2/init.c: +1 -1
drivers/net/wireless/mediatek/mt76/mt76x2/phy.c: +3 -3
drivers/net/wireless/mediatek/mt76/mt7915/Kconfig: +1 -0
drivers/net/wireless/mediatek/mt76/mt7915/Makefile: +2 -1
drivers/net/wireless/mediatek/mt76/mt7915/coredump.c: +410 -0
drivers/net/wireless/mediatek/mt76/mt7915/coredump.h: +136 -0
drivers/net/wireless/mediatek/mt76/mt7915/debugfs.c: +262 -45
drivers/net/wireless/mediatek/mt76/mt7915/dma.c: +167 -40
drivers/net/wireless/mediatek/mt76/mt7915/eeprom.c: +29 -37
drivers/net/wireless/mediatek/mt76/mt7915/eeprom.h: +0 -5
drivers/net/wireless/mediatek/mt76/mt7915/init.c: +94 -41
drivers/net/wireless/mediatek/mt76/mt7915/mac.c: +467 -168
drivers/net/wireless/mediatek/mt76/mt7915/main.c: +102 -40
drivers/net/wireless/mediatek/mt76/mt7915/mcu.c: +398 -97
drivers/net/wireless/mediatek/mt76/mt7915/mcu.h: +57 -3
drivers/net/wireless/mediatek/mt76/mt7915/mmio.c: +369 -45
drivers/net/wireless/mediatek/mt76/mt7915/mt7915.h: +59 -6
drivers/net/wireless/mediatek/mt76/mt7915/pci.c: +11 -95
drivers/net/wireless/mediatek/mt76/mt7915/regs.h: +86 -2
drivers/net/wireless/mediatek/mt76/mt7915/soc.c: +15 -6
drivers/net/wireless/mediatek/mt76/mt7915/testmode.c: +35 -36
drivers/net/wireless/mediatek/mt76/mt7921/debugfs.c: +1 -1
drivers/net/wireless/mediatek/mt76/mt7921/init.c: +89 -2
drivers/net/wireless/mediatek/mt76/mt7921/mac.c: +29 -27
drivers/net/wireless/mediatek/mt76/mt7921/main.c: +228 -5
drivers/net/wireless/mediatek/mt76/mt7921/mcu.c: +143 -18
drivers/net/wireless/mediatek/mt76/mt7921/mt7921.h: +72 -2
drivers/net/wireless/mediatek/mt76/mt7921/pci.c: +51 -8
drivers/net/wireless/mediatek/mt76/mt7921/sdio.c: +27 -4
drivers/net/wireless/mediatek/mt76/mt7921/usb.c: +20 -2
drivers/net/wireless/mediatek/mt76/mt7996/Kconfig: +12 -0
drivers/net/wireless/mediatek/mt76/mt7996/Makefile: +6 -0
drivers/net/wireless/mediatek/mt76/mt7996/debugfs.c: +851 -0
drivers/net/wireless/mediatek/mt76/mt7996/dma.c: +360 -0
drivers/net/wireless/mediatek/mt76/mt7996/eeprom.c: +229 -0
drivers/net/wireless/mediatek/mt76/mt7996/eeprom.h: +75 -0
drivers/net/wireless/mediatek/mt76/mt7996/init.c: +823 -0
drivers/net/wireless/mediatek/mt76/mt7996/mac.c: +2498 -0
drivers/net/wireless/mediatek/mt76/mt7996/mac.h: +398 -0
drivers/net/wireless/mediatek/mt76/mt7996/main.c: +1334 -0
drivers/net/wireless/mediatek/mt76/mt7996/mcu.c: +3607 -0
drivers/net/wireless/mediatek/mt76/mt7996/mcu.h: +669 -0
drivers/net/wireless/mediatek/mt76/mt7996/mmio.c: +386 -0
drivers/net/wireless/mediatek/mt76/mt7996/mt7996.h: +523 -0
drivers/net/wireless/mediatek/mt76/mt7996/pci.c: +222 -0
drivers/net/wireless/mediatek/mt76/mt7996/regs.h: +542 -0
drivers/net/wireless/mediatek/mt76/sdio.c: +1 -1
drivers/net/wireless/mediatek/mt76/tx.c: +30 -0
drivers/net/wireless/mediatek/mt76/usb.c: +8 -5
drivers/net/wireless/mediatek/mt76/util.h: +0 -6
drivers/net/wireless/mediatek/mt7601u/main.c: +1 -0
drivers/net/wireless/microchip/wilc1000/sdio.c: +1 -0
drivers/net/wireless/purelifi/plfxlc/mac.c: +1 -0
drivers/net/wireless/purelifi/plfxlc/usb.c: +1 -0
drivers/net/wireless/ralink/rt2x00/rt2400pci.c: +1 -0
drivers/net/wireless/ralink/rt2x00/rt2500pci.c: +1 -0
drivers/net/wireless/ralink/rt2x00/rt2500usb.c: +1 -0
drivers/net/wireless/ralink/rt2x00/rt2800pci.c: +1 -0
drivers/net/wireless/ralink/rt2x00/rt2800soc.c: +1 -0
drivers/net/wireless/ralink/rt2x00/rt2800usb.c: +1 -0
drivers/net/wireless/ralink/rt2x00/rt61pci.c: +1 -0
drivers/net/wireless/ralink/rt2x00/rt73usb.c: +1 -0
drivers/net/wireless/realtek/rtl818x/rtl8180/dev.c: +1 -0
drivers/net/wireless/realtek/rtl818x/rtl8187/dev.c: +1 -0
drivers/net/wireless/realtek/rtl8xxxu/Kconfig: +4 -3
drivers/net/wireless/realtek/rtl8xxxu/Makefile: +1 -1
drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu.h: +89 -8
drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_8188f.c: +1766 -0
drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_8192c.c: +67 -6
drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_8192e.c: +131 -30
drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_8723a.c: +109 -5
drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_8723b.c: +86 -7
drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_core.c: +385 -298
drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_regs.h: +29 -1
drivers/net/wireless/realtek/rtlwifi/btcoexist/halbtc8723b1ant.c: +2 -3
drivers/net/wireless/realtek/rtlwifi/core.c: +1 -0
drivers/net/wireless/realtek/rtlwifi/rtl8192ee/trx.c: +0 -8
drivers/net/wireless/realtek/rtlwifi/rtl8192se/phy.c: +0 -3
drivers/net/wireless/realtek/rtw88/Kconfig: +47 -0
drivers/net/wireless/realtek/rtw88/Makefile: +15 -0
drivers/net/wireless/realtek/rtw88/coex.c: +1 -2
drivers/net/wireless/realtek/rtw88/debug.c: +15 -0
drivers/net/wireless/realtek/rtw88/fw.c: +17 -14
drivers/net/wireless/realtek/rtw88/fw.h: +11 -0
drivers/net/wireless/realtek/rtw88/hci.h: +3 -6
drivers/net/wireless/realtek/rtw88/mac.c: +20 -1
drivers/net/wireless/realtek/rtw88/mac80211.c: +1 -1
drivers/net/wireless/realtek/rtw88/main.c: +7 -5
drivers/net/wireless/realtek/rtw88/main.h: +5 -7
drivers/net/wireless/realtek/rtw88/phy.c: +3 -3
drivers/net/wireless/realtek/rtw88/ps.c: +1 -1
drivers/net/wireless/realtek/rtw88/reg.h: +1 -0
drivers/net/wireless/realtek/rtw88/rtw8723d.c: +28 -0
drivers/net/wireless/realtek/rtw88/rtw8723d.h: +12 -1
drivers/net/wireless/realtek/rtw88/rtw8723du.c: +36 -0
drivers/net/wireless/realtek/rtw88/rtw8821c.c: +18 -0
drivers/net/wireless/realtek/rtw88/rtw8821c.h: +21 -0
drivers/net/wireless/realtek/rtw88/rtw8821cu.c: +50 -0
drivers/net/wireless/realtek/rtw88/rtw8822b.c: +19 -0
drivers/net/wireless/realtek/rtw88/rtw8822bu.c: +90 -0
drivers/net/wireless/realtek/rtw88/rtw8822c.c: +24 -0
drivers/net/wireless/realtek/rtw88/rtw8822cu.c: +44 -0
drivers/net/wireless/realtek/rtw88/tx.h: +31 -0
drivers/net/wireless/realtek/rtw88/usb.c: +911 -0
drivers/net/wireless/realtek/rtw88/usb.h: +107 -0
drivers/net/wireless/realtek/rtw88/util.c: +103 -0
drivers/net/wireless/realtek/rtw88/util.h: +9 -3
drivers/net/wireless/realtek/rtw89/Kconfig: +14 -0
drivers/net/wireless/realtek/rtw89/Makefile: +11 -0
drivers/net/wireless/realtek/rtw89/chan.c: +36 -4
drivers/net/wireless/realtek/rtw89/coex.c: +7 -2
drivers/net/wireless/realtek/rtw89/core.c: +95 -7
drivers/net/wireless/realtek/rtw89/core.h: +227 -11
drivers/net/wireless/realtek/rtw89/debug.c: +961 -91
drivers/net/wireless/realtek/rtw89/debug.h: +2 -0
drivers/net/wireless/realtek/rtw89/fw.c: +758 -32
drivers/net/wireless/realtek/rtw89/fw.h: +728 -3
drivers/net/wireless/realtek/rtw89/mac.c: +645 -125
drivers/net/wireless/realtek/rtw89/mac.h: +120 -0
drivers/net/wireless/realtek/rtw89/mac80211.c: +69 -1
drivers/net/wireless/realtek/rtw89/pci.c: +37 -4
drivers/net/wireless/realtek/rtw89/pci.h: +12 -0
drivers/net/wireless/realtek/rtw89/phy.c: +342 -16
drivers/net/wireless/realtek/rtw89/phy.h: +73 -14
drivers/net/wireless/realtek/rtw89/ps.c: +1 -1
drivers/net/wireless/realtek/rtw89/ps.h: +1 -0
drivers/net/wireless/realtek/rtw89/reg.h: +461 -5
drivers/net/wireless/realtek/rtw89/rtw8852a.c: +24 -155
drivers/net/wireless/realtek/rtw89/rtw8852a.h: +0 -1
drivers/net/wireless/realtek/rtw89/rtw8852b.c: +2444 -1
drivers/net/wireless/realtek/rtw89/rtw8852b.h: +137 -0
drivers/net/wireless/realtek/rtw89/rtw8852b_rfk.c: +4174 -0
drivers/net/wireless/realtek/rtw89/rtw8852b_rfk.h: +25 -0
drivers/net/wireless/realtek/rtw89/rtw8852b_rfk_table.c: +794 -0
drivers/net/wireless/realtek/rtw89/rtw8852b_rfk_table.h: +62 -0
drivers/net/wireless/realtek/rtw89/rtw8852b_table.c: +22877 -0
drivers/net/wireless/realtek/rtw89/rtw8852b_table.h: +30 -0
drivers/net/wireless/realtek/rtw89/rtw8852be.c: +64 -0
drivers/net/wireless/realtek/rtw89/rtw8852c.c: +29 -203
drivers/net/wireless/realtek/rtw89/rtw8852c.h: +0 -1
drivers/net/wireless/realtek/rtw89/rtw8852c_rfk.c: +12 -13
drivers/net/wireless/realtek/rtw89/rtw8852c_table.c: +879 -109
drivers/net/wireless/realtek/rtw89/txrx.h: +3 -1
drivers/net/wireless/realtek/rtw89/util.h: +11 -0
drivers/net/wireless/realtek/rtw89/wow.c: +859 -0
drivers/net/wireless/realtek/rtw89/wow.h: +21 -0
drivers/net/wireless/rsi/rsi_91x_core.c: +3 -1
drivers/net/wireless/rsi/rsi_91x_hal.c: +5 -1
drivers/net/wireless/rsi/rsi_91x_mac80211.c: +1 -0
drivers/net/wireless/silabs/wfx/main.c: +1 -0
drivers/net/wireless/st/cw1200/main.c: +1 -0
drivers/net/wireless/ti/Kconfig: +0 -8
drivers/net/wireless/ti/wilink_platform_data.c: +0 -35
drivers/net/wireless/ti/wl1251/main.c: +1 -0
drivers/net/wireless/ti/wl1251/sdio.c: +1 -7
drivers/net/wireless/ti/wl1251/spi.c: +36 -40
drivers/net/wireless/ti/wl1251/wl1251.h: +0 -1
drivers/net/wireless/ti/wlcore/main.c: +1 -0
drivers/net/wireless/ti/wlcore/spi.c: +0 -1
drivers/net/wireless/zydas/zd1201.c: +89 -85
drivers/net/wireless/zydas/zd1211rw/zd_mac.c: +1 -0
drivers/net/wwan/Kconfig: +1 -0
drivers/net/wwan/iosm/iosm_ipc_chnl_cfg.c: +1 -1
drivers/net/wwan/mhi_wwan_mbim.c: +4 -4
drivers/net/wwan/t7xx/Makefile: +3 -0
drivers/net/wwan/t7xx/t7xx_hif_cldma.c: +2 -0
drivers/net/wwan/t7xx/t7xx_hif_dpmaif.h: +5 -9
drivers/net/wwan/t7xx/t7xx_hif_dpmaif_rx.c: +66 -152
drivers/net/wwan/t7xx/t7xx_hif_dpmaif_rx.h: +1 -0
drivers/net/wwan/t7xx/t7xx_netdev.c: +85 -6
drivers/net/wwan/t7xx/t7xx_netdev.h: +5 -0
drivers/net/wwan/t7xx/t7xx_pci.h: +3 -0
drivers/net/wwan/t7xx/t7xx_port.h: +8 -1
drivers/net/wwan/t7xx/t7xx_port_proxy.c: +12 -0
drivers/net/wwan/t7xx/t7xx_port_proxy.h: +4 -0
drivers/net/wwan/t7xx/t7xx_port_trace.c: +116 -0
drivers/net/wwan/t7xx/t7xx_port_wwan.c: +8 -8
drivers/net/wwan/wwan_core.c: +5 -1
drivers/net/xen-netfront.c: +4 -4
drivers/nfc/microread/i2c.c: +2 -3
drivers/nfc/nfcmrvl/i2c.c: +2 -3
drivers/nfc/nxp-nci/i2c.c: +2 -3
drivers/nfc/pn533/i2c.c: +2 -3
drivers/nfc/pn544/i2c.c: +2 -3
drivers/nfc/s3fwrn5/i2c.c: +7 -17
drivers/nfc/st-nci/i2c.c: +2 -3
drivers/nfc/st21nfca/i2c.c: +2 -3
drivers/nfc/virtual_ncidev.c: +71 -76
drivers/ptp/ptp_clock.c: +1 -4
drivers/ptp/ptp_dte.c: +3 -2
drivers/ptp/ptp_idt82p33.c: +617 -92
drivers/ptp/ptp_idt82p33.h: +19 -2
drivers/ptp/ptp_kvm_common.c: +2 -2
drivers/ptp/ptp_ocp.c: +515 -52
drivers/ptp/ptp_pch.c: +4 -15
drivers/ptp/ptp_vmw.c: +2 -2
drivers/s390/net/ctcm_main.c: +2 -9
drivers/s390/net/lcs.c: +3 -5
drivers/s390/net/netiucv.c: +1 -8
drivers/staging/vt6655/device_main.c: +1 -0
drivers/staging/vt6656/main_usb.c: +1 -0
drivers/usb/core/message.c: +1 -0
drivers/usb/core/usb.h: +0 -1
include/linux/avf/virtchnl.h: +12 -2
include/linux/bcma/bcma_driver_chipcommon.h: +1 -1
include/linux/bpf.h: +236 -121
include/linux/bpf_local_storage.h: +7 -10
include/linux/bpf_lsm.h: +6 -0
include/linux/bpf_types.h: +1 -0
include/linux/bpf_verifier.h: +53 -13
include/linux/btf.h: +123 -27
include/linux/btf_ids.h: +3 -1
include/linux/cgroup-defs.h: +4 -0
include/linux/compiler_types.h: +2 -1
include/linux/cpuhotplug.h: +1 -0
include/linux/dsa/8021q.h: +1 -30
include/linux/ethtool.h: +21 -4
include/linux/filter.h: +10 -10
include/linux/ieee80211.h: +70 -14
include/linux/ieee802154.h: +24 -0
include/linux/if_bridge.h: +1 -0
include/linux/if_vlan.h: +3 -6
include/linux/jump_label.h: +17 -4
include/linux/mdio.h: +13 -0
include/linux/mlx5/device.h: +9 -4
include/linux/mlx5/driver.h: +0 -2
include/linux/mlx5/fs.h: +12 -0
include/linux/mlx5/mlx5_ifc.h: +121 -6
include/linux/mlx5/vport.h: +2 -0
include/linux/module.h: +9 -0
include/linux/mv643xx_eth.h: +2 -0
include/linux/net.h: +1 -0
include/linux/netdevice.h: +64 -39
include/linux/netfilter/ipset/ip_set.h: +10 -0
include/linux/netlink.h: +27 -2
include/linux/of_net.h: +6 -0
include/linux/phy.h: +7 -0
include/linux/phylink.h: +32 -0
include/linux/proc_fs.h: +2 -0
include/linux/ptp_clock_kernel.h: +53 -7
include/linux/rcupdate.h: +12 -0
include/linux/rhashtable.h: +36 -25
include/linux/rtnetlink.h: +5 -4
include/linux/sctp.h: +5 -0
include/linux/sfp.h: +99 -90
include/linux/skbuff.h: +11 -15
include/linux/skmsg.h: +1 -0
include/linux/smc911x.h: +0 -14
include/linux/soc/mediatek/mtk_wed.h: +116 -5
include/linux/socket.h: +4 -1
include/linux/stmmac.h: +1 -0
include/linux/tcp.h: +1 -0
include/linux/udp.h: +7 -1
include/linux/usb.h: +1 -0
include/linux/virtio_net.h: +9 -0
include/linux/wl12xx.h: +0 -44
include/linux/wwan.h: +2 -0
include/net/act_api.h: +6 -5
include/net/af_rxrpc.h: +1 -1
include/net/bluetooth/hci.h: +21 -0
include/net/bluetooth/hci_core.h: +7 -1
include/net/bond_alb.h: +2 -2
include/net/bonding.h: +0 -4
include/net/cfg80211-wext.h: +10 -10
include/net/cfg80211.h: +13 -2
include/net/cfg802154.h: +34 -4
include/net/dcbnl.h: +4 -0
include/net/devlink.h: +110 -8
include/net/dropreason.h: +14 -0
include/net/dsa.h: +1 -75
include/net/dst.h: +2 -3
include/net/dst_metadata.h: +1 -0
include/net/flow_offload.h: +8 -0
include/net/fq_impl.h: +10 -6
include/net/genetlink.h: +70 -9
include/net/geneve.h: +1 -1
include/net/ieee802154_netdev.h: +8 -0
include/net/inet_frag.h: +5 -1
include/net/ip_vs.h: +160 -11
include/net/ipv6.h: +33 -0
include/net/ipv6_frag.h: +2 -1
include/net/mac80211.h: +59 -19
include/net/mac802154.h: +0 -31
{drivers/net/ethernet/microsoft => include/net}/mana/gdma.h: +154 -5
{drivers/net/ethernet/microsoft => include/net}/mana/hw_channel.h: +0 -0
{drivers/net/ethernet/microsoft => include/net}/mana/mana.h: +18 -4
include/net/mana/mana_auxiliary.h: +10 -0
{drivers/net/ethernet/microsoft => include/net}/mana/shm_channel.h: +0 -0
include/net/mptcp.h: +10 -2
include/net/mrp.h: +1 -0
include/net/net_namespace.h: +22 -8
include/net/netfilter/nf_conntrack_core.h: +1 -2
include/net/netfilter/nf_conntrack_helper.h: +5 -0
include/net/netfilter/nf_nat.h: +4 -0
include/net/netfilter/nf_tables.h: +11 -4
include/net/netfilter/nf_tables_core.h: +26 -10
include/net/netfilter/nf_tables_ipv4.h: +4 -0
include/net/netfilter/nf_tables_ipv6.h: +3 -3
include/net/netfilter/nft_fib.h: +1 -1
include/net/netfilter/nft_meta.h: +8 -2
include/net/netfilter/nft_reject.h: +2 -1
include/net/netlink.h: +32 -0
include/net/netns/ipv4.h: +8 -0
include/net/netns/sctp.h: +4 -0
include/net/netns/xdp.h: +1 -1
include/net/nl802154.h: +43 -0
include/net/rtnetlink.h: +3 -2
include/net/sctp/checksum.h: +1 -1
include/net/sctp/sctp.h: +4 -7
include/net/sctp/stream_sched.h: +0 -2
include/net/sctp/structs.h: +6 -3
include/net/sctp/ulpqueue.h: +1 -2
include/net/sock.h: +4 -4
include/net/sock_reuseport.h: +2 -0
include/net/switchdev.h: +1 -0
include/net/tc_act/tc_ct.h: +1 -0
include/net/tc_act/tc_skbedit.h: +29 -0
include/net/tc_wrapper.h: +251 -0
include/net/tcp.h: +37 -5
include/net/transp_v6.h: +0 -2
include/net/tso.h: +7 -1
include/net/udp.h: +9 -0
include/net/udp_tunnel.h: +2 -2
include/net/xfrm.h: +123 -26
include/soc/mscc/ocelot.h: +0 -216
include/trace/events/rxrpc.h: +633 -188
include/trace/events/skb.h: +1 -1
include/uapi/linux/bpf.h: +296 -228
include/uapi/linux/dcbnl.h: +8 -0
include/uapi/linux/devlink.h: +18 -0
include/uapi/linux/ethtool.h: +12 -6
include/uapi/linux/ethtool_netlink.h: +15 -0
include/uapi/linux/if_bridge.h: +21 -0
include/uapi/linux/if_link.h: +3 -0
include/uapi/linux/if_packet.h: +1 -0
include/uapi/linux/if_tun.h: +2 -0
include/uapi/linux/mptcp.h: +9 -0
include/uapi/linux/neighbour.h: +7 -1
include/uapi/linux/net_tstamp.h: +2 -1
include/uapi/linux/netfilter/ipset/ip_set.h: +2 -0
include/uapi/linux/netfilter/nf_conntrack_sctp.h: +1 -0
include/uapi/linux/netfilter/nf_tables.h: +29 -0
include/uapi/linux/netfilter/nfnetlink_cttimeout.h: +1 -0
include/uapi/linux/nl80211.h: +3 -0
include/uapi/linux/openvswitch.h: +14 -0
include/uapi/linux/snmp.h: +1 -0
include/uapi/linux/tc_act/tc_ct.h: +3 -0
include/uapi/linux/tcp.h: +6 -0
include/uapi/linux/virtio_bt.h: +8 -0
include/uapi/linux/virtio_net.h: +4 -0
include/uapi/linux/xfrm.h: +6 -0
kernel/bpf/Makefile: +1 -1
kernel/bpf/arraymap.c: +10 -19
kernel/bpf/bpf_cgrp_storage.c: +246 -0
kernel/bpf/bpf_inode_storage.c: +4 -38
kernel/bpf/bpf_local_storage.c: +134 -72
kernel/bpf/bpf_lsm.c: +20 -2
kernel/bpf/bpf_task_storage.c: +99 -62
kernel/bpf/btf.c: +744 -564
kernel/bpf/cgroup_iter.c: +15 -1
kernel/bpf/core.c: +23 -1
kernel/bpf/cpumap.c: +16 -17
kernel/bpf/devmap.c: +2 -2
kernel/bpf/hashtab.c: +13 -24
kernel/bpf/helpers.c: +420 -19
kernel/bpf/local_storage.c: +1 -1
kernel/bpf/map_in_map.c: +44 -17
kernel/bpf/memalloc.c: +37 -9
kernel/bpf/ringbuf.c: +3 -3
kernel/bpf/syscall.c: +242 -227
kernel/bpf/trampoline.c: +67 -13
kernel/bpf/verifier.c: +2200 -553
kernel/cgroup/cgroup.c: +1 -0
kernel/jump_label.c: +44 -12
kernel/module/kallsyms.c: +0 -2
kernel/rcu/tasks.h: +2 -0
kernel/trace/bpf_trace.c: +107 -6
kernel/trace/ftrace.c: +11 -5
lib/Kconfig: +1 -0
lib/net_utils.c: +2 -1
lib/nlattr.c: +1 -1
lib/packing.c: +2 -14
lib/rhashtable.c: +10 -6
lib/test_bpf.c: +0 -1
lib/test_rhashtable.c: +2 -4
net/802/mrp.c: +13 -5
net/8021q/vlan_dev.c: +2 -2
net/ax25/af_ax25.c: +2 -2
net/batman-adv/netlink.c: +4 -2
net/bluetooth/Kconfig: +11 -0
net/bluetooth/hci_conn.c: +4 -13
net/bluetooth/hci_core.c: +2 -2
net/bluetooth/hci_debugfs.c: +1 -1
net/bluetooth/hci_event.c: +17 -7
net/bluetooth/hci_sync.c: +20 -1
net/bluetooth/iso.c: +42 -25
net/bluetooth/l2cap_core.c: +1 -1
net/bluetooth/lib.c: +2 -2
net/bluetooth/mgmt.c: +1 -1
net/bluetooth/rfcomm/core.c: +1 -1
net/bpf/bpf_dummy_struct_ops.c: +7 -7
net/bpf/test_run.c: +12 -7
net/bridge/br.c: +3 -2
net/bridge/br_fdb.c: +44 -2
net/bridge/br_input.c: +19 -2
net/bridge/br_mdb.c: +603 -221
net/bridge/br_multicast.c: +18 -12
net/bridge/br_netlink.c: +20 -1
net/bridge/br_private.h: +27 -3
net/bridge/br_switchdev.c: +5 -1
net/bridge/br_vlan.c: +2 -2
net/bridge/netfilter/nf_conntrack_bridge.c: +1 -31
net/can/af_can.c: +1 -2
net/can/j1939/transport.c: +1 -1
net/can/raw.c: +1 -0
net/core/bpf_sk_storage.c: +6 -36
net/core/dev.c: +96 -89
net/core/dev.h: +7 -0
net/core/dev_ioctl.c: +1 -1
net/core/devlink.c: +637 -152
net/core/drop_monitor.c: +6 -6
net/core/dst.c: +6 -2
net/core/failover.c: +3 -3
net/core/filter.c: +94 -47
net/core/flow_dissector.c: +3 -1
net/core/flow_offload.c: +7 -0
net/core/gen_stats.c: +8 -8
net/core/gro.c: +36 -38
net/core/link_watch.c: +17 -3
net/core/net-sysfs.c: +2 -2
net/core/net_namespace.c: +5 -0
net/core/of_net.c: +3 -2
net/core/rtnetlink.c: +70 -20
net/core/skbuff.c: +115 -50
net/core/skmsg.c: +6 -3
net/core/sock.c: +25 -4
net/core/sock_diag.c: +9 -6
net/core/sock_map.c: +2 -0
net/core/sock_reuseport.c: +89 -5
net/core/tso.c: +0 -8
net/core/utils.c: +2 -2
net/dcb/dcbnl.c: +148 -5
net/dccp/dccp.h: +1 -0
net/dccp/ipv6.c: +8 -7
net/dccp/proto.c: +7 -1
net/dsa/Kconfig: +6 -0
net/dsa/Makefile: +3 -1
net/dsa/devlink.c: +391 -0
net/dsa/devlink.h: +16 -0
net/dsa/dsa.c: +1462 -283
net/dsa/dsa.h: +40 -0
net/dsa/dsa2.c: +0 -1829
net/dsa/dsa_priv.h: +0 -588
net/dsa/master.c: +22 -3
net/dsa/master.h: +19 -0
net/dsa/netlink.c: +2 -1
net/dsa/netlink.h: +8 -0
net/dsa/port.c: +13 -11
net/dsa/port.h: +114 -0
net/dsa/slave.c: +62 -13
net/dsa/slave.h: +69 -0
net/dsa/switch.c: +52 -1
net/dsa/switch.h: +120 -0
net/dsa/tag.c: +243 -0
net/dsa/tag.h: +310 -0
net/dsa/tag_8021q.c: +28 -2
net/dsa/tag_8021q.h: +27 -0
net/dsa/tag_ar9331.c: +5 -3
net/dsa/tag_brcm.c: +11 -7
net/dsa/tag_dsa.c: +8 -5
net/dsa/tag_gswip.c: +5 -3
net/dsa/tag_hellcreek.c: +5 -3
net/dsa/tag_ksz.c: +15 -9
net/dsa/tag_lan9303.c: +5 -3
net/dsa/tag_mtk.c: +7 -3
net/dsa/tag_none.c: +30 -0
net/dsa/tag_ocelot.c: +9 -5
net/dsa/tag_ocelot_8021q.c: +7 -3
net/dsa/tag_qca.c: +5 -3
net/dsa/tag_rtl4_a.c: +5 -3
net/dsa/tag_rtl8_4.c: +6 -3
net/dsa/tag_rzn1_a5psw.c: +5 -3
net/dsa/tag_sja1105.c: +10 -5
net/dsa/tag_trailer.c: +5 -3
net/dsa/tag_xrs700x.c: +5 -3
net/ethernet/eth.c: +1 -1
net/ethtool/Makefile: +1 -1
net/ethtool/channels.c: +14 -5
net/ethtool/common.c: +81 -0
net/ethtool/common.h: +1 -0
net/ethtool/ioctl.c: +25 -19
net/ethtool/linkstate.c: +23 -1
net/ethtool/netlink.c: +7 -0
net/ethtool/netlink.h: +2 -0
net/ethtool/rss.c: +153 -0
net/hsr/hsr_debugfs.c: +16 -24
net/hsr/hsr_device.c: +13 -18
net/hsr/hsr_forward.c: +6 -8
net/hsr/hsr_framereg.c: +110 -155
net/hsr/hsr_framereg.h: +6 -11
net/hsr/hsr_main.h: +8 -7
net/hsr/hsr_netlink.c: +1 -3
net/ieee802154/core.c: +3 -0
net/ieee802154/nl802154.c: +107 -2
net/ieee802154/nl802154.h: +2 -0
net/ipv4/Makefile: +1 -1
net/ipv4/af_inet.c: +4 -4
net/ipv4/bpf_tcp_ca.c: +9 -8
net/ipv4/inet_connection_sock.c: +4 -3
net/ipv4/inet_fragment.c: +10 -4
net/ipv4/ip_fragment.c: +13 -6
net/ipv4/ip_gre.c: +6 -6
net/ipv4/ip_sockglue.c: +2 -1
net/ipv4/ip_tunnel.c: +16 -16
net/ipv4/ip_vti.c: +10 -10
net/ipv4/ipip.c: +1 -1
net/ipv4/ipmr.c: +6 -6
net/ipv4/metrics.c: +0 -3
net/ipv4/netfilter/nft_dup_ipv4.c: +2 -1
net/ipv4/netfilter/nft_fib_ipv4.c: +2 -3
net/ipv4/ping.c: +1 -1
net/ipv4/proc.c: +1 -0
net/ipv4/syncookies.c: +3 -4
net/ipv4/sysctl_net_ipv4.c: +83 -0
net/ipv4/tcp.c: +6 -4
net/ipv4/tcp_bpf.c: +12 -7
net/ipv4/tcp_dctcp.c: +22 -1
net/ipv4/tcp_input.c: +43 -24
net/ipv4/tcp_ipv4.c: +82 -23
net/ipv4/tcp_minisocks.c: +39 -22
net/ipv4/tcp_output.c: +19 -22
net/ipv4/tcp_plb.c: +109 -0
net/ipv4/udp.c: +176 -41
net/ipv4/udp_diag.c: +3 -3
net/ipv4/udp_offload.c: +5 -3
net/ipv4/udp_tunnel_core.c: +1 -0
net/ipv4/udp_tunnel_nic.c: +2 -0
net/ipv6/addrconf.c: +2 -2
net/ipv6/af_inet6.c: +4 -9
net/ipv6/datagram.c: +12 -6
net/ipv6/esp6_offload.c: +1 -2
net/ipv6/ip6_fib.c: +3 -4
net/ipv6/ip6_gre.c: +4 -27
net/ipv6/ip6_offload.c: +4 -23
net/ipv6/ip6_tunnel.c: +12 -14
net/ipv6/ip6_vti.c: +7 -9
net/ipv6/ip6mr.c: +5 -5
net/ipv6/ipv6_sockglue.c: +2 -4
net/ipv6/netfilter/nf_conntrack_reasm.c: +1 -1
net/ipv6/netfilter/nft_dup_ipv6.c: +2 -1
net/ipv6/ping.c: +0 -6
net/ipv6/raw.c: +0 -2
net/ipv6/reassembly.c: +9 -4
net/ipv6/seg6_local.c: +2 -2
net/ipv6/sit.c: +11 -11
net/ipv6/tcp_ipv6.c: +11 -18
net/ipv6/udp.c: +24 -17
net/ipv6/udp_offload.c: +5 -3
net/key/af_key.c: +3 -3
net/l2tp/l2tp_ip6.c: +0 -2
net/mac80211/agg-rx.c: +3 -22
net/mac80211/agg-tx.c: +1 -1
net/mac80211/cfg.c: +22 -23
net/mac80211/debugfs.c: +1 -3
net/mac80211/debugfs_netdev.c: +1 -2
net/mac80211/debugfs_sta.c: +122 -26
net/mac80211/debugfs_sta.h: +12 -0
net/mac80211/driver-ops.c: +26 -1
net/mac80211/driver-ops.h: +16 -0
net/mac80211/ieee80211_i.h: +20 -2
net/mac80211/iface.c: +6 -68
net/mac80211/link.c: +17 -0
net/mac80211/main.c: +15 -8
net/mac80211/mlme.c: +100 -33
net/mac80211/rc80211_minstrel_ht.c: +0 -3
net/mac80211/rc80211_minstrel_ht.h: +0 -1
net/mac80211/rx.c: +10 -31
net/mac80211/sta_info.c: +74 -44
net/mac80211/sta_info.h: +7 -0
net/mac80211/tdls.c: +0 -1
net/mac80211/tx.c: +200 -127
net/mac80211/util.c: +196 -50
net/mac80211/wme.c: +8 -55
net/mac80211/wme.h: +1 -3
net/mac802154/cfg.c: +3 -3
net/mac802154/driver-ops.h: +161 -92
net/mac802154/ieee802154_i.h: +54 -2
net/mac802154/iface.c: +24 -35
net/mac802154/main.c: +2 -2
net/mac802154/rx.c: +35 -18
net/mac802154/trace.h: +25 -0
net/mac802154/tx.c: +118 -14
net/mac802154/util.c: +64 -7
net/mpls/af_mpls.c: +2 -2
net/mptcp/Makefile: +1 -1
net/mptcp/fastopen.c: +73 -0
net/mptcp/options.c: +17 -8
net/mptcp/pm_netlink.c: +88 -38
net/mptcp/pm_userspace.c: +6 -2
net/mptcp/protocol.c: +25 -62
net/mptcp/protocol.h: +26 -4
net/mptcp/sockopt.c: +21 -24
net/mptcp/subflow.c: +135 -33
net/mptcp/token.c: +2 -2
net/ncsi/ncsi-cmd.c: +2 -1
net/netfilter/Kconfig: +3 -6
net/netfilter/Makefile: +3 -2
net/netfilter/ipset/ip_set_hash_gen.h: +62 -9
net/netfilter/ipset/ip_set_hash_ip.c: +8 -11
net/netfilter/ipset/ip_set_hash_ipport.c: +23 -1
net/netfilter/ipset/ip_set_hash_netnet.c: +21 -5
net/netfilter/ipvs/ip_vs_core.c: +22 -18
net/netfilter/ipvs/ip_vs_ctl.c: +364 -88
net/netfilter/ipvs/ip_vs_est.c: +815 -68
net/netfilter/nf_conntrack_bpf.c: +7 -10
net/netfilter/nf_conntrack_core.c: +13 -17
net/netfilter/nf_conntrack_helper.c: +100 -0
net/netfilter/nf_conntrack_proto.c: +55 -69
net/netfilter/nf_conntrack_proto_icmpv6.c: +53 -0
net/netfilter/nf_conntrack_proto_sctp.c: +61 -43
net/netfilter/nf_conntrack_standalone.c: +8 -0
net/netfilter/nf_flow_table_ip.c: +8 -0
net/netfilter/nf_nat_ovs.c: +135 -0
net/netfilter/nf_tables_api.c: +72 -18
net/netfilter/nf_tables_core.c: +2 -0
net/netfilter/nft_bitwise.c: +4 -2
net/netfilter/nft_byteorder.c: +2 -1
net/netfilter/nft_cmp.c: +6 -3
net/netfilter/nft_compat.c: +6 -3
net/netfilter/nft_connlimit.c: +2 -1
net/netfilter/nft_counter.c: +3 -2
net/netfilter/nft_ct.c: +4 -2
net/netfilter/nft_dup_netdev.c: +2 -1
net/netfilter/nft_dynset.c: +4 -3
net/netfilter/nft_exthdr.c: +6 -4
net/netfilter/nft_fib.c: +1 -1
net/netfilter/nft_flow_offload.c: +2 -1
net/netfilter/nft_fwd_netdev.c: +4 -2
net/netfilter/nft_hash.c: +2 -2
net/netfilter/nft_immediate.c: +2 -1
net/netfilter/nft_inner.c: +385 -0
net/netfilter/nft_last.c: +2 -1
net/netfilter/nft_limit.c: +3 -2
net/netfilter/nft_log.c: +2 -1
net/netfilter/nft_lookup.c: +2 -1
net/netfilter/nft_masq.c: +2 -1
net/netfilter/nft_meta.c: +65 -2
net/netfilter/nft_nat.c: +2 -1
net/netfilter/nft_numgen.c: +4 -2
net/netfilter/nft_objref.c: +5 -23
net/netfilter/nft_osf.c: +2 -1
net/netfilter/nft_payload.c: +138 -3
net/netfilter/nft_queue.c: +4 -2
net/netfilter/nft_quota.c: +3 -2
net/netfilter/nft_range.c: +2 -1
net/netfilter/nft_redir.c: +2 -1
net/netfilter/nft_reject.c: +2 -1
net/netfilter/nft_rt.c: +1 -1
net/netfilter/nft_socket.c: +1 -1
net/netfilter/nft_synproxy.c: +2 -1
net/netfilter/nft_tproxy.c: +1 -1
net/netfilter/nft_tunnel.c: +1 -1
net/netfilter/nft_xfrm.c: +1 -1
net/netfilter/xt_sctp.c: +0 -1
net/netlink/af_netlink.c: +33 -9
net/netlink/genetlink.c: +374 -121
net/nfc/nci/core.c: +7 -1
net/nfc/nci/hci.c: +3 -1
net/nfc/rawsock.c: +3 -0
net/openvswitch/Kconfig: +1 -0
net/openvswitch/conntrack.c: +19 -232
net/openvswitch/datapath.c: +43 -2
net/openvswitch/flow_netlink.c: +1 -1
net/openvswitch/flow_table.c: +4 -5
net/openvswitch/vport-geneve.c: +1 -1
net/openvswitch/vport-gre.c: +1 -1
net/openvswitch/vport-netdev.c: +1 -1
net/openvswitch/vport-vxlan.c: +1 -1
net/openvswitch/vport.c: +50 -0
net/openvswitch/vport.h: +16 -0
net/packet/af_packet.c: +6 -5
net/rds/message.c: +0 -2
net/rds/send.c: +1 -2
net/rds/tcp.c: +3 -0
net/rxrpc/Kconfig: +7 -0
net/rxrpc/Makefile: +5 -0
net/rxrpc/af_rxrpc.c: +14 -18
net/rxrpc/ar-internal.h: +243 -172
net/rxrpc/call_accept.c: +92 -103
net/rxrpc/call_event.c: +302 -267
net/rxrpc/call_object.c: +179 -182
net/rxrpc/conn_client.c: +75 -71
net/rxrpc/conn_event.c: +85 -43
net/rxrpc/conn_object.c: +149 -164
net/rxrpc/conn_service.c: +14 -15
net/rxrpc/input.c: +371 -852
net/rxrpc/insecure.c: +5 -11
net/rxrpc/io_thread.c: +496 -0
net/rxrpc/key.c: +10 -6
net/rxrpc/local_event.c: +3 -43
net/rxrpc/local_object.c: +70 -104
net/rxrpc/misc.c: +1 -22
net/rxrpc/net_ns.c: +3 -1
net/rxrpc/output.c: +274 -251
net/rxrpc/peer_event.c: +67 -358
net/rxrpc/peer_object.c: +24 -35
net/rxrpc/proc.c: +134 -35
net/rxrpc/protocol.h: +1 -8
net/rxrpc/recvmsg.c: +96 -212
net/rxrpc/rxkad.c: +122 -192
net/rxrpc/rxperf.c: +619 -0
net/rxrpc/security.c: +32 -2
net/rxrpc/sendmsg.c: +71 -162
net/rxrpc/server_key.c: +25 -0
net/rxrpc/skbuff.c: +16 -28
net/rxrpc/sysctl.c: +1 -10
net/rxrpc/txbuf.c: +142 -0
net/sched/Kconfig: +1 -0
net/sched/act_api.c: +2 -1
net/sched/act_bpf.c: +4 -2
net/sched/act_connmark.c: +4 -2
net/sched/act_csum.c: +4 -2
net/sched/act_ct.c: +109 -148
net/sched/act_ctinfo.c: +4 -2
net/sched/act_gact.c: +4 -2
net/sched/act_gate.c: +4 -2
net/sched/act_ife.c: +4 -2
net/sched/act_ipt.c: +4 -2
net/sched/act_mirred.c: +4 -2
net/sched/act_mpls.c: +4 -2
net/sched/act_nat.c: +4 -3
net/sched/act_pedit.c: +4 -2
net/sched/act_police.c: +4 -2
net/sched/act_sample.c: +4 -2
net/sched/act_simple.c: +4 -2
net/sched/act_skbedit.c: +16 -4
net/sched/act_skbmod.c: +4 -2
net/sched/act_tunnel_key.c: +4 -2
net/sched/act_vlan.c: +4 -2
net/sched/cls_api.c: +9 -1
net/sched/cls_basic.c: +4 -2
net/sched/cls_bpf.c: +4 -2
net/sched/cls_cgroup.c: +4 -2
net/sched/cls_flow.c: +4 -2
net/sched/cls_flower.c: +4 -2
net/sched/cls_fw.c: +4 -2
net/sched/cls_matchall.c: +4 -2
net/sched/cls_route.c: +4 -2
net/sched/cls_rsvp.c: +2 -0
net/sched/cls_rsvp.h: +3 -3
net/sched/cls_rsvp6.c: +2 -0
net/sched/cls_tcindex.c: +4 -3
net/sched/cls_u32.c: +4 -2
net/sched/sch_api.c: +5 -0
net/sctp/associola.c: +1 -3
net/sctp/diag.c: +2 -1
net/sctp/endpointola.c: +9 -4
net/sctp/input.c: +59 -49
net/sctp/ipv6.c: +18 -4
net/sctp/protocol.c: +16 -3
net/sctp/sm_statefuns.c: +1 -1
net/sctp/socket.c: +27 -11
net/sctp/stream_interleave.c: +3 -9
net/sctp/stream_sched.c: +20 -18
net/sctp/stream_sched_prio.c: +0 -27
net/sctp/stream_sched_rr.c: +0 -6
net/sctp/sysctl.c: +55 -29
net/sctp/ulpqueue.c: +2 -8
net/socket.c: +1 -7
net/tls/tls_sw.c: +4 -2
net/unix/af_unix.c: +1 -0
net/vmw_vsock/vmci_transport.c: +5 -1
net/wireless/core.h: +4 -1
net/wireless/mlme.c: +4 -0
net/wireless/nl80211.c: +21 -5
net/wireless/nl80211.h: +2 -1
net/wireless/reg.c: +3 -1
net/wireless/scan.c: +15 -32
net/wireless/sme.c: +22 -4
net/wireless/util.c: +3 -1
net/wireless/wext-compat.c: +82 -98
net/wireless/wext-compat.h: +4 -4
net/wireless/wext-sme.c: +3 -2
net/xdp/xskmap.c: +2 -2
net/xfrm/Makefile: +8 -0
net/xfrm/xfrm_device.c: +101 -8
net/xfrm/xfrm_input.c: +1 -0
net/xfrm/xfrm_interface_bpf.c: +115 -0
net/xfrm/{xfrm_interface.c => xfrm_interface_core.c}: +14 -0
net/xfrm/xfrm_output.c: +12 -3
net/xfrm/xfrm_policy.c: +106 -16
net/xfrm/xfrm_state.c: +189 -23
net/xfrm/xfrm_user.c: +81 -23
samples/bpf/README.rst: +3 -3
samples/bpf/hbm_edt_kern.c: +1 -1
samples/bpf/sockex3_kern.c: +53 -42
samples/bpf/sockex3_user.c: +10 -13
samples/bpf/test_cgrp2_tc.sh: +1 -1
samples/bpf/tracex2_kern.c: +2 -2
samples/bpf/tracex2_user.c: +2 -1
samples/bpf/xdp1_user.c: +1 -1
samples/bpf/xdp2_kern.c: +4 -0
samples/bpf/xdp_router_ipv4_user.c: +1 -1
samples/pktgen/functions.sh: +1 -1
scripts/bpf_doc.py: +35 -14
tools/bpf/bpftool/Documentation/bpftool-map.rst: +1 -1
tools/bpf/bpftool/Documentation/bpftool-prog.rst: +13 -2
tools/bpf/bpftool/Documentation/common_options.rst: +4 -13
tools/bpf/bpftool/Documentation/substitutions.rst: +1 -1
tools/bpf/bpftool/Makefile: +49 -25
tools/bpf/bpftool/bash-completion/bpftool: +2 -1
tools/bpf/bpftool/btf.c: +17 -27
tools/bpf/bpftool/btf_dumper.c: +1 -1
tools/bpf/bpftool/common.c: +14 -9
tools/bpf/bpftool/gen.c: +11 -18
tools/bpf/bpftool/iter.c: +8 -4
tools/bpf/bpftool/jit_disasm.c: +215 -46
tools/bpf/bpftool/link.c: +4 -6
tools/bpf/bpftool/main.c: +62 -54
tools/bpf/bpftool/main.h: +19 -30
tools/bpf/bpftool/map.c: +12 -21
tools/bpf/bpftool/net.c: +2 -0
tools/bpf/bpftool/perf.c: +2 -0
tools/bpf/bpftool/pids.c: +8 -8
tools/bpf/bpftool/prog.c: +96 -28
tools/bpf/bpftool/struct_ops.c: +9 -13
tools/bpf/bpftool/xlated_dumper.c: +2 -0
tools/include/uapi/linux/bpf.h: +296 -228
tools/include/uapi/linux/if_link.h: +1 -0
tools/lib/bpf/Makefile: +17 -0
tools/lib/bpf/bpf.c: +44 -4
tools/lib/bpf/bpf.h: +23 -0
tools/lib/bpf/btf.c: +192 -80
tools/lib/bpf/btf_dump.c: +36 -10
tools/lib/bpf/hashmap.c: +9 -9
tools/lib/bpf/hashmap.h: +57 -34
tools/lib/bpf/libbpf.c: +166 -100
tools/lib/bpf/libbpf.map: +5 -1
tools/lib/bpf/libbpf_probes.c: +1 -0
tools/lib/bpf/ringbuf.c: +2 -2
tools/lib/bpf/strset.c: +9 -9
tools/lib/bpf/usdt.c: +30 -33
tools/perf/tests/expr.c: +10 -18
tools/perf/tests/pmu-events.c: +3 -3
tools/perf/util/bpf-loader.c: +5 -6
tools/perf/util/evsel.c: +1 -1
tools/perf/util/expr.c: +15 -21
tools/perf/util/hashmap.c: +9 -9
tools/perf/util/hashmap.h: +57 -34
tools/perf/util/metricgroup.c: +5 -5
tools/perf/util/stat-shadow.c: +1 -1
tools/perf/util/stat.c: +4 -5
tools/testing/selftests/Makefile: +1 -0
tools/testing/selftests/bpf/DENYLIST: +2 -1
tools/testing/selftests/bpf/DENYLIST.aarch64: +84 -0
tools/testing/selftests/bpf/DENYLIST.s390x: +29 -18
tools/testing/selftests/bpf/Makefile: +23 -14
tools/testing/selftests/bpf/README.rst: +47 -6
tools/testing/selftests/bpf/bpf_experimental.h: +68 -0
tools/testing/selftests/bpf/bpf_legacy.h: +13 -6
tools/testing/selftests/bpf/bpf_testmod/bpf_testmod.c: +24 -0
tools/testing/selftests/bpf/bpf_util.h: +19 -0
tools/testing/selftests/bpf/cgroup_helpers.c: +21 -1
tools/testing/selftests/bpf/cgroup_helpers.h: +1 -0
tools/testing/selftests/bpf/config: +6 -1
tools/testing/selftests/bpf/config.aarch64: +181 -0
tools/testing/selftests/bpf/config.s390x: +0 -3
tools/testing/selftests/bpf/config.x86_64: +0 -1
tools/testing/selftests/bpf/network_helpers.c: +5 -42
tools/testing/selftests/bpf/prog_tests/align.c: +24 -14
tools/testing/selftests/bpf/prog_tests/bpf_iter.c: +22 -19
tools/testing/selftests/bpf/prog_tests/bpf_nf.c: +3 -3
tools/testing/selftests/bpf/prog_tests/btf.c: +273 -5
tools/testing/selftests/bpf/prog_tests/btf_dedup_split.c: +30 -15
tools/testing/selftests/bpf/prog_tests/btf_dump.c: +2 -2
tools/testing/selftests/bpf/prog_tests/btf_skc_cls_ingress.c: +10 -15
tools/testing/selftests/bpf/prog_tests/cgroup_iter.c: +76 -0
tools/testing/selftests/bpf/prog_tests/cgrp_kfunc.c: +175 -0
tools/testing/selftests/bpf/prog_tests/cgrp_local_storage.c: +265 -0
tools/testing/selftests/bpf/prog_tests/dynptr.c: +3 -77
tools/testing/selftests/bpf/prog_tests/empty_skb.c: +146 -0
tools/testing/selftests/bpf/prog_tests/hashmap.c: +136 -54
tools/testing/selftests/bpf/prog_tests/kfunc_dynptr_param.c: +2 -5
tools/testing/selftests/bpf/prog_tests/kprobe_multi_test.c: +17 -15
tools/testing/selftests/bpf/prog_tests/kprobe_multi_testmod_test.c: +89 -0
tools/testing/selftests/bpf/prog_tests/libbpf_get_fd_by_id_opts.c: +87 -0
tools/testing/selftests/bpf/prog_tests/libbpf_str.c: +8 -0
tools/testing/selftests/bpf/prog_tests/linked_list.c: +740 -0
tools/testing/selftests/bpf/prog_tests/lsm_cgroup.c: +13 -4
tools/testing/selftests/bpf/prog_tests/map_kptr.c: +4 -79
tools/testing/selftests/bpf/prog_tests/module_attach.c: +7 -0
tools/testing/selftests/bpf/prog_tests/rcu_read_lock.c: +158 -0
tools/testing/selftests/bpf/prog_tests/ringbuf.c: +65 -1
tools/testing/selftests/bpf/prog_tests/skeleton.c: +10 -1
tools/testing/selftests/bpf/prog_tests/spin_lock.c: +142 -0
tools/testing/selftests/bpf/prog_tests/spinlock.c: +0 -45
tools/testing/selftests/bpf/prog_tests/task_kfunc.c: +164 -0
tools/testing/selftests/bpf/prog_tests/task_local_storage.c: +159 -5
tools/testing/selftests/bpf/prog_tests/tc_redirect.c: +159 -155
tools/testing/selftests/bpf/prog_tests/tcp_hdr_options.c: +4 -2
tools/testing/selftests/bpf/prog_tests/test_tunnel.c: +1 -1
tools/testing/selftests/bpf/prog_tests/tracing_struct.c: +2 -1
tools/testing/selftests/bpf/prog_tests/type_cast.c: +114 -0
tools/testing/selftests/bpf/prog_tests/user_ringbuf.c: +4 -2
tools/testing/selftests/bpf/prog_tests/xdp_adjust_tail.c: +4 -3
tools/testing/selftests/bpf/prog_tests/xdp_synproxy.c: +3 -3
tools/testing/selftests/bpf/prog_tests/xfrm_info.c: +362 -0
tools/testing/selftests/bpf/progs/bpf_iter_bpf_array_map.c: +20 -1
tools/testing/selftests/bpf/progs/bpf_iter_ksym.c: +3 -3
tools/testing/selftests/bpf/progs/bpf_misc.h: +5 -0
tools/testing/selftests/bpf/progs/bpf_tracing_net.h: +3 -0
tools/testing/selftests/bpf/progs/btf_dump_test_case_padding.c: +9 -0
tools/testing/selftests/bpf/progs/btf_type_tag_percpu.c: +1 -0
tools/testing/selftests/bpf/progs/cgrp_kfunc_common.h: +72 -0
tools/testing/selftests/bpf/progs/cgrp_kfunc_failure.c: +260 -0
tools/testing/selftests/bpf/progs/cgrp_kfunc_success.c: +170 -0
tools/testing/selftests/bpf/progs/cgrp_ls_attach_cgroup.c: +101 -0
tools/testing/selftests/bpf/progs/cgrp_ls_negative.c: +26 -0
tools/testing/selftests/bpf/progs/cgrp_ls_recursion.c: +70 -0
tools/testing/selftests/bpf/progs/cgrp_ls_sleepable.c: +80 -0
tools/testing/selftests/bpf/progs/cgrp_ls_tp_btf.c: +88 -0
tools/testing/selftests/bpf/progs/dynptr_fail.c: +31 -0
tools/testing/selftests/bpf/progs/dynptr_success.c: +1 -0
tools/testing/selftests/bpf/progs/empty_skb.c: +37 -0
tools/testing/selftests/bpf/progs/kprobe_multi.c: +50 -0
tools/testing/selftests/bpf/progs/linked_list.c: +385 -0
tools/testing/selftests/bpf/progs/linked_list.h: +56 -0
tools/testing/selftests/bpf/progs/linked_list_fail.c: +581 -0
tools/testing/selftests/bpf/progs/lsm_cgroup.c: +8 -0
tools/testing/selftests/bpf/progs/map_kptr_fail.c: +27 -0
tools/testing/selftests/bpf/progs/rcu_read_lock.c: +330 -0
tools/testing/selftests/bpf/progs/task_kfunc_common.h: +72 -0
tools/testing/selftests/bpf/progs/task_kfunc_failure.c: +284 -0
tools/testing/selftests/bpf/progs/task_kfunc_success.c: +227 -0
tools/testing/selftests/bpf/progs/task_local_storage_exit_creds.c: +3 -0
tools/testing/selftests/bpf/progs/task_ls_recursion.c: +40 -3
tools/testing/selftests/bpf/progs/task_storage_nodeadlock.c: +47 -0
tools/testing/selftests/bpf/progs/test_kfunc_dynptr_param.c: +0 -12
tools/testing/selftests/bpf/progs/test_libbpf_get_fd_by_id_opts.c: +36 -0
tools/testing/selftests/bpf/progs/test_misc_tcp_hdr_options.c: +4 -0
tools/testing/selftests/bpf/progs/test_module_attach.c: +6 -0
tools/testing/selftests/bpf/progs/test_ringbuf_map_key.c: +70 -0
tools/testing/selftests/bpf/progs/test_skeleton.c: +17 -0
tools/testing/selftests/bpf/progs/test_spin_lock.c: +2 -2
tools/testing/selftests/bpf/progs/test_spin_lock_fail.c: +204 -0
tools/testing/selftests/bpf/progs/type_cast.c: +83 -0
tools/testing/selftests/bpf/progs/user_ringbuf_fail.c: +43 -8
tools/testing/selftests/bpf/progs/xfrm_info.c: +40 -0
tools/testing/selftests/bpf/task_local_storage_helpers.h: +4 -0
tools/testing/selftests/bpf/test_bpftool_metadata.sh: +5 -2
tools/testing/selftests/bpf/test_bpftool_synctypes.py: +11 -3
tools/testing/selftests/bpf/test_cpp.cpp: +10 -3
tools/testing/selftests/bpf/test_flow_dissector.sh: +4 -2
tools/testing/selftests/bpf/test_loader.c: +233 -0
tools/testing/selftests/bpf/test_lwt_ip_encap.sh: +9 -8
tools/testing/selftests/bpf/test_lwt_seg6local.sh: +5 -4
tools/testing/selftests/bpf/test_offload.py: +5 -3
tools/testing/selftests/bpf/test_progs.c: +22 -16
tools/testing/selftests/bpf/test_progs.h: +33 -0
tools/testing/selftests/bpf/test_sockmap.c: +18 -0
tools/testing/selftests/bpf/test_tc_edt.sh: +2 -1
tools/testing/selftests/bpf/test_tc_tunnel.sh: +3 -2
tools/testing/selftests/bpf/test_tunnel.sh: +3 -2
tools/testing/selftests/bpf/test_verifier.c: +10 -3
tools/testing/selftests/bpf/test_xdp_meta.sh: +5 -4
tools/testing/selftests/bpf/test_xdp_vlan.sh: +4 -4
tools/testing/selftests/bpf/trace_helpers.c: +13 -7
tools/testing/selftests/bpf/trace_helpers.h: +2 -0
tools/testing/selftests/bpf/verifier/calls.c: +84 -2
tools/testing/selftests/bpf/verifier/direct_packet_access.c: +54 -0
tools/testing/selftests/bpf/verifier/jeq_infer_not_null.c: +174 -0
tools/testing/selftests/bpf/verifier/jit.c: +24 -0
tools/testing/selftests/bpf/verifier/map_ptr.c: +4 -4
tools/testing/selftests/bpf/verifier/ref_tracking.c: +2 -2
tools/testing/selftests/bpf/verifier/ringbuf.c: +1 -1
tools/testing/selftests/bpf/verifier/spill_fill.c: +1 -1
tools/testing/selftests/bpf/verifier/spin_lock.c: +114 -0
tools/testing/selftests/bpf/verifier/value_or_null.c: +49 -0
tools/testing/selftests/bpf/veristat.c: +760 -158
tools/testing/selftests/bpf/vmtest.sh: +6 -0
tools/testing/selftests/bpf/xdp_synproxy.c: +3 -2
tools/testing/selftests/bpf/xsk.c: +4 -22
tools/testing/selftests/bpf/xskxceiver.c: +2 -1
tools/testing/selftests/drivers/net/bonding/Makefile: +3 -1
tools/testing/selftests/drivers/net/bonding/lag_lib.sh: +106 -0
tools/testing/selftests/drivers/net/bonding/mode-1-recovery-updelay.sh: +45 -0
tools/testing/selftests/drivers/net/bonding/mode-2-recovery-updelay.sh: +45 -0
tools/testing/selftests/drivers/net/bonding/settings: +1 -1
tools/testing/selftests/drivers/net/mlxsw/devlink_trap_control.sh: +22 -0
tools/testing/selftests/drivers/net/mlxsw/devlink_trap_l2_drops.sh: +105 -0
tools/testing/selftests/drivers/net/mlxsw/{spectrum-2 => }/devlink_trap_tunnel_ipip6.sh: +1 -1
tools/testing/selftests/drivers/net/mlxsw/rtnetlink.sh: +31 -0
tools/testing/selftests/nci/nci_dev.c: +11 -0
tools/testing/selftests/net/.gitignore: +2 -0
tools/testing/selftests/net/Makefile: +4 -0
tools/testing/selftests/net/bpf/Makefile: +41 -4
tools/testing/selftests/net/csum.c: +986 -0
tools/testing/selftests/net/forwarding/Makefile: +1 -0
tools/testing/selftests/net/forwarding/bridge_igmp.sh: +0 -3
tools/testing/selftests/net/forwarding/bridge_locked_port.sh: +154 -1
tools/testing/selftests/net/forwarding/bridge_mdb.sh: +1094 -33
tools/testing/selftests/net/forwarding/bridge_mdb_host.sh: +103 -0
tools/testing/selftests/net/forwarding/bridge_vlan_mcast.sh: +3 -0
tools/testing/selftests/net/forwarding/devlink_lib.sh: +12 -7
tools/testing/selftests/net/forwarding/lib.sh: +8 -0
tools/testing/selftests/net/hsr/Makefile: +7 -0
tools/testing/selftests/net/hsr/config: +4 -0
tools/testing/selftests/net/hsr/hsr_ping.sh: +256 -0
tools/testing/selftests/net/mptcp/diag.sh: +1 -0
tools/testing/selftests/net/mptcp/mptcp_connect.c: +129 -42
tools/testing/selftests/net/mptcp/mptcp_connect.sh: +22 -5
tools/testing/selftests/net/mptcp/mptcp_join.sh: +91 -27
tools/testing/selftests/net/mptcp/mptcp_sockopt.sh: +36 -33
tools/testing/selftests/net/mptcp/simult_flows.sh: +3 -5
tools/testing/selftests/net/mptcp/userspace_pm.sh: +174 -124
tools/testing/selftests/net/sctp_hello.c: +137 -0
tools/testing/selftests/net/sctp_vrf.sh: +178 -0
tools/testing/selftests/net/so_incoming_cpu.c: +242 -0
tools/testing/selftests/netfilter/conntrack_icmp_related.sh: +34 -2
tools/testing/selftests/tc-testing/tdc.py: +118 -7
