{
  "hash": "5cc2db37124bb33914996d6fdbb2ddb3811f2945",
  "hash_short": "5cc2db37",
  "subject": "x86/static-call: Remove early_boot_irqs_disabled check to fix Xen PVH dom0",
  "body": "__static_call_update_early() has a check for early_boot_irqs_disabled, but\nis used before early_boot_irqs_disabled is set up in start_kernel().\n\nXen PV has always special cased early_boot_irqs_disabled, but Xen PVH does\nnot and falls over the BUG when booting as dom0.\n\nIt is very suspect that early_boot_irqs_disabled starts as 0, becomes 1 for\na time, then becomes 0 again, but as this needs backporting to fix a\nbreakage in a security fix, dropping the BUG_ON() is the far safer option.\n\nFixes: 0ef8047b737d (\"x86/static-call: provide a way to do very early static-call updates\")\nCloses: https://bugzilla.kernel.org/show_bug.cgi?id=219620\nReported-by: Alex Zenla <alex@edera.dev>\nSuggested-by: Peter Zijlstra <peterz@infradead.org>\nSigned-off-by: Andrew Cooper <andrew.cooper3@citrix.com>\nSigned-off-by: Borislav Petkov (AMD) <bp@alien8.de>\nReviewed-by: Juergen Gross <jgross@suse.com>\nAcked-by: Peter Zijlstra (Intel) <peterz@infradead.org>\nTested-by: Alex Zenla <alex@edera.dev>\nLink: https://lore.kernel.org/r/20241221211046.6475-1-andrew.cooper3@citrix.com",
  "full_message": "x86/static-call: Remove early_boot_irqs_disabled check to fix Xen PVH dom0\n\n__static_call_update_early() has a check for early_boot_irqs_disabled, but\nis used before early_boot_irqs_disabled is set up in start_kernel().\n\nXen PV has always special cased early_boot_irqs_disabled, but Xen PVH does\nnot and falls over the BUG when booting as dom0.\n\nIt is very suspect that early_boot_irqs_disabled starts as 0, becomes 1 for\na time, then becomes 0 again, but as this needs backporting to fix a\nbreakage in a security fix, dropping the BUG_ON() is the far safer option.\n\nFixes: 0ef8047b737d (\"x86/static-call: provide a way to do very early static-call updates\")\nCloses: https://bugzilla.kernel.org/show_bug.cgi?id=219620\nReported-by: Alex Zenla <alex@edera.dev>\nSuggested-by: Peter Zijlstra <peterz@infradead.org>\nSigned-off-by: Andrew Cooper <andrew.cooper3@citrix.com>\nSigned-off-by: Borislav Petkov (AMD) <bp@alien8.de>\nReviewed-by: Juergen Gross <jgross@suse.com>\nAcked-by: Peter Zijlstra (Intel) <peterz@infradead.org>\nTested-by: Alex Zenla <alex@edera.dev>\nLink: https://lore.kernel.org/r/20241221211046.6475-1-andrew.cooper3@citrix.com",
  "author_name": "Andrew Cooper",
  "author_email": "andrew.cooper3@citrix.com",
  "author_date": "Sat Dec 21 21:10:46 2024 +0000",
  "author_date_iso": "2024-12-21T21:10:46+00:00",
  "committer_name": "Borislav Petkov (AMD)",
  "committer_email": "bp@alien8.de",
  "committer_date": "Thu Jan 2 17:11:29 2025 +0100",
  "committer_date_iso": "2025-01-02T17:11:29+01:00",
  "files_changed": [
    "arch/x86/kernel/static_call.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "arch/x86/kernel/static_call.c",
      "insertions": 0,
      "deletions": 1
    }
  ],
  "total_insertions": 0,
  "total_deletions": 1,
  "total_changes": 1,
  "parents": [
    "fc033cf25e612e840e545f8d5ad2edd6ba613ed5"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "security fix"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/kernel/static_call.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}