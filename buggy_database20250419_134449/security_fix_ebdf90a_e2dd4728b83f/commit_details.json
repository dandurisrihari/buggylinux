{
  "hash": "ebdf90a4a1c6d7f4a8a820d1f41bc7fcad95b823",
  "hash_short": "ebdf90a4",
  "subject": "perf test: Make --skip work on shell tests",
  "body": "perf-test has the option --skip to provide a list of tests to skip.\nHowever, this option does not work with shell scripts.\n\nThis patch passes the skiplist to run_shell_tests, so that also shell\nscripts could be skipped using --skip.\n\nCommitter tests:\n\nTests 79 onwards are shell tests:\n\nBefore:\n\n  # perf test --skip 1,2,81,82,84,88,90\n   1: vmlinux symtab matches kallsyms                                 : Skip (user override)\n   2: Detect openat syscall event                                     : Skip (user override)\n   3: Detect openat syscall event on all cpus                         : Ok\n   4: Read samples using the mmap interface                           : Ok\n   5: Test data source output                                         : Ok\n  <SNIP>\n  78: x86 Sample parsing                                              : Ok\n  79: build id cache operations                                       : Ok\n  80: daemon operations                                               : Ok\n  81: perf pipe recording and injection test                          : Ok\n  82: Add vfs_getname probe to get syscall args filenames             : FAILED!\n  83: probe libc's inet_pton & backtrace it with ping                 : Ok\n  84: Use vfs_getname probe to get syscall args filenames             : FAILED!\n  85: Zstd perf.data compression/decompression                        : Ok\n  86: perf stat csv summary test                                      : Ok\n  87: perf stat metrics (shadow stat) test                            : Ok\n  88: perf stat --bpf-counters test                                   : Ok\n  89: Check Arm CoreSight trace data recording and synthesized samples: Skip\n  90: Check open filename arg using perf trace + vfs_getname          : FAILED!\n  #\n\nAfter:\n\n  # perf test --skip 1,2,81,82,84,88,90\n   1: vmlinux symtab matches kallsyms                                 : Skip (user override)\n   2: Detect openat syscall event                                     : Skip (user override)\n   3: Detect openat syscall event on all cpus                         : Ok\n   4: Read samples using the mmap interface                           : Ok\n   5: Test data source output                                         : Ok\n  <SNIP>\n  78: x86 Sample parsing                                              : Ok\n  79: build id cache operations                                       : Ok\n  80: daemon operations                                               : Ok\n  81: perf pipe recording and injection test                          : Skip (user override)\n  82: Add vfs_getname probe to get syscall args filenames             : Skip (user override)\n  83: probe libc's inet_pton & backtrace it with ping                 : Ok\n  84: Use vfs_getname probe to get syscall args filenames             : Skip (user override)\n  85: Zstd perf.data compression/decompression                        : Ok\n  86: perf stat csv summary test                                      : Ok\n  87: perf stat metrics (shadow stat) test                            : Ok\n  88: perf stat --bpf-counters test                                   : Skip (user override)\n  89: Check Arm CoreSight trace data recording and synthesized samples: Skip\n  90: Check open filename arg using perf trace + vfs_getname          : Skip (user override)\n  #\n\nSigned-off-by: Riccardo Mancini <rickyman7@gmail.com>\nTested-by: Arnaldo Carvalho de Melo <acme@redhat.com>\nCc: Ian Rogers <irogers@google.com>\nCc: Jiri Olsa <jolsa@redhat.com>\nCc: Mark Rutland <mark.rutland@arm.com>\nCc: Namhyung Kim <namhyung@kernel.org>\nCc: Peter Zijlstra <peterz@infradead.org>\nLink: http://lore.kernel.org/lkml/20210811180625.160944-1-rickyman7@gmail.com\nSigned-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>",
  "full_message": "perf test: Make --skip work on shell tests\n\nperf-test has the option --skip to provide a list of tests to skip.\nHowever, this option does not work with shell scripts.\n\nThis patch passes the skiplist to run_shell_tests, so that also shell\nscripts could be skipped using --skip.\n\nCommitter tests:\n\nTests 79 onwards are shell tests:\n\nBefore:\n\n  # perf test --skip 1,2,81,82,84,88,90\n   1: vmlinux symtab matches kallsyms                                 : Skip (user override)\n   2: Detect openat syscall event                                     : Skip (user override)\n   3: Detect openat syscall event on all cpus                         : Ok\n   4: Read samples using the mmap interface                           : Ok\n   5: Test data source output                                         : Ok\n  <SNIP>\n  78: x86 Sample parsing                                              : Ok\n  79: build id cache operations                                       : Ok\n  80: daemon operations                                               : Ok\n  81: perf pipe recording and injection test                          : Ok\n  82: Add vfs_getname probe to get syscall args filenames             : FAILED!\n  83: probe libc's inet_pton & backtrace it with ping                 : Ok\n  84: Use vfs_getname probe to get syscall args filenames             : FAILED!\n  85: Zstd perf.data compression/decompression                        : Ok\n  86: perf stat csv summary test                                      : Ok\n  87: perf stat metrics (shadow stat) test                            : Ok\n  88: perf stat --bpf-counters test                                   : Ok\n  89: Check Arm CoreSight trace data recording and synthesized samples: Skip\n  90: Check open filename arg using perf trace + vfs_getname          : FAILED!\n  #\n\nAfter:\n\n  # perf test --skip 1,2,81,82,84,88,90\n   1: vmlinux symtab matches kallsyms                                 : Skip (user override)\n   2: Detect openat syscall event                                     : Skip (user override)\n   3: Detect openat syscall event on all cpus                         : Ok\n   4: Read samples using the mmap interface                           : Ok\n   5: Test data source output                                         : Ok\n  <SNIP>\n  78: x86 Sample parsing                                              : Ok\n  79: build id cache operations                                       : Ok\n  80: daemon operations                                               : Ok\n  81: perf pipe recording and injection test                          : Skip (user override)\n  82: Add vfs_getname probe to get syscall args filenames             : Skip (user override)\n  83: probe libc's inet_pton & backtrace it with ping                 : Ok\n  84: Use vfs_getname probe to get syscall args filenames             : Skip (user override)\n  85: Zstd perf.data compression/decompression                        : Ok\n  86: perf stat csv summary test                                      : Ok\n  87: perf stat metrics (shadow stat) test                            : Ok\n  88: perf stat --bpf-counters test                                   : Skip (user override)\n  89: Check Arm CoreSight trace data recording and synthesized samples: Skip\n  90: Check open filename arg using perf trace + vfs_getname          : Skip (user override)\n  #\n\nSigned-off-by: Riccardo Mancini <rickyman7@gmail.com>\nTested-by: Arnaldo Carvalho de Melo <acme@redhat.com>\nCc: Ian Rogers <irogers@google.com>\nCc: Jiri Olsa <jolsa@redhat.com>\nCc: Mark Rutland <mark.rutland@arm.com>\nCc: Namhyung Kim <namhyung@kernel.org>\nCc: Peter Zijlstra <peterz@infradead.org>\nLink: http://lore.kernel.org/lkml/20210811180625.160944-1-rickyman7@gmail.com\nSigned-off-by: Arnaldo Carvalho de Melo <acme@redhat.com>",
  "author_name": "Riccardo Mancini",
  "author_email": "rickyman7@gmail.com",
  "author_date": "Wed Aug 11 20:06:26 2021 +0200",
  "author_date_iso": "2021-08-11T20:06:26+02:00",
  "committer_name": "Arnaldo Carvalho de Melo",
  "committer_email": "acme@redhat.com",
  "committer_date": "Wed Aug 11 15:45:08 2021 -0300",
  "committer_date_iso": "2021-08-11T15:45:08-03:00",
  "files_changed": [
    "tools/perf/tests/builtin-test.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "tools/perf/tests/builtin-test.c",
      "insertions": 9,
      "deletions": 2
    }
  ],
  "total_insertions": 9,
  "total_deletions": 2,
  "total_changes": 11,
  "parents": [
    "5e9cfa71af79ac210d6274a17ca693fb48df1768"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "tools/perf/tests/builtin-test.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}