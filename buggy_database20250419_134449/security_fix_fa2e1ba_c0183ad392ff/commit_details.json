{
  "hash": "fa2e1ba3e9e39072fa7a6a9d11ac432c505b4ac7",
  "hash_short": "fa2e1ba3",
  "subject": "Merge tag 'net-5.17-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/netdev/net",
  "body": "Pull networking fixes from Jakub Kicinski:\n \"Including fixes from netfilter, bpf.\n\n  Quite a handful of old regression fixes but most of those are\n  pre-5.16.\n\n  Current release - regressions:\n\n   - fix memory leaks in the skb free deferral scheme if upper layer\n     protocols are used, i.e. in-kernel TCP readers like TLS\n\n  Current release - new code bugs:\n\n   - nf_tables: fix NULL check typo in _clone() functions\n\n   - change the default to y for Vertexcom vendor Kconfig\n\n   - a couple of fixes to incorrect uses of ref tracking\n\n   - two fixes for constifying netdev->dev_addr\n\n  Previous releases - regressions:\n\n   - bpf:\n      - various verifier fixes mainly around register offset handling\n        when passed to helper functions\n      - fix mount source displayed for bpffs (none -> bpffs)\n\n   - bonding:\n      - fix extraction of ports for connection hash calculation\n      - fix bond_xmit_broadcast return value when some devices are down\n\n   - phy: marvell: add Marvell specific PHY loopback\n\n   - sch_api: don't skip qdisc attach on ingress, prevent ref leak\n\n   - htb: restore minimal packet size handling in rate control\n\n   - sfp: fix high power modules without diagnostic monitoring\n\n   - mscc: ocelot:\n      - don't let phylink re-enable TX PAUSE on the NPI port\n      - don't dereference NULL pointers with shared tc filters\n\n   - smsc95xx: correct reset handling for LAN9514\n\n   - cpsw: avoid alignment faults by taking NET_IP_ALIGN into account\n\n   - phy: micrel: use kszphy_suspend/_resume for irq aware devices,\n     avoid races with the interrupt\n\n  Previous releases - always broken:\n\n   - xdp: check prog type before updating BPF link\n\n   - smc: resolve various races around abnormal connection termination\n\n   - sit: allow encapsulated IPv6 traffic to be delivered locally\n\n   - axienet: fix init/reset handling, add missing barriers, read the\n     right status words, stop queues correctly\n\n   - add missing dev_put() in sock_timestamping_bind_phc()\n\n  Misc:\n\n   - ipv4: prevent accidentally passing RTO_ONLINK to\n     ip_route_output_key_hash() by sanitizing flags\n\n   - ipv4: avoid quadratic behavior in netns dismantle\n\n   - stmmac: dwmac-oxnas: add support for OX810SE\n\n   - fsl: xgmac_mdio: add workaround for erratum A-009885\"\n\n* tag 'net-5.17-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/netdev/net: (92 commits)\n  ipv4: add net_hash_mix() dispersion to fib_info_laddrhash keys\n  ipv4: avoid quadratic behavior in netns dismantle\n  net/fsl: xgmac_mdio: Fix incorrect iounmap when removing module\n  powerpc/fsl/dts: Enable WA for erratum A-009885 on fman3l MDIO buses\n  dt-bindings: net: Document fsl,erratum-a009885\n  net/fsl: xgmac_mdio: Add workaround for erratum A-009885\n  net: mscc: ocelot: fix using match before it is set\n  net: phy: micrel: use kszphy_suspend()/kszphy_resume for irq aware devices\n  net: cpsw: avoid alignment faults by taking NET_IP_ALIGN into account\n  nfc: llcp: fix NULL error pointer dereference on sendmsg() after failed bind()\n  net: axienet: increase default TX ring size to 128\n  net: axienet: fix for TX busy handling\n  net: axienet: fix number of TX ring slots for available check\n  net: axienet: Fix TX ring slot available check\n  net: axienet: limit minimum TX ring size\n  net: axienet: add missing memory barriers\n  net: axienet: reset core on initialization prior to MDIO access\n  net: axienet: Wait for PhyRstCmplt after core reset\n  net: axienet: increase reset timeout\n  bpf, selftests: Add ringbuf memory type confusion test\n  ...",
  "full_message": "Merge tag 'net-5.17-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/netdev/net\n\nPull networking fixes from Jakub Kicinski:\n \"Including fixes from netfilter, bpf.\n\n  Quite a handful of old regression fixes but most of those are\n  pre-5.16.\n\n  Current release - regressions:\n\n   - fix memory leaks in the skb free deferral scheme if upper layer\n     protocols are used, i.e. in-kernel TCP readers like TLS\n\n  Current release - new code bugs:\n\n   - nf_tables: fix NULL check typo in _clone() functions\n\n   - change the default to y for Vertexcom vendor Kconfig\n\n   - a couple of fixes to incorrect uses of ref tracking\n\n   - two fixes for constifying netdev->dev_addr\n\n  Previous releases - regressions:\n\n   - bpf:\n      - various verifier fixes mainly around register offset handling\n        when passed to helper functions\n      - fix mount source displayed for bpffs (none -> bpffs)\n\n   - bonding:\n      - fix extraction of ports for connection hash calculation\n      - fix bond_xmit_broadcast return value when some devices are down\n\n   - phy: marvell: add Marvell specific PHY loopback\n\n   - sch_api: don't skip qdisc attach on ingress, prevent ref leak\n\n   - htb: restore minimal packet size handling in rate control\n\n   - sfp: fix high power modules without diagnostic monitoring\n\n   - mscc: ocelot:\n      - don't let phylink re-enable TX PAUSE on the NPI port\n      - don't dereference NULL pointers with shared tc filters\n\n   - smsc95xx: correct reset handling for LAN9514\n\n   - cpsw: avoid alignment faults by taking NET_IP_ALIGN into account\n\n   - phy: micrel: use kszphy_suspend/_resume for irq aware devices,\n     avoid races with the interrupt\n\n  Previous releases - always broken:\n\n   - xdp: check prog type before updating BPF link\n\n   - smc: resolve various races around abnormal connection termination\n\n   - sit: allow encapsulated IPv6 traffic to be delivered locally\n\n   - axienet: fix init/reset handling, add missing barriers, read the\n     right status words, stop queues correctly\n\n   - add missing dev_put() in sock_timestamping_bind_phc()\n\n  Misc:\n\n   - ipv4: prevent accidentally passing RTO_ONLINK to\n     ip_route_output_key_hash() by sanitizing flags\n\n   - ipv4: avoid quadratic behavior in netns dismantle\n\n   - stmmac: dwmac-oxnas: add support for OX810SE\n\n   - fsl: xgmac_mdio: add workaround for erratum A-009885\"\n\n* tag 'net-5.17-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/netdev/net: (92 commits)\n  ipv4: add net_hash_mix() dispersion to fib_info_laddrhash keys\n  ipv4: avoid quadratic behavior in netns dismantle\n  net/fsl: xgmac_mdio: Fix incorrect iounmap when removing module\n  powerpc/fsl/dts: Enable WA for erratum A-009885 on fman3l MDIO buses\n  dt-bindings: net: Document fsl,erratum-a009885\n  net/fsl: xgmac_mdio: Add workaround for erratum A-009885\n  net: mscc: ocelot: fix using match before it is set\n  net: phy: micrel: use kszphy_suspend()/kszphy_resume for irq aware devices\n  net: cpsw: avoid alignment faults by taking NET_IP_ALIGN into account\n  nfc: llcp: fix NULL error pointer dereference on sendmsg() after failed bind()\n  net: axienet: increase default TX ring size to 128\n  net: axienet: fix for TX busy handling\n  net: axienet: fix number of TX ring slots for available check\n  net: axienet: Fix TX ring slot available check\n  net: axienet: limit minimum TX ring size\n  net: axienet: add missing memory barriers\n  net: axienet: reset core on initialization prior to MDIO access\n  net: axienet: Wait for PhyRstCmplt after core reset\n  net: axienet: increase reset timeout\n  bpf, selftests: Add ringbuf memory type confusion test\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Thu Jan 20 10:57:05 2022 +0200",
  "author_date_iso": "2022-01-20T10:57:05+02:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Thu Jan 20 10:57:05 2022 +0200",
  "committer_date_iso": "2022-01-20T10:57:05+02:00",
  "files_changed": [],
  "files_changed_count": 0,
  "stats": [
    {
      "file": "Documentation/devicetree/bindings/net/fsl-fman.txt",
      "insertions": 9,
      "deletions": 0
    },
    {
      "file": "Documentation/devicetree/bindings/net/oxnas-dwmac.txt",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/boot/dts/fsl/qoriq-fman3l-0.dtsi",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/atm/iphase.c",
      "insertions": 1,
      "deletions": 3
    },
    {
      "file": "drivers/net/bonding/bond_main.c",
      "insertions": 24,
      "deletions": 10
    },
    {
      "file": "drivers/net/ethernet/allwinner/sun4i-emac.c",
      "insertions": 18,
      "deletions": 13
    },
    {
      "file": "drivers/net/ethernet/allwinner/sun4i-emac.h",
      "insertions": 18,
      "deletions": 0
    },
    {
      "file": "drivers/net/ethernet/apple/bmac.c",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "drivers/net/ethernet/apple/mace.c",
      "insertions": 11,
      "deletions": 5
    },
    {
      "file": "drivers/net/ethernet/broadcom/genet/bcmgenet.c",
      "insertions": 6,
      "deletions": 4
    },
    {
      "file": "drivers/net/ethernet/chelsio/libcxgb/libcxgb_cm.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "drivers/net/ethernet/freescale/xgmac_mdio.c",
      "insertions": 21,
      "deletions": 7
    },
    {
      "file": "drivers/net/ethernet/i825xx/sni_82596.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "drivers/net/ethernet/marvell/prestera/prestera.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "drivers/net/ethernet/marvell/prestera/prestera_hw.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/net/ethernet/marvell/prestera/prestera_main.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/net/ethernet/marvell/prestera/prestera_router.c",
      "insertions": 13,
      "deletions": 11
    },
    {
      "file": "drivers/net/ethernet/marvell/prestera/prestera_router_hw.c",
      "insertions": 23,
      "deletions": 17
    },
    {
      "file": "drivers/net/ethernet/marvell/prestera/prestera_router_hw.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "drivers/net/ethernet/mediatek/mtk_eth_soc.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/net/ethernet/mellanox/mlx5/core/en/tc_tun.c",
      "insertions": 3,
      "deletions": 2
    },
    {
      "file": "drivers/net/ethernet/mscc/ocelot.c",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "drivers/net/ethernet/mscc/ocelot_flower.c",
      "insertions": 36,
      "deletions": 8
    },
    {
      "file": "drivers/net/ethernet/mscc/ocelot_net.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "drivers/net/ethernet/stmicro/stmmac/dwmac-oxnas.c",
      "insertions": 79,
      "deletions": 22
    },
    {
      "file": "drivers/net/ethernet/stmicro/stmmac/stmmac_main.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "drivers/net/ethernet/ti/cpsw.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "drivers/net/ethernet/ti/cpsw_new.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "drivers/net/ethernet/ti/cpsw_priv.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/net/ethernet/vertexcom/Kconfig",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/net/ethernet/xilinx/xilinx_axienet_main.c",
      "insertions": 84,
      "deletions": 51
    },
    {
      "file": "drivers/net/ipa/ipa_endpoint.c",
      "insertions": 20,
      "deletions": 8
    },
    {
      "file": "drivers/net/ipa/ipa_endpoint.h",
      "insertions": 15,
      "deletions": 2
    },
    {
      "file": "drivers/net/phy/at803x.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/net/phy/marvell.c",
      "insertions": 55,
      "deletions": 1
    },
    {
      "file": "drivers/net/phy/micrel.c",
      "insertions": 18,
      "deletions": 18
    },
    {
      "file": "drivers/net/phy/sfp.c",
      "insertions": 21,
      "deletions": 4
    },
    {
      "file": "drivers/net/usb/qmi_wwan.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/net/usb/smsc95xx.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "drivers/net/wwan/mhi_wwan_mbim.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/nfc/pn544/i2c.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/nfc/st21nfca/se.c",
      "insertions": 10,
      "deletions": 0
    },
    {
      "file": "include/linux/bpf.h",
      "insertions": 7,
      "deletions": 2
    },
    {
      "file": "include/linux/bpf_verifier.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "include/net/inet_frag.h",
      "insertions": 9,
      "deletions": 2
    },
    {
      "file": "include/net/ipv6_frag.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "include/net/pkt_cls.h",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "include/net/sch_generic.h",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "kernel/bpf/btf.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "kernel/bpf/inode.c",
      "insertions": 12,
      "deletions": 2
    },
    {
      "file": "kernel/bpf/verifier.c",
      "insertions": 56,
      "deletions": 25
    },
    {
      "file": "lib/ref_tracker.c",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "net/bridge/br_if.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "net/core/dev.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "net/core/net_namespace.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "net/core/of_net.c",
      "insertions": 11,
      "deletions": 22
    },
    {
      "file": "net/core/sock.c",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "net/ipv4/fib_semantics.c",
      "insertions": 40,
      "deletions": 36
    },
    {
      "file": "net/ipv4/inet_fragment.c",
      "insertions": 5,
      "deletions": 3
    },
    {
      "file": "net/ipv4/ip_fragment.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "net/ipv4/ip_gre.c",
      "insertions": 3,
      "deletions": 2
    },
    {
      "file": "net/ipv6/sit.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "net/mctp/test/route-test.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "net/netfilter/nft_connlimit.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "net/netfilter/nft_last.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "net/netfilter/nft_limit.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "net/netfilter/nft_quota.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "net/nfc/llcp_sock.c",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "net/sched/sch_api.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "net/sched/sch_generic.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "net/smc/af_smc.c",
      "insertions": 5,
      "deletions": 1
    },
    {
      "file": "net/smc/smc.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "net/smc/smc_cdc.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "net/smc/smc_clc.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "net/smc/smc_core.c",
      "insertions": 95,
      "deletions": 42
    },
    {
      "file": "net/smc/smc_core.h",
      "insertions": 12,
      "deletions": 0
    },
    {
      "file": "net/smc/smc_diag.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "net/smc/smc_pnet.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "net/smc/smc_wr.h",
      "insertions": 0,
      "deletions": 4
    },
    {
      "file": "net/tls/tls_sw.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "net/unix/garbage.c",
      "insertions": 11,
      "deletions": 3
    },
    {
      "file": "net/unix/scm.c",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "net/xfrm/xfrm_policy.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "tools/testing/selftests/bpf/prog_tests/d_path.c",
      "insertions": 14,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/bpf/prog_tests/xdp_link.c",
      "insertions": 30,
      "deletions": 31
    },
    {
      "file": "tools/testing/selftests/bpf/progs/test_d_path_check_types.c",
      "insertions": 32,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/bpf/progs/test_xdp_link.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/bpf/verifier/ringbuf.c",
      "insertions": 95,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/bpf/verifier/spill_fill.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "tools/testing/selftests/net/fcnal-test.sh",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/net/settings",
      "insertions": 1,
      "deletions": 1
    }
  ],
  "total_insertions": 1041,
  "total_deletions": 414,
  "total_changes": 1455,
  "parents": [
    "f4484d138b31e8fa1ba410363b5b9664f68974af",
    "ff9fc0a31d85fcf0011eb4bc4ecaf47d3cc9e21c"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "sanitizing"
    ]
  },
  "fix_type": "security",
  "file_results": []
}