Commit Hash: 824ebef122153a03925ae0ed211b4e8568d1c8db
Subject: fault injection: fix failslab with CONFIG_NUMA


Security Keywords:
- injection

Full commit message:
fault injection: fix failslab with CONFIG_NUMA

Currently failslab injects failures into ____cache_alloc().  But with enabling
CONFIG_NUMA it's not enough to let actual slab allocator functions (kmalloc,
kmem_cache_alloc, ...) return NULL.

This patch moves fault injection hook inside of __cache_alloc() and
__cache_alloc_node().  These are lower call path than ____cache_alloc() and
enable to inject faulures to slab allocators with CONFIG_NUMA.

Acked-by: Pekka Enberg <penberg@cs.helsinki.fi>
Signed-off-by: Akinobu Mita <akinobu.mita@gmail.com>
Cc: Christoph Lameter <clameter@sgi.com>
Signed-off-by: Andrew Morton <akpm@linux-foundation.org>
Signed-off-by: Linus Torvalds <torvalds@linux-foundation.org>

Metadata:
Author: Akinobu Mita <akinobu.mita@gmail.com>
Author Date: Sun May 6 14:49:58 2007 -0700
Committer: Linus Torvalds <torvalds@woody.linux-foundation.org>
Commit Date: Mon May 7 12:12:55 2007 -0700

Files Changed: 1
Lines Added: 7
Lines Removed: 4
Total Changes: 11
