Commit Hash: 64486ae7a9a9cc048c2842ba7628df7ce7374019
Subject: drm/i915: Flush idle work when changing missed-irq fault injection


Security Keywords:
- injection

Full commit message:
drm/i915: Flush idle work when changing missed-irq fault injection

In order for the missed-irq update to take effect, the device must be
idle. So when the user updates the fault injection via debugfs, idle the
device.

v2: Idle is explicitly required for setting test_irq, and good behaviour
for clearing the missed_irq.
v3: Use matching types; expanding to more than ulong rings is left as an
exercise to the reader.

Testcase: igt/drv_missed_irq
Signed-off-by: Chris Wilson <chris@chris-wilson.co.uk>
Reviewed-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Link: http://patchwork.freedesktop.org/patch/msgid/20170307155908.14576-1-chris@chris-wilson.co.uk

Metadata:
Author: Chris Wilson <chris@chris-wilson.co.uk>
Author Date: Tue Mar 7 15:59:08 2017 +0000
Committer: Chris Wilson <chris@chris-wilson.co.uk>
Commit Date: Tue Mar 7 16:52:28 2017 +0000

Files Changed: 1
Lines Added: 40
Lines Removed: 15
Total Changes: 55
