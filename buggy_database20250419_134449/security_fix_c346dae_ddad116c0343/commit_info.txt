Commit Hash: c346dae4f3fbce51bbd4f2ec5e8c6f9b91e93163
Subject: virtio: disable notification hardening by default


Security Keywords:
- hardening

Full commit message:
virtio: disable notification hardening by default

We try to harden virtio device notifications in 8b4ec69d7e09 ("virtio:
harden vring IRQ"). It works with the assumption that the driver or
core can properly call virtio_device_ready() at the right
place. Unfortunately, this seems to be not true and uncover various
bugs of the existing drivers, mainly the issue of using
virtio_device_ready() incorrectly.

So let's add a Kconfig option and disable it by default. It gives
us time to fix the drivers and then we can consider re-enabling it.

Signed-off-by: Jason Wang <jasowang@redhat.com>
Message-Id: <20220622012940.21441-1-jasowang@redhat.com>
Signed-off-by: Michael S. Tsirkin <mst@redhat.com>
Reviewed-by: Cornelia Huck <cohuck@redhat.com>

Metadata:
Author: Jason Wang <jasowang@redhat.com>
Author Date: Wed Jun 22 09:29:40 2022 +0800
Committer: Michael S. Tsirkin <mst@redhat.com>
Commit Date: Fri Jun 24 02:49:48 2022 -0400

Files Changed: 5
Lines Added: 37
Lines Removed: 1
Total Changes: 38
