{
  "hash": "860c3d03bbc3f17aef8600662c488f27fd093142",
  "hash_short": "860c3d03",
  "subject": "scsi: scsi_debug: Fix some bugs in sdebug_error_write()",
  "body": "There are two bug in this code:\n\n 1) If count is zero, then it will lead to a NULL dereference.  The\n    kmalloc() will successfully allocate zero bytes and the test for \"if\n    (buf[0] == '-')\" will read beyond the end of the zero size buffer and\n    Oops.\n\n 2) The code does not ensure that the user's string is properly NUL\n    terminated which could lead to a read overflow.\n\nFixes: a9996d722b11 (\"scsi: scsi_debug: Add interface to manage error injection for a single device\")\nSigned-off-by: Dan Carpenter <dan.carpenter@linaro.org>\nLink: https://lore.kernel.org/r/7733643d-e102-4581-8d29-769472011c97@moroto.mountain\nReviewed-by: Wenchao Hao <haowenchao2@huawei.com>\nSigned-off-by: Martin K. Petersen <martin.petersen@oracle.com>",
  "full_message": "scsi: scsi_debug: Fix some bugs in sdebug_error_write()\n\nThere are two bug in this code:\n\n 1) If count is zero, then it will lead to a NULL dereference.  The\n    kmalloc() will successfully allocate zero bytes and the test for \"if\n    (buf[0] == '-')\" will read beyond the end of the zero size buffer and\n    Oops.\n\n 2) The code does not ensure that the user's string is properly NUL\n    terminated which could lead to a read overflow.\n\nFixes: a9996d722b11 (\"scsi: scsi_debug: Add interface to manage error injection for a single device\")\nSigned-off-by: Dan Carpenter <dan.carpenter@linaro.org>\nLink: https://lore.kernel.org/r/7733643d-e102-4581-8d29-769472011c97@moroto.mountain\nReviewed-by: Wenchao Hao <haowenchao2@huawei.com>\nSigned-off-by: Martin K. Petersen <martin.petersen@oracle.com>",
  "author_name": "Dan Carpenter",
  "author_email": "dan.carpenter@linaro.org",
  "author_date": "Mon Nov 6 17:04:33 2023 +0300",
  "author_date_iso": "2023-11-06T17:04:33+03:00",
  "committer_name": "Martin K. Petersen",
  "committer_email": "martin.petersen@oracle.com",
  "committer_date": "Wed Nov 8 21:42:26 2023 -0500",
  "committer_date_iso": "2023-11-08T21:42:26-05:00",
  "files_changed": [
    "drivers/scsi/scsi_debug.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/scsi/scsi_debug.c",
      "insertions": 1,
      "deletions": 1
    }
  ],
  "total_insertions": 1,
  "total_deletions": 1,
  "total_changes": 2,
  "parents": [
    "27900d7119c464b43cd9eac69c85884d17bae240"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/scsi/scsi_debug.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}