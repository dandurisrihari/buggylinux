Commit Hash: 0bc11ed5ab60c135aa764a62c02cd5ea68289de4
Subject: kprobes: Allow kprobes coexist with livepatch


Security Keywords:
- injection

Full commit message:
kprobes: Allow kprobes coexist with livepatch

Allow kprobes which do not modify regs->ip, coexist with livepatch
by dropping FTRACE_OPS_FL_IPMODIFY from ftrace_ops.

User who wants to modify regs->ip (e.g. function fault injection)
must set a dummy post_handler to its kprobes when registering.
However, if such regs->ip modifying kprobes is set on a function,
that function can not be livepatched.

Link: http://lkml.kernel.org/r/156403587671.30117.5233558741694155985.stgit@devnote2

Acked-by: Joe Lawrence <joe.lawrence@redhat.com>
Signed-off-by: Masami Hiramatsu <mhiramat@kernel.org>
Signed-off-by: Steven Rostedt (VMware) <rostedt@goodmis.org>

Metadata:
Author: Masami Hiramatsu <mhiramat@kernel.org>
Author Date: Thu Jul 25 15:24:37 2019 +0900
Committer: Steven Rostedt (VMware) <rostedt@goodmis.org>
Commit Date: Sat Aug 31 12:19:10 2019 -0400

Files Changed: 1
Lines Added: 40
Lines Removed: 16
Total Changes: 56
