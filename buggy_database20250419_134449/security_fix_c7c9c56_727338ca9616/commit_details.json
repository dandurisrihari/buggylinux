{
  "hash": "c7c9c56ca26f7b9458711b2d78b60b60e0d38ba7",
  "hash_short": "c7c9c56c",
  "subject": "x86, apicv: add virtual interrupt delivery support",
  "body": "Virtual interrupt delivery avoids KVM to inject vAPIC interrupts\nmanually, which is fully taken care of by the hardware. This needs\nsome special awareness into existing interrupr injection path:\n\n- for pending interrupt, instead of direct injection, we may need\n  update architecture specific indicators before resuming to guest.\n\n- A pending interrupt, which is masked by ISR, should be also\n  considered in above update action, since hardware will decide\n  when to inject it at right time. Current has_interrupt and\n  get_interrupt only returns a valid vector from injection p.o.v.\n\nReviewed-by: Marcelo Tosatti <mtosatti@redhat.com>\nSigned-off-by: Kevin Tian <kevin.tian@intel.com>\nSigned-off-by: Yang Zhang <yang.z.zhang@Intel.com>\nSigned-off-by: Gleb Natapov <gleb@redhat.com>",
  "full_message": "x86, apicv: add virtual interrupt delivery support\n\nVirtual interrupt delivery avoids KVM to inject vAPIC interrupts\nmanually, which is fully taken care of by the hardware. This needs\nsome special awareness into existing interrupr injection path:\n\n- for pending interrupt, instead of direct injection, we may need\n  update architecture specific indicators before resuming to guest.\n\n- A pending interrupt, which is masked by ISR, should be also\n  considered in above update action, since hardware will decide\n  when to inject it at right time. Current has_interrupt and\n  get_interrupt only returns a valid vector from injection p.o.v.\n\nReviewed-by: Marcelo Tosatti <mtosatti@redhat.com>\nSigned-off-by: Kevin Tian <kevin.tian@intel.com>\nSigned-off-by: Yang Zhang <yang.z.zhang@Intel.com>\nSigned-off-by: Gleb Natapov <gleb@redhat.com>",
  "author_name": "Yang Zhang",
  "author_email": "yang.z.zhang@Intel.com",
  "author_date": "Fri Jan 25 10:18:51 2013 +0800",
  "author_date_iso": "2013-01-25T10:18:51+08:00",
  "committer_name": "Gleb Natapov",
  "committer_email": "gleb@redhat.com",
  "committer_date": "Tue Jan 29 10:48:19 2013 +0200",
  "committer_date_iso": "2013-01-29T10:48:19+02:00",
  "files_changed": [
    "arch/ia64/kvm/lapic.h",
    "arch/x86/include/asm/kvm_host.h",
    "arch/x86/include/asm/vmx.h",
    "arch/x86/kvm/irq.c",
    "arch/x86/kvm/lapic.c",
    "arch/x86/kvm/lapic.h",
    "arch/x86/kvm/svm.c",
    "arch/x86/kvm/vmx.c",
    "arch/x86/kvm/x86.c",
    "include/linux/kvm_host.h",
    "virt/kvm/ioapic.c",
    "virt/kvm/ioapic.h",
    "virt/kvm/irq_comm.c",
    "virt/kvm/kvm_main.c"
  ],
  "files_changed_count": 14,
  "stats": [
    {
      "file": "arch/ia64/kvm/lapic.h",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "arch/x86/include/asm/kvm_host.h",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "arch/x86/include/asm/vmx.h",
      "insertions": 11,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/irq.c",
      "insertions": 51,
      "deletions": 5
    },
    {
      "file": "arch/x86/kvm/lapic.c",
      "insertions": 83,
      "deletions": 23
    },
    {
      "file": "arch/x86/kvm/lapic.h",
      "insertions": 27,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/svm.c",
      "insertions": 18,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/vmx.c",
      "insertions": 109,
      "deletions": 10
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "insertions": 21,
      "deletions": 2
    },
    {
      "file": "include/linux/kvm_host.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "virt/kvm/ioapic.c",
      "insertions": 39,
      "deletions": 0
    },
    {
      "file": "virt/kvm/ioapic.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "virt/kvm/irq_comm.c",
      "insertions": 25,
      "deletions": 0
    },
    {
      "file": "virt/kvm/kvm_main.c",
      "insertions": 5,
      "deletions": 0
    }
  ],
  "total_insertions": 407,
  "total_deletions": 40,
  "total_changes": 447,
  "parents": [
    "8d14695f9542e9e0195d6e41ddaa52c32322adf5"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v3.10",
    "v3.10-rc1",
    "v3.10-rc2",
    "v3.10-rc3",
    "v3.10-rc4",
    "v3.10-rc5",
    "v3.10-rc6",
    "v3.10-rc7",
    "v3.11",
    "v3.11-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "inject"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/ia64/kvm/lapic.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/lapic.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/lapic.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/include/asm/vmx.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/include/asm/kvm_host.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/kvm_host.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/ioapic.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/irq.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/ioapic.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/irq_comm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/vmx.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/svm.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/kvm_main.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}