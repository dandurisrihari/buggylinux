{
  "hash": "8cd84b709647a015790a94bc809068b7a55cc05a",
  "hash_short": "8cd84b70",
  "subject": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm",
  "body": "Pull more KVM updates from Paolo Bonzini:\n \"PPC:\n   - Improvements and bugfixes for secure VM support, giving reduced\n     startup time and memory hotplug support.\n\n   - Locking fixes in nested KVM code\n\n   - Increase number of guests supported by HV KVM to 4094\n\n   - Preliminary POWER10 support\n\n  ARM:\n   - Split the VHE and nVHE hypervisor code bases, build the EL2 code\n     separately, allowing for the VHE code to now be built with\n     instrumentation\n\n   - Level-based TLB invalidation support\n\n   - Restructure of the vcpu register storage to accomodate the NV code\n\n   - Pointer Authentication available for guests on nVHE hosts\n\n   - Simplification of the system register table parsing\n\n   - MMU cleanups and fixes\n\n   - A number of post-32bit cleanups and other fixes\n\n  MIPS:\n   - compilation fixes\n\n  x86:\n   - bugfixes\n\n   - support for the SERIALIZE instruction\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (70 commits)\n  KVM: MIPS/VZ: Fix build error caused by 'kvm_run' cleanup\n  x86/kvm/hyper-v: Synic default SCONTROL MSR needs to be enabled\n  MIPS: KVM: Convert a fallthrough comment to fallthrough\n  MIPS: VZ: Only include loongson_regs.h for CPU_LOONGSON64\n  x86: Expose SERIALIZE for supported cpuid\n  KVM: x86: Don't attempt to load PDPTRs when 64-bit mode is enabled\n  KVM: arm64: Move S1PTW S2 fault logic out of io_mem_abort()\n  KVM: arm64: Don't skip cache maintenance for read-only memslots\n  KVM: arm64: Handle data and instruction external aborts the same way\n  KVM: arm64: Rename kvm_vcpu_dabt_isextabt()\n  KVM: arm: Add trace name for ARM_NISV\n  KVM: arm64: Ensure that all nVHE hyp code is in .hyp.text\n  KVM: arm64: Substitute RANDOMIZE_BASE for HARDEN_EL2_VECTORS\n  KVM: arm64: Make nVHE ASLR conditional on RANDOMIZE_BASE\n  KVM: PPC: Book3S HV: Rework secure mem slot dropping\n  KVM: PPC: Book3S HV: Move kvmppc_svm_page_out up\n  KVM: PPC: Book3S HV: Migrate hot plugged memory\n  KVM: PPC: Book3S HV: In H_SVM_INIT_DONE, migrate remaining normal-GFNs to secure-GFNs\n  KVM: PPC: Book3S HV: Track the state GFNs associated with secure VMs\n  KVM: PPC: Book3S HV: Disable page merging in H_SVM_INIT_START\n  ...",
  "full_message": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm\n\nPull more KVM updates from Paolo Bonzini:\n \"PPC:\n   - Improvements and bugfixes for secure VM support, giving reduced\n     startup time and memory hotplug support.\n\n   - Locking fixes in nested KVM code\n\n   - Increase number of guests supported by HV KVM to 4094\n\n   - Preliminary POWER10 support\n\n  ARM:\n   - Split the VHE and nVHE hypervisor code bases, build the EL2 code\n     separately, allowing for the VHE code to now be built with\n     instrumentation\n\n   - Level-based TLB invalidation support\n\n   - Restructure of the vcpu register storage to accomodate the NV code\n\n   - Pointer Authentication available for guests on nVHE hosts\n\n   - Simplification of the system register table parsing\n\n   - MMU cleanups and fixes\n\n   - A number of post-32bit cleanups and other fixes\n\n  MIPS:\n   - compilation fixes\n\n  x86:\n   - bugfixes\n\n   - support for the SERIALIZE instruction\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (70 commits)\n  KVM: MIPS/VZ: Fix build error caused by 'kvm_run' cleanup\n  x86/kvm/hyper-v: Synic default SCONTROL MSR needs to be enabled\n  MIPS: KVM: Convert a fallthrough comment to fallthrough\n  MIPS: VZ: Only include loongson_regs.h for CPU_LOONGSON64\n  x86: Expose SERIALIZE for supported cpuid\n  KVM: x86: Don't attempt to load PDPTRs when 64-bit mode is enabled\n  KVM: arm64: Move S1PTW S2 fault logic out of io_mem_abort()\n  KVM: arm64: Don't skip cache maintenance for read-only memslots\n  KVM: arm64: Handle data and instruction external aborts the same way\n  KVM: arm64: Rename kvm_vcpu_dabt_isextabt()\n  KVM: arm: Add trace name for ARM_NISV\n  KVM: arm64: Ensure that all nVHE hyp code is in .hyp.text\n  KVM: arm64: Substitute RANDOMIZE_BASE for HARDEN_EL2_VECTORS\n  KVM: arm64: Make nVHE ASLR conditional on RANDOMIZE_BASE\n  KVM: PPC: Book3S HV: Rework secure mem slot dropping\n  KVM: PPC: Book3S HV: Move kvmppc_svm_page_out up\n  KVM: PPC: Book3S HV: Migrate hot plugged memory\n  KVM: PPC: Book3S HV: In H_SVM_INIT_DONE, migrate remaining normal-GFNs to secure-GFNs\n  KVM: PPC: Book3S HV: Track the state GFNs associated with secure VMs\n  KVM: PPC: Book3S HV: Disable page merging in H_SVM_INIT_START\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Wed Aug 12 12:25:06 2020 -0700",
  "author_date_iso": "2020-08-12T12:25:06-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Wed Aug 12 12:25:06 2020 -0700",
  "committer_date_iso": "2020-08-12T12:25:06-07:00",
  "files_changed": [
    "arch/x86/kvm/x86.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "Documentation/powerpc/ultravisor.rst",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/arm64/Kconfig",
      "insertions": 1,
      "deletions": 19
    },
    {
      "file": "arch/arm64/include/asm/kvm_asm.h",
      "insertions": 61,
      "deletions": 14
    },
    {
      "file": "arch/arm64/include/asm/kvm_coproc.h",
      "insertions": 0,
      "deletions": 8
    },
    {
      "file": "arch/arm64/include/asm/kvm_emulate.h",
      "insertions": 27,
      "deletions": 48
    },
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "insertions": 73,
      "deletions": 21
    },
    {
      "file": "arch/arm64/include/asm/kvm_hyp.h",
      "insertions": 11,
      "deletions": 4
    },
    {
      "file": "arch/arm64/include/asm/kvm_mmu.h",
      "insertions": 8,
      "deletions": 8
    },
    {
      "file": "arch/arm64/include/asm/kvm_ptrauth.h",
      "insertions": 13,
      "deletions": 21
    },
    {
      "file": "arch/arm64/include/asm/mmu.h",
      "insertions": 0,
      "deletions": 7
    },
    {
      "file": "arch/arm64/include/asm/virt.h",
      "insertions": 10,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kernel/asm-offsets.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "arch/arm64/kernel/cpu_errata.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/arm64/kernel/image-vars.h",
      "insertions": 54,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/Kconfig",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/Makefile",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/arm64/kvm/arch_timer.c",
      "insertions": 123,
      "deletions": 34
    },
    {
      "file": "arch/arm64/kvm/arm.c",
      "insertions": 21,
      "deletions": 36
    },
    {
      "file": "arch/arm64/kvm/fpsimd.c",
      "insertions": 2,
      "deletions": 4
    },
    {
      "file": "arch/arm64/kvm/guest.c",
      "insertions": 65,
      "deletions": 14
    },
    {
      "file": "arch/arm64/kvm/handle_exit.c",
      "insertions": 16,
      "deletions": 16
    },
    {
      "file": "arch/arm64/kvm/hyp/Makefile",
      "insertions": 9,
      "deletions": 15
    },
    {
      "file": "arch/arm64/kvm/hyp/aarch32.c",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "arch/arm64/kvm/hyp/entry.S",
      "insertions": 1,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kvm/hyp/fpsimd.S",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/hyp/hyp-entry.S",
      "insertions": 4,
      "deletions": 17
    },
    {
      "file": "arch/arm64/kvm/hyp/{debug-sr.c => include/hyp/debug-sr.h}",
      "insertions": 16,
      "deletions": 72
    },
    {
      "file": "arch/arm64/kvm/hyp/include/hyp/switch.h",
      "insertions": 511,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/include/hyp/sysreg-sr.h",
      "insertions": 193,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/Makefile",
      "insertions": 62,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/debug-sr.c",
      "insertions": 77,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/{ => hyp/nvhe}/hyp-init.S",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/switch.c",
      "insertions": 272,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/sysreg-sr.c",
      "insertions": 46,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/{ => nvhe}/timer-sr.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "arch/arm64/kvm/hyp/nvhe/tlb.c",
      "insertions": 154,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/smccc_wa.S",
      "insertions": 32,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/switch.c",
      "insertions": 0,
      "deletions": 936
    },
    {
      "file": "arch/arm64/kvm/hyp/sysreg-sr.c",
      "insertions": 0,
      "deletions": 333
    },
    {
      "file": "arch/arm64/kvm/hyp/tlb.c",
      "insertions": 0,
      "deletions": 242
    },
    {
      "file": "arch/arm64/kvm/hyp/vgic-v2-cpuif-proxy.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/arm64/kvm/hyp/vgic-v3-sr.c",
      "insertions": 60,
      "deletions": 74
    },
    {
      "file": "arch/arm64/kvm/hyp/vhe/Makefile",
      "insertions": 11,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/vhe/debug-sr.c",
      "insertions": 26,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/vhe/switch.c",
      "insertions": 219,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/vhe/sysreg-sr.c",
      "insertions": 114,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/vhe/timer-sr.c",
      "insertions": 12,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/vhe/tlb.c",
      "insertions": 162,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/inject_fault.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/mmio.c",
      "insertions": 0,
      "deletions": 6
    },
    {
      "file": "arch/arm64/kvm/mmu.c",
      "insertions": 178,
      "deletions": 133
    },
    {
      "file": "arch/arm64/kvm/regmap.c",
      "insertions": 33,
      "deletions": 4
    },
    {
      "file": "arch/arm64/kvm/reset.c",
      "insertions": 11,
      "deletions": 12
    },
    {
      "file": "arch/arm64/kvm/sys_regs.c",
      "insertions": 71,
      "deletions": 136
    },
    {
      "file": "arch/arm64/kvm/sys_regs_generic_v8.c",
      "insertions": 0,
      "deletions": 96
    },
    {
      "file": "arch/arm64/kvm/trace_arm.h",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "arch/arm64/kvm/va_layout.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-irqfd.c",
      "insertions": 19,
      "deletions": 5
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-its.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-mmio-v3.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/mips/kvm/emulate.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/mips/kvm/vz.c",
      "insertions": 3,
      "deletions": 2
    },
    {
      "file": "arch/powerpc/include/asm/kvm_book3s_uvmem.h",
      "insertions": 14,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/include/asm/kvm_ppc.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/include/asm/reg.h",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kvm/book3s_64_mmu_hv.c",
      "insertions": 6,
      "deletions": 2
    },
    {
      "file": "arch/powerpc/kvm/book3s_64_mmu_radix.c",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv.c",
      "insertions": 16,
      "deletions": 10
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv_nested.c",
      "insertions": 19,
      "deletions": 11
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv_uvmem.c",
      "insertions": 531,
      "deletions": 169
    },
    {
      "file": "arch/powerpc/kvm/book3s_interrupts.S",
      "insertions": 27,
      "deletions": 29
    },
    {
      "file": "arch/powerpc/kvm/book3s_pr.c",
      "insertions": 4,
      "deletions": 5
    },
    {
      "file": "arch/powerpc/kvm/book3s_rtas.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/booke.c",
      "insertions": 4,
      "deletions": 5
    },
    {
      "file": "arch/powerpc/kvm/booke_interrupts.S",
      "insertions": 4,
      "deletions": 5
    },
    {
      "file": "arch/powerpc/kvm/bookehv_interrupts.S",
      "insertions": 5,
      "deletions": 5
    },
    {
      "file": "arch/powerpc/kvm/powerpc.c",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/cpuid.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/hyperv.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "insertions": 12,
      "deletions": 12
    },
    {
      "file": "include/kvm/arm_arch_timer.h",
      "insertions": 5,
      "deletions": 8
    },
    {
      "file": "include/trace/events/kvm.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "scripts/kallsyms.c",
      "insertions": 1,
      "deletions": 0
    }
  ],
  "total_insertions": 3479,
  "total_deletions": 2636,
  "total_changes": 6115,
  "parents": [
    "05a5b5d8a2cd82e2bf5a01ad064efa396ec7fbef",
    "e792415c5d3e0eb52527cce228a72e4392f8cae2"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "Authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/kvm/x86.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}