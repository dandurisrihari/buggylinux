{
  "hash": "e9bc360b105c2042db30c36ed1c5ca48dcc7f84b",
  "hash_short": "e9bc360b",
  "subject": "fault-inject: use prandom where cryptographically secure randomness is not needed",
  "body": "Currently get_random*() is used to determine the probability of fault\ninjection, but cryptographically secure random numbers are not required.\n\nThere is no big problem in using prandom instead of get_random*() to\ndetermine the probability of fault injection, and it also avoids acquiring\na spinlock, which is unsafe in some contexts.\n\n[akpm@linux-foundation.org: tweak and reflow comment]\nLink: https://lore.kernel.org/lkml/20241129120939.GG35539@noisy.programming.kicks-ass.net\nLink: https://lkml.kernel.org/r/20241208142415.205960-1-akinobu.mita@gmail.com\nSigned-off-by: Akinobu Mita <akinobu.mita@gmail.com>\nSuggested-by: Peter Zijlstra <peterz@infradead.org>\nCc: Peter Zijlstra <peterz@infradead.org>\nCc: Masami Hiramatsu <mhiramat@kernel.org>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>",
  "full_message": "fault-inject: use prandom where cryptographically secure randomness is not needed\n\nCurrently get_random*() is used to determine the probability of fault\ninjection, but cryptographically secure random numbers are not required.\n\nThere is no big problem in using prandom instead of get_random*() to\ndetermine the probability of fault injection, and it also avoids acquiring\na spinlock, which is unsafe in some contexts.\n\n[akpm@linux-foundation.org: tweak and reflow comment]\nLink: https://lore.kernel.org/lkml/20241129120939.GG35539@noisy.programming.kicks-ass.net\nLink: https://lkml.kernel.org/r/20241208142415.205960-1-akinobu.mita@gmail.com\nSigned-off-by: Akinobu Mita <akinobu.mita@gmail.com>\nSuggested-by: Peter Zijlstra <peterz@infradead.org>\nCc: Peter Zijlstra <peterz@infradead.org>\nCc: Masami Hiramatsu <mhiramat@kernel.org>\nSigned-off-by: Andrew Morton <akpm@linux-foundation.org>",
  "author_name": "Akinobu Mita",
  "author_email": "akinobu.mita@gmail.com",
  "author_date": "Sun Dec 8 23:24:15 2024 +0900",
  "author_date_iso": "2024-12-08T23:24:15+09:00",
  "committer_name": "Andrew Morton",
  "committer_email": "akpm@linux-foundation.org",
  "committer_date": "Sun Jan 12 20:21:00 2025 -0800",
  "committer_date_iso": "2025-01-12T20:21:00-08:00",
  "files_changed": [
    "lib/fault-inject.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "lib/fault-inject.c",
      "insertions": 26,
      "deletions": 2
    }
  ],
  "total_insertions": 26,
  "total_deletions": 2,
  "total_changes": 28,
  "parents": [
    "3735c5225b97cb57745afd151904d08847b09cc7"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "inject"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "lib/fault-inject.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}