{
  "hash": "996ff5429e9898947016206ee9da387a93d63d9d",
  "hash_short": "996ff542",
  "subject": "KVM: x86: move kvm_inject_gp up from kvm_set_dr to callers",
  "body": "Push the injection of #GP up to the callers, so that they can just use\nkvm_complete_insn_gp. __kvm_set_dr is pretty much what the callers can use\ntogether with kvm_complete_insn_gp, so rename it to kvm_set_dr and drop\nthe old kvm_set_dr wrapper.\n\nThis also allows nested VMX code, which really wanted to use __kvm_set_dr,\nto use the right function.\n\nWhile at it, remove the kvm_require_dr() check from the SVM interception.\nThe APM states:\n\n  All normal exception checks take precedence over the SVM intercepts.\n\nwhich includes the CR4.DE=1 #UD.\n\nSigned-off-by: Paolo Bonzini <pbonzini@redhat.com>",
  "full_message": "KVM: x86: move kvm_inject_gp up from kvm_set_dr to callers\n\nPush the injection of #GP up to the callers, so that they can just use\nkvm_complete_insn_gp. __kvm_set_dr is pretty much what the callers can use\ntogether with kvm_complete_insn_gp, so rename it to kvm_set_dr and drop\nthe old kvm_set_dr wrapper.\n\nThis also allows nested VMX code, which really wanted to use __kvm_set_dr,\nto use the right function.\n\nWhile at it, remove the kvm_require_dr() check from the SVM interception.\nThe APM states:\n\n  All normal exception checks take precedence over the SVM intercepts.\n\nwhich includes the CR4.DE=1 #UD.\n\nSigned-off-by: Paolo Bonzini <pbonzini@redhat.com>",
  "author_name": "Paolo Bonzini",
  "author_email": "pbonzini@redhat.com",
  "author_date": "Mon Dec 14 07:49:54 2020 -0500",
  "author_date_iso": "2020-12-14T07:49:54-05:00",
  "committer_name": "Paolo Bonzini",
  "committer_email": "pbonzini@redhat.com",
  "committer_date": "Tue Feb 9 08:17:07 2021 -0500",
  "committer_date_iso": "2021-02-09T08:17:07-05:00",
  "files_changed": [
    "arch/x86/kvm/svm/svm.c",
    "arch/x86/kvm/vmx/vmx.c",
    "arch/x86/kvm/x86.c"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "arch/x86/kvm/svm/svm.c",
      "insertions": 5,
      "deletions": 8
    },
    {
      "file": "arch/x86/kvm/vmx/vmx.c",
      "insertions": 10,
      "deletions": 7
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "insertions": 5,
      "deletions": 14
    }
  ],
  "total_insertions": 20,
  "total_deletions": 29,
  "total_changes": 49,
  "parents": [
    "29d6ca41992a771e2441424099695c329d735c28"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/kvm/svm/svm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/vmx/vmx.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}