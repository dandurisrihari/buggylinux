{
  "hash": "bd18de517923903a177508fc8813f44e717b1c00",
  "hash_short": "bd18de51",
  "subject": "mac80211_hwsim: drop pending frames on stop",
  "body": "Syzbot reports that we may be able to get into a situation where\nmac80211 has pending ACK frames on shutdown with hwsim. It appears\nthat the reason for this is that syzbot uses the wmediumd hooks to\nintercept/injection frames, and may shut down hwsim, removing the\nradio(s), while frames are pending in the air simulation.\n\nClean out the pending queue when the interface is stopped, after\nthis the frames can't be reported back to mac80211 properly anyway.\n\nReported-by: syzbot+a063bbf0b15737362592@syzkaller.appspotmail.com\nLink: https://lore.kernel.org/r/20210517170429.b0f85ab0eda1.Ie42a6ec6b940c971f3441286aeaaae2fe368e29a@changeid\nSigned-off-by: Johannes Berg <johannes.berg@intel.com>",
  "full_message": "mac80211_hwsim: drop pending frames on stop\n\nSyzbot reports that we may be able to get into a situation where\nmac80211 has pending ACK frames on shutdown with hwsim. It appears\nthat the reason for this is that syzbot uses the wmediumd hooks to\nintercept/injection frames, and may shut down hwsim, removing the\nradio(s), while frames are pending in the air simulation.\n\nClean out the pending queue when the interface is stopped, after\nthis the frames can't be reported back to mac80211 properly anyway.\n\nReported-by: syzbot+a063bbf0b15737362592@syzkaller.appspotmail.com\nLink: https://lore.kernel.org/r/20210517170429.b0f85ab0eda1.Ie42a6ec6b940c971f3441286aeaaae2fe368e29a@changeid\nSigned-off-by: Johannes Berg <johannes.berg@intel.com>",
  "author_name": "Johannes Berg",
  "author_email": "johannes.berg@intel.com",
  "author_date": "Mon May 17 17:04:31 2021 +0200",
  "author_date_iso": "2021-05-17T17:04:31+02:00",
  "committer_name": "Johannes Berg",
  "committer_email": "johannes.berg@intel.com",
  "committer_date": "Mon May 31 21:27:07 2021 +0200",
  "committer_date_iso": "2021-05-31T21:27:07+02:00",
  "files_changed": [
    "drivers/net/wireless/mac80211_hwsim.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/net/wireless/mac80211_hwsim.c",
      "insertions": 5,
      "deletions": 0
    }
  ],
  "total_insertions": 5,
  "total_deletions": 0,
  "total_changes": 5,
  "parents": [
    "0ee4d55534f82a0624701d0bb9fc2304d4529086"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/net/wireless/mac80211_hwsim.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}