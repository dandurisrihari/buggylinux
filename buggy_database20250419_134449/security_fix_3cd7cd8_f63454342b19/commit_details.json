{
  "hash": "3cd7cd8a62e6f4b81e8429db7afcb11cc155ea3c",
  "hash_short": "3cd7cd8a",
  "subject": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm",
  "body": "Pull kvm fixes from Paolo Bonzini:\n \"Two larger x86 series:\n\n   - Redo incorrect fix for SEV/SMAP erratum\n\n   - Windows 11 Hyper-V workaround\n\n  Other x86 changes:\n\n   - Various x86 cleanups\n\n   - Re-enable access_tracking_perf_test\n\n   - Fix for #GP handling on SVM\n\n   - Fix for CPUID leaf 0Dh in KVM_GET_SUPPORTED_CPUID\n\n   - Fix for ICEBP in interrupt shadow\n\n   - Avoid false-positive RCU splat\n\n   - Enable Enlightened MSR-Bitmap support for real\n\n  ARM:\n\n   - Correctly update the shadow register on exception injection when\n     running in nVHE mode\n\n   - Correctly use the mm_ops indirection when performing cache\n     invalidation from the page-table walker\n\n   - Restrict the vgic-v3 workaround for SEIS to the two known broken\n     implementations\n\n  Generic code changes:\n\n   - Dead code cleanup\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (43 commits)\n  KVM: eventfd: Fix false positive RCU usage warning\n  KVM: nVMX: Allow VMREAD when Enlightened VMCS is in use\n  KVM: nVMX: Implement evmcs_field_offset() suitable for handle_vmread()\n  KVM: nVMX: Rename vmcs_to_field_offset{,_table}\n  KVM: nVMX: eVMCS: Filter out VM_EXIT_SAVE_VMX_PREEMPTION_TIMER\n  KVM: nVMX: Also filter MSR_IA32_VMX_TRUE_PINBASED_CTLS when eVMCS\n  selftests: kvm: check dynamic bits against KVM_X86_XCOMP_GUEST_SUPP\n  KVM: x86: add system attribute to retrieve full set of supported xsave states\n  KVM: x86: Add a helper to retrieve userspace address from kvm_device_attr\n  selftests: kvm: move vm_xsave_req_perm call to amx_test\n  KVM: x86: Sync the states size with the XCR0/IA32_XSS at, any time\n  KVM: x86: Update vCPU's runtime CPUID on write to MSR_IA32_XSS\n  KVM: x86: Keep MSR_IA32_XSS unchanged for INIT\n  KVM: x86: Free kvm_cpuid_entry2 array on post-KVM_RUN KVM_SET_CPUID{,2}\n  KVM: nVMX: WARN on any attempt to allocate shadow VMCS for vmcs02\n  KVM: selftests: Don't skip L2's VMCALL in SMM test for SVM guest\n  KVM: x86: Check .flags in kvm_cpuid_check_equal() too\n  KVM: x86: Forcibly leave nested virt when SMM state is toggled\n  KVM: SVM: drop unnecessary code in svm_hv_vmcb_dirty_nested_enlightenments()\n  KVM: SVM: hyper-v: Enable Enlightened MSR-Bitmap support for real\n  ...",
  "full_message": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm\n\nPull kvm fixes from Paolo Bonzini:\n \"Two larger x86 series:\n\n   - Redo incorrect fix for SEV/SMAP erratum\n\n   - Windows 11 Hyper-V workaround\n\n  Other x86 changes:\n\n   - Various x86 cleanups\n\n   - Re-enable access_tracking_perf_test\n\n   - Fix for #GP handling on SVM\n\n   - Fix for CPUID leaf 0Dh in KVM_GET_SUPPORTED_CPUID\n\n   - Fix for ICEBP in interrupt shadow\n\n   - Avoid false-positive RCU splat\n\n   - Enable Enlightened MSR-Bitmap support for real\n\n  ARM:\n\n   - Correctly update the shadow register on exception injection when\n     running in nVHE mode\n\n   - Correctly use the mm_ops indirection when performing cache\n     invalidation from the page-table walker\n\n   - Restrict the vgic-v3 workaround for SEIS to the two known broken\n     implementations\n\n  Generic code changes:\n\n   - Dead code cleanup\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (43 commits)\n  KVM: eventfd: Fix false positive RCU usage warning\n  KVM: nVMX: Allow VMREAD when Enlightened VMCS is in use\n  KVM: nVMX: Implement evmcs_field_offset() suitable for handle_vmread()\n  KVM: nVMX: Rename vmcs_to_field_offset{,_table}\n  KVM: nVMX: eVMCS: Filter out VM_EXIT_SAVE_VMX_PREEMPTION_TIMER\n  KVM: nVMX: Also filter MSR_IA32_VMX_TRUE_PINBASED_CTLS when eVMCS\n  selftests: kvm: check dynamic bits against KVM_X86_XCOMP_GUEST_SUPP\n  KVM: x86: add system attribute to retrieve full set of supported xsave states\n  KVM: x86: Add a helper to retrieve userspace address from kvm_device_attr\n  selftests: kvm: move vm_xsave_req_perm call to amx_test\n  KVM: x86: Sync the states size with the XCR0/IA32_XSS at, any time\n  KVM: x86: Update vCPU's runtime CPUID on write to MSR_IA32_XSS\n  KVM: x86: Keep MSR_IA32_XSS unchanged for INIT\n  KVM: x86: Free kvm_cpuid_entry2 array on post-KVM_RUN KVM_SET_CPUID{,2}\n  KVM: nVMX: WARN on any attempt to allocate shadow VMCS for vmcs02\n  KVM: selftests: Don't skip L2's VMCALL in SMM test for SVM guest\n  KVM: x86: Check .flags in kvm_cpuid_check_equal() too\n  KVM: x86: Forcibly leave nested virt when SMM state is toggled\n  KVM: SVM: drop unnecessary code in svm_hv_vmcb_dirty_nested_enlightenments()\n  KVM: SVM: hyper-v: Enable Enlightened MSR-Bitmap support for real\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Fri Jan 28 19:00:26 2022 +0200",
  "author_date_iso": "2022-01-28T19:00:26+02:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Fri Jan 28 19:00:26 2022 +0200",
  "committer_date_iso": "2022-01-28T19:00:26+02:00",
  "files_changed": [
    "arch/x86/include/asm/kvm_host.h",
    "arch/x86/kvm/svm/svm.c",
    "arch/x86/kvm/vmx/vmx.c",
    "arch/x86/kvm/x86.c",
    "virt/kvm/kvm_main.c"
  ],
  "files_changed_count": 5,
  "stats": [
    {
      "file": "Documentation/virt/kvm/api.rst",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/hyp/exception.c",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kvm/hyp/pgtable.c",
      "insertions": 6,
      "deletions": 12
    },
    {
      "file": "arch/arm64/kvm/hyp/vgic-v3-sr.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/vgic/vgic-v3.c",
      "insertions": 15,
      "deletions": 2
    },
    {
      "file": "arch/x86/include/asm/kvm_host.h",
      "insertions": 3,
      "deletions": 2
    },
    {
      "file": "arch/x86/include/uapi/asm/kvm.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/cpuid.c",
      "insertions": 55,
      "deletions": 35
    },
    {
      "file": "arch/x86/kvm/lapic.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/svm/nested.c",
      "insertions": 5,
      "deletions": 4
    },
    {
      "file": "arch/x86/kvm/svm/sev.c",
      "insertions": 7,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/svm/svm.c",
      "insertions": 122,
      "deletions": 55
    },
    {
      "file": "arch/x86/kvm/svm/svm.h",
      "insertions": 1,
      "deletions": 6
    },
    {
      "file": "arch/x86/kvm/svm/svm_onhyperv.h",
      "insertions": 4,
      "deletions": 8
    },
    {
      "file": "arch/x86/kvm/vmx/capabilities.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/vmx/evmcs.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/vmx/evmcs.h",
      "insertions": 39,
      "deletions": 9
    },
    {
      "file": "arch/x86/kvm/vmx/nested.c",
      "insertions": 54,
      "deletions": 28
    },
    {
      "file": "arch/x86/kvm/vmx/vmcs12.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/vmx/vmcs12.h",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "arch/x86/kvm/vmx/vmx.c",
      "insertions": 38,
      "deletions": 9
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "insertions": 81,
      "deletions": 13
    },
    {
      "file": "arch/x86/kvm/xen.c",
      "insertions": 2,
      "deletions": 8
    },
    {
      "file": "include/uapi/linux/kvm.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/arch/x86/include/uapi/asm/kvm.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "tools/include/uapi/linux/kvm.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/Makefile",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/include/kvm_util_base.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "tools/testing/selftests/kvm/include/x86_64/processor.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/lib/kvm_util.c",
      "insertions": 0,
      "deletions": 7
    },
    {
      "file": "tools/testing/selftests/kvm/lib/x86_64/processor.c",
      "insertions": 21,
      "deletions": 6
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/amx_test.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/smm_test.c",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "virt/kvm/eventfd.c",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "virt/kvm/kvm_main.c",
      "insertions": 3,
      "deletions": 5
    }
  ],
  "total_insertions": 490,
  "total_deletions": 228,
  "total_changes": 718,
  "parents": [
    "e0152705e4630b4a6ae8eb716aa44ed5a90054ea",
    "17179d0068b20413de2355f84c75a93740257e20"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/include/asm/kvm_host.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/svm/svm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/vmx/vmx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/kvm_main.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}