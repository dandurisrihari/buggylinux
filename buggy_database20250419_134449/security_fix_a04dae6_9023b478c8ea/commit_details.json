{
  "hash": "a04dae6fa4fc56c6a29cd40e133ef6a77f2c7e4e",
  "hash_short": "a04dae6f",
  "subject": "ALSA: silence integer wrapping warning",
  "body": "This patch doesn't change runtime at all, it's just for kernel hardening.\n\nThe \"count\" here comes from the user and on 32bit systems, it leads to\ninteger wrapping when we pass it to compute_user_elem_size():\n\n\talloc_size = compute_user_elem_size(private_size, count);\n\nHowever, the integer over is harmless because later \"count\" is checked\nwhen we pass it to snd_ctl_new():\n\n\terr = snd_ctl_new(&kctl, count, access, file);\n\nThese days as part of kernel hardening we're trying to avoid integer\noverflows when they affect size_t type.  So to avoid the integer overflow\ncopy the check from snd_ctl_new() and do it at the start of the\nsnd_ctl_elem_add() function as well.\n\nSigned-off-by: Dan Carpenter <dan.carpenter@linaro.org>\nReviewed-by: Jaroslav Kysela <perex@perex.cz>\nLink: https://patch.msgid.link/5457e8c1-01ff-4dd9-b49c-15b817f65ee7@stanley.mountain\nSigned-off-by: Takashi Iwai <tiwai@suse.de>",
  "full_message": "ALSA: silence integer wrapping warning\n\nThis patch doesn't change runtime at all, it's just for kernel hardening.\n\nThe \"count\" here comes from the user and on 32bit systems, it leads to\ninteger wrapping when we pass it to compute_user_elem_size():\n\n\talloc_size = compute_user_elem_size(private_size, count);\n\nHowever, the integer over is harmless because later \"count\" is checked\nwhen we pass it to snd_ctl_new():\n\n\terr = snd_ctl_new(&kctl, count, access, file);\n\nThese days as part of kernel hardening we're trying to avoid integer\noverflows when they affect size_t type.  So to avoid the integer overflow\ncopy the check from snd_ctl_new() and do it at the start of the\nsnd_ctl_elem_add() function as well.\n\nSigned-off-by: Dan Carpenter <dan.carpenter@linaro.org>\nReviewed-by: Jaroslav Kysela <perex@perex.cz>\nLink: https://patch.msgid.link/5457e8c1-01ff-4dd9-b49c-15b817f65ee7@stanley.mountain\nSigned-off-by: Takashi Iwai <tiwai@suse.de>",
  "author_name": "Dan Carpenter",
  "author_email": "dan.carpenter@linaro.org",
  "author_date": "Mon Sep 30 10:19:58 2024 +0300",
  "author_date_iso": "2024-09-30T10:19:58+03:00",
  "committer_name": "Takashi Iwai",
  "committer_email": "tiwai@suse.de",
  "committer_date": "Tue Oct 1 14:56:40 2024 +0200",
  "committer_date_iso": "2024-10-01T14:56:40+02:00",
  "files_changed": [
    "sound/core/control.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "sound/core/control.c",
      "insertions": 2,
      "deletions": 0
    }
  ],
  "total_insertions": 2,
  "total_deletions": 0,
  "total_changes": 2,
  "parents": [
    "8a193d8e351d185d75186bf0bdfa979e19d8fba8"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "sound/core/control.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}