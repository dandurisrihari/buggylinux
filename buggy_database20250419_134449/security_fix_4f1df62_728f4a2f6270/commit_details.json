{
  "hash": "4f1df628d4ec22b04f67e068e6d02538d3dd557b",
  "hash_short": "4f1df628",
  "subject": "KVM: arm64: Advertise ID_AA64PFR0_EL1.CSV3=1 if the CPUs are Meltdown-safe",
  "body": "Cores that predate the introduction of ID_AA64PFR0_EL1.CSV3 to\nthe ARMv8 architecture have this field set to 0, even of some of\nthem are not affected by the vulnerability.\n\nThe kernel maintains a list of unaffected cores (A53, A55 and a few\nothers) so that it doesn't impose an expensive mitigation uncessarily.\n\nAs we do for CSV2, let's expose the CSV3 property to guests that run\non HW that is effectively not vulnerable. This can be reset to zero\nby writing to the ID register from userspace, ensuring that VMs can\nbe migrated despite the new property being set.\n\nReported-by: Will Deacon <will@kernel.org>\nSigned-off-by: Marc Zyngier <maz@kernel.org>",
  "full_message": "KVM: arm64: Advertise ID_AA64PFR0_EL1.CSV3=1 if the CPUs are Meltdown-safe\n\nCores that predate the introduction of ID_AA64PFR0_EL1.CSV3 to\nthe ARMv8 architecture have this field set to 0, even of some of\nthem are not affected by the vulnerability.\n\nThe kernel maintains a list of unaffected cores (A53, A55 and a few\nothers) so that it doesn't impose an expensive mitigation uncessarily.\n\nAs we do for CSV2, let's expose the CSV3 property to guests that run\non HW that is effectively not vulnerable. This can be reset to zero\nby writing to the ID register from userspace, ensuring that VMs can\nbe migrated despite the new property being set.\n\nReported-by: Will Deacon <will@kernel.org>\nSigned-off-by: Marc Zyngier <maz@kernel.org>",
  "author_name": "Marc Zyngier",
  "author_email": "maz@kernel.org",
  "author_date": "Thu Nov 26 17:27:13 2020 +0000",
  "author_date_iso": "2020-11-26T17:27:13+00:00",
  "committer_name": "Marc Zyngier",
  "committer_email": "maz@kernel.org",
  "committer_date": "Mon Nov 30 16:02:53 2020 +0000",
  "committer_date_iso": "2020-11-30T16:02:53+00:00",
  "files_changed": [
    "arch/arm64/include/asm/kvm_host.h",
    "arch/arm64/kvm/arm.c",
    "arch/arm64/kvm/sys_regs.c"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/arm.c",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "arch/arm64/kvm/sys_regs.c",
      "insertions": 13,
      "deletions": 3
    }
  ],
  "total_insertions": 18,
  "total_deletions": 5,
  "total_changes": 23,
  "parents": [
    "7f43c2014fa03bb8718569ae628acf2089683bff"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "vulnerability"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/arm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/sys_regs.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}