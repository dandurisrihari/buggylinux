Commit Hash: 9926146b15fd96d78a4f7c32e7a26d50639369f4
Subject: e1000/e1000e: don't use small hardware rx buffers


Security Keywords:
- vulnerability

Full commit message:
e1000/e1000e: don't use small hardware rx buffers

When testing the "e1000: enhance frame fragment detection" (and e1000e)
patches we found some bugs with reducing the MTU size.  The 1024 byte
descriptor used with the 1000 mtu test also (re) introduced the
(originally) reported bug, and causes us to need the e1000_clean_tx_irq
"enhance frame fragment detection" fix.

So what has occured here is that 2.6.32 is only vulnerable for mtu <
1500 due to the jumbo specific routines in both e1000 and e1000e.
So, 2.6.32 needs the 2kB buffer len fix for those smaller MTUs, but
is not vulnerable to the original issue reported.  It has been pointed
out that this vulnerability needs to be patched in older kernels that
don't have the e1000 jumbo routine.  Without the jumbo routines, we
need the "enhance frame fragment detection" fix the e1000, old
e1000e is only vulnerable for < 1500 mtu, and needs a similar
fix.  We split the patches up to provide easy backport paths.

There is only a slight bit of extra code when this fix and the
original "enhance frame fragment detection" fixes are applied, so
please apply both, even though it is a bit of overkill.

Signed-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>
Signed-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>
Signed-off-by: David S. Miller <davem@davemloft.net>

Metadata:
Author: Jesse Brandeburg <jesse.brandeburg@intel.com>
Author Date: Fri Jan 22 22:56:16 2010 +0000
Committer: David S. Miller <davem@davemloft.net>
Commit Date: Sat Jan 23 01:08:53 2010 -0800

Files Changed: 2
Lines Added: 2
Lines Removed: 38
Total Changes: 40
