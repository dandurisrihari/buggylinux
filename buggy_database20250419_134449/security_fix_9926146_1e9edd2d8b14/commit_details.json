{
  "hash": "9926146b15fd96d78a4f7c32e7a26d50639369f4",
  "hash_short": "9926146b",
  "subject": "e1000/e1000e: don't use small hardware rx buffers",
  "body": "When testing the \"e1000: enhance frame fragment detection\" (and e1000e)\npatches we found some bugs with reducing the MTU size.  The 1024 byte\ndescriptor used with the 1000 mtu test also (re) introduced the\n(originally) reported bug, and causes us to need the e1000_clean_tx_irq\n\"enhance frame fragment detection\" fix.\n\nSo what has occured here is that 2.6.32 is only vulnerable for mtu <\n1500 due to the jumbo specific routines in both e1000 and e1000e.\nSo, 2.6.32 needs the 2kB buffer len fix for those smaller MTUs, but\nis not vulnerable to the original issue reported.  It has been pointed\nout that this vulnerability needs to be patched in older kernels that\ndon't have the e1000 jumbo routine.  Without the jumbo routines, we\nneed the \"enhance frame fragment detection\" fix the e1000, old\ne1000e is only vulnerable for < 1500 mtu, and needs a similar\nfix.  We split the patches up to provide easy backport paths.\n\nThere is only a slight bit of extra code when this fix and the\noriginal \"enhance frame fragment detection\" fixes are applied, so\nplease apply both, even though it is a bit of overkill.\n\nSigned-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>\nSigned-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "full_message": "e1000/e1000e: don't use small hardware rx buffers\n\nWhen testing the \"e1000: enhance frame fragment detection\" (and e1000e)\npatches we found some bugs with reducing the MTU size.  The 1024 byte\ndescriptor used with the 1000 mtu test also (re) introduced the\n(originally) reported bug, and causes us to need the e1000_clean_tx_irq\n\"enhance frame fragment detection\" fix.\n\nSo what has occured here is that 2.6.32 is only vulnerable for mtu <\n1500 due to the jumbo specific routines in both e1000 and e1000e.\nSo, 2.6.32 needs the 2kB buffer len fix for those smaller MTUs, but\nis not vulnerable to the original issue reported.  It has been pointed\nout that this vulnerability needs to be patched in older kernels that\ndon't have the e1000 jumbo routine.  Without the jumbo routines, we\nneed the \"enhance frame fragment detection\" fix the e1000, old\ne1000e is only vulnerable for < 1500 mtu, and needs a similar\nfix.  We split the patches up to provide easy backport paths.\n\nThere is only a slight bit of extra code when this fix and the\noriginal \"enhance frame fragment detection\" fixes are applied, so\nplease apply both, even though it is a bit of overkill.\n\nSigned-off-by: Jesse Brandeburg <jesse.brandeburg@intel.com>\nSigned-off-by: Jeff Kirsher <jeffrey.t.kirsher@intel.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "author_name": "Jesse Brandeburg",
  "author_email": "jesse.brandeburg@intel.com",
  "author_date": "Fri Jan 22 22:56:16 2010 +0000",
  "author_date_iso": "2010-01-22T22:56:16+00:00",
  "committer_name": "David S. Miller",
  "committer_email": "davem@davemloft.net",
  "committer_date": "Sat Jan 23 01:08:53 2010 -0800",
  "committer_date_iso": "2010-01-23T01:08:53-08:00",
  "files_changed": [
    "drivers/net/e1000/e1000_main.c",
    "drivers/net/e1000e/netdev.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "drivers/net/e1000/e1000_main.c",
      "insertions": 1,
      "deletions": 19
    },
    {
      "file": "drivers/net/e1000e/netdev.c",
      "insertions": 1,
      "deletions": 19
    }
  ],
  "total_insertions": 2,
  "total_deletions": 38,
  "total_changes": 40,
  "parents": [
    "33d7959a7a9ef36573bfd0cc85ebef29ed4b846d"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v2.6.33",
    "v2.6.33-rc6",
    "v2.6.33-rc7",
    "v2.6.33-rc8",
    "v2.6.34",
    "v2.6.34-rc1",
    "v2.6.34-rc2",
    "v2.6.34-rc3",
    "v2.6.34-rc4",
    "v2.6.34-rc5"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "vulnerability"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/net/e1000/e1000_main.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/e1000e/netdev.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}