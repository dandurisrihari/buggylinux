{
  "hash": "d128af17876d79b87edf048303f98b35f6a53dbc",
  "hash_short": "d128af17",
  "subject": "crypto: caam - fix AEAD givenc descriptors",
  "body": "The AEAD givenc descriptor relies on moving the IV through the\noutput FIFO and then back to the CTX2 for authentication. The\nSEQ FIFO STORE could be scheduled before the data can be\nread from OFIFO, especially since the SEQ FIFO LOAD needs\nto wait for the SEQ FIFO LOAD SKIP to finish first. The\nSKIP takes more time when the input is SG than when it's\na contiguous buffer. If the SEQ FIFO LOAD is not scheduled\nbefore the STORE, the DECO will hang waiting for data\nto be available in the OFIFO so it can be transferred to C2.\nIn order to overcome this, first force transfer of IV to C2\nby starting the \"cryptlen\" transfer first and then starting to\nstore data from OFIFO to the output buffer.\n\nFixes: 1acebad3d8db8 (\"crypto: caam - faster aead implementation\")\nCc: <stable@vger.kernel.org> # 3.2+\nSigned-off-by: Alex Porosanu <alexandru.porosanu@nxp.com>\nSigned-off-by: Horia Geant\u0103 <horia.geanta@nxp.com>\nSigned-off-by: Herbert Xu <herbert@gondor.apana.org.au>",
  "full_message": "crypto: caam - fix AEAD givenc descriptors\n\nThe AEAD givenc descriptor relies on moving the IV through the\noutput FIFO and then back to the CTX2 for authentication. The\nSEQ FIFO STORE could be scheduled before the data can be\nread from OFIFO, especially since the SEQ FIFO LOAD needs\nto wait for the SEQ FIFO LOAD SKIP to finish first. The\nSKIP takes more time when the input is SG than when it's\na contiguous buffer. If the SEQ FIFO LOAD is not scheduled\nbefore the STORE, the DECO will hang waiting for data\nto be available in the OFIFO so it can be transferred to C2.\nIn order to overcome this, first force transfer of IV to C2\nby starting the \"cryptlen\" transfer first and then starting to\nstore data from OFIFO to the output buffer.\n\nFixes: 1acebad3d8db8 (\"crypto: caam - faster aead implementation\")\nCc: <stable@vger.kernel.org> # 3.2+\nSigned-off-by: Alex Porosanu <alexandru.porosanu@nxp.com>\nSigned-off-by: Horia Geant\u0103 <horia.geanta@nxp.com>\nSigned-off-by: Herbert Xu <herbert@gondor.apana.org.au>",
  "author_name": "Alex Porosanu",
  "author_email": "alexandru.porosanu@nxp.com",
  "author_date": "Wed Nov 9 10:46:11 2016 +0200",
  "author_date_iso": "2016-11-09T10:46:11+02:00",
  "committer_name": "Herbert Xu",
  "committer_email": "herbert@gondor.apana.org.au",
  "committer_date": "Sun Nov 13 17:45:06 2016 +0800",
  "committer_date_iso": "2016-11-13T17:45:06+08:00",
  "files_changed": [
    "drivers/crypto/caam/caamalg.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/crypto/caam/caamalg.c",
      "insertions": 3,
      "deletions": 1
    }
  ],
  "total_insertions": 3,
  "total_deletions": 1,
  "total_changes": 4,
  "parents": [
    "d266f44b5b517025249c4200eaa4bb892facc9a5"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/crypto/caam/caamalg.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}