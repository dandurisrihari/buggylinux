Commit Hash: b6ddf05ff68d81a7c1736717faf492b70e9bf4f9
Subject: KVM: x86: Run PIT work in own kthread


Security Keywords:
- injection

Full commit message:
KVM: x86: Run PIT work in own kthread

We can't run PIT IRQ injection work in the interrupt context of the host
timer. This would allow the user to influence the handler complexity by
asking for a broadcast to a large number of VCPUs. Therefore, this work
was pushed into workqueue context in 9d244caf2e. However, this prevents
prioritizing the PIT injection over other task as workqueues share
kernel threads.

This replaces the workqueue with a kthread worker and gives that thread
a name in the format "kvm-pit/<owner-process-pid>". That allows to
identify and adjust the kthread priority according to the VM process
parameters.

Signed-off-by: Jan Kiszka <jan.kiszka@siemens.com>
Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com>

Metadata:
Author: Jan Kiszka <jan.kiszka@siemens.com>
Author Date: Tue Apr 24 16:40:17 2012 +0200
Committer: Marcelo Tosatti <mtosatti@redhat.com>
Commit Date: Fri Apr 27 19:40:29 2012 -0300

Files Changed: 3
Lines Added: 32
Lines Removed: 14
Total Changes: 46
