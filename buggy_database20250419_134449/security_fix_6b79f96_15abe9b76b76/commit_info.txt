Commit Hash: 6b79f96f4a23846516e5e6e4dd37fc06f43a60dd
Subject: drm/virtio: Ensure that objs is not NULL in virtio_gpu_array_put_free()


Security Keywords:
- injection

Full commit message:
drm/virtio: Ensure that objs is not NULL in virtio_gpu_array_put_free()

If virtio_gpu_object_shmem_init() fails (e.g. due to fault injection, as it
happened in the bug report by syzbot), virtio_gpu_array_put_free() could be
called with objs equal to NULL.

Ensure that objs is not NULL in virtio_gpu_array_put_free(), or otherwise
return from the function.

Cc: stable@vger.kernel.org # 5.13.x
Signed-off-by: Roberto Sassu <roberto.sassu@huawei.com>
Reported-by: syzbot+e9072e90624a31dfa85f@syzkaller.appspotmail.com
Fixes: 377f8331d0565 ("drm/virtio: fix possible leak/unlock virtio_gpu_object_array")
Link: http://patchwork.freedesktop.org/patch/msgid/20211213183122.838119-1-roberto.sassu@huawei.com
Signed-off-by: Gerd Hoffmann <kraxel@redhat.com>

Metadata:
Author: Roberto Sassu <roberto.sassu@huawei.com>
Author Date: Mon Dec 13 19:31:22 2021 +0100
Committer: Gerd Hoffmann <kraxel@redhat.com>
Commit Date: Tue Jan 18 07:52:42 2022 +0100

Files Changed: 1
Lines Added: 3
Lines Removed: 0
Total Changes: 3
