{
  "hash": "6bc31bdc55cad6609b1610b4cecad312664f2808",
  "hash_short": "6bc31bdc",
  "subject": "KVM: SVM: implement NEXTRIPsave SVM feature",
  "body": "On SVM we set the instruction length of skipped instructions\nto hard-coded, well known values, which could be wrong when (bogus,\nbut valid) prefixes (REX, segment override) are used.\nNewer AMD processors (Fam10h 45nm and better, aka. PhenomII or\nAthlonII) have an explicit NEXTRIP field in the VMCB containing the\ndesired information.\nSince it is cheap to do so, we use this field to override the guessed\nvalue on newer processors.\nA fix for older CPUs would be rather expensive, as it would require\nto fetch and partially decode the instruction. As the problem is not\na security issue and needs special, handcrafted code to trigger\n(no compiler will ever generate such code), I omit a fix for older\nCPUs.\nIf someone is interested, I have both a patch for these CPUs as well as\ndemo code triggering this issue: It segfaults under KVM, but runs\nperfectly on native Linux.\n\nSigned-off-by: Andre Przywara <andre.przywara@amd.com>\nSigned-off-by: Marcelo Tosatti <mtosatti@redhat.com>",
  "full_message": "KVM: SVM: implement NEXTRIPsave SVM feature\n\nOn SVM we set the instruction length of skipped instructions\nto hard-coded, well known values, which could be wrong when (bogus,\nbut valid) prefixes (REX, segment override) are used.\nNewer AMD processors (Fam10h 45nm and better, aka. PhenomII or\nAthlonII) have an explicit NEXTRIP field in the VMCB containing the\ndesired information.\nSince it is cheap to do so, we use this field to override the guessed\nvalue on newer processors.\nA fix for older CPUs would be rather expensive, as it would require\nto fetch and partially decode the instruction. As the problem is not\na security issue and needs special, handcrafted code to trigger\n(no compiler will ever generate such code), I omit a fix for older\nCPUs.\nIf someone is interested, I have both a patch for these CPUs as well as\ndemo code triggering this issue: It segfaults under KVM, but runs\nperfectly on native Linux.\n\nSigned-off-by: Andre Przywara <andre.przywara@amd.com>\nSigned-off-by: Marcelo Tosatti <mtosatti@redhat.com>",
  "author_name": "Andre Przywara",
  "author_email": "andre.przywara@amd.com",
  "author_date": "Sun Apr 11 23:07:28 2010 +0200",
  "author_date_iso": "2010-04-11T23:07:28+02:00",
  "committer_name": "Avi Kivity",
  "committer_email": "avi@redhat.com",
  "committer_date": "Mon May 17 12:17:38 2010 +0300",
  "committer_date_iso": "2010-05-17T12:17:38+03:00",
  "files_changed": [
    "arch/x86/include/asm/svm.h",
    "arch/x86/kvm/svm.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "arch/x86/include/asm/svm.h",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/svm.c",
      "insertions": 8,
      "deletions": 5
    }
  ],
  "total_insertions": 11,
  "total_deletions": 6,
  "total_changes": 17,
  "parents": [
    "f7a711971edd952352a89698db1d36f469e25f77"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v2.6.35",
    "v2.6.35-rc1",
    "v2.6.35-rc2",
    "v2.6.35-rc3",
    "v2.6.35-rc4",
    "v2.6.35-rc5",
    "v2.6.35-rc6",
    "v2.6.36",
    "v2.6.36-rc1",
    "v2.6.36-rc2"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "security issue"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/include/asm/svm.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kvm/svm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}