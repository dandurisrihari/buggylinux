{
  "hash": "ee5e5e7a5e0fdeca5add8de6314b1f0a62604bdf",
  "hash_short": "ee5e5e7a",
  "subject": "drm/i915: Add HDCP framework + base implementation",
  "body": "This patch adds the framework required to add HDCP support to intel\nconnectors. It implements Aksv loading from fuse, and parts 1/2/3\nof the HDCP authentication scheme.\n\nNote that without shim implementations, this does not actually implement\nHDCP. That will come in subsequent patches.\n\nChanges in v2:\n- Don't open code wait_fors (Chris)\n- drm_hdcp.c under MIT license (Daniel)\n- Move intel_hdcp_disable() call above ddi_disable (Ram)\n- Fix // comments (I wore a cone of shame for 12 hours to atone) (Daniel)\n- Justify intel_hdcp_shim with comments (Daniel)\n- Fixed async locking issues by adding hdcp_mutex (Daniel)\n- Don't alter connector_state in enable/disable (Daniel)\nChanges in v3:\n- Added hdcp_mutex/hdcp_value to make async reasonable\n- Added hdcp_prop_work to separate link checking & property setting\n- Added new helper for atomic_check state tracking (Daniel)\n- Moved enable/disable into atomic_commit with matching helpers\n- Moved intel_hdcp_check_link out of all locks when called from dp\n- Bumped up ksv_fifo timeout (noticed failure on one of my dongles)\nChanges in v4:\n- Remove SKL_ prefix from most register names (Daniel)\n- Move enable/disable back to modeset path (Daniel)\n- s/get_random_long/get_random_u32/ (Daniel)\n- Remove mode_config.mutex lock in prop_work (Daniel)\n- Add intel_hdcp_init to handle init of conn components (Daniel)\n- Actually check return value of attach_property\n- Check Bksv is valid before trying to authenticate (Ram)\nChanges in v5:\n- checkpatch whitespace changes\n- s/DRM_MODE_CONTENT_PROTECTION_OFF/DRM_MODE_CONTENT_PROTECTION_UNDESIRED/\n- Fix ksv list wait timeout (actually wait 5s)\n- Increase the R0 timeout to 300ms (Ram)\nChanges in v6:\n- SPDX license\n\nCc: Chris Wilson <chris@chris-wilson.co.uk>\nReviewed-by: Ramalingam C <ramalingm.c@intel.com>\nReviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>\nSigned-off-by: Sean Paul <seanpaul@chromium.org>\nLink: https://patchwork.freedesktop.org/patch/msgid/20180108195545.218615-6-seanpaul@chromium.org",
  "full_message": "drm/i915: Add HDCP framework + base implementation\n\nThis patch adds the framework required to add HDCP support to intel\nconnectors. It implements Aksv loading from fuse, and parts 1/2/3\nof the HDCP authentication scheme.\n\nNote that without shim implementations, this does not actually implement\nHDCP. That will come in subsequent patches.\n\nChanges in v2:\n- Don't open code wait_fors (Chris)\n- drm_hdcp.c under MIT license (Daniel)\n- Move intel_hdcp_disable() call above ddi_disable (Ram)\n- Fix // comments (I wore a cone of shame for 12 hours to atone) (Daniel)\n- Justify intel_hdcp_shim with comments (Daniel)\n- Fixed async locking issues by adding hdcp_mutex (Daniel)\n- Don't alter connector_state in enable/disable (Daniel)\nChanges in v3:\n- Added hdcp_mutex/hdcp_value to make async reasonable\n- Added hdcp_prop_work to separate link checking & property setting\n- Added new helper for atomic_check state tracking (Daniel)\n- Moved enable/disable into atomic_commit with matching helpers\n- Moved intel_hdcp_check_link out of all locks when called from dp\n- Bumped up ksv_fifo timeout (noticed failure on one of my dongles)\nChanges in v4:\n- Remove SKL_ prefix from most register names (Daniel)\n- Move enable/disable back to modeset path (Daniel)\n- s/get_random_long/get_random_u32/ (Daniel)\n- Remove mode_config.mutex lock in prop_work (Daniel)\n- Add intel_hdcp_init to handle init of conn components (Daniel)\n- Actually check return value of attach_property\n- Check Bksv is valid before trying to authenticate (Ram)\nChanges in v5:\n- checkpatch whitespace changes\n- s/DRM_MODE_CONTENT_PROTECTION_OFF/DRM_MODE_CONTENT_PROTECTION_UNDESIRED/\n- Fix ksv list wait timeout (actually wait 5s)\n- Increase the R0 timeout to 300ms (Ram)\nChanges in v6:\n- SPDX license\n\nCc: Chris Wilson <chris@chris-wilson.co.uk>\nReviewed-by: Ramalingam C <ramalingm.c@intel.com>\nReviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>\nSigned-off-by: Sean Paul <seanpaul@chromium.org>\nLink: https://patchwork.freedesktop.org/patch/msgid/20180108195545.218615-6-seanpaul@chromium.org",
  "author_name": "Sean Paul",
  "author_email": "seanpaul@chromium.org",
  "author_date": "Mon Jan 8 14:55:39 2018 -0500",
  "author_date_iso": "2018-01-08T14:55:39-05:00",
  "committer_name": "Sean Paul",
  "committer_email": "seanpaul@chromium.org",
  "committer_date": "Mon Jan 8 14:58:02 2018 -0500",
  "committer_date_iso": "2018-01-08T14:58:02-05:00",
  "files_changed": [
    "drivers/gpu/drm/i915/Makefile",
    "drivers/gpu/drm/i915/i915_reg.h",
    "drivers/gpu/drm/i915/intel_atomic.c",
    "drivers/gpu/drm/i915/intel_ddi.c",
    "drivers/gpu/drm/i915/intel_display.c",
    "drivers/gpu/drm/i915/intel_drv.h",
    "drivers/gpu/drm/i915/intel_hdcp.c"
  ],
  "files_changed_count": 7,
  "stats": [
    {
      "file": "drivers/gpu/drm/i915/Makefile",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/i915/i915_reg.h",
      "insertions": 83,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/i915/intel_atomic.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/i915/intel_ddi.c",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/i915/intel_display.c",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/i915/intel_drv.h",
      "insertions": 85,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/i915/intel_hdcp.c",
      "insertions": 723,
      "deletions": 0
    }
  ],
  "total_insertions": 905,
  "total_deletions": 0,
  "total_changes": 905,
  "parents": [
    "495eb7f877ab3789355c6ab5a0dbbd5277a88d69"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.17",
    "v4.17-rc1",
    "v4.17-rc2",
    "v4.17-rc3",
    "v4.17-rc4",
    "v4.17-rc5",
    "v4.17-rc6",
    "v4.17-rc7",
    "v4.18",
    "v4.18-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpu/drm/i915/intel_atomic.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/Makefile",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/intel_drv.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/intel_hdcp.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/intel_ddi.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/i915_reg.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/intel_display.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}