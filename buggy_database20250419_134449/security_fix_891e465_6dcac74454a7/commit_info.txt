Commit Hash: 891e465a1bd8798d5f97c3afb99393f123817fef
Subject: x86/mce: Check whether writes to MCA_STATUS are getting ignored


Security Keywords:
- injection

Full commit message:
x86/mce: Check whether writes to MCA_STATUS are getting ignored

The platform can sometimes - depending on its settings - cause writes
to MCA_STATUS MSRs to get ignored, regardless of HWCR[McStatusWrEn]'s
value.

For further info see

  PPR for AMD Family 19h, Model 01h, Revision B1 Processors, doc ID 55898

at https://bugzilla.kernel.org/show_bug.cgi?id=206537.

Therefore, probe for ignored writes to MCA_STATUS to determine if hardware
error injection is at all possible.

  [ bp: Heavily massage commit message and patch. ]

Signed-off-by: Smita Koralahalli <Smita.KoralahalliChannabasappa@amd.com>
Signed-off-by: Borislav Petkov <bp@suse.de>
Link: https://lore.kernel.org/r/20220214233640.70510-2-Smita.KoralahalliChannabasappa@amd.com

Metadata:
Author: Smita Koralahalli <Smita.KoralahalliChannabasappa@amd.com>
Author Date: Mon Jun 27 20:56:46 2022 +0000
Committer: Borislav Petkov <bp@suse.de>
Commit Date: Tue Jun 28 12:08:10 2022 +0200

Files Changed: 2
Lines Added: 48
Lines Removed: 1
Total Changes: 49
