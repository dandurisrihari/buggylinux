Files changed: 17
Insertions: 5061
Deletions: 1463
Total changes: 6524

File-specific changes:
Documentation/ABI/testing/debugfs-dwc-pcie: +157 -0
Documentation/ABI/testing/sysfs-bus-pci: +29 -0
Documentation/PCI/endpoint/pci-endpoint.rst: +3 -4
Documentation/devicetree/bindings/interrupt-controller/brcm,bcm2712-msix.yaml: +60 -0
Documentation/devicetree/bindings/pci/altr,pcie-root-port.yaml: +10 -0
Documentation/devicetree/bindings/pci/amd,versal2-mdb-host.yaml: +121 -0
Documentation/devicetree/bindings/pci/brcm,stb-pcie.yaml: +5 -1
Documentation/devicetree/bindings/pci/fsl,imx6q-pcie.yaml: +4 -0
Documentation/devicetree/bindings/pci/fsl,layerscape-pcie-ep.yaml: +0 -3
Documentation/devicetree/bindings/pci/fsl,mpc8xxx-pci.yaml: +113 -0
Documentation/devicetree/bindings/pci/fsl,pci.txt: +0 -27
Documentation/devicetree/bindings/pci/mediatek-pcie-gen3.yaml: +17 -0
Documentation/devicetree/bindings/pci/pci-ep-bus.yaml: +58 -0
Documentation/devicetree/bindings/pci/qcom,pcie-ep.yaml: +74 -26
Documentation/devicetree/bindings/pci/qcom,pcie.yaml: +6 -2
Documentation/devicetree/bindings/pci/snps,dw-pcie.yaml: +2 -0
Documentation/devicetree/bindings/pci/xilinx-versal-cpm.yaml: +1 -0
Documentation/devicetree/bindings/vendor-prefixes.yaml: +1 -1
MAINTAINERS: +1 -0
arch/s390/Kconfig: +1 -3
arch/s390/include/asm/pci.h: +3 -0
arch/s390/pci/Makefile: +1 -1
arch/s390/pci/pci_fixup.c: +23 -0
arch/s390/pci/pci_mmio.c: +13 -5
drivers/base/core.c: +61 -0
drivers/irqchip/Kconfig: +16 -0
drivers/irqchip/Makefile: +1 -0
drivers/irqchip/irq-bcm2712-mip.c: +292 -0
drivers/misc/pci_endpoint_test.c: +70 -61
drivers/pci/Kconfig: +4 -1
drivers/pci/bus.c: +0 -43
drivers/pci/controller/cadence/pci-j721e.c: +3 -2
drivers/pci/controller/cadence/pcie-cadence-ep.c: +5 -6
drivers/pci/controller/cadence/pcie-cadence.h: +1 -1
drivers/pci/controller/dwc/Kconfig: +21 -0
drivers/pci/controller/dwc/Makefile: +2 -0
drivers/pci/controller/dwc/pci-imx6.c: +20 -86
drivers/pci/controller/dwc/pci-keystone.c: +3 -3
drivers/pci/controller/dwc/pci-layerscape.c: +1 -1
drivers/pci/controller/dwc/pcie-amd-mdb.c: +476 -0
drivers/pci/controller/dwc/pcie-designware-debugfs.c: +677 -0
drivers/pci/controller/dwc/pcie-designware-ep.c: +260 -61
drivers/pci/controller/dwc/pcie-designware-host.c: +42 -19
drivers/pci/controller/dwc/pcie-designware.c: +123 -19
drivers/pci/controller/dwc/pcie-designware.h: +79 -3
drivers/pci/controller/dwc/pcie-dw-rockchip.c: +42 -11
drivers/pci/controller/dwc/pcie-histb.c: +8 -4
drivers/pci/controller/dwc/pcie-intel-gw.c: +1 -7
drivers/pci/controller/dwc/pcie-kirin.c: +18 -32
drivers/pci/controller/dwc/pcie-qcom-ep.c: +11 -6
drivers/pci/controller/dwc/pcie-qcom.c: +6 -6
drivers/pci/controller/pci-hyperv.c: +1 -1
drivers/pci/controller/pci-mvebu.c: +1 -1
drivers/pci/controller/pci-tegra.c: +28 -52
drivers/pci/controller/pci-thunder-ecam.c: +1 -1
drivers/pci/controller/pci-xgene-msi.c: +1 -1
drivers/pci/controller/pcie-altera.c: +247 -10
drivers/pci/controller/pcie-apple.c: +1 -3
drivers/pci/controller/pcie-brcmstb.c: +134 -68
drivers/pci/controller/pcie-mediatek-gen3.c: +49 -15
drivers/pci/controller/pcie-mediatek.c: +5 -10
drivers/pci/controller/pcie-mt7621.c: +5 -10
drivers/pci/controller/pcie-rcar-host.c: +6 -4
drivers/pci/controller/pcie-rockchip-host.c: +1 -1
drivers/pci/controller/pcie-rockchip.h: +0 -1
drivers/pci/controller/pcie-xilinx-cpm.c: +37 -16
drivers/pci/controller/vmd.c: +6 -6
drivers/pci/devres.c: +15 -3
drivers/pci/doe.c: +200 -47
drivers/pci/endpoint/Kconfig: +1 -1
drivers/pci/endpoint/functions/pci-epf-mhi.c: +1 -1
drivers/pci/endpoint/functions/pci-epf-test.c: +88 -54
drivers/pci/endpoint/pci-epc-core.c: +31 -25
drivers/pci/endpoint/pci-epf-core.c: +4 -0
drivers/pci/hotplug/Kconfig: +1 -1
drivers/pci/hotplug/cpci_hotplug.h: +0 -2
drivers/pci/hotplug/cpci_hotplug_core.c: +2 -15
drivers/pci/hotplug/pci_hotplug_core.c: +41 -101
drivers/pci/hotplug/pciehp_core.c: +4 -1
drivers/pci/hotplug/pciehp_hpc.c: +7 -4
drivers/pci/hotplug/shpchp.h: +1 -17
drivers/pci/hotplug/shpchp_core.c: +1 -12
drivers/pci/hotplug/shpchp_hpc.c: +1 -1
drivers/pci/iomap.c: +21 -8
drivers/pci/iov.c: +35 -15
drivers/pci/msi/api.c: +1 -1
drivers/pci/of.c: +121 -6
drivers/pci/of_property.c: +111 -4
drivers/pci/pci-sysfs.c: +9 -2
drivers/pci/pci.c: +52 -20
drivers/pci/pci.h: +82 -7
drivers/pci/pcie/aer.c: +42 -37
drivers/pci/pcie/aspm.c: +9 -8
drivers/pci/pcie/bwctrl.c: +5 -1
drivers/pci/pcie/dpc.c: +15 -3
drivers/pci/pcie/portdrv.c: +5 -3
drivers/pci/pcie/tlp.c: +38 -18
drivers/pci/probe.c: +67 -11
drivers/pci/proc.c: +4 -0
drivers/pci/pwrctrl/Kconfig: +11 -0
drivers/pci/pwrctrl/Makefile: +3 -0
drivers/pci/pwrctrl/core.c: +1 -1
drivers/pci/pwrctrl/slot.c: +93 -0
drivers/pci/quirks.c: +2 -2
drivers/pci/remove.c: +4 -1
drivers/pci/setup-bus.c: +327 -248
drivers/pci/setup-res.c: +10 -14
drivers/pci/slot.c: +0 -44
drivers/perf/dwc_pcie_pmu.c: +3 -22
drivers/s390/net/ism_drv.c: +0 -1
drivers/vfio/pci/Kconfig: +0 -4
drivers/vfio/pci/vfio_pci_core.c: +1 -1
include/linux/aer.h: +10 -2
include/linux/device.h: +2 -0
include/linux/pci-epc.h: +7 -1
include/linux/pci-epf.h: +9 -8
include/linux/pci.h: +3 -11
include/linux/pci_hotplug.h: +0 -2
include/linux/pci_ids.h: +3 -0
include/linux/pcie-dwc.h: +38 -0
include/ras/ras_event.h: +6 -6
include/uapi/linux/pci_regs.h: +10 -3
include/uapi/linux/pcitest.h: +6 -0
tools/Makefile: +6 -7
tools/testing/selftests/pci_endpoint/pci_endpoint_test.c: +21 -10
tools/testing/selftests/pcie_bwctrl/Makefile: +1 -1
