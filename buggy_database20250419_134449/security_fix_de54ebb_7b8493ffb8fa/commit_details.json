{
  "hash": "de54ebbe26bb371a6f1fbc0593372232f04e3107",
  "hash_short": "de54ebbe",
  "subject": "bug: Provide toggle for BUG on data corruption",
  "body": "The kernel checks for cases of data structure corruption under some\nCONFIGs (e.g. CONFIG_DEBUG_LIST). When corruption is detected, some\nsystems may want to BUG() immediately instead of letting the system run\nwith known corruption.  Usually these kinds of manipulation primitives can\nbe used by security flaws to gain arbitrary memory write control. This\nprovides a new config CONFIG_BUG_ON_DATA_CORRUPTION and a corresponding\nmacro CHECK_DATA_CORRUPTION for handling these situations. Notably, even\nif not BUGing, the kernel should not continue processing the corrupted\nstructure.\n\nThis is inspired by similar hardening by Syed Rameez Mustafa in MSM\nkernels, and in PaX and Grsecurity, which is likely in response to earlier\nremoval of the BUG calls in commit 924d9addb9b1 (\"list debugging: use\nWARN() instead of BUG()\").\n\nSigned-off-by: Kees Cook <keescook@chromium.org>\nAcked-by: Steven Rostedt <rostedt@goodmis.org>\nSigned-off-by: Paul E. McKenney <paulmck@linux.vnet.ibm.com>\nAcked-by: Rik van Riel <riel@redhat.com>",
  "full_message": "bug: Provide toggle for BUG on data corruption\n\nThe kernel checks for cases of data structure corruption under some\nCONFIGs (e.g. CONFIG_DEBUG_LIST). When corruption is detected, some\nsystems may want to BUG() immediately instead of letting the system run\nwith known corruption.  Usually these kinds of manipulation primitives can\nbe used by security flaws to gain arbitrary memory write control. This\nprovides a new config CONFIG_BUG_ON_DATA_CORRUPTION and a corresponding\nmacro CHECK_DATA_CORRUPTION for handling these situations. Notably, even\nif not BUGing, the kernel should not continue processing the corrupted\nstructure.\n\nThis is inspired by similar hardening by Syed Rameez Mustafa in MSM\nkernels, and in PaX and Grsecurity, which is likely in response to earlier\nremoval of the BUG calls in commit 924d9addb9b1 (\"list debugging: use\nWARN() instead of BUG()\").\n\nSigned-off-by: Kees Cook <keescook@chromium.org>\nAcked-by: Steven Rostedt <rostedt@goodmis.org>\nSigned-off-by: Paul E. McKenney <paulmck@linux.vnet.ibm.com>\nAcked-by: Rik van Riel <riel@redhat.com>",
  "author_name": "Kees Cook",
  "author_email": "keescook@chromium.org",
  "author_date": "Wed Aug 17 14:42:11 2016 -0700",
  "author_date_iso": "2016-08-17T14:42:11-07:00",
  "committer_name": "Paul E. McKenney",
  "committer_email": "paulmck@linux.vnet.ibm.com",
  "committer_date": "Mon Oct 31 13:01:58 2016 -0700",
  "committer_date_iso": "2016-10-31T13:01:58-07:00",
  "files_changed": [
    "include/linux/bug.h",
    "lib/Kconfig.debug",
    "lib/list_debug.c"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "include/linux/bug.h",
      "insertions": 17,
      "deletions": 0
    },
    {
      "file": "lib/Kconfig.debug",
      "insertions": 10,
      "deletions": 0
    },
    {
      "file": "lib/list_debug.c",
      "insertions": 22,
      "deletions": 35
    }
  ],
  "total_insertions": 49,
  "total_deletions": 35,
  "total_changes": 84,
  "parents": [
    "0cd340dcb05c4a43742fe156f36737bb2a321bfd"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "include/linux/bug.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "lib/Kconfig.debug",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "lib/list_debug.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}