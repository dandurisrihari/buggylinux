Commit Hash: de54ebbe26bb371a6f1fbc0593372232f04e3107
Subject: bug: Provide toggle for BUG on data corruption


Security Keywords:
- hardening

Full commit message:
bug: Provide toggle for BUG on data corruption

The kernel checks for cases of data structure corruption under some
CONFIGs (e.g. CONFIG_DEBUG_LIST). When corruption is detected, some
systems may want to BUG() immediately instead of letting the system run
with known corruption.  Usually these kinds of manipulation primitives can
be used by security flaws to gain arbitrary memory write control. This
provides a new config CONFIG_BUG_ON_DATA_CORRUPTION and a corresponding
macro CHECK_DATA_CORRUPTION for handling these situations. Notably, even
if not BUGing, the kernel should not continue processing the corrupted
structure.

This is inspired by similar hardening by Syed Rameez Mustafa in MSM
kernels, and in PaX and Grsecurity, which is likely in response to earlier
removal of the BUG calls in commit 924d9addb9b1 ("list debugging: use
WARN() instead of BUG()").

Signed-off-by: Kees Cook <keescook@chromium.org>
Acked-by: Steven Rostedt <rostedt@goodmis.org>
Signed-off-by: Paul E. McKenney <paulmck@linux.vnet.ibm.com>
Acked-by: Rik van Riel <riel@redhat.com>

Metadata:
Author: Kees Cook <keescook@chromium.org>
Author Date: Wed Aug 17 14:42:11 2016 -0700
Committer: Paul E. McKenney <paulmck@linux.vnet.ibm.com>
Commit Date: Mon Oct 31 13:01:58 2016 -0700

Files Changed: 3
Lines Added: 49
Lines Removed: 35
Total Changes: 84
