Commit Hash: 3ab9bb7243489f9db3abf3d05521ddfc6b184c0a
Subject: SUNRPC: Fix a memory leak in the auth credcache code


Security Keywords:
- auth

Full commit message:
SUNRPC: Fix a memory leak in the auth credcache code

The leak only affects the RPCSEC_GSS caches, since they are the only ones
that are dynamically allocated...
Rename the existing rpcauth_free_credcache() to rpcauth_clear_credcache()
in order to better describe its role, then add a new function
rpcauth_destroy_credcache() that actually frees the cache in addition to
clearing it out.

Also move the call to destroy the credcache in gss_destroy() to come before
the rpc upcall pipe is unlinked.

Signed-off-by: Trond Myklebust <Trond.Myklebust@netapp.com>

Metadata:
Author: Trond Myklebust <Trond.Myklebust@netapp.com>
Author Date: Sat Jun 9 15:41:42 2007 -0400
Committer: Trond Myklebust <Trond.Myklebust@netapp.com>
Commit Date: Tue Jul 10 23:40:33 2007 -0400

Files Changed: 5
Lines Added: 22
Lines Removed: 6
Total Changes: 28
