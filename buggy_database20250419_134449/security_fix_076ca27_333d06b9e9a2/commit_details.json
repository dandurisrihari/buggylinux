{
  "hash": "076ca272a14cea558b1092ec85cea08510283f2a",
  "hash_short": "076ca272",
  "subject": "x86/vsyscall/64: Drop \"native\" vsyscalls",
  "body": "Since Linux v3.2, vsyscalls have been deprecated and slow.  From v3.2\non, Linux had three vsyscall modes: \"native\", \"emulate\", and \"none\".\n\n\"emulate\" is the default.  All known user programs work correctly in\nemulate mode, but vsyscalls turn into page faults and are emulated.\nThis is very slow.  In \"native\" mode, the vsyscall page is easily\nusable as an exploit gadget, but vsyscalls are a bit faster -- they\nturn into normal syscalls.  (This is in contrast to vDSO functions,\nwhich can be much faster than syscalls.)  In \"none\" mode, there are\nno vsyscalls.\n\nFor all practical purposes, \"native\" was really just a chicken bit\nin case something went wrong with the emulation.  It's been over six\nyears, and nothing has gone wrong.  Delete it.\n\nSigned-off-by: Andy Lutomirski <luto@kernel.org>\nAcked-by: Kees Cook <keescook@chromium.org>\nAcked-by: Linus Torvalds <torvalds@linux-foundation.org>\nCc: Borislav Petkov <bp@alien8.de>\nCc: Dominik Brodowski <linux@dominikbrodowski.net>\nCc: Kernel Hardening <kernel-hardening@lists.openwall.com>\nCc: Peter Zijlstra <peterz@infradead.org>\nCc: Thomas Gleixner <tglx@linutronix.de>\nLink: http://lkml.kernel.org/r/519fee5268faea09ae550776ce969fa6e88668b0.1520449896.git.luto@kernel.org\nSigned-off-by: Ingo Molnar <mingo@kernel.org>",
  "full_message": "x86/vsyscall/64: Drop \"native\" vsyscalls\n\nSince Linux v3.2, vsyscalls have been deprecated and slow.  From v3.2\non, Linux had three vsyscall modes: \"native\", \"emulate\", and \"none\".\n\n\"emulate\" is the default.  All known user programs work correctly in\nemulate mode, but vsyscalls turn into page faults and are emulated.\nThis is very slow.  In \"native\" mode, the vsyscall page is easily\nusable as an exploit gadget, but vsyscalls are a bit faster -- they\nturn into normal syscalls.  (This is in contrast to vDSO functions,\nwhich can be much faster than syscalls.)  In \"none\" mode, there are\nno vsyscalls.\n\nFor all practical purposes, \"native\" was really just a chicken bit\nin case something went wrong with the emulation.  It's been over six\nyears, and nothing has gone wrong.  Delete it.\n\nSigned-off-by: Andy Lutomirski <luto@kernel.org>\nAcked-by: Kees Cook <keescook@chromium.org>\nAcked-by: Linus Torvalds <torvalds@linux-foundation.org>\nCc: Borislav Petkov <bp@alien8.de>\nCc: Dominik Brodowski <linux@dominikbrodowski.net>\nCc: Kernel Hardening <kernel-hardening@lists.openwall.com>\nCc: Peter Zijlstra <peterz@infradead.org>\nCc: Thomas Gleixner <tglx@linutronix.de>\nLink: http://lkml.kernel.org/r/519fee5268faea09ae550776ce969fa6e88668b0.1520449896.git.luto@kernel.org\nSigned-off-by: Ingo Molnar <mingo@kernel.org>",
  "author_name": "Andy Lutomirski",
  "author_email": "luto@kernel.org",
  "author_date": "Wed Mar 7 11:12:27 2018 -0800",
  "author_date_iso": "2018-03-07T11:12:27-08:00",
  "committer_name": "Ingo Molnar",
  "committer_email": "mingo@kernel.org",
  "committer_date": "Thu Mar 8 06:48:15 2018 +0100",
  "committer_date_iso": "2018-03-08T06:48:15+01:00",
  "files_changed": [
    "arch/x86/Kconfig",
    "arch/x86/entry/vsyscall/vsyscall_64.c",
    "arch/x86/include/asm/pgtable_types.h",
    "tools/testing/selftests/x86/test_vsyscall.c"
  ],
  "files_changed_count": 4,
  "stats": [
    {
      "file": "arch/x86/Kconfig",
      "insertions": 1,
      "deletions": 10
    },
    {
      "file": "arch/x86/entry/vsyscall/vsyscall_64.c",
      "insertions": 3,
      "deletions": 13
    },
    {
      "file": "arch/x86/include/asm/pgtable_types.h",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "tools/testing/selftests/x86/test_vsyscall.c",
      "insertions": 6,
      "deletions": 5
    }
  ],
  "total_insertions": 10,
  "total_deletions": 30,
  "total_changes": 40,
  "parents": [
    "91c5f0de64a226e0d9c558b26ef7c2655ef31cca"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.16",
    "v4.16-rc5",
    "v4.16-rc6",
    "v4.16-rc7",
    "v4.17",
    "v4.17-rc1",
    "v4.17-rc2",
    "v4.17-rc3",
    "v4.17-rc4",
    "v4.17-rc5"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "exploit",
      "Hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/entry/vsyscall/vsyscall_64.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/include/asm/pgtable_types.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "tools/testing/selftests/x86/test_vsyscall.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}