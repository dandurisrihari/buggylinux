{
  "hash": "750a02ab8d3c49ca7d23102be90d3d1db19e2827",
  "hash_short": "750a02ab",
  "subject": "Merge tag 'for-5.8/block-2020-06-01' of git://git.kernel.dk/linux-block",
  "body": "Pull block updates from Jens Axboe:\n \"Core block changes that have been queued up for this release:\n\n   - Remove dead blk-throttle and blk-wbt code (Guoqing)\n\n   - Include pid in blktrace note traces (Jan)\n\n   - Don't spew I/O errors on wouldblock termination (me)\n\n   - Zone append addition (Johannes, Keith, Damien)\n\n   - IO accounting improvements (Konstantin, Christoph)\n\n   - blk-mq hardware map update improvements (Ming)\n\n   - Scheduler dispatch improvement (Salman)\n\n   - Inline block encryption support (Satya)\n\n   - Request map fixes and improvements (Weiping)\n\n   - blk-iocost tweaks (Tejun)\n\n   - Fix for timeout failing with error injection (Keith)\n\n   - Queue re-run fixes (Douglas)\n\n   - CPU hotplug improvements (Christoph)\n\n   - Queue entry/exit improvements (Christoph)\n\n   - Move DMA drain handling to the few drivers that use it (Christoph)\n\n   - Partition handling cleanups (Christoph)\"\n\n* tag 'for-5.8/block-2020-06-01' of git://git.kernel.dk/linux-block: (127 commits)\n  block: mark bio_wouldblock_error() bio with BIO_QUIET\n  blk-wbt: rename __wbt_update_limits to wbt_update_limits\n  blk-wbt: remove wbt_update_limits\n  blk-throttle: remove tg_drain_bios\n  blk-throttle: remove blk_throtl_drain\n  null_blk: force complete for timeout request\n  blk-mq: drain I/O when all CPUs in a hctx are offline\n  blk-mq: add blk_mq_all_tag_iter\n  blk-mq: open code __blk_mq_alloc_request in blk_mq_alloc_request_hctx\n  blk-mq: use BLK_MQ_NO_TAG in more places\n  blk-mq: rename BLK_MQ_TAG_FAIL to BLK_MQ_NO_TAG\n  blk-mq: move more request initialization to blk_mq_rq_ctx_init\n  blk-mq: simplify the blk_mq_get_request calling convention\n  blk-mq: remove the bio argument to ->prepare_request\n  nvme: force complete cancelled requests\n  blk-mq: blk-mq: provide forced completion method\n  block: fix a warning when blkdev.h is included for !CONFIG_BLOCK builds\n  block: blk-crypto-fallback: remove redundant initialization of variable err\n  block: reduce part_stat_lock() scope\n  block: use __this_cpu_add() instead of access by smp_processor_id()\n  ...",
  "full_message": "Merge tag 'for-5.8/block-2020-06-01' of git://git.kernel.dk/linux-block\n\nPull block updates from Jens Axboe:\n \"Core block changes that have been queued up for this release:\n\n   - Remove dead blk-throttle and blk-wbt code (Guoqing)\n\n   - Include pid in blktrace note traces (Jan)\n\n   - Don't spew I/O errors on wouldblock termination (me)\n\n   - Zone append addition (Johannes, Keith, Damien)\n\n   - IO accounting improvements (Konstantin, Christoph)\n\n   - blk-mq hardware map update improvements (Ming)\n\n   - Scheduler dispatch improvement (Salman)\n\n   - Inline block encryption support (Satya)\n\n   - Request map fixes and improvements (Weiping)\n\n   - blk-iocost tweaks (Tejun)\n\n   - Fix for timeout failing with error injection (Keith)\n\n   - Queue re-run fixes (Douglas)\n\n   - CPU hotplug improvements (Christoph)\n\n   - Queue entry/exit improvements (Christoph)\n\n   - Move DMA drain handling to the few drivers that use it (Christoph)\n\n   - Partition handling cleanups (Christoph)\"\n\n* tag 'for-5.8/block-2020-06-01' of git://git.kernel.dk/linux-block: (127 commits)\n  block: mark bio_wouldblock_error() bio with BIO_QUIET\n  blk-wbt: rename __wbt_update_limits to wbt_update_limits\n  blk-wbt: remove wbt_update_limits\n  blk-throttle: remove tg_drain_bios\n  blk-throttle: remove blk_throtl_drain\n  null_blk: force complete for timeout request\n  blk-mq: drain I/O when all CPUs in a hctx are offline\n  blk-mq: add blk_mq_all_tag_iter\n  blk-mq: open code __blk_mq_alloc_request in blk_mq_alloc_request_hctx\n  blk-mq: use BLK_MQ_NO_TAG in more places\n  blk-mq: rename BLK_MQ_TAG_FAIL to BLK_MQ_NO_TAG\n  blk-mq: move more request initialization to blk_mq_rq_ctx_init\n  blk-mq: simplify the blk_mq_get_request calling convention\n  blk-mq: remove the bio argument to ->prepare_request\n  nvme: force complete cancelled requests\n  blk-mq: blk-mq: provide forced completion method\n  block: fix a warning when blkdev.h is included for !CONFIG_BLOCK builds\n  block: blk-crypto-fallback: remove redundant initialization of variable err\n  block: reduce part_stat_lock() scope\n  block: use __this_cpu_add() instead of access by smp_processor_id()\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Tue Jun 2 15:29:19 2020 -0700",
  "author_date_iso": "2020-06-02T15:29:19-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Tue Jun 2 15:29:19 2020 -0700",
  "committer_date_iso": "2020-06-02T15:29:19-07:00",
  "files_changed": [
    "block/blk-core.c",
    "drivers/base/core.c",
    "drivers/block/loop.c",
    "drivers/block/null_blk_main.c",
    "drivers/block/null_blk_zoned.c",
    "drivers/mtd/mtdcore.c",
    "drivers/scsi/scsi_lib.c",
    "drivers/scsi/sd_zbc.c",
    "fs/block_dev.c",
    "fs/ext4/super.c",
    "fs/fs-writeback.c",
    "fs/isofs/inode.c",
    "fs/super.c",
    "fs/zonefs/super.c",
    "include/linux/fs.h"
  ],
  "files_changed_count": 15,
  "stats": [
    {
      "file": "Documentation/block/index.rst",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "Documentation/block/inline-encryption.rst",
      "insertions": 263,
      "deletions": 0
    },
    {
      "file": "block/Kconfig",
      "insertions": 18,
      "deletions": 0
    },
    {
      "file": "block/Makefile",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "block/bfq-iosched.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "block/bio-integrity.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "block/bio.c",
      "insertions": 106,
      "deletions": 78
    },
    {
      "file": "block/blk-cgroup.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "block/blk-core.c",
      "insertions": 219,
      "deletions": 106
    },
    {
      "file": "block/blk-crypto-fallback.c",
      "insertions": 657,
      "deletions": 0
    },
    {
      "file": "block/blk-crypto-internal.h",
      "insertions": 201,
      "deletions": 0
    },
    {
      "file": "block/blk-crypto.c",
      "insertions": 404,
      "deletions": 0
    },
    {
      "file": "block/blk-exec.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "block/blk-flush.c",
      "insertions": 2,
      "deletions": 24
    },
    {
      "file": "block/blk-integrity.c",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "block/blk-iocost.c",
      "insertions": 65,
      "deletions": 21
    },
    {
      "file": "block/blk-map.c",
      "insertions": 5,
      "deletions": 10
    },
    {
      "file": "block/blk-merge.c",
      "insertions": 25,
      "deletions": 51
    },
    {
      "file": "block/blk-mq-debugfs.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "block/blk-mq-sched.c",
      "insertions": 69,
      "deletions": 13
    },
    {
      "file": "block/blk-mq-tag.c",
      "insertions": 46,
      "deletions": 24
    },
    {
      "file": "block/blk-mq-tag.h",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "block/blk-mq.c",
      "insertions": 295,
      "deletions": 112
    },
    {
      "file": "block/blk-mq.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "block/blk-settings.c",
      "insertions": 31,
      "deletions": 37
    },
    {
      "file": "block/blk-sysfs.c",
      "insertions": 13,
      "deletions": 0
    },
    {
      "file": "block/blk-throttle.c",
      "insertions": 0,
      "deletions": 63
    },
    {
      "file": "block/blk-wbt.c",
      "insertions": 4,
      "deletions": 12
    },
    {
      "file": "block/blk-wbt.h",
      "insertions": 0,
      "deletions": 4
    },
    {
      "file": "block/blk-zoned.c",
      "insertions": 22,
      "deletions": 1
    },
    {
      "file": "block/blk.h",
      "insertions": 19,
      "deletions": 69
    },
    {
      "file": "block/bounce.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "block/genhd.c",
      "insertions": 63,
      "deletions": 70
    },
    {
      "file": "block/ioctl.c",
      "insertions": 28,
      "deletions": 126
    },
    {
      "file": "block/keyslot-manager.c",
      "insertions": 397,
      "deletions": 0
    },
    {
      "file": "block/kyber-iosched.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "block/mq-deadline.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "block/partitions/core.c",
      "insertions": 158,
      "deletions": 29
    },
    {
      "file": "drivers/ata/libata-scsi.c",
      "insertions": 11,
      "deletions": 19
    },
    {
      "file": "drivers/base/core.c",
      "insertions": 2,
      "deletions": 35
    },
    {
      "file": "drivers/block/aoe/aoeblk.c",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "drivers/block/drbd/drbd_req.c",
      "insertions": 4,
      "deletions": 23
    },
    {
      "file": "drivers/block/loop.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/block/null_blk_main.c",
      "insertions": 27,
      "deletions": 1
    },
    {
      "file": "drivers/block/null_blk_zoned.c",
      "insertions": 29,
      "deletions": 8
    },
    {
      "file": "drivers/block/paride/pcd.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/block/rsxx/dev.c",
      "insertions": 2,
      "deletions": 17
    },
    {
      "file": "drivers/block/zram/zram_drv.c",
      "insertions": 10,
      "deletions": 14
    },
    {
      "file": "drivers/cdrom/cdrom.c",
      "insertions": 51,
      "deletions": 34
    },
    {
      "file": "drivers/cdrom/gdrom.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/ide/ide-cd.c",
      "insertions": 8,
      "deletions": 9
    },
    {
      "file": "drivers/ide/ide-io.c",
      "insertions": 5,
      "deletions": 2
    },
    {
      "file": "drivers/lightnvm/pblk-cache.c",
      "insertions": 3,
      "deletions": 5
    },
    {
      "file": "drivers/lightnvm/pblk-read.c",
      "insertions": 4,
      "deletions": 7
    },
    {
      "file": "drivers/md/bcache/request.c",
      "insertions": 4,
      "deletions": 15
    },
    {
      "file": "drivers/md/dm-integrity.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/md/dm-rq.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/md/dm-table.c",
      "insertions": 0,
      "deletions": 17
    },
    {
      "file": "drivers/md/dm-zoned-metadata.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "drivers/md/dm.c",
      "insertions": 17,
      "deletions": 7
    },
    {
      "file": "drivers/md/raid5-ppl.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/mtd/mtdcore.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "drivers/nvdimm/blk.c",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "drivers/nvdimm/btt.c",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "drivers/nvdimm/nd.h",
      "insertions": 0,
      "deletions": 19
    },
    {
      "file": "drivers/nvdimm/pmem.c",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "drivers/nvme/host/core.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/nvme/target/io-cmd-bdev.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/s390/block/dasd_genhd.c",
      "insertions": 4,
      "deletions": 16
    },
    {
      "file": "drivers/scsi/scsi_lib.c",
      "insertions": 55,
      "deletions": 32
    },
    {
      "file": "drivers/scsi/sd.c",
      "insertions": 15,
      "deletions": 1
    },
    {
      "file": "drivers/scsi/sd.h",
      "insertions": 38,
      "deletions": 5
    },
    {
      "file": "drivers/scsi/sd_zbc.c",
      "insertions": 364,
      "deletions": 35
    },
    {
      "file": "drivers/scsi/sr.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "fs/block_dev.c",
      "insertions": 4,
      "deletions": 21
    },
    {
      "file": "fs/direct-io.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/ext4/fsync.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/ext4/ialloc.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/ext4/super.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/fat/file.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/fs-writeback.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/hfs/mdb.c",
      "insertions": 19,
      "deletions": 13
    },
    {
      "file": "fs/hfsplus/inode.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/hfsplus/super.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/hfsplus/wrapper.c",
      "insertions": 18,
      "deletions": 15
    },
    {
      "file": "fs/iomap/direct-io.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/isofs/inode.c",
      "insertions": 26,
      "deletions": 28
    },
    {
      "file": "fs/jbd2/checkpoint.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/jbd2/commit.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "fs/jbd2/recovery.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/libfs.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/nilfs2/the_nilfs.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/ocfs2/file.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/reiserfs/file.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/super.c",
      "insertions": 1,
      "deletions": 3
    },
    {
      "file": "fs/udf/lowlevel.c",
      "insertions": 13,
      "deletions": 16
    },
    {
      "file": "fs/xfs/xfs_super.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/zonefs/super.c",
      "insertions": 73,
      "deletions": 9
    },
    {
      "file": "include/linux/backing-dev-defs.h",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "include/linux/backing-dev.h",
      "insertions": 2,
      "deletions": 6
    },
    {
      "file": "include/linux/bio.h",
      "insertions": 4,
      "deletions": 9
    },
    {
      "file": "include/linux/blk-cgroup.h",
      "insertions": 39,
      "deletions": 14
    },
    {
      "file": "include/linux/blk-crypto.h",
      "insertions": 123,
      "deletions": 0
    },
    {
      "file": "include/linux/blk-mq.h",
      "insertions": 14,
      "deletions": 0
    },
    {
      "file": "include/linux/blk_types.h",
      "insertions": 21,
      "deletions": 3
    },
    {
      "file": "include/linux/blkdev.h",
      "insertions": 106,
      "deletions": 16
    },
    {
      "file": "include/linux/bvec.h",
      "insertions": 11,
      "deletions": 2
    },
    {
      "file": "include/linux/cdrom.h",
      "insertions": 6,
      "deletions": 1
    },
    {
      "file": "include/linux/cpuhotplug.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "include/linux/device.h",
      "insertions": 0,
      "deletions": 4
    },
    {
      "file": "include/linux/elevator.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "include/linux/fs.h",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "include/linux/genhd.h",
      "insertions": 23,
      "deletions": 17
    },
    {
      "file": "include/linux/keyslot-manager.h",
      "insertions": 106,
      "deletions": 0
    },
    {
      "file": "include/linux/libata.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "include/linux/part_stat.h",
      "insertions": 14,
      "deletions": 47
    },
    {
      "file": "include/scsi/scsi_cmnd.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "include/scsi/scsi_device.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "include/scsi/scsi_host.h",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "kernel/trace/blktrace.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "mm/backing-dev.c",
      "insertions": 5,
      "deletions": 16
    },
    {
      "file": "tools/cgroup/iocost_monitor.py",
      "insertions": 26,
      "deletions": 22
    }
  ],
  "total_insertions": 4510,
  "total_deletions": 1489,
  "total_changes": 5999,
  "parents": [
    "1966391fa576e1fb2701be8bcca197d8f72737b7",
    "abb30460bda232f304f642510adc8c6576ea51ea"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/base/core.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/block/null_blk_zoned.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/block/loop.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/scsi/scsi_lib.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "block/blk-core.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/block/null_blk_main.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/scsi/sd_zbc.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/mtd/mtdcore.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/zonefs/super.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/ext4/super.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/isofs/inode.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/fs-writeback.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/block_dev.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/super.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/fs.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}