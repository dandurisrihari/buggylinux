{
  "hash": "e367925e80b5a0a7d8db5b629c767f288f0aed4b",
  "hash_short": "e367925e",
  "subject": "drm/i915/guc: Skip suspend/resume GuC action on platforms w/o GuC submission",
  "body": "On some platforms (e.g. KBL) that do not support GuC submission, but\nthe user enabled the GuC communication (e.g for HuC authentication)\ncalling the GuC EXIT_S_STATE action results in lose of ability to\nenter RC6. We can remove the GuC suspend/resume entirely as we do\nnot need to save the GuC submission status.\n\nAdd intel_guc_submission_is_enabled() function to determine if\nGuC submission is active.\n\nv2: Do not suspend/resume the GuC on platforms that do not support\n    Guc Submission.\nv3: Fix typo, move suspend logic to remove goto.\nv4: Use intel_guc_submission_is_enabled() to check GuC submission\n    status.\nv5: No need to look at engine to determine if submission is enabled.\n    Squash fix + intel_guc_submission_is_enabled() patch into one.\nv6: Move resume check into intel_guc_resume() for symmetry.\n    Fix commit Fixes tag.\n\nReported-by: KiteStramuort <kitestramuort@autistici.org>\nReported-by: S. Zharkoff <s.zharkoff@gmail.com>\nBugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=111594\nBugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=111623\nFixes: ffd5ce22faa4 (\"drm/i915/guc: Updates for GuC 32.0.3 firmware\")\nCc: Michal Wajdeczko <michal.wajdeczko@intel.com>\nCc: Daniele Ceralo Spurio <daniele.ceraolospurio@intel.com>\nCc: Stuart Summers <stuart.summers@intel.com>\nCc: Chris Wilson <chris@chris-wilson.co.uk>\nTested-by: Tomas Janousek <tomi@nomi.cz>\nSigned-off-by: Don Hiatt <don.hiatt@intel.com>\nReviewed-by: Chris Wilson <chris@chris-wilson.co.uk>\nSigned-off-by: Chris Wilson <chris@chris-wilson.co.uk>\nLink: https://patchwork.freedesktop.org/patch/msgid/20191115231538.1249-1-don.hiatt@intel.com\n(cherry picked from commit 82e0c5bbd6eb1d274b5a3e519ff0ab91f1f8e537)\nSigned-off-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>",
  "full_message": "drm/i915/guc: Skip suspend/resume GuC action on platforms w/o GuC submission\n\nOn some platforms (e.g. KBL) that do not support GuC submission, but\nthe user enabled the GuC communication (e.g for HuC authentication)\ncalling the GuC EXIT_S_STATE action results in lose of ability to\nenter RC6. We can remove the GuC suspend/resume entirely as we do\nnot need to save the GuC submission status.\n\nAdd intel_guc_submission_is_enabled() function to determine if\nGuC submission is active.\n\nv2: Do not suspend/resume the GuC on platforms that do not support\n    Guc Submission.\nv3: Fix typo, move suspend logic to remove goto.\nv4: Use intel_guc_submission_is_enabled() to check GuC submission\n    status.\nv5: No need to look at engine to determine if submission is enabled.\n    Squash fix + intel_guc_submission_is_enabled() patch into one.\nv6: Move resume check into intel_guc_resume() for symmetry.\n    Fix commit Fixes tag.\n\nReported-by: KiteStramuort <kitestramuort@autistici.org>\nReported-by: S. Zharkoff <s.zharkoff@gmail.com>\nBugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=111594\nBugzilla: https://bugs.freedesktop.org/show_bug.cgi?id=111623\nFixes: ffd5ce22faa4 (\"drm/i915/guc: Updates for GuC 32.0.3 firmware\")\nCc: Michal Wajdeczko <michal.wajdeczko@intel.com>\nCc: Daniele Ceralo Spurio <daniele.ceraolospurio@intel.com>\nCc: Stuart Summers <stuart.summers@intel.com>\nCc: Chris Wilson <chris@chris-wilson.co.uk>\nTested-by: Tomas Janousek <tomi@nomi.cz>\nSigned-off-by: Don Hiatt <don.hiatt@intel.com>\nReviewed-by: Chris Wilson <chris@chris-wilson.co.uk>\nSigned-off-by: Chris Wilson <chris@chris-wilson.co.uk>\nLink: https://patchwork.freedesktop.org/patch/msgid/20191115231538.1249-1-don.hiatt@intel.com\n(cherry picked from commit 82e0c5bbd6eb1d274b5a3e519ff0ab91f1f8e537)\nSigned-off-by: Joonas Lahtinen <joonas.lahtinen@linux.intel.com>",
  "author_name": "Don Hiatt",
  "author_email": "don.hiatt@intel.com",
  "author_date": "Fri Nov 15 15:15:38 2019 -0800",
  "author_date_iso": "2019-11-15T15:15:38-08:00",
  "committer_name": "Joonas Lahtinen",
  "committer_email": "joonas.lahtinen@linux.intel.com",
  "committer_date": "Mon Nov 18 16:36:44 2019 +0200",
  "committer_date_iso": "2019-11-18T16:36:44+02:00",
  "files_changed": [
    "drivers/gpu/drm/i915/gt/uc/intel_guc.c",
    "drivers/gpu/drm/i915/i915_drv.h"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_guc.c",
      "insertions": 15,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/i915/i915_drv.h",
      "insertions": 6,
      "deletions": 0
    }
  ],
  "total_insertions": 21,
  "total_deletions": 0,
  "total_changes": 21,
  "parents": [
    "a46bfdc83fee0a83aae54390729df12abce57f45"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.5",
    "v5.5-rc1",
    "v5.5-rc2",
    "v5.5-rc3",
    "v5.5-rc4",
    "v5.5-rc5",
    "v5.5-rc6",
    "v5.5-rc7",
    "v5.6",
    "v5.6-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpu/drm/i915/gt/uc/intel_guc.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/i915_drv.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}