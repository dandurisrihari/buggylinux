{
  "hash": "a8da474ec18f4c4c39f83202d64d73a23b755c1d",
  "hash_short": "a8da474e",
  "subject": "selftests/powerpc: Add script to test HMI functionality",
  "body": "HMIs (Hypervisor Management|Maintenance Interrupts) are a class of interrupt\non POWER systems.\n\nHMI support has traditionally been exceptionally difficult to test, however\nSkiboot ships a tool that, with the correct magic numbers, will inject them.\n\nThis, therefore, is a first pass at a script to inject HMIs and monitor\nLinux's response. It injects an HMI on each core on every chip in turn\nIt then watches dmesg to see if it's acknowledged by Linux.\n\nOn a Tuletta, I observed that we see 8 (or sometimes 9 or more) events per\ninjection, regardless of SMT setting, so we wait for 8 before progressing.\n\nIt sits in a new scripts/ directory in selftests/powerpc, because it's not\ndesigned to be run as part of the regular make selftests process. In\nparticular, it is quite possibly going to end up garding lots of your CPUs,\nso it should only be run if you know how to undo that.\n\nCC: Mahesh J Salgaonkar <mahesh.salgaonkar@in.ibm.com>\nSigned-off-by: Daniel Axtens <dja@axtens.net>\nSigned-off-by: Michael Ellerman <mpe@ellerman.id.au>",
  "full_message": "selftests/powerpc: Add script to test HMI functionality\n\nHMIs (Hypervisor Management|Maintenance Interrupts) are a class of interrupt\non POWER systems.\n\nHMI support has traditionally been exceptionally difficult to test, however\nSkiboot ships a tool that, with the correct magic numbers, will inject them.\n\nThis, therefore, is a first pass at a script to inject HMIs and monitor\nLinux's response. It injects an HMI on each core on every chip in turn\nIt then watches dmesg to see if it's acknowledged by Linux.\n\nOn a Tuletta, I observed that we see 8 (or sometimes 9 or more) events per\ninjection, regardless of SMT setting, so we wait for 8 before progressing.\n\nIt sits in a new scripts/ directory in selftests/powerpc, because it's not\ndesigned to be run as part of the regular make selftests process. In\nparticular, it is quite possibly going to end up garding lots of your CPUs,\nso it should only be run if you know how to undo that.\n\nCC: Mahesh J Salgaonkar <mahesh.salgaonkar@in.ibm.com>\nSigned-off-by: Daniel Axtens <dja@axtens.net>\nSigned-off-by: Michael Ellerman <mpe@ellerman.id.au>",
  "author_name": "Daniel Axtens",
  "author_email": "dja@axtens.net",
  "author_date": "Mon Dec 7 10:50:51 2015 +1100",
  "author_date_iso": "2015-12-07T10:50:51+11:00",
  "committer_name": "Michael Ellerman",
  "committer_email": "mpe@ellerman.id.au",
  "committer_date": "Thu Dec 17 10:46:43 2015 +1100",
  "committer_date_iso": "2015-12-17T10:46:43+11:00",
  "files_changed": [
    "tools/testing/selftests/powerpc/scripts/hmi.sh"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "tools/testing/selftests/powerpc/scripts/hmi.sh",
      "insertions": 89,
      "deletions": 0
    }
  ],
  "total_insertions": 89,
  "total_deletions": 0,
  "total_changes": 89,
  "parents": [
    "51c21e72eb99d1136614135d633baae269893778"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "inject"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "tools/testing/selftests/powerpc/scripts/hmi.sh",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}