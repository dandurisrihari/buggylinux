{
  "hash": "983e20cfdcb6e08b3560071a147169f3a1be4391",
  "hash_short": "983e20cf",
  "subject": "docs: kernel_feat.py: fix build error for missing files",
  "body": "If the directory passed to the '.. kernel-feat::' directive does not\nexist or the get_feat.pl script does not find any files to extract\nfeatures from, Sphinx will report the following error:\n\n    Sphinx parallel build error:\n    UnboundLocalError: local variable 'fname' referenced before assignment\n    make[2]: *** [Documentation/Makefile:102: htmldocs] Error 2\n\nThis is due to how I changed the script in c48a7c44a1d0 (\"docs:\nkernel_feat.py: fix potential command injection\"). Before that, the\nfilename passed along to self.nestedParse() in this case was weirdly\njust the whole get_feat.pl invocation.\n\nWe can fix it by doing what kernel_abi.py does -- just pass\nself.arguments[0] as 'fname'.\n\nFixes: c48a7c44a1d0 (\"docs: kernel_feat.py: fix potential command injection\")\nCc: Justin Forbes <jforbes@fedoraproject.org>\nCc: Salvatore Bonaccorso <carnil@debian.org>\nCc: Jani Nikula <jani.nikula@intel.com>\nCc: Mauro Carvalho Chehab <mchehab@kernel.org>\nCc: stable@vger.kernel.org\nSigned-off-by: Vegard Nossum <vegard.nossum@oracle.com>\nLink: https://lore.kernel.org/r/20240205175133.774271-2-vegard.nossum@oracle.com\nSigned-off-by: Jonathan Corbet <corbet@lwn.net>",
  "full_message": "docs: kernel_feat.py: fix build error for missing files\n\nIf the directory passed to the '.. kernel-feat::' directive does not\nexist or the get_feat.pl script does not find any files to extract\nfeatures from, Sphinx will report the following error:\n\n    Sphinx parallel build error:\n    UnboundLocalError: local variable 'fname' referenced before assignment\n    make[2]: *** [Documentation/Makefile:102: htmldocs] Error 2\n\nThis is due to how I changed the script in c48a7c44a1d0 (\"docs:\nkernel_feat.py: fix potential command injection\"). Before that, the\nfilename passed along to self.nestedParse() in this case was weirdly\njust the whole get_feat.pl invocation.\n\nWe can fix it by doing what kernel_abi.py does -- just pass\nself.arguments[0] as 'fname'.\n\nFixes: c48a7c44a1d0 (\"docs: kernel_feat.py: fix potential command injection\")\nCc: Justin Forbes <jforbes@fedoraproject.org>\nCc: Salvatore Bonaccorso <carnil@debian.org>\nCc: Jani Nikula <jani.nikula@intel.com>\nCc: Mauro Carvalho Chehab <mchehab@kernel.org>\nCc: stable@vger.kernel.org\nSigned-off-by: Vegard Nossum <vegard.nossum@oracle.com>\nLink: https://lore.kernel.org/r/20240205175133.774271-2-vegard.nossum@oracle.com\nSigned-off-by: Jonathan Corbet <corbet@lwn.net>",
  "author_name": "Vegard Nossum",
  "author_email": "vegard.nossum@oracle.com",
  "author_date": "Mon Feb 5 18:51:26 2024 +0100",
  "author_date_iso": "2024-02-05T18:51:26+01:00",
  "committer_name": "Jonathan Corbet",
  "committer_email": "corbet@lwn.net",
  "committer_date": "Wed Feb 21 13:44:21 2024 -0700",
  "committer_date_iso": "2024-02-21T13:44:21-07:00",
  "files_changed": [
    "Documentation/sphinx/kernel_feat.py"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "Documentation/sphinx/kernel_feat.py",
      "insertions": 1,
      "deletions": 1
    }
  ],
  "total_insertions": 1,
  "total_deletions": 1,
  "total_changes": 2,
  "parents": [
    "bf667efc5672df14fe8c3686c2598620aaf0cc93"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "Documentation/sphinx/kernel_feat.py",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}