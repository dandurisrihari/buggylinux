Files changed: 18
Insertions: 50470
Deletions: 29875
Total changes: 80345

File-specific changes:
Documentation/ABI/testing/sysfs-driver-intel-i915-hwmon: +75 -0
Documentation/accel/index.rst: +17 -0
Documentation/accel/introduction.rst: +110 -0
Documentation/admin-guide/devices.txt: +5 -0
Documentation/admin-guide/kernel-parameters.txt: +9 -6
Documentation/devicetree/bindings/display/allwinner,sun6i-a31-mipi-dsi.yaml: +21 -9
Documentation/devicetree/bindings/display/bridge/renesas,dsi.yaml: +182 -0
Documentation/devicetree/bindings/display/mediatek/mediatek,dpi.yaml: +1 -0
Documentation/devicetree/bindings/display/msm/dpu-common.yaml: +52 -0
Documentation/devicetree/bindings/display/msm/dpu-msm8998.yaml: +0 -223
Documentation/devicetree/bindings/display/msm/dpu-qcm2290.yaml: +0 -222
Documentation/devicetree/bindings/display/msm/dpu-sc7180.yaml: +0 -235
Documentation/devicetree/bindings/display/msm/dpu-sc7280.yaml: +0 -239
Documentation/devicetree/bindings/display/msm/dpu-sdm845.yaml: +0 -217
Documentation/devicetree/bindings/display/msm/dsi-controller-main.yaml: +4 -1
Documentation/devicetree/bindings/display/msm/dsi-phy-14nm.yaml: +1 -0
Documentation/devicetree/bindings/display/msm/mdp5.txt: +1 -29
Documentation/devicetree/bindings/display/msm/mdss-common.yaml: +83 -0
Documentation/devicetree/bindings/display/msm/qcom,mdss.yaml: +196 -0
Documentation/devicetree/bindings/display/msm/qcom,msm8998-dpu.yaml: +95 -0
Documentation/devicetree/bindings/display/msm/qcom,msm8998-mdss.yaml: +268 -0
Documentation/devicetree/bindings/display/msm/qcom,qcm2290-dpu.yaml: +84 -0
Documentation/devicetree/bindings/display/msm/qcom,qcm2290-mdss.yaml: +198 -0
Documentation/devicetree/bindings/display/msm/qcom,sc7180-dpu.yaml: +95 -0
Documentation/devicetree/bindings/display/msm/qcom,sc7180-mdss.yaml: +304 -0
Documentation/devicetree/bindings/display/msm/qcom,sc7280-dpu.yaml: +98 -0
Documentation/devicetree/bindings/display/msm/qcom,sc7280-mdss.yaml: +422 -0
Documentation/devicetree/bindings/display/msm/qcom,sdm845-dpu.yaml: +90 -0
Documentation/devicetree/bindings/display/msm/qcom,sdm845-mdss.yaml: +270 -0
Documentation/devicetree/bindings/display/msm/qcom,sm6115-dpu.yaml: +94 -0
Documentation/devicetree/bindings/display/msm/qcom,sm6115-mdss.yaml: +182 -0
Documentation/devicetree/bindings/display/msm/qcom,sm8250-dpu.yaml: +92 -0
Documentation/devicetree/bindings/display/msm/qcom,sm8250-mdss.yaml: +330 -0
Documentation/devicetree/bindings/display/panel/jadard,jd9365da-h3.yaml: +70 -0
Documentation/devicetree/bindings/display/panel/newvision,nv3051d.yaml: +63 -0
Documentation/devicetree/bindings/display/xlnx/xlnx,zynqmp-dpsub.yaml: +67 -0
Documentation/devicetree/bindings/vendor-prefixes.yaml: +6 -0
Documentation/driver-api/dma-buf.rst: +6 -0
Documentation/fb/modedb.rst: +5 -0
Documentation/gpu/amdgpu/amdgpu-glossary.rst: +23 -0
Documentation/gpu/amdgpu/driver-core.rst: +2 -2
Documentation/gpu/amdgpu/index.rst: +1 -1
Documentation/gpu/drm-kms-helpers.rst: +3 -0
Documentation/gpu/drm-usage-stats.rst: +0 -1
Documentation/gpu/i915.rst: +1 -1
Documentation/gpu/todo.rst: +0 -11
Documentation/subsystem-apis.rst: +1 -0
MAINTAINERS: +20 -1
arch/arm64/boot/dts/xilinx/zynqmp-zcu106-revA.dts: +20 -0
arch/arm64/boot/dts/xilinx/zynqmp.dtsi: +24 -0
drivers/Kconfig: +2 -0
drivers/accel/Kconfig: +24 -0
drivers/accel/drm_accel.c: +323 -0
drivers/clk/bcm/clk-raspberrypi.c: +0 -19
drivers/dma-buf/dma-buf.c: +192 -33
drivers/dma-buf/heaps/cma_heap.c: +3 -0
drivers/dma-buf/heaps/system_heap.c: +3 -0
drivers/dma-buf/udmabuf.c: +3 -0
drivers/firmware/raspberrypi.c: +32 -6
drivers/gpu/drm/Kconfig: +1 -62
drivers/gpu/drm/Makefile: +81 -32
drivers/gpu/drm/amd/amdgpu/Kconfig: +29 -0
drivers/gpu/drm/amd/amdgpu/Makefile: +3 -2
drivers/gpu/drm/amd/amdgpu/amdgpu.h: +6 -2
drivers/gpu/drm/amd/amdgpu/amdgpu_acpi.c: +1 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd.c: +3 -5
drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd.h: +1 -2
drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gfx_v9.c: +2 -2
drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gpuvm.c: +13 -65
drivers/gpu/drm/amd/amdgpu/amdgpu_atomfirmware.c: +86 -24
drivers/gpu/drm/amd/amdgpu/amdgpu_bios.c: +1 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_connectors.c: +0 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_cs.c: +23 -20
drivers/gpu/drm/amd/amdgpu/amdgpu_cs.h: +2 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_debugfs.c: +1 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_device.c: +59 -138
drivers/gpu/drm/amd/amdgpu/amdgpu_discovery.c: +34 -5
drivers/gpu/drm/amd/amdgpu/amdgpu_display.c: +38 -4
drivers/gpu/drm/amd/amdgpu/amdgpu_display.h: +1 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_dma_buf.c: +3 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_drv.c: +11 -10
drivers/gpu/drm/amd/amdgpu/amdgpu_eeprom.c: +3 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_fence.c: +54 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_fru_eeprom.c: +108 -107
drivers/gpu/drm/amd/amdgpu/amdgpu_gem.c: +6 -15
drivers/gpu/drm/amd/amdgpu/amdgpu_gfx.c: +7 -3
drivers/gpu/drm/amd/amdgpu/amdgpu_gfx.h: +4 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_gmc.c: +2 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_gtt_mgr.c: +1 -1
drivers/gpu/drm/amd/amdgpu/{amdgpu_mn.c => amdgpu_hmm.c}: +57 -44
drivers/gpu/drm/amd/amdgpu/{amdgpu_mn.h => amdgpu_hmm.h}: +7 -8
drivers/gpu/drm/amd/amdgpu/amdgpu_ib.c: +3 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_ids.c: +27 -29
drivers/gpu/drm/amd/amdgpu/amdgpu_ids.h: +1 -2
drivers/gpu/drm/amd/amdgpu/amdgpu_irq.c: +1 -57
drivers/gpu/drm/amd/amdgpu/amdgpu_job.c: +33 -47
drivers/gpu/drm/amd/amdgpu/amdgpu_job.h: +9 -8
drivers/gpu/drm/amd/amdgpu/amdgpu_jpeg.c: +21 -3
drivers/gpu/drm/amd/amdgpu/amdgpu_jpeg.h: +1 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_kms.c: +6 -5
drivers/gpu/drm/amd/amdgpu/amdgpu_mes.h: +0 -2
drivers/gpu/drm/amd/amdgpu/amdgpu_mode.h: +0 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_object.c: +3 -6
drivers/gpu/drm/amd/amdgpu/amdgpu_psp.c: +56 -64
drivers/gpu/drm/amd/amdgpu/amdgpu_psp.h: +8 -6
drivers/gpu/drm/amd/amdgpu/amdgpu_psp_ta.c: +154 -63
drivers/gpu/drm/amd/amdgpu/amdgpu_psp_ta.h: +5 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_ras.c: +13 -30
drivers/gpu/drm/amd/amdgpu/amdgpu_ras_eeprom.c: +60 -12
drivers/gpu/drm/amd/amdgpu/amdgpu_res_cursor.h: +2 -2
drivers/gpu/drm/amd/amdgpu/amdgpu_ring.c: +12 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_ring.h: +14 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_ring_mux.c: +514 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_ring_mux.h: +103 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_securedisplay.c: +4 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_sync.c: +42 -14
drivers/gpu/drm/amd/amdgpu/amdgpu_sync.h: +2 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_trace.h: +1 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c: +91 -58
drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.h: +6 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_ucode.h: +1 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_umc.c: +73 -14
drivers/gpu/drm/amd/amdgpu/amdgpu_umc.h: +3 -6
drivers/gpu/drm/amd/amdgpu/amdgpu_uvd.c: +7 -8
drivers/gpu/drm/amd/amdgpu/amdgpu_vce.c: +8 -5
drivers/gpu/drm/amd/amdgpu/amdgpu_vcn.c: +30 -9
drivers/gpu/drm/amd/amdgpu/amdgpu_vcn.h: +1 -0
drivers/gpu/drm/amd/amdgpu/amdgpu_virt.c: +39 -19
drivers/gpu/drm/amd/amdgpu/amdgpu_virt.h: +4 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_vkms.c: +5 -1
drivers/gpu/drm/amd/amdgpu/amdgpu_vm.c: +33 -10
drivers/gpu/drm/amd/amdgpu/amdgpu_vm_sdma.c: +39 -32
drivers/gpu/drm/amd/amdgpu/amdgpu_vram_mgr.c: +4 -4
drivers/gpu/drm/amd/amdgpu/amdgpu_xgmi.c: +0 -2
drivers/gpu/drm/amd/amdgpu/atombios_encoders.c: +5 -2
drivers/gpu/drm/amd/amdgpu/dce_v10_0.c: +14 -2
drivers/gpu/drm/amd/amdgpu/dce_v11_0.c: +14 -2
drivers/gpu/drm/amd/amdgpu/dce_v6_0.c: +15 -1
drivers/gpu/drm/amd/amdgpu/dce_v8_0.c: +15 -2
drivers/gpu/drm/amd/amdgpu/gfx_v10_0.c: +6 -4
drivers/gpu/drm/amd/amdgpu/gfx_v11_0.c: +53 -13
drivers/gpu/drm/amd/amdgpu/gfx_v8_0.c: +2 -0
drivers/gpu/drm/amd/amdgpu/gfx_v9_0.c: +284 -46
drivers/gpu/drm/amd/amdgpu/gfxhub_v2_1.c: +3 -0
drivers/gpu/drm/amd/amdgpu/gfxhub_v3_0_3.c: +3 -12
drivers/gpu/drm/amd/amdgpu/gmc_v10_0.c: +11 -8
drivers/gpu/drm/amd/amdgpu/gmc_v11_0.c: +12 -1
drivers/gpu/drm/amd/amdgpu/gmc_v9_0.c: +71 -8
drivers/gpu/drm/amd/amdgpu/jpeg_v2_5.c: +1 -12
drivers/gpu/drm/amd/amdgpu/jpeg_v4_0.c: +81 -0
drivers/gpu/drm/amd/amdgpu/jpeg_v4_0.h: +7 -0
drivers/gpu/drm/amd/amdgpu/mes_v10_1.c: +4 -4
drivers/gpu/drm/amd/amdgpu/mes_v11_0.c: +8 -5
drivers/gpu/drm/amd/amdgpu/mmhub_v2_0.c: +1 -1
drivers/gpu/drm/amd/amdgpu/mmhub_v2_3.c: +1 -1
drivers/gpu/drm/amd/amdgpu/mmhub_v3_0.c: +1 -1
drivers/gpu/drm/amd/amdgpu/mmhub_v3_0_1.c: +1 -1
drivers/gpu/drm/amd/amdgpu/mmhub_v3_0_2.c: +1 -1
drivers/gpu/drm/amd/amdgpu/nv.c: +14 -14
drivers/gpu/drm/amd/amdgpu/psp_v10_0.c: +0 -27
drivers/gpu/drm/amd/amdgpu/psp_v11_0.c: +0 -27
drivers/gpu/drm/amd/amdgpu/psp_v11_0_8.c: +0 -27
drivers/gpu/drm/amd/amdgpu/psp_v12_0.c: +2 -29
drivers/gpu/drm/amd/amdgpu/psp_v13_0.c: +3 -27
drivers/gpu/drm/amd/amdgpu/psp_v13_0_4.c: +0 -27
drivers/gpu/drm/amd/amdgpu/psp_v3_1.c: +0 -27
drivers/gpu/drm/amd/amdgpu/sdma_v6_0.c: +4 -0
drivers/gpu/drm/amd/amdgpu/si_dma.c: +0 -2
drivers/gpu/drm/amd/amdgpu/soc15.c: +12 -12
drivers/gpu/drm/amd/amdgpu/soc15d.h: +2 -0
drivers/gpu/drm/amd/amdgpu/soc21.c: +47 -10
drivers/gpu/drm/amd/amdgpu/umc_v6_7.c: +3 -4
drivers/gpu/drm/amd/amdgpu/umc_v6_7.h: +3 -1
drivers/gpu/drm/amd/amdgpu/umc_v8_10.c: +10 -0
drivers/gpu/drm/amd/amdgpu/umc_v8_10.h: +4 -0
drivers/gpu/drm/amd/amdgpu/uvd_v6_0.c: +4 -4
drivers/gpu/drm/amd/amdgpu/uvd_v7_0.c: +6 -6
drivers/gpu/drm/amd/amdgpu/vcn_v2_5.c: +30 -12
drivers/gpu/drm/amd/amdgpu/vcn_v4_0.c: +94 -0
drivers/gpu/drm/amd/amdgpu/vcn_v4_0.h: +6 -0
drivers/gpu/drm/amd/amdgpu/vega20_ih.c: +3 -3
drivers/gpu/drm/amd/amdgpu/vi.c: +4 -2
drivers/gpu/drm/amd/amdkfd/kfd_crat.c: +92 -285
drivers/gpu/drm/amd/amdkfd/kfd_crat.h: +13 -23
drivers/gpu/drm/amd/amdkfd/kfd_device.c: +12 -11
drivers/gpu/drm/amd/amdkfd/kfd_iommu.c: +15 -14
drivers/gpu/drm/amd/amdkfd/kfd_migrate.c: +10 -16
drivers/gpu/drm/amd/amdkfd/kfd_pm4_headers_diq.h: +0 -291
drivers/gpu/drm/amd/amdkfd/kfd_priv.h: +1 -3
drivers/gpu/drm/amd/amdkfd/kfd_process.c: +6 -6
drivers/gpu/drm/amd/amdkfd/kfd_svm.c: +13 -14
drivers/gpu/drm/amd/amdkfd/kfd_topology.c: +299 -72
drivers/gpu/drm/amd/amdkfd/kfd_topology.h: +4 -2
drivers/gpu/drm/amd/display/Kconfig: +2 -1
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c: +240 -142
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.h: +14 -10
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_crc.c: +77 -80
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_crc.h: +11 -1
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_crtc.c: +3 -0
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_debugfs.c: +57 -23
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_hdcp.c: +1 -1
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_helpers.c: +12 -41
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_irq_params.h: +1 -1
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_mst_types.c: +9 -2
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_plane.c: +4 -0
drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_trace.h: +64 -0
drivers/gpu/drm/amd/display/amdgpu_dm/dc_fpu.c: +6 -0
drivers/gpu/drm/amd/display/dc/bios/bios_parser.c: +31 -19
drivers/gpu/drm/amd/display/dc/bios/bios_parser2.c: +7 -9
drivers/gpu/drm/amd/display/dc/clk_mgr/dcn21/rn_clk_mgr_vbios_smu.h: +3 -1
drivers/gpu/drm/amd/display/dc/clk_mgr/dcn30/dcn30_smu11_driver_if.h: +1 -0
drivers/gpu/drm/amd/display/dc/clk_mgr/dcn31/dcn31_clk_mgr.c: +3 -1
drivers/gpu/drm/amd/display/dc/clk_mgr/dcn31/dcn31_smu.c: +2 -2
drivers/gpu/drm/amd/display/dc/clk_mgr/dcn314/dcn314_smu.c: +10 -2
drivers/gpu/drm/amd/display/dc/clk_mgr/dcn315/dcn315_clk_mgr.c: +23 -48
drivers/gpu/drm/amd/display/dc/clk_mgr/dcn316/dcn316_clk_mgr.c: +1 -0
drivers/gpu/drm/amd/display/dc/clk_mgr/dcn32/dcn32_clk_mgr.c: +1 -38
drivers/gpu/drm/amd/display/dc/clk_mgr/dcn32/dcn32_smu13_driver_if.h: +1 -0
drivers/gpu/drm/amd/display/dc/core/dc.c: +464 -224
drivers/gpu/drm/amd/display/dc/core/dc_hw_sequencer.c: +10 -3
drivers/gpu/drm/amd/display/dc/core/dc_link.c: +7 -5
drivers/gpu/drm/amd/display/dc/core/dc_link_ddc.c: +1 -0
drivers/gpu/drm/amd/display/dc/core/dc_link_dp.c: +94 -139
drivers/gpu/drm/amd/display/dc/core/dc_link_dpia.c: +10 -5
drivers/gpu/drm/amd/display/dc/core/dc_resource.c: +251 -5
drivers/gpu/drm/amd/display/dc/core/dc_stream.c: +14 -2
drivers/gpu/drm/amd/display/dc/dc.h: +62 -44
drivers/gpu/drm/amd/display/dc/dc_dmub_srv.c: +107 -78
drivers/gpu/drm/amd/display/dc/dc_link.h: +34 -3
drivers/gpu/drm/amd/display/dc/dc_stream.h: +31 -5
drivers/gpu/drm/amd/display/dc/dc_trace.h: +2 -0
drivers/gpu/drm/amd/display/dc/dc_types.h: +7 -0
drivers/gpu/drm/amd/display/dc/dce/dce_dmcu.c: +10 -4
drivers/gpu/drm/amd/display/dc/dce/dmub_psr.c: +10 -1
drivers/gpu/drm/amd/display/dc/dce110/dce110_hw_sequencer.c: +21 -60
drivers/gpu/drm/amd/display/dc/dce60/dce60_resource.c: +3 -0
drivers/gpu/drm/amd/display/dc/dce80/dce80_resource.c: +2 -0
drivers/gpu/drm/amd/display/dc/dcn10/dcn10_hubbub.h: +3 -1
drivers/gpu/drm/amd/display/dc/dcn10/dcn10_hw_sequencer.c: +43 -3
drivers/gpu/drm/amd/display/dc/dcn10/dcn10_optc.c: +5 -0
drivers/gpu/drm/amd/display/dc/dcn10/dcn10_resource.c: +2 -42
drivers/gpu/drm/amd/display/dc/dcn20/dcn20_dwb.h: +168 -195
drivers/gpu/drm/amd/display/dc/dcn20/dcn20_hwseq.c: +90 -37
drivers/gpu/drm/amd/display/dc/dcn20/dcn20_mmhubbub.h: +0 -7
drivers/gpu/drm/amd/display/dc/dcn20/dcn20_resource.c: +25 -2
drivers/gpu/drm/amd/display/dc/dcn20/dcn20_vmid.h: +0 -6
drivers/gpu/drm/amd/display/dc/dcn21/dcn21_resource.c: +4 -3
drivers/gpu/drm/amd/display/dc/dcn30/dcn30_dwb.h: +0 -15
drivers/gpu/drm/amd/display/dc/dcn30/dcn30_mmhubbub.h: +0 -7
drivers/gpu/drm/amd/display/dc/dcn30/dcn30_optc.c: +9 -0
drivers/gpu/drm/amd/display/dc/dcn30/dcn30_resource.c: +17 -4
drivers/gpu/drm/amd/display/dc/dcn301/dcn301_resource.c: +6 -2
drivers/gpu/drm/amd/display/dc/dcn302/dcn302_resource.c: +19 -2
drivers/gpu/drm/amd/display/dc/dcn303/dcn303_resource.c: +18 -2
drivers/gpu/drm/amd/display/dc/dcn31/dcn31_apg.c: +0 -13
drivers/gpu/drm/amd/display/dc/dcn31/dcn31_apg.h: +0 -4
drivers/gpu/drm/amd/display/dc/dcn31/dcn31_hpo_dp_stream_encoder.c: +0 -9
drivers/gpu/drm/amd/display/dc/dcn31/dcn31_hwseq.c: +44 -2
drivers/gpu/drm/amd/display/dc/dcn31/dcn31_hwseq.h: +4 -0
drivers/gpu/drm/amd/display/dc/dcn31/dcn31_init.c: +2 -2
drivers/gpu/drm/amd/display/dc/dcn31/dcn31_optc.c: +28 -1
drivers/gpu/drm/amd/display/dc/dcn31/dcn31_optc.h: +4 -1
drivers/gpu/drm/amd/display/dc/dcn31/dcn31_resource.c: +36 -9
drivers/gpu/drm/amd/display/dc/dcn314/dcn314_dccg.c: +1 -1
drivers/gpu/drm/amd/display/dc/dcn314/dcn314_init.c: +2 -2
drivers/gpu/drm/amd/display/dc/dcn314/dcn314_optc.c: +1 -2
drivers/gpu/drm/amd/display/dc/dcn314/dcn314_resource.c: +10 -0
drivers/gpu/drm/amd/display/dc/dcn315/dcn315_resource.c: +14 -5
drivers/gpu/drm/amd/display/dc/dcn316/dcn316_resource.c: +10 -4
drivers/gpu/drm/amd/display/dc/dcn32/dcn32_dccg.c: +1 -5
drivers/gpu/drm/amd/display/dc/dcn32/dcn32_hubbub.c: +22 -0
drivers/gpu/drm/amd/display/dc/dcn32/dcn32_hubbub.h: +6 -2
drivers/gpu/drm/amd/display/dc/dcn32/dcn32_hwseq.c: +46 -15
drivers/gpu/drm/amd/display/dc/dcn32/dcn32_hwseq.h: +2 -0
drivers/gpu/drm/amd/display/dc/dcn32/dcn32_init.c: +1 -0
drivers/gpu/drm/amd/display/dc/dcn32/dcn32_mmhubbub.c: +1 -1
drivers/gpu/drm/amd/display/dc/dcn32/dcn32_mpc.c: +1 -1
drivers/gpu/drm/amd/display/dc/dcn32/dcn32_optc.c: +8 -0
drivers/gpu/drm/amd/display/dc/dcn32/dcn32_resource.c: +80 -32
drivers/gpu/drm/amd/display/dc/dcn32/dcn32_resource.h: +5 -12
drivers/gpu/drm/amd/display/dc/dcn32/dcn32_resource_helpers.c: +10 -5
drivers/gpu/drm/amd/display/dc/dcn321/dcn321_resource.c: +11 -4
drivers/gpu/drm/amd/display/dc/dm_helpers.h: +5 -0
drivers/gpu/drm/amd/display/dc/dml/Makefile: +16 -4
drivers/gpu/drm/amd/display/dc/dml/dc_features.h: +7 -0
drivers/gpu/drm/amd/display/dc/dml/dcn10/dcn10_fpu.c: +36 -0
drivers/gpu/drm/amd/display/dc/dml/dcn10/dcn10_fpu.h: +2 -0
drivers/gpu/drm/amd/display/dc/dml/dcn20/dcn20_fpu.c: +15 -7
drivers/gpu/drm/amd/display/dc/dml/dcn30/dcn30_fpu.c: +0 -2
drivers/gpu/drm/amd/display/dc/dml/dcn30/display_mode_vba_30.c: +1 -1
drivers/gpu/drm/amd/display/dc/dml/dcn31/dcn31_fpu.c: +22 -4
drivers/gpu/drm/amd/display/dc/dml/dcn31/dcn31_fpu.h: +5 -0
drivers/gpu/drm/amd/display/dc/dml/dcn31/display_mode_vba_31.c: +55 -4
drivers/gpu/drm/amd/display/dc/dml/dcn314/dcn314_fpu.c: +6 -10
drivers/gpu/drm/amd/display/dc/dml/dcn314/display_mode_vba_314.c: +3 -4
drivers/gpu/drm/amd/display/dc/dml/dcn32/dcn32_fpu.c: +120 -37
drivers/gpu/drm/amd/display/dc/dml/dcn32/dcn32_fpu.h: +3 -0
drivers/gpu/drm/amd/display/dc/dml/dcn32/display_mode_vba_32.c: +40 -0
drivers/gpu/drm/amd/display/dc/dml/dcn32/display_mode_vba_util_32.c: +69 -0
drivers/gpu/drm/amd/display/dc/dml/dcn32/display_mode_vba_util_32.h: +18 -0
drivers/gpu/drm/amd/display/dc/dml/display_mode_enums.h: +25 -0
drivers/gpu/drm/amd/display/dc/dml/display_mode_vba.h: +11 -0
drivers/gpu/drm/amd/display/dc/dml/dsc/qp_tables.h: +18 -18
drivers/gpu/drm/amd/display/dc/gpio/dcn32/hw_factory_dcn32.c: +2 -2
drivers/gpu/drm/amd/display/dc/inc/core_types.h: +54 -12
drivers/gpu/drm/amd/display/dc/inc/dc_link_dp.h: +1 -1
drivers/gpu/drm/amd/display/dc/inc/hw/dchubbub.h: +16 -0
drivers/gpu/drm/amd/display/dc/inc/hw/dmcu.h: +1 -15
drivers/gpu/drm/amd/display/dc/inc/hw/dpp.h: +7 -2
drivers/gpu/drm/amd/display/dc/inc/hw/hw_shared.h: +7 -0
drivers/gpu/drm/amd/display/dc/inc/hw/stream_encoder.h: +3 -3
drivers/gpu/drm/amd/display/dc/inc/hw/timing_generator.h: +6 -0
drivers/gpu/drm/amd/display/dc/inc/hw_sequencer.h: +1 -0
drivers/gpu/drm/amd/display/dc/inc/link_hwss.h: +5 -0
drivers/gpu/drm/amd/display/dc/irq/dcn201/irq_service_dcn201.c: +10 -7
drivers/gpu/drm/amd/display/dc/irq/dcn201/irq_service_dcn201.h: +1 -1
drivers/gpu/drm/amd/display/dc/irq/irq_service.c: +15 -2
drivers/gpu/drm/amd/display/dc/link/link_dp_dpia_bw.c: +28 -0
drivers/gpu/drm/amd/display/dc/link/link_dp_dpia_bw.h: +69 -0
drivers/gpu/drm/amd/display/dc/link/link_hwss_dio.c: +52 -0
drivers/gpu/drm/amd/display/dc/link/link_hwss_dio.h: +4 -0
drivers/gpu/drm/amd/display/dc/link/link_hwss_dpia.c: +3 -0
drivers/gpu/drm/amd/display/dc/link/link_hwss_hpo_dp.c: +25 -0
drivers/gpu/drm/amd/display/dmub/inc/dmub_cmd.h: +52 -3
drivers/gpu/drm/amd/display/modules/color/color_gamma.c: +1 -1
drivers/gpu/drm/amd/display/modules/freesync/freesync.c: +4 -4
drivers/gpu/drm/amd/display/modules/inc/mod_info_packet.h: +2 -1
drivers/gpu/drm/amd/display/modules/info_packet/info_packet.c: +5 -1
drivers/gpu/drm/amd/display/modules/power/power_helpers.c: +9 -0
drivers/gpu/drm/amd/include/asic_reg/dcn/dcn_3_0_0_offset.h: +1 -0
drivers/gpu/drm/amd/include/asic_reg/dcn/dcn_3_0_0_sh_mask.h: +1 -0
drivers/gpu/drm/amd/include/asic_reg/vcn/vcn_2_5_offset.h: +2 -1
drivers/gpu/drm/amd/include/asic_reg/vcn/vcn_2_5_sh_mask.h: +27 -0
drivers/gpu/drm/amd/include/atombios.h: +17 -17
drivers/gpu/drm/amd/include/atomfirmware.h: +54 -9
drivers/gpu/drm/amd/include/ivsrcid/vcn/irqsrcs_vcn_4_0.h: +3 -0
drivers/gpu/drm/amd/include/kgd_pp_interface.h: +2 -1
drivers/gpu/drm/amd/include/mes_v11_api_def.h: +5 -1
drivers/gpu/drm/amd/include/yellow_carp_offset.h: +1 -0
drivers/gpu/drm/amd/pm/powerplay/amd_powerplay.c: +3 -2
drivers/gpu/drm/amd/pm/powerplay/hwmgr/pp_psm.c: +2 -0
drivers/gpu/drm/amd/pm/powerplay/hwmgr/vega20_hwmgr.c: +2 -1
drivers/gpu/drm/amd/pm/swsmu/amdgpu_smu.c: +4 -2
drivers/gpu/drm/amd/pm/swsmu/inc/amdgpu_smu.h: +5 -0
drivers/gpu/drm/amd/pm/swsmu/inc/pmfw_if/smu_v13_0_0_ppsmc.h: +7 -1
drivers/gpu/drm/amd/pm/swsmu/inc/smu_types.h: +3 -1
drivers/gpu/drm/amd/pm/swsmu/smu11/smu_v11_0.c: +27 -1
drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0.c: +34 -0
drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_0_ppt.c: +90 -2
drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_4_ppt.c: +14 -3
drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_7_ppt.c: +1 -0
drivers/gpu/drm/amd/pm/swsmu/smu_cmn.c: +18 -0
drivers/gpu/drm/amd/pm/swsmu/smu_cmn.h: +3 -0
drivers/gpu/drm/arm/display/komeda/komeda_drv.c: +1 -1
drivers/gpu/drm/arm/display/komeda/komeda_kms.c: +0 -2
drivers/gpu/drm/arm/hdlcd_crtc.c: +9 -16
drivers/gpu/drm/arm/hdlcd_drv.c: +22 -21
drivers/gpu/drm/arm/hdlcd_drv.h: +2 -0
drivers/gpu/drm/arm/malidp_crtc.c: +3 -4
drivers/gpu/drm/arm/malidp_drv.c: +27 -44
drivers/gpu/drm/arm/malidp_drv.h: +2 -0
drivers/gpu/drm/arm/malidp_hw.c: +5 -5
drivers/gpu/drm/arm/malidp_mw.c: +3 -3
drivers/gpu/drm/arm/malidp_planes.c: +9 -23
drivers/gpu/drm/armada/armada_fbdev.c: +4 -2
drivers/gpu/drm/armada/armada_gem.c: +4 -4
drivers/gpu/drm/aspeed/aspeed_gfx_drv.c: +1 -1
drivers/gpu/drm/ast/Kconfig: +1 -3
drivers/gpu/drm/ast/ast_drv.c: +3 -2
drivers/gpu/drm/ast/ast_drv.h: +18 -17
drivers/gpu/drm/ast/ast_main.c: +2 -3
drivers/gpu/drm/ast/ast_mm.c: +7 -7
drivers/gpu/drm/ast/ast_mode.c: +265 -234
drivers/gpu/drm/atmel-hlcdc/atmel_hlcdc_dc.c: +1 -1
drivers/gpu/drm/bridge/adv7511/adv7511.h: +2 -1
drivers/gpu/drm/bridge/adv7511/adv7511_drv.c: +16 -8
drivers/gpu/drm/bridge/adv7511/adv7533.c: +21 -24
drivers/gpu/drm/bridge/ite-it6505.c: +99 -65
drivers/gpu/drm/bridge/parade-ps8640.c: +8 -1
drivers/gpu/drm/bridge/tc358762.c: +1 -1
drivers/gpu/drm/bridge/tc358775.c: +1 -1
drivers/gpu/drm/display/Makefile: +8 -6
drivers/gpu/drm/drm_atomic_helper.c: +49 -45
drivers/gpu/drm/drm_atomic_state_helper.c: +3 -3
drivers/gpu/drm/drm_atomic_uapi.c: +4 -0
drivers/gpu/drm/drm_client.c: +5 -5
drivers/gpu/drm/drm_client_modeset.c: +4 -0
drivers/gpu/drm/drm_connector.c: +4 -0
drivers/gpu/drm/drm_crtc_helper.c: +26 -1
drivers/gpu/drm/drm_crtc_internal.h: +14 -1
drivers/gpu/drm/drm_debugfs.c: +1 -7
drivers/gpu/drm/drm_drv.c: +74 -27
drivers/gpu/drm/drm_edid.c: +450 -254
drivers/gpu/drm/drm_edid_load.c: +26 -86
drivers/gpu/drm/drm_fb_helper.c: +355 -721
drivers/gpu/drm/drm_fbdev_generic.c: +494 -0
drivers/gpu/drm/drm_file.c: +1 -1
drivers/gpu/drm/drm_format_helper.c: +10 -0
drivers/gpu/drm/drm_fourcc.c: +4 -4
drivers/gpu/drm/drm_gem.c: +24 -0
drivers/gpu/drm/drm_gem_atomic_helper.c: +30 -36
drivers/gpu/drm/drm_gem_dma_helper.c: +3 -3
drivers/gpu/drm/drm_gem_framebuffer_helper.c: +3 -4
drivers/gpu/drm/drm_gem_ttm_helper.c: +1 -8
drivers/gpu/drm/drm_gem_vram_helper.c: +3 -15
drivers/gpu/drm/drm_mipi_dsi.c: +1 -1
drivers/gpu/drm/drm_modes.c: +94 -22
drivers/gpu/drm/drm_plane_helper.c: +3 -1
drivers/gpu/drm/drm_prime.c: +5 -3
drivers/gpu/drm/drm_probe_helper.c: +1 -2
drivers/gpu/drm/drm_rect.c: +1 -1
drivers/gpu/drm/drm_simple_kms_helper.c: +31 -1
drivers/gpu/drm/drm_sysfs.c: +16 -8
drivers/gpu/drm/etnaviv/etnaviv_drv.h: +2 -1
drivers/gpu/drm/etnaviv/etnaviv_dump.c: +6 -1
drivers/gpu/drm/etnaviv/etnaviv_gem.c: +12 -7
drivers/gpu/drm/etnaviv/etnaviv_gem.h: +1 -0
drivers/gpu/drm/etnaviv/etnaviv_gem_prime.c: +1 -1
drivers/gpu/drm/etnaviv/etnaviv_gem_submit.c: +6 -0
drivers/gpu/drm/etnaviv/etnaviv_gpu.c: +41 -17
drivers/gpu/drm/etnaviv/etnaviv_gpu.h: +22 -1
drivers/gpu/drm/etnaviv/etnaviv_hwdb.c: +31 -0
drivers/gpu/drm/etnaviv/etnaviv_mmu.c: +17 -10
drivers/gpu/drm/etnaviv/etnaviv_mmu.h: +1 -0
drivers/gpu/drm/etnaviv/etnaviv_sched.c: +1 -1
drivers/gpu/drm/exynos/exynos_drm_fbdev.c: +4 -2
drivers/gpu/drm/fsl-dcu/fsl_dcu_drm_drv.c: +1 -1
drivers/gpu/drm/gma500/framebuffer.c: +7 -5
drivers/gpu/drm/gma500/psb_drv.h: +1 -0
drivers/gpu/drm/gud/gud_connector.c: +1 -1
drivers/gpu/drm/gud/gud_drv.c: +1 -1
drivers/gpu/drm/hisilicon/hibmc/hibmc_drm_drv.c: +4 -13
drivers/gpu/drm/hisilicon/hibmc/hibmc_drm_drv.h: +0 -4
drivers/gpu/drm/hisilicon/hibmc/hibmc_drm_vdac.c: +2 -0
drivers/gpu/drm/hisilicon/kirin/dw_drm_dsi.c: +1 -1
drivers/gpu/drm/hisilicon/kirin/kirin_drm_drv.c: +1 -1
drivers/gpu/drm/hyperv/hyperv_drm_drv.c: +1 -1
drivers/gpu/drm/hyperv/hyperv_drm_modeset.c: +0 -1
drivers/gpu/drm/i915/Kconfig.profile: +22 -4
drivers/gpu/drm/i915/Makefile: +14 -6
drivers/gpu/drm/i915/display/g4x_dp.c: +1 -0
drivers/gpu/drm/i915/display/g4x_dp.h: +1 -1
drivers/gpu/drm/i915/display/g4x_hdmi.c: +16 -3
drivers/gpu/drm/i915/display/hsw_ips.c: +3 -5
drivers/gpu/drm/i915/display/i9xx_plane.c: +3 -1
drivers/gpu/drm/i915/display/icl_dsi.c: +6 -16
drivers/gpu/drm/i915/display/icl_dsi_regs.h: +1 -1
drivers/gpu/drm/i915/display/intel_atomic.c: +8 -0
drivers/gpu/drm/i915/display/intel_atomic_plane.c: +50 -14
drivers/gpu/drm/i915/display/intel_audio.c: +337 -345
drivers/gpu/drm/i915/display/intel_audio_regs.h: +40 -49
drivers/gpu/drm/i915/display/intel_backlight.c: +1 -0
drivers/gpu/drm/i915/display/intel_backlight_regs.h: +1 -1
drivers/gpu/drm/i915/display/intel_bios.c: +10 -2
drivers/gpu/drm/i915/display/intel_bw.c: +2 -1
drivers/gpu/drm/i915/display/intel_cdclk.c: +47 -45
drivers/gpu/drm/i915/display/intel_color.c: +543 -403
drivers/gpu/drm/i915/display/intel_color.h: +5 -1
drivers/gpu/drm/i915/display/intel_combo_phy.c: +6 -13
drivers/gpu/drm/i915/display/intel_connector.c: +18 -0
drivers/gpu/drm/i915/display/intel_connector.h: +2 -1
drivers/gpu/drm/i915/display/intel_crt.c: +5 -6
drivers/gpu/drm/i915/display/intel_crtc.c: +3 -5
drivers/gpu/drm/i915/display/intel_crtc_state_dump.c: +7 -5
drivers/gpu/drm/i915/display/intel_cursor.c: +6 -3
drivers/gpu/drm/i915/display/intel_ddi.c: +82 -55
drivers/gpu/drm/i915/display/intel_display.c: +86 -101
drivers/gpu/drm/i915/display/intel_display.h: +3 -43
drivers/gpu/drm/i915/display/intel_display_core.h: +26 -0
drivers/gpu/drm/i915/display/intel_display_debugfs.c: +27 -284
drivers/gpu/drm/i915/display/intel_display_power.c: +33 -4
drivers/gpu/drm/i915/display/intel_display_power.h: +12 -3
drivers/gpu/drm/i915/display/intel_display_power_map.c: +61 -8
drivers/gpu/drm/i915/display/intel_display_power_well.c: +2 -1
drivers/gpu/drm/i915/display/intel_display_power_well.h: +1 -1
drivers/gpu/drm/i915/display/intel_display_reg_defs.h: +53 -0
drivers/gpu/drm/i915/display/intel_display_trace.h: +135 -71
drivers/gpu/drm/i915/display/intel_display_types.h: +33 -49
drivers/gpu/drm/i915/display/intel_dkl_phy.c: +15 -18
drivers/gpu/drm/i915/display/intel_dkl_phy.h: +5 -5
drivers/gpu/drm/i915/display/intel_dkl_phy_regs.h: +204 -0
drivers/gpu/drm/i915/display/intel_dmc.c: +12 -14
drivers/gpu/drm/i915/display/intel_dp.c: +60 -51
drivers/gpu/drm/i915/display/intel_dp_aux.c: +1 -0
drivers/gpu/drm/i915/display/intel_dp_hdcp.c: +7 -14
drivers/gpu/drm/i915/display/intel_dp_mst.c: +31 -16
drivers/gpu/drm/i915/display/intel_dpio_phy.c: +43 -0
drivers/gpu/drm/i915/display/intel_dpio_phy.h: +17 -2
drivers/gpu/drm/i915/display/intel_dpll.c: +2 -0
drivers/gpu/drm/i915/display/intel_dpll_mgr.c: +50 -76
drivers/gpu/drm/i915/display/intel_dpll_mgr.h: +0 -3
drivers/gpu/drm/i915/display/intel_dpt.c: +1 -0
drivers/gpu/drm/i915/display/intel_drrs.c: +111 -2
drivers/gpu/drm/i915/display/intel_drrs.h: +3 -1
drivers/gpu/drm/i915/display/intel_dsb.c: +1 -0
drivers/gpu/drm/i915/display/intel_dsi_vbt.c: +2 -2
drivers/gpu/drm/i915/display/intel_dvo.c: +3 -4
drivers/gpu/drm/i915/display/intel_dvo_dev.h: +4 -4
drivers/gpu/drm/i915/display/intel_fb.c: +13 -0
drivers/gpu/drm/i915/display/intel_fb.h: +1 -0
drivers/gpu/drm/i915/display/intel_fb_pin.c: +0 -1
drivers/gpu/drm/i915/display/intel_fbc.c: +17 -18
drivers/gpu/drm/i915/display/intel_fbdev.c: +8 -6
drivers/gpu/drm/i915/display/intel_fdi.c: +1 -0
drivers/gpu/drm/i915/display/intel_fifo_underrun.h: +1 -2
drivers/gpu/drm/i915/display/intel_frontbuffer.c: +2 -2
drivers/gpu/drm/i915/display/intel_global_state.c: +2 -2
drivers/gpu/drm/i915/display/intel_global_state.h: +1 -1
drivers/gpu/drm/i915/display/intel_gmbus.c: +21 -1
drivers/gpu/drm/i915/display/intel_hdcp_regs.h: +1 -1
drivers/gpu/drm/i915/display/intel_hdmi.c: +27 -31
drivers/gpu/drm/i915/display/intel_hdmi.h: +4 -4
drivers/gpu/drm/i915/display/intel_hotplug.c: +195 -21
drivers/gpu/drm/i915/display/intel_hotplug.h: +2 -1
drivers/gpu/drm/i915/display/intel_hti.c: +38 -0
drivers/gpu/drm/i915/display/intel_hti.h: +18 -0
drivers/gpu/drm/i915/display/intel_hti_regs.h: +16 -0
drivers/gpu/drm/i915/display/intel_lpe_audio.c: +6 -5
drivers/gpu/drm/i915/display/intel_lspcon.c: +1 -0
drivers/gpu/drm/i915/display/intel_lvds.c: +22 -26
drivers/gpu/drm/i915/display/{intel_tc_phy_regs.h => intel_mg_phy_regs.h}: +4 -4
drivers/gpu/drm/i915/display/intel_modeset_setup.c: +19 -4
drivers/gpu/drm/i915/display/intel_modeset_verify.c: +2 -1
drivers/gpu/drm/i915/display/intel_opregion.c: +3 -4
drivers/gpu/drm/i915/display/intel_panel.c: +24 -7
drivers/gpu/drm/i915/display/intel_pch_display.c: +1 -0
drivers/gpu/drm/i915/display/intel_pch_refclk.c: +1 -0
drivers/gpu/drm/i915/display/intel_pipe_crc.c: +6 -6
drivers/gpu/drm/i915/display/intel_pps.c: +9 -1
drivers/gpu/drm/i915/display/intel_psr.c: +32 -20
drivers/gpu/drm/i915/display/intel_sdvo.c: +84 -89
drivers/gpu/drm/i915/display/intel_snps_phy.c: +1 -0
drivers/gpu/drm/i915/display/intel_snps_phy_regs.h: +1 -1
drivers/gpu/drm/i915/display/intel_sprite.c: +1 -0
drivers/gpu/drm/i915/display/intel_sprite.h: +1 -8
drivers/gpu/drm/i915/display/intel_tc.c: +55 -23
drivers/gpu/drm/i915/display/intel_tc.h: +2 -1
drivers/gpu/drm/i915/display/intel_tv.c: +47 -42
drivers/gpu/drm/i915/display/intel_vdsc.c: +1 -0
drivers/gpu/drm/i915/display/intel_vga.c: +1 -0
drivers/gpu/drm/i915/display/intel_vrr.c: +1 -0
drivers/gpu/drm/i915/display/skl_scaler.c: +2 -0
drivers/gpu/drm/i915/display/skl_universal_plane.c: +7 -0
drivers/gpu/drm/i915/display/skl_universal_plane.h: +1 -0
drivers/gpu/drm/i915/display/skl_watermark.c: +5 -21
drivers/gpu/drm/i915/display/vlv_dsi.c: +6 -17
drivers/gpu/drm/i915/display/vlv_dsi_regs.h: +1 -1
drivers/gpu/drm/i915/gem/i915_gem_clflush.c: +1 -1
drivers/gpu/drm/i915/gem/i915_gem_context.c: +2 -3
drivers/gpu/drm/i915/gem/i915_gem_dmabuf.c: +28 -27
drivers/gpu/drm/i915/gem/i915_gem_execbuffer.c: +27 -22
drivers/gpu/drm/i915/gem/i915_gem_internal.c: +1 -4
drivers/gpu/drm/i915/gem/i915_gem_mman.c: +9 -14
drivers/gpu/drm/i915/gem/i915_gem_object.c: +25 -1
drivers/gpu/drm/i915/gem/i915_gem_object.h: +5 -2
drivers/gpu/drm/i915/gem/i915_gem_pages.c: +15 -4
drivers/gpu/drm/i915/gem/i915_gem_phys.c: +3 -6
drivers/gpu/drm/i915/gem/i915_gem_pm.c: +30 -5
drivers/gpu/drm/i915/gem/i915_gem_shmem.c: +1 -1
drivers/gpu/drm/i915/gem/i915_gem_stolen.c: +172 -91
drivers/gpu/drm/i915/gem/i915_gem_ttm.c: +90 -31
drivers/gpu/drm/i915/gem/i915_gem_ttm.h: +13 -5
drivers/gpu/drm/i915/gem/i915_gem_ttm_move.c: +1 -1
drivers/gpu/drm/i915/gem/i915_gem_userptr.c: +2 -5
drivers/gpu/drm/i915/gem/selftests/huge_gem_object.c: +1 -1
drivers/gpu/drm/i915/gem/selftests/huge_pages.c: +159 -8
drivers/gpu/drm/i915/gem/selftests/i915_gem_client_blt.c: +4 -18
drivers/gpu/drm/i915/gem/selftests/i915_gem_coherency.c: +1 -3
drivers/gpu/drm/i915/gem/selftests/i915_gem_context.c: +70 -64
drivers/gpu/drm/i915/gem/selftests/i915_gem_dmabuf.c: +86 -9
drivers/gpu/drm/i915/gem/selftests/i915_gem_mman.c: +5 -7
drivers/gpu/drm/i915/gem/selftests/igt_gem_utils.c: +2 -6
drivers/gpu/drm/i915/gem/selftests/igt_gem_utils.h: +14 -0
drivers/gpu/drm/i915/gt/gen8_engine_cs.c: +35 -20
drivers/gpu/drm/i915/gt/gen8_engine_cs.h: +6 -6
drivers/gpu/drm/i915/gt/gen8_ppgtt.c: +51 -41
drivers/gpu/drm/i915/gt/intel_context.h: +8 -0
drivers/gpu/drm/i915/gt/intel_context_types.h: +7 -2
drivers/gpu/drm/i915/gt/intel_engine.h: +6 -0
drivers/gpu/drm/i915/gt/intel_engine_cs.c: +107 -17
drivers/gpu/drm/i915/gt/intel_engine_heartbeat.c: +39 -0
drivers/gpu/drm/i915/gt/intel_engine_regs.h: +1 -0
drivers/gpu/drm/i915/gt/intel_engine_types.h: +1 -0
drivers/gpu/drm/i915/gt/intel_engine_user.c: +22 -6
drivers/gpu/drm/i915/gt/intel_execlists_submission.c: +11 -7
drivers/gpu/drm/i915/gt/intel_ggtt.c: +10 -10
drivers/gpu/drm/i915/gt/intel_ggtt_fencing.c: +2 -2
drivers/gpu/drm/i915/gt/intel_gpu_commands.h: +4 -0
drivers/gpu/drm/i915/gt/intel_gsc.c: +20 -3
drivers/gpu/drm/i915/gt/intel_gt.c: +125 -34
drivers/gpu/drm/i915/gt/intel_gt.h: +1 -0
drivers/gpu/drm/i915/gt/intel_gt_clock_utils.c: +33 -5
drivers/gpu/drm/i915/gt/intel_gt_irq.c: +62 -42
drivers/gpu/drm/i915/gt/intel_gt_mcr.c: +272 -35
drivers/gpu/drm/i915/gt/intel_gt_mcr.h: +17 -7
drivers/gpu/drm/i915/gt/intel_gt_pm.c: +28 -0
drivers/gpu/drm/i915/gt/intel_gt_pm_debugfs.c: +106 -178
drivers/gpu/drm/i915/gt/intel_gt_regs.h: +132 -78
drivers/gpu/drm/i915/gt/intel_gt_sysfs.c: +7 -8
drivers/gpu/drm/i915/gt/intel_gt_sysfs.h: +1 -6
drivers/gpu/drm/i915/gt/intel_gt_sysfs_pm.c: +220 -257
drivers/gpu/drm/i915/gt/intel_gt_types.h: +8 -17
drivers/gpu/drm/i915/gt/intel_gtt.c: +23 -21
drivers/gpu/drm/i915/gt/intel_gtt.h: +2 -1
drivers/gpu/drm/i915/gt/intel_lrc.c: +119 -24
drivers/gpu/drm/i915/gt/intel_lrc.h: +2 -0
drivers/gpu/drm/i915/gt/intel_migrate.c: +1 -0
drivers/gpu/drm/i915/gt/intel_mocs.c: +8 -4
drivers/gpu/drm/i915/gt/intel_rc6.c: +42 -22
drivers/gpu/drm/i915/gt/intel_rc6.h: +7 -4
drivers/gpu/drm/i915/gt/intel_rc6_types.h: +13 -2
drivers/gpu/drm/i915/gt/intel_renderstate.c: +1 -3
drivers/gpu/drm/i915/gt/intel_reset.c: +17 -3
drivers/gpu/drm/i915/gt/intel_reset.h: +1 -0
drivers/gpu/drm/i915/gt/intel_ring_submission.c: +2 -0
drivers/gpu/drm/i915/gt/intel_rps.c: +295 -23
drivers/gpu/drm/i915/gt/intel_rps.h: +5 -0
drivers/gpu/drm/i915/gt/intel_sseu.c: +2 -2
drivers/gpu/drm/i915/{ => gt}/intel_wopcm.c: +30 -13
drivers/gpu/drm/i915/{ => gt}/intel_wopcm.h: +0 -0
drivers/gpu/drm/i915/gt/intel_workarounds.c: +467 -246
drivers/gpu/drm/i915/gt/intel_workarounds_types.h: +10 -2
drivers/gpu/drm/i915/gt/selftest_engine_cs.c: +19 -3
drivers/gpu/drm/i915/gt/selftest_engine_pm.c: +1 -1
drivers/gpu/drm/i915/gt/selftest_execlists.c: +26 -38
drivers/gpu/drm/i915/gt/selftest_gt_pm.c: +15 -21
drivers/gpu/drm/i915/gt/selftest_hangcheck.c: +35 -51
drivers/gpu/drm/i915/gt/selftest_lrc.c: +7 -26
drivers/gpu/drm/i915/gt/selftest_migrate.c: +1 -0
drivers/gpu/drm/i915/gt/selftest_mocs.c: +2 -3
drivers/gpu/drm/i915/gt/selftest_rc6.c: +3 -3
drivers/gpu/drm/i915/gt/selftest_rps.c: +11 -9
drivers/gpu/drm/i915/gt/selftest_slpc.c: +231 -29
drivers/gpu/drm/i915/gt/selftest_workarounds.c: +9 -19
drivers/gpu/drm/i915/gt/sysfs_engines.c: +15 -10
drivers/gpu/drm/i915/gt/uc/abi/guc_actions_abi.h: +1 -0
drivers/gpu/drm/i915/gt/uc/abi/guc_actions_slpc_abi.h: +9 -0
drivers/gpu/drm/i915/gt/uc/abi/guc_klvs_abi.h: +8 -1
drivers/gpu/drm/i915/gt/uc/intel_guc.c: +29 -19
drivers/gpu/drm/i915/gt/uc/intel_guc.h: +20 -1
drivers/gpu/drm/i915/gt/uc/intel_guc_ads.c: +54 -28
drivers/gpu/drm/i915/gt/uc/intel_guc_capture.c: +107 -25
drivers/gpu/drm/i915/gt/uc/intel_guc_debugfs.c: +61 -0
drivers/gpu/drm/i915/gt/uc/intel_guc_fw.c: +8 -4
drivers/gpu/drm/i915/gt/uc/intel_guc_fwif.h: +48 -2
drivers/gpu/drm/i915/gt/uc/intel_guc_log.c: +3 -3
drivers/gpu/drm/i915/gt/uc/intel_guc_rc.c: +12 -1
drivers/gpu/drm/i915/gt/uc/intel_guc_reg.h: +2 -0
drivers/gpu/drm/i915/gt/uc/intel_guc_slpc.c: +103 -0
drivers/gpu/drm/i915/gt/uc/intel_guc_slpc.h: +4 -0
drivers/gpu/drm/i915/gt/uc/intel_guc_slpc_types.h: +3 -0
drivers/gpu/drm/i915/gt/uc/intel_guc_submission.c: +293 -55
drivers/gpu/drm/i915/gt/uc/intel_huc.c: +294 -22
drivers/gpu/drm/i915/gt/uc/intel_huc.h: +31 -0
drivers/gpu/drm/i915/gt/uc/intel_huc_fw.c: +34 -0
drivers/gpu/drm/i915/gt/uc/intel_huc_fw.h: +1 -0
drivers/gpu/drm/i915/gt/uc/intel_uc.c: +9 -4
drivers/gpu/drm/i915/gt/uc/intel_uc_fw.c: +53 -17
drivers/gpu/drm/i915/gt/uc/intel_uc_fw.h: +14 -0
drivers/gpu/drm/i915/gt/uc/selftest_guc_hangcheck.c: +5 -3
drivers/gpu/drm/i915/gvt/cfg_space.c: +3 -3
drivers/gpu/drm/i915/gvt/cmd_parser.c: +1 -0
drivers/gpu/drm/i915/gvt/display.c: +2 -0
drivers/gpu/drm/i915/gvt/dmabuf.c: +1 -1
drivers/gpu/drm/i915/gvt/dmabuf.h: +1 -1
drivers/gpu/drm/i915/gvt/firmware.c: +1 -1
drivers/gpu/drm/i915/gvt/gtt.c: +1 -6
drivers/gpu/drm/i915/gvt/gvt.h: +0 -2
drivers/gpu/drm/i915/gvt/handlers.c: +3 -2
drivers/gpu/drm/i915/gvt/kvmgt.c: +0 -4
drivers/gpu/drm/i915/gvt/mmio.c: +1 -0
drivers/gpu/drm/i915/gvt/mmio_context.c: +8 -7
drivers/gpu/drm/i915/gvt/page_track.c: +1 -1
drivers/gpu/drm/i915/gvt/scheduler.c: +2 -3
drivers/gpu/drm/i915/gvt/vgpu.c: +3 -3
drivers/gpu/drm/i915/i915_debugfs.c: +2 -2
drivers/gpu/drm/i915/i915_driver.c: +16 -18
drivers/gpu/drm/i915/i915_drv.h: +23 -44
drivers/gpu/drm/i915/i915_gem.c: +37 -20
drivers/gpu/drm/i915/i915_getparam.c: +4 -1
drivers/gpu/drm/i915/i915_gpu_error.c: +11 -2
drivers/gpu/drm/i915/i915_hwmon.c: +732 -0
drivers/gpu/drm/i915/i915_hwmon.h: +20 -0
drivers/gpu/drm/i915/i915_irq.c: +112 -181
drivers/gpu/drm/i915/i915_irq.h: +0 -9
drivers/gpu/drm/i915/i915_pci.c: +7 -6
drivers/gpu/drm/i915/i915_perf.c: +476 -125
drivers/gpu/drm/i915/i915_perf.h: +2 -0
drivers/gpu/drm/i915/i915_perf_oa_regs.h: +5 -1
drivers/gpu/drm/i915/i915_perf_types.h: +26 -21
drivers/gpu/drm/i915/i915_pmu.c: +4 -5
drivers/gpu/drm/i915/i915_query.c: +7 -5
drivers/gpu/drm/i915/i915_reg.h: +76 -278
drivers/gpu/drm/i915/i915_reg_defs.h: +41 -16
drivers/gpu/drm/i915/i915_request.c: +24 -0
drivers/gpu/drm/i915/i915_request.h: +5 -0
drivers/gpu/drm/i915/i915_scatterlist.c: +2 -2
drivers/gpu/drm/i915/i915_selftest.h: +2 -0
drivers/gpu/drm/i915/i915_sw_fence.c: +0 -1
drivers/gpu/drm/i915/i915_sw_fence.h: +0 -1
drivers/gpu/drm/i915/i915_sysfs.c: +2 -1
drivers/gpu/drm/i915/i915_trace.h: +0 -16
drivers/gpu/drm/i915/i915_ttm_buddy_manager.c: +6 -6
drivers/gpu/drm/i915/i915_vma.c: +16 -14
drivers/gpu/drm/i915/i915_vma.h: +1 -0
drivers/gpu/drm/i915/intel_device_info.c: +82 -3
drivers/gpu/drm/i915/intel_device_info.h: +14 -6
drivers/gpu/drm/i915/intel_gvt_mmio_table.c: +2 -1
drivers/gpu/drm/i915/intel_mchbar_regs.h: +21 -0
drivers/gpu/drm/i915/intel_pci_config.h: +23 -5
drivers/gpu/drm/i915/intel_pm.c: +205 -267
drivers/gpu/drm/i915/intel_region_ttm.c: +1 -1
drivers/gpu/drm/i915/intel_runtime_pm.c: +5 -0
drivers/gpu/drm/i915/intel_runtime_pm.h: +22 -0
drivers/gpu/drm/i915/intel_step.c: +32 -0
drivers/gpu/drm/i915/intel_step.h: +27 -1
drivers/gpu/drm/i915/intel_uncore.c: +272 -30
drivers/gpu/drm/i915/intel_uncore.h: +36 -18
drivers/gpu/drm/i915/pxp/intel_pxp.c: +21 -11
drivers/gpu/drm/i915/pxp/intel_pxp.h: +0 -32
drivers/gpu/drm/i915/pxp/intel_pxp_cmd_interface_42.h: +28 -0
drivers/gpu/drm/i915/pxp/intel_pxp_cmd_interface_43.h: +26 -0
drivers/gpu/drm/i915/pxp/intel_pxp_cmd_interface_cmn.h: +35 -0
drivers/gpu/drm/i915/pxp/intel_pxp_huc.c: +70 -0
drivers/gpu/drm/i915/pxp/intel_pxp_huc.h: +13 -0
drivers/gpu/drm/i915/pxp/intel_pxp_irq.h: +8 -0
drivers/gpu/drm/i915/pxp/intel_pxp_session.c: +8 -1
drivers/gpu/drm/i915/pxp/intel_pxp_session.h: +8 -3
drivers/gpu/drm/i915/pxp/intel_pxp_tee.c: +143 -11
drivers/gpu/drm/i915/pxp/intel_pxp_tee.h: +5 -0
drivers/gpu/drm/i915/pxp/intel_pxp_tee_interface.h: +0 -36
drivers/gpu/drm/i915/pxp/intel_pxp_types.h: +6 -0
drivers/gpu/drm/i915/selftests/i915_gem_gtt.c: +3 -12
drivers/gpu/drm/i915/selftests/i915_perf.c: +11 -5
drivers/gpu/drm/i915/selftests/i915_request.c: +167 -99
drivers/gpu/drm/i915/selftests/igt_spinner.c: +2 -18
drivers/gpu/drm/i915/selftests/intel_uncore.c: +4 -0
drivers/gpu/drm/i915/selftests/mock_gem_device.c: +0 -1
drivers/gpu/drm/i915/selftests/mock_region.c: +1 -1
drivers/gpu/drm/i915/vlv_sideband.c: +2 -0
drivers/gpu/drm/i915/vlv_suspend.c: +8 -20
drivers/gpu/drm/imx/dcss/dcss-kms.c: +1 -2
drivers/gpu/drm/imx/imx-drm-core.c: +1 -1
drivers/gpu/drm/imx/imx-ldb.c: +1 -1
drivers/gpu/drm/imx/imx-tve.c: +0 -1
drivers/gpu/drm/imx/parallel-display.c: +1 -1
drivers/gpu/drm/ingenic/ingenic-drm-drv.c: +6 -3
drivers/gpu/drm/kmb/kmb_drv.c: +1 -1
drivers/gpu/drm/kmb/kmb_plane.c: +0 -1
drivers/gpu/drm/lima/lima_sched.c: +2 -2
drivers/gpu/drm/logicvc/logicvc_drm.c: +1 -1
drivers/gpu/drm/logicvc/logicvc_mode.c: +0 -2
drivers/gpu/drm/mcde/mcde_drv.c: +1 -2
drivers/gpu/drm/mediatek/mtk_disp_ovl.c: +55 -2
drivers/gpu/drm/mediatek/mtk_dpi.c: +23 -6
drivers/gpu/drm/mediatek/mtk_drm_drv.c: +9 -1
drivers/gpu/drm/mediatek/mtk_drm_plane.c: +71 -3
drivers/gpu/drm/mediatek/mtk_drm_plane.h: +8 -0
drivers/gpu/drm/mediatek/mtk_hdmi.c: +5 -4
drivers/gpu/drm/meson/meson_drv.c: +1 -1
drivers/gpu/drm/meson/meson_encoder_cvbs.c: +4 -3
drivers/gpu/drm/mgag200/mgag200_drv.c: +1 -0
drivers/gpu/drm/mgag200/mgag200_drv.h: +0 -1
drivers/gpu/drm/mgag200/mgag200_g200se.c: +2 -1
drivers/gpu/drm/mgag200/mgag200_mode.c: +5 -6
drivers/gpu/drm/msm/adreno/a3xx_gpu.c: +1 -1
drivers/gpu/drm/msm/adreno/a4xx_gpu.c: +2 -3
drivers/gpu/drm/msm/adreno/a5xx_gpu.c: +11 -18
drivers/gpu/drm/msm/adreno/a5xx_preempt.c: +1 -3
drivers/gpu/drm/msm/adreno/a6xx_gmu.c: +5 -7
drivers/gpu/drm/msm/adreno/a6xx_gpu.c: +57 -60
drivers/gpu/drm/msm/adreno/a6xx_gpu_state.c: +1 -2
drivers/gpu/drm/msm/adreno/adreno_gpu.c: +15 -14
drivers/gpu/drm/msm/adreno/adreno_gpu.h: +6 -3
drivers/gpu/drm/msm/disp/dpu1/dpu_encoder_phys_vid.c: +5 -2
drivers/gpu/drm/msm/disp/dpu1/dpu_formats.c: +23 -1
drivers/gpu/drm/msm/disp/dpu1/dpu_hw_catalog.c: +97 -7
drivers/gpu/drm/msm/disp/dpu1/dpu_hw_catalog.h: +1 -0
drivers/gpu/drm/msm/disp/dpu1/dpu_hw_dsc.c: +2 -9
drivers/gpu/drm/msm/disp/dpu1/dpu_kms.c: +4 -15
drivers/gpu/drm/msm/disp/dpu1/dpu_plane.c: +2 -0
drivers/gpu/drm/msm/disp/mdp4/mdp4_kms.c: +10 -9
drivers/gpu/drm/msm/disp/mdp5/mdp5_kms.c: +14 -13
drivers/gpu/drm/msm/dp/dp_display.c: +2 -12
drivers/gpu/drm/msm/dp/dp_link.c: +12 -9
drivers/gpu/drm/msm/dsi/dsi.c: +1 -6
drivers/gpu/drm/msm/dsi/dsi_host.c: +35 -86
drivers/gpu/drm/msm/dsi/phy/dsi_phy.c: +2 -0
drivers/gpu/drm/msm/dsi/phy/dsi_phy.h: +1 -0
drivers/gpu/drm/msm/dsi/phy/dsi_phy_14nm.c: +17 -0
drivers/gpu/drm/msm/hdmi/hdmi.c: +162 -190
drivers/gpu/drm/msm/hdmi/hdmi.h: +0 -3
drivers/gpu/drm/msm/msm_drv.c: +18 -11
drivers/gpu/drm/msm/msm_drv.h: +7 -1
drivers/gpu/drm/msm/msm_fbdev.c: +2 -4
drivers/gpu/drm/msm/msm_gem_shrinker.c: +1 -1
drivers/gpu/drm/msm/msm_gem_submit.c: +1 -2
drivers/gpu/drm/msm/msm_gpu.c: +30 -1
drivers/gpu/drm/msm/msm_gpu.h: +16 -6
drivers/gpu/drm/msm/msm_iommu.c: +17 -3
drivers/gpu/drm/msm/msm_mdss.c: +77 -8
drivers/gpu/drm/msm/msm_mmu.h: +2 -1
drivers/gpu/drm/msm/msm_ringbuffer.h: +28 -0
drivers/gpu/drm/mxsfb/lcdif_drv.c: +1 -1
drivers/gpu/drm/mxsfb/lcdif_kms.c: +244 -25
drivers/gpu/drm/mxsfb/lcdif_regs.h: +25 -17
drivers/gpu/drm/mxsfb/mxsfb_drv.c: +1 -1
drivers/gpu/drm/nouveau/Kbuild: +0 -4
drivers/gpu/drm/nouveau/dispnv04/crtc.c: +16 -27
drivers/gpu/drm/nouveau/dispnv04/disp.c: +9 -6
drivers/gpu/drm/nouveau/dispnv04/disp.h: +5 -2
drivers/gpu/drm/nouveau/dispnv50/crc.c: +1 -1
drivers/gpu/drm/nouveau/dispnv50/disp.c: +130 -276
drivers/gpu/drm/nouveau/dispnv50/head.c: +12 -13
drivers/gpu/drm/nouveau/include/nvfw/acr.h: +85 -0
drivers/gpu/drm/nouveau/include/nvfw/hs.h: +28 -0
drivers/gpu/drm/nouveau/include/nvfw/ls.h: +51 -0
drivers/gpu/drm/nouveau/include/nvfw/sec2.h: +45 -0
drivers/gpu/drm/nouveau/include/nvif/cl0046.h: +0 -23
drivers/gpu/drm/nouveau/include/nvif/cl006b.h: +0 -12
drivers/gpu/drm/nouveau/include/nvif/cl0080.h: +3 -1
drivers/gpu/drm/nouveau/include/nvif/cl506e.h: +0 -13
drivers/gpu/drm/nouveau/include/nvif/cl506f.h: +0 -14
drivers/gpu/drm/nouveau/include/nvif/cl5070.h: +0 -92
drivers/gpu/drm/nouveau/include/nvif/cl826e.h: +0 -15
drivers/gpu/drm/nouveau/include/nvif/cl826f.h: +0 -16
drivers/gpu/drm/nouveau/include/nvif/cl906f.h: +0 -16
drivers/gpu/drm/nouveau/include/nvif/cla06f.h: +0 -18
drivers/gpu/drm/nouveau/include/nvif/class.h: +30 -15
drivers/gpu/drm/nouveau/include/nvif/clb069.h: +4 -1
drivers/gpu/drm/nouveau/include/nvif/clc36f.h: +0 -19
drivers/gpu/drm/nouveau/include/nvif/conn.h: +10 -0
drivers/gpu/drm/nouveau/include/nvif/disp.h: +1 -0
drivers/gpu/drm/nouveau/include/nvif/event.h: +32 -59
drivers/gpu/drm/nouveau/include/nvif/head.h: +23 -0
drivers/gpu/drm/nouveau/include/nvif/if0004.h: +4 -1
drivers/gpu/drm/nouveau/include/nvif/if000e.h: +26 -0
drivers/gpu/drm/nouveau/include/nvif/if0010.h: +1 -0
drivers/gpu/drm/nouveau/include/nvif/if0011.h: +11 -0
drivers/gpu/drm/nouveau/include/nvif/if0012.h: +98 -0
drivers/gpu/drm/nouveau/include/nvif/if0013.h: +35 -0
drivers/gpu/drm/nouveau/include/nvif/if0020.h: +45 -0
drivers/gpu/drm/nouveau/include/nvif/if0021.h: +16 -0
drivers/gpu/drm/nouveau/include/nvif/ioctl.h: +8 -43
drivers/gpu/drm/nouveau/include/nvif/notify.h: +0 -35
drivers/gpu/drm/nouveau/include/nvif/outp.h: +19 -0
drivers/gpu/drm/nouveau/include/nvkm/core/client.h: +3 -12
drivers/gpu/drm/nouveau/include/nvkm/core/device.h: +12 -0
drivers/gpu/drm/nouveau/include/nvkm/core/engine.h: +2 -6
drivers/gpu/drm/nouveau/include/nvkm/core/event.h: +53 -11
drivers/gpu/drm/nouveau/include/nvkm/core/falcon.h: +150 -17
drivers/gpu/drm/nouveau/include/nvkm/core/firmware.h: +25 -0
drivers/gpu/drm/nouveau/include/nvkm/core/intr.h: +73 -0
drivers/gpu/drm/nouveau/include/nvkm/core/layout.h: +3 -2
drivers/gpu/drm/nouveau/include/nvkm/core/memory.h: +2 -0
drivers/gpu/drm/nouveau/include/nvkm/core/notify.h: +0 -39
drivers/gpu/drm/nouveau/include/nvkm/core/object.h: +2 -0
drivers/gpu/drm/nouveau/include/nvkm/core/os.h: +20 -0
drivers/gpu/drm/nouveau/include/nvkm/core/subdev.h: +35 -7
drivers/gpu/drm/nouveau/include/nvkm/core/tegra.h: +0 -1
drivers/gpu/drm/nouveau/include/nvkm/engine/ce.h: +2 -0
drivers/gpu/drm/nouveau/include/nvkm/engine/disp.h: +2 -7
drivers/gpu/drm/nouveau/include/nvkm/engine/falcon.h: +35 -31
drivers/gpu/drm/nouveau/include/nvkm/engine/fifo.h: +53 -33
drivers/gpu/drm/nouveau/include/nvkm/engine/gr.h: +1 -0
drivers/gpu/drm/nouveau/include/nvkm/engine/nvdec.h: +1 -0
drivers/gpu/drm/nouveau/include/nvkm/engine/sec2.h: +4 -1
drivers/gpu/drm/nouveau/include/nvkm/subdev/acr.h: +27 -2
drivers/gpu/drm/nouveau/include/nvkm/subdev/fault.h: +5 -2
drivers/gpu/drm/nouveau/include/nvkm/subdev/fb.h: +7 -0
drivers/gpu/drm/nouveau/include/nvkm/subdev/gpio.h: +3 -3
drivers/gpu/drm/nouveau/include/nvkm/subdev/gsp.h: +3 -0
drivers/gpu/drm/nouveau/include/nvkm/subdev/i2c.h: +5 -14
drivers/gpu/drm/nouveau/include/nvkm/subdev/instmem.h: +1 -1
drivers/gpu/drm/nouveau/include/nvkm/subdev/ltc.h: +10 -6
drivers/gpu/drm/nouveau/include/nvkm/subdev/mc.h: +2 -4
drivers/gpu/drm/nouveau/include/nvkm/subdev/pci.h: +1 -1
drivers/gpu/drm/nouveau/include/nvkm/subdev/top.h: +1 -0
drivers/gpu/drm/nouveau/include/nvkm/subdev/vfn.h: +23 -0
drivers/gpu/drm/nouveau/nouveau_abi16.c: +13 -14
drivers/gpu/drm/nouveau/nouveau_backlight.c: +5 -1
drivers/gpu/drm/nouveau/nouveau_bo.c: +5 -2
drivers/gpu/drm/nouveau/nouveau_bo0039.c: +2 -2
drivers/gpu/drm/nouveau/nouveau_bo5039.c: +1 -1
drivers/gpu/drm/nouveau/nouveau_bo74c1.c: +1 -1
drivers/gpu/drm/nouveau/nouveau_bo85b5.c: +2 -2
drivers/gpu/drm/nouveau/nouveau_bo9039.c: +2 -2
drivers/gpu/drm/nouveau/nouveau_bo90b5.c: +2 -2
drivers/gpu/drm/nouveau/nouveau_boa0b5.c: +1 -1
drivers/gpu/drm/nouveau/nouveau_chan.c: +161 -145
drivers/gpu/drm/nouveau/nouveau_chan.h: +9 -5
drivers/gpu/drm/nouveau/nouveau_connector.c: +43 -38
drivers/gpu/drm/nouveau/nouveau_connector.h: +6 -3
drivers/gpu/drm/nouveau/nouveau_crtc.h: +4 -3
drivers/gpu/drm/nouveau/nouveau_display.c: +50 -36
drivers/gpu/drm/nouveau/nouveau_dma.c: +4 -4
drivers/gpu/drm/nouveau/nouveau_dmem.c: +0 -1
drivers/gpu/drm/nouveau/nouveau_dp.c: +29 -11
drivers/gpu/drm/nouveau/nouveau_drm.c: +21 -36
drivers/gpu/drm/nouveau/nouveau_drv.h: +7 -11
drivers/gpu/drm/nouveau/nouveau_encoder.h: +2 -3
drivers/gpu/drm/nouveau/nouveau_fbcon.c: +13 -14
drivers/gpu/drm/nouveau/nouveau_fbcon.h: +0 -82
drivers/gpu/drm/nouveau/nouveau_fence.c: +25 -28
drivers/gpu/drm/nouveau/nouveau_fence.h: +2 -2
drivers/gpu/drm/nouveau/nouveau_gem.c: +2 -3
drivers/gpu/drm/nouveau/nouveau_mem.c: +2 -2
drivers/gpu/drm/nouveau/nouveau_nvif.c: +14 -3
drivers/gpu/drm/nouveau/nouveau_svm.c: +32 -18
drivers/gpu/drm/nouveau/nouveau_ttm.c: +1 -1
drivers/gpu/drm/nouveau/nouveau_usif.c: +0 -6
drivers/gpu/drm/nouveau/nouveau_vga.c: +0 -1
drivers/gpu/drm/nouveau/nv04_fbcon.c: +0 -257
drivers/gpu/drm/nouveau/nv50_fbcon.c: +0 -299
drivers/gpu/drm/nouveau/nv84_fence.c: +15 -9
drivers/gpu/drm/nouveau/nvc0_fbcon.c: +0 -297
drivers/gpu/drm/nouveau/nvif/Kbuild: +2 -1
drivers/gpu/drm/nouveau/nvif/conn.c: +19 -0
drivers/gpu/drm/nouveau/nvif/disp.c: +3 -2
drivers/gpu/drm/nouveau/nvif/event.c: +81 -0
drivers/gpu/drm/nouveau/nvif/head.c: +58 -0
drivers/gpu/drm/nouveau/nvif/notify.c: +0 -210
drivers/gpu/drm/nouveau/nvif/outp.c: +176 -2
drivers/gpu/drm/nouveau/nvif/user.c: +3 -1
drivers/gpu/drm/nouveau/nvkm/core/Kbuild: +2 -1
drivers/gpu/drm/nouveau/nvkm/core/client.c: +5 -125
drivers/gpu/drm/nouveau/nvkm/core/engine.c: +35 -50
drivers/gpu/drm/nouveau/nvkm/core/event.c: +136 -22
drivers/gpu/drm/nouveau/nvkm/core/firmware.c: +127 -0
drivers/gpu/drm/nouveau/nvkm/core/intr.c: +442 -0
drivers/gpu/drm/nouveau/nvkm/core/ioctl.c: +23 -92
drivers/gpu/drm/nouveau/nvkm/core/notify.c: +0 -163
drivers/gpu/drm/nouveau/nvkm/core/oproxy.c: +19 -1
drivers/gpu/drm/nouveau/nvkm/core/subdev.c: +99 -18
drivers/gpu/drm/nouveau/nvkm/core/uevent.c: +157 -0
drivers/gpu/drm/nouveau/nvkm/engine/ce/Kbuild: +2 -0
drivers/gpu/drm/nouveau/nvkm/engine/ce/ga100.c: +82 -0
drivers/gpu/drm/nouveau/nvkm/engine/{fifo/usertu102.c => ce/ga102.c}: +17 -18
drivers/gpu/drm/nouveau/nvkm/engine/ce/gt215.c: +3 -3
drivers/gpu/drm/nouveau/nvkm/engine/ce/priv.h: +4 -0
drivers/gpu/drm/nouveau/nvkm/engine/cipher/g84.c: +5 -6
drivers/gpu/drm/nouveau/nvkm/engine/device/base.c: +88 -16
drivers/gpu/drm/nouveau/nvkm/engine/device/pci.c: +7 -0
drivers/gpu/drm/nouveau/nvkm/engine/device/priv.h: +1 -0
drivers/gpu/drm/nouveau/nvkm/engine/device/tegra.c: +3 -37
drivers/gpu/drm/nouveau/nvkm/engine/device/user.c: +2 -0
drivers/gpu/drm/nouveau/nvkm/engine/disp/Kbuild: +1 -3
drivers/gpu/drm/nouveau/nvkm/engine/disp/base.c: +5 -88
drivers/gpu/drm/nouveau/nvkm/engine/disp/conn.c: +0 -39
drivers/gpu/drm/nouveau/nvkm/engine/disp/conn.h: +0 -3
drivers/gpu/drm/nouveau/nvkm/engine/disp/dp.c: +136 -147
drivers/gpu/drm/nouveau/nvkm/engine/disp/dp.h: +1 -0
drivers/gpu/drm/nouveau/nvkm/engine/disp/g84.c: +56 -35
drivers/gpu/drm/nouveau/nvkm/engine/disp/ga102.c: +1 -4
drivers/gpu/drm/nouveau/nvkm/engine/disp/gf119.c: +57 -36
drivers/gpu/drm/nouveau/nvkm/engine/disp/gk104.c: +53 -32
drivers/gpu/drm/nouveau/nvkm/engine/disp/gm107.c: +1 -3
drivers/gpu/drm/nouveau/nvkm/engine/disp/gm200.c: +9 -4
drivers/gpu/drm/nouveau/nvkm/engine/disp/gp100.c: +1 -4
drivers/gpu/drm/nouveau/nvkm/engine/disp/gt215.c: +55 -34
drivers/gpu/drm/nouveau/nvkm/engine/disp/gv100.c: +57 -38
drivers/gpu/drm/nouveau/nvkm/engine/disp/head.c: +0 -38
drivers/gpu/drm/nouveau/nvkm/engine/disp/head.h: +3 -2
drivers/gpu/drm/nouveau/nvkm/engine/disp/ior.h: +14 -9
drivers/gpu/drm/nouveau/nvkm/engine/disp/mcp77.c: +1 -3
drivers/gpu/drm/nouveau/nvkm/engine/disp/mcp89.c: +1 -3
drivers/gpu/drm/nouveau/nvkm/engine/disp/nv50.c: +7 -5
drivers/gpu/drm/nouveau/nvkm/engine/disp/outp.h: +13 -3
drivers/gpu/drm/nouveau/nvkm/engine/disp/priv.h: +1 -4
drivers/gpu/drm/nouveau/nvkm/engine/disp/rootnv50.c: +0 -250
drivers/gpu/drm/nouveau/nvkm/engine/disp/tu102.c: +1 -4
drivers/gpu/drm/nouveau/nvkm/engine/disp/uconn.c: +75 -0
drivers/gpu/drm/nouveau/nvkm/engine/disp/udisp.c: +12 -13
drivers/gpu/drm/nouveau/nvkm/engine/disp/uhead.c: +127 -0
drivers/gpu/drm/nouveau/nvkm/engine/disp/uoutp.c: +250 -0
drivers/gpu/drm/nouveau/nvkm/engine/falcon.c: +3 -3
drivers/gpu/drm/nouveau/nvkm/engine/fifo/Kbuild: +10 -20
drivers/gpu/drm/nouveau/nvkm/engine/fifo/base.c: +240 -208
drivers/gpu/drm/nouveau/nvkm/engine/fifo/cgrp.c: +252 -0
drivers/gpu/drm/nouveau/nvkm/engine/fifo/cgrp.h: +70 -6
drivers/gpu/drm/nouveau/nvkm/engine/fifo/chan.c: +360 -273
drivers/gpu/drm/nouveau/nvkm/engine/fifo/chan.h: +71 -28
drivers/gpu/drm/nouveau/nvkm/engine/fifo/chang84.c: +0 -263
drivers/gpu/drm/nouveau/nvkm/engine/fifo/changf100.h: +0 -29
drivers/gpu/drm/nouveau/nvkm/engine/fifo/changk104.h: +0 -52
drivers/gpu/drm/nouveau/nvkm/engine/fifo/channv04.h: +0 -29
drivers/gpu/drm/nouveau/nvkm/engine/fifo/channv50.c: +0 -276
drivers/gpu/drm/nouveau/nvkm/engine/fifo/channv50.h: +0 -53
drivers/gpu/drm/nouveau/nvkm/engine/fifo/chid.c: +111 -0
drivers/gpu/drm/nouveau/nvkm/engine/fifo/chid.h: +25 -0
drivers/gpu/drm/nouveau/nvkm/engine/fifo/dmanv04.c: +0 -226
drivers/gpu/drm/nouveau/nvkm/engine/fifo/dmanv10.c: +0 -97
drivers/gpu/drm/nouveau/nvkm/engine/fifo/dmanv17.c: +0 -98
drivers/gpu/drm/nouveau/nvkm/engine/fifo/dmanv40.c: +0 -254
drivers/gpu/drm/nouveau/nvkm/engine/fifo/g84.c: +176 -77
drivers/gpu/drm/nouveau/nvkm/engine/fifo/g98.c: +70 -0
drivers/gpu/drm/nouveau/nvkm/engine/fifo/ga100.c: +550 -0
drivers/gpu/drm/nouveau/nvkm/engine/fifo/ga102.c: +13 -279
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gf100.c: +606 -336
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gf100.h: +0 -38
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gk104.c: +588 -1004
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gk104.h: +0 -168
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gk110.c: +85 -20
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gk208.c: +36 -23
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gk20a.c: +20 -13
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gm107.c: +76 -33
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gm200.c: +27 -22
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gm20b.c: +0 -45
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gp100.c: +70 -29
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gp10b.c: +0 -46
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gpfifog84.c: +0 -95
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gpfifogf100.c: +0 -308
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gpfifogk104.c: +0 -361
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gpfifogv100.c: +0 -241
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gpfifonv50.c: +0 -93
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gpfifotu102.c: +0 -81
drivers/gpu/drm/nouveau/nvkm/engine/fifo/gv100.c: +218 -34
drivers/gpu/drm/nouveau/nvkm/engine/fifo/nv04.c: +244 -100
drivers/gpu/drm/nouveau/nvkm/engine/fifo/nv04.h: +0 -23
drivers/gpu/drm/nouveau/nvkm/engine/fifo/nv10.c: +73 -21
drivers/gpu/drm/nouveau/nvkm/engine/fifo/nv17.c: +73 -30
drivers/gpu/drm/nouveau/nvkm/engine/fifo/nv40.c: +160 -38
drivers/gpu/drm/nouveau/nvkm/engine/fifo/nv50.c: +315 -66
drivers/gpu/drm/nouveau/nvkm/engine/fifo/nv50.h: +0 -20
drivers/gpu/drm/nouveau/nvkm/engine/fifo/priv.h: +192 -31
drivers/gpu/drm/nouveau/nvkm/engine/fifo/runl.c: +430 -0
drivers/gpu/drm/nouveau/nvkm/engine/fifo/runl.h: +125 -0
drivers/gpu/drm/nouveau/nvkm/engine/fifo/runq.c: +45 -0
drivers/gpu/drm/nouveau/nvkm/engine/fifo/runq.h: +31 -0
drivers/gpu/drm/nouveau/nvkm/engine/fifo/tu102.c: +140 -331
drivers/gpu/drm/nouveau/nvkm/engine/fifo/ucgrp.c: +125 -0
drivers/gpu/drm/nouveau/nvkm/engine/fifo/uchan.c: +409 -0
drivers/gpu/drm/nouveau/nvkm/engine/fifo/user.h: +0 -8
drivers/gpu/drm/nouveau/nvkm/engine/gr/Kbuild: +2 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/base.c: +12 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxga102.c: +77 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgf100.c: +104 -120
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgf100.h: +39 -38
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgf104.c: +2 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgf108.c: +9 -12
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgf110.c: +2 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgf117.c: +11 -13
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgf119.c: +2 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgk104.c: +16 -24
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgk110.c: +2 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgk110b.c: +2 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgk208.c: +2 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgk20a.c: +8 -4
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgm107.c: +34 -37
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgm200.c: +3 -1
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgm20b.c: +8 -4
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgp100.c: +46 -34
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgp102.c: +33 -27
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgp104.c: +2 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgp107.c: +2 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxgv100.c: +35 -27
drivers/gpu/drm/nouveau/nvkm/engine/gr/ctxtu102.c: +17 -18
drivers/gpu/drm/nouveau/nvkm/engine/gr/ga102.c: +347 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.c: +323 -165
drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.h: +53 -27
drivers/gpu/drm/nouveau/nvkm/engine/gr/gf104.c: +3 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/gf108.c: +3 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/gf110.c: +3 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/gf117.c: +6 -1
drivers/gpu/drm/nouveau/nvkm/engine/gr/gf119.c: +3 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/gk104.c: +4 -1
drivers/gpu/drm/nouveau/nvkm/engine/gr/gk110.c: +3 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/gk110b.c: +3 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/gk208.c: +3 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/gk20a.c: +51 -68
drivers/gpu/drm/nouveau/nvkm/engine/gr/gm107.c: +3 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/gm200.c: +5 -2
drivers/gpu/drm/nouveau/nvkm/engine/gr/gm20b.c: +1 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/gp100.c: +4 -1
drivers/gpu/drm/nouveau/nvkm/engine/gr/gp102.c: +6 -3
drivers/gpu/drm/nouveau/nvkm/engine/gr/gp104.c: +3 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/gp107.c: +3 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/gp108.c: +2 -2
drivers/gpu/drm/nouveau/nvkm/engine/gr/gp10b.c: +3 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/gv100.c: +199 -4
drivers/gpu/drm/nouveau/nvkm/engine/gr/nv04.c: +1 -1
drivers/gpu/drm/nouveau/nvkm/engine/gr/nv10.c: +1 -1
drivers/gpu/drm/nouveau/nvkm/engine/gr/nv20.c: +5 -5
drivers/gpu/drm/nouveau/nvkm/engine/gr/nv25.c: +1 -1
drivers/gpu/drm/nouveau/nvkm/engine/gr/nv2a.c: +1 -1
drivers/gpu/drm/nouveau/nvkm/engine/gr/nv30.c: +1 -1
drivers/gpu/drm/nouveau/nvkm/engine/gr/nv34.c: +1 -1
drivers/gpu/drm/nouveau/nvkm/engine/gr/nv35.c: +1 -1
drivers/gpu/drm/nouveau/nvkm/engine/gr/nv40.c: +2 -2
drivers/gpu/drm/nouveau/nvkm/engine/gr/nv50.c: +5 -5
drivers/gpu/drm/nouveau/nvkm/engine/gr/priv.h: +1 -0
drivers/gpu/drm/nouveau/nvkm/engine/gr/tu102.c: +38 -9
drivers/gpu/drm/nouveau/nvkm/engine/mpeg/nv31.c: +2 -2
drivers/gpu/drm/nouveau/nvkm/engine/mpeg/nv44.c: +2 -2
drivers/gpu/drm/nouveau/nvkm/engine/nvdec/Kbuild: +1 -0
drivers/gpu/drm/nouveau/nvkm/engine/nvdec/base.c: +2 -2
drivers/gpu/drm/nouveau/nvkm/engine/nvdec/ga102.c: +61 -0
drivers/gpu/drm/nouveau/nvkm/engine/nvdec/gm107.c: +7 -12
drivers/gpu/drm/nouveau/nvkm/engine/nvdec/priv.h: +1 -1
drivers/gpu/drm/nouveau/nvkm/engine/nvenc/gm107.c: +0 -11
drivers/gpu/drm/nouveau/nvkm/engine/sec/g98.c: +3 -3
drivers/gpu/drm/nouveau/nvkm/engine/sec2/Kbuild: +1 -0
drivers/gpu/drm/nouveau/nvkm/engine/sec2/base.c: +72 -26
drivers/gpu/drm/nouveau/nvkm/engine/sec2/ga102.c: +197 -0
drivers/gpu/drm/nouveau/nvkm/engine/sec2/gp102.c: +42 -74
drivers/gpu/drm/nouveau/nvkm/engine/sec2/priv.h: +7 -2
drivers/gpu/drm/nouveau/nvkm/engine/sec2/tu102.c: +15 -11
drivers/gpu/drm/nouveau/nvkm/engine/sw/base.c: +1 -1
drivers/gpu/drm/nouveau/nvkm/engine/sw/chan.c: +2 -22
drivers/gpu/drm/nouveau/nvkm/engine/sw/chan.h: +1 -0
drivers/gpu/drm/nouveau/nvkm/engine/sw/gf100.c: +6 -14
drivers/gpu/drm/nouveau/nvkm/engine/sw/nv50.c: +9 -15
drivers/gpu/drm/nouveau/nvkm/engine/sw/nv50.h: +2 -2
drivers/gpu/drm/nouveau/nvkm/engine/sw/nvsw.c: +18 -17
drivers/gpu/drm/nouveau/nvkm/falcon/Kbuild: +6 -0
drivers/gpu/drm/nouveau/nvkm/falcon/base.c: +172 -73
drivers/gpu/drm/nouveau/nvkm/falcon/cmdq.c: +1 -1
drivers/gpu/drm/nouveau/nvkm/falcon/fw.c: +354 -0
drivers/gpu/drm/nouveau/nvkm/falcon/ga100.c: +62 -0
drivers/gpu/drm/nouveau/nvkm/falcon/ga102.c: +148 -0
drivers/gpu/drm/nouveau/nvkm/falcon/gm200.c: +345 -0
drivers/gpu/drm/nouveau/nvkm/falcon/gp102.c: +82 -0
drivers/gpu/drm/nouveau/nvkm/falcon/msgq.c: +5 -5
drivers/gpu/drm/nouveau/nvkm/falcon/priv.h: +8 -0
drivers/gpu/drm/nouveau/nvkm/falcon/qmgr.h: +4 -5
drivers/gpu/drm/nouveau/nvkm/falcon/v1.c: +0 -210
drivers/gpu/drm/nouveau/nvkm/nvfw/acr.c: +41 -0
drivers/gpu/drm/nouveau/nvkm/nvfw/hs.c: +39 -0
drivers/gpu/drm/nouveau/nvkm/nvfw/ls.c: +72 -0
drivers/gpu/drm/nouveau/nvkm/subdev/Kbuild: +1 -0
drivers/gpu/drm/nouveau/nvkm/subdev/acr/Kbuild: +3 -1
drivers/gpu/drm/nouveau/nvkm/subdev/acr/base.c: +79 -73
drivers/gpu/drm/nouveau/nvkm/subdev/acr/ga100.c: +49 -0
drivers/gpu/drm/nouveau/nvkm/subdev/acr/ga102.c: +326 -0
drivers/gpu/drm/nouveau/nvkm/subdev/acr/gm200.c: +43 -156
drivers/gpu/drm/nouveau/nvkm/subdev/acr/gm20b.c: +24 -20
drivers/gpu/drm/nouveau/nvkm/subdev/acr/gp102.c: +17 -14
drivers/gpu/drm/nouveau/nvkm/subdev/acr/gp108.c: +27 -28
drivers/gpu/drm/nouveau/nvkm/subdev/acr/gp10b.c: +1 -1
drivers/gpu/drm/nouveau/nvkm/subdev/acr/gv100.c: +67 -0
drivers/gpu/drm/nouveau/nvkm/subdev/acr/hsfw.c: +0 -177
drivers/gpu/drm/nouveau/nvkm/subdev/acr/lsfw.c: +145 -0
drivers/gpu/drm/nouveau/nvkm/subdev/acr/priv.h: +34 -70
drivers/gpu/drm/nouveau/nvkm/subdev/acr/tu102.c: +6 -32
drivers/gpu/drm/nouveau/nvkm/subdev/devinit/gm200.c: +7 -1
drivers/gpu/drm/nouveau/nvkm/subdev/fault/base.c: +2 -19
drivers/gpu/drm/nouveau/nvkm/subdev/fault/gp100.c: +1 -1
drivers/gpu/drm/nouveau/nvkm/subdev/fault/gv100.c: +26 -15
drivers/gpu/drm/nouveau/nvkm/subdev/fault/priv.h: +3 -0
drivers/gpu/drm/nouveau/nvkm/subdev/fault/tu102.c: +58 -62
drivers/gpu/drm/nouveau/nvkm/subdev/fault/user.c: +17 -13
drivers/gpu/drm/nouveau/nvkm/subdev/fb/base.c: +50 -11
drivers/gpu/drm/nouveau/nvkm/subdev/fb/ga100.c: +2 -1
drivers/gpu/drm/nouveau/nvkm/subdev/fb/ga102.c: +34 -1
drivers/gpu/drm/nouveau/nvkm/subdev/fb/gf100.c: +7 -18
drivers/gpu/drm/nouveau/nvkm/subdev/fb/gf100.h: +0 -4
drivers/gpu/drm/nouveau/nvkm/subdev/fb/gm200.c: +1 -3
drivers/gpu/drm/nouveau/nvkm/subdev/fb/gm20b.c: +1 -0
drivers/gpu/drm/nouveau/nvkm/subdev/fb/gp100.c: +2 -16
drivers/gpu/drm/nouveau/nvkm/subdev/fb/gp102.c: +9 -57
drivers/gpu/drm/nouveau/nvkm/subdev/fb/gp10b.c: +1 -0
drivers/gpu/drm/nouveau/nvkm/subdev/fb/gv100.c: +2 -1
drivers/gpu/drm/nouveau/nvkm/subdev/fb/nv50.c: +12 -37
drivers/gpu/drm/nouveau/nvkm/subdev/fb/nv50.h: +0 -2
drivers/gpu/drm/nouveau/nvkm/subdev/fb/priv.h: +7 -2
drivers/gpu/drm/nouveau/nvkm/subdev/fb/ram.c: +8 -0
drivers/gpu/drm/nouveau/nvkm/subdev/gpio/base.c: +4 -23
drivers/gpu/drm/nouveau/nvkm/subdev/gsp/Kbuild: +1 -0
drivers/gpu/drm/nouveau/nvkm/subdev/gsp/base.c: +3 -1
drivers/gpu/drm/nouveau/nvkm/subdev/gsp/ga102.c: +59 -0
drivers/gpu/drm/nouveau/nvkm/subdev/gsp/gv100.c: +17 -14
drivers/gpu/drm/nouveau/nvkm/subdev/gsp/priv.h: +5 -1
drivers/gpu/drm/nouveau/nvkm/subdev/i2c/base.c: +3 -24
drivers/gpu/drm/nouveau/nvkm/subdev/instmem/base.c: +12 -0
drivers/gpu/drm/nouveau/nvkm/subdev/instmem/nv50.c: +22 -5
drivers/gpu/drm/nouveau/nvkm/subdev/instmem/priv.h: +1 -0
drivers/gpu/drm/nouveau/nvkm/subdev/ltc/Kbuild: +1 -0
drivers/gpu/drm/nouveau/nvkm/subdev/ltc/base.c: +7 -3
drivers/gpu/drm/nouveau/nvkm/subdev/ltc/ga102.c: +57 -0
drivers/gpu/drm/nouveau/nvkm/subdev/ltc/gf100.c: +2 -1
drivers/gpu/drm/nouveau/nvkm/subdev/ltc/gk104.c: +2 -1
drivers/gpu/drm/nouveau/nvkm/subdev/ltc/gm107.c: +2 -1
drivers/gpu/drm/nouveau/nvkm/subdev/ltc/gm200.c: +2 -1
drivers/gpu/drm/nouveau/nvkm/subdev/ltc/gp100.c: +2 -1
drivers/gpu/drm/nouveau/nvkm/subdev/ltc/gp102.c: +2 -1
drivers/gpu/drm/nouveau/nvkm/subdev/ltc/gp10b.c: +2 -1
drivers/gpu/drm/nouveau/nvkm/subdev/ltc/priv.h: +2 -1
drivers/gpu/drm/nouveau/nvkm/subdev/mc/Kbuild: +0 -1
drivers/gpu/drm/nouveau/nvkm/subdev/mc/base.c: +25 -105
drivers/gpu/drm/nouveau/nvkm/subdev/mc/g84.c: +17 -18
drivers/gpu/drm/nouveau/nvkm/subdev/mc/g98.c: +17 -18
drivers/gpu/drm/nouveau/nvkm/subdev/mc/ga100.c: +26 -24
drivers/gpu/drm/nouveau/nvkm/subdev/mc/gf100.c: +23 -59
drivers/gpu/drm/nouveau/nvkm/subdev/mc/gk104.c: +19 -19
drivers/gpu/drm/nouveau/nvkm/subdev/mc/gk20a.c: +4 -5
drivers/gpu/drm/nouveau/nvkm/subdev/mc/gp100.c: +50 -76
drivers/gpu/drm/nouveau/nvkm/subdev/mc/gp10b.c: +5 -6
drivers/gpu/drm/nouveau/nvkm/subdev/mc/gt215.c: +40 -23
drivers/gpu/drm/nouveau/nvkm/subdev/mc/nv04.c: +72 -21
drivers/gpu/drm/nouveau/nvkm/subdev/mc/nv11.c: +10 -11
drivers/gpu/drm/nouveau/nvkm/subdev/mc/nv17.c: +11 -12
drivers/gpu/drm/nouveau/nvkm/subdev/mc/nv44.c: +3 -4
drivers/gpu/drm/nouveau/nvkm/subdev/mc/nv50.c: +14 -15
drivers/gpu/drm/nouveau/nvkm/subdev/mc/priv.h: +23 -27
drivers/gpu/drm/nouveau/nvkm/subdev/mc/tu102.c: +0 -136
drivers/gpu/drm/nouveau/nvkm/subdev/mmu/uvmm.c: +1 -1
drivers/gpu/drm/nouveau/nvkm/subdev/pci/base.c: +9 -35
drivers/gpu/drm/nouveau/nvkm/subdev/pmu/base.c: +3 -47
drivers/gpu/drm/nouveau/nvkm/subdev/pmu/gk20a.c: +0 -1
drivers/gpu/drm/nouveau/nvkm/subdev/pmu/gm200.c: +22 -18
drivers/gpu/drm/nouveau/nvkm/subdev/pmu/gm20b.c: +39 -17
drivers/gpu/drm/nouveau/nvkm/subdev/pmu/gp102.c: +16 -16
drivers/gpu/drm/nouveau/nvkm/subdev/pmu/gp10b.c: +2 -13
drivers/gpu/drm/nouveau/nvkm/subdev/pmu/gt215.c: +19 -14
drivers/gpu/drm/nouveau/nvkm/subdev/pmu/priv.h: +2 -3
drivers/gpu/drm/nouveau/nvkm/subdev/top/base.c: +8 -5
drivers/gpu/drm/nouveau/nvkm/subdev/top/ga100.c: +2 -2
drivers/gpu/drm/nouveau/nvkm/subdev/top/gk104.c: +2 -2
drivers/gpu/drm/nouveau/nvkm/subdev/top/priv.h: +1 -1
drivers/gpu/drm/nouveau/nvkm/subdev/vfn/Kbuild: +6 -0
drivers/gpu/drm/nouveau/nvkm/{engine/disp/rootnv04.c => subdev/vfn/base.c}: +28 -30
drivers/gpu/drm/nouveau/nvkm/subdev/vfn/ga100.c: +47 -0
drivers/gpu/drm/nouveau/nvkm/{engine/fifo/usergv100.c => subdev/vfn/gv100.c}: +9 -18
drivers/gpu/drm/nouveau/nvkm/subdev/vfn/priv.h: +25 -0
drivers/gpu/drm/nouveau/nvkm/subdev/vfn/tu102.c: +108 -0
drivers/gpu/drm/nouveau/nvkm/subdev/vfn/uvfn.c: +67 -0
drivers/gpu/drm/omapdrm/omap_fbdev.c: +3 -5
drivers/gpu/drm/omapdrm/omap_gem_dmabuf.c: +4 -2
drivers/gpu/drm/panel/Kconfig: +19 -0
drivers/gpu/drm/panel/Makefile: +2 -0
drivers/gpu/drm/panel/panel-edp.c: +2 -0
drivers/gpu/drm/panel/panel-ilitek-ili9341.c: +2 -1
drivers/gpu/drm/panel/panel-jadard-jd9365da-h3.c: +473 -0
drivers/gpu/drm/panel/panel-newvision-nv3051d.c: +504 -0
drivers/gpu/drm/panel/panel-samsung-db7430.c: +7 -0
drivers/gpu/drm/panel/panel-sitronix-st7701.c: +35 -35
drivers/gpu/drm/panel/panel-tpo-tpg110.c: +7 -0
drivers/gpu/drm/panel/panel-widechips-ws2401.c: +7 -0
drivers/gpu/drm/panfrost/panfrost_dump.c: +2 -2
drivers/gpu/drm/panfrost/panfrost_perfcnt.c: +3 -3
drivers/gpu/drm/pl111/pl111_drv.c: +1 -1
drivers/gpu/drm/qxl/qxl_display.c: +0 -2
drivers/gpu/drm/qxl/qxl_drv.c: +1 -0
drivers/gpu/drm/qxl/qxl_drv.h: +0 -1
drivers/gpu/drm/qxl/qxl_object.c: +9 -8
drivers/gpu/drm/qxl/qxl_prime.c: +2 -2
drivers/gpu/drm/radeon/Kconfig: +30 -0
drivers/gpu/drm/radeon/atombios.h: +1 -1
drivers/gpu/drm/radeon/radeon.h: +8 -0
drivers/gpu/drm/radeon/radeon_atombios.c: +5 -2
drivers/gpu/drm/radeon/radeon_audio.c: +117 -0
drivers/gpu/drm/radeon/radeon_bios.c: +12 -7
drivers/gpu/drm/radeon/radeon_cs.c: +5 -2
drivers/gpu/drm/radeon/radeon_device.c: +5 -1
drivers/gpu/drm/radeon/radeon_display.c: +0 -2
drivers/gpu/drm/radeon/radeon_fb.c: +5 -3
drivers/gpu/drm/radeon/radeon_object.c: +2 -2
drivers/gpu/drm/radeon/radeon_trace.h: +1 -1
drivers/gpu/drm/radeon/radeon_ttm.c: +4 -4
drivers/gpu/drm/rcar-du/Kconfig: +8 -2
drivers/gpu/drm/rcar-du/Makefile: +2 -0
drivers/gpu/drm/rcar-du/rcar_du_drv.c: +1 -1
drivers/gpu/drm/rcar-du/rzg2l_mipi_dsi.c: +816 -0
drivers/gpu/drm/rcar-du/rzg2l_mipi_dsi_regs.h: +151 -0
drivers/gpu/drm/rockchip/cdn-dp-core.c: +1 -1
drivers/gpu/drm/rockchip/dw-mipi-dsi-rockchip.c: +1 -7
drivers/gpu/drm/rockchip/inno_hdmi.c: +1 -1
drivers/gpu/drm/rockchip/rk3066_hdmi.c: +1 -1
drivers/gpu/drm/rockchip/rockchip_drm_drv.c: +1 -1
drivers/gpu/drm/rockchip/rockchip_drm_drv.h: +1 -1
drivers/gpu/drm/rockchip/rockchip_drm_fb.c: +0 -45
drivers/gpu/drm/rockchip/rockchip_drm_fb.h: +0 -6
drivers/gpu/drm/rockchip/rockchip_drm_gem.c: +1 -0
drivers/gpu/drm/rockchip/rockchip_drm_vop.c: +2 -2
drivers/gpu/drm/rockchip/rockchip_drm_vop2.c: +1 -1
drivers/gpu/drm/rockchip/rockchip_lvds.c: +7 -3
drivers/gpu/drm/rockchip/rockchip_vop2_reg.c: +1 -1
drivers/gpu/drm/scheduler/sched_entity.c: +111 -105
drivers/gpu/drm/scheduler/sched_main.c: +136 -93
drivers/gpu/drm/solomon/ssd130x.c: +14 -23
drivers/gpu/drm/sti/sti_drv.c: +1 -1
drivers/gpu/drm/sti/sti_dvo.c: +1 -1
drivers/gpu/drm/sti/sti_hda.c: +1 -1
drivers/gpu/drm/sti/sti_hdmi.c: +1 -1
drivers/gpu/drm/stm/drv.c: +1 -1
drivers/gpu/drm/sun4i/sun4i_drv.c: +1 -1
drivers/gpu/drm/sun4i/sun6i_mipi_dsi.c: +43 -18
drivers/gpu/drm/sun4i/sun6i_mipi_dsi.h: +7 -0
drivers/gpu/drm/tegra/Makefile: +2 -1
drivers/gpu/drm/tegra/dc.c: +3 -1
drivers/gpu/drm/tegra/drm.c: +1 -0
drivers/gpu/drm/tegra/fb.c: +5 -4
drivers/gpu/drm/tegra/gem.c: +11 -8
drivers/gpu/drm/tegra/hdmi.c: +1 -8
drivers/gpu/drm/tegra/nvdec.c: +146 -25
drivers/gpu/drm/tegra/output.c: +5 -5
drivers/gpu/drm/tegra/riscv.c: +106 -0
drivers/gpu/drm/tegra/riscv.h: +30 -0
drivers/gpu/drm/tegra/submit.c: +4 -9
drivers/gpu/drm/tegra/uapi.c: +1 -1
drivers/gpu/drm/tests/Makefile: +12 -3
drivers/gpu/drm/tests/drm_buddy_test.c: +4 -2
drivers/gpu/drm/tests/drm_client_modeset_test.c: +98 -0
drivers/gpu/drm/tests/drm_dp_mst_helper_test.c: +295 -150
drivers/gpu/drm/tests/drm_kunit_helpers.c: +71 -0
drivers/gpu/drm/tests/drm_kunit_helpers.h: +11 -0
drivers/gpu/drm/tests/drm_mm_test.c: +6 -2
drivers/gpu/drm/tests/drm_plane_helper_test.c: +274 -193
drivers/gpu/drm/tidss/tidss_drv.c: +1 -1
drivers/gpu/drm/tidss/tidss_kms.c: +0 -1
drivers/gpu/drm/tilcdc/tilcdc_drv.c: +1 -1
drivers/gpu/drm/tiny/Kconfig: +13 -0
drivers/gpu/drm/tiny/Makefile: +1 -0
drivers/gpu/drm/tiny/arcpgu.c: +1 -1
drivers/gpu/drm/tiny/bochs.c: +1 -2
drivers/gpu/drm/tiny/cirrus.c: +1 -1
drivers/gpu/drm/tiny/gm12u320.c: +1 -1
drivers/gpu/drm/tiny/hx8357d.c: +1 -1
drivers/gpu/drm/tiny/ili9163.c: +1 -1
drivers/gpu/drm/tiny/ili9225.c: +1 -1
drivers/gpu/drm/tiny/ili9341.c: +1 -1
drivers/gpu/drm/tiny/ili9486.c: +1 -1
drivers/gpu/drm/tiny/mi0283qt.c: +1 -1
drivers/gpu/drm/tiny/ofdrm.c: +1429 -0
drivers/gpu/drm/tiny/panel-mipi-dbi.c: +1 -1
drivers/gpu/drm/tiny/repaper.c: +1 -1
drivers/gpu/drm/tiny/simpledrm.c: +3 -15
drivers/gpu/drm/tiny/st7586.c: +1 -1
drivers/gpu/drm/tiny/st7735r.c: +1 -1
drivers/gpu/drm/ttm/ttm_bo.c: +0 -3
drivers/gpu/drm/ttm/ttm_bo_util.c: +3 -3
drivers/gpu/drm/ttm/ttm_bo_vm.c: +2 -2
drivers/gpu/drm/ttm/ttm_pool.c: +58 -24
drivers/gpu/drm/ttm/ttm_range_manager.c: +1 -2
drivers/gpu/drm/ttm/ttm_resource.c: +6 -8
drivers/gpu/drm/tve200/tve200_drv.c: +2 -1
drivers/gpu/drm/udl/Makefile: +1 -1
drivers/gpu/drm/udl/udl_connector.c: +0 -139
drivers/gpu/drm/udl/udl_connector.h: +0 -15
drivers/gpu/drm/udl/udl_drv.c: +1 -1
drivers/gpu/drm/udl/udl_drv.h: +18 -24
drivers/gpu/drm/udl/udl_modeset.c: +363 -203
drivers/gpu/drm/udl/udl_proto.h: +68 -0
drivers/gpu/drm/udl/udl_transfer.c: +4 -3
drivers/gpu/drm/v3d/v3d_drv.c: +0 -1
drivers/gpu/drm/v3d/v3d_gem.c: +13 -4
drivers/gpu/drm/v3d/v3d_perfmon.c: +5 -1
drivers/gpu/drm/vboxvideo/vbox_drv.c: +1 -3
drivers/gpu/drm/vboxvideo/vbox_main.c: +0 -1
drivers/gpu/drm/vc4/vc4_bo.c: +2 -2
drivers/gpu/drm/vc4/vc4_drv.c: +1 -1
drivers/gpu/drm/vc4/vc4_drv.h: +16 -0
drivers/gpu/drm/vc4/vc4_hdmi.c: +21 -20
drivers/gpu/drm/vc4/vc4_hdmi.h: +0 -8
drivers/gpu/drm/vc4/vc4_hvs.c: +26 -0
drivers/gpu/drm/vc4/vc4_kms.c: +8 -5
drivers/gpu/drm/vc4/vc4_vec.c: +4 -4
drivers/gpu/drm/virtio/virtgpu_drv.c: +1 -0
drivers/gpu/drm/virtio/virtgpu_drv.h: +0 -1
drivers/gpu/drm/vkms/vkms_drv.c: +1 -1
drivers/gpu/drm/vmwgfx/Kconfig: +0 -7
drivers/gpu/drm/vmwgfx/Makefile: +1 -3
drivers/gpu/drm/vmwgfx/ttm_object.c: +60 -63
drivers/gpu/drm/vmwgfx/ttm_object.h: +7 -13
drivers/gpu/drm/vmwgfx/vmwgfx_blit.c: +2 -2
drivers/gpu/drm/vmwgfx/vmwgfx_bo.c: +18 -4
drivers/gpu/drm/vmwgfx/vmwgfx_cmdbuf_res.c: +26 -36
drivers/gpu/drm/vmwgfx/vmwgfx_cotable.c: +26 -5
drivers/gpu/drm/vmwgfx/vmwgfx_drv.c: +71 -58
drivers/gpu/drm/vmwgfx/vmwgfx_drv.h: +15 -38
drivers/gpu/drm/vmwgfx/vmwgfx_execbuf.c: +4 -13
drivers/gpu/drm/vmwgfx/vmwgfx_fb.c: +0 -831
drivers/gpu/drm/vmwgfx/vmwgfx_gmrid_manager.c: +3 -3
drivers/gpu/drm/vmwgfx/vmwgfx_hashtab.c: +0 -199
drivers/gpu/drm/vmwgfx/vmwgfx_hashtab.h: +0 -83
drivers/gpu/drm/vmwgfx/vmwgfx_kms.c: +365 -304
drivers/gpu/drm/vmwgfx/vmwgfx_kms.h: +13 -18
drivers/gpu/drm/vmwgfx/vmwgfx_ldu.c: +0 -8
drivers/gpu/drm/vmwgfx/vmwgfx_mksstat.h: +2 -0
drivers/gpu/drm/vmwgfx/vmwgfx_msg.c: +38 -21
drivers/gpu/drm/vmwgfx/vmwgfx_page_dirty.c: +3 -3
drivers/gpu/drm/vmwgfx/vmwgfx_scrn.c: +1 -30
drivers/gpu/drm/vmwgfx/vmwgfx_stdu.c: +0 -26
drivers/gpu/drm/vmwgfx/vmwgfx_surface.c: +9 -5
drivers/gpu/drm/vmwgfx/vmwgfx_validation.c: +27 -28
drivers/gpu/drm/vmwgfx/vmwgfx_validation.h: +6 -20
drivers/gpu/drm/xen/xen_drm_front_gem.c: +0 -1
drivers/gpu/drm/xlnx/Makefile: +1 -1
drivers/gpu/drm/xlnx/zynqmp_disp.c: +118 -528
drivers/gpu/drm/xlnx/zynqmp_disp.h: +41 -7
drivers/gpu/drm/xlnx/zynqmp_dp.c: +264 -213
drivers/gpu/drm/xlnx/zynqmp_dp.h: +1 -3
drivers/gpu/drm/xlnx/zynqmp_dpsub.c: +171 -129
drivers/gpu/drm/xlnx/zynqmp_dpsub.h: +39 -7
drivers/gpu/drm/xlnx/zynqmp_kms.c: +534 -0
drivers/gpu/drm/xlnx/zynqmp_kms.h: +46 -0
drivers/gpu/host1x/context.c: +4 -0
drivers/gpu/host1x/debug.c: +3 -25
drivers/gpu/host1x/dev.c: +12 -0
drivers/gpu/host1x/fence.c: +1 -1
drivers/infiniband/core/umem_dmabuf.c: +4 -3
drivers/media/common/videobuf2/videobuf2-dma-contig.c: +10 -15
drivers/media/common/videobuf2/videobuf2-dma-sg.c: +8 -14
drivers/media/common/videobuf2/videobuf2-vmalloc.c: +7 -13
drivers/media/platform/nvidia/tegra-vde/dmabuf-cache.c: +3 -3
drivers/memory/tegra/mc.c: +25 -0
drivers/memory/tegra/tegra234.c: +5 -0
drivers/misc/fastrpc.c: +6 -3
drivers/misc/mei/bus.c: +144 -2
drivers/misc/mei/client.c: +40 -15
drivers/misc/mei/hbm.c: +13 -0
drivers/misc/mei/hw-me.c: +6 -1
drivers/misc/mei/hw.h: +84 -5
drivers/misc/mei/interrupt.c: +40 -7
drivers/misc/mei/mei_dev.h: +8 -0
drivers/misc/mei/pxp/mei_pxp.c: +35 -3
drivers/staging/sm750fb/Kconfig: +1 -0
drivers/staging/sm750fb/sm750.c: +3 -0
drivers/video/Kconfig: +4 -0
drivers/video/Makefile: +1 -0
drivers/video/fbdev/Kconfig: +38 -0
drivers/video/fbdev/arkfb.c: +5 -0
drivers/video/fbdev/asiliantfb.c: +3 -0
drivers/video/fbdev/aty/aty128fb.c: +5 -0
drivers/video/fbdev/aty/atyfb_base.c: +5 -0
drivers/video/fbdev/aty/radeon_base.c: +5 -0
drivers/video/fbdev/carminefb.c: +3 -0
drivers/video/fbdev/chipsfb.c: +3 -0
drivers/video/fbdev/cirrusfb.c: +5 -0
drivers/video/fbdev/core/fbmem.c: +15 -0
drivers/video/fbdev/cyber2000fb.c: +5 -1
drivers/video/fbdev/geode/Kconfig: +3 -0
drivers/video/fbdev/geode/gx1fb_core.c: +5 -0
drivers/video/fbdev/geode/gxfb_core.c: +5 -0
drivers/video/fbdev/geode/lxfb_core.c: +5 -0
drivers/video/fbdev/gxt4500.c: +3 -0
drivers/video/fbdev/hyperv_fb.c: +3 -1
drivers/video/fbdev/i740fb.c: +5 -0
drivers/video/fbdev/i810/i810_main.c: +6 -0
drivers/video/fbdev/imsttfb.c: +5 -0
drivers/video/fbdev/intelfb/intelfbdrv.c: +3 -0
drivers/video/fbdev/kyro/fbdev.c: +5 -0
drivers/video/fbdev/matrox/matroxfb_base.c: +3 -0
drivers/video/fbdev/mb862xx/mb862xxfbdrv.c: +3 -0
drivers/video/fbdev/neofb.c: +5 -0
drivers/video/fbdev/nvidia/nvidia.c: +5 -0
drivers/video/fbdev/pm2fb.c: +5 -0
drivers/video/fbdev/pm3fb.c: +5 -0
drivers/video/fbdev/pvr2fb.c: +5 -0
drivers/video/fbdev/riva/fbdev.c: +5 -0
drivers/video/fbdev/s3fb.c: +5 -0
drivers/video/fbdev/savage/savagefb_driver.c: +3 -0
drivers/video/fbdev/sis/sis_main.c: +5 -0
drivers/video/fbdev/skeletonfb.c: +5 -0
drivers/video/fbdev/sm712fb.c: +3 -0
drivers/video/fbdev/sstfb.c: +3 -0
drivers/video/fbdev/sunxvr2500.c: +3 -0
drivers/video/fbdev/sunxvr500.c: +3 -0
drivers/video/fbdev/tdfxfb.c: +5 -0
drivers/video/fbdev/tgafb.c: +5 -0
drivers/video/fbdev/tridentfb.c: +5 -0
drivers/video/fbdev/vermilion/vermilion.c: +5 -0
drivers/video/fbdev/via/via-core.c: +3 -0
drivers/video/fbdev/vt8623fb.c: +5 -0
drivers/{gpu/drm/drm_nomodeset.c => video/nomodeset.c}: +7 -5
drivers/xen/gntdev-dmabuf.c: +4 -4
include/drm/drm_accel.h: +97 -0
include/drm/drm_atomic_helper.h: +1 -2
include/drm/drm_atomic_state_helper.h: +1 -1
include/drm/drm_connector.h: +28 -5
include/drm/drm_crtc_helper.h: +2 -0
include/drm/drm_device.h: +3 -0
include/drm/drm_drv.h: +15 -1
include/drm/drm_edid.h: +11 -13
include/drm/drm_fb_helper.h: +49 -19
include/drm/drm_fbdev_generic.h: +15 -0
include/drm/drm_file.h: +20 -1
include/drm/drm_gem.h: +3 -0
include/drm/drm_gem_atomic_helper.h: +10 -10
include/drm/drm_mode_config.h: +0 -2
include/drm/drm_modeset_helper_vtables.h: +40 -1
include/drm/drm_simple_kms_helper.h: +20 -0
include/drm/gpu_scheduler.h: +43 -8
include/drm/i915_pxp_tee_interface.h: +5 -0
include/drm/ttm/ttm_resource.h: +2 -2
include/drm/ttm/ttm_tt.h: +1 -1
include/linux/dma-buf.h: +8 -9
include/linux/fb.h: +9 -0
include/linux/host1x.h: +2 -0
include/linux/mei_cl_bus.h: +6 -0
include/soc/bcm2835/raspberrypi-firmware.h: +52 -0
include/soc/tegra/mc.h: +11 -0
include/uapi/drm/amdgpu_drm.h: +14 -0
include/uapi/drm/drm_fourcc.h: +29 -0
include/uapi/drm/drm_mode.h: +62 -1
include/uapi/drm/i915_drm.h: +36 -26
include/uapi/drm/msm_drm.h: +1 -0
include/video/nomodeset.h: +8 -0
