Commit Hash: a3f9bce3697a5b4039ff7096db4a1ee897349276
Subject: block, bfq: bring forward seek&think time update


Security Keywords:
- inject

Full commit message:
block, bfq: bring forward seek&think time update

Until the base value for request service times gets finally computed
for a bfq_queue, the inject limit for that queue does depend on the
think-time state (short|long) of the queue. A timely update of the
think time then guarantees a quicker activation or deactivation of the
injection. Fortunately, the think time of a bfq_queue is updated in
the same code path as the inject limit; but after the inject limit.

This commits moves the update of the think time before the update of
the inject limit. For coherence, it moves the update of the seek time
too.

Reported-by: Srivatsa S. Bhat (VMware) <srivatsa@csail.mit.edu>
Tested-by: Srivatsa S. Bhat (VMware) <srivatsa@csail.mit.edu>
Signed-off-by: Paolo Valente <paolo.valente@linaro.org>
Signed-off-by: Jens Axboe <axboe@kernel.dk>

Metadata:
Author: Paolo Valente <paolo.valente@linaro.org>
Author Date: Tue Jun 25 07:12:46 2019 +0200
Committer: Jens Axboe <axboe@kernel.dk>
Commit Date: Tue Jun 25 09:07:34 2019 -0600

Files Changed: 1
Lines Added: 4
Lines Removed: 10
Total Changes: 14
