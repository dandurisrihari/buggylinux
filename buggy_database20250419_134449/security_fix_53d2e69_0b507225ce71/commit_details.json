{
  "hash": "53d2e6976bd4042672ed7b90dfbf4b31635b7dcf",
  "hash_short": "53d2e697",
  "subject": "Merge tag 'xfs-for-linus-4.6-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/dgc/linux-xfs",
  "body": "Pull xfs updates from Dave Chinner:\n \"There's quite a lot in this request, and there's some cross-over with\n  ext4, dax and quota code due to the nature of the changes being made.\n\n  As for the rest of the XFS changes, there are lots of little things\n  all over the place, which add up to a lot of changes in the end.\n\n  The major changes are that we've reduced the size of the struct\n  xfs_inode by ~100 bytes (gives an inode cache footprint reduction of\n  >10%), the writepage code now only does a single set of mapping tree\n  lockups so uses less CPU, delayed allocation reservations won't\n  overrun under random write loads anymore, and we added compile time\n  verification for on-disk structure sizes so we find out when a commit\n  or platform/compiler change breaks the on disk structure as early as\n  possible.\n\n  Change summary:\n\n   - error propagation for direct IO failures fixes for both XFS and\n     ext4\n   - new quota interfaces and XFS implementation for iterating all the\n     quota IDs in the filesystem\n   - locking fixes for real-time device extent allocation\n   - reduction of duplicate information in the xfs and vfs inode, saving\n     roughly 100 bytes of memory per cached inode.\n   - buffer flag cleanup\n   - rework of the writepage code to use the generic write clustering\n     mechanisms\n   - several fixes for inode flag based DAX enablement\n   - rework of remount option parsing\n   - compile time verification of on-disk format structure sizes\n   - delayed allocation reservation overrun fixes\n   - lots of little error handling fixes\n   - small memory leak fixes\n   - enable xfsaild freezing again\"\n\n* tag 'xfs-for-linus-4.6-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/dgc/linux-xfs: (66 commits)\n  xfs: always set rvalp in xfs_dir2_node_trim_free\n  xfs: ensure committed is initialized in xfs_trans_roll\n  xfs: borrow indirect blocks from freed extent when available\n  xfs: refactor delalloc indlen reservation split into helper\n  xfs: update freeblocks counter after extent deletion\n  xfs: debug mode forced buffered write failure\n  xfs: remove impossible condition\n  xfs: check sizes of XFS on-disk structures at compile time\n  xfs: ioends require logically contiguous file offsets\n  xfs: use named array initializers for log item dumping\n  xfs: fix computation of inode btree maxlevels\n  xfs: reinitialise per-AG structures if geometry changes during recovery\n  xfs: remove xfs_trans_get_block_res\n  xfs: fix up inode32/64 (re)mount handling\n  xfs: fix format specifier , should be %llx and not %llu\n  xfs: sanitize remount options\n  xfs: convert mount option parsing to tokens\n  xfs: fix two memory leaks in xfs_attr_list.c error paths\n  xfs: XFS_DIFLAG2_DAX limited by PAGE_SIZE\n  xfs: dynamically switch modes when XFS_DIFLAG2_DAX is set/cleared\n  ...",
  "full_message": "Merge tag 'xfs-for-linus-4.6-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/dgc/linux-xfs\n\nPull xfs updates from Dave Chinner:\n \"There's quite a lot in this request, and there's some cross-over with\n  ext4, dax and quota code due to the nature of the changes being made.\n\n  As for the rest of the XFS changes, there are lots of little things\n  all over the place, which add up to a lot of changes in the end.\n\n  The major changes are that we've reduced the size of the struct\n  xfs_inode by ~100 bytes (gives an inode cache footprint reduction of\n  >10%), the writepage code now only does a single set of mapping tree\n  lockups so uses less CPU, delayed allocation reservations won't\n  overrun under random write loads anymore, and we added compile time\n  verification for on-disk structure sizes so we find out when a commit\n  or platform/compiler change breaks the on disk structure as early as\n  possible.\n\n  Change summary:\n\n   - error propagation for direct IO failures fixes for both XFS and\n     ext4\n   - new quota interfaces and XFS implementation for iterating all the\n     quota IDs in the filesystem\n   - locking fixes for real-time device extent allocation\n   - reduction of duplicate information in the xfs and vfs inode, saving\n     roughly 100 bytes of memory per cached inode.\n   - buffer flag cleanup\n   - rework of the writepage code to use the generic write clustering\n     mechanisms\n   - several fixes for inode flag based DAX enablement\n   - rework of remount option parsing\n   - compile time verification of on-disk format structure sizes\n   - delayed allocation reservation overrun fixes\n   - lots of little error handling fixes\n   - small memory leak fixes\n   - enable xfsaild freezing again\"\n\n* tag 'xfs-for-linus-4.6-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/dgc/linux-xfs: (66 commits)\n  xfs: always set rvalp in xfs_dir2_node_trim_free\n  xfs: ensure committed is initialized in xfs_trans_roll\n  xfs: borrow indirect blocks from freed extent when available\n  xfs: refactor delalloc indlen reservation split into helper\n  xfs: update freeblocks counter after extent deletion\n  xfs: debug mode forced buffered write failure\n  xfs: remove impossible condition\n  xfs: check sizes of XFS on-disk structures at compile time\n  xfs: ioends require logically contiguous file offsets\n  xfs: use named array initializers for log item dumping\n  xfs: fix computation of inode btree maxlevels\n  xfs: reinitialise per-AG structures if geometry changes during recovery\n  xfs: remove xfs_trans_get_block_res\n  xfs: fix up inode32/64 (re)mount handling\n  xfs: fix format specifier , should be %llx and not %llu\n  xfs: sanitize remount options\n  xfs: convert mount option parsing to tokens\n  xfs: fix two memory leaks in xfs_attr_list.c error paths\n  xfs: XFS_DIFLAG2_DAX limited by PAGE_SIZE\n  xfs: dynamically switch modes when XFS_DIFLAG2_DAX is set/cleared\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Mon Mar 21 11:53:05 2016 -0700",
  "author_date_iso": "2016-03-21T11:53:05-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Mon Mar 21 11:53:05 2016 -0700",
  "committer_date_iso": "2016-03-21T11:53:05-07:00",
  "files_changed": [
    "fs/dax.c",
    "fs/direct-io.c",
    "fs/ext4/ext4.h",
    "fs/ext4/inode.c",
    "fs/ext4/page-io.c",
    "fs/ocfs2/aops.c",
    "fs/xfs/xfs_aops.c",
    "fs/xfs/xfs_aops.h",
    "fs/xfs/xfs_bmap_util.c",
    "include/linux/fs.h"
  ],
  "files_changed_count": 10,
  "stats": [
    {
      "file": "fs/dax.c",
      "insertions": 7,
      "deletions": 2
    },
    {
      "file": "fs/direct-io.c",
      "insertions": 7,
      "deletions": 2
    },
    {
      "file": "fs/ext4/ext4.h",
      "insertions": 21,
      "deletions": 9
    },
    {
      "file": "fs/ext4/inode.c",
      "insertions": 12,
      "deletions": 2
    },
    {
      "file": "fs/ext4/page-io.c",
      "insertions": 0,
      "deletions": 10
    },
    {
      "file": "fs/ocfs2/aops.c",
      "insertions": 6,
      "deletions": 1
    },
    {
      "file": "fs/quota/quota.c",
      "insertions": 64,
      "deletions": 2
    },
    {
      "file": "fs/xfs/libxfs/xfs_alloc_btree.c",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "fs/xfs/libxfs/xfs_attr_sf.h",
      "insertions": 0,
      "deletions": 16
    },
    {
      "file": "fs/xfs/libxfs/xfs_bmap.c",
      "insertions": 120,
      "deletions": 52
    },
    {
      "file": "fs/xfs/libxfs/xfs_bmap_btree.c",
      "insertions": 2,
      "deletions": 3
    },
    {
      "file": "fs/xfs/libxfs/xfs_btree.c",
      "insertions": 23,
      "deletions": 9
    },
    {
      "file": "fs/xfs/libxfs/xfs_da_format.h",
      "insertions": 16,
      "deletions": 0
    },
    {
      "file": "fs/xfs/libxfs/xfs_dir2.c",
      "insertions": 6,
      "deletions": 6
    },
    {
      "file": "fs/xfs/libxfs/xfs_dir2_node.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "fs/xfs/libxfs/xfs_ialloc.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "fs/xfs/libxfs/xfs_ialloc_btree.c",
      "insertions": 2,
      "deletions": 10
    },
    {
      "file": "fs/xfs/libxfs/xfs_inode_buf.c",
      "insertions": 111,
      "deletions": 59
    },
    {
      "file": "fs/xfs/libxfs/xfs_inode_buf.h",
      "insertions": 35,
      "deletions": 3
    },
    {
      "file": "fs/xfs/libxfs/xfs_inode_fork.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "fs/xfs/libxfs/xfs_log_format.h",
      "insertions": 11,
      "deletions": 8
    },
    {
      "file": "fs/xfs/libxfs/xfs_quota_defs.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "fs/xfs/libxfs/xfs_rtbitmap.c",
      "insertions": 30,
      "deletions": 2
    },
    {
      "file": "fs/xfs/libxfs/xfs_sb.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "fs/xfs/libxfs/xfs_shared.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "fs/xfs/xfs_aops.c",
      "insertions": 377,
      "deletions": 639
    },
    {
      "file": "fs/xfs/xfs_aops.h",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_attr_list.c",
      "insertions": 10,
      "deletions": 9
    },
    {
      "file": "fs/xfs/xfs_bmap_util.c",
      "insertions": 5,
      "deletions": 3
    },
    {
      "file": "fs/xfs/xfs_buf.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_buf.h",
      "insertions": 1,
      "deletions": 25
    },
    {
      "file": "fs/xfs/xfs_buf_item.c",
      "insertions": 5,
      "deletions": 5
    },
    {
      "file": "fs/xfs/xfs_dir2_readdir.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_discard.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_dquot.c",
      "insertions": 114,
      "deletions": 15
    },
    {
      "file": "fs/xfs/xfs_export.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_file.c",
      "insertions": 60,
      "deletions": 28
    },
    {
      "file": "fs/xfs/xfs_filestream.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "fs/xfs/xfs_fsops.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_icache.c",
      "insertions": 37,
      "deletions": 6
    },
    {
      "file": "fs/xfs/xfs_inode.c",
      "insertions": 71,
      "deletions": 103
    },
    {
      "file": "fs/xfs/xfs_inode.h",
      "insertions": 5,
      "deletions": 5
    },
    {
      "file": "fs/xfs/xfs_inode_item.c",
      "insertions": 77,
      "deletions": 5
    },
    {
      "file": "fs/xfs/xfs_ioctl.c",
      "insertions": 106,
      "deletions": 15
    },
    {
      "file": "fs/xfs/xfs_iops.c",
      "insertions": 16,
      "deletions": 43
    },
    {
      "file": "fs/xfs/xfs_itable.c",
      "insertions": 13,
      "deletions": 9
    },
    {
      "file": "fs/xfs/xfs_log.c",
      "insertions": 76,
      "deletions": 76
    },
    {
      "file": "fs/xfs/xfs_log_recover.c",
      "insertions": 53,
      "deletions": 44
    },
    {
      "file": "fs/xfs/xfs_mount.c",
      "insertions": 3,
      "deletions": 21
    },
    {
      "file": "fs/xfs/xfs_mount.h",
      "insertions": 27,
      "deletions": 4
    },
    {
      "file": "fs/xfs/xfs_ondisk.h",
      "insertions": 117,
      "deletions": 0
    },
    {
      "file": "fs/xfs/xfs_qm.c",
      "insertions": 43,
      "deletions": 12
    },
    {
      "file": "fs/xfs/xfs_qm.h",
      "insertions": 35,
      "deletions": 13
    },
    {
      "file": "fs/xfs/xfs_qm_syscalls.c",
      "insertions": 17,
      "deletions": 10
    },
    {
      "file": "fs/xfs/xfs_quotaops.c",
      "insertions": 34,
      "deletions": 2
    },
    {
      "file": "fs/xfs/xfs_rtalloc.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_super.c",
      "insertions": 286,
      "deletions": 242
    },
    {
      "file": "fs/xfs/xfs_super.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "fs/xfs/xfs_sysfs.c",
      "insertions": 68,
      "deletions": 10
    },
    {
      "file": "fs/xfs/xfs_trace.h",
      "insertions": 4,
      "deletions": 5
    },
    {
      "file": "fs/xfs/xfs_trans.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_trans.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_trans_ail.c",
      "insertions": 3,
      "deletions": 2
    },
    {
      "file": "fs/xfs/xfs_trans_buf.c",
      "insertions": 5,
      "deletions": 5
    },
    {
      "file": "fs/xfs/xfs_trans_dquot.c",
      "insertions": 9,
      "deletions": 6
    },
    {
      "file": "fs/xfs/xfs_trans_inode.c",
      "insertions": 3,
      "deletions": 11
    },
    {
      "file": "include/linux/fs.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "include/linux/quota.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "include/uapi/linux/dqblk_xfs.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "include/uapi/linux/quota.h",
      "insertions": 14,
      "deletions": 0
    }
  ],
  "total_insertions": 2196,
  "total_deletions": 1591,
  "total_changes": 3787,
  "parents": [
    "d407574e7948210223a7adca5ff26e3b0ec8143e",
    "2cdb958aba6afbced5bc563167813b972b6acbfe"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "sanitize"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "fs/direct-io.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/ext4/inode.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/ocfs2/aops.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/xfs/xfs_aops.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/ext4/ext4.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/dax.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/xfs/xfs_aops.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/ext4/page-io.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/xfs/xfs_bmap_util.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/fs.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}