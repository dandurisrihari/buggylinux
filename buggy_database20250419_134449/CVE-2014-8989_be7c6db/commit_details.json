{
  "hash": "be7c6dba2332cef0677fbabb606e279ae76652c3",
  "hash_short": "be7c6dba",
  "subject": "userns: Don't allow unprivileged creation of gid mappings",
  "body": "As any gid mapping will allow and must allow for backwards\ncompatibility dropping groups don't allow any gid mappings to be\nestablished without CAP_SETGID in the parent user namespace.\n\nFor a small class of applications this change breaks userspace\nand removes useful functionality.  This small class of applications\nincludes tools/testing/selftests/mount/unprivilged-remount-test.c\n\nMost of the removed functionality will be added back with the addition\nof a one way knob to disable setgroups.  Once setgroups is disabled\nsetting the gid_map becomes as safe as setting the uid_map.\n\nFor more common applications that set the uid_map and the gid_map\nwith privilege this change will have no affect.\n\nThis is part of a fix for CVE-2014-8989.\n\nCc: stable@vger.kernel.org\nReviewed-by: Andy Lutomirski <luto@amacapital.net>\nSigned-off-by: \"Eric W. Biederman\" <ebiederm@xmission.com>",
  "full_message": "userns: Don't allow unprivileged creation of gid mappings\n\nAs any gid mapping will allow and must allow for backwards\ncompatibility dropping groups don't allow any gid mappings to be\nestablished without CAP_SETGID in the parent user namespace.\n\nFor a small class of applications this change breaks userspace\nand removes useful functionality.  This small class of applications\nincludes tools/testing/selftests/mount/unprivilged-remount-test.c\n\nMost of the removed functionality will be added back with the addition\nof a one way knob to disable setgroups.  Once setgroups is disabled\nsetting the gid_map becomes as safe as setting the uid_map.\n\nFor more common applications that set the uid_map and the gid_map\nwith privilege this change will have no affect.\n\nThis is part of a fix for CVE-2014-8989.\n\nCc: stable@vger.kernel.org\nReviewed-by: Andy Lutomirski <luto@amacapital.net>\nSigned-off-by: \"Eric W. Biederman\" <ebiederm@xmission.com>",
  "author_name": "Eric W. Biederman",
  "author_email": "ebiederm@xmission.com",
  "author_date": "Fri Dec 5 18:14:19 2014 -0600",
  "author_date_iso": "2014-12-05T18:14:19-06:00",
  "committer_name": "Eric W. Biederman",
  "committer_email": "ebiederm@xmission.com",
  "committer_date": "Tue Dec 9 17:08:24 2014 -0600",
  "committer_date_iso": "2014-12-09T17:08:24-06:00",
  "files_changed": [
    "kernel/user_namespace.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "kernel/user_namespace.c",
      "insertions": 0,
      "deletions": 4
    }
  ],
  "total_insertions": 0,
  "total_deletions": 4,
  "total_changes": 4,
  "parents": [
    "273d2c67c3e179adb1e74f403d1e9a06e3f841b5"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v3.19",
    "v3.19-rc1",
    "v3.19-rc2",
    "v3.19-rc3",
    "v3.19-rc4",
    "v3.19-rc5",
    "v3.19-rc6",
    "v3.19-rc7",
    "v4.0",
    "v4.0-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [
      "CVE-2014-8989"
    ],
    "security_keywords": []
  },
  "fix_type": "cve",
  "file_results": [
    {
      "file": "kernel/user_namespace.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}