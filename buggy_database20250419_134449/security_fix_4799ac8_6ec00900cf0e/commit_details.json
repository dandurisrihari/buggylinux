{
  "hash": "4799ac81e52a72a6404827bf2738337bb581a174",
  "hash_short": "4799ac81",
  "subject": "tls: Add rx inline crypto offload",
  "body": "This patch completes the generic infrastructure to offload TLS crypto to a\nnetwork device. It enables the kernel to skip decryption and\nauthentication of some skbs marked as decrypted by the NIC. In the fast\npath, all packets received are decrypted by the NIC and the performance\nis comparable to plain TCP.\n\nThis infrastructure doesn't require a TCP offload engine. Instead, the\nNIC only decrypts packets that contain the expected TCP sequence number.\nOut-Of-Order TCP packets are provided unmodified. As a result, at the\nworst case a received TLS record consists of both plaintext and ciphertext\npackets. These partially decrypted records must be reencrypted,\nonly to be decrypted.\n\nThe notable differences between SW KTLS Rx and this offload are as\nfollows:\n1. Partial decryption - Software must handle the case of a TLS record\nthat was only partially decrypted by HW. This can happen due to packet\nreordering.\n2. Resynchronization - tls_read_size calls the device driver to\nresynchronize HW after HW lost track of TLS record framing in\nthe TCP stream.\n\nSigned-off-by: Boris Pismenny <borisp@mellanox.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "full_message": "tls: Add rx inline crypto offload\n\nThis patch completes the generic infrastructure to offload TLS crypto to a\nnetwork device. It enables the kernel to skip decryption and\nauthentication of some skbs marked as decrypted by the NIC. In the fast\npath, all packets received are decrypted by the NIC and the performance\nis comparable to plain TCP.\n\nThis infrastructure doesn't require a TCP offload engine. Instead, the\nNIC only decrypts packets that contain the expected TCP sequence number.\nOut-Of-Order TCP packets are provided unmodified. As a result, at the\nworst case a received TLS record consists of both plaintext and ciphertext\npackets. These partially decrypted records must be reencrypted,\nonly to be decrypted.\n\nThe notable differences between SW KTLS Rx and this offload are as\nfollows:\n1. Partial decryption - Software must handle the case of a TLS record\nthat was only partially decrypted by HW. This can happen due to packet\nreordering.\n2. Resynchronization - tls_read_size calls the device driver to\nresynchronize HW after HW lost track of TLS record framing in\nthe TCP stream.\n\nSigned-off-by: Boris Pismenny <borisp@mellanox.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "author_name": "Boris Pismenny",
  "author_email": "borisp@mellanox.com",
  "author_date": "Fri Jul 13 14:33:43 2018 +0300",
  "author_date_iso": "2018-07-13T14:33:43+03:00",
  "committer_name": "David S. Miller",
  "committer_email": "davem@davemloft.net",
  "committer_date": "Mon Jul 16 00:13:11 2018 -0700",
  "committer_date_iso": "2018-07-16T00:13:11-07:00",
  "files_changed": [
    "include/net/tls.h",
    "net/tls/tls_device.c",
    "net/tls/tls_device_fallback.c",
    "net/tls/tls_main.c",
    "net/tls/tls_sw.c"
  ],
  "files_changed_count": 5,
  "stats": [
    {
      "file": "include/net/tls.h",
      "insertions": 59,
      "deletions": 4
    },
    {
      "file": "net/tls/tls_device.c",
      "insertions": 256,
      "deletions": 22
    },
    {
      "file": "net/tls/tls_device_fallback.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "net/tls/tls_main.c",
      "insertions": 20,
      "deletions": 12
    },
    {
      "file": "net/tls/tls_sw.c",
      "insertions": 19,
      "deletions": 5
    }
  ],
  "total_insertions": 355,
  "total_deletions": 43,
  "total_changes": 398,
  "parents": [
    "b190a587c634a8559e4ceabeb0468e93db49789a"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.19",
    "v4.19-rc1",
    "v4.19-rc2",
    "v4.19-rc3",
    "v4.19-rc4",
    "v4.19-rc5",
    "v4.19-rc6",
    "v4.19-rc7",
    "v4.19-rc8",
    "v4.20"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "include/net/tls.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/tls/tls_device.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/tls/tls_device_fallback.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/tls/tls_main.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/tls/tls_sw.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}