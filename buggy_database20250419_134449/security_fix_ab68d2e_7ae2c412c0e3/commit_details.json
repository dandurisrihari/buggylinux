{
  "hash": "ab68d2e36532806b8f86ff2f60861dbb8443f0be",
  "hash_short": "ab68d2e3",
  "subject": "x86/cpu: Enable modifying CPU bug flags with '{clear,set}puid='",
  "body": "Sometimes it can be very useful to run CPU vulnerability mitigations on\nsystems where they aren't known to mitigate any real-world\nvulnerabilities. This can be handy for mundane reasons like debugging\nHW-agnostic logic on whatever machine is to hand, but also for research\nreasons: while some mitigations are focused on individual vulns and\nuarches, others are fairly general, and it's strategically useful to\nhave an idea how they'd perform on systems where they aren't currently\nneeded.\n\nAs evidence for this being useful, a flag specifically for Retbleed was\nadded in:\n\n  5c9a92dec323 (\"x86/bugs: Add retbleed=force\").\n\nSince CPU bugs are tracked using the same basic mechanism as features,\nand there are already parameters for manipulating them by hand, extend\nthat mechanism to support bug as well as capabilities.\n\nWith this patch and setcpuid=srso, a QEMU guest running on an Intel host\nwill boot with Safe-RET enabled.\n\nSigned-off-by: Brendan Jackman <jackmanb@google.com>\nSigned-off-by: Ingo Molnar <mingo@kernel.org>\nLink: https://lore.kernel.org/r/20241220-force-cpu-bug-v2-3-7dc71bce742a@google.com",
  "full_message": "x86/cpu: Enable modifying CPU bug flags with '{clear,set}puid='\n\nSometimes it can be very useful to run CPU vulnerability mitigations on\nsystems where they aren't known to mitigate any real-world\nvulnerabilities. This can be handy for mundane reasons like debugging\nHW-agnostic logic on whatever machine is to hand, but also for research\nreasons: while some mitigations are focused on individual vulns and\nuarches, others are fairly general, and it's strategically useful to\nhave an idea how they'd perform on systems where they aren't currently\nneeded.\n\nAs evidence for this being useful, a flag specifically for Retbleed was\nadded in:\n\n  5c9a92dec323 (\"x86/bugs: Add retbleed=force\").\n\nSince CPU bugs are tracked using the same basic mechanism as features,\nand there are already parameters for manipulating them by hand, extend\nthat mechanism to support bug as well as capabilities.\n\nWith this patch and setcpuid=srso, a QEMU guest running on an Intel host\nwill boot with Safe-RET enabled.\n\nSigned-off-by: Brendan Jackman <jackmanb@google.com>\nSigned-off-by: Ingo Molnar <mingo@kernel.org>\nLink: https://lore.kernel.org/r/20241220-force-cpu-bug-v2-3-7dc71bce742a@google.com",
  "author_name": "Brendan Jackman",
  "author_email": "jackmanb@google.com",
  "author_date": "Fri Dec 20 15:18:33 2024 +0000",
  "author_date_iso": "2024-12-20T15:18:33+00:00",
  "committer_name": "Ingo Molnar",
  "committer_email": "mingo@kernel.org",
  "committer_date": "Fri Feb 28 10:57:50 2025 +0100",
  "committer_date_iso": "2025-02-28T10:57:50+01:00",
  "files_changed": [
    "arch/x86/include/asm/cpufeature.h",
    "arch/x86/kernel/cpu/common.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "arch/x86/include/asm/cpufeature.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/kernel/cpu/common.c",
      "insertions": 12,
      "deletions": 4
    }
  ],
  "total_insertions": 13,
  "total_deletions": 4,
  "total_changes": 17,
  "parents": [
    "814165e9fd1f62332b5444d730b8d6e432328463"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "vulnerability"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/include/asm/cpufeature.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/x86/kernel/cpu/common.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}