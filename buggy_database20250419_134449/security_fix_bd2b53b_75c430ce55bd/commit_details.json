{
  "hash": "bd2b53b20fcd0d6c4c815b54e6d464e34429d3a4",
  "hash_short": "bd2b53b2",
  "subject": "KVM: fast-path msi injection with irqfd",
  "body": "Store irq routing table pointer in the irqfd object,\nand use that to inject MSI directly without bouncing out to\na kernel thread.\n\nWhile we touch this structure, rearrange irqfd fields to make fastpath\nbetter packed for better cache utilization.\n\nThis also adds some comments about locking rules and rcu usage in code.\n\nSome notes on the design:\n- Use pointer into the rt instead of copying an entry,\n  to make it possible to use rcu, thus side-stepping\n  locking complexities.  We also save some memory this way.\n- Old workqueue code is still used for level irqs.\n  I don't think we DTRT with level anyway, however,\n  it seems easier to keep the code around as\n  it has been thought through and debugged, and fix level later than\n  rip out and re-instate it later.\n\nSigned-off-by: Michael S. Tsirkin <mst@redhat.com>\nAcked-by: Marcelo Tosatti <mtosatti@redhat.com>\nAcked-by: Gregory Haskins <ghaskins@novell.com>\nSigned-off-by: Avi Kivity <avi@redhat.com>",
  "full_message": "KVM: fast-path msi injection with irqfd\n\nStore irq routing table pointer in the irqfd object,\nand use that to inject MSI directly without bouncing out to\na kernel thread.\n\nWhile we touch this structure, rearrange irqfd fields to make fastpath\nbetter packed for better cache utilization.\n\nThis also adds some comments about locking rules and rcu usage in code.\n\nSome notes on the design:\n- Use pointer into the rt instead of copying an entry,\n  to make it possible to use rcu, thus side-stepping\n  locking complexities.  We also save some memory this way.\n- Old workqueue code is still used for level irqs.\n  I don't think we DTRT with level anyway, however,\n  it seems easier to keep the code around as\n  it has been thought through and debugged, and fix level later than\n  rip out and re-instate it later.\n\nSigned-off-by: Michael S. Tsirkin <mst@redhat.com>\nAcked-by: Marcelo Tosatti <mtosatti@redhat.com>\nAcked-by: Gregory Haskins <ghaskins@novell.com>\nSigned-off-by: Avi Kivity <avi@redhat.com>",
  "author_name": "Michael S. Tsirkin",
  "author_email": "mst@redhat.com",
  "author_date": "Thu Nov 18 19:09:08 2010 +0200",
  "author_date_iso": "2010-11-18T19:09:08+02:00",
  "committer_name": "Avi Kivity",
  "committer_email": "avi@redhat.com",
  "committer_date": "Wed Jan 12 11:29:38 2011 +0200",
  "committer_date_iso": "2011-01-12T11:29:38+02:00",
  "files_changed": [
    "include/linux/kvm_host.h",
    "virt/kvm/eventfd.c",
    "virt/kvm/irq_comm.c"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "include/linux/kvm_host.h",
      "insertions": 16,
      "deletions": 0
    },
    {
      "file": "virt/kvm/eventfd.c",
      "insertions": 79,
      "deletions": 12
    },
    {
      "file": "virt/kvm/irq_comm.c",
      "insertions": 4,
      "deletions": 3
    }
  ],
  "total_insertions": 99,
  "total_deletions": 15,
  "total_changes": 114,
  "parents": [
    "104f226bfd0a607ca0e804ae4907555374f72cd9"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v2.6.38",
    "v2.6.38-rc1",
    "v2.6.38-rc2",
    "v2.6.38-rc3",
    "v2.6.38-rc4",
    "v2.6.38-rc5",
    "v2.6.38-rc6",
    "v2.6.38-rc7",
    "v2.6.38-rc8",
    "v2.6.39"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "include/linux/kvm_host.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/eventfd.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "virt/kvm/irq_comm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}