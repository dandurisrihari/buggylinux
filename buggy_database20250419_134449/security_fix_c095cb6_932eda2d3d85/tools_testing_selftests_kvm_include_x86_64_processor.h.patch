commit c095cb609b3aa56fd24e2907556c24fef88b9180
Author: Sean Christopherson <seanjc@google.com>
Date:   Thu Jun 2 14:12:14 2022 -0700

    KVM: selftests: Cache list of MSRs to save/restore
    
    Cache the list of MSRs to save restore, mostly to justify not freeing the
    list in the caller, which simplifies consumption of the list.
    
    Opportunistically move the XSS test's so called is_supported_msr() to
    common code as kvm_msr_is_in_save_restore_list().  The XSS is "supported"
    by KVM, it's simply not in the save/restore list because KVM doesn't yet
    allow a non-zero value.
    
    Signed-off-by: Sean Christopherson <seanjc@google.com>
    Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>

diff --git a/tools/testing/selftests/kvm/include/x86_64/processor.h b/tools/testing/selftests/kvm/include/x86_64/processor.h
index 583754bf18c3..b8023c30bded 100644
--- a/tools/testing/selftests/kvm/include/x86_64/processor.h
+++ b/tools/testing/selftests/kvm/include/x86_64/processor.h
@@ -427,8 +427,10 @@ void vcpu_load_state(struct kvm_vm *vm, uint32_t vcpuid,
 		     struct kvm_x86_state *state);
 void kvm_x86_state_cleanup(struct kvm_x86_state *state);
 
-struct kvm_msr_list *kvm_get_msr_index_list(void);
+const struct kvm_msr_list *kvm_get_msr_index_list(void);
+bool kvm_msr_is_in_save_restore_list(uint32_t msr_index);
 uint64_t kvm_get_feature_msr(uint64_t msr_index);
+
 struct kvm_cpuid2 *kvm_get_supported_cpuid(void);
 struct kvm_cpuid2 *vcpu_get_cpuid(struct kvm_vm *vm, uint32_t vcpuid);