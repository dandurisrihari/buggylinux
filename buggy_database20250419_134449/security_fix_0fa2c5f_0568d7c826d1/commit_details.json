{
  "hash": "0fa2c5f954c41e870fe327907c01cb8f7ea8d5a2",
  "hash_short": "0fa2c5f9",
  "subject": "media: vivid: fix module load error when enabling fb and no_error_inj=1",
  "body": "If the framebuffer is enabled and error injection is disabled, then\ncreating the controls for the video output device would fail with an\nerror.\n\nThis is because the Clear Framebuffer control uses the 'vivid control\nclass' and that control class isn't added if error injection is disabled.\n\nIn addition, this control was added to e.g. vbi devices as well, which\nmakes no sense.\n\nMove this control to its own control handler and handle it correctly.\n\nSigned-off-by: Hans Verkuil <hans.verkuil@cisco.com>\nAcked-by: Sakari Ailus <sakari.ailus@linux.intel.com>\nCc: <stable@vger.kernel.org>      # for v4.15 and up\nSigned-off-by: Mauro Carvalho Chehab <mchehab@s-opensource.com>",
  "full_message": "media: vivid: fix module load error when enabling fb and no_error_inj=1\n\nIf the framebuffer is enabled and error injection is disabled, then\ncreating the controls for the video output device would fail with an\nerror.\n\nThis is because the Clear Framebuffer control uses the 'vivid control\nclass' and that control class isn't added if error injection is disabled.\n\nIn addition, this control was added to e.g. vbi devices as well, which\nmakes no sense.\n\nMove this control to its own control handler and handle it correctly.\n\nSigned-off-by: Hans Verkuil <hans.verkuil@cisco.com>\nAcked-by: Sakari Ailus <sakari.ailus@linux.intel.com>\nCc: <stable@vger.kernel.org>      # for v4.15 and up\nSigned-off-by: Mauro Carvalho Chehab <mchehab@s-opensource.com>",
  "author_name": "Hans Verkuil",
  "author_email": "hans.verkuil@cisco.com",
  "author_date": "Thu Jan 25 06:57:45 2018 -0500",
  "author_date_iso": "2018-01-25T06:57:45-05:00",
  "committer_name": "Mauro Carvalho Chehab",
  "committer_email": "mchehab@s-opensource.com",
  "committer_date": "Tue Jan 30 07:18:22 2018 -0500",
  "committer_date_iso": "2018-01-30T07:18:22-05:00",
  "files_changed": [
    "drivers/media/platform/vivid/vivid-core.h",
    "drivers/media/platform/vivid/vivid-ctrls.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "drivers/media/platform/vivid/vivid-core.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/media/platform/vivid/vivid-ctrls.c",
      "insertions": 29,
      "deletions": 6
    }
  ],
  "total_insertions": 30,
  "total_deletions": 6,
  "total_changes": 36,
  "parents": [
    "0f3827351ed39aeca0bea8f99813e2964e10c497"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.16",
    "v4.16-rc1",
    "v4.16-rc2",
    "v4.16-rc3",
    "v4.16-rc4",
    "v4.16-rc5",
    "v4.16-rc6",
    "v4.16-rc7",
    "v4.17",
    "v4.17-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/media/platform/vivid/vivid-core.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/media/platform/vivid/vivid-ctrls.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}