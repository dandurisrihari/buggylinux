{
  "hash": "0fd12262613116a38fd76aefa396e9bc116fbfe2",
  "hash_short": "0fd12262",
  "subject": "mfd: ti_am335x_tscadc: Drop useless definitions from the header",
  "body": "Drop useless definitions from the header like the \"masks\" definitions\nwhich are only used by the following definition.\n\nIt could be possible to got even further by removing these definitions\nentirely and use FIELD_PREP() macros from the code directly, but while I\nhave no troubles making these changes in the header, changing the values\nin the code directly could darkening a bit the logic and\nhardening future git-blames for very little added value IMHO (but this\nis of course a personal taste).\n\nCertain macros are using GENMASK() to define the value of a particular\nfield, while this is purely \"by chance\" that the value and the mask have\nthe same value. In this case, drop the \"mask\" definition, use\nFIELD_PREP() and GENMASK() in the macro defining the field, and use the\nnew macro to define the particular value by feeding directly the actual\nnumber advertised in the datasheet into that macro, as in:\n\t-#define STEPCONFIG_RFM_VREFN   GENMASK(24, 23)\n\t-#define STEPCONFIG_RFM(val)    FIELD_PREP(STEPCONFIG_RFM_VREFN, (val))\n\t+#define STEPCONFIG_RFM(val)    FIELD_PREP(GENMASK(24, 23), (val))\n\t+#define STEPCONFIG_RFM_VREFN   STEPCONFIG_RFM(3)\n\nSigned-off-by: Miquel Raynal <miquel.raynal@bootlin.com>\nReviewed-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>\nSigned-off-by: Lee Jones <lee.jones@linaro.org>\nLink: https://lore.kernel.org/r/20211015081506.933180-30-miquel.raynal@bootlin.com",
  "full_message": "mfd: ti_am335x_tscadc: Drop useless definitions from the header\n\nDrop useless definitions from the header like the \"masks\" definitions\nwhich are only used by the following definition.\n\nIt could be possible to got even further by removing these definitions\nentirely and use FIELD_PREP() macros from the code directly, but while I\nhave no troubles making these changes in the header, changing the values\nin the code directly could darkening a bit the logic and\nhardening future git-blames for very little added value IMHO (but this\nis of course a personal taste).\n\nCertain macros are using GENMASK() to define the value of a particular\nfield, while this is purely \"by chance\" that the value and the mask have\nthe same value. In this case, drop the \"mask\" definition, use\nFIELD_PREP() and GENMASK() in the macro defining the field, and use the\nnew macro to define the particular value by feeding directly the actual\nnumber advertised in the datasheet into that macro, as in:\n\t-#define STEPCONFIG_RFM_VREFN   GENMASK(24, 23)\n\t-#define STEPCONFIG_RFM(val)    FIELD_PREP(STEPCONFIG_RFM_VREFN, (val))\n\t+#define STEPCONFIG_RFM(val)    FIELD_PREP(GENMASK(24, 23), (val))\n\t+#define STEPCONFIG_RFM_VREFN   STEPCONFIG_RFM(3)\n\nSigned-off-by: Miquel Raynal <miquel.raynal@bootlin.com>\nReviewed-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>\nSigned-off-by: Lee Jones <lee.jones@linaro.org>\nLink: https://lore.kernel.org/r/20211015081506.933180-30-miquel.raynal@bootlin.com",
  "author_name": "Miquel Raynal",
  "author_email": "miquel.raynal@bootlin.com",
  "author_date": "Fri Oct 15 10:14:47 2021 +0200",
  "author_date_iso": "2021-10-15T10:14:47+02:00",
  "committer_name": "Lee Jones",
  "committer_email": "lee.jones@linaro.org",
  "committer_date": "Thu Oct 21 09:16:18 2021 +0100",
  "committer_date_iso": "2021-10-21T09:16:18+01:00",
  "files_changed": [
    "include/linux/mfd/ti_am335x_tscadc.h"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "include/linux/mfd/ti_am335x_tscadc.h",
      "insertions": 16,
      "deletions": 28
    }
  ],
  "total_insertions": 16,
  "total_deletions": 28,
  "total_changes": 44,
  "parents": [
    "e967b60eb51116d2347093655e555aa036dd40d8"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "include/linux/mfd/ti_am335x_tscadc.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}