Commit Hash: e0a446ce394a7915f2ffc03f9bb610c5ac4dbbf1
Subject: x86/vsyscall: Document odd SIGSEGV error code for vsyscalls


Security Keywords:
- Hardening

Full commit message:
x86/vsyscall: Document odd SIGSEGV error code for vsyscalls

Even if vsyscall=none, user page faults on the vsyscall page are reported
as though the PROT bit in the error code was set.  Add a comment explaining
why this is probably okay and display the value in the test case.

While at it, explain why the behavior is correct with respect to PKRU.

Modify also the selftest to print the odd error code so that there is a
way to demonstrate the odd behaviour.

If anyone really cares about more accurate emulation, the behaviour could
be changed. But that needs a real good justification.

Signed-off-by: Andy Lutomirski <luto@kernel.org>
Signed-off-by: Thomas Gleixner <tglx@linutronix.de>
Reviewed-by: Kees Cook <keescook@chromium.org>
Cc: Florian Weimer <fweimer@redhat.com>
Cc: Jann Horn <jannh@google.com>
Cc: Borislav Petkov <bp@alien8.de>
Cc: Kernel Hardening <kernel-hardening@lists.openwall.com>
Cc: Peter Zijlstra <peterz@infradead.org>
Link: https://lkml.kernel.org/r/75c91855fd850649ace162eec5495a1354221aaa.1561610354.git.luto@kernel.org

Metadata:
Author: Andy Lutomirski <luto@kernel.org>
Author Date: Wed Jun 26 21:45:05 2019 -0700
Committer: Thomas Gleixner <tglx@linutronix.de>
Commit Date: Fri Jun 28 00:04:39 2019 +0200

Files Changed: 2
Lines Added: 15
Lines Removed: 1
Total Changes: 16
