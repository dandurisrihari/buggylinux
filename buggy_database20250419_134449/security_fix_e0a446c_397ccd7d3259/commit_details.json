{
  "hash": "e0a446ce394a7915f2ffc03f9bb610c5ac4dbbf1",
  "hash_short": "e0a446ce",
  "subject": "x86/vsyscall: Document odd SIGSEGV error code for vsyscalls",
  "body": "Even if vsyscall=none, user page faults on the vsyscall page are reported\nas though the PROT bit in the error code was set.  Add a comment explaining\nwhy this is probably okay and display the value in the test case.\n\nWhile at it, explain why the behavior is correct with respect to PKRU.\n\nModify also the selftest to print the odd error code so that there is a\nway to demonstrate the odd behaviour.\n\nIf anyone really cares about more accurate emulation, the behaviour could\nbe changed. But that needs a real good justification.\n\nSigned-off-by: Andy Lutomirski <luto@kernel.org>\nSigned-off-by: Thomas Gleixner <tglx@linutronix.de>\nReviewed-by: Kees Cook <keescook@chromium.org>\nCc: Florian Weimer <fweimer@redhat.com>\nCc: Jann Horn <jannh@google.com>\nCc: Borislav Petkov <bp@alien8.de>\nCc: Kernel Hardening <kernel-hardening@lists.openwall.com>\nCc: Peter Zijlstra <peterz@infradead.org>\nLink: https://lkml.kernel.org/r/75c91855fd850649ace162eec5495a1354221aaa.1561610354.git.luto@kernel.org",
  "full_message": "x86/vsyscall: Document odd SIGSEGV error code for vsyscalls\n\nEven if vsyscall=none, user page faults on the vsyscall page are reported\nas though the PROT bit in the error code was set.  Add a comment explaining\nwhy this is probably okay and display the value in the test case.\n\nWhile at it, explain why the behavior is correct with respect to PKRU.\n\nModify also the selftest to print the odd error code so that there is a\nway to demonstrate the odd behaviour.\n\nIf anyone really cares about more accurate emulation, the behaviour could\nbe changed. But that needs a real good justification.\n\nSigned-off-by: Andy Lutomirski <luto@kernel.org>\nSigned-off-by: Thomas Gleixner <tglx@linutronix.de>\nReviewed-by: Kees Cook <keescook@chromium.org>\nCc: Florian Weimer <fweimer@redhat.com>\nCc: Jann Horn <jannh@google.com>\nCc: Borislav Petkov <bp@alien8.de>\nCc: Kernel Hardening <kernel-hardening@lists.openwall.com>\nCc: Peter Zijlstra <peterz@infradead.org>\nLink: https://lkml.kernel.org/r/75c91855fd850649ace162eec5495a1354221aaa.1561610354.git.luto@kernel.org",
  "author_name": "Andy Lutomirski",
  "author_email": "luto@kernel.org",
  "author_date": "Wed Jun 26 21:45:05 2019 -0700",
  "author_date_iso": "2019-06-26T21:45:05-07:00",
  "committer_name": "Thomas Gleixner",
  "committer_email": "tglx@linutronix.de",
  "committer_date": "Fri Jun 28 00:04:39 2019 +0200",
  "committer_date_iso": "2019-06-28T00:04:39+02:00",
  "files_changed": [
    "arch/x86/mm/fault.c",
    "tools/testing/selftests/x86/test_vsyscall.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "arch/x86/mm/fault.c",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/x86/test_vsyscall.c",
      "insertions": 8,
      "deletions": 1
    }
  ],
  "total_insertions": 15,
  "total_deletions": 1,
  "total_changes": 16,
  "parents": [
    "918ce325098a4eef99daad7b6796da33cebaf03a"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.3",
    "v5.3-rc1",
    "v5.3-rc2",
    "v5.3-rc3",
    "v5.3-rc4",
    "v5.3-rc5",
    "v5.3-rc6",
    "v5.3-rc7",
    "v5.3-rc8",
    "v5.4"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "Hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/mm/fault.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "tools/testing/selftests/x86/test_vsyscall.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}