{
  "hash": "3ee50c896d712dc2fc8f34c2cd1918d035e74045",
  "hash_short": "3ee50c89",
  "subject": "crypto: qce - save a sg table slot for result buf",
  "body": "When ctr-aes-qce is used for gcm-mode, an extra sg entry for the\nauthentication tag is present, causing trouble when the qce driver\nprepares the dst-results sg table for dma.\n\nIt computes the number of entries needed with sg_nents_for_len, leaving\nout the tag entry.  Then it creates a sg table with that number plus\none, used to store a result buffer.\n\nWhen copying the sg table, there's no limit to the number of entries\ncopied, so the extra slot is filled with the authentication tag sg.\nWhen the driver tries to add the result sg, the list is full, and it\nreturns EINVAL.\n\nBy limiting the number of sg entries copied to the dest table, the slot\nfor the result buffer is guaranteed to be unused.\n\nSigned-off-by: Eneas U de Queiroz <cotequeiroz@gmail.com>\nSigned-off-by: Herbert Xu <herbert@gondor.apana.org.au>",
  "full_message": "crypto: qce - save a sg table slot for result buf\n\nWhen ctr-aes-qce is used for gcm-mode, an extra sg entry for the\nauthentication tag is present, causing trouble when the qce driver\nprepares the dst-results sg table for dma.\n\nIt computes the number of entries needed with sg_nents_for_len, leaving\nout the tag entry.  Then it creates a sg table with that number plus\none, used to store a result buffer.\n\nWhen copying the sg table, there's no limit to the number of entries\ncopied, so the extra slot is filled with the authentication tag sg.\nWhen the driver tries to add the result sg, the list is full, and it\nreturns EINVAL.\n\nBy limiting the number of sg entries copied to the dest table, the slot\nfor the result buffer is guaranteed to be unused.\n\nSigned-off-by: Eneas U de Queiroz <cotequeiroz@gmail.com>\nSigned-off-by: Herbert Xu <herbert@gondor.apana.org.au>",
  "author_name": "Eneas U de Queiroz",
  "author_email": "cotequeiroz@gmail.com",
  "author_date": "Fri Dec 20 16:02:15 2019 -0300",
  "author_date_iso": "2019-12-20T16:02:15-03:00",
  "committer_name": "Herbert Xu",
  "committer_email": "herbert@gondor.apana.org.au",
  "committer_date": "Fri Dec 27 18:18:04 2019 +0800",
  "committer_date_iso": "2019-12-27T18:18:04+08:00",
  "files_changed": [
    "drivers/crypto/qce/dma.c",
    "drivers/crypto/qce/dma.h",
    "drivers/crypto/qce/skcipher.c"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "drivers/crypto/qce/dma.c",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "drivers/crypto/qce/dma.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "drivers/crypto/qce/skcipher.c",
      "insertions": 2,
      "deletions": 2
    }
  ],
  "total_insertions": 8,
  "total_deletions": 5,
  "total_changes": 13,
  "parents": [
    "7de4c2bd196f111e39cc60f6197654aff23ba2b4"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.6",
    "v5.6-rc1",
    "v5.6-rc2",
    "v5.6-rc3",
    "v5.6-rc4",
    "v5.6-rc5",
    "v5.6-rc6",
    "v5.6-rc7",
    "v5.7-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/crypto/qce/dma.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/qce/dma.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/crypto/qce/skcipher.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}