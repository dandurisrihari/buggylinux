{
  "hash": "f7b6443f347dd5fdbee15a15f457db83f1426328",
  "hash_short": "f7b6443f",
  "subject": "iio: sx9324: avoid copying property strings",
  "body": "We're doing some needless string copies when trying to assign the proper\n`prop` string. We can make `prop` a const char* and simply assign to\nstring literals.\n\nFor the case where a format string is used, let's extract the parsing\nlogic out into sx9324_parse_phase_prop(). We no longer need to create\ncopies or allocate new memory.\n\nsx9324_parse_phase_prop() will simply return the default def value if it\nfails.\n\nThis also cleans up some deprecated strncpy() uses [1].\n\nFurthermore, let's clean up this code further by removing some unused\ndefines:\n|  #define SX9324_PIN_DEF \"semtech,ph0-pin\"\n|  #define SX9324_RESOLUTION_DEF \"semtech,ph01-resolution\"\n|  #define SX9324_PROXRAW_DEF \"semtech,ph01-proxraw-strength\"\n\nLink: https://www.kernel.org/doc/html/latest/process/deprecated.html#strncpy-on-nul-terminated-strings [1]\nLink: https://github.com/KSPP/linux/issues/90\nCc: linux-hardening@vger.kernel.org\nSigned-off-by: Justin Stitt <justinstitt@google.com>\nReviewed-by: Stephen Boyd <swboyd@chromium.org>\nLink: https://lore.kernel.org/r/20240201-strncpy-drivers-iio-proximity-sx9324-c-v5-1-78dde23553bc@google.com\nSigned-off-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>",
  "full_message": "iio: sx9324: avoid copying property strings\n\nWe're doing some needless string copies when trying to assign the proper\n`prop` string. We can make `prop` a const char* and simply assign to\nstring literals.\n\nFor the case where a format string is used, let's extract the parsing\nlogic out into sx9324_parse_phase_prop(). We no longer need to create\ncopies or allocate new memory.\n\nsx9324_parse_phase_prop() will simply return the default def value if it\nfails.\n\nThis also cleans up some deprecated strncpy() uses [1].\n\nFurthermore, let's clean up this code further by removing some unused\ndefines:\n|  #define SX9324_PIN_DEF \"semtech,ph0-pin\"\n|  #define SX9324_RESOLUTION_DEF \"semtech,ph01-resolution\"\n|  #define SX9324_PROXRAW_DEF \"semtech,ph01-proxraw-strength\"\n\nLink: https://www.kernel.org/doc/html/latest/process/deprecated.html#strncpy-on-nul-terminated-strings [1]\nLink: https://github.com/KSPP/linux/issues/90\nCc: linux-hardening@vger.kernel.org\nSigned-off-by: Justin Stitt <justinstitt@google.com>\nReviewed-by: Stephen Boyd <swboyd@chromium.org>\nLink: https://lore.kernel.org/r/20240201-strncpy-drivers-iio-proximity-sx9324-c-v5-1-78dde23553bc@google.com\nSigned-off-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>",
  "author_name": "Justin Stitt",
  "author_email": "justinstitt@google.com",
  "author_date": "Thu Feb 1 18:55:03 2024 +0000",
  "author_date_iso": "2024-02-01T18:55:03+00:00",
  "committer_name": "Jonathan Cameron",
  "committer_email": "Jonathan.Cameron@huawei.com",
  "committer_date": "Sat Feb 17 16:16:10 2024 +0000",
  "committer_date_iso": "2024-02-17T16:16:10+00:00",
  "files_changed": [
    "drivers/iio/proximity/sx9324.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/iio/proximity/sx9324.c",
      "insertions": 40,
      "deletions": 29
    }
  ],
  "total_insertions": 40,
  "total_deletions": 29,
  "total_changes": 69,
  "parents": [
    "c8f883a78fa27c3bff3130b1abb37902a1fd3563"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/iio/proximity/sx9324.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}