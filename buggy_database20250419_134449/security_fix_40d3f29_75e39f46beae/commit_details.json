{
  "hash": "40d3f295b5feda409784e569550057b5fbc2a295",
  "hash_short": "40d3f295",
  "subject": "net: mscc: ocelot: use common tag parsing code with DSA",
  "body": "The Injection Frame Header and Extraction Frame Header that the switch\nprepends to frames over the NPI port is also prepended to frames\ndelivered over the CPU port module's queues.\n\nLet's unify the handling of the frame headers by making the ocelot\ndriver call some helpers exported by the DSA tagger. Among other things,\nthis allows us to get rid of the strange cpu_to_be32 when transmitting\nthe Injection Frame Header on ocelot, since the packing API uses\nnetwork byte order natively (when \"quirks\" is 0).\n\nThe comments above ocelot_gen_ifh talk about setting pop_cnt to 3, and\nthe cpu extraction queue mask to something, but the code doesn't do it,\nso we don't do it either.\n\nSigned-off-by: Vladimir Oltean <vladimir.oltean@nxp.com>\nReviewed-by: Florian Fainelli <f.fainelli@gmail.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "full_message": "net: mscc: ocelot: use common tag parsing code with DSA\n\nThe Injection Frame Header and Extraction Frame Header that the switch\nprepends to frames over the NPI port is also prepended to frames\ndelivered over the CPU port module's queues.\n\nLet's unify the handling of the frame headers by making the ocelot\ndriver call some helpers exported by the DSA tagger. Among other things,\nthis allows us to get rid of the strange cpu_to_be32 when transmitting\nthe Injection Frame Header on ocelot, since the packing API uses\nnetwork byte order natively (when \"quirks\" is 0).\n\nThe comments above ocelot_gen_ifh talk about setting pop_cnt to 3, and\nthe cpu extraction queue mask to something, but the code doesn't do it,\nso we don't do it either.\n\nSigned-off-by: Vladimir Oltean <vladimir.oltean@nxp.com>\nReviewed-by: Florian Fainelli <f.fainelli@gmail.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "author_name": "Vladimir Oltean",
  "author_email": "vladimir.oltean@nxp.com",
  "author_date": "Sun Feb 14 00:37:56 2021 +0200",
  "author_date_iso": "2021-02-14T00:37:56+02:00",
  "committer_name": "David S. Miller",
  "committer_email": "davem@davemloft.net",
  "committer_date": "Sun Feb 14 17:31:44 2021 -0800",
  "committer_date_iso": "2021-02-14T17:31:44-08:00",
  "files_changed": [
    "drivers/net/dsa/ocelot/felix.c",
    "drivers/net/dsa/ocelot/felix_vsc9959.c",
    "drivers/net/dsa/ocelot/seville_vsc9953.c",
    "drivers/net/ethernet/mscc/ocelot.c",
    "drivers/net/ethernet/mscc/ocelot.h",
    "drivers/net/ethernet/mscc/ocelot_vsc7514.c",
    "include/linux/dsa/ocelot.h",
    "include/soc/mscc/ocelot.h",
    "net/dsa/tag_ocelot.c"
  ],
  "files_changed_count": 9,
  "stats": [
    {
      "file": "drivers/net/dsa/ocelot/felix.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "drivers/net/dsa/ocelot/felix_vsc9959.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/net/dsa/ocelot/seville_vsc9953.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/net/ethernet/mscc/ocelot.c",
      "insertions": 8,
      "deletions": 30
    },
    {
      "file": "drivers/net/ethernet/mscc/ocelot.h",
      "insertions": 0,
      "deletions": 9
    },
    {
      "file": "drivers/net/ethernet/mscc/ocelot_vsc7514.c",
      "insertions": 16,
      "deletions": 38
    },
    {
      "file": "include/linux/dsa/ocelot.h",
      "insertions": 208,
      "deletions": 0
    },
    {
      "file": "include/soc/mscc/ocelot.h",
      "insertions": 0,
      "deletions": 7
    },
    {
      "file": "net/dsa/tag_ocelot.c",
      "insertions": 9,
      "deletions": 138
    }
  ],
  "total_insertions": 246,
  "total_deletions": 227,
  "total_changes": 473,
  "parents": [
    "8a678bb29bd2b8a290ab74aa4157471621676145"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "Injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/net/dsa/ocelot/felix_vsc9959.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/ethernet/mscc/ocelot.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/dsa/ocelot/felix.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/ethernet/mscc/ocelot_vsc7514.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/ethernet/mscc/ocelot.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/dsa/ocelot.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/soc/mscc/ocelot.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/dsa/ocelot/seville_vsc9953.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/dsa/tag_ocelot.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}