{
  "hash": "a2c63a3f3d687ac4f63bf4ffa04d7458a2db350b",
  "hash_short": "a2c63a3f",
  "subject": "Merge tag 'bcachefs-2024-04-22' of https://evilpiepirate.org/git/bcachefs",
  "body": "Pull bcachefs fixes from Kent Overstreet:\n \"Nothing too crazy in this one, and it looks like (fingers crossed) the\n  recovery and repair issues are settling down - although there's going\n  to be a long tail there, as we've still yet to really ramp up on error\n  injection or syzbot.\n\n   - fix a few more deadlocks in recovery\n\n   - fix u32/u64 issues in mi_btree_bitmap\n\n   - btree key cache shrinker now actually frees, with more\n     instrumentation coming so we can verify that it's working\n     correctly more easily in the future\"\n\n* tag 'bcachefs-2024-04-22' of https://evilpiepirate.org/git/bcachefs:\n  bcachefs: If we run merges at a lower watermark, they must be nonblocking\n  bcachefs: Fix inode early destruction path\n  bcachefs: Fix deadlock in journal write path\n  bcachefs: Tweak btree key cache shrinker so it actually frees\n  bcachefs: bkey_cached.btree_trans_barrier_seq needs to be a ulong\n  bcachefs: Fix missing call to bch2_fs_allocator_background_exit()\n  bcachefs: Check for journal entries overruning end of sb clean section\n  bcachefs: Fix bio alloc in check_extent_checksum()\n  bcachefs: fix leak in bch2_gc_write_reflink_key\n  bcachefs: KEY_TYPE_error is allowed for reflink\n  bcachefs: Fix bch2_dev_btree_bitmap_marked_sectors() shift\n  bcachefs: make sure to release last journal pin in replay\n  bcachefs: node scan: ignore multiple nodes with same seq if interior\n  bcachefs: Fix format specifier in validate_bset_keys()\n  bcachefs: Fix null ptr deref in twf from BCH_IOCTL_FSCK_OFFLINE",
  "full_message": "Merge tag 'bcachefs-2024-04-22' of https://evilpiepirate.org/git/bcachefs\n\nPull bcachefs fixes from Kent Overstreet:\n \"Nothing too crazy in this one, and it looks like (fingers crossed) the\n  recovery and repair issues are settling down - although there's going\n  to be a long tail there, as we've still yet to really ramp up on error\n  injection or syzbot.\n\n   - fix a few more deadlocks in recovery\n\n   - fix u32/u64 issues in mi_btree_bitmap\n\n   - btree key cache shrinker now actually frees, with more\n     instrumentation coming so we can verify that it's working\n     correctly more easily in the future\"\n\n* tag 'bcachefs-2024-04-22' of https://evilpiepirate.org/git/bcachefs:\n  bcachefs: If we run merges at a lower watermark, they must be nonblocking\n  bcachefs: Fix inode early destruction path\n  bcachefs: Fix deadlock in journal write path\n  bcachefs: Tweak btree key cache shrinker so it actually frees\n  bcachefs: bkey_cached.btree_trans_barrier_seq needs to be a ulong\n  bcachefs: Fix missing call to bch2_fs_allocator_background_exit()\n  bcachefs: Check for journal entries overruning end of sb clean section\n  bcachefs: Fix bio alloc in check_extent_checksum()\n  bcachefs: fix leak in bch2_gc_write_reflink_key\n  bcachefs: KEY_TYPE_error is allowed for reflink\n  bcachefs: Fix bch2_dev_btree_bitmap_marked_sectors() shift\n  bcachefs: make sure to release last journal pin in replay\n  bcachefs: node scan: ignore multiple nodes with same seq if interior\n  bcachefs: Fix format specifier in validate_bset_keys()\n  bcachefs: Fix null ptr deref in twf from BCH_IOCTL_FSCK_OFFLINE",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Mon Apr 22 13:53:50 2024 -0700",
  "author_date_iso": "2024-04-22T13:53:50-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Mon Apr 22 13:53:50 2024 -0700",
  "committer_date_iso": "2024-04-22T13:53:50-07:00",
  "files_changed": [],
  "files_changed_count": 0,
  "stats": [
    {
      "file": "fs/bcachefs/backpointers.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/bcachefs/bcachefs_format.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "fs/bcachefs/btree_gc.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "fs/bcachefs/btree_io.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/bcachefs/btree_key_cache.c",
      "insertions": 4,
      "deletions": 15
    },
    {
      "file": "fs/bcachefs/btree_node_scan.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "fs/bcachefs/btree_types.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/bcachefs/btree_update_interior.c",
      "insertions": 5,
      "deletions": 1
    },
    {
      "file": "fs/bcachefs/chardev.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "fs/bcachefs/fs.c",
      "insertions": 6,
      "deletions": 3
    },
    {
      "file": "fs/bcachefs/journal_io.c",
      "insertions": 42,
      "deletions": 18
    },
    {
      "file": "fs/bcachefs/recovery.c",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "fs/bcachefs/sb-clean.c",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "fs/bcachefs/sb-errors_types.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "fs/bcachefs/sb-members.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "fs/bcachefs/sb-members.h",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "fs/bcachefs/super.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "fs/bcachefs/thread_with_file.c",
      "insertions": 13,
      "deletions": 2
    },
    {
      "file": "fs/bcachefs/thread_with_file.h",
      "insertions": 3,
      "deletions": 0
    }
  ],
  "total_insertions": 105,
  "total_deletions": 52,
  "total_changes": 157,
  "parents": [
    "1c582ec1428a4016c60d3d43ddaab427cd09862d",
    "e858beeddfa3a400844c0e22d2118b3b52f1ea5e"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": []
}