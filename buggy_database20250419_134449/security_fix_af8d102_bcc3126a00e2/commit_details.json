{
  "hash": "af8d102f999a41c0189bd2cce488bac2ee88c29b",
  "hash_short": "af8d102f",
  "subject": "x86/intel/irq_remapping: Clean up x2apic opt-out security warning mess",
  "body": "Current kernels print this on my Dell server:\n\n   ------------[ cut here ]------------\n   WARNING: at drivers/iommu/intel_irq_remapping.c:542\n   intel_enable_irq_remapping+0x7b/0x27e()\n   Hardware name: PowerEdge R620\n   Your BIOS is broken and requested that x2apic be disabled\n   This will leave your machine vulnerable to irq-injection attacks\n   Use 'intremap=no_x2apic_optout' to override BIOS request\n   [...]\n   Enabled IRQ remapping in xapic mode\n   x2apic not enabled, IRQ remapping is in xapic mode\n\nThis is inconsistent with itself -- interrupt remapping is *on*.\n\nFix the mess by making the warnings say what they mean and my\nmaking sure that compatibility format interrupts (the dangerous\nones) are disabled if x2apic is present regardless of BIOS\nsettings.\n\nWith this patch applied, the output is:\n\n  Your BIOS is broken and requested that x2apic be disabled.\n  This will slightly decrease performance.\n  Use 'intremap=no_x2apic_optout' to override BIOS request.\n  Enabled IRQ remapping in xapic mode\n  x2apic not enabled, IRQ remapping is in xapic mode\n\nThis should make us as or more secure than we are now and\nreplace a rather scary warning with a much less scary warning on\nsilly but functional systems.\n\nSigned-off-by: Andy Lutomirski <luto@amacapital.net>\nCc: Suresh Siddha <suresh.b.siddha@intel.com>\nCc: Prarit Bhargava <prarit@redhat.com>\nCc: Gleb Natapov <gleb@redhat.com>\nCc: Don Zickus <dzickus@redhat.com>\nCc: Alex Williamson <alex.williamson@redhat.com>\nLink: http://lkml.kernel.org/r/2011b943a886fd7c46079eb10bc24fc130587503.1359759303.git.luto@amacapital.net\nSigned-off-by: Ingo Molnar <mingo@kernel.org>",
  "full_message": "x86/intel/irq_remapping: Clean up x2apic opt-out security warning mess\n\nCurrent kernels print this on my Dell server:\n\n   ------------[ cut here ]------------\n   WARNING: at drivers/iommu/intel_irq_remapping.c:542\n   intel_enable_irq_remapping+0x7b/0x27e()\n   Hardware name: PowerEdge R620\n   Your BIOS is broken and requested that x2apic be disabled\n   This will leave your machine vulnerable to irq-injection attacks\n   Use 'intremap=no_x2apic_optout' to override BIOS request\n   [...]\n   Enabled IRQ remapping in xapic mode\n   x2apic not enabled, IRQ remapping is in xapic mode\n\nThis is inconsistent with itself -- interrupt remapping is *on*.\n\nFix the mess by making the warnings say what they mean and my\nmaking sure that compatibility format interrupts (the dangerous\nones) are disabled if x2apic is present regardless of BIOS\nsettings.\n\nWith this patch applied, the output is:\n\n  Your BIOS is broken and requested that x2apic be disabled.\n  This will slightly decrease performance.\n  Use 'intremap=no_x2apic_optout' to override BIOS request.\n  Enabled IRQ remapping in xapic mode\n  x2apic not enabled, IRQ remapping is in xapic mode\n\nThis should make us as or more secure than we are now and\nreplace a rather scary warning with a much less scary warning on\nsilly but functional systems.\n\nSigned-off-by: Andy Lutomirski <luto@amacapital.net>\nCc: Suresh Siddha <suresh.b.siddha@intel.com>\nCc: Prarit Bhargava <prarit@redhat.com>\nCc: Gleb Natapov <gleb@redhat.com>\nCc: Don Zickus <dzickus@redhat.com>\nCc: Alex Williamson <alex.williamson@redhat.com>\nLink: http://lkml.kernel.org/r/2011b943a886fd7c46079eb10bc24fc130587503.1359759303.git.luto@amacapital.net\nSigned-off-by: Ingo Molnar <mingo@kernel.org>",
  "author_name": "Andy Lutomirski",
  "author_email": "luto@amacapital.net",
  "author_date": "Fri Feb 1 14:57:43 2013 -0800",
  "author_date_iso": "2013-02-01T14:57:43-08:00",
  "committer_name": "Ingo Molnar",
  "committer_email": "mingo@kernel.org",
  "committer_date": "Sun Feb 3 12:13:48 2013 +0100",
  "committer_date_iso": "2013-02-03T12:13:48+01:00",
  "files_changed": [
    "drivers/iommu/intel_irq_remapping.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/iommu/intel_irq_remapping.c",
      "insertions": 28,
      "deletions": 8
    }
  ],
  "total_insertions": 28,
  "total_deletions": 8,
  "total_changes": 36,
  "parents": [
    "e9b6025bf8f16469f417e07507390f2f079d0a99"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v3.10",
    "v3.10-rc1",
    "v3.10-rc2",
    "v3.10-rc3",
    "v3.10-rc4",
    "v3.10-rc5",
    "v3.10-rc6",
    "v3.10-rc7",
    "v3.11",
    "v3.11-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/iommu/intel_irq_remapping.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}