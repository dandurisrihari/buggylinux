Commit Hash: dc18a4c7b3bd447cef2395deeb1f6ac16dfaca0e
Subject: usb: typec: wusb3801: fix fwnode refcount leak in wusb3801_probe()


Security Keywords:
- injection

Full commit message:
usb: typec: wusb3801: fix fwnode refcount leak in wusb3801_probe()

I got the following report while doing fault injection test:

  OF: ERROR: memory leak, expected refcount 1 instead of 4,
  of_node_get()/of_node_put() unbalanced - destroy cset entry:
  attach overlay node /i2c/tcpc@60/connector

If wusb3801_hw_init() fails, fwnode_handle_put() needs be called to
avoid refcount leak.

Fixes: d016cbe4d7ac ("usb: typec: Support the WUSB3801 port controller")
Reviewed-by: Heikki Krogerus <heikki.krogerus@linux.intel.com>
Signed-off-by: Yang Yingliang <yangyingliang@huawei.com>
Link: https://lore.kernel.org/r/20221203071027.3808308-1-yangyingliang@huawei.com
Signed-off-by: Greg Kroah-Hartman <gregkh@linuxfoundation.org>

Metadata:
Author: Yang Yingliang <yangyingliang@huawei.com>
Author Date: Sat Dec 3 15:10:27 2022 +0800
Committer: Greg Kroah-Hartman <gregkh@linuxfoundation.org>
Commit Date: Thu Dec 8 16:43:22 2022 +0100

Files Changed: 1
Lines Added: 1
Lines Removed: 1
Total Changes: 2
