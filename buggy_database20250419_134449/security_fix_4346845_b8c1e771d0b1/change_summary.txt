Files changed: 1
Insertions: 1178
Deletions: 498
Total changes: 1676

File-specific changes:
drivers/infiniband/core/cache.c: +1 -1
drivers/infiniband/core/core_priv.h: +1 -0
drivers/infiniband/core/device.c: +3 -1
drivers/infiniband/core/lag.c: +1 -2
drivers/infiniband/core/nldev.c: +81 -11
drivers/infiniband/core/rw.c: +1 -1
drivers/infiniband/core/sa_query.c: +3 -1
drivers/infiniband/core/sysfs.c: +9 -5
drivers/infiniband/core/user_mad.c: +3 -1
drivers/infiniband/core/uverbs_cmd.c: +2 -1
drivers/infiniband/core/uverbs_std_types_device.c: +2 -1
drivers/infiniband/core/verbs.c: +5 -2
drivers/infiniband/hw/bnxt_re/main.c: +159 -14
drivers/infiniband/hw/bnxt_re/qplib_tlv.h: +1 -1
drivers/infiniband/hw/bnxt_re/roce_hsi.h: +58 -0
drivers/infiniband/hw/hfi1/affinity.c: +1 -1
drivers/infiniband/hw/hfi1/affinity.h: +1 -1
drivers/infiniband/hw/hfi1/aspm.h: +1 -1
drivers/infiniband/hw/hfi1/chip.c: +6 -5
drivers/infiniband/hw/hfi1/chip.h: +1 -1
drivers/infiniband/hw/hfi1/chip_registers.h: +1 -1
drivers/infiniband/hw/hfi1/common.h: +1 -1
drivers/infiniband/hw/hfi1/debugfs.c: +1 -1
drivers/infiniband/hw/hfi1/debugfs.h: +1 -1
drivers/infiniband/hw/hfi1/device.c: +1 -1
drivers/infiniband/hw/hfi1/device.h: +1 -1
drivers/infiniband/hw/hfi1/driver.c: +1 -1
drivers/infiniband/hw/hfi1/efivar.c: +2 -2
drivers/infiniband/hw/hfi1/efivar.h: +1 -1
drivers/infiniband/hw/hfi1/eprom.c: +1 -1
drivers/infiniband/hw/hfi1/eprom.h: +1 -1
drivers/infiniband/hw/hfi1/exp_rcv.c: +1 -1
drivers/infiniband/hw/hfi1/exp_rcv.h: +1 -1
drivers/infiniband/hw/hfi1/fault.c: +1 -1
drivers/infiniband/hw/hfi1/fault.h: +1 -1
drivers/infiniband/hw/hfi1/file_ops.c: +1 -1
drivers/infiniband/hw/hfi1/firmware.c: +1 -1
drivers/infiniband/hw/hfi1/hfi.h: +1 -1
drivers/infiniband/hw/hfi1/init.c: +1 -2
drivers/infiniband/hw/hfi1/intr.c: +1 -1
drivers/infiniband/hw/hfi1/iowait.h: +1 -1
drivers/infiniband/hw/hfi1/ipoib_tx.c: +1 -1
drivers/infiniband/hw/hfi1/mad.c: +1 -1
drivers/infiniband/hw/hfi1/mad.h: +1 -1
drivers/infiniband/hw/hfi1/mmu_rb.c: +1 -1
drivers/infiniband/hw/hfi1/mmu_rb.h: +1 -1
drivers/infiniband/hw/hfi1/opa_compat.h: +1 -1
drivers/infiniband/hw/hfi1/pcie.c: +3 -8
drivers/infiniband/hw/hfi1/pio.c: +1 -1
drivers/infiniband/hw/hfi1/pio.h: +1 -1
drivers/infiniband/hw/hfi1/pio_copy.c: +1 -1
drivers/infiniband/hw/hfi1/platform.c: +1 -1
drivers/infiniband/hw/hfi1/platform.h: +1 -1
drivers/infiniband/hw/hfi1/qp.c: +1 -1
drivers/infiniband/hw/hfi1/qp.h: +1 -1
drivers/infiniband/hw/hfi1/qsfp.c: +1 -1
drivers/infiniband/hw/hfi1/qsfp.h: +1 -1
drivers/infiniband/hw/hfi1/rc.c: +1 -1
drivers/infiniband/hw/hfi1/ruc.c: +1 -1
drivers/infiniband/hw/hfi1/sdma.c: +1 -1
drivers/infiniband/hw/hfi1/sdma.h: +1 -1
drivers/infiniband/hw/hfi1/sdma_txreq.h: +1 -1
drivers/infiniband/hw/hfi1/sysfs.c: +1 -1
drivers/infiniband/hw/hfi1/trace.c: +1 -1
drivers/infiniband/hw/hfi1/trace.h: +1 -1
drivers/infiniband/hw/hfi1/trace_ctxts.h: +1 -1
drivers/infiniband/hw/hfi1/trace_dbg.h: +1 -1
drivers/infiniband/hw/hfi1/trace_ibhdrs.h: +1 -1
drivers/infiniband/hw/hfi1/trace_misc.h: +1 -1
drivers/infiniband/hw/hfi1/trace_mmu.h: +1 -1
drivers/infiniband/hw/hfi1/trace_rc.h: +1 -1
drivers/infiniband/hw/hfi1/trace_rx.h: +1 -1
drivers/infiniband/hw/hfi1/trace_tx.h: +1 -1
drivers/infiniband/hw/hfi1/uc.c: +1 -1
drivers/infiniband/hw/hfi1/ud.c: +1 -1
drivers/infiniband/hw/hfi1/user_exp_rcv.c: +1 -1
drivers/infiniband/hw/hfi1/user_exp_rcv.h: +2 -2
drivers/infiniband/hw/hfi1/user_pages.c: +1 -1
drivers/infiniband/hw/hfi1/user_sdma.c: +1 -1
drivers/infiniband/hw/hfi1/user_sdma.h: +1 -1
drivers/infiniband/hw/hfi1/verbs.c: +1 -1
drivers/infiniband/hw/hfi1/verbs.h: +1 -1
drivers/infiniband/hw/hfi1/verbs_txreq.c: +1 -1
drivers/infiniband/hw/hfi1/verbs_txreq.h: +1 -1
drivers/infiniband/hw/hfi1/vnic.h: +1 -1
drivers/infiniband/hw/hfi1/vnic_main.c: +1 -1
drivers/infiniband/hw/hfi1/vnic_sdma.c: +1 -1
drivers/infiniband/hw/hns/hns_roce_ah.c: +12 -1
drivers/infiniband/hw/hns/hns_roce_device.h: +6 -0
drivers/infiniband/hw/hns/hns_roce_hw_v2.c: +67 -23
drivers/infiniband/hw/hns/hns_roce_main.c: +12 -12
drivers/infiniband/hw/hns/hns_roce_qp.c: +1 -1
drivers/infiniband/hw/hns/hns_roce_restrack.c: +49 -0
drivers/infiniband/hw/hns/hns_roce_srq.c: +83 -2
drivers/infiniband/hw/irdma/cm.c: +1 -1
drivers/infiniband/hw/irdma/cm.h: +1 -1
drivers/infiniband/hw/irdma/ctrl.c: +1 -1
drivers/infiniband/hw/irdma/defs.h: +1 -1
drivers/infiniband/hw/irdma/hmc.c: +1 -1
drivers/infiniband/hw/irdma/hmc.h: +1 -1
drivers/infiniband/hw/irdma/hw.c: +1 -1
drivers/infiniband/hw/irdma/i40iw_hw.c: +1 -1
drivers/infiniband/hw/irdma/i40iw_hw.h: +1 -1
drivers/infiniband/hw/irdma/i40iw_if.c: +2 -2
drivers/infiniband/hw/irdma/icrdma_hw.c: +1 -1
drivers/infiniband/hw/irdma/icrdma_hw.h: +1 -1
drivers/infiniband/hw/irdma/irdma.h: +1 -1
drivers/infiniband/hw/irdma/main.c: +1 -1
drivers/infiniband/hw/irdma/main.h: +1 -1
drivers/infiniband/hw/irdma/osdep.h: +1 -1
drivers/infiniband/hw/irdma/pble.c: +1 -1
drivers/infiniband/hw/irdma/pble.h: +1 -1
drivers/infiniband/hw/irdma/protos.h: +1 -1
drivers/infiniband/hw/irdma/puda.c: +1 -1
drivers/infiniband/hw/irdma/puda.h: +1 -1
drivers/infiniband/hw/irdma/trace.c: +1 -1
drivers/infiniband/hw/irdma/trace.h: +1 -1
drivers/infiniband/hw/irdma/trace_cm.h: +1 -1
drivers/infiniband/hw/irdma/type.h: +1 -1
drivers/infiniband/hw/irdma/uda.c: +1 -1
drivers/infiniband/hw/irdma/uda.h: +1 -1
drivers/infiniband/hw/irdma/uda_d.h: +1 -1
drivers/infiniband/hw/irdma/uk.c: +1 -1
drivers/infiniband/hw/irdma/user.h: +1 -1
drivers/infiniband/hw/irdma/utils.c: +1 -1
drivers/infiniband/hw/irdma/verbs.c: +190 -44
drivers/infiniband/hw/irdma/verbs.h: +3 -1
drivers/infiniband/hw/irdma/ws.c: +1 -1
drivers/infiniband/hw/irdma/ws.h: +1 -1
drivers/infiniband/hw/mlx5/mad.c: +13 -0
drivers/infiniband/hw/mlx5/main.c: +7 -5
drivers/infiniband/hw/mlx5/mlx5_ib.h: +18 -3
drivers/infiniband/hw/mlx5/mr.c: +151 -175
drivers/infiniband/hw/mlx5/qp.c: +28 -1
drivers/infiniband/hw/mlx5/umr.c: +2 -2
drivers/infiniband/hw/mthca/mthca_memfree.h: +1 -1
drivers/infiniband/hw/qib/qib_iba7322.c: +1 -1
drivers/infiniband/hw/usnic/usnic_uiom.h: +1 -1
drivers/infiniband/hw/vmw_pvrdma/pvrdma_main.c: +4 -8
drivers/infiniband/sw/rdmavt/ah.c: +1 -1
drivers/infiniband/sw/rdmavt/ah.h: +1 -1
drivers/infiniband/sw/rdmavt/cq.c: +1 -1
drivers/infiniband/sw/rdmavt/cq.h: +1 -1
drivers/infiniband/sw/rdmavt/mad.c: +1 -1
drivers/infiniband/sw/rdmavt/mad.h: +1 -1
drivers/infiniband/sw/rdmavt/mcast.c: +1 -1
drivers/infiniband/sw/rdmavt/mcast.h: +1 -1
drivers/infiniband/sw/rdmavt/mmap.c: +1 -1
drivers/infiniband/sw/rdmavt/mmap.h: +1 -1
drivers/infiniband/sw/rdmavt/mr.c: +1 -1
drivers/infiniband/sw/rdmavt/mr.h: +1 -1
drivers/infiniband/sw/rdmavt/pd.c: +1 -1
drivers/infiniband/sw/rdmavt/pd.h: +1 -1
drivers/infiniband/sw/rdmavt/qp.c: +1 -1
drivers/infiniband/sw/rdmavt/qp.h: +1 -1
drivers/infiniband/sw/rdmavt/rc.c: +1 -1
drivers/infiniband/sw/rdmavt/srq.c: +1 -1
drivers/infiniband/sw/rdmavt/srq.h: +1 -1
drivers/infiniband/sw/rdmavt/trace.c: +1 -1
drivers/infiniband/sw/rdmavt/trace.h: +1 -1
drivers/infiniband/sw/rdmavt/trace_cq.h: +1 -1
drivers/infiniband/sw/rdmavt/trace_mr.h: +1 -1
drivers/infiniband/sw/rdmavt/trace_qp.h: +1 -1
drivers/infiniband/sw/rdmavt/trace_rc.h: +1 -1
drivers/infiniband/sw/rdmavt/trace_rvt.h: +1 -1
drivers/infiniband/sw/rdmavt/trace_tx.h: +1 -1
drivers/infiniband/sw/rdmavt/vt.c: +1 -1
drivers/infiniband/sw/rdmavt/vt.h: +1 -1
drivers/infiniband/sw/siw/iwarp.h: +1 -1
drivers/infiniband/sw/siw/siw.h: +2 -2
drivers/infiniband/sw/siw/siw_cm.c: +1 -1
drivers/infiniband/sw/siw/siw_cm.h: +1 -1
drivers/infiniband/sw/siw/siw_cq.c: +1 -1
drivers/infiniband/sw/siw/siw_main.c: +1 -1
drivers/infiniband/sw/siw/siw_mem.c: +1 -1
drivers/infiniband/sw/siw/siw_mem.h: +1 -1
drivers/infiniband/sw/siw/siw_qp.c: +1 -1
drivers/infiniband/sw/siw/siw_qp_rx.c: +1 -1
drivers/infiniband/sw/siw/siw_qp_tx.c: +1 -1
drivers/infiniband/sw/siw/siw_verbs.c: +1 -1
drivers/infiniband/sw/siw/siw_verbs.h: +1 -1
drivers/infiniband/ulp/ipoib/ipoib_ethtool.c: +2 -0
drivers/infiniband/ulp/ipoib/ipoib_main.c: +1 -2
drivers/infiniband/ulp/rtrs/rtrs-clt.c: +6 -1
drivers/infiniband/ulp/rtrs/rtrs.c: +1 -1
drivers/infiniband/ulp/srp/ib_srp.h: +1 -1
drivers/net/ethernet/mellanox/mlx5/core/port.c: +2 -1
include/linux/mlx5/port.h: +2 -1
include/rdma/ib_mad.h: +2 -0
include/rdma/ib_verbs.h: +6 -2
include/uapi/rdma/hns-abi.h: +11 -1
include/uapi/rdma/ib_user_ioctl_verbs.h: +2 -1
include/uapi/rdma/rdma_netlink.h: +4 -0
include/uapi/rdma/siw-abi.h: +1 -1
