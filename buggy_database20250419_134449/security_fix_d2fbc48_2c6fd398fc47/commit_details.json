{
  "hash": "d2fbc48658022f48625064ae192baff52057987d",
  "hash_short": "d2fbc486",
  "subject": "cxl/memdev: Add support for the Inject Poison mailbox command",
  "body": "CXL devices optionally support the INJECT POISON mailbox command. Add\nmemdev driver support for the mailbox command.\n\nPer the CXL Specification (3.0 8.2.9.8.4.2), after receiving a valid\ninject poison request, the device will return poison when the address\nis accessed through the CXL.mem driver. Injecting poison adds the address\nto the device's Poison List and the error source is set to Injected.\nIn addition, the device adds a poison creation event to its internal\nInformational Event log, updates the Event Status register, and if\nconfigured, interrupts the host.\n\nAlso, per the CXL Specification, it is not an error to inject poison\ninto an address that already has poison present and no error is\nreturned from the device.\n\nIf the address is not contained in the device's dpa resource, or is\nnot 64 byte aligned, return -EINVAL without issuing the mbox command.\n\nPoison injection is intended for debug only and will be exposed to\nuserspace through debugfs. Restrict compilation to CONFIG_DEBUG_FS.\n\nSigned-off-by: Alison Schofield <alison.schofield@intel.com>\nReviewed-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>\nReviewed-by: Dave Jiang <dave.jiang@intel.com>\nLink: https://lore.kernel.org/r/241c64115e6bd2effed9c7a20b08b3908dd7be8f.1681874357.git.alison.schofield@intel.com\nTested-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>\nSigned-off-by: Dan Williams <dan.j.williams@intel.com>",
  "full_message": "cxl/memdev: Add support for the Inject Poison mailbox command\n\nCXL devices optionally support the INJECT POISON mailbox command. Add\nmemdev driver support for the mailbox command.\n\nPer the CXL Specification (3.0 8.2.9.8.4.2), after receiving a valid\ninject poison request, the device will return poison when the address\nis accessed through the CXL.mem driver. Injecting poison adds the address\nto the device's Poison List and the error source is set to Injected.\nIn addition, the device adds a poison creation event to its internal\nInformational Event log, updates the Event Status register, and if\nconfigured, interrupts the host.\n\nAlso, per the CXL Specification, it is not an error to inject poison\ninto an address that already has poison present and no error is\nreturned from the device.\n\nIf the address is not contained in the device's dpa resource, or is\nnot 64 byte aligned, return -EINVAL without issuing the mbox command.\n\nPoison injection is intended for debug only and will be exposed to\nuserspace through debugfs. Restrict compilation to CONFIG_DEBUG_FS.\n\nSigned-off-by: Alison Schofield <alison.schofield@intel.com>\nReviewed-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>\nReviewed-by: Dave Jiang <dave.jiang@intel.com>\nLink: https://lore.kernel.org/r/241c64115e6bd2effed9c7a20b08b3908dd7be8f.1681874357.git.alison.schofield@intel.com\nTested-by: Jonathan Cameron <Jonathan.Cameron@huawei.com>\nSigned-off-by: Dan Williams <dan.j.williams@intel.com>",
  "author_name": "Alison Schofield",
  "author_email": "alison.schofield@intel.com",
  "author_date": "Tue Apr 18 20:26:25 2023 -0700",
  "author_date_iso": "2023-04-18T20:26:25-07:00",
  "committer_name": "Dan Williams",
  "committer_email": "dan.j.williams@intel.com",
  "committer_date": "Sun Apr 23 11:46:22 2023 -0700",
  "committer_date_iso": "2023-04-23T11:46:22-07:00",
  "files_changed": [
    "drivers/cxl/core/memdev.c",
    "drivers/cxl/cxlmem.h"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "drivers/cxl/core/memdev.c",
      "insertions": 56,
      "deletions": 0
    },
    {
      "file": "drivers/cxl/cxlmem.h",
      "insertions": 6,
      "deletions": 0
    }
  ],
  "total_insertions": 62,
  "total_deletions": 0,
  "total_changes": 62,
  "parents": [
    "f8d22bf50ca56a334ef58bf59ee299ed62940e42"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "Inject"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/cxl/core/memdev.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/cxl/cxlmem.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}