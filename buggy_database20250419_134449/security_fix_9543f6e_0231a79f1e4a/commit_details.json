{
  "hash": "9543f6e26634537997b6e909c20911b7bf4876de",
  "hash_short": "9543f6e2",
  "subject": "x86/cpufeatures: Fix dependencies for GFNI, VAES, and VPCLMULQDQ",
  "body": "Fix cpuid_deps[] to list the correct dependencies for GFNI, VAES, and\nVPCLMULQDQ.  These features don't depend on AVX512, and there exist CPUs\nthat support these features but not AVX512.  GFNI actually doesn't even\ndepend on AVX.\n\nThis prevents GFNI from being unnecessarily disabled if AVX is disabled\nto mitigate the GDS vulnerability.\n\nThis also prevents all three features from being unnecessarily disabled\nif AVX512VL (or its dependency AVX512F) were to be disabled, but it\nlooks like there isn't any case where this happens anyway.\n\nFixes: c128dbfa0f87 (\"x86/cpufeatures: Enable new SSE/AVX/AVX512 CPU features\")\nSigned-off-by: Eric Biggers <ebiggers@google.com>\nSigned-off-by: Borislav Petkov (AMD) <bp@alien8.de>\nAcked-by: Dave Hansen <dave.hansen@linux.intel.com>\nLink: https://lore.kernel.org/r/20240417060434.47101-1-ebiggers@kernel.org",
  "full_message": "x86/cpufeatures: Fix dependencies for GFNI, VAES, and VPCLMULQDQ\n\nFix cpuid_deps[] to list the correct dependencies for GFNI, VAES, and\nVPCLMULQDQ.  These features don't depend on AVX512, and there exist CPUs\nthat support these features but not AVX512.  GFNI actually doesn't even\ndepend on AVX.\n\nThis prevents GFNI from being unnecessarily disabled if AVX is disabled\nto mitigate the GDS vulnerability.\n\nThis also prevents all three features from being unnecessarily disabled\nif AVX512VL (or its dependency AVX512F) were to be disabled, but it\nlooks like there isn't any case where this happens anyway.\n\nFixes: c128dbfa0f87 (\"x86/cpufeatures: Enable new SSE/AVX/AVX512 CPU features\")\nSigned-off-by: Eric Biggers <ebiggers@google.com>\nSigned-off-by: Borislav Petkov (AMD) <bp@alien8.de>\nAcked-by: Dave Hansen <dave.hansen@linux.intel.com>\nLink: https://lore.kernel.org/r/20240417060434.47101-1-ebiggers@kernel.org",
  "author_name": "Eric Biggers",
  "author_email": "ebiggers@google.com",
  "author_date": "Tue Apr 16 23:04:34 2024 -0700",
  "author_date_iso": "2024-04-16T23:04:34-07:00",
  "committer_name": "Borislav Petkov (AMD)",
  "committer_email": "bp@alien8.de",
  "committer_date": "Thu Apr 18 17:27:52 2024 +0200",
  "committer_date_iso": "2024-04-18T17:27:52+02:00",
  "files_changed": [
    "arch/x86/kernel/cpu/cpuid-deps.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "arch/x86/kernel/cpu/cpuid-deps.c",
      "insertions": 3,
      "deletions": 3
    }
  ],
  "total_insertions": 3,
  "total_deletions": 3,
  "total_changes": 6,
  "parents": [
    "a4b37f5033fa812f02f3b7bd1242393d347ba791"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "vulnerability"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/x86/kernel/cpu/cpuid-deps.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}