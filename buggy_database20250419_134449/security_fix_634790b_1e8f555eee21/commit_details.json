{
  "hash": "634790b82759c98ee57c80966d859083fa2fcd8c",
  "hash_short": "634790b8",
  "subject": "KVM: s390: migration / injection of prog irq ilc",
  "body": "We have to migrate the program irq ilc and someday we will have to\nspecify the ilc without KVM trying to autodetect the value.\n\nLet's reuse one of the spare fields in our program irq that should\nalways be set to 0 by user space. Because we also want to make use\nof 0 ilcs (\"not available\"), we need a validity indicator.\n\nIf no valid ilc is given, we try to autodetect the ilc via the current\nicptcode and icptstatus + parameter and store the valid ilc in the\nirq structure.\n\nThis has a nice effect: QEMU's making use of KVM_S390_IRQ /\nKVM_S390_SET_IRQ_STATE / KVM_S390_GET_IRQ_STATE for migration will\ndirectly migrate the ilc without any changes.\n\nPlease note that we use bit 0 as validity and bit 1,2 for the ilc, so\nby applying the ilc mask we directly get the ilen which is usually what\nwe work with.\n\nReviewed-by: Christian Borntraeger <borntraeger@de.ibm.com>\nSigned-off-by: David Hildenbrand <dahi@linux.vnet.ibm.com>\nSigned-off-by: Christian Borntraeger <borntraeger@de.ibm.com>",
  "full_message": "KVM: s390: migration / injection of prog irq ilc\n\nWe have to migrate the program irq ilc and someday we will have to\nspecify the ilc without KVM trying to autodetect the value.\n\nLet's reuse one of the spare fields in our program irq that should\nalways be set to 0 by user space. Because we also want to make use\nof 0 ilcs (\"not available\"), we need a validity indicator.\n\nIf no valid ilc is given, we try to autodetect the ilc via the current\nicptcode and icptstatus + parameter and store the valid ilc in the\nirq structure.\n\nThis has a nice effect: QEMU's making use of KVM_S390_IRQ /\nKVM_S390_SET_IRQ_STATE / KVM_S390_GET_IRQ_STATE for migration will\ndirectly migrate the ilc without any changes.\n\nPlease note that we use bit 0 as validity and bit 1,2 for the ilc, so\nby applying the ilc mask we directly get the ilen which is usually what\nwe work with.\n\nReviewed-by: Christian Borntraeger <borntraeger@de.ibm.com>\nSigned-off-by: David Hildenbrand <dahi@linux.vnet.ibm.com>\nSigned-off-by: Christian Borntraeger <borntraeger@de.ibm.com>",
  "author_name": "David Hildenbrand",
  "author_email": "dahi@linux.vnet.ibm.com",
  "author_date": "Wed Nov 4 16:33:33 2015 +0100",
  "author_date_iso": "2015-11-04T16:33:33+01:00",
  "committer_name": "Christian Borntraeger",
  "committer_email": "borntraeger@de.ibm.com",
  "committer_date": "Wed Feb 10 13:12:50 2016 +0100",
  "committer_date_iso": "2016-02-10T13:12:50+01:00",
  "files_changed": [
    "arch/s390/kvm/interrupt.c",
    "include/uapi/linux/kvm.h"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "arch/s390/kvm/interrupt.c",
      "insertions": 11,
      "deletions": 1
    },
    {
      "file": "include/uapi/linux/kvm.h",
      "insertions": 6,
      "deletions": 1
    }
  ],
  "total_insertions": 17,
  "total_deletions": 2,
  "total_changes": 19,
  "parents": [
    "0e8bc06a2fbb4d6b688baa8e2416cd07f9453595"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/s390/kvm/interrupt.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/uapi/linux/kvm.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}