Commit Hash: 6497d0a9c53df6e98b25e2b79f2295d7caa47b6e
Subject: IB/hfi1: Fix Spectre v1 vulnerability


Security Keywords:
- vulnerability
- sanitizing

Full commit message:
IB/hfi1: Fix Spectre v1 vulnerability

sl is controlled by user-space, hence leading to a potential
exploitation of the Spectre variant 1 vulnerability.

Fix this by sanitizing sl before using it to index ibp->sl_to_sc.

Notice that given that speculation windows are large, the policy is
to kill the speculation on the first load and not worry if it can be
completed with a dependent load/store [1].

[1] https://lore.kernel.org/lkml/20180423164740.GY17484@dhcp22.suse.cz/

Cc: stable@vger.kernel.org
Signed-off-by: Gustavo A. R. Silva <gustavo@embeddedor.com>
Link: https://lore.kernel.org/r/20190731175428.GA16736@embeddedor
Signed-off-by: Doug Ledford <dledford@redhat.com>

Metadata:
Author: Gustavo A. R. Silva <gustavo@embeddedor.com>
Author Date: Wed Jul 31 12:54:28 2019 -0500
Committer: Doug Ledford <dledford@redhat.com>
Commit Date: Thu Aug 1 12:14:15 2019 -0400

Files Changed: 1
Lines Added: 2
Lines Removed: 0
Total Changes: 2
