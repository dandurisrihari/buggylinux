commit 6abe0563224f8540c88e1d84d2bb394bd408c951
Author: Will Hawkins <hawkinsw@opentechinstitute.org>
Date:   Wed Jun 20 11:51:14 2012 -0400

    mac80211: Track auth frame registrations on IBSS ifaces
    
    Track userspace registrations for authentication
    frames received on an IBSS interface. This field
    will be used to decide whether or not to send
    "open system" authentication frames when a new
    station joins an adhoc network.
    
    Signed-off-by: Will Hawkins <hawkinsw@opentechinstitute.org>
    [redesign the code flow a bit]
    Signed-off-by: Johannes Berg <johannes.berg@intel.com>

diff --git a/net/mac80211/ieee80211_i.h b/net/mac80211/ieee80211_i.h
index 0024c32d7bc4..36ce2bb066bf 100644
--- a/net/mac80211/ieee80211_i.h
+++ b/net/mac80211/ieee80211_i.h
@@ -511,6 +511,7 @@ struct ieee80211_if_ibss {
 	bool privacy;
 
 	bool control_port;
+	unsigned int auth_frame_registrations;
 
 	u8 bssid[ETH_ALEN] __aligned(2);
 	u8 ssid[IEEE80211_MAX_SSID_LEN];