Commit Hash: b93da27f5234198433345e40b39ff59797bc6f6e
Subject: ibmveth: Fix issue with DMA mapping failure


Security Keywords:
- injection

Full commit message:
ibmveth: Fix issue with DMA mapping failure

descs[].fields.address is 32bit which truncates any dma mapping
errors so dma_mapping_error() fails to catch it.

Use a dma_addr_t to do the comparison. With this patch I was able
to transfer many gigabytes of data with IOMMU fault injection set
at 10% probability.

Signed-off-by: Anton Blanchard <anton@samba.org>
Cc: <stable@kernel.org> # v2.6.37+
Signed-off-by: David S. Miller <davem@davemloft.net>

Metadata:
Author: Anton Blanchard <anton@samba.org>
Author Date: Wed Sep 7 14:41:04 2011 +0000
Committer: David S. Miller <davem@davemloft.net>
Commit Date: Fri Sep 16 15:26:32 2011 -0400

Files Changed: 1
Lines Added: 5
Lines Removed: 5
Total Changes: 10
