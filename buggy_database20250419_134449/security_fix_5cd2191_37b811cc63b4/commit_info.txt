Commit Hash: 5cd21917da245fbe98bd443de2c7f519b3df6814
Subject: KVM: x86 emulator: restart string instruction without going back to a guest.


Security Keywords:
- injection

Full commit message:
KVM: x86 emulator: restart string instruction without going back to a guest.

Currently when string instruction is only partially complete we go back
to a guest mode, guest tries to reexecute instruction and exits again
and at this point emulation continues. Avoid all of this by restarting
instruction without going back to a guest mode, but return to a guest
mode each 1024 iterations to allow interrupt injection. Pending
exception causes immediate guest entry too.

Signed-off-by: Gleb Natapov <gleb@redhat.com>
Signed-off-by: Marcelo Tosatti <mtosatti@redhat.com>

Metadata:
Author: Gleb Natapov <gleb@redhat.com>
Author Date: Thu Mar 18 15:20:26 2010 +0200
Committer: Avi Kivity <avi@redhat.com>
Commit Date: Mon May 17 12:16:29 2010 +0300

Files Changed: 3
Lines Added: 42
Lines Removed: 12
Total Changes: 54
