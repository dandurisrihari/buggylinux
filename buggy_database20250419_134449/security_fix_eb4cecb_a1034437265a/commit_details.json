{
  "hash": "eb4cecb453a19b34d5454b49532e09e9cb0c1529",
  "hash_short": "eb4cecb4",
  "subject": "Revert \"virtio_pci: harden MSI-X interrupts\"",
  "body": "This reverts commit 9e35276a5344f74d4a3600fc4100b3dd251d5c56. Issue\nwere reported for the drivers that are using affinity managed IRQ\nwhere manually toggling IRQ status is not expected. And we forget to\nenable the interrupts in the restore path as well.\n\nIn the future, we will rework on the interrupt hardening.\n\nFixes: 9e35276a5344 (\"virtio_pci: harden MSI-X interrupts\")\nReported-by: Marc Zyngier <maz@kernel.org>\nReported-by: Stefano Garzarella <sgarzare@redhat.com>\nSigned-off-by: Jason Wang <jasowang@redhat.com>\nLink: https://lore.kernel.org/r/20220323031524.6555-2-jasowang@redhat.com\nSigned-off-by: Michael S. Tsirkin <mst@redhat.com>",
  "full_message": "Revert \"virtio_pci: harden MSI-X interrupts\"\n\nThis reverts commit 9e35276a5344f74d4a3600fc4100b3dd251d5c56. Issue\nwere reported for the drivers that are using affinity managed IRQ\nwhere manually toggling IRQ status is not expected. And we forget to\nenable the interrupts in the restore path as well.\n\nIn the future, we will rework on the interrupt hardening.\n\nFixes: 9e35276a5344 (\"virtio_pci: harden MSI-X interrupts\")\nReported-by: Marc Zyngier <maz@kernel.org>\nReported-by: Stefano Garzarella <sgarzare@redhat.com>\nSigned-off-by: Jason Wang <jasowang@redhat.com>\nLink: https://lore.kernel.org/r/20220323031524.6555-2-jasowang@redhat.com\nSigned-off-by: Michael S. Tsirkin <mst@redhat.com>",
  "author_name": "Jason Wang",
  "author_email": "jasowang@redhat.com",
  "author_date": "Wed Mar 23 11:15:24 2022 +0800",
  "author_date_iso": "2022-03-23T11:15:24+08:00",
  "committer_name": "Michael S. Tsirkin",
  "committer_email": "mst@redhat.com",
  "committer_date": "Mon Mar 28 16:52:59 2022 -0400",
  "committer_date_iso": "2022-03-28T16:52:59-04:00",
  "files_changed": [
    "drivers/virtio/virtio_pci_common.c",
    "drivers/virtio/virtio_pci_common.h",
    "drivers/virtio/virtio_pci_legacy.c",
    "drivers/virtio/virtio_pci_modern.c"
  ],
  "files_changed_count": 4,
  "stats": [
    {
      "file": "drivers/virtio/virtio_pci_common.c",
      "insertions": 6,
      "deletions": 21
    },
    {
      "file": "drivers/virtio/virtio_pci_common.h",
      "insertions": 2,
      "deletions": 4
    },
    {
      "file": "drivers/virtio/virtio_pci_legacy.c",
      "insertions": 2,
      "deletions": 3
    },
    {
      "file": "drivers/virtio/virtio_pci_modern.c",
      "insertions": 2,
      "deletions": 4
    }
  ],
  "total_insertions": 12,
  "total_deletions": 32,
  "total_changes": 44,
  "parents": [
    "7b79edfb862d6b1ecc66479419ae67a7db2d02e3"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/virtio/virtio_pci_common.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/virtio/virtio_pci_common.h",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/virtio/virtio_pci_legacy.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/virtio/virtio_pci_modern.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}