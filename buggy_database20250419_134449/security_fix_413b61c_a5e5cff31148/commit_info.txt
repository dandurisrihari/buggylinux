Commit Hash: 413b61ce0b4de0e55a9f8cf91bbce1ad7e0870cd
Subject: crypto: ccp - permit asynchronous skcipher as fallback


Security Keywords:
- security issue

Full commit message:
crypto: ccp - permit asynchronous skcipher as fallback

Even though the ccp driver implements an asynchronous version of xts(aes),
the fallback it allocates is required to be synchronous. Given that SIMD
based software implementations are usually asynchronous as well, even
though they rarely complete asynchronously (this typically only happens
in cases where the request was made from softirq context, while SIMD was
already in use in the task context that it interrupted), these
implementations are disregarded, and either the generic C version or
another table based version implemented in assembler is selected instead.

Since falling back to synchronous AES is not only a performance issue, but
potentially a security issue as well (due to the fact that table based AES
is not time invariant), let's fix this, by allocating an ordinary skcipher
as the fallback, and invoke it with the completion routine that was given
to the outer request.

Signed-off-by: Ard Biesheuvel <ardb@kernel.org>
Acked-by: John Allen <john.allen@amd.com>
Signed-off-by: Herbert Xu <herbert@gondor.apana.org.au>

Metadata:
Author: Ard Biesheuvel <ardb@kernel.org>
Author Date: Tue Jul 7 09:31:57 2020 +0300
Committer: Herbert Xu <herbert@gondor.apana.org.au>
Commit Date: Thu Jul 16 21:49:03 2020 +1000

Files Changed: 2
Lines Added: 19
Lines Removed: 18
Total Changes: 37
