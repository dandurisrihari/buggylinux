{
  "hash": "f5a5a406b4b8bb6c1fc7a1e92a872bd86061a53f",
  "hash_short": "f5a5a406",
  "subject": "KVM: arm64: Propagate and handle Fine-Grained UNDEF bits",
  "body": "In order to correctly honor our FGU bits, they must be converted\ninto a set of FGT bits. They get merged as part of the existing\nFGT setting.\n\nSimilarly, the UNDEF injection phase takes place when handling\nthe trap.\n\nThis results in a bit of rework in the FGT macros in order to\nhelp with the code generation, as burying per-CPU accesses in\nmacros results in a lot of expansion, not to mention the vcpu->kvm\naccess on nvhe (kern_hyp_va() is not optimisation-friendly).\n\nReviewed-by: Joey Gouly <joey.gouly@arm.com>\nSigned-off-by: Marc Zyngier <maz@kernel.org>\nLink: https://lore.kernel.org/r/20240214131827.2856277-19-maz@kernel.org\nSigned-off-by: Oliver Upton <oliver.upton@linux.dev>",
  "full_message": "KVM: arm64: Propagate and handle Fine-Grained UNDEF bits\n\nIn order to correctly honor our FGU bits, they must be converted\ninto a set of FGT bits. They get merged as part of the existing\nFGT setting.\n\nSimilarly, the UNDEF injection phase takes place when handling\nthe trap.\n\nThis results in a bit of rework in the FGT macros in order to\nhelp with the code generation, as burying per-CPU accesses in\nmacros results in a lot of expansion, not to mention the vcpu->kvm\naccess on nvhe (kern_hyp_va() is not optimisation-friendly).\n\nReviewed-by: Joey Gouly <joey.gouly@arm.com>\nSigned-off-by: Marc Zyngier <maz@kernel.org>\nLink: https://lore.kernel.org/r/20240214131827.2856277-19-maz@kernel.org\nSigned-off-by: Oliver Upton <oliver.upton@linux.dev>",
  "author_name": "Marc Zyngier",
  "author_email": "maz@kernel.org",
  "author_date": "Wed Feb 14 13:18:19 2024 +0000",
  "author_date_iso": "2024-02-14T13:18:19+00:00",
  "committer_name": "Oliver Upton",
  "committer_email": "oliver.upton@linux.dev",
  "committer_date": "Mon Feb 19 17:13:01 2024 +0000",
  "committer_date_iso": "2024-02-19T17:13:01+00:00",
  "files_changed": [
    "arch/arm64/kvm/emulate-nested.c",
    "arch/arm64/kvm/hyp/include/hyp/switch.h"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "arch/arm64/kvm/emulate-nested.c",
      "insertions": 11,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/hyp/include/hyp/switch.h",
      "insertions": 61,
      "deletions": 20
    }
  ],
  "total_insertions": 72,
  "total_deletions": 20,
  "total_changes": 92,
  "parents": [
    "2fd8f31c32f061822c18d13d17c1ea6a531cc443"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/arm64/kvm/emulate-nested.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kvm/hyp/include/hyp/switch.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}