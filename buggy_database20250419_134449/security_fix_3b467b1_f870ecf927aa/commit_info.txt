Commit Hash: 3b467b16582c077f57fab244cf0801ecea7914b6
Subject: KVM: arm64: Force injection of a data abort on NISV MMIO exit


Security Keywords:
- injection

Full commit message:
KVM: arm64: Force injection of a data abort on NISV MMIO exit

If a vcpu exits for a data abort with an invalid syndrome, the
expectations are that userspace has a chance to save the day if
it has requested to see such exits.

However, this is completely futile in the case of a protected VM,
as none of the state is available. In this particular case, inject
a data abort directly into the vcpu, consistent with what userspace
could do.

This also helps with pKVM, which discards all syndrome information when
forwarding data aborts that are not known to be MMIO.

Finally, document this tweak to the API.

Signed-off-by: Fuad Tabba <tabba@google.com>
Acked-by: Oliver Upton <oliver.upton@linux.dev>
Link: https://lore.kernel.org/r/20240423150538.2103045-31-tabba@google.com
Signed-off-by: Marc Zyngier <maz@kernel.org>

Metadata:
Author: Marc Zyngier <maz@kernel.org>
Author Date: Tue Apr 23 16:05:38 2024 +0100
Committer: Marc Zyngier <maz@kernel.org>
Commit Date: Wed May 1 16:48:15 2024 +0100

Files Changed: 2
Lines Added: 15
Lines Removed: 0
Total Changes: 15
