{
  "hash": "7ee04901215b3cab8fa35aa5bf4692d7aa312e36",
  "hash_short": "7ee04901",
  "subject": "Merge tag 'drm-next-2024-03-22' of https://gitlab.freedesktop.org/drm/kernel",
  "body": "Pull drm fixes from Dave Airlie:\n \"Fixes from the last week (or 3 weeks in amdgpu case), after amdgpu,\n  it's xe and nouveau then a few scattered core fixes.\n\n  core:\n   - fix rounding in drm_fixp2int_round()\n\n  bridge:\n   - fix documentation for DRM_BRIDGE_OP_EDID\n\n  sun4i:\n   - fix 64-bit division on 32-bit architectures\n\n  tests:\n   - fix dependency on DRM_KMS_HELPER\n\n  probe-helper:\n   - never return negative values from .get_modes() plus driver fixes\n\n  xe:\n   - invalidate userptr vma on page pin fault\n   - fail early on sysfs file creation error\n   - skip VMA pinning on xe_exec if no batches\n\n  nouveau:\n   - clear bo resource bus after eviction\n   - documentation fixes\n   - don't check devinit disable on GSP\n\n  amdgpu:\n   - Freesync fixes\n   - UAF IOCTL fixes\n   - Fix mmhub client ID mapping\n   - IH 7.0 fix\n   - DML2 fixes\n   - VCN 4.0.6 fix\n   - GART bind fix\n   - GPU reset fix\n   - SR-IOV fix\n   - OD table handling fixes\n   - Fix TA handling on boards without display hardware\n   - DML1 fix\n   - ABM fix\n   - eDP panel fix\n   - DPPCLK fix\n   - HDCP fix\n   - Revert incorrect error case handling in ioremap\n   - VPE fix\n   - HDMI fixes\n   - SDMA 4.4.2 fix\n   - Other misc fixes\n\n  amdkfd:\n   - Fix duplicate BO handling in process restore\"\n\n* tag 'drm-next-2024-03-22' of https://gitlab.freedesktop.org/drm/kernel: (50 commits)\n  drm/amdgpu/pm: Don't use OD table on Arcturus\n  drm/amdgpu: drop setting buffer funcs in sdma442\n  drm/amd/display: Fix noise issue on HDMI AV mute\n  drm/amd/display: Revert Remove pixle rate limit for subvp\n  Revert \"drm/amdgpu/vpe: don't emit cond exec command under collaborate mode\"\n  Revert \"drm/amd/amdgpu: Fix potential ioremap() memory leaks in amdgpu_device_init()\"\n  drm/amd/display: Add a dc_state NULL check in dc_state_release\n  drm/amd/display: Return the correct HDCP error code\n  drm/amd/display: Implement wait_for_odm_update_pending_complete\n  drm/amd/display: Lock all enabled otg pipes even with no planes\n  drm/amd/display: Amend coasting vtotal for replay low hz\n  drm/amd/display: Fix idle check for shared firmware state\n  drm/amd/display: Update odm when ODM combine is changed on an otg master pipe with no plane\n  drm/amd/display: Init DPPCLK from SMU on dcn32\n  drm/amd/display: Add monitor patch for specific eDP\n  drm/amd/display: Allow dirty rects to be sent to dmub when abm is active\n  drm/amd/display: Override min required DCFCLK in dml1_validate\n  drm/amdgpu: Bypass display ta if display hw is not available\n  drm/amdgpu: correct the KGQ fallback message\n  drm/amdgpu/pm: Check the validity of overdiver power limit\n  ...",
  "full_message": "Merge tag 'drm-next-2024-03-22' of https://gitlab.freedesktop.org/drm/kernel\n\nPull drm fixes from Dave Airlie:\n \"Fixes from the last week (or 3 weeks in amdgpu case), after amdgpu,\n  it's xe and nouveau then a few scattered core fixes.\n\n  core:\n   - fix rounding in drm_fixp2int_round()\n\n  bridge:\n   - fix documentation for DRM_BRIDGE_OP_EDID\n\n  sun4i:\n   - fix 64-bit division on 32-bit architectures\n\n  tests:\n   - fix dependency on DRM_KMS_HELPER\n\n  probe-helper:\n   - never return negative values from .get_modes() plus driver fixes\n\n  xe:\n   - invalidate userptr vma on page pin fault\n   - fail early on sysfs file creation error\n   - skip VMA pinning on xe_exec if no batches\n\n  nouveau:\n   - clear bo resource bus after eviction\n   - documentation fixes\n   - don't check devinit disable on GSP\n\n  amdgpu:\n   - Freesync fixes\n   - UAF IOCTL fixes\n   - Fix mmhub client ID mapping\n   - IH 7.0 fix\n   - DML2 fixes\n   - VCN 4.0.6 fix\n   - GART bind fix\n   - GPU reset fix\n   - SR-IOV fix\n   - OD table handling fixes\n   - Fix TA handling on boards without display hardware\n   - DML1 fix\n   - ABM fix\n   - eDP panel fix\n   - DPPCLK fix\n   - HDCP fix\n   - Revert incorrect error case handling in ioremap\n   - VPE fix\n   - HDMI fixes\n   - SDMA 4.4.2 fix\n   - Other misc fixes\n\n  amdkfd:\n   - Fix duplicate BO handling in process restore\"\n\n* tag 'drm-next-2024-03-22' of https://gitlab.freedesktop.org/drm/kernel: (50 commits)\n  drm/amdgpu/pm: Don't use OD table on Arcturus\n  drm/amdgpu: drop setting buffer funcs in sdma442\n  drm/amd/display: Fix noise issue on HDMI AV mute\n  drm/amd/display: Revert Remove pixle rate limit for subvp\n  Revert \"drm/amdgpu/vpe: don't emit cond exec command under collaborate mode\"\n  Revert \"drm/amd/amdgpu: Fix potential ioremap() memory leaks in amdgpu_device_init()\"\n  drm/amd/display: Add a dc_state NULL check in dc_state_release\n  drm/amd/display: Return the correct HDCP error code\n  drm/amd/display: Implement wait_for_odm_update_pending_complete\n  drm/amd/display: Lock all enabled otg pipes even with no planes\n  drm/amd/display: Amend coasting vtotal for replay low hz\n  drm/amd/display: Fix idle check for shared firmware state\n  drm/amd/display: Update odm when ODM combine is changed on an otg master pipe with no plane\n  drm/amd/display: Init DPPCLK from SMU on dcn32\n  drm/amd/display: Add monitor patch for specific eDP\n  drm/amd/display: Allow dirty rects to be sent to dmub when abm is active\n  drm/amd/display: Override min required DCFCLK in dml1_validate\n  drm/amdgpu: Bypass display ta if display hw is not available\n  drm/amdgpu: correct the KGQ fallback message\n  drm/amdgpu/pm: Check the validity of overdiver power limit\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Thu Mar 21 19:04:31 2024 -0700",
  "author_date_iso": "2024-03-21T19:04:31-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Thu Mar 21 19:04:31 2024 -0700",
  "committer_date_iso": "2024-03-21T19:04:31-07:00",
  "files_changed": [
    "drivers/gpu/drm/Kconfig",
    "drivers/gpu/drm/amd/amdgpu/sdma_v4_4_2.c",
    "drivers/gpu/drm/drm_probe_helper.c",
    "drivers/gpu/drm/nouveau/nvkm/subdev/gsp/r535.c",
    "drivers/gpu/drm/xe/xe_trace.h",
    "drivers/gpu/drm/xe/xe_vm.c",
    "drivers/gpu/drm/xe/xe_vm_types.h"
  ],
  "files_changed_count": 7,
  "stats": [
    {
      "file": "drivers/gpu/drm/Kconfig",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/amdgpu_amdkfd_gpuvm.c",
      "insertions": 10,
      "deletions": 4
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/amdgpu_device.c",
      "insertions": 6,
      "deletions": 10
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/amdgpu_drv.c",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/amdgpu_gfx.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/amdgpu_hmm.c",
      "insertions": 16,
      "deletions": 4
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/amdgpu_psp.c",
      "insertions": 18,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/amdgpu_ttm.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/amdgpu_vcn.c",
      "insertions": 25,
      "deletions": 13
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/amdgpu_vcn.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/amdgpu_vpe.c",
      "insertions": 0,
      "deletions": 3
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/gfx_v10_0.c",
      "insertions": 6,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/gfxhub_v2_1.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/ih_v7_0.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/mmhub_v3_3.c",
      "insertions": 3,
      "deletions": 4
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/sdma_v4_4_2.c",
      "insertions": 1,
      "deletions": 22
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/vcn_v1_0.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/vcn_v2_0.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/vcn_v2_5.c",
      "insertions": 5,
      "deletions": 3
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/vcn_v3_0.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/vcn_v4_0.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/vcn_v4_0_3.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/vcn_v4_0_5.c",
      "insertions": 5,
      "deletions": 5
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/vcn_v5_0_0.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c",
      "insertions": 17,
      "deletions": 8
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/clk_mgr/dcn32/dcn32_clk_mgr.c",
      "insertions": 14,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/core/dc.c",
      "insertions": 61,
      "deletions": 10
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/core/dc_state.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dc_types.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dcn10/dcn10_opp.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dcn20/dcn20_opp.c",
      "insertions": 14,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dcn20/dcn20_opp.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dcn201/dcn201_opp.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dcn32/dcn32_resource_helpers.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dml/dcn32/dcn32_fpu.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dml2/dml2_translation_helper.c",
      "insertions": 15,
      "deletions": 3
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dml2/dml2_wrapper.c",
      "insertions": 20,
      "deletions": 8
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dml2/dml2_wrapper.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/hwss/dcn20/dcn20_hwseq.c",
      "insertions": 23,
      "deletions": 22
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/hwss/dcn30/dcn30_hwseq.c",
      "insertions": 11,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/hwss/dcn32/dcn32_hwseq.c",
      "insertions": 30,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/hwss/dcn32/dcn32_hwseq.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/hwss/dcn32/dcn32_init.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/inc/hw/opp.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/inc/hw/timing_generator.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/inc/link.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/link/protocols/link_edp_panel_control.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/link/protocols/link_edp_panel_control.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/optc/dcn10/dcn10_optc.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/optc/dcn32/dcn32_optc.c",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/optc/dcn32/dcn32_optc.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/resource/dcn32/dcn32_resource.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/resource/dcn32/dcn32_resource.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/resource/dcn321/dcn321_resource.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dmub/inc/dmub_cmd.h",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/modules/hdcp/hdcp_psp.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/modules/power/power_helpers.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/display/modules/power/power_helpers.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/pm/swsmu/smu11/arcturus_ppt.c",
      "insertions": 5,
      "deletions": 23
    },
    {
      "file": "drivers/gpu/drm/amd/pm/swsmu/smu11/navi10_ppt.c",
      "insertions": 11,
      "deletions": 8
    },
    {
      "file": "drivers/gpu/drm/amd/pm/swsmu/smu11/sienna_cichlid_ppt.c",
      "insertions": 18,
      "deletions": 13
    },
    {
      "file": "drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_0_ppt.c",
      "insertions": 11,
      "deletions": 7
    },
    {
      "file": "drivers/gpu/drm/amd/pm/swsmu/smu13/smu_v13_0_7_ppt.c",
      "insertions": 11,
      "deletions": 7
    },
    {
      "file": "drivers/gpu/drm/bridge/lontium-lt8912b.c",
      "insertions": 7,
      "deletions": 9
    },
    {
      "file": "drivers/gpu/drm/bridge/lontium-lt9611uxc.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/drm_panel.c",
      "insertions": 11,
      "deletions": 6
    },
    {
      "file": "drivers/gpu/drm/drm_probe_helper.c",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/exynos/exynos_dp.c",
      "insertions": 3,
      "deletions": 4
    },
    {
      "file": "drivers/gpu/drm/exynos/exynos_drm_vidi.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/exynos/exynos_hdmi.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/imx/ipuv3/parallel-display.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/nouveau/nouveau_bo.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/nouveau/nvkm/subdev/devinit/r535.c",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/nouveau/nvkm/subdev/gsp/r535.c",
      "insertions": 9,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/sun4i/sun4i_hdmi_enc.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/vc4/vc4_hdmi.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/xe/xe_exec.c",
      "insertions": 23,
      "deletions": 18
    },
    {
      "file": "drivers/gpu/drm/xe/xe_gt_pagefault.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/xe/xe_trace.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/xe/xe_vm.c",
      "insertions": 24,
      "deletions": 8
    },
    {
      "file": "drivers/gpu/drm/xe/xe_vm_types.h",
      "insertions": 2,
      "deletions": 5
    },
    {
      "file": "drivers/gpu/drm/xe/xe_vram_freq.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "include/drm/drm_bridge.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "include/drm/drm_fixed.h",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "include/drm/drm_modeset_helper_vtables.h",
      "insertions": 2,
      "deletions": 1
    }
  ],
  "total_insertions": 561,
  "total_deletions": 283,
  "total_changes": 844,
  "parents": [
    "661dc19066ef0fdcb2db3e2542c45744a4067e87",
    "cafd86cbdc607eadc28a008cddacd78f0894c628"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "Bypass"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpu/drm/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/drm_probe_helper.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/sdma_v4_4_2.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/xe/xe_vm_types.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/xe/xe_vm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/nouveau/nvkm/subdev/gsp/r535.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/xe/xe_trace.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}