Commit Hash: c72a870926c2de694942aaac2b49e59ce789bb74
Subject: kunit: add ability to run tests after boot using debugfs


Security Keywords:
- injection

Full commit message:
kunit: add ability to run tests after boot using debugfs

Add functionality to run built-in tests after boot by writing to a
debugfs file.

Add a new debugfs file labeled "run" for each test suite to use for
this purpose.

As an example, write to the file using the following:

echo "any string" > /sys/kernel/debugfs/kunit/<testsuite>/run

This will trigger the test suite to run and will print results to the
kernel log.

To guard against running tests concurrently with this feature, add a
mutex lock around running kunit. This supports the current practice of
not allowing tests to be run concurrently on the same kernel.

This new functionality could be used to design a parameter
injection feature in the future.

Fixed up merge conflict duing rebase to Linux 6.7-rc6
Signed-off-by: Shuah Khan <skhan@linuxfoundation.org>

Reviewed-by: David Gow <davidgow@google.com>
Signed-off-by: Rae Moar <rmoar@google.com>
Signed-off-by: Shuah Khan <skhan@linuxfoundation.org>

Metadata:
Author: Rae Moar <rmoar@google.com>
Author Date: Wed Dec 13 19:44:20 2023 +0000
Committer: Shuah Khan <skhan@linuxfoundation.org>
Commit Date: Mon Dec 18 13:25:49 2023 -0700

Files Changed: 2
Lines Added: 78
Lines Removed: 0
Total Changes: 78
