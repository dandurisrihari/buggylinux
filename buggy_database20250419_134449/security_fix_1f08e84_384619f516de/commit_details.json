{
  "hash": "1f08e84ff642294e42d138442a388989ffb20865",
  "hash_short": "1f08e84f",
  "subject": "mac80211: Fix [re]association power saving issue on AP side",
  "body": "Consider the following step-by step:\n1. A STA authenticates and associates with the AP and exchanges\ntraffic.\n2. The STA reports to the AP that it is going to PS state.\n3. Some time later the STA device goes to the stand-by mode (not only\nits wi-fi card, but the device itself) and drops the association state\nwithout sending a disassociation frame.\n4. The STA device wakes up and begins authentication with an\nAuth frame as it hasn't been authenticated/associated previously.\n\nAt the step 4 the AP \"remembers\" the STA and considers it is still in\nthe PS state, so the AP buffers frames, which it has to send to the STA.\nBut the STA isn't actually in the PS state and so it neither checks\nTIM bits nor reports to the AP that it isn't power saving.\nBecause of that authentication/[re]association fails.\n\nTo fix authentication/[re]association stage of this issue, Auth, Assoc\nResp and Reassoc Resp frames are transmitted disregarding of STA's power\nsaving state.\n\nN.B. This patch doesn't fix further data frame exchange after\nauthentication/[re]association. A patch in hostapd is required to fix\nthat.\n\nSigned-off-by: Igor Perminov <igor.perminov@inbox.ru>\nSigned-off-by: John W. Linville <linville@tuxdriver.com>",
  "full_message": "mac80211: Fix [re]association power saving issue on AP side\n\nConsider the following step-by step:\n1. A STA authenticates and associates with the AP and exchanges\ntraffic.\n2. The STA reports to the AP that it is going to PS state.\n3. Some time later the STA device goes to the stand-by mode (not only\nits wi-fi card, but the device itself) and drops the association state\nwithout sending a disassociation frame.\n4. The STA device wakes up and begins authentication with an\nAuth frame as it hasn't been authenticated/associated previously.\n\nAt the step 4 the AP \"remembers\" the STA and considers it is still in\nthe PS state, so the AP buffers frames, which it has to send to the STA.\nBut the STA isn't actually in the PS state and so it neither checks\nTIM bits nor reports to the AP that it isn't power saving.\nBecause of that authentication/[re]association fails.\n\nTo fix authentication/[re]association stage of this issue, Auth, Assoc\nResp and Reassoc Resp frames are transmitted disregarding of STA's power\nsaving state.\n\nN.B. This patch doesn't fix further data frame exchange after\nauthentication/[re]association. A patch in hostapd is required to fix\nthat.\n\nSigned-off-by: Igor Perminov <igor.perminov@inbox.ru>\nSigned-off-by: John W. Linville <linville@tuxdriver.com>",
  "author_name": "Igor Perminov",
  "author_email": "igor.perminov@inbox.ru",
  "author_date": "Tue Sep 22 00:25:44 2009 +0400",
  "author_date_iso": "2009-09-22T00:25:44+04:00",
  "committer_name": "John W. Linville",
  "committer_email": "linville@tuxdriver.com",
  "committer_date": "Tue Sep 29 17:25:15 2009 -0400",
  "committer_date_iso": "2009-09-29T17:25:15-04:00",
  "files_changed": [
    "net/mac80211/tx.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "net/mac80211/tx.c",
      "insertions": 4,
      "deletions": 1
    }
  ],
  "total_insertions": 4,
  "total_deletions": 1,
  "total_changes": 5,
  "parents": [
    "eb1cf0f8f7a9e5a6d573d5bd72c015686a042db0"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v2.6.32",
    "v2.6.32-rc3",
    "v2.6.32-rc4",
    "v2.6.32-rc5",
    "v2.6.32-rc6",
    "v2.6.32-rc7",
    "v2.6.32-rc8",
    "v2.6.33",
    "v2.6.33-rc1",
    "v2.6.33-rc2"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "net/mac80211/tx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}