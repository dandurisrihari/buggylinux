Commit Hash: ee6a569d3bf64c9676eee3eecb861fb01cc11311
Subject: KVM: s390: pv: make use of ultravisor AIV support


Security Keywords:
- injection

Full commit message:
KVM: s390: pv: make use of ultravisor AIV support

This patch enables the ultravisor adapter interruption vitualization
support indicated by UV feature BIT_UV_FEAT_AIV. This allows ISC
interruption injection directly into the GISA IPM for PV kvm guests.

Hardware that does not support this feature will continue to use the
UV interruption interception method to deliver ISC interruptions to
PV kvm guests. For this purpose, the ECA_AIV bit for all guest cpus
will be cleared and the GISA will be disabled during PV CPU setup.

In addition a check in __inject_io() has been removed. That reduces the
required instructions for interruption handling for PV and traditional
kvm guests.

Signed-off-by: Michael Mueller <mimu@linux.ibm.com>
Reviewed-by: Janosch Frank <frankja@linux.ibm.com>
Link: https://lore.kernel.org/r/20220209152217.1793281-2-mimu@linux.ibm.com
Reviewed-by: Christian Borntraeger <borntraeger@linux.ibm.com>
Signed-off-by: Christian Borntraeger <borntraeger@linux.ibm.com>

Metadata:
Author: Michael Mueller <mimu@linux.ibm.com>
Author Date: Wed Feb 9 16:22:17 2022 +0100
Committer: Christian Borntraeger <borntraeger@linux.ibm.com>
Commit Date: Fri Feb 25 14:30:13 2022 +0100

Files Changed: 4
Lines Added: 68
Lines Removed: 9
Total Changes: 77
