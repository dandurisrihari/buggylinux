{
  "hash": "ee6a569d3bf64c9676eee3eecb861fb01cc11311",
  "hash_short": "ee6a569d",
  "subject": "KVM: s390: pv: make use of ultravisor AIV support",
  "body": "This patch enables the ultravisor adapter interruption vitualization\nsupport indicated by UV feature BIT_UV_FEAT_AIV. This allows ISC\ninterruption injection directly into the GISA IPM for PV kvm guests.\n\nHardware that does not support this feature will continue to use the\nUV interruption interception method to deliver ISC interruptions to\nPV kvm guests. For this purpose, the ECA_AIV bit for all guest cpus\nwill be cleared and the GISA will be disabled during PV CPU setup.\n\nIn addition a check in __inject_io() has been removed. That reduces the\nrequired instructions for interruption handling for PV and traditional\nkvm guests.\n\nSigned-off-by: Michael Mueller <mimu@linux.ibm.com>\nReviewed-by: Janosch Frank <frankja@linux.ibm.com>\nLink: https://lore.kernel.org/r/20220209152217.1793281-2-mimu@linux.ibm.com\nReviewed-by: Christian Borntraeger <borntraeger@linux.ibm.com>\nSigned-off-by: Christian Borntraeger <borntraeger@linux.ibm.com>",
  "full_message": "KVM: s390: pv: make use of ultravisor AIV support\n\nThis patch enables the ultravisor adapter interruption vitualization\nsupport indicated by UV feature BIT_UV_FEAT_AIV. This allows ISC\ninterruption injection directly into the GISA IPM for PV kvm guests.\n\nHardware that does not support this feature will continue to use the\nUV interruption interception method to deliver ISC interruptions to\nPV kvm guests. For this purpose, the ECA_AIV bit for all guest cpus\nwill be cleared and the GISA will be disabled during PV CPU setup.\n\nIn addition a check in __inject_io() has been removed. That reduces the\nrequired instructions for interruption handling for PV and traditional\nkvm guests.\n\nSigned-off-by: Michael Mueller <mimu@linux.ibm.com>\nReviewed-by: Janosch Frank <frankja@linux.ibm.com>\nLink: https://lore.kernel.org/r/20220209152217.1793281-2-mimu@linux.ibm.com\nReviewed-by: Christian Borntraeger <borntraeger@linux.ibm.com>\nSigned-off-by: Christian Borntraeger <borntraeger@linux.ibm.com>",
  "author_name": "Michael Mueller",
  "author_email": "mimu@linux.ibm.com",
  "author_date": "Wed Feb 9 16:22:17 2022 +0100",
  "author_date_iso": "2022-02-09T16:22:17+01:00",
  "committer_name": "Christian Borntraeger",
  "committer_email": "borntraeger@linux.ibm.com",
  "committer_date": "Fri Feb 25 14:30:13 2022 +0100",
  "committer_date_iso": "2022-02-25T14:30:13+01:00",
  "files_changed": [
    "arch/s390/include/asm/uv.h",
    "arch/s390/kvm/interrupt.c",
    "arch/s390/kvm/kvm-s390.c",
    "arch/s390/kvm/kvm-s390.h"
  ],
  "files_changed_count": 4,
  "stats": [
    {
      "file": "arch/s390/include/asm/uv.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/s390/kvm/interrupt.c",
      "insertions": 48,
      "deletions": 6
    },
    {
      "file": "arch/s390/kvm/kvm-s390.c",
      "insertions": 8,
      "deletions": 3
    },
    {
      "file": "arch/s390/kvm/kvm-s390.h",
      "insertions": 11,
      "deletions": 0
    }
  ],
  "total_insertions": 68,
  "total_deletions": 9,
  "total_changes": 77,
  "parents": [
    "3d9042f8b923810c169ece02d91c70ec498eff0b"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/s390/include/asm/uv.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/s390/kvm/interrupt.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/s390/kvm/kvm-s390.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/s390/kvm/kvm-s390.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}