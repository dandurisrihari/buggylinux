Commit Hash: c3c2ac4c77ee2191ae2f1e8d140a59e852104e3b
Subject: drm/i915/guc: Check for wedged before doing stuff


Security Keywords:
- injection

Full commit message:
drm/i915/guc: Check for wedged before doing stuff

A fault injection probe test hit a BUG_ON in a GuC error path. It
showed that the GuC code could potentially attempt to do many things
when the device is actually wedged. So, add a check in to prevent that.

v2: Use intel_gt_is_wedged instead of testing bits directly in the
GuC submission code (review feedback from Tvrtko).

Signed-off-by: John Harrison <John.C.Harrison@Intel.com>
Reviewed-by: Matthew Brost <matthew.brost@intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20211221210212.1438670-1-John.C.Harrison@Intel.com

Metadata:
Author: John Harrison <John.C.Harrison@Intel.com>
Author Date: Tue Dec 21 13:02:12 2021 -0800
Committer: John Harrison <John.C.Harrison@Intel.com>
Commit Date: Thu Dec 23 11:43:40 2021 -0800

Files Changed: 1
Lines Added: 3
Lines Removed: 2
Total Changes: 5
