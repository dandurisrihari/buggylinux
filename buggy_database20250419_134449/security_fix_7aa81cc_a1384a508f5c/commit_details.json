{
  "hash": "7aa81cc04781b5b99a0647ec04533599d78cd219",
  "hash_short": "7aa81cc0",
  "subject": "KVM: Refactor hypercall infrastructure (v3)",
  "body": "This patch refactors the current hypercall infrastructure to better\nsupport live migration and SMP.  It eliminates the hypercall page by\ntrapping the UD exception that would occur if you used the wrong hypercall\ninstruction for the underlying architecture and replacing it with the right\none lazily.\n\nA fall-out of this patch is that the unhandled hypercalls no longer trap to\nuserspace.  There is very little reason though to use a hypercall to\ncommunicate with userspace as PIO or MMIO can be used.  There is no code\nin tree that uses userspace hypercalls.\n\n[avi: fix #ud injection on vmx]\n\nSigned-off-by: Anthony Liguori <aliguori@us.ibm.com>\nSigned-off-by: Avi Kivity <avi@qumranet.com>",
  "full_message": "KVM: Refactor hypercall infrastructure (v3)\n\nThis patch refactors the current hypercall infrastructure to better\nsupport live migration and SMP.  It eliminates the hypercall page by\ntrapping the UD exception that would occur if you used the wrong hypercall\ninstruction for the underlying architecture and replacing it with the right\none lazily.\n\nA fall-out of this patch is that the unhandled hypercalls no longer trap to\nuserspace.  There is very little reason though to use a hypercall to\ncommunicate with userspace as PIO or MMIO can be used.  There is no code\nin tree that uses userspace hypercalls.\n\n[avi: fix #ud injection on vmx]\n\nSigned-off-by: Anthony Liguori <aliguori@us.ibm.com>\nSigned-off-by: Avi Kivity <avi@qumranet.com>",
  "author_name": "Anthony Liguori",
  "author_email": "aliguori@us.ibm.com",
  "author_date": "Mon Sep 17 14:57:50 2007 -0500",
  "author_date_iso": "2007-09-17T14:57:50-05:00",
  "committer_name": "Avi Kivity",
  "committer_email": "avi@qumranet.com",
  "committer_date": "Wed Jan 30 17:52:46 2008 +0200",
  "committer_date_iso": "2008-01-30T17:52:46+02:00",
  "files_changed": [
    "drivers/kvm/kvm.h",
    "drivers/kvm/kvm_main.c",
    "drivers/kvm/svm.c",
    "drivers/kvm/vmx.c",
    "drivers/kvm/x86_emulate.c",
    "include/linux/kvm_para.h"
  ],
  "files_changed_count": 6,
  "stats": [
    {
      "file": "drivers/kvm/kvm.h",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "drivers/kvm/kvm_main.c",
      "insertions": 46,
      "deletions": 110
    },
    {
      "file": "drivers/kvm/svm.c",
      "insertions": 16,
      "deletions": 3
    },
    {
      "file": "drivers/kvm/vmx.c",
      "insertions": 26,
      "deletions": 3
    },
    {
      "file": "drivers/kvm/x86_emulate.c",
      "insertions": 9,
      "deletions": 2
    },
    {
      "file": "include/linux/kvm_para.h",
      "insertions": 98,
      "deletions": 61
    }
  ],
  "total_insertions": 199,
  "total_deletions": 183,
  "total_changes": 382,
  "parents": [
    "aca7f96600b170e470b3056aba0ed8d7df8d330d"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v2.6.25",
    "v2.6.25-rc1",
    "v2.6.25-rc2",
    "v2.6.25-rc3",
    "v2.6.25-rc4",
    "v2.6.25-rc5",
    "v2.6.25-rc6",
    "v2.6.25-rc7",
    "v2.6.25-rc8",
    "v2.6.25-rc9"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/kvm/kvm.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/kvm/svm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/kvm_para.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/kvm/vmx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/kvm/kvm_main.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/kvm/x86_emulate.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}