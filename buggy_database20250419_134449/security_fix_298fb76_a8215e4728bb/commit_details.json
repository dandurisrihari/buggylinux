{
  "hash": "298fb76a5583900a155d387efaf37a8b39e5dea2",
  "hash_short": "298fb76a",
  "subject": "Merge tag 'nfsd-5.4' of git://linux-nfs.org/~bfields/linux",
  "body": "Pull nfsd updates from Bruce Fields:\n \"Highlights:\n\n   - Add a new knfsd file cache, so that we don't have to open and close\n     on each (NFSv2/v3) READ or WRITE. This can speed up read and write\n     in some cases. It also replaces our readahead cache.\n\n   - Prevent silent data loss on write errors, by treating write errors\n     like server reboots for the purposes of write caching, thus forcing\n     clients to resend their writes.\n\n   - Tweak the code that allocates sessions to be more forgiving, so\n     that NFSv4.1 mounts are less likely to hang when a server already\n     has a lot of clients.\n\n   - Eliminate an arbitrary limit on NFSv4 ACL sizes; they should now be\n     limited only by the backend filesystem and the maximum RPC size.\n\n   - Allow the server to enforce use of the correct kerberos credentials\n     when a client reclaims state after a reboot.\n\n  And some miscellaneous smaller bugfixes and cleanup\"\n\n* tag 'nfsd-5.4' of git://linux-nfs.org/~bfields/linux: (34 commits)\n  sunrpc: clean up indentation issue\n  nfsd: fix nfs read eof detection\n  nfsd: Make nfsd_reset_boot_verifier_locked static\n  nfsd: degraded slot-count more gracefully as allocation nears exhaustion.\n  nfsd: handle drc over-allocation gracefully.\n  nfsd: add support for upcall version 2\n  nfsd: add a \"GetVersion\" upcall for nfsdcld\n  nfsd: Reset the boot verifier on all write I/O errors\n  nfsd: Don't garbage collect files that might contain write errors\n  nfsd: Support the server resetting the boot verifier\n  nfsd: nfsd_file cache entries should be per net namespace\n  nfsd: eliminate an unnecessary acl size limit\n  Deprecate nfsd fault injection\n  nfsd: remove duplicated include from filecache.c\n  nfsd: Fix the documentation for svcxdr_tmpalloc()\n  nfsd: Fix up some unused variable warnings\n  nfsd: close cached files prior to a REMOVE or RENAME that would replace target\n  nfsd: rip out the raparms cache\n  nfsd: have nfsd_test_lock use the nfsd_file cache\n  nfsd: hook up nfs4_preprocess_stateid_op to the nfsd_file cache\n  ...",
  "full_message": "Merge tag 'nfsd-5.4' of git://linux-nfs.org/~bfields/linux\n\nPull nfsd updates from Bruce Fields:\n \"Highlights:\n\n   - Add a new knfsd file cache, so that we don't have to open and close\n     on each (NFSv2/v3) READ or WRITE. This can speed up read and write\n     in some cases. It also replaces our readahead cache.\n\n   - Prevent silent data loss on write errors, by treating write errors\n     like server reboots for the purposes of write caching, thus forcing\n     clients to resend their writes.\n\n   - Tweak the code that allocates sessions to be more forgiving, so\n     that NFSv4.1 mounts are less likely to hang when a server already\n     has a lot of clients.\n\n   - Eliminate an arbitrary limit on NFSv4 ACL sizes; they should now be\n     limited only by the backend filesystem and the maximum RPC size.\n\n   - Allow the server to enforce use of the correct kerberos credentials\n     when a client reclaims state after a reboot.\n\n  And some miscellaneous smaller bugfixes and cleanup\"\n\n* tag 'nfsd-5.4' of git://linux-nfs.org/~bfields/linux: (34 commits)\n  sunrpc: clean up indentation issue\n  nfsd: fix nfs read eof detection\n  nfsd: Make nfsd_reset_boot_verifier_locked static\n  nfsd: degraded slot-count more gracefully as allocation nears exhaustion.\n  nfsd: handle drc over-allocation gracefully.\n  nfsd: add support for upcall version 2\n  nfsd: add a \"GetVersion\" upcall for nfsdcld\n  nfsd: Reset the boot verifier on all write I/O errors\n  nfsd: Don't garbage collect files that might contain write errors\n  nfsd: Support the server resetting the boot verifier\n  nfsd: nfsd_file cache entries should be per net namespace\n  nfsd: eliminate an unnecessary acl size limit\n  Deprecate nfsd fault injection\n  nfsd: remove duplicated include from filecache.c\n  nfsd: Fix the documentation for svcxdr_tmpalloc()\n  nfsd: Fix up some unused variable warnings\n  nfsd: close cached files prior to a REMOVE or RENAME that would replace target\n  nfsd: rip out the raparms cache\n  nfsd: have nfsd_test_lock use the nfsd_file cache\n  nfsd: hook up nfs4_preprocess_stateid_op to the nfsd_file cache\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Fri Sep 27 17:00:27 2019 -0700",
  "author_date_iso": "2019-09-27T17:00:27-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Fri Sep 27 17:00:27 2019 -0700",
  "committer_date_iso": "2019-09-27T17:00:27-07:00",
  "files_changed": [
    "fs/locks.c",
    "fs/nfsd/nfsctl.c",
    "include/linux/fs.h",
    "net/sunrpc/xprtrdma/svc_rdma_transport.c"
  ],
  "files_changed_count": 4,
  "stats": [
    {
      "file": "fs/file_table.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "fs/locks.c",
      "insertions": 62,
      "deletions": 0
    },
    {
      "file": "fs/nfsd/Kconfig",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "fs/nfsd/Makefile",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "fs/nfsd/acl.h",
      "insertions": 0,
      "deletions": 8
    },
    {
      "file": "fs/nfsd/blocklayout.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "fs/nfsd/export.c",
      "insertions": 13,
      "deletions": 0
    },
    {
      "file": "fs/nfsd/filecache.c",
      "insertions": 934,
      "deletions": 0
    },
    {
      "file": "fs/nfsd/filecache.h",
      "insertions": 61,
      "deletions": 0
    },
    {
      "file": "fs/nfsd/netns.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "fs/nfsd/nfs3proc.c",
      "insertions": 2,
      "deletions": 7
    },
    {
      "file": "fs/nfsd/nfs3xdr.c",
      "insertions": 9,
      "deletions": 4
    },
    {
      "file": "fs/nfsd/nfs4callback.c",
      "insertions": 15,
      "deletions": 20
    },
    {
      "file": "fs/nfsd/nfs4layouts.c",
      "insertions": 6,
      "deletions": 6
    },
    {
      "file": "fs/nfsd/nfs4proc.c",
      "insertions": 46,
      "deletions": 51
    },
    {
      "file": "fs/nfsd/nfs4recover.c",
      "insertions": 325,
      "deletions": 63
    },
    {
      "file": "fs/nfsd/nfs4state.c",
      "insertions": 130,
      "deletions": 109
    },
    {
      "file": "fs/nfsd/nfs4xdr.c",
      "insertions": 29,
      "deletions": 27
    },
    {
      "file": "fs/nfsd/nfsctl.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "fs/nfsd/nfsproc.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "fs/nfsd/nfssvc.c",
      "insertions": 37,
      "deletions": 11
    },
    {
      "file": "fs/nfsd/state.h",
      "insertions": 7,
      "deletions": 6
    },
    {
      "file": "fs/nfsd/trace.h",
      "insertions": 140,
      "deletions": 0
    },
    {
      "file": "fs/nfsd/vfs.c",
      "insertions": 146,
      "deletions": 205
    },
    {
      "file": "fs/nfsd/vfs.h",
      "insertions": 9,
      "deletions": 28
    },
    {
      "file": "fs/nfsd/xdr3.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/nfsd/xdr4.h",
      "insertions": 9,
      "deletions": 10
    },
    {
      "file": "fs/notify/fsnotify.h",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "fs/notify/group.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "fs/notify/mark.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "include/linux/fs.h",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "include/linux/fsnotify_backend.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "include/linux/sunrpc/cache.h",
      "insertions": 4,
      "deletions": 3
    },
    {
      "file": "include/linux/sunrpc/svc_rdma.h",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "include/uapi/linux/nfsd/cld.h",
      "insertions": 39,
      "deletions": 2
    },
    {
      "file": "net/sunrpc/cache.c",
      "insertions": 11,
      "deletions": 4
    },
    {
      "file": "net/sunrpc/svc.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "net/sunrpc/xprtrdma/svc_rdma.c",
      "insertions": 0,
      "deletions": 7
    },
    {
      "file": "net/sunrpc/xprtrdma/svc_rdma_recvfrom.c",
      "insertions": 10,
      "deletions": 14
    },
    {
      "file": "net/sunrpc/xprtrdma/svc_rdma_transport.c",
      "insertions": 3,
      "deletions": 3
    }
  ],
  "total_insertions": 2083,
  "total_deletions": 600,
  "total_changes": 2683,
  "parents": [
    "8f744bdee4fefb17fac052c7418b830de2b59ac8",
    "e41f9efb85d38d95744b9f35b9903109032b93d4"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.4",
    "v5.4-rc1",
    "v5.4-rc2",
    "v5.4-rc3",
    "v5.4-rc4",
    "v5.4-rc5",
    "v5.4-rc6",
    "v5.4-rc7",
    "v5.4-rc8",
    "v5.5"
  ],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "fs/locks.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/nfsd/nfsctl.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/fs.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/sunrpc/xprtrdma/svc_rdma_transport.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}