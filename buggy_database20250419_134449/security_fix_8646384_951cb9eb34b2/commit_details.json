{
  "hash": "8646384d80f3d3b4a66b3284dbbd8232d1b8799e",
  "hash_short": "8646384d",
  "subject": "net: dsa: mv88e6xxx: replace ATU violation prints with trace points",
  "body": "In applications where the switch ports must perform 802.1X based\nauthentication and are therefore locked, ATU violation interrupts are\nquite to be expected as part of normal operation. The problem is that\nthey currently spam the kernel log, even if rate limited.\n\nCreate a series of trace points, all derived from the same event class,\nwhich log these violations to the kernel's trace buffer, which is both\nmuch faster and much easier to ignore than printing to a serial console.\n\nNew usage model:\n\n$ trace-cmd list | grep mv88e6xxx\nmv88e6xxx\nmv88e6xxx:mv88e6xxx_atu_full_violation\nmv88e6xxx:mv88e6xxx_atu_miss_violation\nmv88e6xxx:mv88e6xxx_atu_member_violation\n$ trace-cmd record -e mv88e6xxx sleep 10\n\nSigned-off-by: Vladimir Oltean <vladimir.oltean@nxp.com>\nReviewed-by: Saeed Mahameed <saeed@kernel.org>\nReviewed-by: Florian Fainelli <f.fainelli@gmail.com>\nSigned-off-by: Jakub Kicinski <kuba@kernel.org>",
  "full_message": "net: dsa: mv88e6xxx: replace ATU violation prints with trace points\n\nIn applications where the switch ports must perform 802.1X based\nauthentication and are therefore locked, ATU violation interrupts are\nquite to be expected as part of normal operation. The problem is that\nthey currently spam the kernel log, even if rate limited.\n\nCreate a series of trace points, all derived from the same event class,\nwhich log these violations to the kernel's trace buffer, which is both\nmuch faster and much easier to ignore than printing to a serial console.\n\nNew usage model:\n\n$ trace-cmd list | grep mv88e6xxx\nmv88e6xxx\nmv88e6xxx:mv88e6xxx_atu_full_violation\nmv88e6xxx:mv88e6xxx_atu_miss_violation\nmv88e6xxx:mv88e6xxx_atu_member_violation\n$ trace-cmd record -e mv88e6xxx sleep 10\n\nSigned-off-by: Vladimir Oltean <vladimir.oltean@nxp.com>\nReviewed-by: Saeed Mahameed <saeed@kernel.org>\nReviewed-by: Florian Fainelli <f.fainelli@gmail.com>\nSigned-off-by: Jakub Kicinski <kuba@kernel.org>",
  "author_name": "Vladimir Oltean",
  "author_email": "vladimir.oltean@nxp.com",
  "author_date": "Fri Dec 9 19:28:16 2022 +0200",
  "author_date_iso": "2022-12-09T19:28:16+02:00",
  "committer_name": "Jakub Kicinski",
  "committer_email": "kuba@kernel.org",
  "committer_date": "Mon Dec 12 15:01:18 2022 -0800",
  "committer_date_iso": "2022-12-12T15:01:18-08:00",
  "files_changed": [
    "drivers/net/dsa/mv88e6xxx/Makefile",
    "drivers/net/dsa/mv88e6xxx/global1_atu.c",
    "drivers/net/dsa/mv88e6xxx/trace.c",
    "drivers/net/dsa/mv88e6xxx/trace.h"
  ],
  "files_changed_count": 4,
  "stats": [
    {
      "file": "drivers/net/dsa/mv88e6xxx/Makefile",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "drivers/net/dsa/mv88e6xxx/global1_atu.c",
      "insertions": 10,
      "deletions": 9
    },
    {
      "file": "drivers/net/dsa/mv88e6xxx/trace.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "drivers/net/dsa/mv88e6xxx/trace.h",
      "insertions": 66,
      "deletions": 0
    }
  ],
  "total_insertions": 86,
  "total_deletions": 9,
  "total_changes": 95,
  "parents": [
    "4bf24ad09bc0b05e97fb48b962b2c9246fc76727"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/net/dsa/mv88e6xxx/Makefile",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/dsa/mv88e6xxx/global1_atu.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/dsa/mv88e6xxx/trace.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/dsa/mv88e6xxx/trace.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}