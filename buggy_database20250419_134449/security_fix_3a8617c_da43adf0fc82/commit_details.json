{
  "hash": "3a8617c7df6eb351227aad9b0df647f34a7ef423",
  "hash_short": "3a8617c7",
  "subject": "cxl/test: Replace ENXIO with EBUSY for inject poison limit reached",
  "body": "The CXL driver was recently updated to return EBUSY rather than\nENXIO when the device reports that an injection request exceeds\nthe device's limit. That change to EBUSY allows debug users to\ndifferentiate between limit reached and inject failures for any\nother reason.\n\nChange cxl-test to also return EBUSY and tidy up the dev_dbg()\nmessaging to emit the correct limit.\n\nReminder: the cxl-test per device injection limit is a configurable\nattribute: /sys/bus/platform/drivers/cxl_mock_mem/poison_inject_max\n\nSigned-off-by: Alison Schofield <alison.schofield@intel.com>\nTested-by: Xingtao Yao <yaoxt.fnst@fujitsu.com>\nReviewed-by: Dan Williams <dan.j.williams@intel.com>\nReviewed-by: Davidlohr Bueso <dave@stgolabs.net>\nLink: https://patch.msgid.link/ba1b80e1658b644d85d0d5e2287112d00a48b9cf.1720316188.git.alison.schofield@intel.com\nSigned-off-by: Dave Jiang <dave.jiang@intel.com>",
  "full_message": "cxl/test: Replace ENXIO with EBUSY for inject poison limit reached\n\nThe CXL driver was recently updated to return EBUSY rather than\nENXIO when the device reports that an injection request exceeds\nthe device's limit. That change to EBUSY allows debug users to\ndifferentiate between limit reached and inject failures for any\nother reason.\n\nChange cxl-test to also return EBUSY and tidy up the dev_dbg()\nmessaging to emit the correct limit.\n\nReminder: the cxl-test per device injection limit is a configurable\nattribute: /sys/bus/platform/drivers/cxl_mock_mem/poison_inject_max\n\nSigned-off-by: Alison Schofield <alison.schofield@intel.com>\nTested-by: Xingtao Yao <yaoxt.fnst@fujitsu.com>\nReviewed-by: Dan Williams <dan.j.williams@intel.com>\nReviewed-by: Davidlohr Bueso <dave@stgolabs.net>\nLink: https://patch.msgid.link/ba1b80e1658b644d85d0d5e2287112d00a48b9cf.1720316188.git.alison.schofield@intel.com\nSigned-off-by: Dave Jiang <dave.jiang@intel.com>",
  "author_name": "Alison Schofield",
  "author_email": "alison.schofield@intel.com",
  "author_date": "Sat Jul 6 18:53:44 2024 -0700",
  "author_date_iso": "2024-07-06T18:53:44-07:00",
  "committer_name": "Dave Jiang",
  "committer_email": "dave.jiang@intel.com",
  "committer_date": "Wed Jul 10 17:12:42 2024 -0700",
  "committer_date_iso": "2024-07-10T17:12:42-07:00",
  "files_changed": [
    "tools/testing/cxl/test/mem.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "tools/testing/cxl/test/mem.c",
      "insertions": 7,
      "deletions": 8
    }
  ],
  "total_insertions": 7,
  "total_deletions": 8,
  "total_changes": 15,
  "parents": [
    "591209c79844c1ecbee79e6b5a019e5b61eab8d3"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "inject"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "tools/testing/cxl/test/mem.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}