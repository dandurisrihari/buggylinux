{
  "hash": "752272f16dd18f2cac58a583a8673c8e2fb93abb",
  "hash_short": "752272f1",
  "subject": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm",
  "body": "Pull KVM updates from Paolo Bonzini:\n \"ARM:\n   - data abort report and injection\n   - steal time support\n   - GICv4 performance improvements\n   - vgic ITS emulation fixes\n   - simplify FWB handling\n   - enable halt polling counters\n   - make the emulated timer PREEMPT_RT compliant\n\n  s390:\n   - small fixes and cleanups\n   - selftest improvements\n   - yield improvements\n\n  PPC:\n   - add capability to tell userspace whether we can single-step the\n     guest\n   - improve the allocation of XIVE virtual processor IDs\n   - rewrite interrupt synthesis code to deliver interrupts in virtual\n     mode when appropriate.\n   - minor cleanups and improvements.\n\n  x86:\n   - XSAVES support for AMD\n   - more accurate report of nested guest TSC to the nested hypervisor\n   - retpoline optimizations\n   - support for nested 5-level page tables\n   - PMU virtualization optimizations, and improved support for nested\n     PMU virtualization\n   - correct latching of INITs for nested virtualization\n   - IOAPIC optimization\n   - TSX_CTRL virtualization for more TAA happiness\n   - improved allocation and flushing of SEV ASIDs\n   - many bugfixes and cleanups\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (127 commits)\n  kvm: nVMX: Relax guest IA32_FEATURE_CONTROL constraints\n  KVM: x86: Grab KVM's srcu lock when setting nested state\n  KVM: x86: Open code shared_msr_update() in its only caller\n  KVM: Fix jump label out_free_* in kvm_init()\n  KVM: x86: Remove a spurious export of a static function\n  KVM: x86: create mmu/ subdirectory\n  KVM: nVMX: Remove unnecessary TLB flushes on L1<->L2 switches when L1 use apic-access-page\n  KVM: x86: remove set but not used variable 'called'\n  KVM: nVMX: Do not mark vmcs02->apic_access_page as dirty when unpinning\n  KVM: vmx: use MSR_IA32_TSX_CTRL to hard-disable TSX on guest that lack it\n  KVM: vmx: implement MSR_IA32_TSX_CTRL disable RTM functionality\n  KVM: x86: implement MSR_IA32_TSX_CTRL effect on CPUID\n  KVM: x86: do not modify masked bits of shared MSRs\n  KVM: x86: fix presentation of TSX feature in ARCH_CAPABILITIES\n  KVM: PPC: Book3S HV: XIVE: Fix potential page leak on error path\n  KVM: PPC: Book3S HV: XIVE: Free previous EQ page when setting up a new one\n  KVM: nVMX: Assume TLB entries of L1 and L2 are tagged differently if L0 use EPT\n  KVM: x86: Unexport kvm_vcpu_reload_apic_access_page()\n  KVM: nVMX: add CR4_LA57 bit to nested CR4_FIXED1\n  KVM: nVMX: Use semi-colon instead of comma for exit-handlers initialization\n  ...",
  "full_message": "Merge tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm\n\nPull KVM updates from Paolo Bonzini:\n \"ARM:\n   - data abort report and injection\n   - steal time support\n   - GICv4 performance improvements\n   - vgic ITS emulation fixes\n   - simplify FWB handling\n   - enable halt polling counters\n   - make the emulated timer PREEMPT_RT compliant\n\n  s390:\n   - small fixes and cleanups\n   - selftest improvements\n   - yield improvements\n\n  PPC:\n   - add capability to tell userspace whether we can single-step the\n     guest\n   - improve the allocation of XIVE virtual processor IDs\n   - rewrite interrupt synthesis code to deliver interrupts in virtual\n     mode when appropriate.\n   - minor cleanups and improvements.\n\n  x86:\n   - XSAVES support for AMD\n   - more accurate report of nested guest TSC to the nested hypervisor\n   - retpoline optimizations\n   - support for nested 5-level page tables\n   - PMU virtualization optimizations, and improved support for nested\n     PMU virtualization\n   - correct latching of INITs for nested virtualization\n   - IOAPIC optimization\n   - TSX_CTRL virtualization for more TAA happiness\n   - improved allocation and flushing of SEV ASIDs\n   - many bugfixes and cleanups\"\n\n* tag 'for-linus' of git://git.kernel.org/pub/scm/virt/kvm/kvm: (127 commits)\n  kvm: nVMX: Relax guest IA32_FEATURE_CONTROL constraints\n  KVM: x86: Grab KVM's srcu lock when setting nested state\n  KVM: x86: Open code shared_msr_update() in its only caller\n  KVM: Fix jump label out_free_* in kvm_init()\n  KVM: x86: Remove a spurious export of a static function\n  KVM: x86: create mmu/ subdirectory\n  KVM: nVMX: Remove unnecessary TLB flushes on L1<->L2 switches when L1 use apic-access-page\n  KVM: x86: remove set but not used variable 'called'\n  KVM: nVMX: Do not mark vmcs02->apic_access_page as dirty when unpinning\n  KVM: vmx: use MSR_IA32_TSX_CTRL to hard-disable TSX on guest that lack it\n  KVM: vmx: implement MSR_IA32_TSX_CTRL disable RTM functionality\n  KVM: x86: implement MSR_IA32_TSX_CTRL effect on CPUID\n  KVM: x86: do not modify masked bits of shared MSRs\n  KVM: x86: fix presentation of TSX feature in ARCH_CAPABILITIES\n  KVM: PPC: Book3S HV: XIVE: Fix potential page leak on error path\n  KVM: PPC: Book3S HV: XIVE: Free previous EQ page when setting up a new one\n  KVM: nVMX: Assume TLB entries of L1 and L2 are tagged differently if L0 use EPT\n  KVM: x86: Unexport kvm_vcpu_reload_apic_access_page()\n  KVM: nVMX: add CR4_LA57 bit to nested CR4_FIXED1\n  KVM: nVMX: Use semi-colon instead of comma for exit-handlers initialization\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Mon Nov 25 18:02:36 2019 -0800",
  "author_date_iso": "2019-11-25T18:02:36-08:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Mon Nov 25 18:02:36 2019 -0800",
  "committer_date_iso": "2019-11-25T18:02:36-08:00",
  "files_changed": [
    "arch/arm64/include/asm/kvm_host.h",
    "arch/arm64/kernel/cpu_errata.c",
    "include/Kbuild",
    "kernel/events/core.c"
  ],
  "files_changed_count": 4,
  "stats": [
    {
      "file": "Documentation/admin-guide/kernel-parameters.txt",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "Documentation/virt/kvm/api.txt",
      "insertions": 57,
      "deletions": 1
    },
    {
      "file": "Documentation/virt/kvm/arm/pvtime.rst",
      "insertions": 80,
      "deletions": 0
    },
    {
      "file": "Documentation/virt/kvm/devices/vcpu.txt",
      "insertions": 14,
      "deletions": 0
    },
    {
      "file": "Documentation/virt/kvm/devices/xics.txt",
      "insertions": 12,
      "deletions": 2
    },
    {
      "file": "Documentation/virt/kvm/devices/xive.txt",
      "insertions": 8,
      "deletions": 0
    },
    {
      "file": "arch/arm/include/asm/kvm_arm.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/arm/include/asm/kvm_emulate.h",
      "insertions": 7,
      "deletions": 2
    },
    {
      "file": "arch/arm/include/asm/kvm_host.h",
      "insertions": 33,
      "deletions": 0
    },
    {
      "file": "arch/arm/include/uapi/asm/kvm.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "arch/arm/kvm/Makefile",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm/kvm/guest.c",
      "insertions": 14,
      "deletions": 0
    },
    {
      "file": "arch/arm/kvm/handle_exit.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/arm/mm/proc-v7-bugs.c",
      "insertions": 5,
      "deletions": 8
    },
    {
      "file": "arch/arm64/include/asm/kvm_arm.h",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "arch/arm64/include/asm/kvm_emulate.h",
      "insertions": 23,
      "deletions": 3
    },
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "insertions": 37,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/asm/paravirt.h",
      "insertions": 8,
      "deletions": 1
    },
    {
      "file": "arch/arm64/include/asm/pvclock-abi.h",
      "insertions": 17,
      "deletions": 0
    },
    {
      "file": "arch/arm64/include/uapi/asm/kvm.h",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "arch/arm64/kernel/cpu_errata.c",
      "insertions": 29,
      "deletions": 52
    },
    {
      "file": "arch/arm64/kernel/paravirt.c",
      "insertions": 140,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kernel/time.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/Kconfig",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/Makefile",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/guest.c",
      "insertions": 23,
      "deletions": 0
    },
    {
      "file": "arch/arm64/kvm/handle_exit.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/arm64/kvm/inject_fault.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/powerpc/include/asm/kvm_host.h",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/include/asm/kvm_ppc.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/include/asm/reg.h",
      "insertions": 12,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/include/uapi/asm/kvm.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/book3s.c",
      "insertions": 1,
      "deletions": 26
    },
    {
      "file": "arch/powerpc/kvm/book3s.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/book3s_32_mmu.c",
      "insertions": 0,
      "deletions": 6
    },
    {
      "file": "arch/powerpc/kvm/book3s_64_mmu.c",
      "insertions": 0,
      "deletions": 15
    },
    {
      "file": "arch/powerpc/kvm/book3s_64_mmu_hv.c",
      "insertions": 7,
      "deletions": 19
    },
    {
      "file": "arch/powerpc/kvm/book3s_64_vio.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv.c",
      "insertions": 6,
      "deletions": 22
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv_builtin.c",
      "insertions": 68,
      "deletions": 14
    },
    {
      "file": "arch/powerpc/kvm/book3s_hv_nested.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kvm/book3s_pr.c",
      "insertions": 39,
      "deletions": 1
    },
    {
      "file": "arch/powerpc/kvm/book3s_xive.c",
      "insertions": 101,
      "deletions": 27
    },
    {
      "file": "arch/powerpc/kvm/book3s_xive.h",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "arch/powerpc/kvm/book3s_xive_native.c",
      "insertions": 42,
      "deletions": 40
    },
    {
      "file": "arch/powerpc/kvm/e500_mmu_host.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "arch/powerpc/kvm/powerpc.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "arch/s390/include/asm/kvm_host.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/s390/kvm/diag.c",
      "insertions": 18,
      "deletions": 4
    },
    {
      "file": "arch/s390/kvm/interrupt.c",
      "insertions": 2,
      "deletions": 3
    },
    {
      "file": "arch/s390/kvm/kvm-s390.c",
      "insertions": 8,
      "deletions": 11
    },
    {
      "file": "arch/x86/events/intel/core.c",
      "insertions": 11,
      "deletions": 0
    },
    {
      "file": "arch/x86/include/asm/kvm_host.h",
      "insertions": 26,
      "deletions": 6
    },
    {
      "file": "arch/x86/kernel/kvm.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/Makefile",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/cpuid.c",
      "insertions": 6,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/emulate.c",
      "insertions": 2,
      "deletions": 4
    },
    {
      "file": "arch/x86/kvm/ioapic.c",
      "insertions": 32,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/kvm_cache_regs.h",
      "insertions": 39,
      "deletions": 12
    },
    {
      "file": "arch/x86/kvm/lapic.c",
      "insertions": 74,
      "deletions": 37
    },
    {
      "file": "arch/x86/kvm/lapic.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/{ => mmu}/mmu.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "arch/x86/kvm/{ => mmu}/page_track.c",
      "insertions": 0,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/{ => mmu}/paging_tmpl.h",
      "insertions": 0,
      "deletions": 0
    },
    {
      "file": "arch/x86/kvm/pmu.c",
      "insertions": 108,
      "deletions": 16
    },
    {
      "file": "arch/x86/kvm/pmu.h",
      "insertions": 23,
      "deletions": 6
    },
    {
      "file": "arch/x86/kvm/pmu_amd.c",
      "insertions": 17,
      "deletions": 7
    },
    {
      "file": "arch/x86/kvm/svm.c",
      "insertions": 105,
      "deletions": 35
    },
    {
      "file": "arch/x86/kvm/vmx/nested.c",
      "insertions": 203,
      "deletions": 49
    },
    {
      "file": "arch/x86/kvm/vmx/nested.h",
      "insertions": 5,
      "deletions": 4
    },
    {
      "file": "arch/x86/kvm/vmx/pmu_intel.c",
      "insertions": 29,
      "deletions": 5
    },
    {
      "file": "arch/x86/kvm/vmx/vmx.c",
      "insertions": 182,
      "deletions": 157
    },
    {
      "file": "arch/x86/kvm/vmx/vmx.h",
      "insertions": 10,
      "deletions": 2
    },
    {
      "file": "arch/x86/kvm/x86.c",
      "insertions": 145,
      "deletions": 99
    },
    {
      "file": "arch/x86/kvm/x86.h",
      "insertions": 9,
      "deletions": 6
    },
    {
      "file": "drivers/crypto/ccp/psp-dev.c",
      "insertions": 9,
      "deletions": 0
    },
    {
      "file": "drivers/irqchip/irq-gic-v4.c",
      "insertions": 6,
      "deletions": 1
    },
    {
      "file": "include/Kbuild",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "include/kvm/arm_hypercalls.h",
      "insertions": 43,
      "deletions": 0
    },
    {
      "file": "include/kvm/arm_psci.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "include/kvm/arm_vgic.h",
      "insertions": 3,
      "deletions": 5
    },
    {
      "file": "include/linux/arm-smccc.h",
      "insertions": 59,
      "deletions": 0
    },
    {
      "file": "include/linux/cpuhotplug.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "include/linux/irqchip/arm-gic-v4.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "include/linux/kvm_host.h",
      "insertions": 30,
      "deletions": 11
    },
    {
      "file": "include/linux/kvm_types.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "include/linux/perf_event.h",
      "insertions": 10,
      "deletions": 0
    },
    {
      "file": "include/uapi/linux/kvm.h",
      "insertions": 11,
      "deletions": 0
    },
    {
      "file": "kernel/events/core.c",
      "insertions": 39,
      "deletions": 7
    },
    {
      "file": "tools/testing/selftests/kvm/.gitignore",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/Makefile",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/testing/selftests/kvm/include/x86_64/processor.h",
      "insertions": 6,
      "deletions": 1
    },
    {
      "file": "tools/testing/selftests/kvm/kvm_create_max_vcpus.c",
      "insertions": 2,
      "deletions": 5
    },
    {
      "file": "tools/testing/selftests/kvm/lib/x86_64/processor.c",
      "insertions": 63,
      "deletions": 9
    },
    {
      "file": "tools/testing/selftests/kvm/s390x/sync_regs_test.c",
      "insertions": 9,
      "deletions": 6
    },
    {
      "file": "tools/testing/selftests/kvm/x86_64/xss_msr_test.c",
      "insertions": 76,
      "deletions": 0
    },
    {
      "file": "virt/kvm/arm/arch_timer.c",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "virt/kvm/arm/arm.c",
      "insertions": 43,
      "deletions": 6
    },
    {
      "file": "virt/kvm/arm/hypercalls.c",
      "insertions": 71,
      "deletions": 0
    },
    {
      "file": "virt/kvm/arm/mmio.c",
      "insertions": 8,
      "deletions": 1
    },
    {
      "file": "virt/kvm/arm/psci.c",
      "insertions": 2,
      "deletions": 82
    },
    {
      "file": "virt/kvm/arm/pvtime.c",
      "insertions": 131,
      "deletions": 0
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-init.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-its.c",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-v3.c",
      "insertions": 8,
      "deletions": 4
    },
    {
      "file": "virt/kvm/arm/vgic/vgic-v4.c",
      "insertions": 29,
      "deletions": 30
    },
    {
      "file": "virt/kvm/arm/vgic/vgic.c",
      "insertions": 0,
      "deletions": 4
    },
    {
      "file": "virt/kvm/arm/vgic/vgic.h",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "virt/kvm/coalesced_mmio.c",
      "insertions": 2,
      "deletions": 6
    },
    {
      "file": "virt/kvm/kvm_main.c",
      "insertions": 23,
      "deletions": 11
    }
  ],
  "total_insertions": 2593,
  "total_deletions": 924,
  "total_changes": 3517,
  "parents": [
    "3f3c8be973af10875cfa1e7b85a535b6ba76b44f",
    "96710247298df52a4b8150a62a6fe87083093ff3"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.5",
    "v5.5-rc1",
    "v5.5-rc2",
    "v5.5-rc3",
    "v5.5-rc4",
    "v5.5-rc5",
    "v5.5-rc6",
    "v5.5-rc7",
    "v5.6",
    "v5.6-rc1"
  ],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/arm64/include/asm/kvm_host.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/arm64/kernel/cpu_errata.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/Kbuild",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "kernel/events/core.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}