diff --cc block/blk-core.c
index ea44b13af9af,dd29d5465af6..82c3ae22d76d
--- a/block/blk-core.c
+++ b/block/blk-core.c
@@@ -618,7 -619,9 +621,9 @@@ static void __submit_bio(struct bio *bi
  	if (unlikely(!blk_crypto_bio_prep(&bio)))
  		return;
  
+ 	blk_start_plug(&plug);
+ 
 -	if (!bio->bi_bdev->bd_has_submit_bio) {
 +	if (!bdev_test_flag(bio->bi_bdev, BD_HAS_SUBMIT_BIO)) {
  		blk_mq_submit_bio(bio);
  	} else if (likely(bio_queue_enter(bio) == 0)) {
  		struct gendisk *disk = bio->bi_bdev->bd_disk;