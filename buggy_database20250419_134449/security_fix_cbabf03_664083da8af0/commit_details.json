{
  "hash": "cbabf03c3ef3cce74a97f140cf57611a9e8a21bc",
  "hash_short": "cbabf03c",
  "subject": "virt: Add efi_secret module to expose confidential computing secrets",
  "body": "The new efi_secret module exposes the confidential computing (coco)\nEFI secret area via securityfs interface.\n\nWhen the module is loaded (and securityfs is mounted, typically under\n/sys/kernel/security), a \"secrets/coco\" directory is created in\nsecurityfs.  In it, a file is created for each secret entry.  The name\nof each such file is the GUID of the secret entry, and its content is\nthe secret data.\n\nThis allows applications running in a confidential computing setting to\nread secrets provided by the guest owner via a secure secret injection\nmechanism (such as AMD SEV's LAUNCH_SECRET command).\n\nRemoving (unlinking) files in the \"secrets/coco\" directory will zero out\nthe secret in memory, and remove the filesystem entry.  If the module is\nremoved and loaded again, that secret will not appear in the filesystem.\n\nSigned-off-by: Dov Murik <dovmurik@linux.ibm.com>\nReviewed-by: Gerd Hoffmann <kraxel@redhat.com>\nLink: https://lore.kernel.org/r/20220412212127.154182-3-dovmurik@linux.ibm.com\nSigned-off-by: Ard Biesheuvel <ardb@kernel.org>",
  "full_message": "virt: Add efi_secret module to expose confidential computing secrets\n\nThe new efi_secret module exposes the confidential computing (coco)\nEFI secret area via securityfs interface.\n\nWhen the module is loaded (and securityfs is mounted, typically under\n/sys/kernel/security), a \"secrets/coco\" directory is created in\nsecurityfs.  In it, a file is created for each secret entry.  The name\nof each such file is the GUID of the secret entry, and its content is\nthe secret data.\n\nThis allows applications running in a confidential computing setting to\nread secrets provided by the guest owner via a secure secret injection\nmechanism (such as AMD SEV's LAUNCH_SECRET command).\n\nRemoving (unlinking) files in the \"secrets/coco\" directory will zero out\nthe secret in memory, and remove the filesystem entry.  If the module is\nremoved and loaded again, that secret will not appear in the filesystem.\n\nSigned-off-by: Dov Murik <dovmurik@linux.ibm.com>\nReviewed-by: Gerd Hoffmann <kraxel@redhat.com>\nLink: https://lore.kernel.org/r/20220412212127.154182-3-dovmurik@linux.ibm.com\nSigned-off-by: Ard Biesheuvel <ardb@kernel.org>",
  "author_name": "Dov Murik",
  "author_email": "dovmurik@linux.ibm.com",
  "author_date": "Tue Apr 12 21:21:25 2022 +0000",
  "author_date_iso": "2022-04-12T21:21:25+00:00",
  "committer_name": "Ard Biesheuvel",
  "committer_email": "ardb@kernel.org",
  "committer_date": "Wed Apr 13 19:11:20 2022 +0200",
  "committer_date_iso": "2022-04-13T19:11:20+02:00",
  "files_changed": [
    "Documentation/ABI/testing/securityfs-secrets-coco",
    "drivers/virt/Kconfig",
    "drivers/virt/Makefile",
    "drivers/virt/coco/efi_secret/Kconfig",
    "drivers/virt/coco/efi_secret/Makefile",
    "drivers/virt/coco/efi_secret/efi_secret.c"
  ],
  "files_changed_count": 6,
  "stats": [
    {
      "file": "Documentation/ABI/testing/securityfs-secrets-coco",
      "insertions": 51,
      "deletions": 0
    },
    {
      "file": "drivers/virt/Kconfig",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/virt/Makefile",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/virt/coco/efi_secret/Kconfig",
      "insertions": 16,
      "deletions": 0
    },
    {
      "file": "drivers/virt/coco/efi_secret/Makefile",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/virt/coco/efi_secret/efi_secret.c",
      "insertions": 349,
      "deletions": 0
    }
  ],
  "total_insertions": 422,
  "total_deletions": 0,
  "total_changes": 422,
  "parents": [
    "1227418989346af3af179742cf42ce842e0ad484"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "Documentation/ABI/testing/securityfs-secrets-coco",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/virt/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/virt/coco/efi_secret/Makefile",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/virt/Makefile",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/virt/coco/efi_secret/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/virt/coco/efi_secret/efi_secret.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}