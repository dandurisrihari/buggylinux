{
  "hash": "89b223bfb8a89731bea4c84982b5d2ad7ba460e3",
  "hash_short": "89b223bf",
  "subject": "selinux: deprecate disabling SELinux and runtime",
  "body": "Deprecate the CONFIG_SECURITY_SELINUX_DISABLE functionality.  The\ncode was originally developed to make it easier for Linux\ndistributions to support architectures where adding parameters to the\nkernel command line was difficult.  Unfortunately, supporting runtime\ndisable meant we had to make some security trade-offs when it came to\nthe LSM hooks, as documented in the Kconfig help text:\n\n  NOTE: selecting this option will disable the '__ro_after_init'\n  kernel hardening feature for security hooks.   Please consider\n  using the selinux=0 boot parameter instead of enabling this\n  option.\n\nFortunately it looks as if that the original motivation for the\nruntime disable functionality is gone, and Fedora/RHEL appears to be\nthe only major distribution enabling this capability at build time\nso we are now taking steps to remove it entirely from the kernel.\nThe first step is to mark the functionality as deprecated and print\nan error when it is used (what this patch is doing).  As Fedora/RHEL\nmakes progress in transitioning the distribution away from runtime\ndisable, we will introduce follow-up patches over several kernel\nreleases which will block for increasing periods of time when the\nruntime disable is used.  Finally we will remove the option entirely\nonce we believe all users have moved to the kernel cmdline approach.\n\nAcked-by: Casey Schaufler <casey@schaufler-ca.com>\nAcked-by: Ondrej Mosnacek <omosnace@redhat.com>\nAcked-by: Stephen Smalley <sds@tycho.nsa.gov>\nSigned-off-by: Paul Moore <paul@paul-moore.com>",
  "full_message": "selinux: deprecate disabling SELinux and runtime\n\nDeprecate the CONFIG_SECURITY_SELINUX_DISABLE functionality.  The\ncode was originally developed to make it easier for Linux\ndistributions to support architectures where adding parameters to the\nkernel command line was difficult.  Unfortunately, supporting runtime\ndisable meant we had to make some security trade-offs when it came to\nthe LSM hooks, as documented in the Kconfig help text:\n\n  NOTE: selecting this option will disable the '__ro_after_init'\n  kernel hardening feature for security hooks.   Please consider\n  using the selinux=0 boot parameter instead of enabling this\n  option.\n\nFortunately it looks as if that the original motivation for the\nruntime disable functionality is gone, and Fedora/RHEL appears to be\nthe only major distribution enabling this capability at build time\nso we are now taking steps to remove it entirely from the kernel.\nThe first step is to mark the functionality as deprecated and print\nan error when it is used (what this patch is doing).  As Fedora/RHEL\nmakes progress in transitioning the distribution away from runtime\ndisable, we will introduce follow-up patches over several kernel\nreleases which will block for increasing periods of time when the\nruntime disable is used.  Finally we will remove the option entirely\nonce we believe all users have moved to the kernel cmdline approach.\n\nAcked-by: Casey Schaufler <casey@schaufler-ca.com>\nAcked-by: Ondrej Mosnacek <omosnace@redhat.com>\nAcked-by: Stephen Smalley <sds@tycho.nsa.gov>\nSigned-off-by: Paul Moore <paul@paul-moore.com>",
  "author_name": "Paul Moore",
  "author_email": "paul@paul-moore.com",
  "author_date": "Wed Dec 18 21:45:08 2019 -0500",
  "author_date_iso": "2019-12-18T21:45:08-05:00",
  "committer_name": "Paul Moore",
  "committer_email": "paul@paul-moore.com",
  "committer_date": "Tue Jan 7 10:19:43 2020 -0500",
  "committer_date_iso": "2020-01-07T10:19:43-05:00",
  "files_changed": [
    "Documentation/ABI/obsolete/sysfs-selinux-disable",
    "MAINTAINERS",
    "security/selinux/Kconfig",
    "security/selinux/selinuxfs.c"
  ],
  "files_changed_count": 4,
  "stats": [
    {
      "file": "Documentation/ABI/obsolete/sysfs-selinux-disable",
      "insertions": 26,
      "deletions": 0
    },
    {
      "file": "MAINTAINERS",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "security/selinux/Kconfig",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "security/selinux/selinuxfs.c",
      "insertions": 7,
      "deletions": 0
    }
  ],
  "total_insertions": 37,
  "total_deletions": 0,
  "total_changes": 37,
  "parents": [
    "7a4b51947475a7f67e2bd06c4a4c768e2e64a975"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.6",
    "v5.6-rc1",
    "v5.6-rc2",
    "v5.6-rc3",
    "v5.6-rc4",
    "v5.6-rc5",
    "v5.6-rc6",
    "v5.6-rc7",
    "v5.7-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "Documentation/ABI/obsolete/sysfs-selinux-disable",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "MAINTAINERS",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "security/selinux/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "security/selinux/selinuxfs.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}