{
  "hash": "43213daed6d6cb60e8cf69058a6db8648a556d9d",
  "hash_short": "43213dae",
  "subject": "fortify: Provide a memcpy trap door for sharp corners",
  "body": "As we continue to narrow the scope of what the FORTIFY memcpy() will\naccept and build alternative APIs that give the compiler appropriate\nvisibility into more complex memcpy scenarios, there is a need for\n\"unfortified\" memcpy use in rare cases where combinations of compiler\nbehaviors, source code layout, etc, result in cases where the stricter\nmemcpy checks need to be bypassed until appropriate solutions can be\ndeveloped (i.e. fix compiler bugs, code refactoring, new API, etc). The\nintention is for this to be used only if there's no other reasonable\nsolution, for its use to include a justification that can be used\nto assess future solutions, and for it to be temporary.\n\nExample usage included, based on analysis and discussion from:\nhttps://lore.kernel.org/netdev/CANn89iLS_2cshtuXPyNUGDPaic=sJiYfvTb_wNLgWrZRyBxZ_g@mail.gmail.com\n\nCc: Jakub Kicinski <kuba@kernel.org>\nCc: Eric Dumazet <edumazet@google.com>\nCc: \"David S. Miller\" <davem@davemloft.net>\nCc: Paolo Abeni <pabeni@redhat.com>\nCc: Coco Li <lixiaoyan@google.com>\nCc: Tariq Toukan <tariqt@nvidia.com>\nCc: Saeed Mahameed <saeedm@nvidia.com>\nCc: Leon Romanovsky <leon@kernel.org>\nCc: netdev@vger.kernel.org\nCc: linux-hardening@vger.kernel.org\nSigned-off-by: Kees Cook <keescook@chromium.org>\nLink: https://lore.kernel.org/r/20220511025301.3636666-1-keescook@chromium.org\nSigned-off-by: Paolo Abeni <pabeni@redhat.com>",
  "full_message": "fortify: Provide a memcpy trap door for sharp corners\n\nAs we continue to narrow the scope of what the FORTIFY memcpy() will\naccept and build alternative APIs that give the compiler appropriate\nvisibility into more complex memcpy scenarios, there is a need for\n\"unfortified\" memcpy use in rare cases where combinations of compiler\nbehaviors, source code layout, etc, result in cases where the stricter\nmemcpy checks need to be bypassed until appropriate solutions can be\ndeveloped (i.e. fix compiler bugs, code refactoring, new API, etc). The\nintention is for this to be used only if there's no other reasonable\nsolution, for its use to include a justification that can be used\nto assess future solutions, and for it to be temporary.\n\nExample usage included, based on analysis and discussion from:\nhttps://lore.kernel.org/netdev/CANn89iLS_2cshtuXPyNUGDPaic=sJiYfvTb_wNLgWrZRyBxZ_g@mail.gmail.com\n\nCc: Jakub Kicinski <kuba@kernel.org>\nCc: Eric Dumazet <edumazet@google.com>\nCc: \"David S. Miller\" <davem@davemloft.net>\nCc: Paolo Abeni <pabeni@redhat.com>\nCc: Coco Li <lixiaoyan@google.com>\nCc: Tariq Toukan <tariqt@nvidia.com>\nCc: Saeed Mahameed <saeedm@nvidia.com>\nCc: Leon Romanovsky <leon@kernel.org>\nCc: netdev@vger.kernel.org\nCc: linux-hardening@vger.kernel.org\nSigned-off-by: Kees Cook <keescook@chromium.org>\nLink: https://lore.kernel.org/r/20220511025301.3636666-1-keescook@chromium.org\nSigned-off-by: Paolo Abeni <pabeni@redhat.com>",
  "author_name": "Kees Cook",
  "author_email": "keescook@chromium.org",
  "author_date": "Tue May 10 19:53:01 2022 -0700",
  "author_date_iso": "2022-05-10T19:53:01-07:00",
  "committer_name": "Paolo Abeni",
  "committer_email": "pabeni@redhat.com",
  "committer_date": "Thu May 12 10:49:23 2022 +0200",
  "committer_date_iso": "2022-05-12T10:49:23+02:00",
  "files_changed": [
    "drivers/net/ethernet/mellanox/mlx5/core/en_tx.c",
    "include/linux/fortify-string.h",
    "include/linux/string.h"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "drivers/net/ethernet/mellanox/mlx5/core/en_tx.c",
      "insertions": 7,
      "deletions": 1
    },
    {
      "file": "include/linux/fortify-string.h",
      "insertions": 16,
      "deletions": 0
    },
    {
      "file": "include/linux/string.h",
      "insertions": 4,
      "deletions": 0
    }
  ],
  "total_insertions": 27,
  "total_deletions": 1,
  "total_changes": 28,
  "parents": [
    "bb709987f1043e23fce907cddedde5d8e495e76b"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/net/ethernet/mellanox/mlx5/core/en_tx.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/fortify-string.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/string.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}