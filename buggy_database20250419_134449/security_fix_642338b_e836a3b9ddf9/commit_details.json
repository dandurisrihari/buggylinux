{
  "hash": "642338ba33c5331f2b94ca3944845741fbbf8b89",
  "hash_short": "642338ba",
  "subject": "Merge tag 'xfs-4.13-merge-5' of git://git.kernel.org/pub/scm/fs/xfs/xfs-linux",
  "body": "Pull XFS updates from Darrick Wong:\n \"Here are some changes for you for 4.13. For the most part it's fixes\n  for bugs and deadlock problems, and preparation for online fsck in\n  some future merge window.\n\n   - Avoid quotacheck deadlocks\n\n   - Fix transaction overflows when bunmapping fragmented files\n\n   - Refactor directory readahead\n\n   - Allow admin to configure if ASSERT is fatal\n\n   - Improve transaction usage detail logging during overflows\n\n   - Minor cleanups\n\n   - Don't leak log items when the log shuts down\n\n   - Remove double-underscore typedefs\n\n   - Various preparation for online scrubbing\n\n   - Introduce new error injection configuration sysfs knobs\n\n   - Refactor dq_get_next to use extent map directly\n\n   - Fix problems with iterating the page cache for unwritten data\n\n   - Implement SEEK_{HOLE,DATA} via iomap\n\n   - Refactor XFS to use iomap SEEK_HOLE and SEEK_DATA\n\n   - Don't use MAXPATHLEN to check on-disk symlink target lengths\"\n\n* tag 'xfs-4.13-merge-5' of git://git.kernel.org/pub/scm/fs/xfs/xfs-linux: (48 commits)\n  xfs: don't crash on unexpected holes in dir/attr btrees\n  xfs: rename MAXPATHLEN to XFS_SYMLINK_MAXLEN\n  xfs: fix contiguous dquot chunk iteration livelock\n  xfs: Switch to iomap for SEEK_HOLE / SEEK_DATA\n  vfs: Add iomap_seek_hole and iomap_seek_data helpers\n  vfs: Add page_cache_seek_hole_data helper\n  xfs: remove a whitespace-only line from xfs_fs_get_nextdqblk\n  xfs: rewrite xfs_dq_get_next_id using xfs_iext_lookup_extent\n  xfs: Check for m_errortag initialization in xfs_errortag_test\n  xfs: grab dquots without taking the ilock\n  xfs: fix semicolon.cocci warnings\n  xfs: Don't clear SGID when inheriting ACLs\n  xfs: free cowblocks and retry on buffered write ENOSPC\n  xfs: replace log_badcrc_factor knob with error injection tag\n  xfs: convert drop_writes to use the errortag mechanism\n  xfs: remove unneeded parameter from XFS_TEST_ERROR\n  xfs: expose errortag knobs via sysfs\n  xfs: make errortag a per-mountpoint structure\n  xfs: free uncommitted transactions during log recovery\n  xfs: don't allow bmap on rt files\n  ...",
  "full_message": "Merge tag 'xfs-4.13-merge-5' of git://git.kernel.org/pub/scm/fs/xfs/xfs-linux\n\nPull XFS updates from Darrick Wong:\n \"Here are some changes for you for 4.13. For the most part it's fixes\n  for bugs and deadlock problems, and preparation for online fsck in\n  some future merge window.\n\n   - Avoid quotacheck deadlocks\n\n   - Fix transaction overflows when bunmapping fragmented files\n\n   - Refactor directory readahead\n\n   - Allow admin to configure if ASSERT is fatal\n\n   - Improve transaction usage detail logging during overflows\n\n   - Minor cleanups\n\n   - Don't leak log items when the log shuts down\n\n   - Remove double-underscore typedefs\n\n   - Various preparation for online scrubbing\n\n   - Introduce new error injection configuration sysfs knobs\n\n   - Refactor dq_get_next to use extent map directly\n\n   - Fix problems with iterating the page cache for unwritten data\n\n   - Implement SEEK_{HOLE,DATA} via iomap\n\n   - Refactor XFS to use iomap SEEK_HOLE and SEEK_DATA\n\n   - Don't use MAXPATHLEN to check on-disk symlink target lengths\"\n\n* tag 'xfs-4.13-merge-5' of git://git.kernel.org/pub/scm/fs/xfs/xfs-linux: (48 commits)\n  xfs: don't crash on unexpected holes in dir/attr btrees\n  xfs: rename MAXPATHLEN to XFS_SYMLINK_MAXLEN\n  xfs: fix contiguous dquot chunk iteration livelock\n  xfs: Switch to iomap for SEEK_HOLE / SEEK_DATA\n  vfs: Add iomap_seek_hole and iomap_seek_data helpers\n  vfs: Add page_cache_seek_hole_data helper\n  xfs: remove a whitespace-only line from xfs_fs_get_nextdqblk\n  xfs: rewrite xfs_dq_get_next_id using xfs_iext_lookup_extent\n  xfs: Check for m_errortag initialization in xfs_errortag_test\n  xfs: grab dquots without taking the ilock\n  xfs: fix semicolon.cocci warnings\n  xfs: Don't clear SGID when inheriting ACLs\n  xfs: free cowblocks and retry on buffered write ENOSPC\n  xfs: replace log_badcrc_factor knob with error injection tag\n  xfs: convert drop_writes to use the errortag mechanism\n  xfs: remove unneeded parameter from XFS_TEST_ERROR\n  xfs: expose errortag knobs via sysfs\n  xfs: make errortag a per-mountpoint structure\n  xfs: free uncommitted transactions during log recovery\n  xfs: don't allow bmap on rt files\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Mon Jul 10 10:51:53 2017 -0700",
  "author_date_iso": "2017-07-10T10:51:53-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Mon Jul 10 10:51:53 2017 -0700",
  "committer_date_iso": "2017-07-10T10:51:53-07:00",
  "files_changed": [
    "fs/buffer.c",
    "fs/iomap.c",
    "fs/xfs/xfs_aops.c",
    "fs/xfs/xfs_buf.c",
    "fs/xfs/xfs_file.c",
    "fs/xfs/xfs_icache.c",
    "fs/xfs/xfs_inode.c",
    "fs/xfs/xfs_iomap.c",
    "fs/xfs/xfs_linux.h",
    "fs/xfs/xfs_log_recover.c",
    "fs/xfs/xfs_mount.c",
    "fs/xfs/xfs_super.c",
    "include/linux/buffer_head.h",
    "include/linux/iomap.h"
  ],
  "files_changed_count": 14,
  "stats": [
    {
      "file": "fs/buffer.c",
      "insertions": 124,
      "deletions": 0
    },
    {
      "file": "fs/iomap.c",
      "insertions": 94,
      "deletions": 0
    },
    {
      "file": "fs/xfs/Kconfig",
      "insertions": 13,
      "deletions": 0
    },
    {
      "file": "fs/xfs/libxfs/xfs_ag_resv.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "fs/xfs/libxfs/xfs_alloc.c",
      "insertions": 3,
      "deletions": 5
    },
    {
      "file": "fs/xfs/libxfs/xfs_alloc.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "fs/xfs/libxfs/xfs_alloc_btree.c",
      "insertions": 10,
      "deletions": 16
    },
    {
      "file": "fs/xfs/libxfs/xfs_attr.c",
      "insertions": 18,
      "deletions": 8
    },
    {
      "file": "fs/xfs/libxfs/xfs_attr_leaf.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/xfs/libxfs/xfs_attr_remote.c",
      "insertions": 7,
      "deletions": 6
    },
    {
      "file": "fs/xfs/libxfs/xfs_attr_sf.h",
      "insertions": 5,
      "deletions": 5
    },
    {
      "file": "fs/xfs/libxfs/xfs_bit.h",
      "insertions": 12,
      "deletions": 12
    },
    {
      "file": "fs/xfs/libxfs/xfs_bmap.c",
      "insertions": 36,
      "deletions": 15
    },
    {
      "file": "fs/xfs/libxfs/xfs_bmap.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/xfs/libxfs/xfs_bmap_btree.c",
      "insertions": 26,
      "deletions": 8
    },
    {
      "file": "fs/xfs/libxfs/xfs_btree.c",
      "insertions": 26,
      "deletions": 26
    },
    {
      "file": "fs/xfs/libxfs/xfs_btree.h",
      "insertions": 22,
      "deletions": 11
    },
    {
      "file": "fs/xfs/libxfs/xfs_cksum.h",
      "insertions": 8,
      "deletions": 8
    },
    {
      "file": "fs/xfs/libxfs/xfs_da_btree.c",
      "insertions": 7,
      "deletions": 7
    },
    {
      "file": "fs/xfs/libxfs/xfs_da_btree.h",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "fs/xfs/libxfs/xfs_da_format.c",
      "insertions": 14,
      "deletions": 14
    },
    {
      "file": "fs/xfs/libxfs/xfs_da_format.h",
      "insertions": 32,
      "deletions": 32
    },
    {
      "file": "fs/xfs/libxfs/xfs_dir2.c",
      "insertions": 1,
      "deletions": 2
    },
    {
      "file": "fs/xfs/libxfs/xfs_dir2.h",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "fs/xfs/libxfs/xfs_dir2_block.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/xfs/libxfs/xfs_dir2_leaf.c",
      "insertions": 9,
      "deletions": 9
    },
    {
      "file": "fs/xfs/libxfs/xfs_dir2_node.c",
      "insertions": 6,
      "deletions": 4
    },
    {
      "file": "fs/xfs/libxfs/xfs_dir2_priv.h",
      "insertions": 6,
      "deletions": 4
    },
    {
      "file": "fs/xfs/libxfs/xfs_dir2_sf.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/xfs/libxfs/xfs_format.h",
      "insertions": 57,
      "deletions": 56
    },
    {
      "file": "fs/xfs/libxfs/xfs_fs.h",
      "insertions": 6,
      "deletions": 10
    },
    {
      "file": "fs/xfs/libxfs/xfs_ialloc.c",
      "insertions": 31,
      "deletions": 22
    },
    {
      "file": "fs/xfs/libxfs/xfs_ialloc.h",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "fs/xfs/libxfs/xfs_ialloc_btree.c",
      "insertions": 28,
      "deletions": 8
    },
    {
      "file": "fs/xfs/libxfs/xfs_inode_buf.c",
      "insertions": 3,
      "deletions": 4
    },
    {
      "file": "fs/xfs/libxfs/xfs_inode_buf.h",
      "insertions": 17,
      "deletions": 14
    },
    {
      "file": "fs/xfs/libxfs/xfs_log_format.h",
      "insertions": 128,
      "deletions": 128
    },
    {
      "file": "fs/xfs/libxfs/xfs_log_recover.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/xfs/libxfs/xfs_quota_defs.h",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "fs/xfs/libxfs/xfs_refcount.c",
      "insertions": 3,
      "deletions": 13
    },
    {
      "file": "fs/xfs/libxfs/xfs_refcount.h",
      "insertions": 16,
      "deletions": 0
    },
    {
      "file": "fs/xfs/libxfs/xfs_refcount_btree.c",
      "insertions": 4,
      "deletions": 8
    },
    {
      "file": "fs/xfs/libxfs/xfs_rmap.c",
      "insertions": 7,
      "deletions": 7
    },
    {
      "file": "fs/xfs/libxfs/xfs_rmap.h",
      "insertions": 7,
      "deletions": 4
    },
    {
      "file": "fs/xfs/libxfs/xfs_rmap_btree.c",
      "insertions": 15,
      "deletions": 19
    },
    {
      "file": "fs/xfs/libxfs/xfs_rtbitmap.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "fs/xfs/libxfs/xfs_sb.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "fs/xfs/libxfs/xfs_symlink_remote.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/xfs/libxfs/xfs_trans_resv.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "fs/xfs/libxfs/xfs_types.h",
      "insertions": 23,
      "deletions": 23
    },
    {
      "file": "fs/xfs/xfs.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "fs/xfs/xfs_acl.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "fs/xfs/xfs_acl.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "fs/xfs/xfs_aops.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "fs/xfs/xfs_attr.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "fs/xfs/xfs_attr_list.c",
      "insertions": 34,
      "deletions": 27
    },
    {
      "file": "fs/xfs/xfs_bmap_item.c",
      "insertions": 15,
      "deletions": 2
    },
    {
      "file": "fs/xfs/xfs_bmap_util.c",
      "insertions": 95,
      "deletions": 69
    },
    {
      "file": "fs/xfs/xfs_bmap_util.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "fs/xfs/xfs_buf.c",
      "insertions": 61,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_buf.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "fs/xfs/xfs_buf_item.c",
      "insertions": 12,
      "deletions": 9
    },
    {
      "file": "fs/xfs/xfs_dir2_readdir.c",
      "insertions": 99,
      "deletions": 242
    },
    {
      "file": "fs/xfs/xfs_discard.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "fs/xfs/xfs_dquot.c",
      "insertions": 37,
      "deletions": 48
    },
    {
      "file": "fs/xfs/xfs_error.c",
      "insertions": 248,
      "deletions": 71
    },
    {
      "file": "fs/xfs/xfs_error.h",
      "insertions": 30,
      "deletions": 14
    },
    {
      "file": "fs/xfs/xfs_file.c",
      "insertions": 16,
      "deletions": 362
    },
    {
      "file": "fs/xfs/xfs_fsops.c",
      "insertions": 8,
      "deletions": 8
    },
    {
      "file": "fs/xfs/xfs_fsops.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "fs/xfs/xfs_globals.c",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "fs/xfs/xfs_icache.c",
      "insertions": 50,
      "deletions": 2
    },
    {
      "file": "fs/xfs/xfs_icache.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "fs/xfs/xfs_inode.c",
      "insertions": 8,
      "deletions": 9
    },
    {
      "file": "fs/xfs/xfs_inode.h",
      "insertions": 2,
      "deletions": 5
    },
    {
      "file": "fs/xfs/xfs_ioctl.c",
      "insertions": 13,
      "deletions": 14
    },
    {
      "file": "fs/xfs/xfs_ioctl.h",
      "insertions": 5,
      "deletions": 5
    },
    {
      "file": "fs/xfs/xfs_ioctl32.h",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "fs/xfs/xfs_iomap.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "fs/xfs/xfs_iops.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "fs/xfs/xfs_itable.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_itable.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "fs/xfs/xfs_linux.h",
      "insertions": 6,
      "deletions": 15
    },
    {
      "file": "fs/xfs/xfs_log.c",
      "insertions": 66,
      "deletions": 21
    },
    {
      "file": "fs/xfs/xfs_log.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_log_cil.c",
      "insertions": 54,
      "deletions": 37
    },
    {
      "file": "fs/xfs/xfs_log_priv.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_log_recover.c",
      "insertions": 34,
      "deletions": 15
    },
    {
      "file": "fs/xfs/xfs_message.c",
      "insertions": 4,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_mount.c",
      "insertions": 16,
      "deletions": 10
    },
    {
      "file": "fs/xfs/xfs_mount.h",
      "insertions": 22,
      "deletions": 38
    },
    {
      "file": "fs/xfs/xfs_qm.c",
      "insertions": 27,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_qm_bhv.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_quotaops.c",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "fs/xfs/xfs_reflink.c",
      "insertions": 59,
      "deletions": 42
    },
    {
      "file": "fs/xfs/xfs_reflink.h",
      "insertions": 5,
      "deletions": 3
    },
    {
      "file": "fs/xfs/xfs_rtalloc.c",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "fs/xfs/xfs_rtalloc.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "fs/xfs/xfs_stats.c",
      "insertions": 4,
      "deletions": 4
    },
    {
      "file": "fs/xfs/xfs_stats.h",
      "insertions": 95,
      "deletions": 95
    },
    {
      "file": "fs/xfs/xfs_super.c",
      "insertions": 13,
      "deletions": 13
    },
    {
      "file": "fs/xfs/xfs_symlink.c",
      "insertions": 6,
      "deletions": 6
    },
    {
      "file": "fs/xfs/xfs_symlink.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "fs/xfs/xfs_sysctl.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "fs/xfs/xfs_sysfs.c",
      "insertions": 18,
      "deletions": 63
    },
    {
      "file": "fs/xfs/xfs_trace.h",
      "insertions": 11,
      "deletions": 29
    },
    {
      "file": "fs/xfs/xfs_trans.h",
      "insertions": 2,
      "deletions": 6
    },
    {
      "file": "fs/xfs/xfs_trans_bmap.c",
      "insertions": 9,
      "deletions": 2
    },
    {
      "file": "fs/xfs/xfs_trans_buf.c",
      "insertions": 14,
      "deletions": 7
    },
    {
      "file": "fs/xfs/xfs_trans_rmap.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "include/linux/buffer_head.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "include/linux/iomap.h",
      "insertions": 4,
      "deletions": 0
    }
  ],
  "total_insertions": 2116,
  "total_deletions": 1855,
  "total_changes": 3971,
  "parents": [
    "6618a24ab2313309e9df1cc06cc1f6786a6b6a9c",
    "cd87d867920155911d0d2e6485b769d853547750"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.13",
    "v4.13-rc1",
    "v4.13-rc2",
    "v4.13-rc3",
    "v4.13-rc4",
    "v4.13-rc5",
    "v4.13-rc6",
    "v4.13-rc7",
    "v4.14",
    "v4.14-rc1"
  ],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "fs/iomap.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/xfs/xfs_aops.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/buffer.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/xfs/xfs_icache.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/xfs/xfs_file.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/xfs/xfs_buf.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/xfs/xfs_inode.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/xfs/xfs_iomap.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/xfs/xfs_linux.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/xfs/xfs_log_recover.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/buffer_head.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/xfs/xfs_super.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "fs/xfs/xfs_mount.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/linux/iomap.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}