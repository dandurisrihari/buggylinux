Commit Hash: 6641085e8d7b3f061911517f79a2a15a0a21b97b
Subject: vfio: Clear the caps->buf to NULL after free


Security Keywords:
- hardening

Full commit message:
vfio: Clear the caps->buf to NULL after free

On buffer resize failure, vfio_info_cap_add() will free the buffer,
report zero for the size, and return -ENOMEM.  As additional
hardening, also clear the buffer pointer to prevent any chance of a
double free.

Signed-off-by: Schspa Shi <schspa@gmail.com>
Reviewed-by: Cornelia Huck <cohuck@redhat.com>
Link: https://lore.kernel.org/r/20220629022948.55608-1-schspa@gmail.com
Signed-off-by: Alex Williamson <alex.williamson@redhat.com>

Metadata:
Author: Schspa Shi <schspa@gmail.com>
Author Date: Wed Jun 29 10:29:48 2022 +0800
Committer: Alex Williamson <alex.williamson@redhat.com>
Commit Date: Thu Jun 30 11:01:14 2022 -0600

Files Changed: 1
Lines Added: 1
Lines Removed: 0
Total Changes: 1
