commit 857a96e9df33410afbb9e166267f4fef78ec36a2
Merge: 62080509734f c2f0961a45c4
Author: Arnd Bergmann <arnd@arndb.de>
Date:   Mon Mar 4 15:49:52 2024 +0100

    Merge tag 'scmi-updates-6.9' of git://git.kernel.org/pub/scm/linux/kernel/git/sudeep.holla/linux into soc/drivers
    
    Arm SCMI updates for v6.9
    
    Quite a few changes to extend support to SCMI v3.2 specification,
    to enhance notification handling and other miscellaneous updates.
    
    1. Enhancements to notification handling
    
       Until now, trying to register a notifier for an unsuppported
       notification returned an error genrating unneeded message exchanges
       with the SCMI platform. This can be avoided by looking up in advance
       the specific protocol and resources available.
    
       With these changes SCMI driver user will fail to register a notifier
       if the related command or resource is not supported (like before)
       without the need of exchanging any message.
    
       Perf notifications are also extended to provide the pre-calculated
       frequencies corresponding to the level or index carried by the
    
    2. More SCMI v3.2 related updates
    
       One of the main addition includes a centralized support to the SCMI
       core to handle v3.2 optional protocol version negotiation, so that
       at protocol initialization time, if the platform advertised version
       is newer than supported by the kernel and protocol version negotiation
       is supported, the SCMI core will attempt to negotiate an older protocol
       version.
    
       It also includes the clock get permissions which indicates if any of
       the clock operations are forbidden by the platform for the OSPM agent.
       It can be used in the clock driver to avoid unnecessary message
       exchanges between the kernel and the platform which will always end
       up with the failure. It also includes other missing bits of clock
       v3.2 protocol so that the supported protocol version can be bumped
       to 0x30000 (v3.2).
    
    3. Miscellaneous updates
    
       This includes addition of warning if the domain frequency multiplier
       is 0 or rounded off to indicate the actual frequencies are either
       wrong ot rounded off, hardening of clock domain info lookups, addition
       of multiple protocols registration support within a SCMI driver,
       update to SCMI entry in MAINTAINERS to include HWMON driver and
       constifying the scmi_bus_type structure.
    
       This also includes couple for fixes to minor issues: double free in
       SMC transport cleanup path and struct kernel-doc warnings in optee
       transport.
    
    * tag 'scmi-updates-6.9' of git://git.kernel.org/pub/scm/linux/kernel/git/sudeep.holla/linux: (29 commits)
      MAINTAINERS: Update SCMI entry with HWMON driver
      firmware: arm_scmi: Update the supported clock protocol version
      firmware: arm_scmi: Add standard clock OEM definitions
      firmware: arm_scmi: Add clock check for extended config support
      firmware: arm_scmi: Add support for v3.2 NEGOTIATE_PROTOCOL_VERSION
      firmware: arm_scmi: Fix struct kernel-doc warnings in optee transport
      firmware: arm_scmi: Report frequencies in the perf notifications
      firmware: arm_scmi: Use opps_by_lvl to store opps
      firmware: arm_scmi: Implement is_notify_supported callback in powercap protocol
      firmware: arm_scmi: Implement is_notify_supported callback in reset protocol
      firmware: arm_scmi: Implement is_notify_supported callback in sensor protocol
      firmware: arm_scmi: Implement is_notify_supported callback in clock protocol
      firmware: arm_scmi: Implement is_notify_supported callback in system power protocol
      firmware: arm_scmi: Implement is_notify_supported callback in power protocol
      firmware: arm_scmi: Implement is_notify_supported callback in perf protocol
      firmware: arm_scmi: Add a common helper to check if a message is supported
      firmware: arm_scmi: Check for notification support
      firmware: arm_scmi: Make scmi_bus_type const
      firmware: arm_scmi: Fix double free in SMC transport cleanup path
      firmware: arm_scmi: Implement clock get permissions
      ...
    
    Link: https://lore.kernel.org/r/20240223033435.118028-1-sudeep.holla@arm.com
    Signed-off-by: Arnd Bergmann <arnd@arndb.de>