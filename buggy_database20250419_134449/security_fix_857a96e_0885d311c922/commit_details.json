{
  "hash": "857a96e9df33410afbb9e166267f4fef78ec36a2",
  "hash_short": "857a96e9",
  "subject": "Merge tag 'scmi-updates-6.9' of git://git.kernel.org/pub/scm/linux/kernel/git/sudeep.holla/linux into soc/drivers",
  "body": "Arm SCMI updates for v6.9\n\nQuite a few changes to extend support to SCMI v3.2 specification,\nto enhance notification handling and other miscellaneous updates.\n\n1. Enhancements to notification handling\n\n   Until now, trying to register a notifier for an unsuppported\n   notification returned an error genrating unneeded message exchanges\n   with the SCMI platform. This can be avoided by looking up in advance\n   the specific protocol and resources available.\n\n   With these changes SCMI driver user will fail to register a notifier\n   if the related command or resource is not supported (like before)\n   without the need of exchanging any message.\n\n   Perf notifications are also extended to provide the pre-calculated\n   frequencies corresponding to the level or index carried by the\n\n2. More SCMI v3.2 related updates\n\n   One of the main addition includes a centralized support to the SCMI\n   core to handle v3.2 optional protocol version negotiation, so that\n   at protocol initialization time, if the platform advertised version\n   is newer than supported by the kernel and protocol version negotiation\n   is supported, the SCMI core will attempt to negotiate an older protocol\n   version.\n\n   It also includes the clock get permissions which indicates if any of\n   the clock operations are forbidden by the platform for the OSPM agent.\n   It can be used in the clock driver to avoid unnecessary message\n   exchanges between the kernel and the platform which will always end\n   up with the failure. It also includes other missing bits of clock\n   v3.2 protocol so that the supported protocol version can be bumped\n   to 0x30000 (v3.2).\n\n3. Miscellaneous updates\n\n   This includes addition of warning if the domain frequency multiplier\n   is 0 or rounded off to indicate the actual frequencies are either\n   wrong ot rounded off, hardening of clock domain info lookups, addition\n   of multiple protocols registration support within a SCMI driver,\n   update to SCMI entry in MAINTAINERS to include HWMON driver and\n   constifying the scmi_bus_type structure.\n\n   This also includes couple for fixes to minor issues: double free in\n   SMC transport cleanup path and struct kernel-doc warnings in optee\n   transport.\n\n* tag 'scmi-updates-6.9' of git://git.kernel.org/pub/scm/linux/kernel/git/sudeep.holla/linux: (29 commits)\n  MAINTAINERS: Update SCMI entry with HWMON driver\n  firmware: arm_scmi: Update the supported clock protocol version\n  firmware: arm_scmi: Add standard clock OEM definitions\n  firmware: arm_scmi: Add clock check for extended config support\n  firmware: arm_scmi: Add support for v3.2 NEGOTIATE_PROTOCOL_VERSION\n  firmware: arm_scmi: Fix struct kernel-doc warnings in optee transport\n  firmware: arm_scmi: Report frequencies in the perf notifications\n  firmware: arm_scmi: Use opps_by_lvl to store opps\n  firmware: arm_scmi: Implement is_notify_supported callback in powercap protocol\n  firmware: arm_scmi: Implement is_notify_supported callback in reset protocol\n  firmware: arm_scmi: Implement is_notify_supported callback in sensor protocol\n  firmware: arm_scmi: Implement is_notify_supported callback in clock protocol\n  firmware: arm_scmi: Implement is_notify_supported callback in system power protocol\n  firmware: arm_scmi: Implement is_notify_supported callback in power protocol\n  firmware: arm_scmi: Implement is_notify_supported callback in perf protocol\n  firmware: arm_scmi: Add a common helper to check if a message is supported\n  firmware: arm_scmi: Check for notification support\n  firmware: arm_scmi: Make scmi_bus_type const\n  firmware: arm_scmi: Fix double free in SMC transport cleanup path\n  firmware: arm_scmi: Implement clock get permissions\n  ...\n\nLink: https://lore.kernel.org/r/20240223033435.118028-1-sudeep.holla@arm.com\nSigned-off-by: Arnd Bergmann <arnd@arndb.de>",
  "full_message": "Merge tag 'scmi-updates-6.9' of git://git.kernel.org/pub/scm/linux/kernel/git/sudeep.holla/linux into soc/drivers\n\nArm SCMI updates for v6.9\n\nQuite a few changes to extend support to SCMI v3.2 specification,\nto enhance notification handling and other miscellaneous updates.\n\n1. Enhancements to notification handling\n\n   Until now, trying to register a notifier for an unsuppported\n   notification returned an error genrating unneeded message exchanges\n   with the SCMI platform. This can be avoided by looking up in advance\n   the specific protocol and resources available.\n\n   With these changes SCMI driver user will fail to register a notifier\n   if the related command or resource is not supported (like before)\n   without the need of exchanging any message.\n\n   Perf notifications are also extended to provide the pre-calculated\n   frequencies corresponding to the level or index carried by the\n\n2. More SCMI v3.2 related updates\n\n   One of the main addition includes a centralized support to the SCMI\n   core to handle v3.2 optional protocol version negotiation, so that\n   at protocol initialization time, if the platform advertised version\n   is newer than supported by the kernel and protocol version negotiation\n   is supported, the SCMI core will attempt to negotiate an older protocol\n   version.\n\n   It also includes the clock get permissions which indicates if any of\n   the clock operations are forbidden by the platform for the OSPM agent.\n   It can be used in the clock driver to avoid unnecessary message\n   exchanges between the kernel and the platform which will always end\n   up with the failure. It also includes other missing bits of clock\n   v3.2 protocol so that the supported protocol version can be bumped\n   to 0x30000 (v3.2).\n\n3. Miscellaneous updates\n\n   This includes addition of warning if the domain frequency multiplier\n   is 0 or rounded off to indicate the actual frequencies are either\n   wrong ot rounded off, hardening of clock domain info lookups, addition\n   of multiple protocols registration support within a SCMI driver,\n   update to SCMI entry in MAINTAINERS to include HWMON driver and\n   constifying the scmi_bus_type structure.\n\n   This also includes couple for fixes to minor issues: double free in\n   SMC transport cleanup path and struct kernel-doc warnings in optee\n   transport.\n\n* tag 'scmi-updates-6.9' of git://git.kernel.org/pub/scm/linux/kernel/git/sudeep.holla/linux: (29 commits)\n  MAINTAINERS: Update SCMI entry with HWMON driver\n  firmware: arm_scmi: Update the supported clock protocol version\n  firmware: arm_scmi: Add standard clock OEM definitions\n  firmware: arm_scmi: Add clock check for extended config support\n  firmware: arm_scmi: Add support for v3.2 NEGOTIATE_PROTOCOL_VERSION\n  firmware: arm_scmi: Fix struct kernel-doc warnings in optee transport\n  firmware: arm_scmi: Report frequencies in the perf notifications\n  firmware: arm_scmi: Use opps_by_lvl to store opps\n  firmware: arm_scmi: Implement is_notify_supported callback in powercap protocol\n  firmware: arm_scmi: Implement is_notify_supported callback in reset protocol\n  firmware: arm_scmi: Implement is_notify_supported callback in sensor protocol\n  firmware: arm_scmi: Implement is_notify_supported callback in clock protocol\n  firmware: arm_scmi: Implement is_notify_supported callback in system power protocol\n  firmware: arm_scmi: Implement is_notify_supported callback in power protocol\n  firmware: arm_scmi: Implement is_notify_supported callback in perf protocol\n  firmware: arm_scmi: Add a common helper to check if a message is supported\n  firmware: arm_scmi: Check for notification support\n  firmware: arm_scmi: Make scmi_bus_type const\n  firmware: arm_scmi: Fix double free in SMC transport cleanup path\n  firmware: arm_scmi: Implement clock get permissions\n  ...\n\nLink: https://lore.kernel.org/r/20240223033435.118028-1-sudeep.holla@arm.com\nSigned-off-by: Arnd Bergmann <arnd@arndb.de>",
  "author_name": "Arnd Bergmann",
  "author_email": "arnd@arndb.de",
  "author_date": "Mon Mar 4 15:49:52 2024 +0100",
  "author_date_iso": "2024-03-04T15:49:52+01:00",
  "committer_name": "Arnd Bergmann",
  "committer_email": "arnd@arndb.de",
  "committer_date": "Mon Mar 4 15:50:07 2024 +0100",
  "committer_date_iso": "2024-03-04T15:50:07+01:00",
  "files_changed": [
    "MAINTAINERS"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "MAINTAINERS",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/firmware/arm_scmi/bus.c",
      "insertions": 23,
      "deletions": 3
    },
    {
      "file": "drivers/firmware/arm_scmi/clock.c",
      "insertions": 167,
      "deletions": 30
    },
    {
      "file": "drivers/firmware/arm_scmi/common.h",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "drivers/firmware/arm_scmi/driver.c",
      "insertions": 94,
      "deletions": 5
    },
    {
      "file": "drivers/firmware/arm_scmi/mailbox.c",
      "insertions": 14,
      "deletions": 0
    },
    {
      "file": "drivers/firmware/arm_scmi/notify.c",
      "insertions": 16,
      "deletions": 1
    },
    {
      "file": "drivers/firmware/arm_scmi/notify.h",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "drivers/firmware/arm_scmi/optee.c",
      "insertions": 4,
      "deletions": 2
    },
    {
      "file": "drivers/firmware/arm_scmi/perf.c",
      "insertions": 157,
      "deletions": 13
    },
    {
      "file": "drivers/firmware/arm_scmi/power.c",
      "insertions": 27,
      "deletions": 3
    },
    {
      "file": "drivers/firmware/arm_scmi/powercap.c",
      "insertions": 41,
      "deletions": 4
    },
    {
      "file": "drivers/firmware/arm_scmi/protocols.h",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "drivers/firmware/arm_scmi/raw_mode.c",
      "insertions": 8,
      "deletions": 4
    },
    {
      "file": "drivers/firmware/arm_scmi/reset.c",
      "insertions": 29,
      "deletions": 8
    },
    {
      "file": "drivers/firmware/arm_scmi/sensors.c",
      "insertions": 36,
      "deletions": 1
    },
    {
      "file": "drivers/firmware/arm_scmi/shmem.c",
      "insertions": 7,
      "deletions": 1
    },
    {
      "file": "drivers/firmware/arm_scmi/smc.c",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "drivers/firmware/arm_scmi/system.c",
      "insertions": 16,
      "deletions": 0
    },
    {
      "file": "include/linux/scmi_protocol.h",
      "insertions": 18,
      "deletions": 3
    }
  ],
  "total_insertions": 676,
  "total_deletions": 79,
  "total_changes": 755,
  "parents": [
    "62080509734f654c26f811c4e8e93fa357826661",
    "c2f0961a45c4a973437285871540c155bed18ccb"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "MAINTAINERS",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}