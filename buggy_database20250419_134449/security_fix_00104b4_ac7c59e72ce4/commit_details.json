{
  "hash": "00104b4171491794b53f8d6cc255f539e8bf18b4",
  "hash_short": "00104b41",
  "subject": "KVM: MIPS: Drop partial KVM_NMI implementation",
  "body": "MIPS incompletely implements the KVM_NMI ioctl to supposedly perform a\nCPU reset, but all it actually does is invalidate the ASIDs. It doesn't\nexpose the KVM_CAP_USER_NMI capability which is supposed to indicate the\npresence of the KVM_NMI ioctl, and no user software actually uses it on\nMIPS.\n\nSince this is dead code that would technically need updating for GVA\npage table handling in upcoming patches, remove it now. If we wanted to\nimplement NMI injection later it can always be done properly along with\nthe KVM_CAP_USER_NMI capability, and if we wanted to implement a proper\nCPU reset it would be better done with a separate ioctl.\n\nSigned-off-by: James Hogan <james.hogan@imgtec.com>\nCc: Paolo Bonzini <pbonzini@redhat.com>\nCc: \"Radim Kr\u010dm\u00e1\u0159\" <rkrcmar@redhat.com>\nCc: Ralf Baechle <ralf@linux-mips.org>\nCc: linux-mips@linux-mips.org\nCc: kvm@vger.kernel.org",
  "full_message": "KVM: MIPS: Drop partial KVM_NMI implementation\n\nMIPS incompletely implements the KVM_NMI ioctl to supposedly perform a\nCPU reset, but all it actually does is invalidate the ASIDs. It doesn't\nexpose the KVM_CAP_USER_NMI capability which is supposed to indicate the\npresence of the KVM_NMI ioctl, and no user software actually uses it on\nMIPS.\n\nSince this is dead code that would technically need updating for GVA\npage table handling in upcoming patches, remove it now. If we wanted to\nimplement NMI injection later it can always be done properly along with\nthe KVM_CAP_USER_NMI capability, and if we wanted to implement a proper\nCPU reset it would be better done with a separate ioctl.\n\nSigned-off-by: James Hogan <james.hogan@imgtec.com>\nCc: Paolo Bonzini <pbonzini@redhat.com>\nCc: \"Radim Kr\u010dm\u00e1\u0159\" <rkrcmar@redhat.com>\nCc: Ralf Baechle <ralf@linux-mips.org>\nCc: linux-mips@linux-mips.org\nCc: kvm@vger.kernel.org",
  "author_name": "James Hogan",
  "author_email": "james.hogan@imgtec.com",
  "author_date": "Wed Jan 4 22:05:22 2017 +0000",
  "author_date_iso": "2017-01-04T22:05:22+00:00",
  "committer_name": "James Hogan",
  "committer_email": "james.hogan@imgtec.com",
  "committer_date": "Fri Feb 3 15:20:42 2017 +0000",
  "committer_date_iso": "2017-02-03T15:20:42+00:00",
  "files_changed": [
    "arch/mips/kvm/mips.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "arch/mips/kvm/mips.c",
      "insertions": 0,
      "deletions": 16
    }
  ],
  "total_insertions": 0,
  "total_deletions": 16,
  "total_changes": 16,
  "parents": [
    "adb0b25f780d543efb57738bcc525045a180e058"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.11",
    "v4.11-rc1",
    "v4.11-rc2",
    "v4.11-rc3",
    "v4.11-rc4",
    "v4.11-rc5",
    "v4.11-rc6",
    "v4.11-rc7",
    "v4.11-rc8",
    "v4.12"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/mips/kvm/mips.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}