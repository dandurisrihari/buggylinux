{
  "hash": "30a584d944fbd599d4a8f470f75bf7af1a15b466",
  "hash_short": "30a584d9",
  "subject": "[LLX]: SOCK_DGRAM interface fixes",
  "body": "The datagram interface of LLC is broken in a couple of ways.\nThese were discovered when trying to use it to build an out-of-kernel\nversion of STP.\n\nFirst it didn't pass the source address of the received packet\nin recvfrom(). It needs to copy the source address of received LLC packets\ninto the socket control block. At the same time fix a security issue\nbecause there was uninitialized data leakage. Every recvfrom call\nwas just copying out old data.\n\nSecond, LLC should not merge multiple packets in one receive call\non datagram sockets. LLC should preserve packet boundaries on\nSOCK_DGRAM.\n\nThis fix goes against the old historical comments about UNIX98 semantics\nbut without this fix SOCK_DGRAM is broken and useless. So either ANK's\ninterpretation was incorect or UNIX98 standard was wrong.\n\nSigned-off-by: Stephen Hemminger <shemminger@osdl.org>\nAcked-by: Arnaldo Carvalho de Melo <acme@mandriva.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "full_message": "[LLX]: SOCK_DGRAM interface fixes\n\nThe datagram interface of LLC is broken in a couple of ways.\nThese were discovered when trying to use it to build an out-of-kernel\nversion of STP.\n\nFirst it didn't pass the source address of the received packet\nin recvfrom(). It needs to copy the source address of received LLC packets\ninto the socket control block. At the same time fix a security issue\nbecause there was uninitialized data leakage. Every recvfrom call\nwas just copying out old data.\n\nSecond, LLC should not merge multiple packets in one receive call\non datagram sockets. LLC should preserve packet boundaries on\nSOCK_DGRAM.\n\nThis fix goes against the old historical comments about UNIX98 semantics\nbut without this fix SOCK_DGRAM is broken and useless. So either ANK's\ninterpretation was incorect or UNIX98 standard was wrong.\n\nSigned-off-by: Stephen Hemminger <shemminger@osdl.org>\nAcked-by: Arnaldo Carvalho de Melo <acme@mandriva.com>\nSigned-off-by: David S. Miller <davem@davemloft.net>",
  "author_name": "Stephen Hemminger",
  "author_email": "shemminger@osdl.org",
  "author_date": "Thu Aug 3 16:38:49 2006 -0700",
  "author_date_iso": "2006-08-03T16:38:49-07:00",
  "committer_name": "David S. Miller",
  "committer_email": "davem@sunset.davemloft.net",
  "committer_date": "Fri Aug 4 22:59:50 2006 -0700",
  "committer_date_iso": "2006-08-04T22:59:50-07:00",
  "files_changed": [
    "net/llc/af_llc.c",
    "net/llc/llc_sap.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "net/llc/af_llc.c",
      "insertions": 8,
      "deletions": 12
    },
    {
      "file": "net/llc/llc_sap.c",
      "insertions": 2,
      "deletions": 2
    }
  ],
  "total_insertions": 10,
  "total_deletions": 14,
  "total_changes": 24,
  "parents": [
    "b9e2cc0f0e47ad351349156018ef8a365e9c6d25"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v2.6.18",
    "v2.6.18-rc4",
    "v2.6.18-rc5",
    "v2.6.18-rc6",
    "v2.6.18-rc7",
    "v2.6.19",
    "v2.6.19-rc1",
    "v2.6.19-rc2",
    "v2.6.19-rc3",
    "v2.6.19-rc4"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "security issue"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "net/llc/af_llc.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "net/llc/llc_sap.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}