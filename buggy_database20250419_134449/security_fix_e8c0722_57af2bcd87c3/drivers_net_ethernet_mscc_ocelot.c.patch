commit e8c0722927e8fc112d78cc0435d336fcd7e3507c
Author: Vladimir Oltean <vladimir.oltean@nxp.com>
Date:   Fri Oct 1 18:15:27 2021 +0300

    net: mscc: ocelot: write full VLAN TCI in the injection header
    
    The VLAN TCI contains more than the VLAN ID, it also has the VLAN PCP
    and Drop Eligibility Indicator.
    
    If the ocelot driver is going to write the VLAN header inside the DSA
    tag, it could just as well write the entire TCI.
    
    Signed-off-by: Vladimir Oltean <vladimir.oltean@nxp.com>
    Signed-off-by: David S. Miller <davem@davemloft.net>

diff --git a/drivers/net/ethernet/mscc/ocelot.c b/drivers/net/ethernet/mscc/ocelot.c
index 559177e6ded4..05c456dbdd72 100644
--- a/drivers/net/ethernet/mscc/ocelot.c
+++ b/drivers/net/ethernet/mscc/ocelot.c
@@ -916,7 +916,7 @@ void ocelot_port_inject_frame(struct ocelot *ocelot, int port, int grp,
 	ocelot_ifh_set_bypass(ifh, 1);
 	ocelot_ifh_set_dest(ifh, BIT_ULL(port));
 	ocelot_ifh_set_tag_type(ifh, IFH_TAG_TYPE_C);
-	ocelot_ifh_set_vid(ifh, skb_vlan_tag_get(skb));
+	ocelot_ifh_set_vlan_tci(ifh, skb_vlan_tag_get(skb));
 	ocelot_ifh_set_rew_op(ifh, rew_op);
 
 	for (i = 0; i < OCELOT_TAG_LEN / 4; i++)