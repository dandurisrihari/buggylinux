{
  "hash": "46515736f8687c5dbde5637ca2f2678055c9c0f7",
  "hash_short": "46515736",
  "subject": "kvm: whitelist struct kvm_vcpu_arch",
  "body": "On x86, ARM and s390, struct kvm_vcpu_arch has a usercopy region\nthat is read and written by the KVM_GET/SET_CPUID2 ioctls (x86)\nor KVM_GET/SET_ONE_REG (ARM/s390).  Without whitelisting the area,\nKVM is completely broken on those architectures with usercopy hardening\nenabled.\n\nFor now, allow writing to the entire struct on all architectures.\nThe KVM tree will not refine this to an architecture-specific\nsubset of struct kvm_vcpu_arch.\n\nCc: kernel-hardening@lists.openwall.com\nCc: Kees Cook <keescook@chromium.org>\nCc: Christian Borntraeger <borntraeger@redhat.com>\nCc: Christoffer Dall <cdall@linaro.org>\nCc: Radim Kr\u010dm\u00e1\u0159 <rkrcmar@redhat.com>\nSigned-off-by: Paolo Bonzini <pbonzini@redhat.com>\nAcked-by: Christoffer Dall <christoffer.dall@linaro.org>\nAcked-by: Marc Zyngier <marc.zyngier@arm.com>\nAcked-by: Christian Borntraeger <borntraeger@de.ibm.com>\nSigned-off-by: Kees Cook <keescook@chromium.org>",
  "full_message": "kvm: whitelist struct kvm_vcpu_arch\n\nOn x86, ARM and s390, struct kvm_vcpu_arch has a usercopy region\nthat is read and written by the KVM_GET/SET_CPUID2 ioctls (x86)\nor KVM_GET/SET_ONE_REG (ARM/s390).  Without whitelisting the area,\nKVM is completely broken on those architectures with usercopy hardening\nenabled.\n\nFor now, allow writing to the entire struct on all architectures.\nThe KVM tree will not refine this to an architecture-specific\nsubset of struct kvm_vcpu_arch.\n\nCc: kernel-hardening@lists.openwall.com\nCc: Kees Cook <keescook@chromium.org>\nCc: Christian Borntraeger <borntraeger@redhat.com>\nCc: Christoffer Dall <cdall@linaro.org>\nCc: Radim Kr\u010dm\u00e1\u0159 <rkrcmar@redhat.com>\nSigned-off-by: Paolo Bonzini <pbonzini@redhat.com>\nAcked-by: Christoffer Dall <christoffer.dall@linaro.org>\nAcked-by: Marc Zyngier <marc.zyngier@arm.com>\nAcked-by: Christian Borntraeger <borntraeger@de.ibm.com>\nSigned-off-by: Kees Cook <keescook@chromium.org>",
  "author_name": "Paolo Bonzini",
  "author_email": "pbonzini@redhat.com",
  "author_date": "Thu Oct 26 15:45:46 2017 +0200",
  "author_date_iso": "2017-10-26T15:45:46+02:00",
  "committer_name": "Kees Cook",
  "committer_email": "keescook@chromium.org",
  "committer_date": "Mon Jan 15 12:08:07 2018 -0800",
  "committer_date_iso": "2018-01-15T12:08:07-08:00",
  "files_changed": [
    "virt/kvm/kvm_main.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "virt/kvm/kvm_main.c",
      "insertions": 6,
      "deletions": 2
    }
  ],
  "total_insertions": 6,
  "total_deletions": 2,
  "total_changes": 8,
  "parents": [
    "08626a6056aad824c43d34ce587ab2b01f49d1a4"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.16",
    "v4.16-rc1",
    "v4.16-rc2",
    "v4.16-rc3",
    "v4.16-rc4",
    "v4.16-rc5",
    "v4.16-rc6",
    "v4.16-rc7",
    "v4.17",
    "v4.17-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "virt/kvm/kvm_main.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}