Commit Hash: 46515736f8687c5dbde5637ca2f2678055c9c0f7
Subject: kvm: whitelist struct kvm_vcpu_arch


Security Keywords:
- hardening

Full commit message:
kvm: whitelist struct kvm_vcpu_arch

On x86, ARM and s390, struct kvm_vcpu_arch has a usercopy region
that is read and written by the KVM_GET/SET_CPUID2 ioctls (x86)
or KVM_GET/SET_ONE_REG (ARM/s390).  Without whitelisting the area,
KVM is completely broken on those architectures with usercopy hardening
enabled.

For now, allow writing to the entire struct on all architectures.
The KVM tree will not refine this to an architecture-specific
subset of struct kvm_vcpu_arch.

Cc: kernel-hardening@lists.openwall.com
Cc: Kees Cook <keescook@chromium.org>
Cc: Christian Borntraeger <borntraeger@redhat.com>
Cc: Christoffer Dall <cdall@linaro.org>
Cc: Radim Krčmář <rkrcmar@redhat.com>
Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>
Acked-by: Christoffer Dall <christoffer.dall@linaro.org>
Acked-by: Marc Zyngier <marc.zyngier@arm.com>
Acked-by: Christian Borntraeger <borntraeger@de.ibm.com>
Signed-off-by: Kees Cook <keescook@chromium.org>

Metadata:
Author: Paolo Bonzini <pbonzini@redhat.com>
Author Date: Thu Oct 26 15:45:46 2017 +0200
Committer: Kees Cook <keescook@chromium.org>
Commit Date: Mon Jan 15 12:08:07 2018 -0800

Files Changed: 1
Lines Added: 6
Lines Removed: 2
Total Changes: 8
