Commit Hash: aa36d711e945e65fa87410927800f01878a8faed
Subject: nvme-auth: convert dhchap_auth_list to an array


Security Keywords:
- auth

Full commit message:
nvme-auth: convert dhchap_auth_list to an array

We know exactly how many dhchap contexts we will need, there is no need
to hold a list that we need to protect with a mutex. Convert to
a dynamically allocated array. And dhchap_context access state is
maintained by the chap itself.

Make dhchap_auth_mutex protect only the ctrl host_key and ctrl_key
in a fine-grained lock such that there is no long lasting acquisition
of the lock and no need to take/release this lock when flushing
authentication works.

Signed-off-by: Sagi Grimberg <sagi@grimberg.me>
Signed-off-by: Christoph Hellwig <hch@lst.de>

Metadata:
Author: Sagi Grimberg <sagi@grimberg.me>
Author Date: Sun Nov 13 13:24:20 2022 +0200
Committer: Christoph Hellwig <hch@lst.de>
Commit Date: Wed Nov 16 08:36:36 2022 +0100

Files Changed: 3
Lines Added: 69
Lines Removed: 55
Total Changes: 124
