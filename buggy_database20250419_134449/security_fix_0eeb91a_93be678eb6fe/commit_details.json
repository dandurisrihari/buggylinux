{
  "hash": "0eeb91ade90ce06d2fa1e2fcb55e3316b64c203c",
  "hash_short": "0eeb91ad",
  "subject": "rtl8xxxu: fix RTL8723BU connection failure issue after warm reboot",
  "body": "The RTL8723BU has problems connecting to AP after each warm reboot.\nSometimes it returns no scan result, and in most cases, it fails\nthe authentication for unknown reason. However, it works totally\nfine after cold reboot.\n\nCompare the value of register SYS_CR and SYS_CLK_MAC_CLK_ENABLE\nfor cold reboot and warm reboot, the registers imply that the MAC\nis already powered and thus some procedures are skipped during\ndriver initialization. Double checked the vendor driver, it reads\nthe SYS_CR and SYS_CLK_MAC_CLK_ENABLE also but doesn't skip any\nduring initialization based on them. This commit only tells the\nRTL8723BU to do full initialization without checking MAC status.\n\nSigned-off-by: Chris Chiu <chiu@endlessm.com>\nSigned-off-by: Jes Sorensen <Jes.Sorensen@gmail.com>\nSigned-off-by: Kalle Valo <kvalo@codeaurora.org>",
  "full_message": "rtl8xxxu: fix RTL8723BU connection failure issue after warm reboot\n\nThe RTL8723BU has problems connecting to AP after each warm reboot.\nSometimes it returns no scan result, and in most cases, it fails\nthe authentication for unknown reason. However, it works totally\nfine after cold reboot.\n\nCompare the value of register SYS_CR and SYS_CLK_MAC_CLK_ENABLE\nfor cold reboot and warm reboot, the registers imply that the MAC\nis already powered and thus some procedures are skipped during\ndriver initialization. Double checked the vendor driver, it reads\nthe SYS_CR and SYS_CLK_MAC_CLK_ENABLE also but doesn't skip any\nduring initialization based on them. This commit only tells the\nRTL8723BU to do full initialization without checking MAC status.\n\nSigned-off-by: Chris Chiu <chiu@endlessm.com>\nSigned-off-by: Jes Sorensen <Jes.Sorensen@gmail.com>\nSigned-off-by: Kalle Valo <kvalo@codeaurora.org>",
  "author_name": "Chris Chiu",
  "author_email": "chiu@endlessm.com",
  "author_date": "Wed Oct 16 09:54:08 2019 +0800",
  "author_date_iso": "2019-10-16T09:54:08+08:00",
  "committer_name": "Kalle Valo",
  "committer_email": "kvalo@codeaurora.org",
  "committer_date": "Tue Oct 22 11:26:13 2019 +0300",
  "committer_date_iso": "2019-10-22T11:26:13+03:00",
  "files_changed": [
    "drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu.h",
    "drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_8723b.c",
    "drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_core.c"
  ],
  "files_changed_count": 3,
  "stats": [
    {
      "file": "drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_8723b.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_core.c",
      "insertions": 3,
      "deletions": 0
    }
  ],
  "total_insertions": 5,
  "total_deletions": 0,
  "total_changes": 5,
  "parents": [
    "89dca86d29b46f2a5f38ea6476cfd441bd205d25"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.5",
    "v5.5-rc1",
    "v5.5-rc2",
    "v5.5-rc3",
    "v5.5-rc4",
    "v5.5-rc5",
    "v5.5-rc6",
    "v5.5-rc7",
    "v5.6",
    "v5.6-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_8723b.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/net/wireless/realtek/rtl8xxxu/rtl8xxxu_core.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}