{
  "hash": "6040e57658eee6eb1315a26119101ca832d1f854",
  "hash_short": "6040e576",
  "subject": "Make the hardened user-copy code depend on having a hardened allocator",
  "body": "The kernel test robot reported a usercopy failure in the new hardened\nsanity checks, due to a page-crossing copy of the FPU state into the\ntask structure.\n\nThis happened because the kernel test robot was testing with SLOB, which\ndoesn't actually do the required book-keeping for slab allocations, and\nas a result the hardening code didn't realize that the task struct\nallocation was one single allocation - and the sanity checks fail.\n\nSince SLOB doesn't even claim to support hardening (and you really\nshouldn't use it), the straightforward solution is to just make the\nusercopy hardening code depend on the allocator supporting it.\n\nReported-by: kernel test robot <xiaolong.ye@intel.com>\nCc: Kees Cook <keescook@chromium.org>\nSigned-off-by: Linus Torvalds <torvalds@linux-foundation.org>",
  "full_message": "Make the hardened user-copy code depend on having a hardened allocator\n\nThe kernel test robot reported a usercopy failure in the new hardened\nsanity checks, due to a page-crossing copy of the FPU state into the\ntask structure.\n\nThis happened because the kernel test robot was testing with SLOB, which\ndoesn't actually do the required book-keeping for slab allocations, and\nas a result the hardening code didn't realize that the task struct\nallocation was one single allocation - and the sanity checks fail.\n\nSince SLOB doesn't even claim to support hardening (and you really\nshouldn't use it), the straightforward solution is to just make the\nusercopy hardening code depend on the allocator supporting it.\n\nReported-by: kernel test robot <xiaolong.ye@intel.com>\nCc: Kees Cook <keescook@chromium.org>\nSigned-off-by: Linus Torvalds <torvalds@linux-foundation.org>",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Fri Aug 19 12:47:01 2016 -0700",
  "author_date_iso": "2016-08-19T12:47:01-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Fri Aug 19 12:47:01 2016 -0700",
  "committer_date_iso": "2016-08-19T12:47:01-07:00",
  "files_changed": [
    "security/Kconfig"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "security/Kconfig",
      "insertions": 1,
      "deletions": 0
    }
  ],
  "total_insertions": 1,
  "total_deletions": 0,
  "total_changes": 1,
  "parents": [
    "8cc9dddd381d94f1cbeed62af275a8764583b349"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.10",
    "v4.10-rc1",
    "v4.10-rc2",
    "v4.10-rc3",
    "v4.10-rc4",
    "v4.10-rc5",
    "v4.10-rc6",
    "v4.10-rc7",
    "v4.10-rc8",
    "v4.11"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "security/Kconfig",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}