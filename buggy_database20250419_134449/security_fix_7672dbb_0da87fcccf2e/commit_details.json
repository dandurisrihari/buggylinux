{
  "hash": "7672dbba85d30db07c3588f8cf6c6708bbdc0baa",
  "hash_short": "7672dbba",
  "subject": "drm: Add Content protection type property",
  "body": "This patch adds a DRM ENUM property to the selected connectors.\nThis property is used for mentioning the protected content's type\nfrom userspace to kernel HDCP authentication.\n\nType of the stream is decided by the protected content providers.\nType 0 content can be rendered on any HDCP protected display wires.\nBut Type 1 content can be rendered only on HDCP2.2 protected paths.\n\nSo when a userspace sets this property to Type 1 and starts the HDCP\nenable, kernel will honour it only if HDCP2.2 authentication is through\nfor type 1. Else HDCP enable will be failed.\n\nPekka have completed the Weston DRM-backend review in\nhttps://gitlab.freedesktop.org/wayland/weston/merge_requests/48\nand the UAPI for HDCP 2.2 looks good.\n\nThe userspace is accepted in Weston.\n\nv2:\n  cp_content_type is replaced with content_protection_type [daniel]\n  check at atomic_set_property is removed [Maarten]\nv3:\n  %s/content_protection_type/hdcp_content_type [Pekka]\nv4:\n  property is created for the first requested connector and then reused.\n\t[Danvet]\nv5:\n  kernel doc nits addressed [Daniel]\n  Rebased as part of patch reordering.\nv6:\n  Kernel docs are modified [pekka]\nv7:\n  More details in Kernel docs. [pekka]\nv8:\n  Few more clarification into kernel doc of content type [pekka]\nv9:\n  Small fixes in coding style.\nv10:\n  Moving DRM_MODE_HDCP_CONTENT_TYPEx definition to drm_hdcp.h [pekka]\n\nSigned-off-by: Ramalingam C <ramalingam.c@intel.com>\nReviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>\nAcked-by: Pekka Paalanen <pekka.paalanen@collabora.com>\nAcked-by: Jani Nikula <jani.nikula@intel.com>\nLink: https://patchwork.freedesktop.org/patch/320957/?series=57232&rev=14",
  "full_message": "drm: Add Content protection type property\n\nThis patch adds a DRM ENUM property to the selected connectors.\nThis property is used for mentioning the protected content's type\nfrom userspace to kernel HDCP authentication.\n\nType of the stream is decided by the protected content providers.\nType 0 content can be rendered on any HDCP protected display wires.\nBut Type 1 content can be rendered only on HDCP2.2 protected paths.\n\nSo when a userspace sets this property to Type 1 and starts the HDCP\nenable, kernel will honour it only if HDCP2.2 authentication is through\nfor type 1. Else HDCP enable will be failed.\n\nPekka have completed the Weston DRM-backend review in\nhttps://gitlab.freedesktop.org/wayland/weston/merge_requests/48\nand the UAPI for HDCP 2.2 looks good.\n\nThe userspace is accepted in Weston.\n\nv2:\n  cp_content_type is replaced with content_protection_type [daniel]\n  check at atomic_set_property is removed [Maarten]\nv3:\n  %s/content_protection_type/hdcp_content_type [Pekka]\nv4:\n  property is created for the first requested connector and then reused.\n\t[Danvet]\nv5:\n  kernel doc nits addressed [Daniel]\n  Rebased as part of patch reordering.\nv6:\n  Kernel docs are modified [pekka]\nv7:\n  More details in Kernel docs. [pekka]\nv8:\n  Few more clarification into kernel doc of content type [pekka]\nv9:\n  Small fixes in coding style.\nv10:\n  Moving DRM_MODE_HDCP_CONTENT_TYPEx definition to drm_hdcp.h [pekka]\n\nSigned-off-by: Ramalingam C <ramalingam.c@intel.com>\nReviewed-by: Daniel Vetter <daniel.vetter@ffwll.ch>\nAcked-by: Pekka Paalanen <pekka.paalanen@collabora.com>\nAcked-by: Jani Nikula <jani.nikula@intel.com>\nLink: https://patchwork.freedesktop.org/patch/320957/?series=57232&rev=14",
  "author_name": "Ramalingam C",
  "author_email": "ramalingam.c@intel.com",
  "author_date": "Thu Aug 1 17:11:14 2019 +0530",
  "author_date_iso": "2019-08-01T17:11:14+05:30",
  "committer_name": "Ramalingam C",
  "committer_email": "ramalingam.c@intel.com",
  "committer_date": "Tue Aug 6 13:14:07 2019 +0530",
  "committer_date_iso": "2019-08-06T13:14:07+05:30",
  "files_changed": [
    "drivers/gpu/drm/drm_atomic_uapi.c",
    "drivers/gpu/drm/drm_connector.c",
    "drivers/gpu/drm/drm_hdcp.c",
    "drivers/gpu/drm/i915/display/intel_hdcp.c",
    "include/drm/drm_connector.h",
    "include/drm/drm_hdcp.h",
    "include/drm/drm_mode_config.h"
  ],
  "files_changed_count": 7,
  "stats": [
    {
      "file": "drivers/gpu/drm/drm_atomic_uapi.c",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/drm_connector.c",
      "insertions": 51,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/drm_hdcp.c",
      "insertions": 35,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/i915/display/intel_hdcp.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "include/drm/drm_connector.h",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "include/drm/drm_hdcp.h",
      "insertions": 6,
      "deletions": 1
    },
    {
      "file": "include/drm/drm_mode_config.h",
      "insertions": 6,
      "deletions": 0
    }
  ],
  "total_insertions": 112,
  "total_deletions": 3,
  "total_changes": 115,
  "parents": [
    "c1233578a2b9db920ecd9b647797967ac68dfe46"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.4",
    "v5.4-rc1",
    "v5.4-rc2",
    "v5.4-rc3",
    "v5.4-rc4",
    "v5.4-rc5",
    "v5.4-rc6",
    "v5.4-rc7",
    "v5.4-rc8",
    "v5.5"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpu/drm/drm_hdcp.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/drm/drm_hdcp.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/i915/display/intel_hdcp.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/drm_atomic_uapi.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "drivers/gpu/drm/drm_connector.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/drm/drm_connector.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "include/drm/drm_mode_config.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}