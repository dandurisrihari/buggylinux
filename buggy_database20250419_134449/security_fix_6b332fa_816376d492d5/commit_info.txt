Commit Hash: 6b332fa20f671265638d1d62496f9607c5f6e92f
Subject: drm/i915/guc: reset GuC and retry on firmware load failure


Security Keywords:
- authentication

Full commit message:
drm/i915/guc: reset GuC and retry on firmware load failure

Due to timing issues in the HW, some of the status bits required for GuC
authentication occasionally don't get set; when that happens, the GuC
cannot be initialized and we will be left with a wedged GPU. The W/A
suggested is to perform a soft reset of the GuC and attempt to reload
the F/W again for few times before giving up.

As the failure is dependent on timing, tests performed by triggering
manual full gpu reset (i915_wedged) showed that we could sometimes hit
this after several thousand iterations, but sometimes tests ran even
longer without any issues. Reset and reload mechanism proved helpful
when we indeed hit f/w load failure, so it is better to include this
to improve driver stability.

This change implements the following WAs,

	WaEnableuKernelHeaderValidFix:skl,bxt
	WaEnableGuCBootHashCheckNotSet:skl,bxt

Signed-off-by: Arun Siluvery <arun.siluvery@linux.intel.com>
Signed-off-by: Dave Gordon <david.s.gordon@intel.com>
Reviewed-by: Alex Dai <yu.dai@intel.com>
Signed-off-by: Tvrtko Ursulin <tvrtko.ursulin@intel.com>

Metadata:
Author: Arun Siluvery <arun.siluvery@linux.intel.com>
Author Date: Mon Apr 4 18:50:56 2016 +0100
Committer: Tvrtko Ursulin <tvrtko.ursulin@intel.com>
Commit Date: Tue Apr 5 13:29:24 2016 +0100

Files Changed: 5
Lines Added: 69
Lines Removed: 2
Total Changes: 71
