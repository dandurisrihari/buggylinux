Commit Hash: 9d5a05f86d2f4f81abcac6abc856c0d511a8607b
Subject: drm/i915/hdcp: Retry first read and writes to downstream


Security Keywords:
- authentication

Full commit message:
drm/i915/hdcp: Retry first read and writes to downstream

Retry the first read and write to downstream at least 10 times
with a 50ms delay if not hdcp2 capable(dock decides to stop advertising
hdcp2 capability for some reason). The reason being that
during suspend resume Dock usually keep the HDCP2 registers inaccesible
causing AUX error. This wouldn't be a big problem if the userspace
just kept retrying with some delay while it continues to play low
values content but most userpace applications end up throwing an error
when it receives one from KMD. This makes sure we give the dock
and the sink devices to complete its power cycle and then try HDCP
authentication.

--v2
-Add more details in comment [Jani]
-fix looping condition [Jani]
-optimize loop exit condition [Jani]

--v3
-Add comment explaining why the loop was added [Ankit]

Signed-off-by: Suraj Kandpal <suraj.kandpal@intel.com>
Reviewed-by: Ankit Nautiyal <ankit.k.nautiyal@intel.com>
Link: https://patchwork.freedesktop.org/patch/msgid/20240927060437.1422942-2-suraj.kandpal@intel.com

Metadata:
Author: Suraj Kandpal <suraj.kandpal@intel.com>
Author Date: Fri Sep 27 11:34:37 2024 +0530
Committer: Suraj Kandpal <suraj.kandpal@intel.com>
Commit Date: Mon Sep 30 09:36:50 2024 +0530

Files Changed: 1
Lines Added: 30
Lines Removed: 7
Total Changes: 37
