{
  "hash": "9d5a05f86d2f4f81abcac6abc856c0d511a8607b",
  "hash_short": "9d5a05f8",
  "subject": "drm/i915/hdcp: Retry first read and writes to downstream",
  "body": "Retry the first read and write to downstream at least 10 times\nwith a 50ms delay if not hdcp2 capable(dock decides to stop advertising\nhdcp2 capability for some reason). The reason being that\nduring suspend resume Dock usually keep the HDCP2 registers inaccesible\ncausing AUX error. This wouldn't be a big problem if the userspace\njust kept retrying with some delay while it continues to play low\nvalues content but most userpace applications end up throwing an error\nwhen it receives one from KMD. This makes sure we give the dock\nand the sink devices to complete its power cycle and then try HDCP\nauthentication.\n\n--v2\n-Add more details in comment [Jani]\n-fix looping condition [Jani]\n-optimize loop exit condition [Jani]\n\n--v3\n-Add comment explaining why the loop was added [Ankit]\n\nSigned-off-by: Suraj Kandpal <suraj.kandpal@intel.com>\nReviewed-by: Ankit Nautiyal <ankit.k.nautiyal@intel.com>\nLink: https://patchwork.freedesktop.org/patch/msgid/20240927060437.1422942-2-suraj.kandpal@intel.com",
  "full_message": "drm/i915/hdcp: Retry first read and writes to downstream\n\nRetry the first read and write to downstream at least 10 times\nwith a 50ms delay if not hdcp2 capable(dock decides to stop advertising\nhdcp2 capability for some reason). The reason being that\nduring suspend resume Dock usually keep the HDCP2 registers inaccesible\ncausing AUX error. This wouldn't be a big problem if the userspace\njust kept retrying with some delay while it continues to play low\nvalues content but most userpace applications end up throwing an error\nwhen it receives one from KMD. This makes sure we give the dock\nand the sink devices to complete its power cycle and then try HDCP\nauthentication.\n\n--v2\n-Add more details in comment [Jani]\n-fix looping condition [Jani]\n-optimize loop exit condition [Jani]\n\n--v3\n-Add comment explaining why the loop was added [Ankit]\n\nSigned-off-by: Suraj Kandpal <suraj.kandpal@intel.com>\nReviewed-by: Ankit Nautiyal <ankit.k.nautiyal@intel.com>\nLink: https://patchwork.freedesktop.org/patch/msgid/20240927060437.1422942-2-suraj.kandpal@intel.com",
  "author_name": "Suraj Kandpal",
  "author_email": "suraj.kandpal@intel.com",
  "author_date": "Fri Sep 27 11:34:37 2024 +0530",
  "author_date_iso": "2024-09-27T11:34:37+05:30",
  "committer_name": "Suraj Kandpal",
  "committer_email": "suraj.kandpal@intel.com",
  "committer_date": "Mon Sep 30 09:36:50 2024 +0530",
  "committer_date_iso": "2024-09-30T09:36:50+05:30",
  "files_changed": [
    "drivers/gpu/drm/i915/display/intel_hdcp.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/gpu/drm/i915/display/intel_hdcp.c",
      "insertions": 30,
      "deletions": 7
    }
  ],
  "total_insertions": 30,
  "total_deletions": 7,
  "total_changes": 37,
  "parents": [
    "9572bdfeb1280fd1e5beb28e34e226a6bc851280"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpu/drm/i915/display/intel_hdcp.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}