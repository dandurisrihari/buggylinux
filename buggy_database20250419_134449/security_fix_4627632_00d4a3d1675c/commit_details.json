{
  "hash": "462763212dd71c41f092b48eaa352bc1f5ed5d66",
  "hash_short": "46276321",
  "subject": "Revert: \"dm-verity: restart or panic on an I/O error\"",
  "body": "This reverts commit e6a3531dd542cb127c8de32ab1e54a48ae19962b.\n\nThe problem that the commit e6a3531dd542cb127c8de32ab1e54a48ae19962b\nfixes was reported as a security bug, but Google engineers working on\nAndroid and ChromeOS didn't want to change the default behavior, they\nwant to get -EIO rather than restarting the system, so I am reverting\nthat commit.\n\nNote also that calling machine_restart from the I/O handling code is\npotentially unsafe (the reboot notifiers may wait for the bio that\ntriggered the restart), but Android uses the reboot notifiers to store\nthe reboot reason into the PMU microcontroller, so machine_restart must\nbe used.\n\nSigned-off-by: Mikulas Patocka <mpatocka@redhat.com>\nCc: stable@vger.kernel.org\nFixes: e6a3531dd542 (\"dm-verity: restart or panic on an I/O error\")\nSuggested-by: Sami Tolvanen <samitolvanen@google.com>\nSuggested-by: Will Drewry <wad@chromium.org>",
  "full_message": "Revert: \"dm-verity: restart or panic on an I/O error\"\n\nThis reverts commit e6a3531dd542cb127c8de32ab1e54a48ae19962b.\n\nThe problem that the commit e6a3531dd542cb127c8de32ab1e54a48ae19962b\nfixes was reported as a security bug, but Google engineers working on\nAndroid and ChromeOS didn't want to change the default behavior, they\nwant to get -EIO rather than restarting the system, so I am reverting\nthat commit.\n\nNote also that calling machine_restart from the I/O handling code is\npotentially unsafe (the reboot notifiers may wait for the bio that\ntriggered the restart), but Android uses the reboot notifiers to store\nthe reboot reason into the PMU microcontroller, so machine_restart must\nbe used.\n\nSigned-off-by: Mikulas Patocka <mpatocka@redhat.com>\nCc: stable@vger.kernel.org\nFixes: e6a3531dd542 (\"dm-verity: restart or panic on an I/O error\")\nSuggested-by: Sami Tolvanen <samitolvanen@google.com>\nSuggested-by: Will Drewry <wad@chromium.org>",
  "author_name": "Mikulas Patocka",
  "author_email": "mpatocka@redhat.com",
  "author_date": "Wed Oct 2 15:56:18 2024 +0200",
  "author_date_iso": "2024-10-02T15:56:18+02:00",
  "committer_name": "Mikulas Patocka",
  "committer_email": "mpatocka@redhat.com",
  "committer_date": "Wed Oct 2 16:15:34 2024 +0200",
  "committer_date_iso": "2024-10-02T16:15:34+02:00",
  "files_changed": [
    "drivers/md/dm-verity-target.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/md/dm-verity-target.c",
      "insertions": 2,
      "deletions": 21
    }
  ],
  "total_insertions": 2,
  "total_deletions": 21,
  "total_changes": 23,
  "parents": [
    "9852d85ec9d492ebef56dc5f229416c925758edc"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "security bug"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/md/dm-verity-target.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}