Commit Hash: 462763212dd71c41f092b48eaa352bc1f5ed5d66
Subject: Revert: "dm-verity: restart or panic on an I/O error"


Security Keywords:
- security bug

Full commit message:
Revert: "dm-verity: restart or panic on an I/O error"

This reverts commit e6a3531dd542cb127c8de32ab1e54a48ae19962b.

The problem that the commit e6a3531dd542cb127c8de32ab1e54a48ae19962b
fixes was reported as a security bug, but Google engineers working on
Android and ChromeOS didn't want to change the default behavior, they
want to get -EIO rather than restarting the system, so I am reverting
that commit.

Note also that calling machine_restart from the I/O handling code is
potentially unsafe (the reboot notifiers may wait for the bio that
triggered the restart), but Android uses the reboot notifiers to store
the reboot reason into the PMU microcontroller, so machine_restart must
be used.

Signed-off-by: Mikulas Patocka <mpatocka@redhat.com>
Cc: stable@vger.kernel.org
Fixes: e6a3531dd542 ("dm-verity: restart or panic on an I/O error")
Suggested-by: Sami Tolvanen <samitolvanen@google.com>
Suggested-by: Will Drewry <wad@chromium.org>

Metadata:
Author: Mikulas Patocka <mpatocka@redhat.com>
Author Date: Wed Oct 2 15:56:18 2024 +0200
Committer: Mikulas Patocka <mpatocka@redhat.com>
Commit Date: Wed Oct 2 16:15:34 2024 +0200

Files Changed: 1
Lines Added: 2
Lines Removed: 21
Total Changes: 23
