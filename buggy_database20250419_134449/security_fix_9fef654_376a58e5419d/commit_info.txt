Commit Hash: 9fef65443388a66a2c19835e2848a6ecf162710b
Subject: mac80211: always update the PM state of a peer on MGMT / DATA frames


Security Keywords:
- Authentication

Full commit message:
mac80211: always update the PM state of a peer on MGMT / DATA frames

The 2016 version of the spec is more generic about when the
AP should update the power management state of the peer:
the AP shall update the state based on any management or
data frames. This means that even non-bufferable management
frames should be looked at to update to maintain the power
management state of the peer.

This can avoid problematic cases for example if a station
disappears while being asleep and then re-appears. The AP
would remember it as in power save, but the Authentication
frame couldn't be used to set the peer as awake again.
Note that this issues wasn't really critical since at some
point (after the association) we would have removed the
station and created another one with all the states cleared.

Signed-off-by: Emmanuel Grumbach <emmanuel.grumbach@intel.com>
Signed-off-by: Luca Coelho <luciano.coelho@intel.com>
Signed-off-by: Johannes Berg <johannes.berg@intel.com>

Metadata:
Author: Emmanuel Grumbach <emmanuel.grumbach@intel.com>
Author Date: Sun Oct 29 11:51:07 2017 +0200
Committer: Johannes Berg <johannes.berg@intel.com>
Commit Date: Mon Dec 11 12:18:43 2017 +0100

Files Changed: 1
Lines Added: 5
Lines Removed: 12
Total Changes: 17
