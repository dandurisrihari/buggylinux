{
  "hash": "8c74c4561f05f57fca2957b1d98676a0454df1ca",
  "hash_short": "8c74c456",
  "subject": "drm: rcar-du: Improve non-DPLL clock selection",
  "body": "DU channels not equipped with a DPLL use an SoC internal (provided by\nthe CPG) or external clock source combined with a DU internal divider to\ngenerate the desired output dot clock frequency.\n\nThe current clock selection procedure does not fully exploit the ability\nof external clock sources to generate the exact dot clock frequency by\nthemselves, but relies instead on tuning the internal DU clock divider\nonly, resulting in a less precise clock generation process.\n\nWhen possible, and desirable, ask the external clock source for the\nexact output dot clock frequency, and select the clock source that\nproduces the frequency closest to the desired output dot clock.\n\nThis patch specifically targets platforms (like Salvator-X[S] and ULCBs)\nwhere the DU's input dotclock.in is generated by the versaclock VC5\nclock source, which is capable of generating the exact rate the DU needs\nas pixel clock output.\n\nThis patch fixes higher resolution modes which requires an high pixel\nclock output currently not working on non-HDMI DU channel (such as\n1920x1080@60Hz on the VGA output).\n\nFixes: 1b30dbde8596 (\"drm: rcar-du: Add support for external pixel clock\")\nSigned-off-by: Jacopo Mondi <jacopo@jmondi.org>\n[Factor out code to a helper function]\nSigned-off-by: Laurent Pinchart <laurent.pinchart+renesas@ideasonboard.com>\nAcked-by: Jacopo Mondi <jacopo+renesas@jmondi.org>",
  "full_message": "drm: rcar-du: Improve non-DPLL clock selection\n\nDU channels not equipped with a DPLL use an SoC internal (provided by\nthe CPG) or external clock source combined with a DU internal divider to\ngenerate the desired output dot clock frequency.\n\nThe current clock selection procedure does not fully exploit the ability\nof external clock sources to generate the exact dot clock frequency by\nthemselves, but relies instead on tuning the internal DU clock divider\nonly, resulting in a less precise clock generation process.\n\nWhen possible, and desirable, ask the external clock source for the\nexact output dot clock frequency, and select the clock source that\nproduces the frequency closest to the desired output dot clock.\n\nThis patch specifically targets platforms (like Salvator-X[S] and ULCBs)\nwhere the DU's input dotclock.in is generated by the versaclock VC5\nclock source, which is capable of generating the exact rate the DU needs\nas pixel clock output.\n\nThis patch fixes higher resolution modes which requires an high pixel\nclock output currently not working on non-HDMI DU channel (such as\n1920x1080@60Hz on the VGA output).\n\nFixes: 1b30dbde8596 (\"drm: rcar-du: Add support for external pixel clock\")\nSigned-off-by: Jacopo Mondi <jacopo@jmondi.org>\n[Factor out code to a helper function]\nSigned-off-by: Laurent Pinchart <laurent.pinchart+renesas@ideasonboard.com>\nAcked-by: Jacopo Mondi <jacopo+renesas@jmondi.org>",
  "author_name": "Jacopo Mondi",
  "author_email": "jacopo@jmondi.org",
  "author_date": "Mon Aug 20 17:26:17 2018 +0200",
  "author_date_iso": "2018-08-20T17:26:17+02:00",
  "committer_name": "Laurent Pinchart",
  "committer_email": "laurent.pinchart+renesas@ideasonboard.com",
  "committer_date": "Sat Sep 15 17:28:26 2018 +0300",
  "committer_date_iso": "2018-09-15T17:28:26+03:00",
  "files_changed": [
    "drivers/gpu/drm/rcar-du/rcar_du_crtc.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "drivers/gpu/drm/rcar-du/rcar_du_crtc.c",
      "insertions": 54,
      "deletions": 31
    }
  ],
  "total_insertions": 54,
  "total_deletions": 31,
  "total_changes": 85,
  "parents": [
    "7281e6c6a5bdbde9cae6eb3c6d2bf2706b94807d"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v4.20",
    "v4.20-rc1",
    "v4.20-rc2",
    "v4.20-rc3",
    "v4.20-rc4",
    "v4.20-rc5",
    "v4.20-rc6",
    "v4.20-rc7",
    "v5.0",
    "v5.0-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "exploit"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpu/drm/rcar-du/rcar_du_crtc.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}