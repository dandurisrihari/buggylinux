{
  "hash": "475c8749d9542392d7e0855097d29ed14877ad0a",
  "hash_short": "475c8749",
  "subject": "powerpc/book3s64/kuap: Improve error reporting with KUAP",
  "body": "This partially reverts commit eb232b162446 (\"powerpc/book3s64/kuap: Improve\nerror reporting with KUAP\") and update the fault handler to print\n\n[   55.022514] Kernel attempted to access user page (7e6725b70000) - exploit attempt? (uid: 0)\n[   55.022528] BUG: Unable to handle kernel data access on read at 0x7e6725b70000\n[   55.022533] Faulting instruction address: 0xc000000000e8b9bc\n[   55.022540] Oops: Kernel access of bad area, sig: 11 [#1]\n....\n\nwhen the kernel access userspace address without unlocking AMR.\n\nbad_kuap_fault() is added as part of commit 5e5be3aed230 (\"powerpc/mm: Detect\nbad KUAP faults\") to catch userspace access incorrectly blocked by AMR. Hence\nretain the full stack dump there even with hash translation. Also, add a comment\nexplaining the difference between hash and radix.\n\nSigned-off-by: Aneesh Kumar K.V <aneesh.kumar@linux.ibm.com>\nSigned-off-by: Michael Ellerman <mpe@ellerman.id.au>\nLink: https://lore.kernel.org/r/20201208031539.84878-1-aneesh.kumar@linux.ibm.com",
  "full_message": "powerpc/book3s64/kuap: Improve error reporting with KUAP\n\nThis partially reverts commit eb232b162446 (\"powerpc/book3s64/kuap: Improve\nerror reporting with KUAP\") and update the fault handler to print\n\n[   55.022514] Kernel attempted to access user page (7e6725b70000) - exploit attempt? (uid: 0)\n[   55.022528] BUG: Unable to handle kernel data access on read at 0x7e6725b70000\n[   55.022533] Faulting instruction address: 0xc000000000e8b9bc\n[   55.022540] Oops: Kernel access of bad area, sig: 11 [#1]\n....\n\nwhen the kernel access userspace address without unlocking AMR.\n\nbad_kuap_fault() is added as part of commit 5e5be3aed230 (\"powerpc/mm: Detect\nbad KUAP faults\") to catch userspace access incorrectly blocked by AMR. Hence\nretain the full stack dump there even with hash translation. Also, add a comment\nexplaining the difference between hash and radix.\n\nSigned-off-by: Aneesh Kumar K.V <aneesh.kumar@linux.ibm.com>\nSigned-off-by: Michael Ellerman <mpe@ellerman.id.au>\nLink: https://lore.kernel.org/r/20201208031539.84878-1-aneesh.kumar@linux.ibm.com",
  "author_name": "Aneesh Kumar K.V",
  "author_email": "aneesh.kumar@linux.ibm.com",
  "author_date": "Tue Dec 8 08:45:39 2020 +0530",
  "author_date_iso": "2020-12-08T08:45:39+05:30",
  "committer_name": "Michael Ellerman",
  "committer_email": "mpe@ellerman.id.au",
  "committer_date": "Tue Dec 8 21:40:54 2020 +1100",
  "committer_date_iso": "2020-12-08T21:40:54+11:00",
  "files_changed": [
    "arch/powerpc/include/asm/book3s/32/kup.h",
    "arch/powerpc/include/asm/book3s/64/kup.h",
    "arch/powerpc/include/asm/kup.h",
    "arch/powerpc/include/asm/nohash/32/kup-8xx.h",
    "arch/powerpc/mm/fault.c"
  ],
  "files_changed_count": 5,
  "stats": [
    {
      "file": "arch/powerpc/include/asm/book3s/32/kup.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/powerpc/include/asm/book3s/64/kup.h",
      "insertions": 17,
      "deletions": 17
    },
    {
      "file": "arch/powerpc/include/asm/kup.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/powerpc/include/asm/nohash/32/kup-8xx.h",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "arch/powerpc/mm/fault.c",
      "insertions": 2,
      "deletions": 2
    }
  ],
  "total_insertions": 25,
  "total_deletions": 25,
  "total_changes": 50,
  "parents": [
    "250ad7a45b1e58d580decfb935fc063c4cf56f91"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "exploit"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "arch/powerpc/include/asm/book3s/32/kup.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/powerpc/include/asm/book3s/64/kup.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/powerpc/include/asm/kup.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/powerpc/include/asm/nohash/32/kup-8xx.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "arch/powerpc/mm/fault.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}