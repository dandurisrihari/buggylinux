Commit Hash: 3a8b0677fc6180a467e26cc32ce6b0c09a32f9bb
Subject: KVM: VMX: Do not BUG() on out-of-bounds guest IRQ

CVE Identifiers:
- CVE-2017-1000252

Full commit message:
KVM: VMX: Do not BUG() on out-of-bounds guest IRQ

The value of the guest_irq argument to vmx_update_pi_irte() is
ultimately coming from a KVM_IRQFD API call. Do not BUG() in
vmx_update_pi_irte() if the value is out-of bounds. (Especially,
since KVM as a whole seems to hang after that.)

Instead, print a message only once if we find that we don't have a
route for a certain IRQ (which can be out-of-bounds or within the
array).

This fixes CVE-2017-1000252.

Fixes: efc644048ecde54 ("KVM: x86: Update IRTE for posted-interrupts")
Signed-off-by: Jan H. Schönherr <jschoenh@amazon.de>
Signed-off-by: Paolo Bonzini <pbonzini@redhat.com>

Metadata:
Author: Jan H. Schönherr <jschoenh@amazon.de>
Author Date: Thu Sep 7 19:02:30 2017 +0100
Committer: Paolo Bonzini <pbonzini@redhat.com>
Commit Date: Fri Sep 15 16:56:43 2017 +0200

Files Changed: 1
Lines Added: 7
Lines Removed: 2
Total Changes: 9
