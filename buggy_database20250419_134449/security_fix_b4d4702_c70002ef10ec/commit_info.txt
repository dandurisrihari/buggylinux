Commit Hash: b4d4702f30e09ed1311e560334eb25fc2015c8ce
Subject: tools/testing/nvdimm: improve emulation of smart injection


Security Keywords:
- injection

Full commit message:
tools/testing/nvdimm: improve emulation of smart injection

The emulation for smart injection commands for nfit neglected to check
the smart field validity flags before injecting to that field. This is
required as a way to distinguish un-injection vs. leave-alone.

The emulation was also missing support for un-injection entirely. To add
this support, first, fix the above flags check. Second, use the
'enable' field in the injection command to determine injection vs
un-injection. Third, move the smart initialization struct to be a global
static structure for the nfit_test module. Reference this to get the
smart 'defaults' when un-injecting a smart field.

Signed-off-by: Vishal Verma <vishal.l.verma@intel.com>
Signed-off-by: Dave Jiang <dave.jiang@intel.com>

Metadata:
Author: Vishal Verma <vishal.l.verma@intel.com>
Author Date: Mon Jul 30 16:11:34 2018 -0600
Committer: Dave Jiang <dave.jiang@intel.com>
Commit Date: Tue Jul 31 17:05:19 2018 -0700

Files Changed: 1
Lines Added: 47
Lines Removed: 31
Total Changes: 78
