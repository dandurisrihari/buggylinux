{
  "hash": "bd012f3a5b02849d9acc85e2b8b71293ce072263",
  "hash_short": "bd012f3a",
  "subject": "Merge tag 'acpi-6.8-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm",
  "body": "Pull ACPI updates from Rafael Wysocki:\n \"From the new features standpoint, the most significant change here is\n  the addition of CSI-2 and MIPI DisCo for Imaging support to the ACPI\n  device enumeration code that will allow MIPI cameras to be enumerated\n  through the platform firmware on systems using ACPI.\n\n  Also significant is the switch-over to threaded interrupt handlers for\n  the ACPI SCI and the dedicated EC interrupt (on systems where the\n  former is not used) which essentially allows all ACPI code to run with\n  local interrupts enabled. That should improve responsiveness\n  significantly on systems where multiple GPEs are enabled and the\n  handling of one SCI involves many I/O address space accesses which\n  previously had to be carried out in one go with disabled interrupts on\n  the local CPU.\n\n  Apart from the above, the ACPI thermal zone driver will use the\n  Thermal fast Sampling Period (_TFP) object if available, which should\n  allow temperature changes to be followed more accurately on some\n  systems, the ACPI Notify () handlers can run on all CPUs (not just on\n  CPU0), which should generally speed up the processing of events\n  signaled through the ACPI SCI, and the ACPI power button driver will\n  trigger wakeup key events via the input subsystem (on systems where it\n  is a system wakeup device)\n\n  In addition to that, there are the usual bunch of fixes and cleanups.\n\n  Specifics:\n\n   - Add CSI-2 and DisCo for Imaging support to the ACPI device\n     enumeration code (Sakari Ailus, Rafael J. Wysocki)\n\n   - Adjust the cpufreq thermal reduction algorithm in the ACPI\n     processor driver for Tegra241 (Srikar Srimath Tirumala, Arnd\n     Bergmann)\n\n   - Make acpi_proc_quirk_mwait_check() x86-specific (Rafael J. Wysocki)\n\n   - Switch over ACPI to using a threaded interrupt handler for the SCI\n     (Rafael J. Wysocki)\n\n   - Allow ACPI Notify () handlers to run on all CPUs and clean up the\n     ACPI interface for deferred events processing (Rafael J. Wysocki)\n\n   - Switch over the ACPI EC driver to using a threaded handler for the\n     dedicated IRQ on systems without the EC GPE (Rafael J. Wysocki)\n\n   - Adjust code using ACPICA spinlocks and the ACPI EC driver spinlock\n     to keep local interrupts on (Rafael J. Wysocki)\n\n   - Adjust the USB4 _OSC handshake to correctly handle cases in which\n     certain types of OS control are denied by the platform (Mika\n     Westerberg)\n\n   - Correct and clean up the generic function for parsing ACPI\n     data-only tables with array structure (Yuntao Wang)\n\n   - Modify acpi_dev_uid_match() to support different types of its\n     second argument and adjust its users accordingly (Raag Jadav)\n\n   - Clean up code related to acpi_evaluate_reference() and ACPI device\n     lists (Rafael J. Wysocki)\n\n   - Use generic ACPI helpers for evaluating trip point temperature\n     objects in the ACPI thermal zone driver (Rafael J. Wysockii, Arnd\n     Bergmann)\n\n   - Add Thermal fast Sampling Period (_TFP) support to the ACPI thermal\n     zone driver (Jeff Brasen)\n\n   - Modify the ACPI LPIT table handling code to avoid u32\n     multiplication overflows in state residency computations (Nikita\n     Kiryushin)\n\n   - Drop an unused helper function from the ACPI backlight (video)\n     driver and add a clarifying comment to it (Hans de Goede)\n\n   - Update the ACPI backlight driver to avoid using uninitialized\n     memory in some cases (Nikita Kiryushin)\n\n   - Add ACPI backlight quirk for the Colorful X15 AT 23 laptop (Yuluo\n     Qiu)\n\n   - Add support for vendor-defined error types to the ACPI APEI error\n     injection code (Avadhut Naik)\n\n   - Adjust APEI to properly set MF_ACTION_REQUIRED on synchronous\n     memory failure events, so they are handled differently from the\n     asynchronous ones (Shuai Xue)\n\n   - Fix NULL pointer dereference check in the ACPI extlog driver\n     (Prarit Bhargava)\n\n   - Adjust the ACPI extlog driver to clear the Extended Error Log\n     status when RAS_CEC handled the error (Tony Luck)\n\n   - Add IRQ override quirks for some Infinity laptops and for TongFang\n     GMxXGxx (David McFarland, Hans de Goede)\n\n   - Clean up the ACPI NUMA code and fix it to ensure that fake_pxm is\n     not the same as one of the real pxm values (Yuntao Wang)\n\n   - Fix the fractional clock divider flags in the ACPI LPSS (Intel SoC)\n     driver so as to prevent miscalculation of the values in the clock\n     divider (Andy Shevchenko)\n\n   - Adjust comments in the ACPI watchdog driver to prevent kernel-doc\n     from complaining during documentation builds (Randy Dunlap)\n\n   - Make the ACPI button driver send wakeup key events to user space in\n     addition to power button events on systems that can be woken up by\n     the power button (Ken Xue)\n\n   - Adjust pnpacpi_parse_allocated_vendor() to use memcpy() on a full\n     structure field (Dmitry Antipov)\"\n\n* tag 'acpi-6.8-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm: (56 commits)\n  ACPI: resource: Add Infinity laptops to irq1_edge_low_force_override\n  ACPI: button: trigger wakeup key events\n  ACPI: resource: Add another DMI match for the TongFang GMxXGxx\n  ACPI: EC: Use a spin lock without disabing interrupts\n  ACPI: EC: Use a threaded handler for dedicated IRQ\n  ACPI: OSL: Use spin locks without disabling interrupts\n  ACPI: APEI: set memory failure flags as MF_ACTION_REQUIRED on synchronous events\n  ACPI: utils: Introduce helper for _DEP list lookup\n  ACPI: utils: Fix white space in struct acpi_handle_list definition\n  ACPI: utils: Refine acpi_handle_list_equal() slightly\n  ACPI: utils: Return bool from acpi_evaluate_reference()\n  ACPI: utils: Rearrange in acpi_evaluate_reference()\n  ACPI: arm64: export acpi_arch_thermal_cpufreq_pctg()\n  ACPI: extlog: Clear Extended Error Log status when RAS_CEC handled the error\n  ACPI: LPSS: Fix the fractional clock divider flags\n  ACPI: NUMA: Fix the logic of getting the fake_pxm value\n  ACPI: NUMA: Optimize the check for the availability of node values\n  ACPI: NUMA: Remove unnecessary check in acpi_parse_gi_affinity()\n  ACPI: watchdog: fix kernel-doc warnings\n  ACPI: extlog: fix NULL pointer dereference check\n  ...",
  "full_message": "Merge tag 'acpi-6.8-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm\n\nPull ACPI updates from Rafael Wysocki:\n \"From the new features standpoint, the most significant change here is\n  the addition of CSI-2 and MIPI DisCo for Imaging support to the ACPI\n  device enumeration code that will allow MIPI cameras to be enumerated\n  through the platform firmware on systems using ACPI.\n\n  Also significant is the switch-over to threaded interrupt handlers for\n  the ACPI SCI and the dedicated EC interrupt (on systems where the\n  former is not used) which essentially allows all ACPI code to run with\n  local interrupts enabled. That should improve responsiveness\n  significantly on systems where multiple GPEs are enabled and the\n  handling of one SCI involves many I/O address space accesses which\n  previously had to be carried out in one go with disabled interrupts on\n  the local CPU.\n\n  Apart from the above, the ACPI thermal zone driver will use the\n  Thermal fast Sampling Period (_TFP) object if available, which should\n  allow temperature changes to be followed more accurately on some\n  systems, the ACPI Notify () handlers can run on all CPUs (not just on\n  CPU0), which should generally speed up the processing of events\n  signaled through the ACPI SCI, and the ACPI power button driver will\n  trigger wakeup key events via the input subsystem (on systems where it\n  is a system wakeup device)\n\n  In addition to that, there are the usual bunch of fixes and cleanups.\n\n  Specifics:\n\n   - Add CSI-2 and DisCo for Imaging support to the ACPI device\n     enumeration code (Sakari Ailus, Rafael J. Wysocki)\n\n   - Adjust the cpufreq thermal reduction algorithm in the ACPI\n     processor driver for Tegra241 (Srikar Srimath Tirumala, Arnd\n     Bergmann)\n\n   - Make acpi_proc_quirk_mwait_check() x86-specific (Rafael J. Wysocki)\n\n   - Switch over ACPI to using a threaded interrupt handler for the SCI\n     (Rafael J. Wysocki)\n\n   - Allow ACPI Notify () handlers to run on all CPUs and clean up the\n     ACPI interface for deferred events processing (Rafael J. Wysocki)\n\n   - Switch over the ACPI EC driver to using a threaded handler for the\n     dedicated IRQ on systems without the EC GPE (Rafael J. Wysocki)\n\n   - Adjust code using ACPICA spinlocks and the ACPI EC driver spinlock\n     to keep local interrupts on (Rafael J. Wysocki)\n\n   - Adjust the USB4 _OSC handshake to correctly handle cases in which\n     certain types of OS control are denied by the platform (Mika\n     Westerberg)\n\n   - Correct and clean up the generic function for parsing ACPI\n     data-only tables with array structure (Yuntao Wang)\n\n   - Modify acpi_dev_uid_match() to support different types of its\n     second argument and adjust its users accordingly (Raag Jadav)\n\n   - Clean up code related to acpi_evaluate_reference() and ACPI device\n     lists (Rafael J. Wysocki)\n\n   - Use generic ACPI helpers for evaluating trip point temperature\n     objects in the ACPI thermal zone driver (Rafael J. Wysockii, Arnd\n     Bergmann)\n\n   - Add Thermal fast Sampling Period (_TFP) support to the ACPI thermal\n     zone driver (Jeff Brasen)\n\n   - Modify the ACPI LPIT table handling code to avoid u32\n     multiplication overflows in state residency computations (Nikita\n     Kiryushin)\n\n   - Drop an unused helper function from the ACPI backlight (video)\n     driver and add a clarifying comment to it (Hans de Goede)\n\n   - Update the ACPI backlight driver to avoid using uninitialized\n     memory in some cases (Nikita Kiryushin)\n\n   - Add ACPI backlight quirk for the Colorful X15 AT 23 laptop (Yuluo\n     Qiu)\n\n   - Add support for vendor-defined error types to the ACPI APEI error\n     injection code (Avadhut Naik)\n\n   - Adjust APEI to properly set MF_ACTION_REQUIRED on synchronous\n     memory failure events, so they are handled differently from the\n     asynchronous ones (Shuai Xue)\n\n   - Fix NULL pointer dereference check in the ACPI extlog driver\n     (Prarit Bhargava)\n\n   - Adjust the ACPI extlog driver to clear the Extended Error Log\n     status when RAS_CEC handled the error (Tony Luck)\n\n   - Add IRQ override quirks for some Infinity laptops and for TongFang\n     GMxXGxx (David McFarland, Hans de Goede)\n\n   - Clean up the ACPI NUMA code and fix it to ensure that fake_pxm is\n     not the same as one of the real pxm values (Yuntao Wang)\n\n   - Fix the fractional clock divider flags in the ACPI LPSS (Intel SoC)\n     driver so as to prevent miscalculation of the values in the clock\n     divider (Andy Shevchenko)\n\n   - Adjust comments in the ACPI watchdog driver to prevent kernel-doc\n     from complaining during documentation builds (Randy Dunlap)\n\n   - Make the ACPI button driver send wakeup key events to user space in\n     addition to power button events on systems that can be woken up by\n     the power button (Ken Xue)\n\n   - Adjust pnpacpi_parse_allocated_vendor() to use memcpy() on a full\n     structure field (Dmitry Antipov)\"\n\n* tag 'acpi-6.8-rc1' of git://git.kernel.org/pub/scm/linux/kernel/git/rafael/linux-pm: (56 commits)\n  ACPI: resource: Add Infinity laptops to irq1_edge_low_force_override\n  ACPI: button: trigger wakeup key events\n  ACPI: resource: Add another DMI match for the TongFang GMxXGxx\n  ACPI: EC: Use a spin lock without disabing interrupts\n  ACPI: EC: Use a threaded handler for dedicated IRQ\n  ACPI: OSL: Use spin locks without disabling interrupts\n  ACPI: APEI: set memory failure flags as MF_ACTION_REQUIRED on synchronous events\n  ACPI: utils: Introduce helper for _DEP list lookup\n  ACPI: utils: Fix white space in struct acpi_handle_list definition\n  ACPI: utils: Refine acpi_handle_list_equal() slightly\n  ACPI: utils: Return bool from acpi_evaluate_reference()\n  ACPI: utils: Rearrange in acpi_evaluate_reference()\n  ACPI: arm64: export acpi_arch_thermal_cpufreq_pctg()\n  ACPI: extlog: Clear Extended Error Log status when RAS_CEC handled the error\n  ACPI: LPSS: Fix the fractional clock divider flags\n  ACPI: NUMA: Fix the logic of getting the fake_pxm value\n  ACPI: NUMA: Optimize the check for the availability of node values\n  ACPI: NUMA: Remove unnecessary check in acpi_parse_gi_affinity()\n  ACPI: watchdog: fix kernel-doc warnings\n  ACPI: extlog: fix NULL pointer dereference check\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Tue Jan 9 16:12:44 2024 -0800",
  "author_date_iso": "2024-01-09T16:12:44-08:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Tue Jan 9 16:12:44 2024 -0800",
  "committer_date_iso": "2024-01-09T16:12:44-08:00",
  "files_changed": [],
  "files_changed_count": 0,
  "stats": [
    {
      "file": "drivers/acpi/Kconfig",
      "insertions": 5,
      "deletions": 0
    },
    {
      "file": "drivers/acpi/Makefile",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "drivers/acpi/acpi_extlog.c",
      "insertions": 9,
      "deletions": 3
    },
    {
      "file": "drivers/acpi/acpi_lpit.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/acpi/acpi_lpss.c",
      "insertions": 8,
      "deletions": 43
    },
    {
      "file": "drivers/acpi/acpi_video.c",
      "insertions": 16,
      "deletions": 61
    },
    {
      "file": "drivers/acpi/acpi_watchdog.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/acpi/apei/einj.c",
      "insertions": 48,
      "deletions": 23
    },
    {
      "file": "drivers/acpi/apei/ghes.c",
      "insertions": 23,
      "deletions": 6
    },
    {
      "file": "drivers/acpi/arm64/Makefile",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/acpi/arm64/thermal_cpufreq.c",
      "insertions": 22,
      "deletions": 0
    },
    {
      "file": "drivers/acpi/bus.c",
      "insertions": 29,
      "deletions": 3
    },
    {
      "file": "drivers/acpi/button.c",
      "insertions": 10,
      "deletions": 0
    },
    {
      "file": "drivers/acpi/ec.c",
      "insertions": 48,
      "deletions": 68
    },
    {
      "file": "drivers/acpi/internal.h",
      "insertions": 27,
      "deletions": 1
    },
    {
      "file": "drivers/acpi/mipi-disco-img.c",
      "insertions": 725,
      "deletions": 0
    },
    {
      "file": "drivers/acpi/numa/srat.c",
      "insertions": 5,
      "deletions": 5
    },
    {
      "file": "drivers/acpi/osl.c",
      "insertions": 34,
      "deletions": 43
    },
    {
      "file": "drivers/acpi/processor_thermal.c",
      "insertions": 40,
      "deletions": 9
    },
    {
      "file": "drivers/acpi/property.c",
      "insertions": 82,
      "deletions": 20
    },
    {
      "file": "drivers/acpi/resource.c",
      "insertions": 19,
      "deletions": 0
    },
    {
      "file": "drivers/acpi/scan.c",
      "insertions": 49,
      "deletions": 12
    },
    {
      "file": "drivers/acpi/thermal.c",
      "insertions": 35,
      "deletions": 38
    },
    {
      "file": "drivers/{thermal/thermal_acpi.c => acpi/thermal_lib.c}",
      "insertions": 65,
      "deletions": 15
    },
    {
      "file": "drivers/acpi/utils.c",
      "insertions": 66,
      "deletions": 98
    },
    {
      "file": "drivers/firmware/efi/dev-path-parser.c",
      "insertions": 2,
      "deletions": 5
    },
    {
      "file": "drivers/perf/arm_cspmu/arm_cspmu.c",
      "insertions": 1,
      "deletions": 3
    },
    {
      "file": "drivers/platform/chrome/cros_ec_debugfs.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/platform/surface/surface_acpi_notify.c",
      "insertions": 1,
      "deletions": 29
    },
    {
      "file": "drivers/pnp/pnpacpi/rsparser.c",
      "insertions": 6,
      "deletions": 6
    },
    {
      "file": "drivers/thermal/Kconfig",
      "insertions": 0,
      "deletions": 4
    },
    {
      "file": "drivers/thermal/Makefile",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "drivers/thermal/intel/Kconfig",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/thermal/intel/int340x_thermal/Kconfig",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "fs/debugfs/file.c",
      "insertions": 23,
      "deletions": 5
    },
    {
      "file": "include/acpi/acpi_bus.h",
      "insertions": 161,
      "deletions": 8
    },
    {
      "file": "include/acpi/video.h",
      "insertions": 9,
      "deletions": 0
    },
    {
      "file": "include/linux/acpi.h",
      "insertions": 11,
      "deletions": 11
    },
    {
      "file": "include/linux/property.h",
      "insertions": 7,
      "deletions": 0
    },
    {
      "file": "include/linux/thermal.h",
      "insertions": 0,
      "deletions": 7
    },
    {
      "file": "lib/fw_table.c",
      "insertions": 9,
      "deletions": 21
    }
  ],
  "total_insertions": 1603,
  "total_deletions": 554,
  "total_changes": 2157,
  "parents": [
    "35f11a3710cdcbbc5090d14017a6295454e0cc73",
    "e46201308a1e568059328e200282c8a62faa2f19"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "injection"
    ]
  },
  "fix_type": "security",
  "file_results": []
}