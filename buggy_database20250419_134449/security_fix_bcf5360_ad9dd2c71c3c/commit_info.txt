Commit Hash: bcf536072f7475c65f21fd1681e94f99c04f9d15
Subject: scsi: qla2xxx: edif: Fix slow session teardown


Security Keywords:
- authentication

Full commit message:
scsi: qla2xxx: edif: Fix slow session teardown

User experience slow recovery when target device went through a stop/start
of the authentication application (app_stop/app_start).

Between the period of app_stop and app_start on the target device, target
device choose to send ELS Reject for any receive AUTH ELS command.  At this
time, authentication application does not do ELS reject if it encounters
error.

Therefore, AUTH ELS reject signify authentication application is not
running. If driver passes up the AUTH ELS Reject to the authentication
application, then it would result in authentication application
retrying/resending the same AUTH ELS command again + delay.

As a work around, driver should trigger a session tear down where it tells
the local authentication application to also tear down.  At the next
relogin, both sides are then synchronized.

Link: https://lore.kernel.org/r/20220608115849.16693-10-njavali@marvell.com
Reviewed-by: Himanshu Madhani <himanshu.madhani@oracle.com>
Signed-off-by: Quinn Tran <qutran@marvell.com>
Signed-off-by: Nilesh Javali <njavali@marvell.com>
Signed-off-by: Martin K. Petersen <martin.petersen@oracle.com>

Metadata:
Author: Quinn Tran <qutran@marvell.com>
Author Date: Wed Jun 8 04:58:48 2022 -0700
Committer: Martin K. Petersen <martin.petersen@oracle.com>
Commit Date: Fri Jun 10 13:04:05 2022 -0400

Files Changed: 1
Lines Added: 20
Lines Removed: 14
Total Changes: 34
