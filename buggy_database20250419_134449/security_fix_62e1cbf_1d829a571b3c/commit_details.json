{
  "hash": "62e1cbfc5d795381a0f237ae7ee229a92d51cf9e",
  "hash_short": "62e1cbfc",
  "subject": "fortify: Short-circuit known-safe calls to strscpy()",
  "body": "Replacing compile-time safe calls of strcpy()-related functions with\nstrscpy() was always calling the full strscpy() logic when a builtin\nwould be better. For example:\n\n\tchar buf[16];\n\tstrcpy(buf, \"yes\");\n\nwould reduce to __builtin_memcpy(buf, \"yes\", 4), but not if it was:\n\n\tstrscpy(buf, yes, sizeof(buf));\n\nFix this by checking if all sizes are known at compile-time.\n\nCc: linux-hardening@vger.kernel.org\nTested-by: Nathan Chancellor <nathan@kernel.org>\nSigned-off-by: Kees Cook <keescook@chromium.org>",
  "full_message": "fortify: Short-circuit known-safe calls to strscpy()\n\nReplacing compile-time safe calls of strcpy()-related functions with\nstrscpy() was always calling the full strscpy() logic when a builtin\nwould be better. For example:\n\n\tchar buf[16];\n\tstrcpy(buf, \"yes\");\n\nwould reduce to __builtin_memcpy(buf, \"yes\", 4), but not if it was:\n\n\tstrscpy(buf, yes, sizeof(buf));\n\nFix this by checking if all sizes are known at compile-time.\n\nCc: linux-hardening@vger.kernel.org\nTested-by: Nathan Chancellor <nathan@kernel.org>\nSigned-off-by: Kees Cook <keescook@chromium.org>",
  "author_name": "Kees Cook",
  "author_email": "keescook@chromium.org",
  "author_date": "Sun Oct 2 09:17:03 2022 -0700",
  "author_date_iso": "2022-10-02T09:17:03-07:00",
  "committer_name": "Kees Cook",
  "committer_email": "keescook@chromium.org",
  "committer_date": "Tue Nov 1 10:04:52 2022 -0700",
  "committer_date_iso": "2022-11-01T10:04:52-07:00",
  "files_changed": [
    "include/linux/fortify-string.h",
    "lib/strscpy_kunit.c"
  ],
  "files_changed_count": 2,
  "stats": [
    {
      "file": "include/linux/fortify-string.h",
      "insertions": 10,
      "deletions": 0
    },
    {
      "file": "lib/strscpy_kunit.c",
      "insertions": 13,
      "deletions": 0
    }
  ],
  "total_insertions": 23,
  "total_deletions": 0,
  "total_changes": 23,
  "parents": [
    "41eefc46a3a4682976afb5f8c4b9734ed6bfd406"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "hardening"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "include/linux/fortify-string.h",
      "pre_version": false,
      "post_version": true,
      "patch": true
    },
    {
      "file": "lib/strscpy_kunit.c",
      "pre_version": true,
      "post_version": true,
      "patch": true
    }
  ]
}