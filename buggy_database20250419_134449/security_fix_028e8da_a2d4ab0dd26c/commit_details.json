{
  "hash": "028e8da0723a6f6a00d9d1e3dae9ad448a28987e",
  "hash_short": "028e8da0",
  "subject": "mac80211: fix managed mode channel flags handling",
  "body": "If ieee80211_prep_channel() decides that HT should be\ndisabled (because the HT IEs from the AP were invalid)\nit will set the IEEE80211_STA_DISABLE_HT to not send\nHT capabilities to the AP when associating. If this\nhappens during authentication, the flag will be lost\nand we send HT frames, even if the channel config was\nset up for non-HT. This can lead to issues.\n\nFix this by always resetting the ifmgd flags to zero\nwhen the channel context is released so that the flag\nresetting in ieee80211_mgd_assoc() isn't necessary.\n\nTo make the code a bit easier move the call to release\nthe channel in ieee80211_set_disassoc() to the end of\nthe function together with the flag resetting (which\nneeds to be at the end to avoid timers setting flags.)\n\nSigned-off-by: Johannes Berg <johannes.berg@intel.com>",
  "full_message": "mac80211: fix managed mode channel flags handling\n\nIf ieee80211_prep_channel() decides that HT should be\ndisabled (because the HT IEs from the AP were invalid)\nit will set the IEEE80211_STA_DISABLE_HT to not send\nHT capabilities to the AP when associating. If this\nhappens during authentication, the flag will be lost\nand we send HT frames, even if the channel config was\nset up for non-HT. This can lead to issues.\n\nFix this by always resetting the ifmgd flags to zero\nwhen the channel context is released so that the flag\nresetting in ieee80211_mgd_assoc() isn't necessary.\n\nTo make the code a bit easier move the call to release\nthe channel in ieee80211_set_disassoc() to the end of\nthe function together with the flag resetting (which\nneeds to be at the end to avoid timers setting flags.)\n\nSigned-off-by: Johannes Berg <johannes.berg@intel.com>",
  "author_name": "Johannes Berg",
  "author_email": "johannes.berg@intel.com",
  "author_date": "Mon Nov 26 11:57:41 2012 +0100",
  "author_date_iso": "2012-11-26T11:57:41+01:00",
  "committer_name": "Johannes Berg",
  "committer_email": "johannes.berg@intel.com",
  "committer_date": "Mon Nov 26 12:37:38 2012 +0100",
  "committer_date_iso": "2012-11-26T12:37:38+01:00",
  "files_changed": [
    "net/mac80211/mlme.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "net/mac80211/mlme.c",
      "insertions": 5,
      "deletions": 9
    }
  ],
  "total_insertions": 5,
  "total_deletions": 9,
  "total_changes": 14,
  "parents": [
    "453e66f247f4ecb98cfef653164d428d087187d8"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v3.10",
    "v3.10-rc1",
    "v3.10-rc2",
    "v3.10-rc3",
    "v3.10-rc4",
    "v3.10-rc5",
    "v3.10-rc6",
    "v3.10-rc7",
    "v3.11",
    "v3.11-rc1"
  ],
  "is_merge": false,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "net/mac80211/mlme.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}