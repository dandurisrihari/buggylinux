Commit Hash: 2af81d6718f5ec92b1d787e0fe79b0d3b6f78601
Subject: mac80211: only roll back station states for WDS when suspending


Security Keywords:
- authentication

Full commit message:
mac80211: only roll back station states for WDS when suspending

In normal cases (i.e. when we are fully associated), cfg80211 takes
care of removing all the stations before calling suspend in mac80211.

But in the corner case when we suspend during authentication or
association, mac80211 needs to roll back the station states.  But we
shouldn't roll back the station states in the suspend function,
because this is taken care of in other parts of the code, except for
WDS interfaces.  For AP types of interfaces, cfg80211 takes care of
disconnecting all stations before calling the driver's suspend code.
For station interfaces, this is done in the quiesce code.

For WDS interfaces we still need to do it here, so move the code into
a new switch case for WDS.

Cc: stable@kernel.org [3.15+]
Signed-off-by: Luciano Coelho <luciano.coelho@intel.com>
Signed-off-by: Johannes Berg <johannes.berg@intel.com>

Metadata:
Author: Luciano Coelho <luciano.coelho@intel.com>
Author Date: Wed Jan 21 22:19:34 2015 +0200
Committer: Johannes Berg <johannes.berg@intel.com>
Commit Date: Fri Jan 23 10:47:40 2015 +0100

Files Changed: 1
Lines Added: 15
Lines Removed: 14
Total Changes: 29
