{
  "hash": "f5e94d10e4c468357019e5c28d48499f677b284f",
  "hash_short": "f5e94d10",
  "subject": "Merge tag 'drm-next-2020-04-08' of git://anongit.freedesktop.org/drm/drm",
  "body": "Pull drm fixes from Dave Airlie:\n \"This is a set of fixes that have queued up, I think I might have\n  another pull with some more before rc1 but I'd like to dequeue what I\n  have now just in case Easter is more eggciting that expected.\n\n  The main thing in here is a fix for a longstanding nouveau power\n  management issues on certain laptops, it should help runtime\n  suspend/resume for a lot of people.\n\n  There is also a reverted patch for some drm_mm behaviour in atomic\n  contexts.\n\n  Summary:\n\n  core:\n   - revert drm_mm atomic patch\n   - dt binding fixes\n\n  fbcon:\n   - null ptr error fix\n\n  i915:\n   - GVT fixes\n\n  nouveau:\n   - runpm fix\n   - svm fixes\n\n  amdgpu:\n   - HDCP fixes\n   - gfx10 fix\n   - Misc display fixes\n   - BACO fixes\n\n  amdkfd:\n   - Fix memory leak\n\n  vboxvideo:\n   - remove conflicting fbs\n\n  vc4:\n   - mode validation fix\n\n  xen:\n   - fix PTR_ERR usage\"\n\n* tag 'drm-next-2020-04-08' of git://anongit.freedesktop.org/drm/drm: (41 commits)\n  drm/nouveau/kms/nv50-: wait for FIFO space on PIO channels\n  drm/nouveau/nvif: protect waits against GPU falling off the bus\n  drm/nouveau/nvif: access PTIMER through usermode class, if available\n  drm/nouveau/gr/gp107,gp108: implement workaround for HW hanging during init\n  drm/nouveau: workaround runpm fail by disabling PCI power management on certain intel bridges\n  drm/nouveau/svm: remove useless SVM range check\n  drm/nouveau/svm: check for SVM initialized before migrating\n  drm/nouveau/svm: fix vma range check for migration\n  drm/nouveau: remove checks for return value of debugfs functions\n  drm/nouveau/ttm: evict other IO mappings when running out of BAR1 space\n  drm/amdkfd: kfree the wrong pointer\n  drm/amd/display: increase HDCP authentication delay\n  drm/amd/display: Correctly cancel future watchdog and callback events\n  drm/amd/display: Don't try hdcp1.4 when content_type is set to type1\n  drm/amd/powerplay: move the ASIC specific nbio operation out of smu_v11_0.c\n  drm/amd/powerplay: drop redundant BIF doorbell interrupt operations\n  drm/amd/display: Fix dcn21 num_states\n  drm/amd/display: Enable BT2020 in COLOR_ENCODING property\n  drm/amd/display: LFC not working on 2.0x range monitors (v2)\n  drm/amd/display: Support plane level CTM\n  ...",
  "full_message": "Merge tag 'drm-next-2020-04-08' of git://anongit.freedesktop.org/drm/drm\n\nPull drm fixes from Dave Airlie:\n \"This is a set of fixes that have queued up, I think I might have\n  another pull with some more before rc1 but I'd like to dequeue what I\n  have now just in case Easter is more eggciting that expected.\n\n  The main thing in here is a fix for a longstanding nouveau power\n  management issues on certain laptops, it should help runtime\n  suspend/resume for a lot of people.\n\n  There is also a reverted patch for some drm_mm behaviour in atomic\n  contexts.\n\n  Summary:\n\n  core:\n   - revert drm_mm atomic patch\n   - dt binding fixes\n\n  fbcon:\n   - null ptr error fix\n\n  i915:\n   - GVT fixes\n\n  nouveau:\n   - runpm fix\n   - svm fixes\n\n  amdgpu:\n   - HDCP fixes\n   - gfx10 fix\n   - Misc display fixes\n   - BACO fixes\n\n  amdkfd:\n   - Fix memory leak\n\n  vboxvideo:\n   - remove conflicting fbs\n\n  vc4:\n   - mode validation fix\n\n  xen:\n   - fix PTR_ERR usage\"\n\n* tag 'drm-next-2020-04-08' of git://anongit.freedesktop.org/drm/drm: (41 commits)\n  drm/nouveau/kms/nv50-: wait for FIFO space on PIO channels\n  drm/nouveau/nvif: protect waits against GPU falling off the bus\n  drm/nouveau/nvif: access PTIMER through usermode class, if available\n  drm/nouveau/gr/gp107,gp108: implement workaround for HW hanging during init\n  drm/nouveau: workaround runpm fail by disabling PCI power management on certain intel bridges\n  drm/nouveau/svm: remove useless SVM range check\n  drm/nouveau/svm: check for SVM initialized before migrating\n  drm/nouveau/svm: fix vma range check for migration\n  drm/nouveau: remove checks for return value of debugfs functions\n  drm/nouveau/ttm: evict other IO mappings when running out of BAR1 space\n  drm/amdkfd: kfree the wrong pointer\n  drm/amd/display: increase HDCP authentication delay\n  drm/amd/display: Correctly cancel future watchdog and callback events\n  drm/amd/display: Don't try hdcp1.4 when content_type is set to type1\n  drm/amd/powerplay: move the ASIC specific nbio operation out of smu_v11_0.c\n  drm/amd/powerplay: drop redundant BIF doorbell interrupt operations\n  drm/amd/display: Fix dcn21 num_states\n  drm/amd/display: Enable BT2020 in COLOR_ENCODING property\n  drm/amd/display: LFC not working on 2.0x range monitors (v2)\n  drm/amd/display: Support plane level CTM\n  ...",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Tue Apr 7 20:24:34 2020 -0700",
  "author_date_iso": "2020-04-07T20:24:34-07:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Tue Apr 7 20:24:34 2020 -0700",
  "committer_date_iso": "2020-04-07T20:24:34-07:00",
  "files_changed": [
    "drivers/gpu/drm/nouveau/nouveau_svm.c"
  ],
  "files_changed_count": 1,
  "stats": [
    {
      "file": "Documentation/devicetree/bindings/display/panel/panel-dpi.yaml",
      "insertions": 0,
      "deletions": 10
    },
    {
      "file": "Documentation/devicetree/bindings/display/ti/ti,am65x-dss.yaml",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "Documentation/devicetree/bindings/display/ti/ti,j721e-dss.yaml",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "Documentation/devicetree/bindings/display/ti/ti,k2g-dss.yaml",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/dma-buf/Kconfig",
      "insertions": 6,
      "deletions": 5
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/gfx_v10_0.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/amdgpu/gfx_v9_0.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/amdkfd/kfd_device.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm.c",
      "insertions": 10,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/amd/display/amdgpu_dm/amdgpu_dm_hdcp.c",
      "insertions": 10,
      "deletions": 4
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/core/dc.c",
      "insertions": 32,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/core/dc_resource.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dc.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dcn10/dcn10_hw_sequencer.c",
      "insertions": 6,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dcn10/dcn10_optc.c",
      "insertions": 18,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dcn10/dcn10_optc.h",
      "insertions": 3,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dcn10/dcn10_resource.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dcn20/dcn20_resource.c",
      "insertions": 3,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dcn21/dcn21_resource.c",
      "insertions": 14,
      "deletions": 26
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dml/dc_features.h",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/display/dc/dml/display_mode_structs.h",
      "insertions": 4,
      "deletions": 3
    },
    {
      "file": "drivers/gpu/drm/amd/display/modules/freesync/freesync.c",
      "insertions": 19,
      "deletions": 15
    },
    {
      "file": "drivers/gpu/drm/amd/display/modules/hdcp/hdcp.c",
      "insertions": 2,
      "deletions": 3
    },
    {
      "file": "drivers/gpu/drm/amd/display/modules/hdcp/hdcp.h",
      "insertions": 22,
      "deletions": 6
    },
    {
      "file": "drivers/gpu/drm/amd/display/modules/hdcp/hdcp1_execution.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/display/modules/hdcp/hdcp2_execution.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/display/modules/hdcp/hdcp_psp.c",
      "insertions": 22,
      "deletions": 17
    },
    {
      "file": "drivers/gpu/drm/amd/display/modules/inc/mod_hdcp.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/amd/powerplay/arcturus_ppt.c",
      "insertions": 14,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/amd/powerplay/navi10_ppt.c",
      "insertions": 16,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/amd/powerplay/smu_v11_0.c",
      "insertions": 1,
      "deletions": 23
    },
    {
      "file": "drivers/gpu/drm/amd/powerplay/vega20_ppt.c",
      "insertions": 13,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/drm_mm.c",
      "insertions": 1,
      "deletions": 7
    },
    {
      "file": "drivers/gpu/drm/i915/gvt/cmd_parser.c",
      "insertions": 4,
      "deletions": 12
    },
    {
      "file": "drivers/gpu/drm/i915/gvt/display.c",
      "insertions": 3,
      "deletions": 3
    },
    {
      "file": "drivers/gpu/drm/i915/gvt/handlers.c",
      "insertions": 6,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/i915/gvt/scheduler.c",
      "insertions": 2,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/nouveau/dispnv04/dac.c",
      "insertions": 2,
      "deletions": 1
    },
    {
      "file": "drivers/gpu/drm/nouveau/dispnv04/hw.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/nouveau/dispnv50/base507c.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/nouveau/dispnv50/core507d.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/nouveau/dispnv50/corec37d.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/nouveau/dispnv50/curs507a.c",
      "insertions": 18,
      "deletions": 3
    },
    {
      "file": "drivers/gpu/drm/nouveau/dispnv50/cursc37a.c",
      "insertions": 6,
      "deletions": 3
    },
    {
      "file": "drivers/gpu/drm/nouveau/dispnv50/disp.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/nouveau/dispnv50/ovly827e.c",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/nouveau/dispnv50/wndw.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/nouveau/include/nvif/device.h",
      "insertions": 0,
      "deletions": 21
    },
    {
      "file": "drivers/gpu/drm/nouveau/include/nvif/timer.h",
      "insertions": 35,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/nouveau/include/nvif/user.h",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/nouveau/nouveau_bo.c",
      "insertions": 7,
      "deletions": 2
    },
    {
      "file": "drivers/gpu/drm/nouveau/nouveau_debugfs.c",
      "insertions": 8,
      "deletions": 12
    },
    {
      "file": "drivers/gpu/drm/nouveau/nouveau_drm.c",
      "insertions": 63,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/nouveau/nouveau_drv.h",
      "insertions": 2,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/nouveau/nouveau_svm.c",
      "insertions": 6,
      "deletions": 3
    },
    {
      "file": "drivers/gpu/drm/nouveau/nvif/Kbuild",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/nouveau/nvif/device.c",
      "insertions": 9,
      "deletions": 5
    },
    {
      "file": "drivers/gpu/drm/nouveau/nvif/timer.c",
      "insertions": 56,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/nouveau/nvif/userc361.c",
      "insertions": 14,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/nouveau/nvkm/engine/gr/gf100.c",
      "insertions": 26,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/panel/panel-simple.c",
      "insertions": 0,
      "deletions": 11
    },
    {
      "file": "drivers/gpu/drm/vboxvideo/vbox_drv.c",
      "insertions": 4,
      "deletions": 0
    },
    {
      "file": "drivers/gpu/drm/vc4/vc4_hdmi.c",
      "insertions": 16,
      "deletions": 4
    },
    {
      "file": "drivers/gpu/drm/xen/xen_drm_front.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "drivers/video/fbdev/core/fbcon.c",
      "insertions": 3,
      "deletions": 0
    }
  ],
  "total_insertions": 538,
  "total_deletions": 227,
  "total_changes": 765,
  "parents": [
    "9ebe5422ad6c0309d3a2d4cd099b8410d2b6c6b0",
    "12ab316ced2c5f32ced0e6300a054db644b5444a"
  ],
  "branches": [
    "* development",
    "master",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [
    "v5.7-rc1"
  ],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "authentication"
    ]
  },
  "fix_type": "security",
  "file_results": [
    {
      "file": "drivers/gpu/drm/nouveau/nouveau_svm.c",
      "pre_version": false,
      "post_version": true,
      "patch": true
    }
  ]
}