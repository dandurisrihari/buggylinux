{
  "hash": "2a987e65025e2b79c6d453b78cb5985ac6e5eb26",
  "hash_short": "2a987e65",
  "subject": "Merge tag 'perf-tools-fixes-for-v5.16-2021-12-07' of git://git.kernel.org/pub/scm/linux/kernel/git/acme/linux",
  "body": "Pull perf tools fixes from Arnaldo Carvalho de Melo:\n\n - Fix SMT detection fast read path on sysfs.\n\n - Fix memory leaks when processing feature headers in perf.data files.\n\n - Fix 'Simple expression parser' 'perf test' on arch without CPU die\n   topology info, such as s/390.\n\n - Fix building perf with BUILD_BPF_SKEL=1.\n\n - Fix 'perf bench' by reverting \"perf bench: Fix two memory leaks\n   detected with ASan\".\n\n - Fix itrace space allowed for new attributes in 'perf script'.\n\n - Fix the build feature detection fast path, that was always failing on\n   systems with python3 development packages, speeding up the build.\n\n - Reset shadow counts before loading, fixing metrics using\n   duration_time.\n\n - Sync more kernel headers changed by the new futex_waitv syscall: s390\n   and powerpc.\n\n* tag 'perf-tools-fixes-for-v5.16-2021-12-07' of git://git.kernel.org/pub/scm/linux/kernel/git/acme/linux:\n  perf bpf_skel: Do not use typedef to avoid error on old clang\n  perf bpf: Fix building perf with BUILD_BPF_SKEL=1 by default in more distros\n  perf header: Fix memory leaks when processing feature headers\n  perf test: Reset shadow counts before loading\n  perf test: Fix 'Simple expression parser' test on arch without CPU die topology info\n  tools build: Remove needless libpython-version feature check that breaks test-all fast path\n  perf tools: Fix SMT detection fast read path\n  tools headers UAPI: Sync powerpc syscall table file changed by new futex_waitv syscall\n  perf inject: Fix itrace space allowed for new attributes\n  tools headers UAPI: Sync s390 syscall table file changed by new futex_waitv syscall\n  Revert \"perf bench: Fix two memory leaks detected with ASan\"",
  "full_message": "Merge tag 'perf-tools-fixes-for-v5.16-2021-12-07' of git://git.kernel.org/pub/scm/linux/kernel/git/acme/linux\n\nPull perf tools fixes from Arnaldo Carvalho de Melo:\n\n - Fix SMT detection fast read path on sysfs.\n\n - Fix memory leaks when processing feature headers in perf.data files.\n\n - Fix 'Simple expression parser' 'perf test' on arch without CPU die\n   topology info, such as s/390.\n\n - Fix building perf with BUILD_BPF_SKEL=1.\n\n - Fix 'perf bench' by reverting \"perf bench: Fix two memory leaks\n   detected with ASan\".\n\n - Fix itrace space allowed for new attributes in 'perf script'.\n\n - Fix the build feature detection fast path, that was always failing on\n   systems with python3 development packages, speeding up the build.\n\n - Reset shadow counts before loading, fixing metrics using\n   duration_time.\n\n - Sync more kernel headers changed by the new futex_waitv syscall: s390\n   and powerpc.\n\n* tag 'perf-tools-fixes-for-v5.16-2021-12-07' of git://git.kernel.org/pub/scm/linux/kernel/git/acme/linux:\n  perf bpf_skel: Do not use typedef to avoid error on old clang\n  perf bpf: Fix building perf with BUILD_BPF_SKEL=1 by default in more distros\n  perf header: Fix memory leaks when processing feature headers\n  perf test: Reset shadow counts before loading\n  perf test: Fix 'Simple expression parser' test on arch without CPU die topology info\n  tools build: Remove needless libpython-version feature check that breaks test-all fast path\n  perf tools: Fix SMT detection fast read path\n  tools headers UAPI: Sync powerpc syscall table file changed by new futex_waitv syscall\n  perf inject: Fix itrace space allowed for new attributes\n  tools headers UAPI: Sync s390 syscall table file changed by new futex_waitv syscall\n  Revert \"perf bench: Fix two memory leaks detected with ASan\"",
  "author_name": "Linus Torvalds",
  "author_email": "torvalds@linux-foundation.org",
  "author_date": "Tue Dec 7 15:36:45 2021 -0800",
  "author_date_iso": "2021-12-07T15:36:45-08:00",
  "committer_name": "Linus Torvalds",
  "committer_email": "torvalds@linux-foundation.org",
  "committer_date": "Tue Dec 7 15:36:45 2021 -0800",
  "committer_date_iso": "2021-12-07T15:36:45-08:00",
  "files_changed": [],
  "files_changed_count": 0,
  "stats": [
    {
      "file": "tools/build/Makefile.feature",
      "insertions": 0,
      "deletions": 1
    },
    {
      "file": "tools/build/feature/Makefile",
      "insertions": 0,
      "deletions": 4
    },
    {
      "file": "tools/build/feature/test-all.c",
      "insertions": 0,
      "deletions": 5
    },
    {
      "file": "tools/build/feature/test-libpython-version.c",
      "insertions": 0,
      "deletions": 11
    },
    {
      "file": "tools/perf/Makefile.config",
      "insertions": 0,
      "deletions": 2
    },
    {
      "file": "tools/perf/arch/powerpc/entry/syscalls/syscall.tbl",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/perf/arch/s390/entry/syscalls/syscall.tbl",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/perf/bench/sched-messaging.c",
      "insertions": 0,
      "deletions": 4
    },
    {
      "file": "tools/perf/builtin-inject.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "tools/perf/tests/expr.c",
      "insertions": 3,
      "deletions": 1
    },
    {
      "file": "tools/perf/tests/parse-metric.c",
      "insertions": 1,
      "deletions": 0
    },
    {
      "file": "tools/perf/util/bpf_skel/bperf.h",
      "insertions": 0,
      "deletions": 14
    },
    {
      "file": "tools/perf/util/bpf_skel/bperf_follower.bpf.c",
      "insertions": 14,
      "deletions": 5
    },
    {
      "file": "tools/perf/util/bpf_skel/bperf_leader.bpf.c",
      "insertions": 14,
      "deletions": 5
    },
    {
      "file": "tools/perf/util/bpf_skel/bpf_prog_profiler.bpf.c",
      "insertions": 1,
      "deletions": 1
    },
    {
      "file": "tools/perf/util/header.c",
      "insertions": 10,
      "deletions": 5
    },
    {
      "file": "tools/perf/util/smt.c",
      "insertions": 1,
      "deletions": 1
    }
  ],
  "total_insertions": 47,
  "total_deletions": 60,
  "total_changes": 107,
  "parents": [
    "957232439c2a647e450c21cd49ecadabba05e2a0",
    "5a897531e00243cebbcc4dbe4ab06cd559ccf53f"
  ],
  "branches": [
    "* development",
    "remotes/origin/HEAD -> origin/master",
    "remotes/origin/master"
  ],
  "tags": [],
  "is_merge": true,
  "security_info": {
    "cve_ids": [],
    "security_keywords": [
      "inject"
    ]
  },
  "fix_type": "security",
  "file_results": []
}